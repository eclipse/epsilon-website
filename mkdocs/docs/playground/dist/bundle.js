/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./js/Backend.js":
/*!***********************!*\
  !*** ./js/Backend.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Backend\": () => (/* binding */ Backend)\n/* harmony export */ });\nclass Backend {\n\n    services = {};\n\n    configure() {\n        var xhr = new XMLHttpRequest();\n        var url = \"backend.json\";\n        xhr.open(\"GET\", url, false);\n        xhr.send();\n        if (xhr.status === 200) {\n            var json = JSON.parse(xhr.responseText);\n            for (const service of json.services) {\n                this.services[service.name] = service.url;\n            }\n        }\n    }\n\n    getRunEpsilonService() {\n        return this.services[\"RunEpsilonFunction\"];\n    }\n\n    getFlexmiToPlantUMLService() {\n        return this.services[\"FlexmiToPlantUMLFunction\"];\n    }\n\n    getEmfaticToPlantUMLService() {\n        return this.services[\"EmfaticToPlantUMLFunction\"];\n    }\n\n    getShortURLService() {\n        return this.services[\"ShortURLFunction\"];\n    }\n}\n\n\n\n//# sourceURL=webpack://playground/./js/Backend.js?");

/***/ }),

/***/ "./js/ConsolePanel.js":
/*!****************************!*\
  !*** ./js/ConsolePanel.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ConsolePanel\": () => (/* binding */ ConsolePanel)\n/* harmony export */ });\n/* harmony import */ var _Panel_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Panel.js */ \"./js/Panel.js\");\n/* harmony import */ var _Layout_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Layout.js */ \"./js/Layout.js\");\n/* harmony import */ var _Playground_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Playground.js */ \"./js/Playground.js\");\n/* harmony import */ var ace_builds__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ace-builds */ \"./node_modules/ace-builds/src-noconflict/ace.js\");\n/* harmony import */ var ace_builds__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(ace_builds__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n\nclass ConsolePanel extends _Panel_js__WEBPACK_IMPORTED_MODULE_0__.Panel {\n\n    constructor() {\n        super(\"console\");\n        this.editor.setReadOnly(true);\n        this.editor.setValue(\"\", 1);\n        this.element.dataset.customButtons = JSON.stringify(this.getButtons());\n        this.detectHyperlinks(this.editor);\n        this.setTitleAndIcon(\"Console\", \"console\");   \n    }\n\n    getButtons() {\n        return [{\n            html: this.buttonHtml(\"clear\", \"Clear the console\"),\n            cls: \"sys-button\",\n            onclick: \"consolePanel.setValue('')\"\n        }];\n    }\n\n    setOutput(str) {\n        document.getElementById(\"consoleEditor\").style.color = \"black\";\n        this.editor.getSession().setUseWrapMode(false);\n        this.editor.setValue(str, 1);\n\n    }\n\n    setError(str) {\n        document.getElementById(\"consoleEditor\").style.color = \"#CD352C\";\n        this.editor.getSession().setUseWrapMode(true);\n        this.editor.setValue(str, 1);\n    }\n\n    fit() {\n        var editorElement = document.getElementById(this.id + \"Editor\");\n        if (editorElement != null) {\n            editorElement.parentNode.style = \"flex-basis: calc(100% - 4px);\";\n        }\n        this.editor.resize();\n    }\n\n    createElement() {\n        var root = document.createElement(\"div\");\n        root.setAttribute(\"data-role\", \"panel\");\n        root.setAttribute(\"id\", this.id + \"Panel\");\n\n        var editor = document.createElement(\"div\");\n        editor.setAttribute(\"id\", this.id + \"Editor\");\n        editor.setAttribute(\"class\", \"editor\");\n\n        root.appendChild(editor);\n\n        return root;\n    }\n\n    detectHyperlinks(editor) {\n        var locationRegexp = /\\(((.+?)@(\\d+):(\\d+)-(\\d+):(\\d+))\\)/i;\n\n        (0,ace_builds__WEBPACK_IMPORTED_MODULE_3__.define)(\"hoverlink\", [], function (require, exports, module) {\n            \"use strict\";\n\n            var oop = require(\"ace/lib/oop\");\n            var event = require(\"ace/lib/event\");\n            var Range = require(\"ace/range\").Range;\n            var EventEmitter = require(\"ace/lib/event_emitter\").EventEmitter;\n\n            var HoverLink = function (editor) {\n                if (editor.hoverLink)\n                    return;\n                editor.hoverLink = this;\n                this.editor = editor;\n\n                this.update = this.update.bind(this);\n                this.onMouseMove = this.onMouseMove.bind(this);\n                this.onMouseOut = this.onMouseOut.bind(this);\n                this.onClick = this.onClick.bind(this);\n                event.addListener(editor.renderer.scroller, \"mousemove\", this.onMouseMove);\n                event.addListener(editor.renderer.content, \"mouseout\", this.onMouseOut);\n                event.addListener(editor.renderer.content, \"click\", this.onClick);\n            };\n\n            (function () {\n                oop.implement(this, EventEmitter);\n\n                this.token = {};\n                this.range = new Range();\n\n                this.update = function () {\n                    this.$timer = null;\n                    var editor = this.editor;\n                    var renderer = editor.renderer;\n\n                    var canvasPos = renderer.scroller.getBoundingClientRect();\n                    var offset = (this.x + renderer.scrollLeft - canvasPos.left - renderer.$padding) / renderer.characterWidth;\n                    var row = Math.floor((this.y + renderer.scrollTop - canvasPos.top) / renderer.lineHeight);\n                    var col = Math.round(offset);\n\n                    var screenPos = { row: row, column: col, side: offset - col > 0 ? 1 : -1 };\n                    var session = editor.session;\n                    var docPos = session.screenToDocumentPosition(screenPos.row, screenPos.column);\n\n                    var selectionRange = editor.selection.getRange();\n                    if (!selectionRange.isEmpty()) {\n                        if (selectionRange.start.row <= row && selectionRange.end.row >= row)\n                            return this.clear();\n                    }\n\n                    var line = editor.session.getLine(docPos.row);\n                    if (docPos.column == line.length) {\n                        var clippedPos = editor.session.documentToScreenPosition(docPos.row, docPos.column);\n                        if (clippedPos.column != screenPos.column) {\n                            return this.clear();\n                        }\n                    }\n\n                    var token = this.findLink(docPos.row, docPos.column);\n                    this.link = token;\n                    if (!token) {\n                        return this.clear();\n                    }\n                    this.isOpen = true;\n                    editor.renderer.setCursorStyle(\"pointer\");\n\n                    session.removeMarker(this.marker);\n\n                    this.range = new Range(token.row, token.start, token.row, token.start + token.value.length);\n                    this.marker = session.addMarker(this.range, \"ace_link_marker\", \"text\", true);\n                };\n\n                this.clear = function () {\n                    if (this.isOpen) {\n                        this.editor.session.removeMarker(this.marker);\n                        this.editor.renderer.setCursorStyle(\"\");\n                        this.isOpen = false;\n                    }\n                };\n\n                this.getMatchAround = function (regExp, string, col) {\n                    var match;\n                    regExp.lastIndex = 0;\n                    string.replace(regExp, function (str) {\n                        var offset = arguments[arguments.length - 2];\n                        var length = str.length;\n                        if (offset <= col && offset + length >= col)\n                            match = {\n                                start: offset,\n                                value: str\n                            };\n                    });\n\n                    return match;\n                };\n\n                this.onClick = function () {\n                    if (this.link) {\n                        this.link.editor = this.editor;\n                        this._signal(\"open\", this.link);\n                        this.clear();\n                    }\n                };\n\n                this.findLink = function (row, column) {\n                    var editor = this.editor;\n                    var session = editor.session;\n                    var line = session.getLine(row);\n\n                    var match = this.getMatchAround(locationRegexp, line, column);\n                    if (!match)\n                        return;\n\n                    match.row = row;\n                    return match;\n                };\n\n                this.onMouseMove = function (e) {\n                    if (this.editor.$mouseHandler.isMousePressed) {\n                        if (!this.editor.selection.isEmpty())\n                            this.clear();\n                        return;\n                    }\n                    this.x = e.clientX;\n                    this.y = e.clientY;\n                    this.update();\n                };\n\n                this.onMouseOut = function (e) {\n                    this.clear();\n                };\n\n                this.destroy = function () {\n                    this.onMouseOut();\n                    event.removeListener(this.editor.renderer.scroller, \"mousemove\", this.onMouseMove);\n                    event.removeListener(this.editor.renderer.content, \"mouseout\", this.onMouseOut);\n                    delete this.editor.hoverLink;\n                };\n\n            }).call(HoverLink.prototype);\n\n            exports.HoverLink = HoverLink;\n\n        });\n\n        var HoverLink = ace.require(\"hoverlink\").HoverLink;\n        editor.hoverLink = new HoverLink(editor);\n        editor.hoverLink.on(\"open\", function (e) {\n            var location = e.value;\n            if (editor.getValue().indexOf(location) > -1) {\n                var matches = location.match(locationRegexp);\n                var Range = ace.require(\"ace/range\").Range;\n                var panel = _Playground_js__WEBPACK_IMPORTED_MODULE_2__.programPanel;\n\n                if (_Playground_js__WEBPACK_IMPORTED_MODULE_2__.language == \"egx\" && matches[2].split(\".\").pop() == \"egl\") {\n                    panel = _Playground_js__WEBPACK_IMPORTED_MODULE_2__.secondProgramPanel;\n                }\n\n                panel.getEditor().selection.setRange(new Range(\n                    parseInt(matches[3]) - 1, parseInt(matches[4]),\n                    parseInt(matches[5]) - 1, parseInt(matches[6])));\n            }\n        });\n    }\n}\n\n\n\n\n//# sourceURL=webpack://playground/./js/ConsolePanel.js?");

/***/ }),

/***/ "./js/DownloadDialog.js":
/*!******************************!*\
  !*** ./js/DownloadDialog.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DownloadDialog\": () => (/* binding */ DownloadDialog)\n/* harmony export */ });\n/* harmony import */ var handlebars_lib_handlebars__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! handlebars/lib/handlebars */ \"./node_modules/handlebars/lib/handlebars.js\");\n/* harmony import */ var jszip__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jszip */ \"./node_modules/jszip/dist/jszip.min.js\");\n/* harmony import */ var jszip__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jszip__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _Playground_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Playground.js */ \"./js/Playground.js\");\n\n\n\n\nclass DownloadDialog {\n    show(event) {\n        event.preventDefault();\n        var self = this;\n        Metro.dialog.create({\n            title: \"Download\",\n            content: \"<p>You can download this example and run it locally through Gradle or Maven. Please choose your preferred format below. </p><br/><select id='format' data-role='select'><option value='gradle'>Gradle</option><option value='maven'>Maven</option></select>\",\n            actions: [\n               {\n                    caption: \"Download\",\n                    cls: \"js-dialog-close success\",\n                    onclick: function(){\n                        var zip = new (jszip__WEBPACK_IMPORTED_MODULE_1___default())();\n                        zip.file(\"program.\" + _Playground_js__WEBPACK_IMPORTED_MODULE_2__.language, programPanel.getEditor().getValue());\n                        if (_Playground_js__WEBPACK_IMPORTED_MODULE_2__.language == \"egx\") zip.file(\"template.egl\", _Playground_js__WEBPACK_IMPORTED_MODULE_2__.secondProgramPanel.getEditor().getValue());\n\n                        if (_Playground_js__WEBPACK_IMPORTED_MODULE_2__.language != \"etl\") {\n                            zip.file(\"model.flexmi\", firstModelPanel.getValue());\n                            zip.file(\"metamodel.emf\", firstMetamodelPanel.getValue());\n                        }\n                        else {\n                            zip.file(\"source.flexmi\", firstModelPanel.getValue());\n                            zip.file(\"source.emf\", firstMetamodelPanel.getValue());\n                            zip.file(\"target.emf\", secondMetamodelPanel.getValue());\n                        }\n    \n                        var format = document.getElementById(\"format\").value;\n                        \n                        var templateData = {\n                            language: _Playground_js__WEBPACK_IMPORTED_MODULE_2__.language, \n                            task: _Playground_js__WEBPACK_IMPORTED_MODULE_2__.language == \"egx\" ? \"egl\" : _Playground_js__WEBPACK_IMPORTED_MODULE_2__.language,\n                            etl: _Playground_js__WEBPACK_IMPORTED_MODULE_2__.language == \"etl\",\n                            egl: _Playground_js__WEBPACK_IMPORTED_MODULE_2__.language == \"egl\"\n                        };\n    \n                        if (format == \"gradle\") {\n                            var template = handlebars_lib_handlebars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].compile(self.fetchTemplate(\"build.gradle\"));\n                            zip.file(\"build.gradle\", template(templateData));\n                            zip.file(\"readme.md\", self.fetchTemplate(\"readme-gradle.txt\"));\n                        }\n                        else if (format == \"maven\") {\n                            var template = handlebars_lib_handlebars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].compile(self.fetchTemplate(\"pom.xml\"));\n                            zip.file(\"pom.xml\", template(templateData));\n                            zip.file(\"readme.md\", self.fetchTemplate(\"readme-maven.txt\"));\n                        }\n    \n                        // var img = zip.folder(\"images\");\n                        zip.generateAsync({type:\"blob\"})\n                        .then(function(content) {\n                            var blob = new Blob([content], { type: \"application/zip\" });\n                            var url = window.URL || window.webkitURL;\n                            var link = url.createObjectURL(blob);\n                            var a = document.createElement(\"a\");\n                            a.setAttribute(\"download\", \"playground-example.zip\");\n                            a.setAttribute(\"href\", link);\n                            a.click();\n                        });\n                    }\n                },\n               {\n                    caption: \"Cancel\",\n                    cls: \"js-dialog-close\"\n                }\n            ]\n        });\n    }\n\n    /**\n     * Fetches the content of a file under the templates folder\n     */\n    fetchTemplate(name) {\n        var xhr = new XMLHttpRequest();\n        var url = \"templates/\" + name;\n        xhr.open(\"GET\", url, false);\n        xhr.send();\n        if (xhr.status === 200) {    \n            return xhr.responseText;\n        }\n    }\n}\n\n\n\n//# sourceURL=webpack://playground/./js/DownloadDialog.js?");

/***/ }),

/***/ "./js/ExampleManager.js":
/*!******************************!*\
  !*** ./js/ExampleManager.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ExampleManager\": () => (/* binding */ ExampleManager)\n/* harmony export */ });\n/* harmony import */ var _Playground_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Playground.js */ \"./js/Playground.js\");\n\n\nclass ExampleManager {\n\n    exampleId;\n    visibleExamples = 15;\n    examplesUrl = new URL(\"examples/examples.json\", document.baseURI).href;\n    customExamplesUrl = false;\n    examples = {};\n\n    constructor() {\n        var parameters = new URLSearchParams(window.location.search);\n        if (parameters.has(\"examples\")) {\n            this.customExamplesUrl = true;\n            this.examplesUrl = parameters.get(\"examples\");\n        }\n\n        var parameterKeys = Array.from(parameters.keys());\n\n        for (const key of parameterKeys) {\n            if (!parameters.get(key)) {\n                this.exampleId = key;\n                break;\n            }\n        }\n\n        this.fetchExamples();\n        if (!this.exampleId) this.exampleId = this.getFirstExample();\n    }\n\n    /**\n     * Fetches all the examples from examplesUrl\n     * and pupulates the examples array\n     */\n    fetchExamples() {\n        var xhr = new XMLHttpRequest();\n        xhr.open(\"GET\", this.examplesUrl, false);\n        xhr.send();\n        if (xhr.status === 200) {    \n            var json = JSON.parse(xhr.responseText);\n            var more = document.getElementById(\"more\");\n            \n            // If we have fewer examples than we can display, we don't need the More menu\n            if (json.examples.length <= this.visibleExamples) more.style.display = \"none\";\n\n            var i = 0;\n            for (const example of json.examples) {\n                this.examples[example.id] = example;\n\n                // Add a link for the example to the left hand side menu\n                var li = document.createElement(\"li\");\n                \n                var a = document.createElement(\"a\");\n                a.href = \"?\" + example.id;\n                if (this.customExamplesUrl) {\n                    a.href += \"&examples=\" + this.examplesUrl;\n                }\n                li.appendChild(a);\n\n                var icon = document.createElement(\"span\");\n                icon.classList.add(\"icon\");\n                a.appendChild(icon);\n\n                var mif = document.createElement(\"span\");\n                mif.classList.add(\"mif-example-16\");\n                mif.classList.add(\"mif-\" + example.language);\n                icon.appendChild(mif);\n\n                var caption = document.createElement(\"caption\");\n                caption.innerHTML = example.title;\n                caption.classList.add(\"caption\");\n                a.appendChild(caption);\n\n                if (i<this.visibleExamples) {\n                    more.parentNode.insertBefore(li, more);\n                }\n                else {\n                    var moreMenu = document.getElementById(\"moreMenu\");\n                    moreMenu.appendChild(li);\n                }\n                i++;\n            }\n        }\n    }\n\n    getSelectedExample() {\n        return this.fetchExample(this.exampleId);\n    }\n\n    hasExample(id) {\n       return this.examples[id] != null;\n    }\n\n    getFirstExample() {\n        return Object.keys(this.examples)[0];\n    }\n\n    getExampleId() {\n        return this.exampleId;\n    }\n\n    /**\n     * Fetches the contents of the example with the provided ID\n     */ \n    fetchExample(id) {\n        if (!this.hasExample(id)) {\n            var xhr = new XMLHttpRequest();\n            \n            xhr.open(\"POST\", _Playground_js__WEBPACK_IMPORTED_MODULE_0__.backend.getShortURLService(), false);\n            xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n            var data = JSON.stringify({\"shortened\": id});\n            xhr.send(data);\n            if (xhr.status === 200) {\n                try {\n                    var content = atob(JSON.parse(xhr.responseText).content);\n                    return JSON.parse(content);\n                }\n                catch (err) {\n                    console.log(\"Fetching example \" + id + \" failed\");\n                    // Ignore the error and return a default example later on\n                }\n            }\n        }\n        else {\n            var example = this.examples[id];\n            if (example.program != null) example.program = this.fetchFile(example.program);\n            if (example.secondProgram != null) example.secondProgram = this.fetchFile(example.secondProgram);\n            if (example.flexmi != null) example.flexmi = this.fetchFile(example.flexmi);\n            if (example.emfatic != null) example.emfatic = this.fetchFile(example.emfatic);\n            if (example.secondFlexmi != null) example.secondFlexmi = this.fetchFile(example.secondFlexmi);\n            if (example.secondEmfatic != null) example.secondEmfatic = this.fetchFile(example.secondEmfatic);\n            return example;\n        }\n\n        // If we are here it means that such an example has not been found\n        var example = {};\n        example.language = \"eol\";\n        example.program = \"// Example \" + id + \" has not been found\";\n        example.secondProgram = \"\";\n        example.flexmi = \"\";\n        example.secondFlexmi = \"\";\n        example.emfatic = \"\";\n        example.secondEmfatic = \"\";\n        return example;\n    }\n\n    /**\n     * Fetches the content of a file under the examples folder\n     * This could be an Epsilon program, a Flexmi model or an Emfatic metamodel\n     */\n    fetchFile(name) {\n        var xhr = new XMLHttpRequest();\n        var url = new URL(name, this.examplesUrl).href;\n        xhr.open(\"GET\", url, false);\n        xhr.send();\n        if (xhr.status === 200) {    \n            return xhr.responseText;\n        }\n    }\n}\n\n\n\n//# sourceURL=webpack://playground/./js/ExampleManager.js?");

/***/ }),

/***/ "./js/Layout.js":
/*!**********************!*\
  !*** ./js/Layout.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Layout\": () => (/* binding */ Layout)\n/* harmony export */ });\n/* harmony import */ var _Playground_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Playground.js */ \"./js/Playground.js\");\n\n\nclass Layout {\n\n    create(rootId, language) {\n        var root = document.getElementById(rootId);\n        root.innerHTML = \"\";\n\n        var splitter;\n        \n        if (language == \"eol\") {\n            splitter = Layout.createHorizontalSplitter(\n                [\n                    Layout.createVerticalSplitter([_Playground_js__WEBPACK_IMPORTED_MODULE_0__.programPanel.getElement(), _Playground_js__WEBPACK_IMPORTED_MODULE_0__.consolePanel.getElement()]),\n                    Layout.createVerticalSplitter([_Playground_js__WEBPACK_IMPORTED_MODULE_0__.firstModelPanel.getElement(), _Playground_js__WEBPACK_IMPORTED_MODULE_0__.firstMetamodelPanel.getElement()])\n                ]\n            );\n        }\n        else if (language == \"evl\" || language == \"epl\" || language == \"egl\") {\n            splitter = Layout.createHorizontalSplitter(\n                [\n                    Layout.createVerticalSplitter([_Playground_js__WEBPACK_IMPORTED_MODULE_0__.programPanel.getElement(), _Playground_js__WEBPACK_IMPORTED_MODULE_0__.consolePanel.getElement()]),\n                    Layout.createHorizontalSplitter([\n                        Layout.createVerticalSplitter([_Playground_js__WEBPACK_IMPORTED_MODULE_0__.firstModelPanel.getElement(), _Playground_js__WEBPACK_IMPORTED_MODULE_0__.firstMetamodelPanel.getElement()]),\n                        Layout.createVerticalSplitter([_Playground_js__WEBPACK_IMPORTED_MODULE_0__.thirdModelPanel.getElement()])\n                    ], \"50, 50\")\n                ], \"33, 64\"\n            );\n        }\n        else if (language == \"etl\" || language == \"flock\") {\n            splitter = Layout.createHorizontalSplitter(\n                [\n                    Layout.createVerticalSplitter([_Playground_js__WEBPACK_IMPORTED_MODULE_0__.programPanel.getElement(), _Playground_js__WEBPACK_IMPORTED_MODULE_0__.consolePanel.getElement()]),\n                    Layout.createHorizontalSplitter([\n                        Layout.createVerticalSplitter([_Playground_js__WEBPACK_IMPORTED_MODULE_0__.firstModelPanel.getElement(), _Playground_js__WEBPACK_IMPORTED_MODULE_0__.firstMetamodelPanel.getElement()]),\n                        Layout.createVerticalSplitter([_Playground_js__WEBPACK_IMPORTED_MODULE_0__.secondModelPanel.getElement(), _Playground_js__WEBPACK_IMPORTED_MODULE_0__.secondMetamodelPanel.getElement()])\n                    ], \"50, 50\")\n                ], \"33, 64\"\n            );\n        }\n        else if (language == \"egx\") {\n            splitter = Layout.createHorizontalSplitter(\n                [\n                    Layout.createVerticalSplitter([Layout.createVerticalSplitter([_Playground_js__WEBPACK_IMPORTED_MODULE_0__.programPanel.getElement(), _Playground_js__WEBPACK_IMPORTED_MODULE_0__.secondProgramPanel.getElement()]), _Playground_js__WEBPACK_IMPORTED_MODULE_0__.consolePanel.getElement()]),\n                    Layout.createHorizontalSplitter([\n                        Layout.createVerticalSplitter([_Playground_js__WEBPACK_IMPORTED_MODULE_0__.firstModelPanel.getElement(), _Playground_js__WEBPACK_IMPORTED_MODULE_0__.firstMetamodelPanel.getElement()]),\n                        Layout.createVerticalSplitter([_Playground_js__WEBPACK_IMPORTED_MODULE_0__.thirdModelPanel.getElement()])\n                    ], \"50, 50\")\n                ], \"33, 64\"\n            );\n        }\n\n        splitter.setAttribute(\"class\", \"h-100\");\n        splitter.setAttribute(\"id\", \"splitter\");\n        splitter.setAttribute(\"style\", \"min-height:800px\");\n        root.appendChild(splitter);\n    }\n\n    static createHorizontalSplitter(components, split = \"50, 50\") {\n        return Layout.createSplitter(true, components, split);\n    }\n\n    static createVerticalSplitter(components, split = \"50, 50\") {\n        return Layout.createSplitter(false, components, split);\n    }\n\n    static createSplitter(horizontal, components, split) {\n        var splitter = document.createElement(\"div\");\n        splitter.setAttribute(\"data-role\", \"splitter\");\n        splitter.setAttribute(\"data-on-resize-stop\", \"fit()\");\n        splitter.setAttribute(\"data-on-resize-split\", \"fit()\");\n        splitter.setAttribute(\"data-on-resize-window\", \"fit()\");\n        splitter.setAttribute(\"data-split-sizes\", split);\n\n        if (!horizontal) splitter.setAttribute(\"data-split-mode\", \"vertical\");\n        components.forEach(component => splitter.appendChild(component));\n        return splitter;\n    }\n\n}\n\n\n\n//# sourceURL=webpack://playground/./js/Layout.js?");

/***/ }),

/***/ "./js/MetamodelPanel.js":
/*!******************************!*\
  !*** ./js/MetamodelPanel.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MetamodelPanel\": () => (/* binding */ MetamodelPanel)\n/* harmony export */ });\n/* harmony import */ var _ModelPanel_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ModelPanel.js */ \"./js/ModelPanel.js\");\n\n\nclass MetamodelPanel extends _ModelPanel_js__WEBPACK_IMPORTED_MODULE_0__.ModelPanel {\n    constructor(id) {\n        super(id, true, null);\n        this.element.dataset.customButtons = JSON.stringify(this.getButtons());\n        this.setTitleAndIcon(\"Metamodel\", \"emfatic\");\n    }\n\n    setupSyntaxHighlighting() {\n        this.editor.getSession().setMode(\"ace/mode/emfatic\");\n    }\n\n    getButtons() {\n        return [{\n            html: this.buttonHtml(\"help\", \"Emfatic language reference\"),\n            cls: \"sys-button\",\n            onclick: \"window.open('https://www.eclipse.org/epsilon/doc/articles/playground/#emfatic-metamodels-in-the-playground');\"\n        },{\n            html: this.buttonHtml(\"refresh\", \"Render the metamodel class diagram\"),\n            cls: \"sys-button\",\n            onclick: this.id + \"Panel.refreshDiagram()\"\n        },{\n            html: this.buttonHtml(\"diagram\", \"Show/hide the metamodel class diagram\"),\n            cls: \"sys-button\",\n            onclick: \"toggle('\" + this.id + \"Diagram', function(){\" + this.id + \"Panel.refreshDiagram();})\"\n        }];\n    }\n    \n    refreshDiagram() {\n        this.refreshDiagramImpl(backend.getEmfaticToPlantUMLService(), this.id + \"Diagram\", \"metamodel\", null, this.getEditor());\n    }\n\n}\n\n\n\n//# sourceURL=webpack://playground/./js/MetamodelPanel.js?");

/***/ }),

/***/ "./js/ModelPanel.js":
/*!**************************!*\
  !*** ./js/ModelPanel.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ModelPanel\": () => (/* binding */ ModelPanel)\n/* harmony export */ });\n/* harmony import */ var _Panel_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Panel.js */ \"./js/Panel.js\");\n/* harmony import */ var _Layout_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Layout.js */ \"./js/Layout.js\");\n\n\n\nclass ModelPanel extends _Panel_js__WEBPACK_IMPORTED_MODULE_0__.Panel {\n\n    editable;\n    metamodelPanel;\n\n    constructor(id, editable, metamodelPanel) {\n        super(id);\n        this.editable = editable;\n        this.metamodelPanel = metamodelPanel;\n        this.setupSyntaxHighlighting();\n        this.element.dataset.customButtons = JSON.stringify(this.getButtons());\n        this.setTitleAndIcon(\"Model\", \"flexmi\");\n    }\n\n    showDiagram() {\n        $(\"#\" + this.id + \"Diagram\").show();\n    }\n\n    refreshDiagram() {\n        this.refreshDiagramImpl(backend.getFlexmiToPlantUMLService(), this.id + \"Diagram\", \"model\", this.getEditor(), this.metamodelPanel.getEditor());\n    }\n\n    setupSyntaxHighlighting() {\n        this.editor.getSession().setMode(\"ace/mode/xml\");\n        this.updateSyntaxHighlighting();\n        var self = this;\n        this.editor.getSession().on('change', function () {\n            self.updateSyntaxHighlighting();\n        });\n    }\n\n    /**\n     * Updates the syntax highlighting mode of a Flexmi\n     * editor based on its content. If the content starts with\n     * < then the XML flavour is assumed, otherwise, the YAML\n     * flavour is assumed\n     */\n    updateSyntaxHighlighting() {\n        var val = this.editor.getSession().getValue();\n        if ((val.trim() + \"\").startsWith(\"<\")) {\n            this.editor.getSession().setMode(\"ace/mode/xml\");\n        }\n        else {\n            this.editor.getSession().setMode(\"ace/mode/yaml\");\n        }\n    }\n\n    getButtons() {\n        return this.editable ? [{\n            html: this.buttonHtml(\"help\", \"Flexmi language reference\"),\n            cls: \"sys-button\",\n            onclick: \"window.open('https://www.eclipse.org/epsilon/doc/flexmi');\"\n        }, {\n            html: this.buttonHtml(\"refresh\", \"Render the model object diagram\"),\n            cls: \"sys-button\",\n            onclick: this.id + \"Panel.refreshDiagram()\"\n        }, {\n            html: this.buttonHtml(\"diagram\", \"Show/hide the model object diagram\"),\n            cls: \"sys-button\",\n            onclick: \"toggle('\" + this.id + \"Diagram', function(){\" + this.id + \"Panel.refreshDiagram();})\"\n        }] : [];\n    }\n\n    /* TODO: Rename to something more sensible */\n    refreshDiagramImpl(url, diagramId, diagramName, modelEditor, metamodelEditor) {\n        var xhr = new XMLHttpRequest();\n        xhr.open(\"POST\", url, true);\n        xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState === 4) {\n                if (xhr.status === 200) {\n                    var json = JSON.parse(xhr.responseText);\n\n                    // FIXME: Make both functions return the PlantUML diagram in a \"diagram\" field\n                    var jsonField = \"modelDiagram\";\n                    if (diagramId.endsWith(\"etamodelDiagram\"))\n                        jsonField = \"metamodelDiagram\";\n\n                    if (json.hasOwnProperty(\"error\")) {\n                        consolePanel.setError(json.error);\n                    }\n                    else {\n                        renderDiagram(diagramId, json[jsonField]);\n                    }\n\n                    Metro.notify.killAll();\n                }\n            }\n        };\n        var data = this.modelToJson(modelEditor, metamodelEditor);\n        xhr.send(data);\n        longNotification(\"Rendering \" + diagramName + \" diagram\");\n    }\n\n    modelToJson(modelEditor, metamodelEditor) {\n        return JSON.stringify(\n            {\n                \"flexmi\": modelEditor != null ? modelEditor.getValue() : \"\",\n                \"emfatic\": metamodelEditor != null ? metamodelEditor.getValue() : \"\"\n            }\n        );\n    }\n\n    fit() {\n        // Fit the editor\n        var editorElement = document.getElementById(this.id + \"Editor\");\n        if (editorElement != null) {\n            editorElement.parentNode.parentNode.style = \"flex-basis: calc(100% - 4px); padding: 0px\";\n            var parentElement = editorElement.parentElement.parentElement.parentElement;\n            editorElement.style.width = parentElement.offsetWidth + \"px\";\n            editorElement.style.height = parentElement.offsetHeight - 42 + \"px\";\n        }\n\n        this.editor.resize();\n        \n        // Fit the diagram\n        var diagramElement = document.getElementById(this.id + \"Diagram\");\n        if (diagramElement != null) {\n            var svg = diagramElement.firstElementChild;\n            if (svg != null) {\n                if (svg.tagName == \"svg\") {\n                    diagramElement = diagramElement.parentElement.parentElement.parentElement;\n                    svg.style.width = diagramElement.offsetWidth + \"px\";\n                    svg.style.height = diagramElement.offsetHeight - 42 + \"px\";\n                }\n            }\n        }\n    }\n\n    createElement() {\n        var root = document.createElement(\"div\");\n\n        root.setAttribute(\"data-role\", \"panel\");\n        root.setAttribute(\"class\", \"modelPanel\");\n        root.setAttribute(\"id\", this.id + \"Panel\");\n\n        var editor = document.createElement(\"div\");\n        editor.setAttribute(\"id\", this.id + \"Editor\");\n        editor.setAttribute(\"class\", \"editor\");\n        \n        var diagram = document.createElement(\"div\");\n        diagram.setAttribute(\"id\", this.id + \"Diagram\");\n        diagram.setAttribute(\"class\", \"diagram\");\n        \n        var splitter = _Layout_js__WEBPACK_IMPORTED_MODULE_1__.Layout.createHorizontalSplitter([editor, diagram]);\n        splitter.setAttribute(\"class\", \"h-100\");\n\n        root.appendChild(splitter);\n\n        return root;\n    }\n\n\n}\n\n\n\n//# sourceURL=webpack://playground/./js/ModelPanel.js?");

/***/ }),

/***/ "./js/OutputPanel.js":
/*!***************************!*\
  !*** ./js/OutputPanel.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"OutputPanel\": () => (/* binding */ OutputPanel)\n/* harmony export */ });\n/* harmony import */ var _ModelPanel_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ModelPanel.js */ \"./js/ModelPanel.js\");\n/* harmony import */ var _Playground_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Playground.js */ \"./js/Playground.js\");\n\n\n\nclass OutputPanel extends _ModelPanel_js__WEBPACK_IMPORTED_MODULE_0__.ModelPanel {\n\n    outputType;\n    outputLanguage;\n    language;\n    generatedFiles;\n\n    constructor(id, language, outputType, outputLanguage) {\n        super(id, false, null);\n        this.outputType = outputType;\n        this.outputLanguage = outputLanguage;\n        this.language = language;\n        this.element.dataset.customButtons = JSON.stringify(this.getButtons());\n        this.getEditor().getSession().setMode(\"ace/mode/\" + outputLanguage.toLowerCase());\n        //this.getEditor().getSession().setUseWrapMode(false);\n    }\n\n    setupSyntaxHighlighting() {}\n\n    getButtons() {\n        return (this.outputType == \"code\") ? [{\n            html: this.buttonHtml(\"highlight\", \"Set generated text language\"),\n            cls: \"sys-button\",\n            onclick: this.id + \"Panel.setOutputLanguage()\"\n        }] : [];\n    }\n\n    getSelect() {\n        return Metro.getPlugin(\"#generatedFiles\", 'select');\n    }\n\n    setGeneratedFiles(generatedFiles) {\n        this.generatedFiles = generatedFiles;\n\n        var options = new Map();\n        for (const generatedFile of generatedFiles) {\n            options.set(generatedFile.path, \"<span>\" + generatedFile.path + \"</span>\");\n        }\n\n        var select = this.getSelect();\n        var previousSelection = select.getSelected();\n        \n        select.data(Object.fromEntries(options));\n\n        var selection = generatedFiles.find(f => f.path == previousSelection) != null ? previousSelection : generatedFiles[0]?.path;\n        select.val(selection);\n        this.displayGeneratedFile(selection);\n    }\n\n    setOutputLanguage() {\n        var self = this;\n        Metro.dialog.create({\n            title: \"Set Generated Text Language\",\n            content: \"<p>You can set the language of the generated text to <a href='https://github.com/ajaxorg/ace/tree/master/lib/ace/mode'>any language</a> supported by the <a href='https://ace.c9.io/'>ACE editor</a>. </p><br><input type='text' id='language' data-role='input' value='\" + self.outputLanguage + \"'>\",\n            actions: [\n                {\n                    caption: \"OK\",\n                    cls: \"js-dialog-close success\",\n                    onclick: function () {\n                        var outputLanguage = document.getElementById(\"language\").value;\n                        self.getEditor().getSession().setMode(\"ace/mode/\" + outputLanguage.toLowerCase());\n                    }\n                },\n                {\n                    caption: \"Cancel\",\n                    cls: \"js-dialog-close\"\n                }\n            ]\n        });\n    }\n\n    displayGeneratedFile(path) {\n        for (const generatedFile of this.generatedFiles) {\n            if (generatedFile.path == path) {\n                this.setValue(generatedFile.content);\n                // Set the right syntax highlighting for the file extension\n                var modelist = ace.require(\"ace/ext/modelist\");\n                this.getEditor().getSession().setMode(modelist.getModeForPath(path + \"\").mode);\n                return;\n            }\n        }\n\n        // If the generated path is invalid, reset the editor\n        this.setValue(\"\");\n        this.getEditor().getSession().setMode(\"ace/mode/text\");\n    }\n\n    generatedFileSelected() {\n        this.displayGeneratedFile(this.getSelect().getSelected()[0]);\n    }\n\n    createElement() {\n        var root = super.createElement();\n        root.setAttribute(\"style\", \"padding: 0px\");\n\n        if (_Playground_js__WEBPACK_IMPORTED_MODULE_1__.language == \"egx\") {\n            var select = document.createElement(\"select\");\n            select.setAttribute(\"data-role\", \"select\");\n            select.setAttribute(\"data-on-item-select\", \"thirdModelPanel.generatedFileSelected()\");\n            select.setAttribute(\"id\", \"generatedFiles\");\n            select.setAttribute(\"style\",\"width:100%\");\n            root.insertBefore(select, root.children[0]);\n            console.log(this.select);\n        }\n\n        return root;\n    }\n}\n\n\n\n//# sourceURL=webpack://playground/./js/OutputPanel.js?");

/***/ }),

/***/ "./js/Panel.js":
/*!*********************!*\
  !*** ./js/Panel.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Panel\": () => (/* binding */ Panel)\n/* harmony export */ });\nclass Panel {\n\n    id;\n    editor;\n    element;\n    visible;\n    \n    constructor(id) {\n        this.id = id;\n        this.getElement();\n\n        // Set up the panel's editor\n        this.editor = ace.edit(this.element.querySelector('.editor'));\n        this.editor.setShowPrintMargin(false);\n        this.editor.setTheme(\"ace/theme/eclipse\");\n        this.editor.renderer.setShowGutter(false);\n        this.editor.setFontSize(\"1rem\");\n        this.editor.setOptions({\n            fontSize: \"11pt\",\n            useSoftTabs: true\n        });\n        \n        this.visible = true;\n    }\n\n    setTitleAndIcon(title, icon) {\n        this.setTitle(title);\n        this.setIcon(icon);\n    }\n\n    setTitle(title) {\n        this.element.dataset.titleCaption = title;\n    }\n\n    setIcon(icon) {\n        this.element.dataset.titleIcon = \"<span class='mif-16 mif-\" + icon + \"'></span>\";\n    }\n\n    setVisible(visible) {\n        this.visible = visible;\n    }\n\n    isVisible() {\n        return this.visible;\n    }\n\n    getEditor() {\n        return this.editor;\n    }\n\n    getValue() {\n        return this.editor.getValue();\n    }\n\n    setValue(value) {\n        this.editor.setValue((value+\"\"), 1);\n    }\n\n    buttonHtml(icon, hint) {\n        return \"<span class='mif-\" + icon + \"' data-role='hint' data-hint-text='\" + hint + \"' data-hint-position='bottom'></span>\";\n    }\n\n    fit() {}\n\n    createElement() {}\n\n    getElement() {\n        if (!this.element) {\n            this.element = this.createElement();\n        }\n        return this.element;\n    }\n\n}\n\n\n\n//# sourceURL=webpack://playground/./js/Panel.js?");

/***/ }),

/***/ "./js/Playground.js":
/*!**************************!*\
  !*** ./js/Playground.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"backend\": () => (/* binding */ backend),\n/* harmony export */   \"consolePanel\": () => (/* binding */ consolePanel),\n/* harmony export */   \"examplesManager\": () => (/* binding */ examplesManager),\n/* harmony export */   \"firstMetamodelPanel\": () => (/* binding */ firstMetamodelPanel),\n/* harmony export */   \"firstModelPanel\": () => (/* binding */ firstModelPanel),\n/* harmony export */   \"language\": () => (/* binding */ language),\n/* harmony export */   \"programPanel\": () => (/* binding */ programPanel),\n/* harmony export */   \"secondMetamodelPanel\": () => (/* binding */ secondMetamodelPanel),\n/* harmony export */   \"secondModelPanel\": () => (/* binding */ secondModelPanel),\n/* harmony export */   \"secondProgramPanel\": () => (/* binding */ secondProgramPanel),\n/* harmony export */   \"thirdModelPanel\": () => (/* binding */ thirdModelPanel)\n/* harmony export */ });\n/* harmony import */ var ace_builds_src_min_noconflict_ace__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ace-builds/src-min-noconflict/ace */ \"./node_modules/ace-builds/src-min-noconflict/ace.js\");\n/* harmony import */ var ace_builds_src_min_noconflict_ace__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ace_builds_src_min_noconflict_ace__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var ace_builds_src_min_noconflict_theme_eclipse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ace-builds/src-min-noconflict/theme-eclipse */ \"./node_modules/ace-builds/src-min-noconflict/theme-eclipse.js\");\n/* harmony import */ var ace_builds_src_min_noconflict_theme_eclipse__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(ace_builds_src_min_noconflict_theme_eclipse__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var ace_builds_src_min_noconflict_mode_xml__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ace-builds/src-min-noconflict/mode-xml */ \"./node_modules/ace-builds/src-min-noconflict/mode-xml.js\");\n/* harmony import */ var ace_builds_src_min_noconflict_mode_xml__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(ace_builds_src_min_noconflict_mode_xml__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var ace_builds_src_min_noconflict_mode_yaml__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ace-builds/src-min-noconflict/mode-yaml */ \"./node_modules/ace-builds/src-min-noconflict/mode-yaml.js\");\n/* harmony import */ var ace_builds_src_min_noconflict_mode_yaml__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(ace_builds_src_min_noconflict_mode_yaml__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var ace_builds_src_min_noconflict_mode_java__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ace-builds/src-min-noconflict/mode-java */ \"./node_modules/ace-builds/src-min-noconflict/mode-java.js\");\n/* harmony import */ var ace_builds_src_min_noconflict_mode_java__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(ace_builds_src_min_noconflict_mode_java__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var ace_builds_src_min_noconflict_mode_html__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ace-builds/src-min-noconflict/mode-html */ \"./node_modules/ace-builds/src-min-noconflict/mode-html.js\");\n/* harmony import */ var ace_builds_src_min_noconflict_mode_html__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(ace_builds_src_min_noconflict_mode_html__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var ace_builds_src_min_noconflict_ext_modelist__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ace-builds/src-min-noconflict/ext-modelist */ \"./node_modules/ace-builds/src-min-noconflict/ext-modelist.js\");\n/* harmony import */ var ace_builds_src_min_noconflict_ext_modelist__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(ace_builds_src_min_noconflict_ext_modelist__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var svg_pan_zoom__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! svg-pan-zoom */ \"./node_modules/svg-pan-zoom/src/browserify.js\");\n/* harmony import */ var svg_pan_zoom__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(svg_pan_zoom__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _ModelPanel_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ModelPanel.js */ \"./js/ModelPanel.js\");\n/* harmony import */ var _ConsolePanel_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ConsolePanel.js */ \"./js/ConsolePanel.js\");\n/* harmony import */ var _ProgramPanel_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./ProgramPanel.js */ \"./js/ProgramPanel.js\");\n/* harmony import */ var _OutputPanel_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./OutputPanel.js */ \"./js/OutputPanel.js\");\n/* harmony import */ var _ExampleManager_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./ExampleManager.js */ \"./js/ExampleManager.js\");\n/* harmony import */ var _DownloadDialog_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./DownloadDialog.js */ \"./js/DownloadDialog.js\");\n/* harmony import */ var _MetamodelPanel_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./MetamodelPanel.js */ \"./js/MetamodelPanel.js\");\n/* harmony import */ var _SettingsDialog_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./SettingsDialog.js */ \"./js/SettingsDialog.js\");\n/* harmony import */ var _Preloader_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./Preloader.js */ \"./js/Preloader.js\");\n/* harmony import */ var _Backend_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./Backend.js */ \"./js/Backend.js\");\n/* harmony import */ var _Layout_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./Layout.js */ \"./js/Layout.js\");\n/* harmony import */ var metro4__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! metro4 */ \"./node_modules/metro4/build/js/metro.js\");\n/* harmony import */ var metro4__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(metro4__WEBPACK_IMPORTED_MODULE_19__);\n/* harmony import */ var _highlighting_highlighting_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./highlighting/highlighting.js */ \"./js/highlighting/highlighting.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar language = \"eol\";\nvar outputType = \"text\";\nvar outputLanguage = \"text\";\nvar example;\nvar url = window.location + \"\";\nvar questionMark = url.indexOf(\"?\");\n\nvar programPanel = new _ProgramPanel_js__WEBPACK_IMPORTED_MODULE_10__.ProgramPanel();\nvar secondProgramPanel = new _ProgramPanel_js__WEBPACK_IMPORTED_MODULE_10__.ProgramPanel(\"secondProgram\");\nvar firstMetamodelPanel = new _MetamodelPanel_js__WEBPACK_IMPORTED_MODULE_14__.MetamodelPanel(\"firstMetamodel\");\nvar secondMetamodelPanel = new _MetamodelPanel_js__WEBPACK_IMPORTED_MODULE_14__.MetamodelPanel(\"secondMetamodel\");\nvar firstModelPanel = new _ModelPanel_js__WEBPACK_IMPORTED_MODULE_8__.ModelPanel(\"firstModel\", true, firstMetamodelPanel);\nvar secondModelPanel;\nvar thirdModelPanel;\n\nvar consolePanel = new _ConsolePanel_js__WEBPACK_IMPORTED_MODULE_9__.ConsolePanel();\nvar downloadDialog = new _DownloadDialog_js__WEBPACK_IMPORTED_MODULE_13__.DownloadDialog();\nvar settingsDialog = new _SettingsDialog_js__WEBPACK_IMPORTED_MODULE_15__.SettingsDialog();\nvar preloader = new _Preloader_js__WEBPACK_IMPORTED_MODULE_16__.Preloader();\nvar backend = new _Backend_js__WEBPACK_IMPORTED_MODULE_17__.Backend();\nvar examplesManager = new _ExampleManager_js__WEBPACK_IMPORTED_MODULE_12__.ExampleManager();\nvar panels = [];\n\nbackend.configure();\n\nexample = examplesManager.getSelectedExample();\nsetup();\n\nfunction setup() {\n\n\n    if (example.eol != null) { example.program = example.eol; language = \"eol\";}\n    else {language = example.language};\n\n    if (example.outputType != null) {outputType = example.outputType;}\n    if (example.outputLanguage != null) {outputLanguage = example.outputLanguage;}\n    \n    var secondModelEditable = !(language == \"etl\" || language == \"flock\");\n\n    secondModelPanel = new _ModelPanel_js__WEBPACK_IMPORTED_MODULE_8__.ModelPanel(\"secondModel\", secondModelEditable, secondMetamodelPanel);\n    thirdModelPanel = new _OutputPanel_js__WEBPACK_IMPORTED_MODULE_11__.OutputPanel(\"thirdModel\", language, outputType, outputLanguage);\n\n    new _Layout_js__WEBPACK_IMPORTED_MODULE_18__.Layout().create(\"navview-content\", language);\n    \n    panels = [programPanel, secondProgramPanel, consolePanel, firstModelPanel, firstMetamodelPanel, secondModelPanel, secondMetamodelPanel, thirdModelPanel];\n    \n    arrangePanels();\n\n    //TODO: Fix \"undefined\" when fields are empty\n    programPanel.setLanguage(language);\n    if (language == \"egx\") secondProgramPanel.setLanguage(\"egl\");\n\n    programPanel.setValue(example.program);\n    secondProgramPanel.setValue(example.secondProgram);\n    firstModelPanel.setValue(example.flexmi);\n    firstMetamodelPanel.setValue(example.emfatic);\n    secondModelPanel.setValue(example.secondFlexmi);\n    secondMetamodelPanel.setValue(example.secondEmfatic);\n\n    document.getElementById(\"navview\").style.display = \"block\";\n    \n    document.addEventListener('click', function(evt) {\n        if (evt.target == document.getElementById(\"toggleNavViewPane\")) {\n            setTimeout(function(){ fit(); }, 1000);\n        }\n    });\n\n    $(window).keydown(function(event) {\n      if ((event.metaKey && event.keyCode == 83) || (event.ctrlKey && event.keyCode == 83)) { \n        runProgram();\n        event.preventDefault(); \n      }\n    });\n\n    Metro.init();\n    fit();\n}\n\n\nfunction copyShortenedLink(event) {\n    event.preventDefault();\n    var content = btoa(editorsToJson());\n    var xhr = new XMLHttpRequest();\n    \n    xhr.open(\"POST\", backend.getShortURLService(), true);\n    xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n    xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n            if (xhr.status === 200) {\n                var json = JSON.parse(xhr.responseText);\n\n                if (questionMark > 0) {\n                    var baseUrl = (window.location+\"\").substring(0, questionMark);\n                }\n                else {\n                    baseUrl = window.location;\n                }\n                Metro.notify.killAll();\n                Metro.dialog.create({\n                    title: \"Share link\",\n                    content: \"<p>The link below contains a snapshot of the contents of all the editors in the playground. Anyone who visits this link should be able to view and run your example.</p><br/> <input style='width:100%' value='\" + baseUrl + \"?\" + json.shortened + \"'>\",\n                    closeButton: true,\n                    actions: [\n                    {\n                        caption: \"Copy to clipboard\",\n                        cls: \"js-dialog-close success\",\n                        onclick: function(){\n                            copyToClipboard(baseUrl + \"?\" + json.shortened);\n                        }\n                    }]\n                });\n            }\n            Metro.notify.killAll();\n        }\n    };\n    var data = JSON.stringify({\"content\": content});\n    xhr.send(data);\n    longNotification(\"Generating short link\");\n    return false;\n}\n\nfunction copyToClipboard(str) {\n    var el = document.createElement('textarea');\n    el.value = str;\n    document.body.appendChild(el);\n    el.select();\n    document.execCommand('copy');\n    document.body.removeChild(el);\n}\n\nfunction arrangePanels() {\n\n    if (language == \"egl\" || language == \"egx\") {\n        if (outputType == \"dot\") {\n            thirdModelPanel.showDiagram();\n            thirdModelPanel.setTitleAndIcon(\"Graphviz\", \"diagram\");\n        }\n        else if (outputType == \"html\") {\n            thirdModelPanel.showDiagram();\n            thirdModelPanel.setTitleAndIcon(\"HTML\", \"html\");\n        }\n        else if (outputType == \"puml\") {\n            thirdModelPanel.showDiagram();\n            thirdModelPanel.setTitleAndIcon(\"PlantUML\", \"diagram\");\n        }\n        else if (outputType == \"code\") {\n            $(\"#thirdModelDiagram\").hide();\n            $(\"#thirdModelEditor\").show();\n            thirdModelPanel.setTitleAndIcon(\"Generated Text\", \"editor\");           \n        }\n    }\n    else if (language == \"etl\" || language == \"flock\") {\n        $(\"#secondModelDiagram\").show();\n        $(\"#secondModelEditor\").hide();\n\n        firstModelPanel.setTitle(\"Source Model\");\n        firstMetamodelPanel.setTitle(\"Source Metamodel\");\n        secondModelPanel.setTitle(\"Target Model\");\n        secondMetamodelPanel.setTitle(\"Target Metamodel\");\n        secondModelPanel.setIcon(\"diagram\");\n    }\n    else if (language == \"evl\" || language == \"epl\") {\n        $(\"#thirdModelDiagram\").show();\n        if (language == \"evl\") {\n            thirdModelPanel.setTitleAndIcon(\"Problems\", \"problems\");\n        }\n        else {\n            thirdModelPanel.setTitleAndIcon(\"Pattern Matches\", \"diagram\");\n        }\n    }\n}\n\nfunction getPanelTitle(panelId) {\n    return $(\"#\" + panelId)[0].dataset.titleCaption;\n}\n\nfunction editorsToJsonObject() {\n    return {\n        \"language\": language,\n        \"outputType\": outputType,\n        \"outputLanguage\": outputLanguage,\n        \"program\": programPanel.getValue(), \n        \"secondProgram\": secondProgramPanel.getValue(),\n        \"emfatic\": firstMetamodelPanel.getValue(), \n        \"flexmi\": firstModelPanel.getValue(),\n        \"secondEmfatic\": secondMetamodelPanel.getValue(),\n        \"secondFlexmi\": secondModelPanel.getValue()\n    };\n}\n\nfunction editorsToJson() {\n    return JSON.stringify(editorsToJsonObject());\n}\n\nfunction fit() {\n    \n    var splitter = document.getElementById(\"splitter\");\n    splitter.style.minHeight = window.innerHeight + \"px\";\n    splitter.style.maxHeight = window.innerHeight + \"px\";\n\n    panels.forEach(panel => panel.fit());\n    preloader.hide();\n}\n\nfunction runProgram() {\n\t\n    var xhr = new XMLHttpRequest();\n    var url = backend.getRunEpsilonService();\n    \n    xhr.open(\"POST\", url, true);\n    xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n    xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n            if (xhr.status === 200) {\n                var response = JSON.parse(xhr.responseText);\n                console.log(response);\n\n                if (response.hasOwnProperty(\"error\")) {\n                    consolePanel.setError(response.error);\n                }\n                else {\n                    consolePanel.setOutput(response.output);\n                    \n                    if (language == \"etl\") {\n                        renderDiagram(\"secondModelDiagram\", response.targetModelDiagram);\n                    }\n                    else if (language == \"evl\") {\n                        renderDiagram(\"thirdModelDiagram\", response.validatedModelDiagram);\n                    }\n                    else if (language == \"epl\") {\n                        renderDiagram(\"thirdModelDiagram\", response.patternMatchedModelDiagram);\n                    }\n                    else if (language == \"egx\") {\n                        thirdModelPanel.setGeneratedFiles(response.generatedFiles);\n                        consolePanel.setOutput(response.output);\n                    }\n                    else if (language == \"egl\") {\n                        if (outputType == \"code\") {\n                            thirdModelPanel.getEditor().setValue(response.generatedText.trim(), 1);\n                            consolePanel.setOutput(response.output);\n                        }\n                        else if (outputType == \"html\") {\n                            consolePanel.setOutput(response.output);\n                            var iframe = document.getElementById(\"htmlIframe\");\n                            if (iframe == null) {\n                                iframe = document.createElement(\"iframe\");\n                                iframe.id = \"htmlIframe\"\n                                iframe.style.height = \"100%\";\n                                iframe.style.width = \"100%\";\n                                document.getElementById(\"thirdModelDiagram\").appendChild(iframe);\n                            }\n                            \n                            iframe.srcdoc = response.generatedText;\n                        }\n                        else if (outputType == \"puml\" || outputType == \"dot\") {\n\n                            consolePanel.setOutput(response.output);\n                            var krokiEndpoint = \"\";\n                            if (outputType == \"puml\") krokiEndpoint = \"plantuml\";\n                            else krokiEndpoint = \"graphviz/svg\"\n\n                            var krokiXhr = new XMLHttpRequest();\n                            krokiXhr.open(\"POST\", \"https://kroki.io/\" + krokiEndpoint, true);\n                            krokiXhr.setRequestHeader(\"Accept\", \"image/svg+xml\");\n                            krokiXhr.setRequestHeader(\"Content-Type\", \"text/plain\");\n                            krokiXhr.onreadystatechange = function () {\n                                if (krokiXhr.readyState === 4) {\n                                    if (krokiXhr.status === 200) {\n                                        renderDiagram(\"thirdModelDiagram\", krokiXhr.responseText);\n                                    }\n                                }\n                            };\n                            krokiXhr.send(response.generatedText);\n                        }\n                        else {\n                            consolePanel.setOutput(response.output + response.generatedText);\n                        }\n                    }\n                }\n\n            }\n            Metro.notify.killAll();\n        }\n    };\n    var data = editorsToJson();\n    xhr.send(data);\n    longNotification(\"Executing program\");\n}\n\nfunction longNotification(title, cls=\"light\") {\n    Metro.notify.create(\"<b>\" + title + \"...</b><br>This may take a few seconds to complete if the back end is not warmed up.\", null, {keepOpen: true, cls: cls, width: 300});\n}\n\nfunction toggle(elementId, onEmpty) {\n    var element = document.getElementById(elementId);\n    if (element == null) return;\n\n    if (getComputedStyle(element).display == \"none\") {\n        element.style.display = \"flex\";\n        if (element.innerHTML.length == 0) {\n            onEmpty();\n        }\n    }\n    else {\n        element.style.display = \"none\";\n    }\n    updateGutterVisibility();\n}\n\nfunction renderDiagram(diagramId, svg) {\n    var diagramElement = document.getElementById(diagramId);\n    diagramElement.innerHTML = svg;\n    var svg = document.getElementById(diagramId).firstElementChild;\n\n    if (diagramId == \"thirdModelDiagram\") {\n        diagramElement.parentElement.style.padding = \"0px\";\n    }\n\n    svg.style.width = diagramElement.offsetWidth + \"px\";\n    svg.style.height = diagramElement.offsetHeight + \"px\";\n\n    svg_pan_zoom__WEBPACK_IMPORTED_MODULE_7___default()(svg, {\n      zoomEnabled: true,\n      fit: true,\n      center: true\n    });\n}\n\nfunction updateGutterVisibility() {\n    for (const gutter of Array.prototype.slice.call(document.getElementsByClassName(\"gutter\"))) {\n\n        var visibleSiblings = Array.prototype.slice.call(gutter.parentNode.children).filter(\n            child => child != gutter && getComputedStyle(child).display != \"none\");\n        \n        if (visibleSiblings.length > 1) {\n            var nextVisibleSibling = getNextVisibleSibling(gutter);\n            var previousVisibleSibling = getPreviousVisibleSibling(gutter);\n            if (nextVisibleSibling != null && nextVisibleSibling.className != \"gutter\" && previousVisibleSibling != null) {\n                gutter.style.display = \"flex\";\n            }\n            else {\n                gutter.style.display = \"none\";\n            }\n        }\n        else {\n            gutter.style.display = \"none\";\n        }\n    }\n}\n\nfunction getNextVisibleSibling(element) {\n    var sibling = element.nextElementSibling;\n    while (sibling != null) {\n        if (getComputedStyle(sibling).display != \"none\") return sibling;\n        sibling = sibling.nextElementSibling;\n    }\n}\n\nfunction getPreviousVisibleSibling(element) {\n    var sibling = element.previousElementSibling;\n    while (sibling != null) {\n        if (getComputedStyle(sibling).display != \"none\") return sibling;\n        sibling = sibling.previousElementSibling;\n    }\n}\n\nfunction showDownloadOptions(event) {\n    downloadDialog.show(event);\n}\n\nfunction showSettings(event) {\n    settingsDialog.show(event);\n}\n\n// Some functions and variables are accessed  \n// by onclick - or similer - events\n// We need to use window.x = x for this to work\nwindow.fit = fit;\nwindow.updateGutterVisibility = updateGutterVisibility;\nwindow.runProgram = runProgram;\n\nwindow.programPanel = programPanel;\nwindow.secondProgramPanel = secondProgramPanel;\nwindow.consolePanel = consolePanel;\nwindow.firstModelPanel = firstModelPanel;\nwindow.secondModelPanel = secondModelPanel;\nwindow.thirdModelPanel = thirdModelPanel;\nwindow.firstMetamodelPanel = firstMetamodelPanel;\nwindow.secondMetamodelPanel = secondMetamodelPanel;\nwindow.panels = panels;\n\nwindow.backend = backend;\nwindow.toggle = toggle;\nwindow.renderDiagram = renderDiagram;\nwindow.longNotification = longNotification;\nwindow.showDownloadOptions = showDownloadOptions;\nwindow.showSettings = showSettings;\nwindow.copyShortenedLink = copyShortenedLink;\nwindow.downloadDialog = downloadDialog;\nwindow.language = language;\nwindow.getPanelTitle = getPanelTitle;\n\n//# sourceURL=webpack://playground/./js/Playground.js?");

/***/ }),

/***/ "./js/Preloader.js":
/*!*************************!*\
  !*** ./js/Preloader.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Preloader\": () => (/* binding */ Preloader)\n/* harmony export */ });\nclass Preloader {\n\n    visible = true;\n\n    hide() {\n        if (this.visible) {\n            var self = this;\n            setTimeout(function () {\n                document.getElementById(\"preloader\").style.display = \"none\";\n                self.visible = false;\n            }, 1000);\n        }\n    }\n}\n\n\n\n//# sourceURL=webpack://playground/./js/Preloader.js?");

/***/ }),

/***/ "./js/ProgramPanel.js":
/*!****************************!*\
  !*** ./js/ProgramPanel.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ProgramPanel\": () => (/* binding */ ProgramPanel)\n/* harmony export */ });\n/* harmony import */ var _Panel_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Panel.js */ \"./js/Panel.js\");\n\n\nclass ProgramPanel extends _Panel_js__WEBPACK_IMPORTED_MODULE_0__.Panel {\n\n    constructor(id = \"program\") {\n        super(id);\n    }\n\n    setLanguage(language) {\n        this.editor.getSession().setMode(\"ace/mode/\" + language);\n        this.element.dataset.customButtons = JSON.stringify(this.getButtons(language));\n        var title = \"\";\n        switch (language) {\n            case \"eol\": title = \"Program\"; break;\n            case \"etl\": title = \"Transformation\"; break;\n            case \"egl\": title = \"Template\"; break;\n            case \"evl\": title = \"Constraints\"; break;\n            case \"epl\": title = \"Patterns\"; break;\n            case \"egx\": title = \"Template Coordination\"; break;\n        }\n        this.setTitleAndIcon(title + \" (\" + language.toUpperCase() + \")\", language);\n    }\n\n    fit() {\n        var editorElement = document.getElementById(this.id + \"Editor\");\n        if (editorElement != null) {\n            editorElement.parentNode.style = \"flex-basis: calc(100% - 4px);\";\n        }\n        this.editor.resize();\n    }\n\n    getButtons(language) {\n        var languageName = (language == \"flock\" ? \"Flock\" : language.toUpperCase());\n        var buttons = [{\n            html: this.buttonHtml(\"help\", languageName + \" language reference\"),\n            cls: \"sys-button\",\n            onclick: \"window.open('https://www.eclipse.org/epsilon/doc/\" + language + \"');\"\n        }];\n        if (this.id == \"program\") {\n            buttons.push({\n                html: this.buttonHtml(\"run\", \"Run the program (Ctrl/Cmd+S)\"),\n                cls: \"sys-button\",\n                onclick: \"runProgram()\"\n            });\n        }\n        return buttons;\n        /*\n        return [{\n            html: this.buttonHtml(\"help\", languageName + \" language reference\"),\n            cls: \"sys-button\",\n            onclick: \"window.open('https://www.eclipse.org/epsilon/doc/'+language);\"\n        }, {\n            html: this.buttonHtml(\"run\", \"Run the program (Ctrl/Cmd+S)\"),\n            cls: \"sys-button\",\n            onclick: \"runProgram()\"\n        }];*/\n    }\n\n    // TODO: Identical to ConsolePanel.createElement()\n    createElement() {\n        var root = document.createElement(\"div\");\n        root.setAttribute(\"data-role\", \"panel\");\n        root.setAttribute(\"id\", this.id + \"Panel\");\n\n        var editor = document.createElement(\"div\");\n        editor.setAttribute(\"id\", this.id + \"Editor\");\n        editor.setAttribute(\"class\", \"editor\");\n\n        root.appendChild(editor);\n        \n        return root;\n    }\n}\n\n\n\n\n//# sourceURL=webpack://playground/./js/ProgramPanel.js?");

/***/ }),

/***/ "./js/SettingsDialog.js":
/*!******************************!*\
  !*** ./js/SettingsDialog.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SettingsDialog\": () => (/* binding */ SettingsDialog)\n/* harmony export */ });\nclass SettingsDialog {\n\n    showEditorLineNumbers = false;\n\n    show(event) {\n        event.preventDefault();\n\n        var panels = [\"program\", \"console\", \"firstModel\", \"firstMetamodel\"];\n\n        if (language == \"etl\" || language == \"flock\")\n            panels.push(\"secondModel\", \"secondMetamodel\");\n        else if (language == \"evl\" || language == \"epl\" || language == \"egl\" || language == \"egx\") {\n            panels.push(\"thirdModel\");\n            if (language == \"egx\") {\n                panels.push(\"secondProgram\");\n            }\n        }\n        \n\n        var visibilityCheckboxes = \"\";\n\n        for (const panel of panels) {\n            visibilityCheckboxes += this.createPanelVisibilityCheckbox(panel, true) + \"<br/>\";\n        }\n\n        var self = this;\n        Metro.dialog.create({\n            title: \"Settings\",\n            content: `\n            <h6>Editors</h6>\n            `\n                + self.createEditorLineNumbersCheckbox() +\n                `\n            <h6>Visible Panels</h6>\n            `\n                + visibilityCheckboxes +\n                `\n            `,\n            actions: [\n                {\n                    caption: \"Apply\",\n                    cls: \"js-dialog-close success\",\n                    onclick: function () {\n                        for (const panel of panels) {\n                            self.applyPanelVisibility(panel);\n                        }\n                        self.updateEditorLineNumbers();\n                        updateGutterVisibility();\n                        fit();\n                    }\n                },\n                {\n                    caption: \"Cancel\",\n                    cls: \"js-dialog-close\"\n                }\n            ]\n        });\n    }\n\n    applyPanelVisibility(panel) {\n        var display = \"none\";\n        if (document.getElementById(panel + \"Visible\").checked) {\n            display = \"flex\";\n        }\n        var parent = document.getElementById(panel + \"Panel\").parentNode;\n        parent.style.display = display;\n\n        // If all the panels in the splitter panel are hiden, hide the splitter panel too\n        if (Array.prototype.slice.call(parent.parentNode.children).every(\n            child => child.style.display == \"none\" || child.className == \"gutter\")) {\n            parent.parentNode.style.display = \"none\";\n        }\n        else {\n            parent.parentNode.style.display = \"flex\";\n        }\n    }\n\n    updateEditorLineNumbers() {\n        this.showEditorLineNumbers = document.getElementById(\"editorLineNumbers\").checked;\n        panels.forEach(p => p.getEditor().renderer.setShowGutter(this.showEditorLineNumbers));\n    }\n\n    createEditorLineNumbersCheckbox() {\n        var checked = this.showEditorLineNumbers ? \"checked\" : \"\";\n\n        return '<input type=\"checkbox\" id=\"editorLineNumbers\" data-role=\"checkbox\" data-caption=\"Show line numbers\" ' + checked + '>';\n    }\n\n    createPanelVisibilityCheckbox(panel) {\n        var checked = document.getElementById(panel + \"Panel\").parentNode.style.display == \"none\" ? \"\" : \"checked\";\n\n        return '<input type=\"checkbox\" id=\"' + panel + 'Visible\" data-role=\"checkbox\" data-caption=\"' + getPanelTitle(panel + \"Panel\") + '\" ' + checked + '>';\n    }\n}\n\n\n\n//# sourceURL=webpack://playground/./js/SettingsDialog.js?");

/***/ }),

/***/ "./js/highlighting/egl.js":
/*!********************************!*\
  !*** ./js/highlighting/egl.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var ace_builds__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ace-builds */ \"./node_modules/ace-builds/src-noconflict/ace.js\");\n/* harmony import */ var ace_builds__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ace_builds__WEBPACK_IMPORTED_MODULE_0__);\n\n\n(0,ace_builds__WEBPACK_IMPORTED_MODULE_0__.define)(\"ace/mode/egl_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text_highlight_rules\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\n\nvar EglHighlightRules = function() {\n\n    var keywords = (\n        \"not|delete|import|for|while|in|and|or|operation|return|var|throw|if|new|else|transaction|abort|break|continue|assert|assertError|not|function|default|switch|case|as|ext|driver|alias|model|breakAll|async|group|nor|xor|implies\"\n    );\n\n    var builtinConstants = (\n        \"true|false|self\"\n    );\n\n    var builtinFunctions = (\n        \"\"\n    );\n\n    var dataTypes = (\n        \"Any|String|Integer|Real|Boolean|Native|Bag|Set|List|Sequence|Map|OrderedSet|Collection|Tuple|ConcurrentBag|ConcurrentMap|ConcurrentSet\"\n    );\n\n    var keywordMapper = this.createKeywordMapper({\n        \"support.function\": builtinFunctions,\n        \"keyword\": keywords,\n        \"constant.language\": builtinConstants,\n        \"storage.type\": dataTypes\n    }, \"identifier\", true);\n\n   this.$rules = {\n        \"start\" : [\n            {\n                token:  \"text\",\n                regex:  \"\\\\[%\",\n                next:   \"dynamic\"\n            },\n            {\n                token:  \"comment\",\n                regex:  \"\\\\[\\\\*\",\n                next:   \"comment\"\n            },\n            {\n                token:  \"string\",\n                regex:  \".\"\n            }\n        ],\n        \"comment\" : [\n            {\n                token:  \"comment\",\n                regex:  \"\\\\*\\\\]\",\n                next:   \"start\"\n            },\n            {\n                token:  \"comment\",\n                regex:  \".\"\n            }\n        ],\n        \"dynamic\" : [\n        {\n            token : \"comment\",\n            regex : \"//.*$\"\n        },  \n        {\n            token : \"comment\",\n            start : \"/\\\\*\",\n            end : \"\\\\*/\"\n        }, \n        {\n            token : \"string\",           // \" string\n            regex : '\".*?\"'\n        }, \n        {\n            token : \"string\",           // ' string\n            regex : \"'.*?'\"\n        }, \n        {\n            token : \"string\",           // ` string (apache drill)\n            regex : \"`.*?`\"\n        }, \n        {\n            token : \"constant.numeric\", // float\n            regex : \"[+-]?\\\\d+(?:(?:\\\\.\\\\d*)?(?:[eE][+-]?\\\\d+)?)?\\\\b\"\n        }, \n        {\n            token : keywordMapper,\n            regex : \"[a-zA-Z_$][a-zA-Z0-9_$]*\\\\b\"\n        }, \n        {\n            token : \"text\",\n            regex : \"\\\\s+\"\n        },\n        {\n            token:  \"text\",\n            regex:  \"%\\\\]\",\n            next:   \"start\"\n        }]\n    };\n};\n\noop.inherits(EglHighlightRules, TextHighlightRules);\n\nexports.EglHighlightRules = EglHighlightRules;\n\n});\n\n(0,ace_builds__WEBPACK_IMPORTED_MODULE_0__.define)(\"ace/mode/egl\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text\",\"ace/tokenizer\",\"ace/mode/egl_highlight_rules\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextMode = require(\"./text\").Mode;\nvar EglHighlightRules = require(\"./egl_highlight_rules\").EglHighlightRules;\n\nvar Mode = function() {\n    this.HighlightRules = EglHighlightRules;\n    this.$behaviour = this.$defaultBehaviour;\n};\noop.inherits(Mode, TextMode);\n\nexports.Mode = Mode;\n});\n\n//# sourceURL=webpack://playground/./js/highlighting/egl.js?");

/***/ }),

/***/ "./js/highlighting/egx.js":
/*!********************************!*\
  !*** ./js/highlighting/egx.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var ace_builds__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ace-builds */ \"./node_modules/ace-builds/src-noconflict/ace.js\");\n/* harmony import */ var ace_builds__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ace_builds__WEBPACK_IMPORTED_MODULE_0__);\n\n\n(0,ace_builds__WEBPACK_IMPORTED_MODULE_0__.define)(\"ace/mode/egx_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text_highlight_rules\"], function(require, exports, module) {\n    \"use strict\";\n    \n    var oop = require(\"../lib/oop\");\n    var TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\n    \n    var egxHighlightRules = function() {\n    \n        var keywords = (\n            \"rule|transform|template|merge|append|patch|template|parameters|formatter|target||guard|pre|post|not|delete|import|for|while|in|and|or|operation|return|var|throw|if|new|else|transaction|abort|break|continue|assert|assertError|not|function|default|switch|case|as|ext|driver|alias|model|breakAll|async|group|nor|xor|implies|extends\"\n        );\n    \n        var builtinConstants = (\n            \"true|false|self\"\n        );\n    \n        var builtinFunctions = (\n            \"\"\n        );\n    \n        var dataTypes = (\n            \"Any|String|Integer|Real|Boolean|Native|Bag|Set|List|Sequence|Map|OrderedSet|Collection|Tuple|ConcurrentBag|ConcurrentMap|ConcurrentSet\"\n        );\n    \n        var keywordMapper = this.createKeywordMapper({\n            \"support.function\": builtinFunctions,\n            \"keyword\": keywords,\n            \"constant.language\": builtinConstants,\n            \"storage.type\": dataTypes\n        }, \"identifier\", true);\n    \n        this.$rules = {\n            \"start\" : [ {\n                token : \"comment\",\n                regex : \"//.*$\"\n            },  {\n                token : \"comment\",\n                start : \"/\\\\*\",\n                end : \"\\\\*/\"\n            }, {\n                token : \"string\",           // \" string\n                regex : '\".*?\"'\n            }, {\n                token : \"string\",           // ' string\n                regex : \"'.*?'\"\n            }, {\n                token : \"string\",           // ` string (apache drill)\n                regex : \"`.*?`\"\n            }, {\n                token : \"constant.numeric\", // float\n                regex : \"[+-]?\\\\d+(?:(?:\\\\.\\\\d*)?(?:[eE][+-]?\\\\d+)?)?\\\\b\"\n            }, {\n                token : keywordMapper,\n                regex : \"[a-zA-Z_$][a-zA-Z0-9_$]*\\\\b\"\n            }, {\n                token : \"text\",\n                regex : \"\\\\s+\"\n            } ]\n        };\n        this.normalizeRules();\n    };\n    \n    oop.inherits(egxHighlightRules, TextHighlightRules);\n    \n    exports.egxHighlightRules = egxHighlightRules;\n    });\n    \n    (0,ace_builds__WEBPACK_IMPORTED_MODULE_0__.define)(\"ace/mode/egx\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text\",\"ace/mode/egx_highlight_rules\"], function(require, exports, module) {\n    \"use strict\";\n    \n    var oop = require(\"../lib/oop\");\n    var TextMode = require(\"./text\").Mode;\n    var egxHighlightRules = require(\"./egx_highlight_rules\").egxHighlightRules;\n    \n    var Mode = function() {\n        this.HighlightRules = egxHighlightRules;\n        this.$behaviour = this.$defaultBehaviour;\n    };\n    oop.inherits(Mode, TextMode);\n    \n    (function() {\n        this.$id = \"ace/mode/egx\";\n        this.snippetFileId = \"ace/snippets/egx\";\n    }).call(Mode.prototype);\n    \n    exports.Mode = Mode;\n    \n    });\n\n//# sourceURL=webpack://playground/./js/highlighting/egx.js?");

/***/ }),

/***/ "./js/highlighting/emfatic.js":
/*!************************************!*\
  !*** ./js/highlighting/emfatic.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var ace_builds__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ace-builds */ \"./node_modules/ace-builds/src-noconflict/ace.js\");\n/* harmony import */ var ace_builds__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ace_builds__WEBPACK_IMPORTED_MODULE_0__);\n\n\n(0,ace_builds__WEBPACK_IMPORTED_MODULE_0__.define)(\"ace/mode/emfatic_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text_highlight_rules\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\n\nvar emfaticHighlightRules = function() {\n\n    var keywords = (\n        \"abstract|attr|class|enum|extends|import|package|ref|val|op|readonly|volatile|transient|unsettable|derived|unique|ordered|resolve|id\"\n    );\n\n    var builtinConstants = (\n        \"true|false|self\"\n    );\n\n    var builtinFunctions = (\n        \"\"\n    );\n\n    var dataTypes = (\n        \"boolean|Boolean|byte|Byte|char|Character|double|Double|float|Float|int|Integer|long|Long|short|Short|Date|String|Object|Class|EObject|EClass\"\n    );\n\n    var keywordMapper = this.createKeywordMapper({\n        \"support.function\": builtinFunctions,\n        \"keyword\": keywords,\n        \"constant.language\": builtinConstants,\n        \"storage.type\": dataTypes\n    }, \"identifier\", true);\n\n    this.$rules = {\n        \"start\" : [ {\n            token : \"comment\",\n            regex : \"//.*$\"\n        }, {\n            token : \"comment\",\n            regex : \"@.*$\"\n        }, {\n            token : \"comment\",\n            start : \"/\\\\*\",\n            end : \"\\\\*/\"\n        }, {\n            token : \"string\",           // \" string\n            regex : '\".*?\"'\n        }, {\n            token : \"string\",           // ' string\n            regex : \"'.*?'\"\n        }, {\n            token : \"constant.numeric\", // float\n            regex : \"[+-]?\\\\d+(?:(?:\\\\.\\\\d*)?(?:[eE][+-]?\\\\d+)?)?\\\\b\"\n        }, {\n            token : \"text\",\n            regex : \"~[a-zA-Z_$][a-zA-Z0-9_$]*\\\\b\"\n        }, {\n            token : keywordMapper,\n            regex : \"[a-zA-Z_$][a-zA-Z0-9_$]*\\\\b\"\n        }, {\n            token : \"text\",\n            regex : \"\\\\s+\"\n        } ]\n    };\n    this.normalizeRules();\n};\n\noop.inherits(emfaticHighlightRules, TextHighlightRules);\n\nexports.emfaticHighlightRules = emfaticHighlightRules;\n});\n\n(0,ace_builds__WEBPACK_IMPORTED_MODULE_0__.define)(\"ace/mode/emfatic\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text\",\"ace/mode/emfatic_highlight_rules\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextMode = require(\"./text\").Mode;\nvar emfaticHighlightRules = require(\"./emfatic_highlight_rules\").emfaticHighlightRules;\n\nvar Mode = function() {\n    this.HighlightRules = emfaticHighlightRules;\n    this.$behaviour = this.$defaultBehaviour;\n};\noop.inherits(Mode, TextMode);\n\n(function() {\n    this.$id = \"ace/mode/emfatic\";\n    this.snippetFileId = \"ace/snippets/emfatic\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n});\n\n//# sourceURL=webpack://playground/./js/highlighting/emfatic.js?");

/***/ }),

/***/ "./js/highlighting/eol.js":
/*!********************************!*\
  !*** ./js/highlighting/eol.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var ace_builds__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ace-builds */ \"./node_modules/ace-builds/src-noconflict/ace.js\");\n/* harmony import */ var ace_builds__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ace_builds__WEBPACK_IMPORTED_MODULE_0__);\n\n\n(0,ace_builds__WEBPACK_IMPORTED_MODULE_0__.define)(\"ace/mode/eol_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text_highlight_rules\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\n\nvar eolHighlightRules = function() {\n\n    var keywords = (\n        \"not|delete|import|for|while|in|and|or|operation|return|var|throw|if|new|else|transaction|abort|break|continue|assert|assertError|not|function|default|switch|case|as|ext|driver|alias|model|breakAll|async|group|nor|xor|implies\"\n    );\n\n    var builtinConstants = (\n        \"true|false|self\"\n    );\n\n    var builtinFunctions = (\n        \"\"\n    );\n\n    var dataTypes = (\n        \"Any|String|Integer|Real|Boolean|Native|Bag|Set|List|Sequence|Map|OrderedSet|Collection|Tuple|ConcurrentBag|ConcurrentMap|ConcurrentSet\"\n    );\n\n    var keywordMapper = this.createKeywordMapper({\n        \"support.function\": builtinFunctions,\n        \"keyword\": keywords,\n        \"constant.language\": builtinConstants,\n        \"storage.type\": dataTypes\n    }, \"identifier\", true);\n\n    this.$rules = {\n        \"start\" : [ {\n            token : \"comment\",\n            regex : \"//.*$\"\n        },  {\n            token : \"comment\",\n            start : \"/\\\\*\",\n            end : \"\\\\*/\"\n        }, {\n            token : \"string\",           // \" string\n            regex : '\".*?\"'\n        }, {\n            token : \"string\",           // ' string\n            regex : \"'.*?'\"\n        }, {\n            token : \"string\",           // ` string (apache drill)\n            regex : \"`.*?`\"\n        }, {\n            token : \"constant.numeric\", // float\n            regex : \"[+-]?\\\\d+(?:(?:\\\\.\\\\d*)?(?:[eE][+-]?\\\\d+)?)?\\\\b\"\n        }, {\n            token : keywordMapper,\n            regex : \"[a-zA-Z_$][a-zA-Z0-9_$]*\\\\b\"\n        }, {\n            token : \"text\",\n            regex : \"\\\\s+\"\n        } ]\n    };\n    this.normalizeRules();\n};\n\noop.inherits(eolHighlightRules, TextHighlightRules);\n\nexports.eolHighlightRules = eolHighlightRules;\n});\n\n(0,ace_builds__WEBPACK_IMPORTED_MODULE_0__.define)(\"ace/mode/eol\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text\",\"ace/mode/eol_highlight_rules\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextMode = require(\"./text\").Mode;\nvar eolHighlightRules = require(\"./eol_highlight_rules\").eolHighlightRules;\n\nvar Mode = function() {\n    this.HighlightRules = eolHighlightRules;\n    this.$behaviour = this.$defaultBehaviour;\n};\noop.inherits(Mode, TextMode);\n\n(function() {\n    this.$id = \"ace/mode/eol\";\n    this.snippetFileId = \"ace/snippets/eol\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n\n});\n\n//# sourceURL=webpack://playground/./js/highlighting/eol.js?");

/***/ }),

/***/ "./js/highlighting/epl.js":
/*!********************************!*\
  !*** ./js/highlighting/epl.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var ace_builds__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ace-builds */ \"./node_modules/ace-builds/src-noconflict/ace.js\");\n/* harmony import */ var ace_builds__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ace_builds__WEBPACK_IMPORTED_MODULE_0__);\n\n\n(0,ace_builds__WEBPACK_IMPORTED_MODULE_0__.define)(\"ace/mode/epl_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text_highlight_rules\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\n\nvar eplHighlightRules = function() {\n\n    var keywords = (\n        \"match|onmatch|nomatch|pattern|do|from|pre|post|not|delete|import|for|while|in|and|or|operation|return|var|throw|if|new|else|transaction|abort|break|continue|assert|assertError|not|function|default|switch|case|as|ext|driver|alias|model|breakAll|async|group|nor|xor|implies\"\n    );\n\n    var builtinConstants = (\n        \"true|false|self\"\n    );\n\n    var builtinFunctions = (\n        \"\"\n    );\n\n    var dataTypes = (\n        \"Any|String|Integer|Real|Boolean|Native|Bag|Set|List|Sequence|Map|OrderedSet|Collection|Tuple|ConcurrentBag|ConcurrentMap|ConcurrentSet\"\n    );\n\n    var keywordMapper = this.createKeywordMapper({\n        \"support.function\": builtinFunctions,\n        \"keyword\": keywords,\n        \"constant.language\": builtinConstants,\n        \"storage.type\": dataTypes\n    }, \"identifier\", true);\n\n    this.$rules = {\n        \"start\" : [ {\n            token : \"comment\",\n            regex : \"//.*$\"\n        },  {\n            token : \"comment\",\n            start : \"/\\\\*\",\n            end : \"\\\\*/\"\n        }, {\n            token : \"string\",           // \" string\n            regex : '\".*?\"'\n        }, {\n            token : \"string\",           // ' string\n            regex : \"'.*?'\"\n        }, {\n            token : \"string\",           // ` string (apache drill)\n            regex : \"`.*?`\"\n        }, {\n            token : \"constant.numeric\", // float\n            regex : \"[+-]?\\\\d+(?:(?:\\\\.\\\\d*)?(?:[eE][+-]?\\\\d+)?)?\\\\b\"\n        }, {\n            token : keywordMapper,\n            regex : \"[a-zA-Z_$][a-zA-Z0-9_$]*\\\\b\"\n        }, {\n            token : \"text\",\n            regex : \"\\\\s+\"\n        } ]\n    };\n    this.normalizeRules();\n};\n\noop.inherits(eplHighlightRules, TextHighlightRules);\n\nexports.eplHighlightRules = eplHighlightRules;\n});\n\n(0,ace_builds__WEBPACK_IMPORTED_MODULE_0__.define)(\"ace/mode/epl\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text\",\"ace/mode/epl_highlight_rules\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextMode = require(\"./text\").Mode;\nvar eplHighlightRules = require(\"./epl_highlight_rules\").eplHighlightRules;\n\nvar Mode = function() {\n    this.HighlightRules = eplHighlightRules;\n    this.$behaviour = this.$defaultBehaviour;\n};\noop.inherits(Mode, TextMode);\n\n(function() {\n    this.$id = \"ace/mode/epl\";\n    this.snippetFileId = \"ace/snippets/epl\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n\n});\n\n//# sourceURL=webpack://playground/./js/highlighting/epl.js?");

/***/ }),

/***/ "./js/highlighting/etl.js":
/*!********************************!*\
  !*** ./js/highlighting/etl.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var ace_builds__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ace-builds */ \"./node_modules/ace-builds/src-noconflict/ace.js\");\n/* harmony import */ var ace_builds__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ace_builds__WEBPACK_IMPORTED_MODULE_0__);\n\n\n(0,ace_builds__WEBPACK_IMPORTED_MODULE_0__.define)(\"ace/mode/etl_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text_highlight_rules\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\n\nvar etlHighlightRules = function() {\n\n    var keywords = (\n        \"rule|transform|from|to|guard|pre|post|not|delete|import|for|while|in|and|or|operation|return|var|throw|if|new|else|transaction|abort|break|continue|assert|assertError|not|function|default|switch|case|as|ext|driver|alias|model|breakAll|async|group|nor|xor|implies|extends\"\n    );\n\n    var builtinConstants = (\n        \"true|false|self\"\n    );\n\n    var builtinFunctions = (\n        \"\"\n    );\n\n    var dataTypes = (\n        \"Any|String|Integer|Real|Boolean|Native|Bag|Set|List|Sequence|Map|OrderedSet|Collection|Tuple|ConcurrentBag|ConcurrentMap|ConcurrentSet\"\n    );\n\n    var keywordMapper = this.createKeywordMapper({\n        \"support.function\": builtinFunctions,\n        \"keyword\": keywords,\n        \"constant.language\": builtinConstants,\n        \"storage.type\": dataTypes\n    }, \"identifier\", true);\n\n    this.$rules = {\n        \"start\" : [ {\n            token : \"comment\",\n            regex : \"//.*$\"\n        },  {\n            token : \"comment\",\n            start : \"/\\\\*\",\n            end : \"\\\\*/\"\n        }, {\n            token : \"string\",           // \" string\n            regex : '\".*?\"'\n        }, {\n            token : \"string\",           // ' string\n            regex : \"'.*?'\"\n        }, {\n            token : \"string\",           // ` string (apache drill)\n            regex : \"`.*?`\"\n        }, {\n            token : \"constant.numeric\", // float\n            regex : \"[+-]?\\\\d+(?:(?:\\\\.\\\\d*)?(?:[eE][+-]?\\\\d+)?)?\\\\b\"\n        }, {\n            token : keywordMapper,\n            regex : \"[a-zA-Z_$][a-zA-Z0-9_$]*\\\\b\"\n        }, {\n            token : \"text\",\n            regex : \"\\\\s+\"\n        } ]\n    };\n    this.normalizeRules();\n};\n\noop.inherits(etlHighlightRules, TextHighlightRules);\n\nexports.etlHighlightRules = etlHighlightRules;\n});\n\n(0,ace_builds__WEBPACK_IMPORTED_MODULE_0__.define)(\"ace/mode/etl\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text\",\"ace/mode/etl_highlight_rules\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextMode = require(\"./text\").Mode;\nvar etlHighlightRules = require(\"./etl_highlight_rules\").etlHighlightRules;\n\nvar Mode = function() {\n    this.HighlightRules = etlHighlightRules;\n    this.$behaviour = this.$defaultBehaviour;\n};\noop.inherits(Mode, TextMode);\n\n(function() {\n    this.$id = \"ace/mode/etl\";\n    this.snippetFileId = \"ace/snippets/etl\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n\n});\n\n//# sourceURL=webpack://playground/./js/highlighting/etl.js?");

/***/ }),

/***/ "./js/highlighting/evl.js":
/*!********************************!*\
  !*** ./js/highlighting/evl.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var ace_builds__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ace-builds */ \"./node_modules/ace-builds/src-noconflict/ace.js\");\n/* harmony import */ var ace_builds__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ace_builds__WEBPACK_IMPORTED_MODULE_0__);\n\n\n(0,ace_builds__WEBPACK_IMPORTED_MODULE_0__.define)(\"ace/mode/evl_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text_highlight_rules\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\n\nvar evlHighlightRules = function() {\n\n    var keywords = (\n        \"context|constraint|critique|message|guard|check|fix|do|title|pre|post|not|delete|import|for|while|in|and|or|operation|return|var|throw|if|new|else|transaction|abort|break|continue|assert|assertError|not|function|default|switch|case|as|ext|driver|alias|model|breakAll|async|group|nor|xor|implies\"\n    );\n\n    var builtinConstants = (\n        \"true|false|self\"\n    );\n\n    var builtinFunctions = (\n        \"\"\n    );\n\n    var dataTypes = (\n        \"Any|String|Integer|Real|Boolean|Native|Bag|Set|List|Sequence|Map|OrderedSet|Collection|Tuple|ConcurrentBag|ConcurrentMap|ConcurrentSet\"\n    );\n\n    var keywordMapper = this.createKeywordMapper({\n        \"support.function\": builtinFunctions,\n        \"keyword\": keywords,\n        \"constant.language\": builtinConstants,\n        \"storage.type\": dataTypes\n    }, \"identifier\", true);\n\n    this.$rules = {\n        \"start\" : [ {\n            token : \"comment\",\n            regex : \"//.*$\"\n        },  {\n            token : \"comment\",\n            start : \"/\\\\*\",\n            end : \"\\\\*/\"\n        }, {\n            token : \"string\",           // \" string\n            regex : '\".*?\"'\n        }, {\n            token : \"string\",           // ' string\n            regex : \"'.*?'\"\n        }, {\n            token : \"string\",           // ` string (apache drill)\n            regex : \"`.*?`\"\n        }, {\n            token : \"constant.numeric\", // float\n            regex : \"[+-]?\\\\d+(?:(?:\\\\.\\\\d*)?(?:[eE][+-]?\\\\d+)?)?\\\\b\"\n        }, {\n            token : keywordMapper,\n            regex : \"[a-zA-Z_$][a-zA-Z0-9_$]*\\\\b\"\n        }, {\n            token : \"text\",\n            regex : \"\\\\s+\"\n        } ]\n    };\n    this.normalizeRules();\n};\n\noop.inherits(evlHighlightRules, TextHighlightRules);\n\nexports.evlHighlightRules = evlHighlightRules;\n});\n\n(0,ace_builds__WEBPACK_IMPORTED_MODULE_0__.define)(\"ace/mode/evl\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text\",\"ace/mode/evl_highlight_rules\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextMode = require(\"./text\").Mode;\nvar evlHighlightRules = require(\"./evl_highlight_rules\").evlHighlightRules;\n\nvar Mode = function() {\n    this.HighlightRules = evlHighlightRules;\n    this.$behaviour = this.$defaultBehaviour;\n};\noop.inherits(Mode, TextMode);\n\n(function() {\n    this.$id = \"ace/mode/evl\";\n    this.snippetFileId = \"ace/snippets/evl\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n\n});\n\n//# sourceURL=webpack://playground/./js/highlighting/evl.js?");

/***/ }),

/***/ "./js/highlighting/highlighting.js":
/*!*****************************************!*\
  !*** ./js/highlighting/highlighting.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _eol_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./eol.js */ \"./js/highlighting/eol.js\");\n/* harmony import */ var _etl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./etl.js */ \"./js/highlighting/etl.js\");\n/* harmony import */ var _evl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./evl.js */ \"./js/highlighting/evl.js\");\n/* harmony import */ var _epl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./epl.js */ \"./js/highlighting/epl.js\");\n/* harmony import */ var _egl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./egl.js */ \"./js/highlighting/egl.js\");\n/* harmony import */ var _egx_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./egx.js */ \"./js/highlighting/egx.js\");\n/* harmony import */ var _emfatic_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./emfatic.js */ \"./js/highlighting/emfatic.js\");\n\n\n\n\n\n\n\n\nconst CDN = 'https://cdn.jsdelivr.net/npm/ace-builds@1.14.0/src-min-noconflict';\n\n// Now we tell ace to use the CDN locations to look for language-related\n// files so that we don't have to include them in the bundle\nace.config.set('basePath', CDN);\nace.config.set('modePath', CDN);\nace.config.set('themePath', CDN);\nace.config.set('workerPath', CDN);\n\n\n//# sourceURL=webpack://playground/./js/highlighting/highlighting.js?");

/***/ }),

/***/ "./node_modules/ace-builds/src-min-noconflict/ace.js":
/*!***********************************************************!*\
  !*** ./node_modules/ace-builds/src-min-noconflict/ace.js ***!
  \***********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/* module decorator */ module = __webpack_require__.nmd(module);\n(function(){function o(n){var i=e;n&&(e[n]||(e[n]={}),i=e[n]);if(!i.define||!i.define.packaged)t.original=i.define,i.define=t,i.define.packaged=!0;if(!i.require||!i.require.packaged)r.original=i.require,i.require=r,i.require.packaged=!0}var ACE_NAMESPACE = \"ace\",e=function(){return this}();!e&&typeof window!=\"undefined\"&&(e=window);if(!ACE_NAMESPACE&&typeof requirejs!=\"undefined\")return;var t=function(e,n,r){if(typeof e!=\"string\"){t.original?t.original.apply(this,arguments):(console.error(\"dropping module because define wasn't a string.\"),console.trace());return}arguments.length==2&&(r=n),t.modules[e]||(t.payloads[e]=r,t.modules[e]=null)};t.modules={},t.payloads={};var n=function(e,t,n){if(typeof t==\"string\"){var i=s(e,t);if(i!=undefined)return n&&n(),i}else if(Object.prototype.toString.call(t)===\"[object Array]\"){var o=[];for(var u=0,a=t.length;u<a;++u){var f=s(e,t[u]);if(f==undefined&&r.original)return;o.push(f)}return n&&n.apply(null,o)||!0}},r=function(e,t){var i=n(\"\",e,t);return i==undefined&&r.original?r.original.apply(this,arguments):i},i=function(e,t){if(t.indexOf(\"!\")!==-1){var n=t.split(\"!\");return i(e,n[0])+\"!\"+i(e,n[1])}if(t.charAt(0)==\".\"){var r=e.split(\"/\").slice(0,-1).join(\"/\");t=r+\"/\"+t;while(t.indexOf(\".\")!==-1&&s!=t){var s=t;t=t.replace(/\\/\\.\\//,\"/\").replace(/[^\\/]+\\/\\.\\.\\//,\"\")}}return t},s=function(e,r){r=i(e,r);var s=t.modules[r];if(!s){s=t.payloads[r];if(typeof s==\"function\"){var o={},u={id:r,uri:\"\",exports:o,packaged:!0},a=function(e,t){return n(r,e,t)},f=s(a,o,u);o=f||u.exports,t.modules[r]=o,delete t.payloads[r]}s=t.modules[r]=o||s}return s};o(ACE_NAMESPACE)})(),ace.define(\"ace/lib/es6-shim\",[\"require\",\"exports\",\"module\"],function(e,t,n){function r(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||r(String.prototype,\"startsWith\",function(e,t){return t=t||0,this.lastIndexOf(e,t)===t}),String.prototype.endsWith||r(String.prototype,\"endsWith\",function(e,t){var n=this;if(t===undefined||t>n.length)t=n.length;t-=e.length;var r=n.indexOf(e,t);return r!==-1&&r===t}),String.prototype.repeat||r(String.prototype,\"repeat\",function(e){var t=\"\",n=this;while(e>0){e&1&&(t+=n);if(e>>=1)n+=n}return t}),String.prototype.includes||r(String.prototype,\"includes\",function(e,t){return this.indexOf(e,t)!=-1}),Object.assign||(Object.assign=function(e){if(e===undefined||e===null)throw new TypeError(\"Cannot convert undefined or null to object\");var t=Object(e);for(var n=1;n<arguments.length;n++){var r=arguments[n];r!==undefined&&r!==null&&Object.keys(r).forEach(function(e){t[e]=r[e]})}return t}),Object.values||(Object.values=function(e){return Object.keys(e).map(function(t){return e[t]})}),Array.prototype.find||r(Array.prototype,\"find\",function(e){var t=this.length,n=arguments[1];for(var r=0;r<t;r++){var i=this[r];if(e.call(n,i,r,this))return i}}),Array.prototype.findIndex||r(Array.prototype,\"findIndex\",function(e){var t=this.length,n=arguments[1];for(var r=0;r<t;r++){var i=this[r];if(e.call(n,i,r,this))return r}}),Array.prototype.includes||r(Array.prototype,\"includes\",function(e,t){return this.indexOf(e,t)!=-1}),Array.prototype.fill||r(Array.prototype,\"fill\",function(e){var t=this,n=t.length>>>0,r=arguments[1],i=r>>0,s=i<0?Math.max(n+i,0):Math.min(i,n),o=arguments[2],u=o===undefined?n:o>>0,a=u<0?Math.max(n+u,0):Math.min(u,n);while(s<a)t[s]=e,s++;return t}),Array.of||r(Array,\"of\",function(){return Array.prototype.slice.call(arguments)})}),ace.define(\"ace/lib/fixoldbrowsers\",[\"require\",\"exports\",\"module\",\"ace/lib/es6-shim\"],function(e,t,n){\"use strict\";e(\"./es6-shim\")}),ace.define(\"ace/lib/lang\",[\"require\",\"exports\",\"module\"],function(e,t,n){\"use strict\";t.last=function(e){return e[e.length-1]},t.stringReverse=function(e){return e.split(\"\").reverse().join(\"\")},t.stringRepeat=function(e,t){var n=\"\";while(t>0){t&1&&(n+=e);if(t>>=1)e+=e}return n};var r=/^\\s\\s*/,i=/\\s\\s*$/;t.stringTrimLeft=function(e){return e.replace(r,\"\")},t.stringTrimRight=function(e){return e.replace(i,\"\")},t.copyObject=function(e){var t={};for(var n in e)t[n]=e[n];return t},t.copyArray=function(e){var t=[];for(var n=0,r=e.length;n<r;n++)e[n]&&typeof e[n]==\"object\"?t[n]=this.copyObject(e[n]):t[n]=e[n];return t},t.deepCopy=function s(e){if(typeof e!=\"object\"||!e)return e;var t;if(Array.isArray(e)){t=[];for(var n=0;n<e.length;n++)t[n]=s(e[n]);return t}if(Object.prototype.toString.call(e)!==\"[object Object]\")return e;t={};for(var n in e)t[n]=s(e[n]);return t},t.arrayToMap=function(e){var t={};for(var n=0;n<e.length;n++)t[e[n]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var n in e)t[n]=e[n];return t},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\\]\\/\\\\])/g,\"\\\\$1\")},t.escapeHTML=function(e){return(\"\"+e).replace(/&/g,\"&#38;\").replace(/\"/g,\"&#34;\").replace(/'/g,\"&#39;\").replace(/</g,\"&#60;\")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,function(e){n.push({offset:arguments[arguments.length-2],length:e.length})}),n},t.deferredCall=function(e){var t=null,n=function(){t=null,e()},r=function(e){return r.cancel(),t=setTimeout(n,e||0),r};return r.schedule=r,r.call=function(){return this.cancel(),e(),r},r.cancel=function(){return clearTimeout(t),t=null,r},r.isPending=function(){return t},r},t.delayedCall=function(e,t){var n=null,r=function(){n=null,e()},i=function(e){n==null&&(n=setTimeout(r,e||t))};return i.delay=function(e){n&&clearTimeout(n),n=setTimeout(r,e||t)},i.schedule=i,i.call=function(){this.cancel(),e()},i.cancel=function(){n&&clearTimeout(n),n=null},i.isPending=function(){return n},i}}),ace.define(\"ace/lib/oop\",[\"require\",\"exports\",\"module\"],function(e,t,n){\"use strict\";t.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(e,t){for(var n in t)e[n]=t[n];return e},t.implement=function(e,n){t.mixin(e,n)}}),ace.define(\"ace/lib/useragent\",[\"require\",\"exports\",\"module\"],function(e,t,n){\"use strict\";t.OS={LINUX:\"LINUX\",MAC:\"MAC\",WINDOWS:\"WINDOWS\"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var r=typeof navigator==\"object\"?navigator:{},i=(/mac|win|linux/i.exec(r.platform)||[\"other\"])[0].toLowerCase(),s=r.userAgent||\"\",o=r.appName||\"\";t.isWin=i==\"win\",t.isMac=i==\"mac\",t.isLinux=i==\"linux\",t.isIE=o==\"Microsoft Internet Explorer\"||o.indexOf(\"MSAppHost\")>=0?parseFloat((s.match(/(?:MSIE |Trident\\/[0-9]+[\\.0-9]+;.*rv:)([0-9]+[\\.0-9]+)/)||[])[1]):parseFloat((s.match(/(?:Trident\\/[0-9]+[\\.0-9]+;.*rv:)([0-9]+[\\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=s.match(/ Gecko\\/\\d+/),t.isOpera=typeof opera==\"object\"&&Object.prototype.toString.call(window.opera)==\"[object Opera]\",t.isWebKit=parseFloat(s.split(\"WebKit/\")[1])||undefined,t.isChrome=parseFloat(s.split(\" Chrome/\")[1])||undefined,t.isEdge=parseFloat(s.split(\" Edge/\")[1])||undefined,t.isAIR=s.indexOf(\"AdobeAIR\")>=0,t.isAndroid=s.indexOf(\"Android\")>=0,t.isChromeOS=s.indexOf(\" CrOS \")>=0,t.isIOS=/iPad|iPhone|iPod/.test(s)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid}),ace.define(\"ace/lib/dom\",[\"require\",\"exports\",\"module\",\"ace/lib/useragent\"],function(e,t,n){\"use strict\";function u(){var e=o;o=null,e&&e.forEach(function(e){a(e[0],e[1])})}function a(e,n,r){if(typeof document==\"undefined\")return;if(o)if(r)u();else if(r===!1)return o.push([e,n]);if(s)return;var i=r;if(!r||!r.getRootNode)i=document;else{i=r.getRootNode();if(!i||i==r)i=document}var a=i.ownerDocument||i;if(n&&t.hasCssString(n,i))return null;n&&(e+=\"\\n/*# sourceURL=ace/css/\"+n+\" */\");var f=t.createElement(\"style\");f.appendChild(a.createTextNode(e)),n&&(f.id=n),i==a&&(i=t.getDocumentHead(a)),i.insertBefore(f,i.firstChild)}var r=e(\"./useragent\"),i=\"http://www.w3.org/1999/xhtml\";t.buildDom=function l(e,t,n){if(typeof e==\"string\"&&e){var r=document.createTextNode(e);return t&&t.appendChild(r),r}if(!Array.isArray(e))return e&&e.appendChild&&t&&t.appendChild(e),e;if(typeof e[0]!=\"string\"||!e[0]){var i=[];for(var s=0;s<e.length;s++){var o=l(e[s],t,n);o&&i.push(o)}return i}var u=document.createElement(e[0]),a=e[1],f=1;a&&typeof a==\"object\"&&!Array.isArray(a)&&(f=2);for(var s=f;s<e.length;s++)l(e[s],u,n);return f==2&&Object.keys(a).forEach(function(e){var t=a[e];e===\"class\"?u.className=Array.isArray(t)?t.join(\" \"):t:typeof t==\"function\"||e==\"value\"||e[0]==\"$\"?u[e]=t:e===\"ref\"?n&&(n[t]=u):e===\"style\"?typeof t==\"string\"&&(u.style.cssText=t):t!=null&&u.setAttribute(e,t)}),t&&t.appendChild(u),u},t.getDocumentHead=function(e){return e||(e=document),e.head||e.getElementsByTagName(\"head\")[0]||e.documentElement},t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||i,e):document.createElement(e)},t.removeChildren=function(e){e.innerHTML=\"\"},t.createTextNode=function(e,t){var n=t?t.ownerDocument:document;return n.createTextNode(e)},t.createFragment=function(e){var t=e?e.ownerDocument:document;return t.createDocumentFragment()},t.hasCssClass=function(e,t){var n=(e.className+\"\").split(/\\s+/g);return n.indexOf(t)!==-1},t.addCssClass=function(e,n){t.hasCssClass(e,n)||(e.className+=\" \"+n)},t.removeCssClass=function(e,t){var n=e.className.split(/\\s+/g);for(;;){var r=n.indexOf(t);if(r==-1)break;n.splice(r,1)}e.className=n.join(\" \")},t.toggleCssClass=function(e,t){var n=e.className.split(/\\s+/g),r=!0;for(;;){var i=n.indexOf(t);if(i==-1)break;r=!1,n.splice(i,1)}return r&&n.push(t),e.className=n.join(\" \"),r},t.setCssClass=function(e,n,r){r?t.addCssClass(e,n):t.removeCssClass(e,n)},t.hasCssString=function(e,t){var n=0,r;t=t||document;if(r=t.querySelectorAll(\"style\"))while(n<r.length)if(r[n++].id===e)return!0},t.removeElementById=function(e,t){t=t||document,t.getElementById(e)&&t.getElementById(e).remove()};var s,o=[];t.useStrictCSP=function(e){s=e,e==0?u():o||(o=[])},t.importCssString=a,t.importCssStylsheet=function(e,n){t.buildDom([\"link\",{rel:\"stylesheet\",href:e}],t.getDocumentHead(n))},t.scrollbarWidth=function(e){var n=t.createElement(\"ace_inner\");n.style.width=\"100%\",n.style.minWidth=\"0px\",n.style.height=\"200px\",n.style.display=\"block\";var r=t.createElement(\"ace_outer\"),i=r.style;i.position=\"absolute\",i.left=\"-10000px\",i.overflow=\"hidden\",i.width=\"200px\",i.minWidth=\"0px\",i.height=\"150px\",i.display=\"block\",r.appendChild(n);var s=e&&e.documentElement||document&&document.documentElement;if(!s)return 0;s.appendChild(r);var o=n.offsetWidth;i.overflow=\"scroll\";var u=n.offsetWidth;return o===u&&(u=r.clientWidth),s.removeChild(r),o-u},t.computedStyle=function(e,t){return window.getComputedStyle(e,\"\")||{}},t.setStyle=function(e,t,n){e[t]!==n&&(e[t]=n)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=r.isWin?typeof window!=\"undefined\"&&window.devicePixelRatio>=1.5:!0,r.isChromeOS&&(t.HI_DPI=!1);if(typeof document!=\"undefined\"){var f=document.createElement(\"div\");t.HI_DPI&&f.style.transform!==undefined&&(t.HAS_CSS_TRANSFORMS=!0),!r.isEdge&&typeof f.style.animationName!=\"undefined\"&&(t.HAS_CSS_ANIMATION=!0),f=null}t.HAS_CSS_TRANSFORMS?t.translate=function(e,t,n){e.style.transform=\"translate(\"+Math.round(t)+\"px, \"+Math.round(n)+\"px)\"}:t.translate=function(e,t,n){e.style.top=Math.round(n)+\"px\",e.style.left=Math.round(t)+\"px\"}}),ace.define(\"ace/lib/net\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"],function(e,t,n){\"use strict\";var r=e(\"./dom\");t.get=function(e,t){var n=new XMLHttpRequest;n.open(\"GET\",e,!0),n.onreadystatechange=function(){n.readyState===4&&t(n.responseText)},n.send(null)},t.loadScript=function(e,t){var n=r.getDocumentHead(),i=document.createElement(\"script\");i.src=e,n.appendChild(i),i.onload=i.onreadystatechange=function(e,n){if(n||!i.readyState||i.readyState==\"loaded\"||i.readyState==\"complete\")i=i.onload=i.onreadystatechange=null,n||t()}},t.qualifyURL=function(e){var t=document.createElement(\"a\");return t.href=e,t.href}}),ace.define(\"ace/lib/event_emitter\",[\"require\",\"exports\",\"module\"],function(e,t,n){\"use strict\";var r={},i=function(){this.propagationStopped=!0},s=function(){this.defaultPrevented=!0};r._emit=r._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[e]||[],r=this._defaultHandlers[e];if(!n.length&&!r)return;if(typeof t!=\"object\"||!t)t={};t.type||(t.type=e),t.stopPropagation||(t.stopPropagation=i),t.preventDefault||(t.preventDefault=s),n=n.slice();for(var o=0;o<n.length;o++){n[o](t,this);if(t.propagationStopped)break}if(r&&!t.defaultPrevented)return r(t,this)},r._signal=function(e,t){var n=(this._eventRegistry||{})[e];if(!n)return;n=n.slice();for(var r=0;r<n.length;r++)n[r](t,this)},r.once=function(e,t){var n=this;this.on(e,function r(){n.off(e,r),t.apply(null,arguments)});if(!t)return new Promise(function(e){t=e})},r.setDefaultHandler=function(e,t){var n=this._defaultHandlers;n||(n=this._defaultHandlers={_disabled_:{}});if(n[e]){var r=n[e],i=n._disabled_[e];i||(n._disabled_[e]=i=[]),i.push(r);var s=i.indexOf(t);s!=-1&&i.splice(s,1)}n[e]=t},r.removeDefaultHandler=function(e,t){var n=this._defaultHandlers;if(!n)return;var r=n._disabled_[e];if(n[e]==t)r&&this.setDefaultHandler(e,r.pop());else if(r){var i=r.indexOf(t);i!=-1&&r.splice(i,1)}},r.on=r.addEventListener=function(e,t,n){this._eventRegistry=this._eventRegistry||{};var r=this._eventRegistry[e];return r||(r=this._eventRegistry[e]=[]),r.indexOf(t)==-1&&r[n?\"unshift\":\"push\"](t),t},r.off=r.removeListener=r.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(!n)return;var r=n.indexOf(t);r!==-1&&n.splice(r,1)},r.removeAllListeners=function(e){e||(this._eventRegistry=this._defaultHandlers=undefined),this._eventRegistry&&(this._eventRegistry[e]=undefined),this._defaultHandlers&&(this._defaultHandlers[e]=undefined)},t.EventEmitter=r}),ace.define(\"ace/lib/app_config\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/event_emitter\"],function(e,t,n){\"no use strict\";function o(e){typeof console!=\"undefined\"&&console.warn&&console.warn.apply(console,arguments)}function u(e,t){var n=new Error(e);n.data=t,typeof console==\"object\"&&console.error&&console.error(n),setTimeout(function(){throw n})}var r=e(\"./oop\"),i=e(\"./event_emitter\").EventEmitter,s={setOptions:function(e){Object.keys(e).forEach(function(t){this.setOption(t,e[t])},this)},getOptions:function(e){var t={};if(!e){var n=this.$options;e=Object.keys(n).filter(function(e){return!n[e].hidden})}else Array.isArray(e)||(t=e,e=Object.keys(t));return e.forEach(function(e){t[e]=this.getOption(e)},this),t},setOption:function(e,t){if(this[\"$\"+e]===t)return;var n=this.$options[e];if(!n)return o('misspelled option \"'+e+'\"');if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(e,t);n.handlesSet||(this[\"$\"+e]=t),n&&n.set&&n.set.call(this,t)},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.call(this):this[\"$\"+e]:o('misspelled option \"'+e+'\"')}},a=function(){this.$defaultOptions={}};(function(){r.implement(this,i),this.defineOptions=function(e,t,n){return e.$options||(this.$defaultOptions[t]=e.$options={}),Object.keys(n).forEach(function(t){var r=n[t];typeof r==\"string\"&&(r={forwardTo:r}),r.name||(r.name=t),e.$options[r.name]=r,\"initialValue\"in r&&(e[\"$\"+r.name]=r.initialValue)}),r.implement(e,s),this},this.resetOptions=function(e){Object.keys(e.$options).forEach(function(t){var n=e.$options[t];\"value\"in n&&e.setOption(t,n.value)})},this.setDefaultValue=function(e,t,n){if(!e){for(e in this.$defaultOptions)if(this.$defaultOptions[e][t])break;if(!this.$defaultOptions[e][t])return!1}var r=this.$defaultOptions[e]||(this.$defaultOptions[e]={});r[t]&&(r.forwardTo?this.setDefaultValue(r.forwardTo,t,n):r[t].value=n)},this.setDefaultValues=function(e,t){Object.keys(t).forEach(function(n){this.setDefaultValue(e,n,t[n])},this)},this.warn=o,this.reportError=u}).call(a.prototype),t.AppConfig=a}),ace.define(\"ace/theme/textmate.css\",[\"require\",\"exports\",\"module\"],function(e,t,n){n.exports='.ace-tm .ace_gutter {\\n  background: #f0f0f0;\\n  color: #333;\\n}\\n\\n.ace-tm .ace_print-margin {\\n  width: 1px;\\n  background: #e8e8e8;\\n}\\n\\n.ace-tm .ace_fold {\\n    background-color: #6B72E6;\\n}\\n\\n.ace-tm {\\n  background-color: #FFFFFF;\\n  color: black;\\n}\\n\\n.ace-tm .ace_cursor {\\n  color: black;\\n}\\n        \\n.ace-tm .ace_invisible {\\n  color: rgb(191, 191, 191);\\n}\\n\\n.ace-tm .ace_storage,\\n.ace-tm .ace_keyword {\\n  color: blue;\\n}\\n\\n.ace-tm .ace_constant {\\n  color: rgb(197, 6, 11);\\n}\\n\\n.ace-tm .ace_constant.ace_buildin {\\n  color: rgb(88, 72, 246);\\n}\\n\\n.ace-tm .ace_constant.ace_language {\\n  color: rgb(88, 92, 246);\\n}\\n\\n.ace-tm .ace_constant.ace_library {\\n  color: rgb(6, 150, 14);\\n}\\n\\n.ace-tm .ace_invalid {\\n  background-color: rgba(255, 0, 0, 0.1);\\n  color: red;\\n}\\n\\n.ace-tm .ace_support.ace_function {\\n  color: rgb(60, 76, 114);\\n}\\n\\n.ace-tm .ace_support.ace_constant {\\n  color: rgb(6, 150, 14);\\n}\\n\\n.ace-tm .ace_support.ace_type,\\n.ace-tm .ace_support.ace_class {\\n  color: rgb(109, 121, 222);\\n}\\n\\n.ace-tm .ace_keyword.ace_operator {\\n  color: rgb(104, 118, 135);\\n}\\n\\n.ace-tm .ace_string {\\n  color: rgb(3, 106, 7);\\n}\\n\\n.ace-tm .ace_comment {\\n  color: rgb(76, 136, 107);\\n}\\n\\n.ace-tm .ace_comment.ace_doc {\\n  color: rgb(0, 102, 255);\\n}\\n\\n.ace-tm .ace_comment.ace_doc.ace_tag {\\n  color: rgb(128, 159, 191);\\n}\\n\\n.ace-tm .ace_constant.ace_numeric {\\n  color: rgb(0, 0, 205);\\n}\\n\\n.ace-tm .ace_variable {\\n  color: rgb(49, 132, 149);\\n}\\n\\n.ace-tm .ace_xml-pe {\\n  color: rgb(104, 104, 91);\\n}\\n\\n.ace-tm .ace_entity.ace_name.ace_function {\\n  color: #0000A2;\\n}\\n\\n\\n.ace-tm .ace_heading {\\n  color: rgb(12, 7, 255);\\n}\\n\\n.ace-tm .ace_list {\\n  color:rgb(185, 6, 144);\\n}\\n\\n.ace-tm .ace_meta.ace_tag {\\n  color:rgb(0, 22, 142);\\n}\\n\\n.ace-tm .ace_string.ace_regex {\\n  color: rgb(255, 0, 0)\\n}\\n\\n.ace-tm .ace_marker-layer .ace_selection {\\n  background: rgb(181, 213, 255);\\n}\\n.ace-tm.ace_multiselect .ace_selection.ace_start {\\n  box-shadow: 0 0 3px 0px white;\\n}\\n.ace-tm .ace_marker-layer .ace_step {\\n  background: rgb(252, 255, 0);\\n}\\n\\n.ace-tm .ace_marker-layer .ace_stack {\\n  background: rgb(164, 229, 101);\\n}\\n\\n.ace-tm .ace_marker-layer .ace_bracket {\\n  margin: -1px 0 0 -1px;\\n  border: 1px solid rgb(192, 192, 192);\\n}\\n\\n.ace-tm .ace_marker-layer .ace_active-line {\\n  background: rgba(0, 0, 0, 0.07);\\n}\\n\\n.ace-tm .ace_gutter-active-line {\\n    background-color : #dcdcdc;\\n}\\n\\n.ace-tm .ace_marker-layer .ace_selected-word {\\n  background: rgb(250, 250, 255);\\n  border: 1px solid rgb(200, 200, 250);\\n}\\n\\n.ace-tm .ace_indent-guide {\\n  background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==\") right repeat-y;\\n}\\n\\n.ace-tm .ace_indent-guide-active {\\n  background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC\") right repeat-y;\\n}\\n'}),ace.define(\"ace/theme/textmate\",[\"require\",\"exports\",\"module\",\"ace/theme/textmate.css\",\"ace/lib/dom\"],function(e,t,n){\"use strict\";t.isDark=!1,t.cssClass=\"ace-tm\",t.cssText=e(\"./textmate.css\"),t.$id=\"ace/theme/textmate\";var r=e(\"../lib/dom\");r.importCssString(t.cssText,t.cssClass,!1)}),ace.define(\"ace/config\",[\"require\",\"exports\",\"module\",\"ace/lib/lang\",\"ace/lib/oop\",\"ace/lib/net\",\"ace/lib/dom\",\"ace/lib/app_config\",\"ace/theme/textmate\"],function(e,t,n){\"no use strict\";var r=e(\"./lib/lang\"),i=e(\"./lib/oop\"),s=e(\"./lib/net\"),o=e(\"./lib/dom\"),u=e(\"./lib/app_config\").AppConfig;n.exports=t=new u;var a={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:\"\",suffix:\".js\",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};t.get=function(e){if(!a.hasOwnProperty(e))throw new Error(\"Unknown config key: \"+e);return a[e]},t.set=function(e,t){if(a.hasOwnProperty(e))a[e]=t;else if(this.setDefaultValue(\"\",e,t)==0)throw new Error(\"Unknown config key: \"+e);e==\"useStrictCSP\"&&o.useStrictCSP(t)},t.all=function(){return r.copyObject(a)},t.$modes={},t.moduleUrl=function(e,t){if(a.$moduleUrls[e])return a.$moduleUrls[e];var n=e.split(\"/\");t=t||n[n.length-2]||\"\";var r=t==\"snippets\"?\"/\":\"-\",i=n[n.length-1];if(t==\"worker\"&&r==\"-\"){var s=new RegExp(\"^\"+t+\"[\\\\-_]|[\\\\-_]\"+t+\"$\",\"g\");i=i.replace(s,\"\")}(!i||i==t)&&n.length>1&&(i=n[n.length-2]);var o=a[t+\"Path\"];return o==null?o=a.basePath:r==\"/\"&&(t=r=\"\"),o&&o.slice(-1)!=\"/\"&&(o+=\"/\"),o+t+r+i+this.get(\"suffix\")},t.setModuleUrl=function(e,t){return a.$moduleUrls[e]=t};var f=function(t,n){return t==\"ace/theme/textmate\"?n(null,e(\"./theme/textmate\")):console.error(\"loader is not configured\")};t.setLoader=function(e){f=e},t.$loading={},t.loadModule=function(n,r){var i,o;Array.isArray(n)&&(o=n[0],n=n[1]);try{i=e(n)}catch(u){}if(i&&!t.$loading[n])return r&&r(i);t.$loading[n]||(t.$loading[n]=[]),t.$loading[n].push(r);if(t.$loading[n].length>1)return;var a=function(){f(n,function(e,r){t._emit(\"load.module\",{name:n,module:r});var i=t.$loading[n];t.$loading[n]=null,i.forEach(function(e){e&&e(r)})})};if(!t.get(\"packaged\"))return a();s.loadScript(t.moduleUrl(n,o),a),l()};var l=function(){!a.basePath&&!a.workerPath&&!a.modePath&&!a.themePath&&!Object.keys(a.$moduleUrls).length&&(console.error(\"Unable to infer path to ace from script src,\",\"use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes\",\"or with webpack use ace/webpack-resolver\"),l=function(){})};t.version=\"1.14.0\"}),ace.define(\"ace/loader_build\",[\"require\",\"exports\",\"module\",\"ace/lib/fixoldbrowsers\",\"ace/config\"],function(e,t,n){\"use strict\";function s(t){if(!i||!i.document)return;r.set(\"packaged\",t||e.packaged||n.packaged||i.define&&__webpack_require__.amdD.packaged);var s={},u=\"\",a=document.currentScript||document._currentScript,f=a&&a.ownerDocument||document,l=f.getElementsByTagName(\"script\");for(var c=0;c<l.length;c++){var h=l[c],p=h.src||h.getAttribute(\"src\");if(!p)continue;var d=h.attributes;for(var v=0,m=d.length;v<m;v++){var g=d[v];g.name.indexOf(\"data-ace-\")===0&&(s[o(g.name.replace(/^data-ace-/,\"\"))]=g.value)}var y=p.match(/^(.*)\\/ace(\\-\\w+)?\\.js(\\?|$)/);y&&(u=y[1])}u&&(s.base=s.base||u,s.packaged=!0),s.basePath=s.base,s.workerPath=s.workerPath||s.base,s.modePath=s.modePath||s.base,s.themePath=s.themePath||s.base,delete s.base;for(var b in s)typeof s[b]!=\"undefined\"&&r.set(b,s[b])}function o(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}e(\"./lib/fixoldbrowsers\");var r=e(\"./config\");r.setLoader(function(t,n){e([t],function(e){n(null,e)})});var i=function(){return this||typeof window!=\"undefined\"&&window}();n.exports=function(t){r.init=s,t.require=e, true&&(t.define=__webpack_require__.amdD)}}),ace.define(\"ace/lib/keys\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\"],function(e,t,n){\"use strict\";var r=e(\"./oop\"),i=function(){var e={MODIFIER_KEYS:{16:\"Shift\",17:\"Ctrl\",18:\"Alt\",224:\"Meta\",91:\"MetaLeft\",92:\"MetaRight\",93:\"ContextMenu\"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,\"super\":8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:\"Backspace\",9:\"Tab\",13:\"Return\",19:\"Pause\",27:\"Esc\",32:\"Space\",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"Left\",38:\"Up\",39:\"Right\",40:\"Down\",44:\"Print\",45:\"Insert\",46:\"Delete\",96:\"Numpad0\",97:\"Numpad1\",98:\"Numpad2\",99:\"Numpad3\",100:\"Numpad4\",101:\"Numpad5\",102:\"Numpad6\",103:\"Numpad7\",104:\"Numpad8\",105:\"Numpad9\",\"-13\":\"NumpadEnter\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"Numlock\",145:\"Scrolllock\"},PRINTABLE_KEYS:{32:\" \",48:\"0\",49:\"1\",50:\"2\",51:\"3\",52:\"4\",53:\"5\",54:\"6\",55:\"7\",56:\"8\",57:\"9\",59:\";\",61:\"=\",65:\"a\",66:\"b\",67:\"c\",68:\"d\",69:\"e\",70:\"f\",71:\"g\",72:\"h\",73:\"i\",74:\"j\",75:\"k\",76:\"l\",77:\"m\",78:\"n\",79:\"o\",80:\"p\",81:\"q\",82:\"r\",83:\"s\",84:\"t\",85:\"u\",86:\"v\",87:\"w\",88:\"x\",89:\"y\",90:\"z\",107:\"+\",109:\"-\",110:\".\",186:\";\",187:\"=\",188:\",\",189:\"-\",190:\".\",191:\"/\",192:\"`\",219:\"[\",220:\"\\\\\",221:\"]\",222:\"'\",111:\"/\",106:\"*\"}};e.PRINTABLE_KEYS[173]=\"-\";var t,n;for(n in e.FUNCTION_KEYS)t=e.FUNCTION_KEYS[n].toLowerCase(),e[t]=parseInt(n,10);for(n in e.PRINTABLE_KEYS)t=e.PRINTABLE_KEYS[n].toLowerCase(),e[t]=parseInt(n,10);return r.mixin(e,e.MODIFIER_KEYS),r.mixin(e,e.PRINTABLE_KEYS),r.mixin(e,e.FUNCTION_KEYS),e.enter=e[\"return\"],e.escape=e.esc,e.del=e[\"delete\"],function(){var t=[\"cmd\",\"ctrl\",\"alt\",\"shift\"];for(var n=Math.pow(2,t.length);n--;)e.KEY_MODS[n]=t.filter(function(t){return n&e.KEY_MODS[t]}).join(\"-\")+\"-\"}(),e.KEY_MODS[0]=\"\",e.KEY_MODS[-1]=\"input-\",e}();r.mixin(t,i),t.keyCodeToString=function(e){var t=i[e];return typeof t!=\"string\"&&(t=String.fromCharCode(e)),t.toLowerCase()}}),ace.define(\"ace/lib/event\",[\"require\",\"exports\",\"module\",\"ace/lib/keys\",\"ace/lib/useragent\"],function(e,t,n){\"use strict\";function a(){u=!1;try{document.createComment(\"\").addEventListener(\"test\",function(){},{get passive(){u={passive:!1}}})}catch(e){}}function f(){return u==undefined&&a(),u}function l(e,t,n){this.elem=e,this.type=t,this.callback=n}function d(e,t,n){var u=p(t);if(!i.isMac&&s){t.getModifierState&&(t.getModifierState(\"OS\")||t.getModifierState(\"Win\"))&&(u|=8);if(s.altGr){if((3&u)==3)return;s.altGr=0}if(n===18||n===17){var a=\"location\"in t?t.location:t.keyLocation;if(n===17&&a===1)s[n]==1&&(o=t.timeStamp);else if(n===18&&u===3&&a===2){var f=t.timeStamp-o;f<50&&(s.altGr=!0)}}}n in r.MODIFIER_KEYS&&(n=-1);if(!u&&n===13){var a=\"location\"in t?t.location:t.keyLocation;if(a===3){e(t,u,-n);if(t.defaultPrevented)return}}if(i.isChromeOS&&u&8){e(t,u,n);if(t.defaultPrevented)return;u&=-9}return!!u||n in r.FUNCTION_KEYS||n in r.PRINTABLE_KEYS?e(t,u,n):!1}function v(){s=Object.create(null)}var r=e(\"./keys\"),i=e(\"./useragent\"),s=null,o=0,u;l.prototype.destroy=function(){h(this.elem,this.type,this.callback),this.elem=this.type=this.callback=undefined};var c=t.addListener=function(e,t,n,r){e.addEventListener(t,n,f()),r&&r.$toDestroy.push(new l(e,t,n))},h=t.removeListener=function(e,t,n){e.removeEventListener(t,n,f())};t.stopEvent=function(e){return t.stopPropagation(e),t.preventDefault(e),!1},t.stopPropagation=function(e){e.stopPropagation&&e.stopPropagation()},t.preventDefault=function(e){e.preventDefault&&e.preventDefault()},t.getButton=function(e){return e.type==\"dblclick\"?0:e.type==\"contextmenu\"||i.isMac&&e.ctrlKey&&!e.altKey&&!e.shiftKey?2:e.button},t.capture=function(e,t,n){function i(e){t&&t(e),n&&n(e),h(r,\"mousemove\",t),h(r,\"mouseup\",i),h(r,\"dragstart\",i)}var r=e&&e.ownerDocument||document;return c(r,\"mousemove\",t),c(r,\"mouseup\",i),c(r,\"dragstart\",i),i},t.addMouseWheelListener=function(e,t,n){c(e,\"wheel\",function(e){var n=.15,r=e.deltaX||0,i=e.deltaY||0;switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=r*n,e.wheelY=i*n;break;case e.DOM_DELTA_LINE:var s=15;e.wheelX=r*s,e.wheelY=i*s;break;case e.DOM_DELTA_PAGE:var o=150;e.wheelX=r*o,e.wheelY=i*o}t(e)},n)},t.addMultiMouseDownListener=function(e,n,r,s,o){function p(e){t.getButton(e)!==0?u=0:e.detail>1?(u++,u>4&&(u=1)):u=1;if(i.isIE){var o=Math.abs(e.clientX-a)>5||Math.abs(e.clientY-f)>5;if(!l||o)u=1;l&&clearTimeout(l),l=setTimeout(function(){l=null},n[u-1]||600),u==1&&(a=e.clientX,f=e.clientY)}e._clicks=u,r[s](\"mousedown\",e);if(u>4)u=0;else if(u>1)return r[s](h[u],e)}var u=0,a,f,l,h={2:\"dblclick\",3:\"tripleclick\",4:\"quadclick\"};Array.isArray(e)||(e=[e]),e.forEach(function(e){c(e,\"mousedown\",p,o)})};var p=function(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)};t.getModifierString=function(e){return r.KEY_MODS[p(e)]},t.addCommandKeyListener=function(e,n,r){if(i.isOldGecko||i.isOpera&&!(\"KeyboardEvent\"in window)){var o=null;c(e,\"keydown\",function(e){o=e.keyCode},r),c(e,\"keypress\",function(e){return d(n,e,o)},r)}else{var u=null;c(e,\"keydown\",function(e){s[e.keyCode]=(s[e.keyCode]||0)+1;var t=d(n,e,e.keyCode);return u=e.defaultPrevented,t},r),c(e,\"keypress\",function(e){u&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(t.stopEvent(e),u=null)},r),c(e,\"keyup\",function(e){s[e.keyCode]=null},r),s||(v(),c(window,\"focus\",v))}};if(typeof window==\"object\"&&window.postMessage&&!i.isOldIE){var m=1;t.nextTick=function(e,n){n=n||window;var r=\"zero-timeout-message-\"+m++,i=function(s){s.data==r&&(t.stopPropagation(s),h(n,\"message\",i),e())};c(n,\"message\",i),n.postMessage(r,\"*\")}}t.$idleBlocked=!1,t.onIdle=function(e,n){return setTimeout(function r(){t.$idleBlocked?setTimeout(r,100):e()},n)},t.$idleBlockId=null,t.blockIdle=function(e){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout(function(){t.$idleBlocked=!1},e||100)},t.nextFrame=typeof window==\"object\"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(e){setTimeout(e,17)}}),ace.define(\"ace/range\",[\"require\",\"exports\",\"module\"],function(e,t,n){\"use strict\";var r=function(e,t){return e.row-t.row||e.column-t.column},i=function(e,t,n,r){this.start={row:e,column:t},this.end={row:n,column:r}};(function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column},this.toString=function(){return\"Range: [\"+this.start.row+\"/\"+this.start.column+\"] -> [\"+this.end.row+\"/\"+this.end.column+\"]\"},this.contains=function(e,t){return this.compare(e,t)==0},this.compareRange=function(e){var t,n=e.end,r=e.start;return t=this.compare(n.row,n.column),t==1?(t=this.compare(r.row,r.column),t==1?2:t==0?1:0):t==-1?-2:(t=this.compare(r.row,r.column),t==-1?-1:t==1?42:0)},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return this.comparePoint(e.start)==0&&this.comparePoint(e.end)==0},this.intersects=function(e){var t=this.compareRange(e);return t==-1||t==0||t==1},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){typeof e==\"object\"?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){typeof e==\"object\"?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return this.compare(e,t)==0?this.isEnd(e,t)||this.isStart(e,t)?!1:!0:!1},this.insideStart=function(e,t){return this.compare(e,t)==0?this.isEnd(e,t)?!1:!0:!1},this.insideEnd=function(e,t){return this.compare(e,t)==0?this.isStart(e,t)?!1:!0:!1},this.compare=function(e,t){return!this.isMultiLine()&&e===this.start.row?t<this.start.column?-1:t>this.end.column?1:0:e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row===e?t<=this.end.column?0:1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){if(this.end.row>t)var n={row:t+1,column:0};else if(this.end.row<e)var n={row:e,column:0};if(this.start.row>t)var r={row:t+1,column:0};else if(this.start.row<e)var r={row:e,column:0};return i.fromPoints(r||this.start,n||this.end)},this.extend=function(e,t){var n=this.compare(e,t);if(n==0)return this;if(n==-1)var r={row:e,column:t};else var s={row:e,column:t};return i.fromPoints(r||this.start,s||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return i.fromPoints(this.start,this.end)},this.collapseRows=function(){return this.end.column==0?new i(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new i(this.start.row,0,this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),n=e.documentToScreenPosition(this.end);return new i(t.row,t.column,n.row,n.column)},this.moveBy=function(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t}}).call(i.prototype),i.fromPoints=function(e,t){return new i(e.row,e.column,t.row,t.column)},i.comparePoints=r,i.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},t.Range=i}),ace.define(\"ace/clipboard\",[\"require\",\"exports\",\"module\"],function(e,t,n){\"use strict\";var r;n.exports={lineMode:!1,pasteCancelled:function(){return r&&r>Date.now()-50?!0:r=!1},cancel:function(){r=Date.now()}}}),ace.define(\"ace/keyboard/textinput\",[\"require\",\"exports\",\"module\",\"ace/lib/event\",\"ace/lib/useragent\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/clipboard\",\"ace/lib/keys\"],function(e,t,n){\"use strict\";var r=e(\"../lib/event\"),i=e(\"../lib/useragent\"),s=e(\"../lib/dom\"),o=e(\"../lib/lang\"),u=e(\"../clipboard\"),a=i.isChrome<18,f=i.isIE,l=i.isChrome>63,c=400,h=e(\"../lib/keys\"),p=h.KEY_MODS,d=i.isIOS,v=d?/\\s/:/\\n/,m=i.isMobile,g=function(e,t){function X(){x=!0,n.blur(),n.focus(),x=!1}function $(e){e.keyCode==27&&n.value.length<n.selectionStart&&(b||(T=n.value),N=C=-1,O()),V()}function K(){clearTimeout(J),J=setTimeout(function(){E&&(n.style.cssText=E,E=\"\"),t.renderer.$isMousePressed=!1,t.renderer.$keepTextAreaAtCursor&&t.renderer.$moveTextAreaToCursor()},0)}function G(e,t,n){var r=null,i=!1;n.addEventListener(\"keydown\",function(e){r&&clearTimeout(r),i=!0},!0),n.addEventListener(\"keyup\",function(e){r=setTimeout(function(){i=!1},100)},!0);var s=function(e){if(document.activeElement!==n)return;if(i||b||t.$mouseHandler.isMousePressed)return;if(g)return;var r=n.selectionStart,s=n.selectionEnd,o=null,u=0;if(r==0)o=h.up;else if(r==1)o=h.home;else if(s>C&&T[s]==\"\\n\")o=h.end;else if(r<N&&T[r-1]==\" \")o=h.left,u=p.option;else if(r<N||r==N&&C!=N&&r==s)o=h.left;else if(s>C&&T.slice(0,s).split(\"\\n\").length>2)o=h.down;else if(s>C&&T[s-1]==\" \")o=h.right,u=p.option;else if(s>C||s==C&&C!=N&&r==s)o=h.right;r!==s&&(u|=p.shift);if(o){var a=t.onCommandKey({},u,o);if(!a&&t.commands){o=h.keyCodeToString(o);var f=t.commands.findKeyCommand(u,o);f&&t.execCommand(f)}N=r,C=s,O(\"\")}};document.addEventListener(\"selectionchange\",s),t.on(\"destroy\",function(){document.removeEventListener(\"selectionchange\",s)})}var n=s.createElement(\"textarea\");n.className=\"ace_text-input\",n.setAttribute(\"wrap\",\"off\"),n.setAttribute(\"autocorrect\",\"off\"),n.setAttribute(\"autocapitalize\",\"off\"),n.setAttribute(\"spellcheck\",!1),n.style.opacity=\"0\",e.insertBefore(n,e.firstChild);var g=!1,y=!1,b=!1,w=!1,E=\"\";m||(n.style.fontSize=\"1px\");var S=!1,x=!1,T=\"\",N=0,C=0,k=0;try{var L=document.activeElement===n}catch(A){}this.setAriaOptions=function(e){e.activeDescendant?(n.setAttribute(\"aria-haspopup\",\"true\"),n.setAttribute(\"aria-autocomplete\",\"list\"),n.setAttribute(\"aria-activedescendant\",e.activeDescendant)):(n.setAttribute(\"aria-haspopup\",\"false\"),n.setAttribute(\"aria-autocomplete\",\"both\"),n.removeAttribute(\"aria-activedescendant\")),e.role&&n.setAttribute(\"role\",e.role)},this.setAriaOptions({role:\"textbox\"}),r.addListener(n,\"blur\",function(e){if(x)return;t.onBlur(e),L=!1},t),r.addListener(n,\"focus\",function(e){if(x)return;L=!0;if(i.isEdge)try{if(!document.hasFocus())return}catch(e){}t.onFocus(e),i.isEdge?setTimeout(O):O()},t),this.$focusScroll=!1,this.focus=function(){if(E||l||this.$focusScroll==\"browser\")return n.focus({preventScroll:!0});var e=n.style.top;n.style.position=\"fixed\",n.style.top=\"0px\";try{var t=n.getBoundingClientRect().top!=0}catch(r){return}var i=[];if(t){var s=n.parentElement;while(s&&s.nodeType==1)i.push(s),s.setAttribute(\"ace_nocontext\",!0),!s.parentElement&&s.getRootNode?s=s.getRootNode().host:s=s.parentElement}n.focus({preventScroll:!0}),t&&i.forEach(function(e){e.removeAttribute(\"ace_nocontext\")}),setTimeout(function(){n.style.position=\"\",n.style.top==\"0px\"&&(n.style.top=e)},0)},this.blur=function(){n.blur()},this.isFocused=function(){return L},t.on(\"beforeEndOperation\",function(){var e=t.curOp,r=e&&e.command&&e.command.name;if(r==\"insertstring\")return;var i=r&&(e.docChanged||e.selectionChanged);b&&i&&(T=n.value=\"\",W()),O()});var O=d?function(e){if(!L||g&&!e||w)return;e||(e=\"\");var r=\"\\n ab\"+e+\"cde fg\\n\";r!=n.value&&(n.value=T=r);var i=4,s=4+(e.length||(t.selection.isEmpty()?0:1));(N!=i||C!=s)&&n.setSelectionRange(i,s),N=i,C=s}:function(){if(b||w)return;if(!L&&!P)return;b=!0;var e=0,r=0,i=\"\";if(t.session){var s=t.selection,o=s.getRange(),u=s.cursor.row;e=o.start.column,r=o.end.column,i=t.session.getLine(u);if(o.start.row!=u){var a=t.session.getLine(u-1);e=o.start.row<u-1?0:e,r+=a.length+1,i=a+\"\\n\"+i}else if(o.end.row!=u){var f=t.session.getLine(u+1);r=o.end.row>u+1?f.length:r,r+=i.length+1,i=i+\"\\n\"+f}else m&&u>0&&(i=\"\\n\"+i,r+=1,e+=1);i.length>c&&(e<c&&r<c?i=i.slice(0,c):(i=\"\\n\",e==r?e=r=0:(e=0,r=1)))}var l=i+\"\\n\\n\";l!=T&&(n.value=T=l,N=C=l.length),P&&(N=n.selectionStart,C=n.selectionEnd);if(C!=r||N!=e||n.selectionEnd!=C)try{n.setSelectionRange(e,r),N=e,C=r}catch(h){}b=!1};this.resetSelection=O,L&&t.onFocus();var M=function(e){return e.selectionStart===0&&e.selectionEnd>=T.length&&e.value===T&&T&&e.selectionEnd!==C},_=function(e){if(b)return;g?g=!1:M(n)?(t.selectAll(),O()):m&&n.selectionStart!=N&&O()},D=null;this.setInputHandler=function(e){D=e},this.getInputHandler=function(){return D};var P=!1,H=function(e,r){P&&(P=!1);if(y)return O(),e&&t.onPaste(e),y=!1,\"\";var s=n.selectionStart,o=n.selectionEnd,u=N,a=T.length-C,f=e,l=e.length-s,c=e.length-o,h=0;while(u>0&&T[h]==e[h])h++,u--;f=f.slice(h),h=1;while(a>0&&T.length-h>N-1&&T[T.length-h]==e[e.length-h])h++,a--;l-=h-1,c-=h-1;var p=f.length-h+1;p<0&&(u=-p,p=0),f=f.slice(0,p);if(!r&&!f&&!l&&!u&&!a&&!c)return\"\";w=!0;var d=!1;return i.isAndroid&&f==\". \"&&(f=\"  \",d=!0),f&&!u&&!a&&!l&&!c||S?t.onTextInput(f):t.onTextInput(f,{extendLeft:u,extendRight:a,restoreStart:l,restoreEnd:c}),w=!1,T=e,N=s,C=o,k=c,d?\"\\n\":f},B=function(e){if(b)return z();if(e&&e.inputType){if(e.inputType==\"historyUndo\")return t.execCommand(\"undo\");if(e.inputType==\"historyRedo\")return t.execCommand(\"redo\")}var r=n.value,i=H(r,!0);(r.length>c+100||v.test(i)||m&&N<1&&N==C)&&O()},j=function(e,t,n){var r=e.clipboardData||window.clipboardData;if(!r||a)return;var i=f||n?\"Text\":\"text/plain\";try{return t?r.setData(i,t)!==!1:r.getData(i)}catch(e){if(!n)return j(e,t,!0)}},F=function(e,i){var s=t.getCopyText();if(!s)return r.preventDefault(e);j(e,s)?(d&&(O(s),g=s,setTimeout(function(){g=!1},10)),i?t.onCut():t.onCopy(),r.preventDefault(e)):(g=!0,n.value=s,n.select(),setTimeout(function(){g=!1,O(),i?t.onCut():t.onCopy()}))},I=function(e){F(e,!0)},q=function(e){F(e,!1)},R=function(e){var s=j(e);if(u.pasteCancelled())return;typeof s==\"string\"?(s&&t.onPaste(s,e),i.isIE&&setTimeout(O),r.preventDefault(e)):(n.value=\"\",y=!0)};r.addCommandKeyListener(n,t.onCommandKey.bind(t),t),r.addListener(n,\"select\",_,t),r.addListener(n,\"input\",B,t),r.addListener(n,\"cut\",I,t),r.addListener(n,\"copy\",q,t),r.addListener(n,\"paste\",R,t),(!(\"oncut\"in n)||!(\"oncopy\"in n)||!(\"onpaste\"in n))&&r.addListener(e,\"keydown\",function(e){if(i.isMac&&!e.metaKey||!e.ctrlKey)return;switch(e.keyCode){case 67:q(e);break;case 86:R(e);break;case 88:I(e)}},t);var U=function(e){if(b||!t.onCompositionStart||t.$readOnly)return;b={};if(S)return;e.data&&(b.useTextareaForIME=!1),setTimeout(z,0),t._signal(\"compositionStart\"),t.on(\"mousedown\",X);var r=t.getSelectionRange();r.end.row=r.start.row,r.end.column=r.start.column,b.markerRange=r,b.selectionStart=N,t.onCompositionStart(b),b.useTextareaForIME?(T=n.value=\"\",N=0,C=0):(n.msGetInputContext&&(b.context=n.msGetInputContext()),n.getInputContext&&(b.context=n.getInputContext()))},z=function(){if(!b||!t.onCompositionUpdate||t.$readOnly)return;if(S)return X();if(b.useTextareaForIME)t.onCompositionUpdate(n.value);else{var e=n.value;H(e),b.markerRange&&(b.context&&(b.markerRange.start.column=b.selectionStart=b.context.compositionStartOffset),b.markerRange.end.column=b.markerRange.start.column+C-b.selectionStart+k)}},W=function(e){if(!t.onCompositionEnd||t.$readOnly)return;b=!1,t.onCompositionEnd(),t.off(\"mousedown\",X),e&&B()},V=o.delayedCall(z,50).schedule.bind(null,null);r.addListener(n,\"compositionstart\",U,t),r.addListener(n,\"compositionupdate\",z,t),r.addListener(n,\"keyup\",$,t),r.addListener(n,\"keydown\",V,t),r.addListener(n,\"compositionend\",W,t),this.getElement=function(){return n},this.setCommandMode=function(e){S=e,n.readOnly=!1},this.setReadOnly=function(e){S||(n.readOnly=e)},this.setCopyWithEmptySelection=function(e){},this.onContextMenu=function(e){P=!0,O(),t._emit(\"nativecontextmenu\",{target:t,domEvent:e}),this.moveToMouse(e,!0)},this.moveToMouse=function(e,o){E||(E=n.style.cssText),n.style.cssText=(o?\"z-index:100000;\":\"\")+(i.isIE?\"opacity:0.1;\":\"\")+\"text-indent: -\"+(N+C)*t.renderer.characterWidth*.5+\"px;\";var u=t.container.getBoundingClientRect(),a=s.computedStyle(t.container),f=u.top+(parseInt(a.borderTopWidth)||0),l=u.left+(parseInt(u.borderLeftWidth)||0),c=u.bottom-f-n.clientHeight-2,h=function(e){s.translate(n,e.clientX-l-2,Math.min(e.clientY-f-2,c))};h(e);if(e.type!=\"mousedown\")return;t.renderer.$isMousePressed=!0,clearTimeout(J),i.isWin&&r.capture(t.container,h,K)},this.onContextMenuClose=K;var J,Q=function(e){t.textInput.onContextMenu(e),K()};r.addListener(n,\"mouseup\",Q,t),r.addListener(n,\"mousedown\",function(e){e.preventDefault(),K()},t),r.addListener(t.renderer.scroller,\"contextmenu\",Q,t),r.addListener(n,\"contextmenu\",Q,t),d&&G(e,t,n),this.destroy=function(){n.parentElement&&n.parentElement.removeChild(n)}};t.TextInput=g,t.$setUserAgentForTests=function(e,t){m=e,d=t}}),ace.define(\"ace/mouse/default_handlers\",[\"require\",\"exports\",\"module\",\"ace/lib/useragent\"],function(e,t,n){\"use strict\";function o(e){e.$clickSelection=null;var t=e.editor;t.setDefaultHandler(\"mousedown\",this.onMouseDown.bind(e)),t.setDefaultHandler(\"dblclick\",this.onDoubleClick.bind(e)),t.setDefaultHandler(\"tripleclick\",this.onTripleClick.bind(e)),t.setDefaultHandler(\"quadclick\",this.onQuadClick.bind(e)),t.setDefaultHandler(\"mousewheel\",this.onMouseWheel.bind(e));var n=[\"select\",\"startSelect\",\"selectEnd\",\"selectAllEnd\",\"selectByWordsEnd\",\"selectByLinesEnd\",\"dragWait\",\"dragWaitEnd\",\"focusWait\"];n.forEach(function(t){e[t]=this[t]},this),e.selectByLines=this.extendSelectionBy.bind(e,\"getLineRange\"),e.selectByWords=this.extendSelectionBy.bind(e,\"getWordRange\")}function u(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}function a(e,t){if(e.start.row==e.end.row)var n=2*t.column-e.start.column-e.end.column;else if(e.start.row==e.end.row-1&&!e.start.column&&!e.end.column)var n=t.column-4;else var n=2*t.row-e.start.row-e.end.row;return n<0?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}var r=e(\"../lib/useragent\"),i=0,s=550;(function(){this.onMouseDown=function(e){var t=e.inSelection(),n=e.getDocumentPosition();this.mousedownEvent=e;var i=this.editor,s=e.getButton();if(s!==0){var o=i.getSelectionRange(),u=o.isEmpty();(u||s==1)&&i.selection.moveToPosition(n),s==2&&(i.textInput.onContextMenu(e.domEvent),r.isMozilla||e.preventDefault());return}this.mousedownEvent.time=Date.now();if(t&&!i.isFocused()){i.focus();if(this.$focusTimeout&&!this.$clickSelection&&!i.inMultiSelectMode){this.setState(\"focusWait\"),this.captureMouse(e);return}}return this.captureMouse(e),this.startSelect(n,e.domEvent._clicks>1),e.preventDefault()},this.startSelect=function(e,t){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var n=this.editor;if(!this.mousedownEvent)return;this.mousedownEvent.getShiftKey()?n.selection.selectToPosition(e):t||n.selection.moveToPosition(e),t||this.select(),n.renderer.scroller.setCapture&&n.renderer.scroller.setCapture(),n.setStyle(\"ace_selecting\"),this.setState(\"select\")},this.select=function(){var e,t=this.editor,n=t.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var r=this.$clickSelection.comparePoint(n);if(r==-1)e=this.$clickSelection.end;else if(r==1)e=this.$clickSelection.start;else{var i=a(this.$clickSelection,n);n=i.cursor,e=i.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(n),t.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var t,n=this.editor,r=n.renderer.screenToTextCoordinates(this.x,this.y),i=n.selection[e](r.row,r.column);if(this.$clickSelection){var s=this.$clickSelection.comparePoint(i.start),o=this.$clickSelection.comparePoint(i.end);if(s==-1&&o<=0){t=this.$clickSelection.end;if(i.end.row!=r.row||i.end.column!=r.column)r=i.start}else if(o==1&&s>=0){t=this.$clickSelection.start;if(i.start.row!=r.row||i.start.column!=r.column)r=i.end}else if(s==-1&&o==1)r=i.end,t=i.start;else{var u=a(this.$clickSelection,r);r=u.cursor,t=u.anchor}n.selection.setSelectionAnchor(t.row,t.column)}n.selection.selectToPosition(r),n.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle(\"ace_selecting\"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var e=u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),t=Date.now();(e>i||t-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(e){var t=e.getDocumentPosition(),n=this.editor,r=n.session,i=r.getBracketRange(t);i?(i.isEmpty()&&(i.start.column--,i.end.column++),this.setState(\"select\")):(i=n.selection.getWordRange(t.row,t.column),this.setState(\"selectByWords\")),this.$clickSelection=i,this.select()},this.onTripleClick=function(e){var t=e.getDocumentPosition(),n=this.editor;this.setState(\"selectByLines\");var r=n.getSelectionRange();r.isMultiLine()&&r.contains(t.row,t.column)?(this.$clickSelection=n.selection.getLineRange(r.start.row),this.$clickSelection.end=n.selection.getLineRange(r.end.row).end):this.$clickSelection=n.selection.getLineRange(t.row),this.select()},this.onQuadClick=function(e){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState(\"selectAll\")},this.onMouseWheel=function(e){if(e.getAccelKey())return;e.getShiftKey()&&e.wheelY&&!e.wheelX&&(e.wheelX=e.wheelY,e.wheelY=0);var t=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var n=this.$lastScroll,r=e.domEvent.timeStamp,i=r-n.t,o=i?e.wheelX/i:n.vx,u=i?e.wheelY/i:n.vy;i<s&&(o=(o+n.vx)/2,u=(u+n.vy)/2);var a=Math.abs(o/u),f=!1;a>=1&&t.renderer.isScrollableBy(e.wheelX*e.speed,0)&&(f=!0),a<=1&&t.renderer.isScrollableBy(0,e.wheelY*e.speed)&&(f=!0);if(f)n.allowed=r;else if(r-n.allowed<s){var l=Math.abs(o)<=1.5*Math.abs(n.vx)&&Math.abs(u)<=1.5*Math.abs(n.vy);l?(f=!0,n.allowed=r):n.allowed=0}n.t=r,n.vx=o,n.vy=u;if(f)return t.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()}}).call(o.prototype),t.DefaultHandlers=o}),ace.define(\"ace/tooltip\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\"],function(e,t,n){\"use strict\";function o(e){this.isOpen=!1,this.$element=null,this.$parentNode=e}var r=e(\"./lib/oop\"),i=e(\"./lib/dom\"),s=\"ace_tooltip\";(function(){this.$init=function(){return this.$element=i.createElement(\"div\"),this.$element.className=s,this.$element.style.display=\"none\",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(e){this.getElement().textContent=e},this.setHtml=function(e){this.getElement().innerHTML=e},this.setPosition=function(e,t){this.getElement().style.left=e+\"px\",this.getElement().style.top=t+\"px\"},this.setClassName=function(e){i.addCssClass(this.getElement(),e)},this.show=function(e,t,n){e!=null&&this.setText(e),t!=null&&n!=null&&this.setPosition(t,n),this.isOpen||(this.getElement().style.display=\"block\",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display=\"none\",this.getElement().className=s,this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(o.prototype),t.Tooltip=o}),ace.define(\"ace/mouse/default_gutter_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/oop\",\"ace/lib/event\",\"ace/tooltip\"],function(e,t,n){\"use strict\";function u(e){function l(){var r=u.getDocumentPosition().row,s=n.$annotations[r];if(!s)return c();var o=t.session.getLength();if(r==o){var a=t.renderer.pixelToScreenCoordinates(0,u.y).row,l=u.$pos;if(a>t.session.documentToScreenRow(l.row,l.column))return c()}if(f==s)return;f=s.text.join(\"<br/>\"),i.setHtml(f);var p=s.className;p&&i.setClassName(p.trim()),i.show(),t._signal(\"showGutterTooltip\",i),t.on(\"mousewheel\",c);if(e.$tooltipFollowsMouse)h(u);else{var d=u.domEvent.target,v=d.getBoundingClientRect(),m=i.getElement().style;m.left=v.right+\"px\",m.top=v.bottom+\"px\"}}function c(){o&&(o=clearTimeout(o)),f&&(i.hide(),f=null,t._signal(\"hideGutterTooltip\",i),t.off(\"mousewheel\",c))}function h(e){i.setPosition(e.x,e.y)}var t=e.editor,n=t.renderer.$gutterLayer,i=new a(t.container);e.editor.setDefaultHandler(\"guttermousedown\",function(r){if(!t.isFocused()||r.getButton()!=0)return;var i=n.getRegion(r);if(i==\"foldWidgets\")return;var s=r.getDocumentPosition().row,o=t.session.selection;if(r.getShiftKey())o.selectTo(s,0);else{if(r.domEvent.detail==2)return t.selectAll(),r.preventDefault();e.$clickSelection=t.selection.getLineRange(s)}return e.setState(\"selectByLines\"),e.captureMouse(r),r.preventDefault()});var o,u,f;e.editor.setDefaultHandler(\"guttermousemove\",function(t){var n=t.domEvent.target||t.domEvent.srcElement;if(r.hasCssClass(n,\"ace_fold-widget\"))return c();f&&e.$tooltipFollowsMouse&&h(t),u=t;if(o)return;o=setTimeout(function(){o=null,u&&!e.isMousePressed?l():c()},50)}),s.addListener(t.renderer.$gutter,\"mouseout\",function(e){u=null;if(!f||o)return;o=setTimeout(function(){o=null,c()},50)},t),t.on(\"changeSession\",c)}function a(e){o.call(this,e)}var r=e(\"../lib/dom\"),i=e(\"../lib/oop\"),s=e(\"../lib/event\"),o=e(\"../tooltip\").Tooltip;i.inherits(a,o),function(){this.setPosition=function(e,t){var n=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight,i=this.getWidth(),s=this.getHeight();e+=15,t+=15,e+i>n&&(e-=e+i-n),t+s>r&&(t-=20+s),o.prototype.setPosition.call(this,e,t)}}.call(a.prototype),t.GutterHandler=u}),ace.define(\"ace/mouse/mouse_event\",[\"require\",\"exports\",\"module\",\"ace/lib/event\",\"ace/lib/useragent\"],function(e,t,n){\"use strict\";var r=e(\"../lib/event\"),i=e(\"../lib/useragent\"),s=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){r.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){r.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var e=this.editor,t=e.getSelectionRange();if(t.isEmpty())this.$inSelection=!1;else{var n=this.getDocumentPosition();this.$inSelection=t.contains(n.row,n.column)}return this.$inSelection},this.getButton=function(){return r.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=i.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(s.prototype)}),ace.define(\"ace/mouse/dragdrop_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/event\",\"ace/lib/useragent\"],function(e,t,n){\"use strict\";function f(e){function T(e,n){var r=Date.now(),i=!n||e.row!=n.row,s=!n||e.column!=n.column;if(!S||i||s)t.moveCursorToPosition(e),S=r,x={x:p,y:d};else{var o=l(x.x,x.y,p,d);o>a?S=null:r-S>=u&&(t.renderer.scrollCursorIntoView(),S=null)}}function N(e,n){var r=Date.now(),i=t.renderer.layerConfig.lineHeight,s=t.renderer.layerConfig.characterWidth,u=t.renderer.scroller.getBoundingClientRect(),a={x:{left:p-u.left,right:u.right-p},y:{top:d-u.top,bottom:u.bottom-d}},f=Math.min(a.x.left,a.x.right),l=Math.min(a.y.top,a.y.bottom),c={row:e.row,column:e.column};f/s<=2&&(c.column+=a.x.left<a.x.right?-3:2),l/i<=1&&(c.row+=a.y.top<a.y.bottom?-1:1);var h=e.row!=c.row,v=e.column!=c.column,m=!n||e.row!=n.row;h||v&&!m?E?r-E>=o&&t.renderer.scrollCursorIntoView(c):E=r:E=null}function C(){var e=g;g=t.renderer.screenToTextCoordinates(p,d),T(g,e),N(g,e)}function k(){m=t.selection.toOrientedRange(),h=t.session.addMarker(m,\"ace_selection\",t.getSelectionStyle()),t.clearSelection(),t.isFocused()&&t.renderer.$cursorLayer.setBlinking(!1),clearInterval(v),C(),v=setInterval(C,20),y=0,i.addListener(document,\"mousemove\",O)}function L(){clearInterval(v),t.session.removeMarker(h),h=null,t.selection.fromOrientedRange(m),t.isFocused()&&!w&&t.$resetCursorStyle(),m=null,g=null,y=0,E=null,S=null,i.removeListener(document,\"mousemove\",O)}function O(){A==null&&(A=setTimeout(function(){A!=null&&h&&L()},20))}function M(e){var t=e.types;return!t||Array.prototype.some.call(t,function(e){return e==\"text/plain\"||e==\"Text\"})}function _(e){var t=[\"copy\",\"copymove\",\"all\",\"uninitialized\"],n=[\"move\",\"copymove\",\"linkmove\",\"all\",\"uninitialized\"],r=s.isMac?e.altKey:e.ctrlKey,i=\"uninitialized\";try{i=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var o=\"none\";return r&&t.indexOf(i)>=0?o=\"copy\":n.indexOf(i)>=0?o=\"move\":t.indexOf(i)>=0&&(o=\"copy\"),o}var t=e.editor,n=r.createElement(\"div\");n.style.cssText=\"top:-100px;position:absolute;z-index:2147483647;opacity:0.5\",n.textContent=\"\\u00a0\";var f=[\"dragWait\",\"dragWaitEnd\",\"startDrag\",\"dragReadyEnd\",\"onMouseDrag\"];f.forEach(function(t){e[t]=this[t]},this),t.on(\"mousedown\",this.onMouseDown.bind(e));var c=t.container,h,p,d,v,m,g,y=0,b,w,E,S,x;this.onDragStart=function(e){if(this.cancelDrag||!c.draggable){var r=this;return setTimeout(function(){r.startSelect(),r.captureMouse(e)},0),e.preventDefault()}m=t.getSelectionRange();var i=e.dataTransfer;i.effectAllowed=t.getReadOnly()?\"copy\":\"copyMove\",t.container.appendChild(n),i.setDragImage&&i.setDragImage(n,0,0),setTimeout(function(){t.container.removeChild(n)}),i.clearData(),i.setData(\"Text\",t.session.getTextRange()),w=!0,this.setState(\"drag\")},this.onDragEnd=function(e){c.draggable=!1,w=!1,this.setState(null);if(!t.getReadOnly()){var n=e.dataTransfer.dropEffect;!b&&n==\"move\"&&t.session.remove(t.getSelectionRange()),t.$resetCursorStyle()}this.editor.unsetStyle(\"ace_dragging\"),this.editor.renderer.setCursorStyle(\"\")},this.onDragEnter=function(e){if(t.getReadOnly()||!M(e.dataTransfer))return;return p=e.clientX,d=e.clientY,h||k(),y++,e.dataTransfer.dropEffect=b=_(e),i.preventDefault(e)},this.onDragOver=function(e){if(t.getReadOnly()||!M(e.dataTransfer))return;return p=e.clientX,d=e.clientY,h||(k(),y++),A!==null&&(A=null),e.dataTransfer.dropEffect=b=_(e),i.preventDefault(e)},this.onDragLeave=function(e){y--;if(y<=0&&h)return L(),b=null,i.preventDefault(e)},this.onDrop=function(e){if(!g)return;var n=e.dataTransfer;if(w)switch(b){case\"move\":m.contains(g.row,g.column)?m={start:g,end:g}:m=t.moveText(m,g);break;case\"copy\":m=t.moveText(m,g,!0)}else{var r=n.getData(\"Text\");m={start:g,end:t.session.insert(g,r)},t.focus(),b=null}return L(),i.preventDefault(e)},i.addListener(c,\"dragstart\",this.onDragStart.bind(e),t),i.addListener(c,\"dragend\",this.onDragEnd.bind(e),t),i.addListener(c,\"dragenter\",this.onDragEnter.bind(e),t),i.addListener(c,\"dragover\",this.onDragOver.bind(e),t),i.addListener(c,\"dragleave\",this.onDragLeave.bind(e),t),i.addListener(c,\"drop\",this.onDrop.bind(e),t);var A=null}function l(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}var r=e(\"../lib/dom\"),i=e(\"../lib/event\"),s=e(\"../lib/useragent\"),o=200,u=200,a=5;(function(){this.dragWait=function(){var e=Date.now()-this.mousedownEvent.time;e>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var e=this.editor.container;e.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(e){this.editor.$resetCursorStyle(),this.editor.unsetStyle(\"ace_dragging\"),this.editor.renderer.setCursorStyle(\"\"),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var e=this.editor,t=e.container;t.draggable=!0,e.renderer.$cursorLayer.setBlinking(!1),e.setStyle(\"ace_dragging\");var n=s.isWin?\"default\":\"move\";e.renderer.setCursorStyle(n),this.setState(\"dragReady\")},this.onMouseDrag=function(e){var t=this.editor.container;if(s.isIE&&this.state==\"dragReady\"){var n=l(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);n>3&&t.dragDrop()}if(this.state===\"dragWait\"){var n=l(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);n>0&&(t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(e){if(!this.$dragEnabled)return;this.mousedownEvent=e;var t=this.editor,n=e.inSelection(),r=e.getButton(),i=e.domEvent.detail||1;if(i===1&&r===0&&n){if(e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey()))return;this.mousedownEvent.time=Date.now();var o=e.domEvent.target||e.domEvent.srcElement;\"unselectable\"in o&&(o.unselectable=\"on\");if(t.getDragDelay()){if(s.isWebKit){this.cancelDrag=!0;var u=t.container;u.draggable=!0}this.setState(\"dragWait\")}else this.startDrag();this.captureMouse(e,this.onMouseDrag.bind(this)),e.defaultPrevented=!0}}}).call(f.prototype),t.DragdropHandler=f}),ace.define(\"ace/mouse/touch_handler\",[\"require\",\"exports\",\"module\",\"ace/mouse/mouse_event\",\"ace/lib/event\",\"ace/lib/dom\"],function(e,t,n){\"use strict\";var r=e(\"./mouse_event\").MouseEvent,i=e(\"../lib/event\"),s=e(\"../lib/dom\");t.addTouchListeners=function(e,t){function b(){var e=window.navigator&&window.navigator.clipboard,r=!1,i=function(){var n=t.getCopyText(),i=t.session.getUndoManager().hasUndo();y.replaceChild(s.buildDom(r?[\"span\",!n&&[\"span\",{\"class\":\"ace_mobile-button\",action:\"selectall\"},\"Select All\"],n&&[\"span\",{\"class\":\"ace_mobile-button\",action:\"copy\"},\"Copy\"],n&&[\"span\",{\"class\":\"ace_mobile-button\",action:\"cut\"},\"Cut\"],e&&[\"span\",{\"class\":\"ace_mobile-button\",action:\"paste\"},\"Paste\"],i&&[\"span\",{\"class\":\"ace_mobile-button\",action:\"undo\"},\"Undo\"],[\"span\",{\"class\":\"ace_mobile-button\",action:\"find\"},\"Find\"],[\"span\",{\"class\":\"ace_mobile-button\",action:\"openCommandPallete\"},\"Palette\"]]:[\"span\"]),y.firstChild)},o=function(n){var s=n.target.getAttribute(\"action\");if(s==\"more\"||!r)return r=!r,i();if(s==\"paste\")e.readText().then(function(e){t.execCommand(s,e)});else if(s){if(s==\"cut\"||s==\"copy\")e?e.writeText(t.getCopyText()):document.execCommand(\"copy\");t.execCommand(s)}y.firstChild.style.display=\"none\",r=!1,s!=\"openCommandPallete\"&&t.focus()};y=s.buildDom([\"div\",{\"class\":\"ace_mobile-menu\",ontouchstart:function(e){n=\"menu\",e.stopPropagation(),e.preventDefault(),t.textInput.focus()},ontouchend:function(e){e.stopPropagation(),e.preventDefault(),o(e)},onclick:o},[\"span\"],[\"span\",{\"class\":\"ace_mobile-button\",action:\"more\"},\"...\"]],t.container)}function w(){y||b();var e=t.selection.cursor,n=t.renderer.textToScreenCoordinates(e.row,e.column),r=t.renderer.textToScreenCoordinates(0,0).pageX,i=t.renderer.scrollLeft,s=t.container.getBoundingClientRect();y.style.top=n.pageY-s.top-3+\"px\",n.pageX-s.left<s.width-70?(y.style.left=\"\",y.style.right=\"10px\"):(y.style.right=\"\",y.style.left=r+i-s.left+\"px\"),y.style.display=\"\",y.firstChild.style.display=\"none\",t.on(\"input\",E)}function E(e){y&&(y.style.display=\"none\"),t.off(\"input\",E)}function S(){l=null,clearTimeout(l);var e=t.selection.getRange(),r=e.contains(p.row,p.column);if(e.isEmpty()||!r)t.selection.moveToPosition(p),t.selection.selectWord();n=\"wait\",w()}function x(){l=null,clearTimeout(l),t.selection.moveToPosition(p);var e=d>=2?t.selection.getLineRange(p.row):t.session.getBracketRange(p);e&&!e.isEmpty()?t.selection.setRange(e):t.selection.selectWord(),n=\"wait\"}function T(){h+=60,c=setInterval(function(){h--<=0&&(clearInterval(c),c=null),Math.abs(v)<.01&&(v=0),Math.abs(m)<.01&&(m=0),h<20&&(v=.9*v),h<20&&(m=.9*m);var e=t.session.getScrollTop();t.renderer.scrollBy(10*v,10*m),e==t.session.getScrollTop()&&(h=0)},10)}var n=\"scroll\",o,u,a,f,l,c,h=0,p,d=0,v=0,m=0,g,y;i.addListener(e,\"contextmenu\",function(e){if(!g)return;var n=t.textInput.getElement();n.focus()},t),i.addListener(e,\"touchstart\",function(e){var i=e.touches;if(l||i.length>1){clearTimeout(l),l=null,a=-1,n=\"zoom\";return}g=t.$mouseHandler.isMousePressed=!0;var s=t.renderer.layerConfig.lineHeight,c=t.renderer.layerConfig.lineHeight,y=e.timeStamp;f=y;var b=i[0],w=b.clientX,E=b.clientY;Math.abs(o-w)+Math.abs(u-E)>s&&(a=-1),o=e.clientX=w,u=e.clientY=E,v=m=0;var T=new r(e,t);p=T.getDocumentPosition();if(y-a<500&&i.length==1&&!h)d++,e.preventDefault(),e.button=0,x();else{d=0;var N=t.selection.cursor,C=t.selection.isEmpty()?N:t.selection.anchor,k=t.renderer.$cursorLayer.getPixelPosition(N,!0),L=t.renderer.$cursorLayer.getPixelPosition(C,!0),A=t.renderer.scroller.getBoundingClientRect(),O=t.renderer.layerConfig.offset,M=t.renderer.scrollLeft,_=function(e,t){return e/=c,t=t/s-.75,e*e+t*t};if(e.clientX<A.left){n=\"zoom\";return}var D=_(e.clientX-A.left-k.left+M,e.clientY-A.top-k.top+O),P=_(e.clientX-A.left-L.left+M,e.clientY-A.top-L.top+O);D<3.5&&P<3.5&&(n=D>P?\"cursor\":\"anchor\"),P<3.5?n=\"anchor\":D<3.5?n=\"cursor\":n=\"scroll\",l=setTimeout(S,450)}a=y},t),i.addListener(e,\"touchend\",function(e){g=t.$mouseHandler.isMousePressed=!1,c&&clearInterval(c),n==\"zoom\"?(n=\"\",h=0):l?(t.selection.moveToPosition(p),h=0,w()):n==\"scroll\"?(T(),E()):w(),clearTimeout(l),l=null},t),i.addListener(e,\"touchmove\",function(e){l&&(clearTimeout(l),l=null);var i=e.touches;if(i.length>1||n==\"zoom\")return;var s=i[0],a=o-s.clientX,c=u-s.clientY;if(n==\"wait\"){if(!(a*a+c*c>4))return e.preventDefault();n=\"cursor\"}o=s.clientX,u=s.clientY,e.clientX=s.clientX,e.clientY=s.clientY;var h=e.timeStamp,p=h-f;f=h;if(n==\"scroll\"){var d=new r(e,t);d.speed=1,d.wheelX=a,d.wheelY=c,10*Math.abs(a)<Math.abs(c)&&(a=0),10*Math.abs(c)<Math.abs(a)&&(c=0),p!=0&&(v=a/p,m=c/p),t._emit(\"mousewheel\",d),d.propagationStopped||(v=m=0)}else{var g=new r(e,t),y=g.getDocumentPosition();n==\"cursor\"?t.selection.moveCursorToPosition(y):n==\"anchor\"&&t.selection.setSelectionAnchor(y.row,y.column),t.renderer.scrollCursorIntoView(y),e.preventDefault()}},t)}}),ace.define(\"ace/mouse/mouse_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/event\",\"ace/lib/useragent\",\"ace/mouse/default_handlers\",\"ace/mouse/default_gutter_handler\",\"ace/mouse/mouse_event\",\"ace/mouse/dragdrop_handler\",\"ace/mouse/touch_handler\",\"ace/config\"],function(e,t,n){\"use strict\";var r=e(\"../lib/event\"),i=e(\"../lib/useragent\"),s=e(\"./default_handlers\").DefaultHandlers,o=e(\"./default_gutter_handler\").GutterHandler,u=e(\"./mouse_event\").MouseEvent,a=e(\"./dragdrop_handler\").DragdropHandler,f=e(\"./touch_handler\").addTouchListeners,l=e(\"../config\"),c=function(e){var t=this;this.editor=e,new s(this),new o(this),new a(this);var n=function(t){var n=!document.hasFocus||!document.hasFocus()||!e.isFocused()&&document.activeElement==(e.textInput&&e.textInput.getElement());n&&window.focus(),e.focus(),setTimeout(function(){e.isFocused()||e.focus()})},u=e.renderer.getMouseEventTarget();r.addListener(u,\"click\",this.onMouseEvent.bind(this,\"click\"),e),r.addListener(u,\"mousemove\",this.onMouseMove.bind(this,\"mousemove\"),e),r.addMultiMouseDownListener([u,e.renderer.scrollBarV&&e.renderer.scrollBarV.inner,e.renderer.scrollBarH&&e.renderer.scrollBarH.inner,e.textInput&&e.textInput.getElement()].filter(Boolean),[400,300,250],this,\"onMouseEvent\",e),r.addMouseWheelListener(e.container,this.onMouseWheel.bind(this,\"mousewheel\"),e),f(e.container,e);var l=e.renderer.$gutter;r.addListener(l,\"mousedown\",this.onMouseEvent.bind(this,\"guttermousedown\"),e),r.addListener(l,\"click\",this.onMouseEvent.bind(this,\"gutterclick\"),e),r.addListener(l,\"dblclick\",this.onMouseEvent.bind(this,\"gutterdblclick\"),e),r.addListener(l,\"mousemove\",this.onMouseEvent.bind(this,\"guttermousemove\"),e),r.addListener(u,\"mousedown\",n,e),r.addListener(l,\"mousedown\",n,e),i.isIE&&e.renderer.scrollBarV&&(r.addListener(e.renderer.scrollBarV.element,\"mousedown\",n,e),r.addListener(e.renderer.scrollBarH.element,\"mousedown\",n,e)),e.on(\"mousemove\",function(n){if(t.state||t.$dragDelay||!t.$dragEnabled)return;var r=e.renderer.screenToTextCoordinates(n.x,n.y),i=e.session.selection.getRange(),s=e.renderer;!i.isEmpty()&&i.insideStart(r.row,r.column)?s.setCursorStyle(\"default\"):s.setCursorStyle(\"\")},e)};(function(){this.onMouseEvent=function(e,t){if(!this.editor.session)return;this.editor._emit(e,new u(t,this.editor))},this.onMouseMove=function(e,t){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;if(!n||!n.length)return;this.editor._emit(e,new u(t,this.editor))},this.onMouseWheel=function(e,t){var n=new u(t,this.editor);n.speed=this.$scrollSpeed*2,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){this.x=e.x,this.y=e.y,this.isMousePressed=!0;var n=this.editor,s=this.editor.renderer;s.$isMousePressed=!0;var o=this,a=function(e){if(!e)return;if(i.isWebKit&&!e.which&&o.releaseMouse)return o.releaseMouse();o.x=e.clientX,o.y=e.clientY,t&&t(e),o.mouseEvent=new u(e,o.editor),o.$mouseMoved=!0},f=function(e){n.off(\"beforeEndOperation\",c),clearInterval(h),n.session&&l(),o[o.state+\"End\"]&&o[o.state+\"End\"](e),o.state=\"\",o.isMousePressed=s.$isMousePressed=!1,s.$keepTextAreaAtCursor&&s.$moveTextAreaToCursor(),o.$onCaptureMouseMove=o.releaseMouse=null,e&&o.onMouseEvent(\"mouseup\",e),n.endOperation()},l=function(){o[o.state]&&o[o.state](),o.$mouseMoved=!1};if(i.isOldIE&&e.domEvent.type==\"dblclick\")return setTimeout(function(){f(e)});var c=function(e){if(!o.releaseMouse)return;n.curOp.command.name&&n.curOp.selectionChanged&&(o[o.state+\"End\"]&&o[o.state+\"End\"](),o.state=\"\",o.releaseMouse())};n.on(\"beforeEndOperation\",c),n.startOperation({command:{name:\"mouse\"}}),o.$onCaptureMouseMove=a,o.releaseMouse=r.capture(this.editor.container,a,f);var h=setInterval(l,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var e=function(t){if(t&&t.domEvent&&t.domEvent.type!=\"contextmenu\")return;this.editor.off(\"nativecontextmenu\",e),t&&t.domEvent&&r.stopEvent(t.domEvent)}.bind(this);setTimeout(e,10),this.editor.on(\"nativecontextmenu\",e)},this.destroy=function(){this.releaseMouse&&this.releaseMouse()}}).call(c.prototype),l.defineOptions(c.prototype,\"mouseHandler\",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:i.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=c}),ace.define(\"ace/mouse/fold_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"],function(e,t,n){\"use strict\";function i(e){e.on(\"click\",function(t){var n=t.getDocumentPosition(),i=e.session,s=i.getFoldAt(n.row,n.column,1);s&&(t.getAccelKey()?i.removeFold(s):i.expandFold(s),t.stop());var o=t.domEvent&&t.domEvent.target;o&&r.hasCssClass(o,\"ace_inline_button\")&&r.hasCssClass(o,\"ace_toggle_wrap\")&&(i.setOption(\"wrap\",!i.getUseWrapMode()),e.renderer.scrollCursorIntoView())}),e.on(\"gutterclick\",function(t){var n=e.renderer.$gutterLayer.getRegion(t);if(n==\"foldWidgets\"){var r=t.getDocumentPosition().row,i=e.session;i.foldWidgets&&i.foldWidgets[r]&&e.session.onFoldWidgetClick(r,t),e.isFocused()||e.focus(),t.stop()}}),e.on(\"gutterdblclick\",function(t){var n=e.renderer.$gutterLayer.getRegion(t);if(n==\"foldWidgets\"){var r=t.getDocumentPosition().row,i=e.session,s=i.getParentFoldRangeData(r,!0),o=s.range||s.firstRange;if(o){r=o.start.row;var u=i.getFoldAt(r,i.getLine(r).length,1);u?i.removeFold(u):(i.addFold(\"...\",o),e.renderer.scrollCursorIntoView({row:o.start.row,column:0}))}t.stop()}})}var r=e(\"../lib/dom\");t.FoldHandler=i}),ace.define(\"ace/keyboard/keybinding\",[\"require\",\"exports\",\"module\",\"ace/lib/keys\",\"ace/lib/event\"],function(e,t,n){\"use strict\";var r=e(\"../lib/keys\"),i=e(\"../lib/event\"),s=function(e){this.$editor=e,this.$data={editor:e},this.$handlers=[],this.setDefaultHandler(e.commands)};(function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0)},this.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]==e)return;while(t[t.length-1]&&t[t.length-1]!=this.$defaultHandler)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)},this.addKeyboardHandler=function(e,t){if(!e)return;typeof e==\"function\"&&!e.handleKeyboard&&(e.handleKeyboard=e);var n=this.$handlers.indexOf(e);n!=-1&&this.$handlers.splice(n,1),t==undefined?this.$handlers.push(e):this.$handlers.splice(t,0,e),n==-1&&e.attach&&e.attach(this.$editor)},this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return t==-1?!1:(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var e=this.$data,t=e.editor;return this.$handlers.map(function(n){return n.getStatusText&&n.getStatusText(t,e)||\"\"}).filter(Boolean).join(\" \")},this.$callKeyboardHandlers=function(e,t,n,r){var s,o=!1,u=this.$editor.commands;for(var a=this.$handlers.length;a--;){s=this.$handlers[a].handleKeyboard(this.$data,e,t,n,r);if(!s||!s.command)continue;s.command==\"null\"?o=!0:o=u.exec(s.command,this.$editor,s.args,r),o&&r&&e!=-1&&s.passEvent!=1&&s.command.passEvent!=1&&i.stopEvent(r);if(o)break}return!o&&e==-1&&(s={command:\"insertstring\"},o=u.exec(\"insertstring\",this.$editor,t)),o&&this.$editor._signal&&this.$editor._signal(\"keyboardActivity\",s),o},this.onCommandKey=function(e,t,n){var i=r.keyCodeToString(n);return this.$callKeyboardHandlers(t,i,n,e)},this.onTextInput=function(e){return this.$callKeyboardHandlers(-1,e)}}).call(s.prototype),t.KeyBinding=s}),ace.define(\"ace/lib/bidiutil\",[\"require\",\"exports\",\"module\"],function(e,t,n){\"use strict\";function F(e,t,n,r){var i=s?d:p,c=null,h=null,v=null,m=0,g=null,y=null,b=-1,w=null,E=null,T=[];if(!r)for(w=0,r=[];w<n;w++)r[w]=R(e[w]);o=s,u=!1,a=!1,f=!1,l=!1;for(E=0;E<n;E++){c=m,T[E]=h=q(e,r,T,E),m=i[c][h],g=m&240,m&=15,t[E]=v=i[m][5];if(g>0)if(g==16){for(w=b;w<E;w++)t[w]=1;b=-1}else b=-1;y=i[m][6];if(y)b==-1&&(b=E);else if(b>-1){for(w=b;w<E;w++)t[w]=v;b=-1}r[E]==S&&(t[E]=0),o|=v}if(l)for(w=0;w<n;w++)if(r[w]==x){t[w]=s;for(var C=w-1;C>=0;C--){if(r[C]!=N)break;t[C]=s}}}function I(e,t,n){if(o<e)return;if(e==1&&s==m&&!f){n.reverse();return}var r=n.length,i=0,u,a,l,c;while(i<r){if(t[i]>=e){u=i+1;while(u<r&&t[u]>=e)u++;for(a=i,l=u-1;a<l;a++,l--)c=n[a],n[a]=n[l],n[l]=c;i=u}i++}}function q(e,t,n,r){var i=t[r],o,c,h,p;switch(i){case g:case y:u=!1;case E:case w:return i;case b:return u?w:b;case T:return u=!0,a=!0,y;case N:return E;case C:if(r<1||r+1>=t.length||(o=n[r-1])!=b&&o!=w||(c=t[r+1])!=b&&c!=w)return E;return u&&(c=w),c==o?c:E;case k:o=r>0?n[r-1]:S;if(o==b&&r+1<t.length&&t[r+1]==b)return b;return E;case L:if(r>0&&n[r-1]==b)return b;if(u)return E;p=r+1,h=t.length;while(p<h&&t[p]==L)p++;if(p<h&&t[p]==b)return b;return E;case A:h=t.length,p=r+1;while(p<h&&t[p]==A)p++;if(p<h){var d=e[r],v=d>=1425&&d<=2303||d==64286;o=t[p];if(v&&(o==y||o==T))return y}if(r<1||(o=t[r-1])==S)return E;return n[r-1];case S:return u=!1,f=!0,s;case x:return l=!0,E;case O:case M:case D:case P:case _:u=!1;case H:return E}}function R(e){var t=e.charCodeAt(0),n=t>>8;return n==0?t>191?g:B[t]:n==5?/[\\u0591-\\u05f4]/.test(e)?y:g:n==6?/[\\u0610-\\u061a\\u064b-\\u065f\\u06d6-\\u06e4\\u06e7-\\u06ed]/.test(e)?A:/[\\u0660-\\u0669\\u066b-\\u066c]/.test(e)?w:t==1642?L:/[\\u06f0-\\u06f9]/.test(e)?b:T:n==32&&t<=8287?j[t&255]:n==254?t>=65136?T:E:E}function U(e){return e>=\"\\u064b\"&&e<=\"\\u0655\"}var r=[\"\\u0621\",\"\\u0641\"],i=[\"\\u063a\",\"\\u064a\"],s=0,o=0,u=!1,a=!1,f=!1,l=!1,c=!1,h=!1,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],d=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v=0,m=1,g=0,y=1,b=2,w=3,E=4,S=5,x=6,T=7,N=8,C=9,k=10,L=11,A=12,O=13,M=14,_=15,D=16,P=17,H=18,B=[H,H,H,H,H,H,H,H,H,x,S,x,N,S,H,H,H,H,H,H,H,H,H,H,H,H,H,H,S,S,S,x,N,E,E,L,L,L,E,E,E,E,E,k,C,k,C,C,b,b,b,b,b,b,b,b,b,b,C,E,E,E,E,E,E,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,E,E,E,E,E,E,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,E,E,E,E,H,H,H,H,H,H,S,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,C,E,L,L,L,L,E,E,E,E,g,E,E,H,E,E,L,L,b,b,E,g,E,E,E,b,g,E,E,E,E,E],j=[N,N,N,N,N,N,N,N,N,N,N,H,H,H,g,y,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,N,S,O,M,_,D,P,C,L,L,L,L,L,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,C,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,N];t.L=g,t.R=y,t.EN=b,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT=\"\\u00b7\",t.doBidiReorder=function(e,n,r){if(e.length<2)return{};var i=e.split(\"\"),o=new Array(i.length),u=new Array(i.length),a=[];s=r?m:v,F(i,a,i.length,n);for(var f=0;f<o.length;o[f]=f,f++);I(2,a,o),I(1,a,o);for(var f=0;f<o.length-1;f++)n[f]===w?a[f]=t.AN:a[f]===y&&(n[f]>T&&n[f]<O||n[f]===E||n[f]===H)?a[f]=t.ON_R:f>0&&i[f-1]===\"\\u0644\"&&/\\u0622|\\u0623|\\u0625|\\u0627/.test(i[f])&&(a[f-1]=a[f]=t.R_H,f++);i[i.length-1]===t.DOT&&(a[i.length-1]=t.B),i[0]===\"\\u202b\"&&(a[0]=t.RLE);for(var f=0;f<o.length;f++)u[f]=a[o[f]];return{logicalFromVisual:o,bidiLevels:u}},t.hasBidiCharacters=function(e,t){var n=!1;for(var r=0;r<e.length;r++)t[r]=R(e.charAt(r)),!n&&(t[r]==y||t[r]==T||t[r]==w)&&(n=!0);return n},t.getVisualFromLogicalIdx=function(e,t){for(var n=0;n<t.logicalFromVisual.length;n++)if(t.logicalFromVisual[n]==e)return n;return 0}}),ace.define(\"ace/bidihandler\",[\"require\",\"exports\",\"module\",\"ace/lib/bidiutil\",\"ace/lib/lang\"],function(e,t,n){\"use strict\";var r=e(\"./lib/bidiutil\"),i=e(\"./lib/lang\"),s=/[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac\\u202B]/,o=function(e){this.session=e,this.bidiMap={},this.currentRow=null,this.bidiUtil=r,this.charWidths=[],this.EOL=\"\\u00ac\",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line=\"\",this.wrapIndent=0,this.EOF=\"\\u00b6\",this.RLE=\"\\u202b\",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=s.test(e.getValue())};(function(){this.isBidiRow=function(e,t,n){return this.seenBidi?(e!==this.currentRow&&(this.currentRow=e,this.updateRowLine(t,n),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},this.onChange=function(e){this.seenBidi?this.currentRow=null:e.action==\"insert\"&&s.test(e.lines.join(\"\\n\"))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var e=0,t=this.session.$screenRowCache;if(t.length){var n=this.session.$getRowCacheIndex(t,this.currentRow);n>=0&&(e=this.session.$docRowCache[n])}return e},this.getSplitIndex=function(){var e=0,t=this.session.$screenRowCache;if(t.length){var n,r=this.session.$getRowCacheIndex(t,this.currentRow);while(this.currentRow-e>0){n=this.session.$getRowCacheIndex(t,this.currentRow-e-1);if(n!==r)break;r=n,e++}}else e=this.currentRow;return e},this.updateRowLine=function(e,t){e===undefined&&(e=this.getDocumentRow());var n=e===this.session.getLength()-1,s=n?this.EOF:this.EOL;this.wrapIndent=0,this.line=this.session.getLine(e),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE;if(this.session.$useWrapMode){var o=this.session.$wrapData[e];o&&(t===undefined&&(t=this.getSplitIndex()),t>0&&o.length?(this.wrapIndent=o.indent,this.wrapOffset=this.wrapIndent*this.charWidths[r.L],this.line=t<o.length?this.line.substring(o[t-1],o[t]):this.line.substring(o[o.length-1])):this.line=this.line.substring(0,o[t]),t==o.length&&(this.line+=this.showInvisibles?s:r.DOT))}else this.line+=this.showInvisibles?s:r.DOT;var u=this.session,a=0,f;this.line=this.line.replace(/\\t|[\\u1100-\\u2029, \\u202F-\\uFFE6]/g,function(e,t){return e===\"\t\"||u.isFullWidth(e.charCodeAt(0))?(f=e===\"\t\"?u.getScreenTabSize(t+a):2,a+=f-1,i.stringRepeat(r.DOT,f)):e}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==r.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},this.updateBidiMap=function(){var e=[];r.hasBidiCharacters(this.line,e)||this.isRtlDir?this.bidiMap=r.doBidiReorder(this.line,e,this.isRtlDir):this.bidiMap={}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(e){if(this.characterWidth===e.$characterSize.width)return;this.fontMetrics=e;var t=this.characterWidth=e.$characterSize.width,n=e.$measureCharWidth(\"\\u05d4\");this.charWidths[r.L]=this.charWidths[r.EN]=this.charWidths[r.ON_R]=t,this.charWidths[r.R]=this.charWidths[r.AN]=n,this.charWidths[r.R_H]=n*.45,this.charWidths[r.B]=this.charWidths[r.RLE]=0,this.currentRow=null},this.setShowInvisibles=function(e){this.showInvisibles=e,this.currentRow=null},this.setEolChar=function(e){this.EOL=e},this.setContentWidth=function(e){this.contentWidth=e},this.isRtlLine=function(e){return this.$isRtl?!0:e!=undefined?this.session.getLine(e).charAt(0)==this.RLE:this.isRtlDir},this.setRtlDirection=function(e,t){var n=e.getCursorPosition();for(var r=e.selection.getSelectionAnchor().row;r<=n.row;r++)!t&&e.session.getLine(r).charAt(0)===e.session.$bidiHandler.RLE?e.session.doc.removeInLine(r,0,1):t&&e.session.getLine(r).charAt(0)!==e.session.$bidiHandler.RLE&&e.session.doc.insert({column:0,row:r},e.session.$bidiHandler.RLE)},this.getPosLeft=function(e){e-=this.wrapIndent;var t=this.line.charAt(0)===this.RLE?1:0,n=e>t?this.session.getOverwrite()?e:e-1:t,i=r.getVisualFromLogicalIdx(n,this.bidiMap),s=this.bidiMap.bidiLevels,o=0;!this.session.getOverwrite()&&e<=t&&s[i]%2!==0&&i++;for(var u=0;u<i;u++)o+=this.charWidths[s[u]];return!this.session.getOverwrite()&&e>t&&s[i]%2===0&&(o+=this.charWidths[s[i]]),this.wrapIndent&&(o+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(o+=this.rtlLineOffset),o},this.getSelections=function(e,t){var n=this.bidiMap,r=n.bidiLevels,i,s=[],o=0,u=Math.min(e,t)-this.wrapIndent,a=Math.max(e,t)-this.wrapIndent,f=!1,l=!1,c=0;this.wrapIndent&&(o+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var h,p=0;p<r.length;p++)h=n.logicalFromVisual[p],i=r[p],f=h>=u&&h<a,f&&!l?c=o:!f&&l&&s.push({left:c,width:o-c}),o+=this.charWidths[i],l=f;f&&p===r.length&&s.push({left:c,width:o-c});if(this.isRtlDir)for(var d=0;d<s.length;d++)s[d].left+=this.rtlLineOffset;return s},this.offsetToCol=function(e){this.isRtlDir&&(e-=this.rtlLineOffset);var t=0,e=Math.max(e,0),n=0,r=0,i=this.bidiMap.bidiLevels,s=this.charWidths[i[r]];this.wrapIndent&&(e-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);while(e>n+s/2){n+=s;if(r===i.length-1){s=0;break}s=this.charWidths[i[++r]]}return r>0&&i[r-1]%2!==0&&i[r]%2===0?(e<n&&r--,t=this.bidiMap.logicalFromVisual[r]):r>0&&i[r-1]%2===0&&i[r]%2!==0?t=1+(e>n?this.bidiMap.logicalFromVisual[r]:this.bidiMap.logicalFromVisual[r-1]):this.isRtlDir&&r===i.length-1&&s===0&&i[r-1]%2===0||!this.isRtlDir&&r===0&&i[r]%2!==0?t=1+this.bidiMap.logicalFromVisual[r]:(r>0&&i[r-1]%2!==0&&s!==0&&r--,t=this.bidiMap.logicalFromVisual[r]),t===0&&this.isRtlDir&&t++,t+this.wrapIndent}}).call(o.prototype),t.BidiHandler=o}),ace.define(\"ace/selection\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/lang\",\"ace/lib/event_emitter\",\"ace/range\"],function(e,t,n){\"use strict\";var r=e(\"./lib/oop\"),i=e(\"./lib/lang\"),s=e(\"./lib/event_emitter\").EventEmitter,o=e(\"./range\").Range,u=function(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var t=this;this.cursor.on(\"change\",function(e){t.$cursorChanged=!0,t.$silent||t._emit(\"changeCursor\"),!t.$isEmpty&&!t.$silent&&t._emit(\"changeSelection\"),!t.$keepDesiredColumnOnChange&&e.old.column!=e.value.column&&(t.$desiredColumn=null)}),this.anchor.on(\"change\",function(){t.$anchorChanged=!0,!t.$isEmpty&&!t.$silent&&t._emit(\"changeSelection\")})};(function(){r.implement(this,s),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(e,t){this.$isEmpty=!1,this.anchor.setPosition(e,t)},this.getAnchor=this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},this.getRange=function(){var e=this.anchor,t=this.lead;return this.$isEmpty?o.fromPoints(t,t):this.isBackwards()?o.fromPoints(t,e):o.fromPoints(e,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit(\"changeSelection\"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(e,t){var n=t?e.end:e.start,r=t?e.start:e.end;this.$setSelection(n.row,n.column,r.row,r.column)},this.$setSelection=function(e,t,n,r){if(this.$silent)return;var i=this.$isEmpty,s=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(e,t),this.cursor.setPosition(n,r),this.$isEmpty=!o.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit(\"changeCursor\"),(this.$cursorChanged||this.$anchorChanged||i!=this.$isEmpty||s)&&this._emit(\"changeSelection\")},this.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},this.selectTo=function(e,t){this.$moveSelection(function(){this.moveCursorTo(e,t)})},this.selectToPosition=function(e){this.$moveSelection(function(){this.moveCursorToPosition(e)})},this.moveTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},this.moveToPosition=function(e){this.clearSelection(),this.moveCursorToPosition(e)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(e,t){if(typeof t==\"undefined\"){var n=e||this.lead;e=n.row,t=n.column}return this.session.getWordRange(e,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var e=this.getCursor(),t=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(t)},this.getLineRange=function(e,t){var n=typeof e==\"number\"?e:this.lead.row,r,i=this.session.getFoldLine(n);return i?(n=i.start.row,r=i.end.row):r=n,t===!0?new o(n,0,r,this.session.getLine(r).length):new o(n,0,r+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(e,t,n){var r=e.column,i=e.column+t;return n<0&&(r=e.column-t,i=e.column),this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(r,i).split(\" \").length-1==t},this.moveCursorLeft=function(){var e=this.lead.getPosition(),t;if(t=this.session.getFoldAt(e.row,e.column,-1))this.moveCursorTo(t.start.row,t.start.column);else if(e.column===0)e.row>0&&this.moveCursorTo(e.row-1,this.doc.getLine(e.row-1).length);else{var n=this.session.getTabSize();this.wouldMoveIntoSoftTab(e,n,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var e=this.lead.getPosition(),t;if(t=this.session.getFoldAt(e.row,e.column,1))this.moveCursorTo(t.end.row,t.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var n=this.session.getTabSize(),e=this.lead;this.wouldMoveIntoSoftTab(e,n,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,n=this.session.documentToScreenRow(e,t),r=this.session.screenToDocumentPosition(n,0),i=this.session.getDisplayLine(e,null,r.row,r.column),s=i.match(/^\\s*/);s[0].length!=t&&!this.session.$useEmacsStyleLineStart&&(r.column+=s[0].length),this.moveCursorToPosition(r)},this.moveCursorLineEnd=function(){var e=this.lead,t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);if(this.lead.column==t.column){var n=this.session.getLine(t.row);if(t.column==n.length){var r=n.search(/\\s+$/);r>0&&(t.column=r)}}this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var i=this.session.getFoldAt(e,t,1);if(i){this.moveCursorTo(i.end.row,i.end.column);return}this.session.nonTokenRe.exec(r)&&(t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,r=n.substring(t));if(t>=n.length){this.moveCursorTo(e,n.length),this.moveCursorRight(),e<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(r)&&(t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,t)},this.moveCursorLongWordLeft=function(){var e=this.lead.row,t=this.lead.column,n;if(n=this.session.getFoldAt(e,t,-1)){this.moveCursorTo(n.start.row,n.start.column);return}var r=this.session.getFoldStringAt(e,t,-1);r==null&&(r=this.doc.getLine(e).substring(0,t));var s=i.stringReverse(r);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(s)&&(t-=this.session.nonTokenRe.lastIndex,s=s.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0);if(t<=0){this.moveCursorTo(e,0),this.moveCursorLeft(),e>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(s)&&(t-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,t)},this.$shortWordEndIndex=function(e){var t=0,n,r=/\\s/,i=this.session.tokenRe;i.lastIndex=0;if(this.session.tokenRe.exec(e))t=this.session.tokenRe.lastIndex;else{while((n=e[t])&&r.test(n))t++;if(t<1){i.lastIndex=0;while((n=e[t])&&!i.test(n)){i.lastIndex=0,t++;if(r.test(n)){if(t>2){t--;break}while((n=e[t])&&r.test(n))t++;if(t>2)break}}}}return i.lastIndex=0,t},this.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t),i=this.session.getFoldAt(e,t,1);if(i)return this.moveCursorTo(i.end.row,i.end.column);if(t==n.length){var s=this.doc.getLength();do e++,r=this.doc.getLine(e);while(e<s&&/^\\s*$/.test(r));/^\\s+/.test(r)||(r=\"\"),t=0}var o=this.$shortWordEndIndex(r);this.moveCursorTo(e,t+o)},this.moveCursorShortWordLeft=function(){var e=this.lead.row,t=this.lead.column,n;if(n=this.session.getFoldAt(e,t,-1))return this.moveCursorTo(n.start.row,n.start.column);var r=this.session.getLine(e).substring(0,t);if(t===0){do e--,r=this.doc.getLine(e);while(e>0&&/^\\s*$/.test(r));t=r.length,/\\s+$/.test(r)||(r=\"\")}var s=i.stringReverse(r),o=this.$shortWordEndIndex(s);return this.moveCursorTo(e,t-o)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(e,t){var n=this.session.documentToScreenPosition(this.lead.row,this.lead.column),r;t===0&&(e!==0&&(this.session.$bidiHandler.isBidiRow(n.row,this.lead.row)?(r=this.session.$bidiHandler.getPosLeft(n.column),n.column=Math.round(r/this.session.$bidiHandler.charWidths[0])):r=n.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?n.column=this.$desiredColumn:this.$desiredColumn=n.column);if(e!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var i=this.session.lineWidgets[this.lead.row];e<0?e-=i.rowsAbove||0:e>0&&(e+=i.rowCount-(i.rowsAbove||0))}var s=this.session.screenToDocumentPosition(n.row+e,n.column,r);e!==0&&t===0&&s.row===this.lead.row&&s.column===this.lead.column,this.moveCursorTo(s.row,s.column+t,t===0)},this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},this.moveCursorTo=function(e,t,n){var r=this.session.getFoldAt(e,t,1);r&&(e=r.start.row,t=r.start.column),this.$keepDesiredColumnOnChange=!0;var i=this.session.getLine(e);/[\\uDC00-\\uDFFF]/.test(i.charAt(t))&&i.charAt(t-1)&&(this.lead.row==e&&this.lead.column==t+1?t-=1:t+=1),this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(e,t,n){var r=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(r.row,r.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach()},this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e},this.getRangeOfMovements=function(e){var t=this.getCursor();try{e(this);var n=this.getCursor();return o.fromPoints(t,n)}catch(r){return o.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}},this.toJSON=function(){if(this.rangeCount)var e=this.ranges.map(function(e){var t=e.clone();return t.isBackwards=e.cursor==e.start,t});else{var e=this.getRange();e.isBackwards=this.isBackwards()}return e},this.fromJSON=function(e){if(e.start==undefined){if(this.rangeList&&e.length>1){this.toSingleRange(e[0]);for(var t=e.length;t--;){var n=o.fromPoints(e[t].start,e[t].end);e[t].isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}e=e[0]}this.rangeList&&this.toSingleRange(e),this.setSelectionRange(e,e.isBackwards)},this.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return!1;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(e[t]))return!1;return!0}}).call(u.prototype),t.Selection=u}),ace.define(\"ace/tokenizer\",[\"require\",\"exports\",\"module\",\"ace/config\"],function(e,t,n){\"use strict\";var r=e(\"./config\"),i=2e3,s=function(e){this.states=e,this.regExps={},this.matchMappings={};for(var t in this.states){var n=this.states[t],r=[],i=0,s=this.matchMappings[t]={defaultToken:\"text\"},o=\"g\",u=[];for(var a=0;a<n.length;a++){var f=n[a];f.defaultToken&&(s.defaultToken=f.defaultToken),f.caseInsensitive&&o.indexOf(\"i\")===-1&&(o+=\"i\"),f.unicode&&o.indexOf(\"u\")===-1&&(o+=\"u\");if(f.regex==null)continue;f.regex instanceof RegExp&&(f.regex=f.regex.toString().slice(1,-1));var l=f.regex,c=(new RegExp(\"(?:(\"+l+\")|(.))\")).exec(\"a\").length-2;Array.isArray(f.token)?f.token.length==1||c==1?f.token=f.token[0]:c-1!=f.token.length?(this.reportError(\"number of classes and regexp groups doesn't match\",{rule:f,groupCount:c-1}),f.token=f.token[0]):(f.tokenArray=f.token,f.token=null,f.onMatch=this.$arrayTokens):typeof f.token==\"function\"&&!f.onMatch&&(c>1?f.onMatch=this.$applyToken:f.onMatch=f.token),c>1&&(/\\\\\\d/.test(f.regex)?l=f.regex.replace(/\\\\([0-9]+)/g,function(e,t){return\"\\\\\"+(parseInt(t,10)+i+1)}):(c=1,l=this.removeCapturingGroups(f.regex)),!f.splitRegex&&typeof f.token!=\"string\"&&u.push(f)),s[i]=a,i+=c,r.push(l),f.onMatch||(f.onMatch=null)}r.length||(s[0]=0,r.push(\"$\")),u.forEach(function(e){e.splitRegex=this.createSplitterRegexp(e.regex,o)},this),this.regExps[t]=new RegExp(\"(\"+r.join(\")|(\")+\")|($)\",o)}};(function(){this.$setMaxTokenCount=function(e){i=e|0},this.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1),n=this.token.apply(this,t);if(typeof n==\"string\")return[{type:n,value:e}];var r=[];for(var i=0,s=n.length;i<s;i++)t[i]&&(r[r.length]={type:n[i],value:t[i]});return r},this.$arrayTokens=function(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return\"text\";var n=[],r=this.tokenArray;for(var i=0,s=r.length;i<s;i++)t[i+1]&&(n[n.length]={type:r[i],value:t[i+1]});return n},this.removeCapturingGroups=function(e){var t=e.replace(/\\\\.|\\[(?:\\\\.|[^\\\\\\]])*|\\(\\?[:=!<]|(\\()/g,function(e,t){return t?\"(?:\":e});return t},this.createSplitterRegexp=function(e,t){if(e.indexOf(\"(?=\")!=-1){var n=0,r=!1,i={};e.replace(/(\\\\.)|(\\((?:\\?[=!])?)|(\\))|([\\[\\]])/g,function(e,t,s,o,u,a){return r?r=u!=\"]\":u?r=!0:o?(n==i.stack&&(i.end=a+1,i.stack=-1),n--):s&&(n++,s.length!=1&&(i.stack=n,i.start=a)),e}),i.end!=null&&/^\\)*$/.test(e.substr(i.end))&&(e=e.substring(0,i.start)+e.substr(i.end))}return e.charAt(0)!=\"^\"&&(e=\"^\"+e),e.charAt(e.length-1)!=\"$\"&&(e+=\"$\"),new RegExp(e,(t||\"\").replace(\"g\",\"\"))},this.getLineTokens=function(e,t){if(t&&typeof t!=\"string\"){var n=t.slice(0);t=n[0],t===\"#tmp\"&&(n.shift(),t=n.shift())}else var n=[];var r=t||\"start\",s=this.states[r];s||(r=\"start\",s=this.states[r]);var o=this.matchMappings[r],u=this.regExps[r];u.lastIndex=0;var a,f=[],l=0,c=0,h={type:null,value:\"\"};while(a=u.exec(e)){var p=o.defaultToken,d=null,v=a[0],m=u.lastIndex;if(m-v.length>l){var g=e.substring(l,m-v.length);h.type==p?h.value+=g:(h.type&&f.push(h),h={type:p,value:g})}for(var y=0;y<a.length-2;y++){if(a[y+1]===undefined)continue;d=s[o[y]],d.onMatch?p=d.onMatch(v,r,n,e):p=d.token,d.next&&(typeof d.next==\"string\"?r=d.next:r=d.next(r,n),s=this.states[r],s||(this.reportError(\"state doesn't exist\",r),r=\"start\",s=this.states[r]),o=this.matchMappings[r],l=m,u=this.regExps[r],u.lastIndex=m),d.consumeLineEnd&&(l=m);break}if(v)if(typeof p==\"string\")!!d&&d.merge===!1||h.type!==p?(h.type&&f.push(h),h={type:p,value:v}):h.value+=v;else if(p){h.type&&f.push(h),h={type:null,value:\"\"};for(var y=0;y<p.length;y++)f.push(p[y])}if(l==e.length)break;l=m;if(c++>i){c>2*e.length&&this.reportError(\"infinite loop with in ace tokenizer\",{startState:t,line:e});while(l<e.length)h.type&&f.push(h),h={value:e.substring(l,l+=500),type:\"overflow\"};r=\"start\",n=[];break}}return h.type&&f.push(h),n.length>1&&n[0]!==r&&n.unshift(\"#tmp\",r),{tokens:f,state:n.length?n:r}},this.reportError=r.reportError}).call(s.prototype),t.Tokenizer=s}),ace.define(\"ace/mode/text_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/lang\"],function(e,t,n){\"use strict\";var r=e(\"../lib/lang\"),i=function(){this.$rules={start:[{token:\"empty_line\",regex:\"^$\"},{defaultToken:\"text\"}]}};(function(){this.addRules=function(e,t){if(!t){for(var n in e)this.$rules[n]=e[n];return}for(var n in e){var r=e[n];for(var i=0;i<r.length;i++){var s=r[i];if(s.next||s.onMatch)typeof s.next==\"string\"&&s.next.indexOf(t)!==0&&(s.next=t+s.next),s.nextState&&s.nextState.indexOf(t)!==0&&(s.nextState=t+s.nextState)}this.$rules[t+n]=r}},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,n,i,s){var o=typeof e==\"function\"?(new e).getRules():e;if(i)for(var u=0;u<i.length;u++)i[u]=t+i[u];else{i=[];for(var a in o)i.push(t+a)}this.addRules(o,t);if(n){var f=Array.prototype[s?\"push\":\"unshift\"];for(var u=0;u<i.length;u++)f.apply(this.$rules[i[u]],r.deepCopy(n))}this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds};var e=function(e,t){return(e!=\"start\"||t.length)&&t.unshift(this.nextState,e),this.nextState},t=function(e,t){return t.shift(),t.shift()||\"start\"};this.normalizeRules=function(){function i(s){var o=r[s];o.processed=!0;for(var u=0;u<o.length;u++){var a=o[u],f=null;Array.isArray(a)&&(f=a,a={}),!a.regex&&a.start&&(a.regex=a.start,a.next||(a.next=[]),a.next.push({defaultToken:a.token},{token:a.token+\".end\",regex:a.end||a.start,next:\"pop\"}),a.token=a.token+\".start\",a.push=!0);var l=a.next||a.push;if(l&&Array.isArray(l)){var c=a.stateName;c||(c=a.token,typeof c!=\"string\"&&(c=c[0]||\"\"),r[c]&&(c+=n++)),r[c]=l,a.next=c,i(c)}else l==\"pop\"&&(a.next=t);a.push&&(a.nextState=a.next||a.push,a.next=e,delete a.push);if(a.rules)for(var h in a.rules)r[h]?r[h].push&&r[h].push.apply(r[h],a.rules[h]):r[h]=a.rules[h];var p=typeof a==\"string\"?a:a.include;p&&(Array.isArray(p)?f=p.map(function(e){return r[e]}):f=r[p]);if(f){var d=[u,1].concat(f);a.noEscape&&(d=d.filter(function(e){return!e.next})),o.splice.apply(o,d),u--}a.keywordMap&&(a.token=this.createKeywordMapper(a.keywordMap,a.defaultToken||\"text\",a.caseInsensitive),delete a.defaultToken)}}var n=0,r=this.$rules;Object.keys(r).forEach(i,this)},this.createKeywordMapper=function(e,t,n,r){var i=Object.create(null);return this.$keywordList=[],Object.keys(e).forEach(function(t){var s=e[t],o=s.split(r||\"|\");for(var u=o.length;u--;){var a=o[u];this.$keywordList.push(a),n&&(a=a.toLowerCase()),i[a]=t}},this),e=null,n?function(e){return i[e.toLowerCase()]||t}:function(e){return i[e]||t}},this.getKeywords=function(){return this.$keywords}}).call(i.prototype),t.TextHighlightRules=i}),ace.define(\"ace/mode/behaviour\",[\"require\",\"exports\",\"module\"],function(e,t,n){\"use strict\";var r=function(){this.$behaviours={}};(function(){this.add=function(e,t,n){switch(undefined){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=n},this.addBehaviours=function(e){for(var t in e)for(var n in e[t])this.add(t,n,e[t][n])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){if(typeof e==\"function\")var n=(new e).getBehaviours(t);else var n=e.getBehaviours(t);this.addBehaviours(n)},this.getBehaviours=function(e){if(!e)return this.$behaviours;var t={};for(var n=0;n<e.length;n++)this.$behaviours[e[n]]&&(t[e[n]]=this.$behaviours[e[n]]);return t}}).call(r.prototype),t.Behaviour=r}),ace.define(\"ace/token_iterator\",[\"require\",\"exports\",\"module\",\"ace/range\"],function(e,t,n){\"use strict\";var r=e(\"./range\").Range,i=function(e,t,n){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t);var r=e.getTokenAt(t,n);this.$tokenIndex=r?r.index:-1};(function(){this.stepBackward=function(){this.$tokenIndex-=1;while(this.$tokenIndex<0){this.$row-=1;if(this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;var e;while(this.$tokenIndex>=this.$rowTokens.length){this.$row+=1,e||(e=this.$session.getLength());if(this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,n=e[t].start;if(n!==undefined)return n;n=0;while(t>0)t-=1,n+=e[t].value.length;return n},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var e=this.$rowTokens[this.$tokenIndex],t=this.getCurrentTokenColumn();return new r(this.$row,t,this.$row,t+e.value.length)}}).call(i.prototype),t.TokenIterator=i}),ace.define(\"ace/mode/behaviour/cstyle\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/behaviour\",\"ace/token_iterator\",\"ace/lib/lang\"],function(e,t,n){\"use strict\";var r=e(\"../../lib/oop\"),i=e(\"../behaviour\").Behaviour,s=e(\"../../token_iterator\").TokenIterator,o=e(\"../../lib/lang\"),u=[\"text\",\"paren.rparen\",\"rparen\",\"paren\",\"punctuation.operator\"],a=[\"text\",\"paren.rparen\",\"rparen\",\"paren\",\"punctuation.operator\",\"comment\"],f,l={},c={'\"':'\"',\"'\":\"'\"},h=function(e){var t=-1;e.multiSelect&&(t=e.selection.index,l.rangeCount!=e.multiSelect.rangeCount&&(l={rangeCount:e.multiSelect.rangeCount}));if(l[t])return f=l[t];f=l[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:\"\",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:\"\",maybeInsertedLineEnd:\"\"}},p=function(e,t,n,r){var i=e.end.row-e.start.row;return{text:n+t+r,selection:[0,e.start.column+1,i,e.end.column+(i?0:1)]}},d=function(e){this.add(\"braces\",\"insertion\",function(t,n,r,i,s){var u=r.getCursorPosition(),a=i.doc.getLine(u.row);if(s==\"{\"){h(r);var l=r.getSelectionRange(),c=i.doc.getTextRange(l);if(c!==\"\"&&c!==\"{\"&&r.getWrapBehavioursEnabled())return p(l,c,\"{\",\"}\");if(d.isSaneInsertion(r,i))return/[\\]\\}\\)]/.test(a[u.column])||r.inMultiSelectMode||e&&e.braces?(d.recordAutoInsert(r,i,\"}\"),{text:\"{}\",selection:[1,1]}):(d.recordMaybeInsert(r,i,\"{\"),{text:\"{\",selection:[1,1]})}else if(s==\"}\"){h(r);var v=a.substring(u.column,u.column+1);if(v==\"}\"){var m=i.$findOpeningBracket(\"}\",{column:u.column+1,row:u.row});if(m!==null&&d.isAutoInsertedClosing(u,a,s))return d.popAutoInsertedClosing(),{text:\"\",selection:[1,1]}}}else{if(s==\"\\n\"||s==\"\\r\\n\"){h(r);var g=\"\";d.isMaybeInsertedClosing(u,a)&&(g=o.stringRepeat(\"}\",f.maybeInsertedBrackets),d.clearMaybeInsertedClosing());var v=a.substring(u.column,u.column+1);if(v===\"}\"){var y=i.findMatchingBracket({row:u.row,column:u.column+1},\"}\");if(!y)return null;var b=this.$getIndent(i.getLine(y.row))}else{if(!g){d.clearMaybeInsertedClosing();return}var b=this.$getIndent(a)}var w=b+i.getTabString();return{text:\"\\n\"+w+\"\\n\"+b+g,selection:[1,w.length,1,w.length]}}d.clearMaybeInsertedClosing()}}),this.add(\"braces\",\"deletion\",function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&s==\"{\"){h(n);var o=r.doc.getLine(i.start.row),u=o.substring(i.end.column,i.end.column+1);if(u==\"}\")return i.end.column++,i;f.maybeInsertedBrackets--}}),this.add(\"parens\",\"insertion\",function(e,t,n,r,i){if(i==\"(\"){h(n);var s=n.getSelectionRange(),o=r.doc.getTextRange(s);if(o!==\"\"&&n.getWrapBehavioursEnabled())return p(s,o,\"(\",\")\");if(d.isSaneInsertion(n,r))return d.recordAutoInsert(n,r,\")\"),{text:\"()\",selection:[1,1]}}else if(i==\")\"){h(n);var u=n.getCursorPosition(),a=r.doc.getLine(u.row),f=a.substring(u.column,u.column+1);if(f==\")\"){var l=r.$findOpeningBracket(\")\",{column:u.column+1,row:u.row});if(l!==null&&d.isAutoInsertedClosing(u,a,i))return d.popAutoInsertedClosing(),{text:\"\",selection:[1,1]}}}}),this.add(\"parens\",\"deletion\",function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&s==\"(\"){h(n);var o=r.doc.getLine(i.start.row),u=o.substring(i.start.column+1,i.start.column+2);if(u==\")\")return i.end.column++,i}}),this.add(\"brackets\",\"insertion\",function(e,t,n,r,i){if(i==\"[\"){h(n);var s=n.getSelectionRange(),o=r.doc.getTextRange(s);if(o!==\"\"&&n.getWrapBehavioursEnabled())return p(s,o,\"[\",\"]\");if(d.isSaneInsertion(n,r))return d.recordAutoInsert(n,r,\"]\"),{text:\"[]\",selection:[1,1]}}else if(i==\"]\"){h(n);var u=n.getCursorPosition(),a=r.doc.getLine(u.row),f=a.substring(u.column,u.column+1);if(f==\"]\"){var l=r.$findOpeningBracket(\"]\",{column:u.column+1,row:u.row});if(l!==null&&d.isAutoInsertedClosing(u,a,i))return d.popAutoInsertedClosing(),{text:\"\",selection:[1,1]}}}}),this.add(\"brackets\",\"deletion\",function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&s==\"[\"){h(n);var o=r.doc.getLine(i.start.row),u=o.substring(i.start.column+1,i.start.column+2);if(u==\"]\")return i.end.column++,i}}),this.add(\"string_dquotes\",\"insertion\",function(e,t,n,r,i){var s=r.$mode.$quotes||c;if(i.length==1&&s[i]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(i)!=-1)return;h(n);var o=i,u=n.getSelectionRange(),a=r.doc.getTextRange(u);if(a!==\"\"&&(a.length!=1||!s[a])&&n.getWrapBehavioursEnabled())return p(u,a,o,o);if(!a){var f=n.getCursorPosition(),l=r.doc.getLine(f.row),d=l.substring(f.column-1,f.column),v=l.substring(f.column,f.column+1),m=r.getTokenAt(f.row,f.column),g=r.getTokenAt(f.row,f.column+1);if(d==\"\\\\\"&&m&&/escape/.test(m.type))return null;var y=m&&/string|escape/.test(m.type),b=!g||/string|escape/.test(g.type),w;if(v==o)w=y!==b,w&&/string\\.end/.test(g.type)&&(w=!1);else{if(y&&!b)return null;if(y&&b)return null;var E=r.$mode.tokenRe;E.lastIndex=0;var S=E.test(d);E.lastIndex=0;var x=E.test(d);if(S||x)return null;if(v&&!/[\\s;,.})\\]\\\\]/.test(v))return null;var T=l[f.column-2];if(!(d!=o||T!=o&&!E.test(T)))return null;w=!0}return{text:w?o+o:\"\",selection:[1,1]}}}}),this.add(\"string_dquotes\",\"deletion\",function(e,t,n,r,i){var s=r.$mode.$quotes||c,o=r.doc.getTextRange(i);if(!i.isMultiLine()&&s.hasOwnProperty(o)){h(n);var u=r.doc.getLine(i.start.row),a=u.substring(i.start.column+1,i.start.column+2);if(a==o)return i.end.column++,i}})};d.isSaneInsertion=function(e,t){var n=e.getCursorPosition(),r=new s(t,n.row,n.column);if(!this.$matchTokenType(r.getCurrentToken()||\"text\",u)){if(/[)}\\]]/.test(e.session.getLine(n.row)[n.column]))return!0;var i=new s(t,n.row,n.column+1);if(!this.$matchTokenType(i.getCurrentToken()||\"text\",u))return!1}return r.stepForward(),r.getCurrentTokenRow()!==n.row||this.$matchTokenType(r.getCurrentToken()||\"text\",a)},d.$matchTokenType=function(e,t){return t.indexOf(e.type||e)>-1},d.recordAutoInsert=function(e,t,n){var r=e.getCursorPosition(),i=t.doc.getLine(r.row);this.isAutoInsertedClosing(r,i,f.autoInsertedLineEnd[0])||(f.autoInsertedBrackets=0),f.autoInsertedRow=r.row,f.autoInsertedLineEnd=n+i.substr(r.column),f.autoInsertedBrackets++},d.recordMaybeInsert=function(e,t,n){var r=e.getCursorPosition(),i=t.doc.getLine(r.row);this.isMaybeInsertedClosing(r,i)||(f.maybeInsertedBrackets=0),f.maybeInsertedRow=r.row,f.maybeInsertedLineStart=i.substr(0,r.column)+n,f.maybeInsertedLineEnd=i.substr(r.column),f.maybeInsertedBrackets++},d.isAutoInsertedClosing=function(e,t,n){return f.autoInsertedBrackets>0&&e.row===f.autoInsertedRow&&n===f.autoInsertedLineEnd[0]&&t.substr(e.column)===f.autoInsertedLineEnd},d.isMaybeInsertedClosing=function(e,t){return f.maybeInsertedBrackets>0&&e.row===f.maybeInsertedRow&&t.substr(e.column)===f.maybeInsertedLineEnd&&t.substr(0,e.column)==f.maybeInsertedLineStart},d.popAutoInsertedClosing=function(){f.autoInsertedLineEnd=f.autoInsertedLineEnd.substr(1),f.autoInsertedBrackets--},d.clearMaybeInsertedClosing=function(){f&&(f.maybeInsertedBrackets=0,f.maybeInsertedRow=-1)},r.inherits(d,i),t.CstyleBehaviour=d}),ace.define(\"ace/unicode\",[\"require\",\"exports\",\"module\"],function(e,t,n){\"use strict\";var r=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],i=0,s=[];for(var o=0;o<r.length;o+=2)s.push(i+=r[o]),r[o+1]&&s.push(45,i+=r[o+1]);t.wordChars=String.fromCharCode.apply(null,s)}),ace.define(\"ace/mode/text\",[\"require\",\"exports\",\"module\",\"ace/config\",\"ace/tokenizer\",\"ace/mode/text_highlight_rules\",\"ace/mode/behaviour/cstyle\",\"ace/unicode\",\"ace/lib/lang\",\"ace/token_iterator\",\"ace/range\"],function(e,t,n){\"use strict\";var r=e(\"../config\"),i=e(\"../tokenizer\").Tokenizer,s=e(\"./text_highlight_rules\").TextHighlightRules,o=e(\"./behaviour/cstyle\").CstyleBehaviour,u=e(\"../unicode\"),a=e(\"../lib/lang\"),f=e(\"../token_iterator\").TokenIterator,l=e(\"../range\").Range,c=function(){this.HighlightRules=s};(function(){this.$defaultBehaviour=new o,this.tokenRe=new RegExp(\"^[\"+u.wordChars+\"\\\\$_]+\",\"g\"),this.nonTokenRe=new RegExp(\"^(?:[^\"+u.wordChars+\"\\\\$_]|\\\\s])+\",\"g\"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new i(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart=\"\",this.blockComment=\"\",this.toggleCommentLines=function(e,t,n,r){function w(e){for(var t=n;t<=r;t++)e(i.getLine(t),t)}var i=t.doc,s=!0,o=!0,u=Infinity,f=t.getTabSize(),l=!1;if(!this.lineCommentStart){if(!this.blockComment)return!1;var c=this.blockComment.start,h=this.blockComment.end,p=new RegExp(\"^(\\\\s*)(?:\"+a.escapeRegExp(c)+\")\"),d=new RegExp(\"(?:\"+a.escapeRegExp(h)+\")\\\\s*$\"),v=function(e,t){if(g(e,t))return;if(!s||/\\S/.test(e))i.insertInLine({row:t,column:e.length},h),i.insertInLine({row:t,column:u},c)},m=function(e,t){var n;(n=e.match(d))&&i.removeInLine(t,e.length-n[0].length,e.length),(n=e.match(p))&&i.removeInLine(t,n[1].length,n[0].length)},g=function(e,n){if(p.test(e))return!0;var r=t.getTokens(n);for(var i=0;i<r.length;i++)if(r[i].type===\"comment\")return!0}}else{if(Array.isArray(this.lineCommentStart))var p=this.lineCommentStart.map(a.escapeRegExp).join(\"|\"),c=this.lineCommentStart[0];else var p=a.escapeRegExp(this.lineCommentStart),c=this.lineCommentStart;p=new RegExp(\"^(\\\\s*)(?:\"+p+\") ?\"),l=t.getUseSoftTabs();var m=function(e,t){var n=e.match(p);if(!n)return;var r=n[1].length,s=n[0].length;!b(e,r,s)&&n[0][s-1]==\" \"&&s--,i.removeInLine(t,r,s)},y=c+\" \",v=function(e,t){if(!s||/\\S/.test(e))b(e,u,u)?i.insertInLine({row:t,column:u},y):i.insertInLine({row:t,column:u},c)},g=function(e,t){return p.test(e)},b=function(e,t,n){var r=0;while(t--&&e.charAt(t)==\" \")r++;if(r%f!=0)return!1;var r=0;while(e.charAt(n++)==\" \")r++;return f>2?r%f!=f-1:r%f==0}}var E=Infinity;w(function(e,t){var n=e.search(/\\S/);n!==-1?(n<u&&(u=n),o&&!g(e,t)&&(o=!1)):E>e.length&&(E=e.length)}),u==Infinity&&(u=E,s=!1,o=!1),l&&u%f!=0&&(u=Math.floor(u/f)*f),w(o?m:v)},this.toggleBlockComment=function(e,t,n,r){var i=this.blockComment;if(!i)return;!i.start&&i[0]&&(i=i[0]);var s=new f(t,r.row,r.column),o=s.getCurrentToken(),u=t.selection,a=t.selection.toOrientedRange(),c,h;if(o&&/comment/.test(o.type)){var p,d;while(o&&/comment/.test(o.type)){var v=o.value.indexOf(i.start);if(v!=-1){var m=s.getCurrentTokenRow(),g=s.getCurrentTokenColumn()+v;p=new l(m,g,m,g+i.start.length);break}o=s.stepBackward()}var s=new f(t,r.row,r.column),o=s.getCurrentToken();while(o&&/comment/.test(o.type)){var v=o.value.indexOf(i.end);if(v!=-1){var m=s.getCurrentTokenRow(),g=s.getCurrentTokenColumn()+v;d=new l(m,g,m,g+i.end.length);break}o=s.stepForward()}d&&t.remove(d),p&&(t.remove(p),c=p.start.row,h=-i.start.length)}else h=i.start.length,c=n.start.row,t.insert(n.end,i.end),t.insert(n.start,i.start);a.start.row==c&&(a.start.column+=h),a.end.row==c&&(a.end.column+=h),t.selection.fromOrientedRange(a)},this.getNextLineIndent=function(e,t,n){return this.$getIndent(t)},this.checkOutdent=function(e,t,n){return!1},this.autoOutdent=function(e,t,n){},this.$getIndent=function(e){return e.match(/^\\s*/)[0]},this.createWorker=function(e){return null},this.createModeDelegates=function(e){this.$embeds=[],this.$modes={};for(var t in e)if(e[t]){var n=e[t],i=n.prototype.$id,s=r.$modes[i];s||(r.$modes[i]=s=new n),r.$modes[t]||(r.$modes[t]=s),this.$embeds.push(t),this.$modes[t]=s}var o=[\"toggleBlockComment\",\"toggleCommentLines\",\"getNextLineIndent\",\"checkOutdent\",\"autoOutdent\",\"transformAction\",\"getCompletions\"];for(var t=0;t<o.length;t++)(function(e){var n=o[t],r=e[n];e[o[t]]=function(){return this.$delegator(n,arguments,r)}})(this)},this.$delegator=function(e,t,n){var r=t[0]||\"start\";if(typeof r!=\"string\"){if(Array.isArray(r[2])){var i=r[2][r[2].length-1],s=this.$modes[i];if(s)return s[e].apply(s,[r[1]].concat([].slice.call(t,1)))}r=r[0]||\"start\"}for(var o=0;o<this.$embeds.length;o++){if(!this.$modes[this.$embeds[o]])continue;var u=r.split(this.$embeds[o]);if(!u[0]&&u[1]){t[0]=u[1];var s=this.$modes[this.$embeds[o]];return s[e].apply(s,t)}}var a=n.apply(this,t);return n?a:undefined},this.transformAction=function(e,t,n,r,i){if(this.$behaviour){var s=this.$behaviour.getBehaviours();for(var o in s)if(s[o][t]){var u=s[o][t].apply(this,arguments);if(u)return u}}},this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules,n=[];for(var r in t){var i=t[r];for(var s=0,o=i.length;s<o;s++)if(typeof i[s].token==\"string\")/keyword|support|storage/.test(i[s].token)&&n.push(i[s].regex);else if(typeof i[s].token==\"object\")for(var u=0,a=i[s].token.length;u<a;u++)if(/keyword|support|storage/.test(i[s].token[u])){var r=i[s].regex.match(/\\(.+?\\)/g)[u];n.push(r.substr(1,r.length-2))}}this.completionKeywords=n}return e?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(e,t,n,r){var i=this.$keywordList||this.$createKeywordList();return i.map(function(e){return{name:e,value:e,score:0,meta:\"keyword\"}})},this.$id=\"ace/mode/text\"}).call(c.prototype),t.Mode=c}),ace.define(\"ace/apply_delta\",[\"require\",\"exports\",\"module\"],function(e,t,n){\"use strict\";function r(e,t){throw console.log(\"Invalid Delta:\",e),\"Invalid Delta: \"+t}function i(e,t){return t.row>=0&&t.row<e.length&&t.column>=0&&t.column<=e[t.row].length}function s(e,t){t.action!=\"insert\"&&t.action!=\"remove\"&&r(t,\"delta.action must be 'insert' or 'remove'\"),t.lines instanceof Array||r(t,\"delta.lines must be an Array\"),(!t.start||!t.end)&&r(t,\"delta.start/end must be an present\");var n=t.start;i(e,t.start)||r(t,\"delta.start must be contained in document\");var s=t.end;t.action==\"remove\"&&!i(e,s)&&r(t,\"delta.end must contained in document for 'remove' actions\");var o=s.row-n.row,u=s.column-(o==0?n.column:0);(o!=t.lines.length-1||t.lines[o].length!=u)&&r(t,\"delta.range must match delta lines\")}t.applyDelta=function(e,t,n){var r=t.start.row,i=t.start.column,s=e[r]||\"\";switch(t.action){case\"insert\":var o=t.lines;if(o.length===1)e[r]=s.substring(0,i)+t.lines[0]+s.substring(i);else{var u=[r,1].concat(t.lines);e.splice.apply(e,u),e[r]=s.substring(0,i)+e[r],e[r+t.lines.length-1]+=s.substring(i)}break;case\"remove\":var a=t.end.column,f=t.end.row;r===f?e[r]=s.substring(0,i)+s.substring(a):e.splice(r,f-r+1,s.substring(0,i)+e[f].substring(a))}}}),ace.define(\"ace/anchor\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/event_emitter\"],function(e,t,n){\"use strict\";var r=e(\"./lib/oop\"),i=e(\"./lib/event_emitter\").EventEmitter,s=t.Anchor=function(e,t,n){this.$onChange=this.onChange.bind(this),this.attach(e),typeof n==\"undefined\"?this.setPosition(t.row,t.column):this.setPosition(t,n)};(function(){function e(e,t,n){var r=n?e.column<=t.column:e.column<t.column;return e.row<t.row||e.row==t.row&&r}function t(t,n,r){var i=t.action==\"insert\",s=(i?1:-1)*(t.end.row-t.start.row),o=(i?1:-1)*(t.end.column-t.start.column),u=t.start,a=i?u:t.end;return e(n,u,r)?{row:n.row,column:n.column}:e(a,n,!r)?{row:n.row+s,column:n.column+(n.row==a.row?o:0)}:{row:u.row,column:u.column}}r.implement(this,i),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(e){if(e.start.row==e.end.row&&e.start.row!=this.row)return;if(e.start.row>this.row)return;var n=t(e,{row:this.row,column:this.column},this.$insertRight);this.setPosition(n.row,n.column,!0)},this.setPosition=function(e,t,n){var r;n?r={row:e,column:t}:r=this.$clipPositionToDocument(e,t);if(this.row==r.row&&this.column==r.column)return;var i={row:this.row,column:this.column};this.row=r.row,this.column=r.column,this._signal(\"change\",{old:i,value:r})},this.detach=function(){this.document.off(\"change\",this.$onChange)},this.attach=function(e){this.document=e||this.document,this.document.on(\"change\",this.$onChange)},this.$clipPositionToDocument=function(e,t){var n={};return e>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):e<0?(n.row=0,n.column=0):(n.row=e,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,t))),t<0&&(n.column=0),n}}).call(s.prototype)}),ace.define(\"ace/document\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/apply_delta\",\"ace/lib/event_emitter\",\"ace/range\",\"ace/anchor\"],function(e,t,n){\"use strict\";var r=e(\"./lib/oop\"),i=e(\"./apply_delta\").applyDelta,s=e(\"./lib/event_emitter\").EventEmitter,o=e(\"./range\").Range,u=e(\"./anchor\").Anchor,a=function(e){this.$lines=[\"\"],e.length===0?this.$lines=[\"\"]:Array.isArray(e)?this.insertMergedLines({row:0,column:0},e):this.insert({row:0,column:0},e)};(function(){r.implement(this,s),this.setValue=function(e){var t=this.getLength()-1;this.remove(new o(0,0,t,this.getLine(t).length)),this.insert({row:0,column:0},e||\"\")},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new u(this,e,t)},\"aaa\".split(/a/).length===0?this.$split=function(e){return e.replace(/\\r\\n|\\r/g,\"\\n\").split(\"\\n\")}:this.$split=function(e){return e.split(/\\r\\n|\\r|\\n/)},this.$detectNewLine=function(e){var t=e.match(/^.*?(\\r\\n|\\r|\\n)/m);this.$autoNewLine=t?t[1]:\"\\n\",this._signal(\"changeNewLineMode\")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case\"windows\":return\"\\r\\n\";case\"unix\":return\"\\n\";default:return this.$autoNewLine||\"\\n\"}},this.$autoNewLine=\"\",this.$newLineMode=\"auto\",this.setNewLineMode=function(e){if(this.$newLineMode===e)return;this.$newLineMode=e,this._signal(\"changeNewLineMode\")},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return e==\"\\r\\n\"||e==\"\\r\"||e==\"\\n\"},this.getLine=function(e){return this.$lines[e]||\"\"},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){return this.getLinesForRange(e).join(this.getNewLineCharacter())},this.getLinesForRange=function(e){var t;if(e.start.row===e.end.row)t=[this.getLine(e.start.row).substring(e.start.column,e.end.column)];else{t=this.getLines(e.start.row,e.end.row),t[0]=(t[0]||\"\").substring(e.start.column);var n=t.length-1;e.end.row-e.start.row==n&&(t[n]=t[n].substring(0,e.end.column))}return t},this.insertLines=function(e,t){return console.warn(\"Use of document.insertLines is deprecated. Use the insertFullLines method instead.\"),this.insertFullLines(e,t)},this.removeLines=function(e,t){return console.warn(\"Use of document.removeLines is deprecated. Use the removeFullLines method instead.\"),this.removeFullLines(e,t)},this.insertNewLine=function(e){return console.warn(\"Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead.\"),this.insertMergedLines(e,[\"\",\"\"])},this.insert=function(e,t){return this.getLength()<=1&&this.$detectNewLine(t),this.insertMergedLines(e,this.$split(t))},this.insertInLine=function(e,t){var n=this.clippedPos(e.row,e.column),r=this.pos(e.row,e.column+t.length);return this.applyDelta({start:n,end:r,action:\"insert\",lines:[t]},!0),this.clonePos(r)},this.clippedPos=function(e,t){var n=this.getLength();e===undefined?e=n:e<0?e=0:e>=n&&(e=n-1,t=undefined);var r=this.getLine(e);return t==undefined&&(t=r.length),t=Math.min(Math.max(t,0),r.length),{row:e,column:t}},this.clonePos=function(e){return{row:e.row,column:e.column}},this.pos=function(e,t){return{row:e,column:t}},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):(e.row=Math.max(0,e.row),e.column=Math.min(Math.max(e.column,0),this.getLine(e.row).length)),e},this.insertFullLines=function(e,t){e=Math.min(Math.max(e,0),this.getLength());var n=0;e<this.getLength()?(t=t.concat([\"\"]),n=0):(t=[\"\"].concat(t),e--,n=this.$lines[e].length),this.insertMergedLines({row:e,column:n},t)},this.insertMergedLines=function(e,t){var n=this.clippedPos(e.row,e.column),r={row:n.row+t.length-1,column:(t.length==1?n.column:0)+t[t.length-1].length};return this.applyDelta({start:n,end:r,action:\"insert\",lines:t}),this.clonePos(r)},this.remove=function(e){var t=this.clippedPos(e.start.row,e.start.column),n=this.clippedPos(e.end.row,e.end.column);return this.applyDelta({start:t,end:n,action:\"remove\",lines:this.getLinesForRange({start:t,end:n})}),this.clonePos(t)},this.removeInLine=function(e,t,n){var r=this.clippedPos(e,t),i=this.clippedPos(e,n);return this.applyDelta({start:r,end:i,action:\"remove\",lines:this.getLinesForRange({start:r,end:i})},!0),this.clonePos(r)},this.removeFullLines=function(e,t){e=Math.min(Math.max(0,e),this.getLength()-1),t=Math.min(Math.max(0,t),this.getLength()-1);var n=t==this.getLength()-1&&e>0,r=t<this.getLength()-1,i=n?e-1:e,s=n?this.getLine(i).length:0,u=r?t+1:t,a=r?0:this.getLine(u).length,f=new o(i,s,u,a),l=this.$lines.slice(e,t+1);return this.applyDelta({start:f.start,end:f.end,action:\"remove\",lines:this.getLinesForRange(f)}),l},this.removeNewLine=function(e){e<this.getLength()-1&&e>=0&&this.applyDelta({start:this.pos(e,this.getLine(e).length),end:this.pos(e+1,0),action:\"remove\",lines:[\"\",\"\"]})},this.replace=function(e,t){e instanceof o||(e=o.fromPoints(e.start,e.end));if(t.length===0&&e.isEmpty())return e.start;if(t==this.getTextRange(e))return e.end;this.remove(e);var n;return t?n=this.insert(e.start,t):n=e.start,n},this.applyDeltas=function(e){for(var t=0;t<e.length;t++)this.applyDelta(e[t])},this.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--)this.revertDelta(e[t])},this.applyDelta=function(e,t){var n=e.action==\"insert\";if(n?e.lines.length<=1&&!e.lines[0]:!o.comparePoints(e.start,e.end))return;n&&e.lines.length>2e4?this.$splitAndapplyLargeDelta(e,2e4):(i(this.$lines,e,t),this._signal(\"change\",e))},this.$safeApplyDelta=function(e){var t=this.$lines.length;(e.action==\"remove\"&&e.start.row<t&&e.end.row<t||e.action==\"insert\"&&e.start.row<=t)&&this.applyDelta(e)},this.$splitAndapplyLargeDelta=function(e,t){var n=e.lines,r=n.length-t+1,i=e.start.row,s=e.start.column;for(var o=0,u=0;o<r;o=u){u+=t-1;var a=n.slice(o,u);a.push(\"\"),this.applyDelta({start:this.pos(i+o,s),end:this.pos(i+u,s=0),action:e.action,lines:a},!0)}e.lines=n.slice(o),e.start.row=i+o,e.start.column=s,this.applyDelta(e,!0)},this.revertDelta=function(e){this.$safeApplyDelta({start:this.clonePos(e.start),end:this.clonePos(e.end),action:e.action==\"insert\"?\"remove\":\"insert\",lines:e.lines.slice()})},this.indexToPosition=function(e,t){var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length;for(var i=t||0,s=n.length;i<s;i++){e-=n[i].length+r;if(e<0)return{row:i,column:e+n[i].length+r}}return{row:s-1,column:e+n[s-1].length+r}},this.positionToIndex=function(e,t){var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,i=0,s=Math.min(e.row,n.length);for(var o=t||0;o<s;++o)i+=n[o].length+r;return i+e.column}}).call(a.prototype),t.Document=a}),ace.define(\"ace/background_tokenizer\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/event_emitter\"],function(e,t,n){\"use strict\";var r=e(\"./lib/oop\"),i=e(\"./lib/event_emitter\").EventEmitter,s=function(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var n=this;this.$worker=function(){if(!n.running)return;var e=new Date,t=n.currentLine,r=-1,i=n.doc,s=t;while(n.lines[t])t++;var o=i.getLength(),u=0;n.running=!1;while(t<o){n.$tokenizeRow(t),r=t;do t++;while(n.lines[t]);u++;if(u%5===0&&new Date-e>20){n.running=setTimeout(n.$worker,20);break}}n.currentLine=t,r==-1&&(r=t),s<=r&&n.fireUpdateEvent(s,r)}};(function(){r.implement(this,i),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){var n={first:e,last:t};this._signal(\"update\",{data:n})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(e){var t=e.start.row,n=e.end.row-t;if(n===0)this.lines[t]=null;else if(e.action==\"remove\")this.lines.splice(t,n+1,null),this.states.splice(t,n+1,null);else{var r=Array(n+1);r.unshift(t,1),this.lines.splice.apply(this.lines,r),this.states.splice.apply(this.states,r)}this.currentLine=Math.min(t,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},this.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||\"start\"},this.$tokenizeRow=function(e){var t=this.doc.getLine(e),n=this.states[e-1],r=this.tokenizer.getLineTokens(t,n,e);return this.states[e]+\"\"!=r.state+\"\"?(this.states[e]=r.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=r.tokens},this.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()}}).call(s.prototype),t.BackgroundTokenizer=s}),ace.define(\"ace/search_highlight\",[\"require\",\"exports\",\"module\",\"ace/lib/lang\",\"ace/lib/oop\",\"ace/range\"],function(e,t,n){\"use strict\";var r=e(\"./lib/lang\"),i=e(\"./lib/oop\"),s=e(\"./range\").Range,o=function(e,t,n){this.setRegexp(e),this.clazz=t,this.type=n||\"text\"};(function(){this.MAX_RANGES=500,this.setRegexp=function(e){if(this.regExp+\"\"==e+\"\")return;this.regExp=e,this.cache=[]},this.update=function(e,t,n,i){if(!this.regExp)return;var o=i.firstRow,u=i.lastRow,a={};for(var f=o;f<=u;f++){var l=this.cache[f];l==null&&(l=r.getMatchOffsets(n.getLine(f),this.regExp),l.length>this.MAX_RANGES&&(l=l.slice(0,this.MAX_RANGES)),l=l.map(function(e){return new s(f,e.offset,f,e.offset+e.length)}),this.cache[f]=l.length?l:\"\");for(var c=l.length;c--;){var h=l[c].toScreenRange(n),p=h.toString();if(a[p])continue;a[p]=!0,t.drawSingleLineMarker(e,h,this.clazz,i)}}}}).call(o.prototype),t.SearchHighlight=o}),ace.define(\"ace/edit_session/fold_line\",[\"require\",\"exports\",\"module\",\"ace/range\"],function(e,t,n){\"use strict\";function i(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];var n=t[t.length-1];this.range=new r(t[0].start.row,t[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(e){e.setFoldLine(this)},this)}var r=e(\"../range\").Range;(function(){this.shiftRow=function(e){this.start.row+=e,this.end.row+=e,this.folds.forEach(function(t){t.start.row+=e,t.end.row+=e})},this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw new Error(\"Can't add a fold to this FoldLine as it has no connection\");this.folds.push(e),this.folds.sort(function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)}),this.range.compareEnd(e.start.row,e.start.column)>0?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw new Error(\"Trying to add fold to FoldRow that doesn't have a matching row\");this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},this.walk=function(e,t,n){var r=0,i=this.folds,s,o,u,a=!0;t==null&&(t=this.end.row,n=this.end.column);for(var f=0;f<i.length;f++){s=i[f],o=s.range.compareStart(t,n);if(o==-1){e(null,t,n,r,a);return}u=e(null,s.start.row,s.start.column,r,a),u=!u&&e(s.placeholder,s.start.row,s.start.column,r);if(u||o===0)return;a=!s.sameRow,r=s.end.column}e(null,t,n,r,a)},this.getNextFoldTo=function(e,t){var n,r;for(var i=0;i<this.folds.length;i++){n=this.folds[i],r=n.range.compareEnd(e,t);if(r==-1)return{fold:n,kind:\"after\"};if(r===0)return{fold:n,kind:\"inside\"}}return null},this.addRemoveChars=function(e,t,n){var r=this.getNextFoldTo(e,t),i,s;if(r){i=r.fold;if(r.kind==\"inside\"&&i.start.column!=t&&i.start.row!=e)window.console&&window.console.log(e,t,i);else if(i.start.row==e){s=this.folds;var o=s.indexOf(i);o===0&&(this.start.column+=n);for(o;o<s.length;o++){i=s[o],i.start.column+=n;if(!i.sameRow)return;i.end.column+=n}this.end.column+=n}}},this.split=function(e,t){var n=this.getNextFoldTo(e,t);if(!n||n.kind==\"inside\")return null;var r=n.fold,s=this.folds,o=this.foldData,u=s.indexOf(r),a=s[u-1];this.end.row=a.end.row,this.end.column=a.end.column,s=s.splice(u,s.length-u);var f=new i(o,s);return o.splice(o.indexOf(this)+1,0,f),f},this.merge=function(e){var t=e.folds;for(var n=0;n<t.length;n++)this.addFold(t[n]);var r=this.foldData;r.splice(r.indexOf(e),1)},this.toString=function(){var e=[this.range.toString()+\": [\"];return this.folds.forEach(function(t){e.push(\"  \"+t.toString())}),e.push(\"]\"),e.join(\"\\n\")},this.idxToPosition=function(e){var t=0;for(var n=0;n<this.folds.length;n++){var r=this.folds[n];e-=r.start.column-t;if(e<0)return{row:r.start.row,column:r.start.column+e};e-=r.placeholder.length;if(e<0)return r.start;t=r.end.column}return{row:this.end.row,column:this.end.column+e}}}).call(i.prototype),t.FoldLine=i}),ace.define(\"ace/range_list\",[\"require\",\"exports\",\"module\",\"ace/range\"],function(e,t,n){\"use strict\";var r=e(\"./range\").Range,i=r.comparePoints,s=function(){this.ranges=[],this.$bias=1};(function(){this.comparePoints=i,this.pointIndex=function(e,t,n){var r=this.ranges;for(var s=n||0;s<r.length;s++){var o=r[s],u=i(e,o.end);if(u>0)continue;var a=i(e,o.start);return u===0?t&&a!==0?-s-2:s:a>0||a===0&&!t?s:-s-1}return-s-1},this.add=function(e){var t=!e.isEmpty(),n=this.pointIndex(e.start,t);n<0&&(n=-n-1);var r=this.pointIndex(e.end,t,n);return r<0?r=-r-1:r++,this.ranges.splice(n,r-n,e)},this.addList=function(e){var t=[];for(var n=e.length;n--;)t.push.apply(t,this.add(e[n]));return t},this.substractPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges.splice(t,1)},this.merge=function(){var e=[],t=this.ranges;t=t.sort(function(e,t){return i(e.start,t.start)});var n=t[0],r;for(var s=1;s<t.length;s++){r=n,n=t[s];var o=i(r.end,n.start);if(o<0)continue;if(o==0&&!r.isEmpty()&&!n.isEmpty())continue;i(r.end,n.end)<0&&(r.end.row=n.end.row,r.end.column=n.end.column),t.splice(s,1),e.push(n),n=r,s--}return this.ranges=t,e},this.contains=function(e,t){return this.pointIndex({row:e,column:t})>=0},this.containsPoint=function(e){return this.pointIndex(e)>=0},this.rangeAtPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges[t]},this.clipRows=function(e,t){var n=this.ranges;if(n[0].start.row>t||n[n.length-1].start.row<e)return[];var r=this.pointIndex({row:e,column:0});r<0&&(r=-r-1);var i=this.pointIndex({row:t,column:0},r);i<0&&(i=-i-1);var s=[];for(var o=r;o<i;o++)s.push(n[o]);return s},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on(\"change\",this.onChange)},this.detach=function(){if(!this.session)return;this.session.removeListener(\"change\",this.onChange),this.session=null},this.$onChange=function(e){var t=e.start,n=e.end,r=t.row,i=n.row,s=this.ranges;for(var o=0,u=s.length;o<u;o++){var a=s[o];if(a.end.row>=r)break}if(e.action==\"insert\"){var f=i-r,l=-t.column+n.column;for(;o<u;o++){var a=s[o];if(a.start.row>r)break;a.start.row==r&&a.start.column>=t.column&&(a.start.column==t.column&&this.$bias<=0||(a.start.column+=l,a.start.row+=f));if(a.end.row==r&&a.end.column>=t.column){if(a.end.column==t.column&&this.$bias<0)continue;a.end.column==t.column&&l>0&&o<u-1&&a.end.column>a.start.column&&a.end.column==s[o+1].start.column&&(a.end.column-=l),a.end.column+=l,a.end.row+=f}}}else{var f=r-i,l=t.column-n.column;for(;o<u;o++){var a=s[o];if(a.start.row>i)break;if(a.end.row<i&&(r<a.end.row||r==a.end.row&&t.column<a.end.column))a.end.row=r,a.end.column=t.column;else if(a.end.row==i)if(a.end.column<=n.column){if(f||a.end.column>t.column)a.end.column=t.column,a.end.row=t.row}else a.end.column+=l,a.end.row+=f;else a.end.row>i&&(a.end.row+=f);if(a.start.row<i&&(r<a.start.row||r==a.start.row&&t.column<a.start.column))a.start.row=r,a.start.column=t.column;else if(a.start.row==i)if(a.start.column<=n.column){if(f||a.start.column>t.column)a.start.column=t.column,a.start.row=t.row}else a.start.column+=l,a.start.row+=f;else a.start.row>i&&(a.start.row+=f)}}if(f!=0&&o<u)for(;o<u;o++){var a=s[o];a.start.row+=f,a.end.row+=f}}}).call(s.prototype),t.RangeList=s}),ace.define(\"ace/edit_session/fold\",[\"require\",\"exports\",\"module\",\"ace/range_list\",\"ace/lib/oop\"],function(e,t,n){\"use strict\";function o(e,t){e.row-=t.row,e.row==0&&(e.column-=t.column)}function u(e,t){o(e.start,t),o(e.end,t)}function a(e,t){e.row==0&&(e.column+=t.column),e.row+=t.row}function f(e,t){a(e.start,t),a(e.end,t)}var r=e(\"../range_list\").RangeList,i=e(\"../lib/oop\"),s=t.Fold=function(e,t){this.foldLine=null,this.placeholder=t,this.range=e,this.start=e.start,this.end=e.end,this.sameRow=e.start.row==e.end.row,this.subFolds=this.ranges=[]};i.inherits(s,r),function(){this.toString=function(){return'\"'+this.placeholder+'\" '+this.range.toString()},this.setFoldLine=function(e){this.foldLine=e,this.subFolds.forEach(function(t){t.setFoldLine(e)})},this.clone=function(){var e=this.range.clone(),t=new s(e,this.placeholder);return this.subFolds.forEach(function(e){t.subFolds.push(e.clone())}),t.collapseChildren=this.collapseChildren,t},this.addSubFold=function(e){if(this.range.isEqual(e))return;u(e,this.start);var t=e.start.row,n=e.start.column;for(var r=0,i=-1;r<this.subFolds.length;r++){i=this.subFolds[r].range.compare(t,n);if(i!=1)break}var s=this.subFolds[r],o=0;if(i==0){if(s.range.containsRange(e))return s.addSubFold(e);o=1}var t=e.range.end.row,n=e.range.end.column;for(var a=r,i=-1;a<this.subFolds.length;a++){i=this.subFolds[a].range.compare(t,n);if(i!=1)break}i==0&&a++;var f=this.subFolds.splice(r,a-r,e),l=i==0?f.length-1:f.length;for(var c=o;c<l;c++)e.addSubFold(f[c]);return e.setFoldLine(this.foldLine),e},this.restoreRange=function(e){return f(e,this.start)}}.call(s.prototype)}),ace.define(\"ace/edit_session/folding\",[\"require\",\"exports\",\"module\",\"ace/range\",\"ace/edit_session/fold_line\",\"ace/edit_session/fold\",\"ace/token_iterator\"],function(e,t,n){\"use strict\";function u(){this.getFoldAt=function(e,t,n){var r=this.getFoldLine(e);if(!r)return null;var i=r.folds;for(var s=0;s<i.length;s++){var o=i[s].range;if(o.contains(e,t)){if(n==1&&o.isEnd(e,t)&&!o.isEmpty())continue;if(n==-1&&o.isStart(e,t)&&!o.isEmpty())continue;return i[s]}}},this.getFoldsInRange=function(e){var t=e.start,n=e.end,r=this.$foldData,i=[];t.column+=1,n.column-=1;for(var s=0;s<r.length;s++){var o=r[s].range.compareRange(e);if(o==2)continue;if(o==-2)break;var u=r[s].folds;for(var a=0;a<u.length;a++){var f=u[a];o=f.range.compareRange(e);if(o==-2)break;if(o==2)continue;if(o==42)break;i.push(f)}}return t.column-=1,n.column+=1,i},this.getFoldsInRangeList=function(e){if(Array.isArray(e)){var t=[];e.forEach(function(e){t=t.concat(this.getFoldsInRange(e))},this)}else var t=this.getFoldsInRange(e);return t},this.getAllFolds=function(){var e=[],t=this.$foldData;for(var n=0;n<t.length;n++)for(var r=0;r<t[n].folds.length;r++)e.push(t[n].folds[r]);return e},this.getFoldStringAt=function(e,t,n,r){r=r||this.getFoldLine(e);if(!r)return null;var i={end:{column:0}},s,o;for(var u=0;u<r.folds.length;u++){o=r.folds[u];var a=o.range.compareEnd(e,t);if(a==-1){s=this.getLine(o.start.row).substring(i.end.column,o.start.column);break}if(a===0)return null;i=o}return s||(s=this.getLine(o.start.row).substring(i.end.column)),n==-1?s.substring(0,t-i.end.column):n==1?s.substring(t-i.end.column):s},this.getFoldLine=function(e,t){var n=this.$foldData,r=0;t&&(r=n.indexOf(t)),r==-1&&(r=0);for(r;r<n.length;r++){var i=n[r];if(i.start.row<=e&&i.end.row>=e)return i;if(i.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var n=this.$foldData,r=0;t&&(r=n.indexOf(t)),r==-1&&(r=0);for(r;r<n.length;r++){var i=n[r];if(i.end.row>=e)return i}return null},this.getFoldedRowCount=function(e,t){var n=this.$foldData,r=t-e+1;for(var i=0;i<n.length;i++){var s=n[i],o=s.end.row,u=s.start.row;if(o>=t){u<t&&(u>=e?r-=t-u:r=0);break}o>=e&&(u>=e?r-=o-u:r-=o-e+1)}return r},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort(function(e,t){return e.start.row-t.start.row}),e},this.addFold=function(e,t){var n=this.$foldData,r=!1,o;e instanceof s?o=e:(o=new s(t,e),o.collapseChildren=t.collapseChildren),this.$clipRangeToDocument(o.range);var u=o.start.row,a=o.start.column,f=o.end.row,l=o.end.column,c=this.getFoldAt(u,a,1),h=this.getFoldAt(f,l,-1);if(c&&h==c)return c.addSubFold(o);c&&!c.range.isStart(u,a)&&this.removeFold(c),h&&!h.range.isEnd(f,l)&&this.removeFold(h);var p=this.getFoldsInRange(o.range);p.length>0&&(this.removeFolds(p),o.collapseChildren||p.forEach(function(e){o.addSubFold(e)}));for(var d=0;d<n.length;d++){var v=n[d];if(f==v.start.row){v.addFold(o),r=!0;break}if(u==v.end.row){v.addFold(o),r=!0;if(!o.sameRow){var m=n[d+1];if(m&&m.start.row==f){v.merge(m);break}}break}if(f<=v.start.row)break}return r||(v=this.$addFoldLine(new i(this.$foldData,o))),this.$useWrapMode?this.$updateWrapData(v.start.row,v.start.row):this.$updateRowLengthCache(v.start.row,v.start.row),this.$modified=!0,this._signal(\"changeFold\",{data:o,action:\"add\"}),o},this.addFolds=function(e){e.forEach(function(e){this.addFold(e)},this)},this.removeFold=function(e){var t=e.foldLine,n=t.start.row,r=t.end.row,i=this.$foldData,s=t.folds;if(s.length==1)i.splice(i.indexOf(t),1);else if(t.range.isEnd(e.end.row,e.end.column))s.pop(),t.end.row=s[s.length-1].end.row,t.end.column=s[s.length-1].end.column;else if(t.range.isStart(e.start.row,e.start.column))s.shift(),t.start.row=s[0].start.row,t.start.column=s[0].start.column;else if(e.sameRow)s.splice(s.indexOf(e),1);else{var o=t.split(e.start.row,e.start.column);s=o.folds,s.shift(),o.start.row=s[0].start.row,o.start.column=s[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(n,r):this.$updateRowLengthCache(n,r)),this.$modified=!0,this._signal(\"changeFold\",{data:e,action:\"remove\"})},this.removeFolds=function(e){var t=[];for(var n=0;n<e.length;n++)t.push(e[n]);t.forEach(function(e){this.removeFold(e)},this),this.$modified=!0},this.expandFold=function(e){this.removeFold(e),e.subFolds.forEach(function(t){e.restoreRange(t),this.addFold(t)},this),e.collapseChildren>0&&this.foldAll(e.start.row+1,e.end.row,e.collapseChildren-1),e.subFolds=[]},this.expandFolds=function(e){e.forEach(function(e){this.expandFold(e)},this)},this.unfold=function(e,t){var n,i;if(e==null)n=new r(0,0,this.getLength(),0),t==null&&(t=!0);else if(typeof e==\"number\")n=new r(e,0,e,this.getLine(e).length);else if(\"row\"in e)n=r.fromPoints(e,e);else{if(Array.isArray(e))return i=[],e.forEach(function(e){i=i.concat(this.unfold(e))},this),i;n=e}i=this.getFoldsInRangeList(n);var s=i;while(i.length==1&&r.comparePoints(i[0].start,n.start)<0&&r.comparePoints(i[0].end,n.end)>0)this.expandFolds(i),i=this.getFoldsInRangeList(n);t!=0?this.removeFolds(i):this.expandFolds(i);if(s.length)return s},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){var n=this.getFoldLine(e,t);return n?n.end.row:e},this.getRowFoldStart=function(e,t){var n=this.getFoldLine(e,t);return n?n.start.row:e},this.getFoldDisplayLine=function(e,t,n,r,i){r==null&&(r=e.start.row),i==null&&(i=0),t==null&&(t=e.end.row),n==null&&(n=this.getLine(t).length);var s=this.doc,o=\"\";return e.walk(function(e,t,n,u){if(t<r)return;if(t==r){if(n<i)return;u=Math.max(i,u)}e!=null?o+=e:o+=s.getLine(t).substring(u,n)},t,n),o},this.getDisplayLine=function(e,t,n,r){var i=this.getFoldLine(e);if(!i){var s;return s=this.doc.getLine(e),s.substring(r||0,t||s.length)}return this.getFoldDisplayLine(i,e,t,n,r)},this.$cloneFoldData=function(){var e=[];return e=this.$foldData.map(function(t){var n=t.folds.map(function(e){return e.clone()});return new i(e,n)}),e},this.toggleFold=function(e){var t=this.selection,n=t.getRange(),r,i;if(n.isEmpty()){var s=n.start;r=this.getFoldAt(s.row,s.column);if(r){this.expandFold(r);return}(i=this.findMatchingBracket(s))?n.comparePoint(i)==1?n.end=i:(n.start=i,n.start.column++,n.end.column--):(i=this.findMatchingBracket({row:s.row,column:s.column+1}))?(n.comparePoint(i)==1?n.end=i:n.start=i,n.start.column++):n=this.getCommentFoldRange(s.row,s.column)||n}else{var o=this.getFoldsInRange(n);if(e&&o.length){this.expandFolds(o);return}o.length==1&&(r=o[0])}r||(r=this.getFoldAt(n.start.row,n.start.column));if(r&&r.range.toString()==n.toString()){this.expandFold(r);return}var u=\"...\";if(!n.isMultiLine()){u=this.getTextRange(n);if(u.length<4)return;u=u.trim().substring(0,2)+\"..\"}this.addFold(u,n)},this.getCommentFoldRange=function(e,t,n){var i=new o(this,e,t),s=i.getCurrentToken(),u=s&&s.type;if(s&&/^comment|string/.test(u)){u=u.match(/comment|string/)[0],u==\"comment\"&&(u+=\"|doc-start\");var a=new RegExp(u),f=new r;if(n!=1){do s=i.stepBackward();while(s&&a.test(s.type)&&!/^comment.end/.test(s.type));s=i.stepForward()}f.start.row=i.getCurrentTokenRow(),f.start.column=i.getCurrentTokenColumn()+(/^comment.start/.test(s.type)?s.value.length:2),i=new o(this,e,t);if(n!=-1){var l=-1;do{s=i.stepForward();if(l==-1){var c=this.getState(i.$row);a.test(c)||(l=i.$row)}else if(i.$row>l)break}while(s&&a.test(s.type)&&!/^comment.start/.test(s.type));s=i.stepBackward()}else s=i.getCurrentToken();return f.end.row=i.getCurrentTokenRow(),f.end.column=i.getCurrentTokenColumn(),/^comment.end/.test(s.type)||(f.end.column+=s.value.length-2),f}},this.foldAll=function(e,t,n,r){n==undefined&&(n=1e5);var i=this.foldWidgets;if(!i)return;t=t||this.getLength(),e=e||0;for(var s=e;s<t;s++){i[s]==null&&(i[s]=this.getFoldWidget(s));if(i[s]!=\"start\")continue;if(r&&!r(s))continue;var o=this.getFoldWidgetRange(s);o&&o.isMultiLine()&&o.end.row<=t&&o.start.row>=e&&(s=o.end.row,o.collapseChildren=n,this.addFold(\"...\",o))}},this.foldToLevel=function(e){this.foldAll();while(e-->0)this.unfold(null,!1)},this.foldAllComments=function(){var e=this;this.foldAll(null,null,null,function(t){var n=e.getTokens(t);for(var r=0;r<n.length;r++){var i=n[r];if(i.type==\"text\"&&/^\\s+$/.test(i.value))continue;return/comment/.test(i.type)?!0:!1}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle=\"markbegin\",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error(\"invalid fold style: \"+e+\"[\"+Object.keys(this.$foldStyles).join(\", \")+\"]\");if(this.$foldStyle==e)return;this.$foldStyle=e,e==\"manual\"&&this.unfold();var t=this.$foldMode;this.$setFolding(null),this.$setFolding(t)},this.$setFolding=function(e){if(this.$foldMode==e)return;this.$foldMode=e,this.off(\"change\",this.$updateFoldWidgets),this.off(\"tokenizerUpdate\",this.$tokenizerUpdateFoldWidgets),this._signal(\"changeAnnotation\");if(!e||this.$foldStyle==\"manual\"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on(\"change\",this.$updateFoldWidgets),this.on(\"tokenizerUpdate\",this.$tokenizerUpdateFoldWidgets)},this.getParentFoldRangeData=function(e,t){var n=this.foldWidgets;if(!n||t&&n[e])return{};var r=e-1,i;while(r>=0){var s=n[r];s==null&&(s=n[r]=this.getFoldWidget(r));if(s==\"start\"){var o=this.getFoldWidgetRange(r);i||(i=o);if(o&&o.end.row>=e)break}r--}return{range:r!==-1&&o,firstRange:i}},this.onFoldWidgetClick=function(e,t){t=t.domEvent;var n={children:t.shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey},r=this.$toggleFoldWidget(e,n);if(!r){var i=t.target||t.srcElement;i&&/ace_fold-widget/.test(i.className)&&(i.className+=\" ace_invalid\")}},this.$toggleFoldWidget=function(e,t){if(!this.getFoldWidget)return;var n=this.getFoldWidget(e),r=this.getLine(e),i=n===\"end\"?-1:1,s=this.getFoldAt(e,i===-1?0:r.length,i);if(s)return t.children||t.all?this.removeFold(s):this.expandFold(s),s;var o=this.getFoldWidgetRange(e,!0);if(o&&!o.isMultiLine()){s=this.getFoldAt(o.start.row,o.start.column,1);if(s&&o.isEqual(s.range))return this.removeFold(s),s}if(t.siblings){var u=this.getParentFoldRangeData(e);if(u.range)var a=u.range.start.row+1,f=u.range.end.row;this.foldAll(a,f,t.all?1e4:0)}else t.children?(f=o?o.end.row:this.getLength(),this.foldAll(e+1,f,t.all?1e4:0)):o&&(t.all&&(o.collapseChildren=1e4),this.addFold(\"...\",o));return o},this.toggleFoldWidget=function(e){var t=this.selection.getCursor().row;t=this.getRowFoldStart(t);var n=this.$toggleFoldWidget(t,{});if(n)return;var r=this.getParentFoldRangeData(t,!0);n=r.range||r.firstRange;if(n){t=n.start.row;var i=this.getFoldAt(t,this.getLine(t).length,1);i?this.removeFold(i):this.addFold(\"...\",n)}},this.updateFoldWidgets=function(e){var t=e.start.row,n=e.end.row-t;if(n===0)this.foldWidgets[t]=null;else if(e.action==\"remove\")this.foldWidgets.splice(t,n+1,null);else{var r=Array(n+1);r.unshift(t,1),this.foldWidgets.splice.apply(this.foldWidgets,r)}},this.tokenizerUpdateFoldWidgets=function(e){var t=e.data;t.first!=t.last&&this.foldWidgets.length>t.first&&this.foldWidgets.splice(t.first,this.foldWidgets.length)}}var r=e(\"../range\").Range,i=e(\"./fold_line\").FoldLine,s=e(\"./fold\").Fold,o=e(\"../token_iterator\").TokenIterator;t.Folding=u}),ace.define(\"ace/edit_session/bracket_match\",[\"require\",\"exports\",\"module\",\"ace/token_iterator\",\"ace/range\"],function(e,t,n){\"use strict\";function s(){this.findMatchingBracket=function(e,t){if(e.column==0)return null;var n=t||this.getLine(e.row).charAt(e.column-1);if(n==\"\")return null;var r=n.match(/([\\(\\[\\{])|([\\)\\]\\}])/);return r?r[1]?this.$findClosingBracket(r[1],e):this.$findOpeningBracket(r[2],e):null},this.getBracketRange=function(e){var t=this.getLine(e.row),n=!0,r,s=t.charAt(e.column-1),o=s&&s.match(/([\\(\\[\\{])|([\\)\\]\\}])/);o||(s=t.charAt(e.column),e={row:e.row,column:e.column+1},o=s&&s.match(/([\\(\\[\\{])|([\\)\\]\\}])/),n=!1);if(!o)return null;if(o[1]){var u=this.$findClosingBracket(o[1],e);if(!u)return null;r=i.fromPoints(e,u),n||(r.end.column++,r.start.column--),r.cursor=r.end}else{var u=this.$findOpeningBracket(o[2],e);if(!u)return null;r=i.fromPoints(u,e),n||(r.start.column++,r.end.column--),r.cursor=r.start}return r},this.getMatchingBracketRanges=function(e,t){var n=this.getLine(e.row),r=/([\\(\\[\\{])|([\\)\\]\\}])/,s=!t&&n.charAt(e.column-1),o=s&&s.match(r);o||(s=(t===undefined||t)&&n.charAt(e.column),e={row:e.row,column:e.column+1},o=s&&s.match(r));if(!o)return null;var u=new i(e.row,e.column-1,e.row,e.column),a=o[1]?this.$findClosingBracket(o[1],e):this.$findOpeningBracket(o[2],e);if(!a)return[u];var f=new i(a.row,a.column,a.row,a.column+1);return[u,f]},this.$brackets={\")\":\"(\",\"(\":\")\",\"]\":\"[\",\"[\":\"]\",\"{\":\"}\",\"}\":\"{\",\"<\":\">\",\">\":\"<\"},this.$findOpeningBracket=function(e,t,n){var i=this.$brackets[e],s=1,o=new r(this,t.row,t.column),u=o.getCurrentToken();u||(u=o.stepForward());if(!u)return;n||(n=new RegExp(\"(\\\\.?\"+u.type.replace(\".\",\"\\\\.\").replace(\"rparen\",\".paren\").replace(/\\b(?:end)\\b/,\"(?:start|begin|end)\")+\")+\"));var a=t.column-o.getCurrentTokenColumn()-2,f=u.value;for(;;){while(a>=0){var l=f.charAt(a);if(l==i){s-=1;if(s==0)return{row:o.getCurrentTokenRow(),column:a+o.getCurrentTokenColumn()}}else l==e&&(s+=1);a-=1}do u=o.stepBackward();while(u&&!n.test(u.type));if(u==null)break;f=u.value,a=f.length-1}return null},this.$findClosingBracket=function(e,t,n){var i=this.$brackets[e],s=1,o=new r(this,t.row,t.column),u=o.getCurrentToken();u||(u=o.stepForward());if(!u)return;n||(n=new RegExp(\"(\\\\.?\"+u.type.replace(\".\",\"\\\\.\").replace(\"lparen\",\".paren\").replace(/\\b(?:start|begin)\\b/,\"(?:start|begin|end)\")+\")+\"));var a=t.column-o.getCurrentTokenColumn();for(;;){var f=u.value,l=f.length;while(a<l){var c=f.charAt(a);if(c==i){s-=1;if(s==0)return{row:o.getCurrentTokenRow(),column:a+o.getCurrentTokenColumn()}}else c==e&&(s+=1);a+=1}do u=o.stepForward();while(u&&!n.test(u.type));if(u==null)break;a=0}return null},this.getMatchingTags=function(e){var t=new r(this,e.row,e.column),n=this.$findTagName(t);if(!n)return;var i=t.stepBackward();return i.value===\"<\"?this.$findClosingTag(t,n):this.$findOpeningTag(t,n)},this.$findTagName=function(e){var t=e.getCurrentToken(),n=!1,r=!1;if(t&&t.type.indexOf(\"tag-name\")===-1)do r?t=e.stepBackward():t=e.stepForward(),t&&(t.value===\"/>\"?r=!0:t.type.indexOf(\"tag-name\")!==-1&&(n=!0));while(t&&!n);return t},this.$findClosingTag=function(e,t){var n,r=t.value,s=t.value,o=0,u=new i(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+1);t=e.stepForward();var a=new i(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+t.value.length),f=!1;do{n=t,t=e.stepForward();if(t){if(t.value===\">\"&&!f){var l=new i(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+1);f=!0}if(t.type.indexOf(\"tag-name\")!==-1){r=t.value;if(s===r)if(n.value===\"<\")o++;else if(n.value===\"</\"){o--;if(o<0){e.stepBackward();var c=new i(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+2);t=e.stepForward();var h=new i(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+t.value.length);t=e.stepForward();if(!t||t.value!==\">\")return;var p=new i(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+1)}}}else if(s===r&&t.value===\"/>\"){o--;if(o<0)var c=new i(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+2),h=c,p=h,l=new i(a.end.row,a.end.column,a.end.row,a.end.column+1)}}}while(t&&o>=0);if(u&&l&&c&&p&&a&&h)return{openTag:new i(u.start.row,u.start.column,l.end.row,l.end.column),closeTag:new i(c.start.row,c.start.column,p.end.row,p.end.column),openTagName:a,closeTagName:h}},this.$findOpeningTag=function(e,t){var n=e.getCurrentToken(),r=t.value,s=0,o=e.getCurrentTokenRow(),u=e.getCurrentTokenColumn(),a=u+2,f=new i(o,u,o,a);e.stepForward();var l=new i(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+t.value.length);t=e.stepForward();if(!t||t.value!==\">\")return;var c=new i(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+1);e.stepBackward(),e.stepBackward();do{t=n,o=e.getCurrentTokenRow(),u=e.getCurrentTokenColumn(),a=u+t.value.length,n=e.stepBackward();if(t)if(t.type.indexOf(\"tag-name\")!==-1){if(r===t.value)if(n.value===\"<\"){s++;if(s>0){var h=new i(o,u,o,a),p=new i(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+1);do t=e.stepForward();while(t&&t.value!==\">\");var d=new i(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+1)}}else n.value===\"</\"&&s--}else if(t.value===\"/>\"){var v=0,m=n;while(m){if(m.type.indexOf(\"tag-name\")!==-1&&m.value===r){s--;break}if(m.value===\"<\")break;m=e.stepBackward(),v++}for(var g=0;g<v;g++)e.stepForward()}}while(n&&s<=0);if(p&&d&&f&&c&&h&&l)return{openTag:new i(p.start.row,p.start.column,d.end.row,d.end.column),closeTag:new i(f.start.row,f.start.column,c.end.row,c.end.column),openTagName:h,closeTagName:l}}}var r=e(\"../token_iterator\").TokenIterator,i=e(\"../range\").Range;t.BracketMatch=s}),ace.define(\"ace/edit_session\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/lang\",\"ace/bidihandler\",\"ace/config\",\"ace/lib/event_emitter\",\"ace/selection\",\"ace/mode/text\",\"ace/range\",\"ace/document\",\"ace/background_tokenizer\",\"ace/search_highlight\",\"ace/edit_session/folding\",\"ace/edit_session/bracket_match\"],function(e,t,n){\"use strict\";var r=e(\"./lib/oop\"),i=e(\"./lib/lang\"),s=e(\"./bidihandler\").BidiHandler,o=e(\"./config\"),u=e(\"./lib/event_emitter\").EventEmitter,a=e(\"./selection\").Selection,f=e(\"./mode/text\").Mode,l=e(\"./range\").Range,c=e(\"./document\").Document,h=e(\"./background_tokenizer\").BackgroundTokenizer,p=e(\"./search_highlight\").SearchHighlight,d=function(e,t){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id=\"session\"+ ++d.$uid,this.$foldData.toString=function(){return this.join(\"\\n\")},this.bgTokenizer=new h((new f).getTokenizer(),this);var n=this;this.bgTokenizer.on(\"update\",function(e){n._signal(\"tokenizerUpdate\",e)}),this.on(\"changeFold\",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this);if(typeof e!=\"object\"||!e.getLine)e=new c(e);this.setDocument(e),this.selection=new a(this),this.$bidiHandler=new s(this),o.resetOptions(this),this.setMode(t),o._signal(\"session\",this),this.destroyed=!1};d.$uid=0,function(){function v(e){return e<4352?!1:e>=4352&&e<=4447||e>=4515&&e<=4519||e>=4602&&e<=4607||e>=9001&&e<=9002||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12283||e>=12288&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12589||e>=12593&&e<=12686||e>=12688&&e<=12730||e>=12736&&e<=12771||e>=12784&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=13054||e>=13056&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=55216&&e<=55238||e>=55243&&e<=55291||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=65281&&e<=65376||e>=65504&&e<=65510}r.implement(this,u),this.setDocument=function(e){this.doc&&this.doc.off(\"change\",this.$onChange),this.doc=e,e.on(\"change\",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(e){if(!e){this.$docRowCache=[],this.$screenRowCache=[];return}var t=this.$docRowCache.length,n=this.$getRowCacheIndex(this.$docRowCache,e)+1;t>n&&(this.$docRowCache.splice(n,t),this.$screenRowCache.splice(n,t))},this.$getRowCacheIndex=function(e,t){var n=0,r=e.length-1;while(n<=r){var i=n+r>>1,s=e[i];if(t>s)n=i+1;else{if(!(t<s))return i;r=i-1}}return n-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},this.onChangeFold=function(e){var t=e.data;this.$resetRowCache(t.start.row)},this.onChange=function(e){this.$modified=!0,this.$bidiHandler.onChange(e),this.$resetRowCache(e.start.row);var t=this.$updateInternalDataOnChange(e);!this.$fromUndo&&this.$undoManager&&(t&&t.length&&(this.$undoManager.add({action:\"removeFolds\",folds:t},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(e,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(e),this._signal(\"change\",e)},this.setValue=function(e){this.doc.setValue(e),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(e){return this.bgTokenizer.getState(e)},this.getTokens=function(e){return this.bgTokenizer.getTokens(e)},this.getTokenAt=function(e,t){var n=this.bgTokenizer.getTokens(e),r,i=0;if(t==null){var s=n.length-1;i=this.getLine(e).length}else for(var s=0;s<n.length;s++){i+=n[s].value.length;if(i>=t)break}return r=n[s],r?(r.index=s,r.start=i-r.value.length,r):null},this.setUndoManager=function(e){this.$undoManager=e,this.$informUndoManager&&this.$informUndoManager.cancel();if(e){var t=this;e.addSession(this),this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.mergeUndoDeltas=!1},this.$informUndoManager=i.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?i.stringRepeat(\" \",this.getTabSize()):\"\t\"},this.setUseSoftTabs=function(e){this.setOption(\"useSoftTabs\",e)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(e){this.setOption(\"tabSize\",e)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize===0},this.setNavigateWithinSoftTabs=function(e){this.setOption(\"navigateWithinSoftTabs\",e)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(e){this.setOption(\"overwrite\",e)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=\"\"),this.$decorations[e]+=\" \"+t,this._signal(\"changeBreakpoint\",{})},this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||\"\").replace(\" \"+t,\"\"),this._signal(\"changeBreakpoint\",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]=\"ace_breakpoint\";this._signal(\"changeBreakpoint\",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal(\"changeBreakpoint\",{})},this.setBreakpoint=function(e,t){t===undefined&&(t=\"ace_breakpoint\"),t?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._signal(\"changeBreakpoint\",{})},this.clearBreakpoint=function(e){delete this.$breakpoints[e],this._signal(\"changeBreakpoint\",{})},this.addMarker=function(e,t,n,r){var i=this.$markerId++,s={range:e,type:n||\"line\",renderer:typeof n==\"function\"?n:null,clazz:t,inFront:!!r,id:i};return r?(this.$frontMarkers[i]=s,this._signal(\"changeFrontMarker\")):(this.$backMarkers[i]=s,this._signal(\"changeBackMarker\")),i},this.addDynamicMarker=function(e,t){if(!e.update)return;var n=this.$markerId++;return e.id=n,e.inFront=!!t,t?(this.$frontMarkers[n]=e,this._signal(\"changeFrontMarker\")):(this.$backMarkers[n]=e,this._signal(\"changeBackMarker\")),e},this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];if(!t)return;var n=t.inFront?this.$frontMarkers:this.$backMarkers;delete n[e],this._signal(t.inFront?\"changeFrontMarker\":\"changeBackMarker\")},this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},this.highlight=function(e){if(!this.$searchHighlight){var t=new p(null,\"ace_selected-word\",\"text\");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)},this.highlightLines=function(e,t,n,r){typeof t!=\"number\"&&(n=t,t=e),n||(n=\"ace_step\");var i=new l(e,0,t,Infinity);return i.id=this.addMarker(i,n,\"fullLine\",r),i},this.setAnnotations=function(e){this.$annotations=e,this._signal(\"changeAnnotation\",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(e){var t=e.match(/^.*?(\\r?\\n)/m);t?this.$autoNewLine=t[1]:this.$autoNewLine=\"\\n\"},this.getWordRange=function(e,t){var n=this.getLine(e),r=!1;t>0&&(r=!!n.charAt(t-1).match(this.tokenRe)),r||(r=!!n.charAt(t).match(this.tokenRe));if(r)var i=this.tokenRe;else if(/^\\s+$/.test(n.slice(t-1,t+1)))var i=/\\s/;else var i=this.nonTokenRe;var s=t;if(s>0){do s--;while(s>=0&&n.charAt(s).match(i));s++}var o=t;while(o<n.length&&n.charAt(o).match(i))o++;return new l(e,s,e,o)},this.getAWordRange=function(e,t){var n=this.getWordRange(e,t),r=this.getLine(n.end.row);while(r.charAt(n.end.column).match(/[ \\t]/))n.end.column+=1;return n},this.setNewLineMode=function(e){this.doc.setNewLineMode(e)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(e){this.setOption(\"useWorker\",e)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first),this._signal(\"tokenizerUpdate\",e)},this.$modes=o.$modes,this.$mode=null,this.$modeId=null,this.setMode=function(e,t){if(e&&typeof e==\"object\"){if(e.getTokenizer)return this.$onChangeMode(e);var n=e,r=n.path}else r=e||\"ace/mode/text\";this.$modes[\"ace/mode/text\"]||(this.$modes[\"ace/mode/text\"]=new f);if(this.$modes[r]&&!n){this.$onChangeMode(this.$modes[r]),t&&t();return}this.$modeId=r,o.loadModule([\"mode\",r],function(e){if(this.$modeId!==r)return t&&t();this.$modes[r]&&!n?this.$onChangeMode(this.$modes[r]):e&&e.Mode&&(e=new e.Mode(n),n||(this.$modes[r]=e,e.$id=r),this.$onChangeMode(e)),t&&t()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes[\"ace/mode/text\"],!0)},this.$onChangeMode=function(e,t){t||(this.$modeId=e.$id);if(this.$mode===e)return;var n=this.$mode;this.$mode=e,this.$stopWorker(),this.$useWorker&&this.$startWorker();var r=e.getTokenizer();if(r.on!==undefined){var i=this.onReloadTokenizer.bind(this);r.on(\"update\",i)}this.bgTokenizer.setTokenizer(r),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,t||(e.attachToSession&&e.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(e.foldingRules),this.bgTokenizer.start(0),this._emit(\"changeMode\",{oldMode:n,mode:e}))},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(e){o.warn(\"Could not load worker\",e),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(e){if(this.$scrollTop===e||isNaN(e))return;this.$scrollTop=e,this._signal(\"changeScrollTop\",e)},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(e){if(this.$scrollLeft===e||isNaN(e))return;this.$scrollLeft=e,this._signal(\"changeScrollLeft\",e)},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var e=0;return this.lineWidgets.forEach(function(t){t&&t.screenWidth>e&&(e=t.screenWidth)}),this.lineWidgetWidth=e},this.$computeWidth=function(e){if(this.$modified||e){this.$modified=!1;if(this.$useWrapMode)return this.screenWidth=this.$wrapLimit;var t=this.doc.getAllLines(),n=this.$rowLengthCache,r=0,i=0,s=this.$foldData[i],o=s?s.start.row:Infinity,u=t.length;for(var a=0;a<u;a++){if(a>o){a=s.end.row+1;if(a>=u)break;s=this.$foldData[i++],o=s?s.start.row:Infinity}n[a]==null&&(n[a]=this.$getStringScreenWidth(t[a])[0]),n[a]>r&&(r=n[a])}this.screenWidth=r}},this.getLine=function(e){return this.doc.getLine(e)},this.getLines=function(e,t){return this.doc.getLines(e,t)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},this.insert=function(e,t){return this.doc.insert(e,t)},this.remove=function(e){return this.doc.remove(e)},this.removeFullLines=function(e,t){return this.doc.removeFullLines(e,t)},this.undoChanges=function(e,t){if(!e.length)return;this.$fromUndo=!0;for(var n=e.length-1;n!=-1;n--){var r=e[n];r.action==\"insert\"||r.action==\"remove\"?this.doc.revertDelta(r):r.folds&&this.addFolds(r.folds)}!t&&this.$undoSelect&&(e.selectionBefore?this.selection.fromJSON(e.selectionBefore):this.selection.setRange(this.$getUndoSelection(e,!0))),this.$fromUndo=!1},this.redoChanges=function(e,t){if(!e.length)return;this.$fromUndo=!0;for(var n=0;n<e.length;n++){var r=e[n];(r.action==\"insert\"||r.action==\"remove\")&&this.doc.$safeApplyDelta(r)}!t&&this.$undoSelect&&(e.selectionAfter?this.selection.fromJSON(e.selectionAfter):this.selection.setRange(this.$getUndoSelection(e,!1))),this.$fromUndo=!1},this.setUndoSelect=function(e){this.$undoSelect=e},this.$getUndoSelection=function(e,t){function n(e){return t?e.action!==\"insert\":e.action===\"insert\"}var r,i;for(var s=0;s<e.length;s++){var o=e[s];if(!o.start)continue;if(!r){n(o)?r=l.fromPoints(o.start,o.end):r=l.fromPoints(o.start,o.start);continue}n(o)?(i=o.start,r.compare(i.row,i.column)==-1&&r.setStart(i),i=o.end,r.compare(i.row,i.column)==1&&r.setEnd(i)):(i=o.start,r.compare(i.row,i.column)==-1&&(r=l.fromPoints(o.start,o.start)))}return r},this.replace=function(e,t){return this.doc.replace(e,t)},this.moveText=function(e,t,n){var r=this.getTextRange(e),i=this.getFoldsInRange(e),s=l.fromPoints(t,t);if(!n){this.remove(e);var o=e.start.row-e.end.row,u=o?-e.end.column:e.start.column-e.end.column;u&&(s.start.row==e.end.row&&s.start.column>e.end.column&&(s.start.column+=u),s.end.row==e.end.row&&s.end.column>e.end.column&&(s.end.column+=u)),o&&s.start.row>=e.end.row&&(s.start.row+=o,s.end.row+=o)}s.end=this.insert(s.start,r);if(i.length){var a=e.start,f=s.start,o=f.row-a.row,u=f.column-a.column;this.addFolds(i.map(function(e){return e=e.clone(),e.start.row==a.row&&(e.start.column+=u),e.end.row==a.row&&(e.end.column+=u),e.start.row+=o,e.end.row+=o,e}))}return s},this.indentRows=function(e,t,n){n=n.replace(/\\t/g,this.getTabString());for(var r=e;r<=t;r++)this.doc.insertInLine({row:r,column:0},n)},this.outdentRows=function(e){var t=e.collapseRows(),n=new l(0,0,0,0),r=this.getTabSize();for(var i=t.start.row;i<=t.end.row;++i){var s=this.getLine(i);n.start.row=i,n.end.row=i;for(var o=0;o<r;++o)if(s.charAt(o)!=\" \")break;o<r&&s.charAt(o)==\"\t\"?(n.start.column=o,n.end.column=o+1):(n.start.column=0,n.end.column=o),this.remove(n)}},this.$moveLines=function(e,t,n){e=this.getRowFoldStart(e),t=this.getRowFoldEnd(t);if(n<0){var r=this.getRowFoldStart(e+n);if(r<0)return 0;var i=r-e}else if(n>0){var r=this.getRowFoldEnd(t+n);if(r>this.doc.getLength()-1)return 0;var i=r-t}else{e=this.$clipRowToDocument(e),t=this.$clipRowToDocument(t);var i=t-e+1}var s=new l(e,0,t,Number.MAX_VALUE),o=this.getFoldsInRange(s).map(function(e){return e=e.clone(),e.start.row+=i,e.end.row+=i,e}),u=n==0?this.doc.getLines(e,t):this.doc.removeFullLines(e,t);return this.doc.insertFullLines(e+i,u),o.length&&this.addFolds(o),i},this.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)},this.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)},this.duplicateLines=function(e,t){return this.$moveLines(e,t,0)},this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},this.$clipColumnToRow=function(e,t){return t<0?0:Math.min(this.doc.getLine(e).length,t)},this.$clipPositionToDocument=function(e,t){t=Math.max(0,t);if(e<0)e=0,t=0;else{var n=this.doc.getLength();e>=n?(e=n-1,t=this.doc.getLine(n-1).length):t=Math.min(this.doc.getLine(e).length,t)}return{row:e,column:t}},this.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(e){if(e!=this.$useWrapMode){this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0);if(e){var t=this.getLength();this.$wrapData=Array(t),this.$updateWrapData(0,t-1)}this._signal(\"changeWrapMode\")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(e,t){if(this.$wrapLimitRange.min!==e||this.$wrapLimitRange.max!==t)this.$wrapLimitRange={min:e,max:t},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal(\"changeWrapMode\")},this.adjustWrapLimit=function(e,t){var n=this.$wrapLimitRange;n.max<0&&(n={min:t,max:t});var r=this.$constrainWrapLimit(e,n.min,n.max);return r!=this.$wrapLimit&&r>1?(this.$wrapLimit=r,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal(\"changeWrapLimit\")),!0):!1},this.$constrainWrapLimit=function(e,t,n){return t&&(e=Math.max(t,e)),n&&(e=Math.min(n,e)),e},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(e){this.setWrapLimitRange(e,e)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(e){var t=this.$useWrapMode,n=e.action,r=e.start,i=e.end,s=r.row,o=i.row,u=o-s,a=null;this.$updating=!0;if(u!=0)if(n===\"remove\"){this[t?\"$wrapData\":\"$rowLengthCache\"].splice(s,u);var f=this.$foldData;a=this.getFoldsInRange(e),this.removeFolds(a);var l=this.getFoldLine(i.row),c=0;if(l){l.addRemoveChars(i.row,i.column,r.column-i.column),l.shiftRow(-u);var h=this.getFoldLine(s);h&&h!==l&&(h.merge(l),l=h),c=f.indexOf(l)+1}for(c;c<f.length;c++){var l=f[c];l.start.row>=i.row&&l.shiftRow(-u)}o=s}else{var p=Array(u);p.unshift(s,0);var d=t?this.$wrapData:this.$rowLengthCache;d.splice.apply(d,p);var f=this.$foldData,l=this.getFoldLine(s),c=0;if(l){var v=l.range.compareInside(r.row,r.column);v==0?(l=l.split(r.row,r.column),l&&(l.shiftRow(u),l.addRemoveChars(o,0,i.column-r.column))):v==-1&&(l.addRemoveChars(s,0,i.column-r.column),l.shiftRow(u)),c=f.indexOf(l)+1}for(c;c<f.length;c++){var l=f[c];l.start.row>=s&&l.shiftRow(u)}}else{u=Math.abs(e.start.column-e.end.column),n===\"remove\"&&(a=this.getFoldsInRange(e),this.removeFolds(a),u=-u);var l=this.getFoldLine(s);l&&l.addRemoveChars(s,r.column,u)}return t&&this.$wrapData.length!=this.doc.getLength()&&console.error(\"doc.getLength() and $wrapData.length have to be the same!\"),this.$updating=!1,t?this.$updateWrapData(s,o):this.$updateRowLengthCache(s,o),a},this.$updateRowLengthCache=function(e,t,n){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},this.$updateWrapData=function(e,t){var r=this.doc.getAllLines(),i=this.getTabSize(),o=this.$wrapData,u=this.$wrapLimit,a,f,l=e;t=Math.min(t,r.length-1);while(l<=t)f=this.getFoldLine(l,f),f?(a=[],f.walk(function(e,t,i,o){var u;if(e!=null){u=this.$getDisplayTokens(e,a.length),u[0]=n;for(var f=1;f<u.length;f++)u[f]=s}else u=this.$getDisplayTokens(r[t].substring(o,i),a.length);a=a.concat(u)}.bind(this),f.end.row,r[f.end.row].length+1),o[f.start.row]=this.$computeWrapSplits(a,u,i),l=f.end.row+1):(a=this.$getDisplayTokens(r[l]),o[l]=this.$computeWrapSplits(a,u,i),l++)};var e=1,t=2,n=3,s=4,a=9,c=10,h=11,d=12;this.$computeWrapSplits=function(e,r,i){function g(){var t=0;if(m===0)return t;if(v)for(var n=0;n<e.length;n++){var r=e[n];if(r==c)t+=1;else{if(r!=h){if(r==d)continue;break}t+=i}}return p&&v!==!1&&(t+=i),Math.min(t,m)}function y(t){var n=t-f;for(var r=f;r<t;r++){var i=e[r];if(i===12||i===2)n-=1}o.length||(b=g(),o.indent=b),l+=n,o.push(l),f=t}if(e.length==0)return[];var o=[],u=e.length,f=0,l=0,p=this.$wrapAsCode,v=this.$indentedSoftWrap,m=r<=Math.max(2*i,8)||v===!1?0:Math.floor(r/2),b=0;while(u-f>r-b){var w=f+r-b;if(e[w-1]>=c&&e[w]>=c){y(w);continue}if(e[w]==n||e[w]==s){for(w;w!=f-1;w--)if(e[w]==n)break;if(w>f){y(w);continue}w=f+r;for(w;w<e.length;w++)if(e[w]!=s)break;if(w==e.length)break;y(w);continue}var E=Math.max(w-(r-(r>>2)),f-1);while(w>E&&e[w]<n)w--;if(p){while(w>E&&e[w]<n)w--;while(w>E&&e[w]==a)w--}else while(w>E&&e[w]<c)w--;if(w>E){y(++w);continue}w=f+r,e[w]==t&&w--,y(w-b)}return o},this.$getDisplayTokens=function(n,r){var i=[],s;r=r||0;for(var o=0;o<n.length;o++){var u=n.charCodeAt(o);if(u==9){s=this.getScreenTabSize(i.length+r),i.push(h);for(var f=1;f<s;f++)i.push(d)}else u==32?i.push(c):u>39&&u<48||u>57&&u<64?i.push(a):u>=4352&&v(u)?i.push(e,t):i.push(e)}return i},this.$getStringScreenWidth=function(e,t,n){if(t==0)return[0,0];t==null&&(t=Infinity),n=n||0;var r,i;for(i=0;i<e.length;i++){r=e.charCodeAt(i),r==9?n+=this.getScreenTabSize(n):r>=4352&&v(r)?n+=2:n+=1;if(n>t)break}return[n,i]},this.lineWidgets=null,this.getRowLength=function(e){var t=1;return this.lineWidgets&&(t+=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0),!this.$useWrapMode||!this.$wrapData[e]?t:this.$wrapData[e].length+t},this.getRowLineCount=function(e){return!this.$useWrapMode||!this.$wrapData[e]?1:this.$wrapData[e].length+1},this.getRowWrapIndent=function(e){if(this.$useWrapMode){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE),n=this.$wrapData[t.row];return n.length&&n[0]<t.column?n.indent:0}return 0},this.getScreenLastRowColumn=function(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(t.row,t.column)},this.getDocumentLastRowColumn=function(e,t){var n=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(e,t){var n=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(e){return this.$useWrapMode?this.$wrapData[e]:undefined},this.getScreenTabSize=function(e){return this.$tabSize-(e%this.$tabSize|0)},this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},this.screenToDocumentPosition=function(e,t,n){if(e<0)return{row:0,column:0};var r,i=0,s=0,o,u=0,a=0,f=this.$screenRowCache,l=this.$getRowCacheIndex(f,e),c=f.length;if(c&&l>=0)var u=f[l],i=this.$docRowCache[l],h=e>f[c-1];else var h=!c;var p=this.getLength()-1,d=this.getNextFoldLine(i),v=d?d.start.row:Infinity;while(u<=e){a=this.getRowLength(i);if(u+a>e||i>=p)break;u+=a,i++,i>v&&(i=d.end.row+1,d=this.getNextFoldLine(i,d),v=d?d.start.row:Infinity),h&&(this.$docRowCache.push(i),this.$screenRowCache.push(u))}if(d&&d.start.row<=i)r=this.getFoldDisplayLine(d),i=d.start.row;else{if(u+a<=e||i>p)return{row:p,column:this.getLine(p).length};r=this.getLine(i),d=null}var m=0,g=Math.floor(e-u);if(this.$useWrapMode){var y=this.$wrapData[i];y&&(o=y[g],g>0&&y.length&&(m=y.indent,s=y[g-1]||y[y.length-1],r=r.substring(s)))}return n!==undefined&&this.$bidiHandler.isBidiRow(u+g,i,g)&&(t=this.$bidiHandler.offsetToCol(n)),s+=this.$getStringScreenWidth(r,t-m)[1],this.$useWrapMode&&s>=o&&(s=o-1),d?d.idxToPosition(s):{row:i,column:s}},this.documentToScreenPosition=function(e,t){if(typeof t==\"undefined\")var n=this.$clipPositionToDocument(e.row,e.column);else n=this.$clipPositionToDocument(e,t);e=n.row,t=n.column;var r=0,i=null,s=null;s=this.getFoldAt(e,t,1),s&&(e=s.start.row,t=s.start.column);var o,u=0,a=this.$docRowCache,f=this.$getRowCacheIndex(a,e),l=a.length;if(l&&f>=0)var u=a[f],r=this.$screenRowCache[f],c=e>a[l-1];else var c=!l;var h=this.getNextFoldLine(u),p=h?h.start.row:Infinity;while(u<e){if(u>=p){o=h.end.row+1;if(o>e)break;h=this.getNextFoldLine(o,h),p=h?h.start.row:Infinity}else o=u+1;r+=this.getRowLength(u),u=o,c&&(this.$docRowCache.push(u),this.$screenRowCache.push(r))}var d=\"\";h&&u>=p?(d=this.getFoldDisplayLine(h,e,t),i=h.start.row):(d=this.getLine(e).substring(0,t),i=e);var v=0;if(this.$useWrapMode){var m=this.$wrapData[i];if(m){var g=0;while(d.length>=m[g])r++,g++;d=d.substring(m[g-1]||0,d.length),v=g>0?m.indent:0}}return this.lineWidgets&&this.lineWidgets[u]&&this.lineWidgets[u].rowsAbove&&(r+=this.lineWidgets[u].rowsAbove),{row:r,column:v+this.$getStringScreenWidth(d)[0]}},this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},this.getScreenLength=function(){var e=0,t=null;if(!this.$useWrapMode){e=this.getLength();var n=this.$foldData;for(var r=0;r<n.length;r++)t=n[r],e-=t.end.row-t.start.row}else{var i=this.$wrapData.length,s=0,r=0,t=this.$foldData[r++],o=t?t.start.row:Infinity;while(s<i){var u=this.$wrapData[s];e+=u?u.length+1:1,s++,s>o&&(s=t.end.row+1,t=this.$foldData[r++],o=t?t.start.row:Infinity)}}return this.lineWidgets&&(e+=this.$getWidgetScreenLength()),e},this.$setFontMetrics=function(e){if(!this.$enableVarChar)return;this.$getStringScreenWidth=function(t,n,r){if(n===0)return[0,0];n||(n=Infinity),r=r||0;var i,s;for(s=0;s<t.length;s++){i=t.charAt(s),i===\"\t\"?r+=this.getScreenTabSize(r):r+=e.getCharacterWidth(i);if(r>n)break}return[r,s]}},this.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off(\"change\",this.$onChange),this.selection.detach()},this.isFullWidth=v}.call(d.prototype),e(\"./edit_session/folding\").Folding.call(d.prototype),e(\"./edit_session/bracket_match\").BracketMatch.call(d.prototype),o.defineOptions(d.prototype,\"session\",{wrap:{set:function(e){!e||e==\"off\"?e=!1:e==\"free\"?e=!0:e==\"printMargin\"?e=-1:typeof e==\"string\"&&(e=parseInt(e,10)||!1);if(this.$wrap==e)return;this.$wrap=e;if(!e)this.setUseWrapMode(!1);else{var t=typeof e==\"number\"?e:null;this.setWrapLimitRange(t,t),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?\"printMargin\":this.getWrapLimitRange().min?this.$wrap:\"free\":\"off\"},handlesSet:!0},wrapMethod:{set:function(e){e=e==\"auto\"?this.$mode.type!=\"text\":e!=\"text\",e!=this.$wrapAsCode&&(this.$wrapAsCode=e,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:\"auto\"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal(\"changeBreakpoint\")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(e){e=parseInt(e),e>0&&this.$tabSize!==e&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._signal(\"changeTabSize\"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(e){this.setFoldStyle(e)},handlesSet:!0},overwrite:{set:function(e){this._signal(\"changeOverwrite\")},initialValue:!1},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(e){this.setMode(e)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=d}),ace.define(\"ace/search\",[\"require\",\"exports\",\"module\",\"ace/lib/lang\",\"ace/lib/oop\",\"ace/range\"],function(e,t,n){\"use strict\";function u(e,t){function n(e){return/\\w/.test(e)||t.regExp?\"\\\\b\":\"\"}return n(e[0])+e+n(e[e.length-1])}var r=e(\"./lib/lang\"),i=e(\"./lib/oop\"),s=e(\"./range\").Range,o=function(){this.$options={}};(function(){this.set=function(e){return i.mixin(this.$options,e),this},this.getOptions=function(){return r.copyObject(this.$options)},this.setOptions=function(e){this.$options=e},this.find=function(e){var t=this.$options,n=this.$matchIterator(e,t);if(!n)return!1;var r=null;return n.forEach(function(e,n,i,o){return r=new s(e,n,i,o),n==o&&t.start&&t.start.start&&t.skipCurrent!=0&&r.isEqual(t.start)?(r=null,!1):!0}),r},this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var n=t.range,i=n?e.getLines(n.start.row,n.end.row):e.doc.getAllLines(),o=[],u=t.re;if(t.$isMultiLine){var a=u.length,f=i.length-a,l;e:for(var c=u.offset||0;c<=f;c++){for(var h=0;h<a;h++)if(i[c+h].search(u[h])==-1)continue e;var p=i[c],d=i[c+a-1],v=p.length-p.match(u[0])[0].length,m=d.match(u[a-1])[0].length;if(l&&l.end.row===c&&l.end.column>v)continue;o.push(l=new s(c,v,c+a-1,m)),a>2&&(c=c+a-2)}}else for(var g=0;g<i.length;g++){var y=r.getMatchOffsets(i[g],u);for(var h=0;h<y.length;h++){var b=y[h];o.push(new s(g,b.offset,g,b.offset+b.length))}}if(n){var w=n.start.column,E=n.end.column,g=0,h=o.length-1;while(g<h&&o[g].start.column<w&&o[g].start.row==0)g++;var S=n.end.row-n.start.row;while(g<h&&o[h].end.column>E&&o[h].end.row==S)h--;o=o.slice(g,h+1);for(g=0,h=o.length;g<h;g++)o[g].start.row+=n.start.row,o[g].end.row+=n.start.row}return o},this.replace=function(e,t){var n=this.$options,r=this.$assembleRegExp(n);if(n.$isMultiLine)return t;if(!r)return;var i=r.exec(e);if(!i||i[0].length!=e.length)return null;t=e.replace(r,t);if(n.preserveCase){t=t.split(\"\");for(var s=Math.min(e.length,e.length);s--;){var o=e[s];o&&o.toLowerCase()!=o?t[s]=t[s].toUpperCase():t[s]=t[s].toLowerCase()}t=t.join(\"\")}return t},this.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var n=e.needle;if(!e.needle)return e.re=!1;e.regExp||(n=r.escapeRegExp(n)),e.wholeWord&&(n=u(n,e));var i=e.caseSensitive?\"gm\":\"gmi\";e.$isMultiLine=!t&&/[\\n\\r]/.test(n);if(e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(n,i);try{var s=new RegExp(n,i)}catch(o){s=!1}return e.re=s},this.$assembleMultilineRegExp=function(e,t){var n=e.replace(/\\r\\n|\\r|\\n/g,\"$\\n^\").split(\"\\n\"),r=[];for(var i=0;i<n.length;i++)try{r.push(new RegExp(n[i],t))}catch(s){return!1}return r},this.$matchIterator=function(e,t){var n=this.$assembleRegExp(t);if(!n)return!1;var r=t.backwards==1,i=t.skipCurrent!=0,s=t.range,o=t.start;o||(o=s?s[r?\"end\":\"start\"]:e.selection.getRange()),o.start&&(o=o[i!=r?\"end\":\"start\"]);var u=s?s.start.row:0,a=s?s.end.row:e.getLength()-1;if(r)var f=function(e){var n=o.row;if(c(n,o.column,e))return;for(n--;n>=u;n--)if(c(n,Number.MAX_VALUE,e))return;if(t.wrap==0)return;for(n=a,u=o.row;n>=u;n--)if(c(n,Number.MAX_VALUE,e))return};else var f=function(e){var n=o.row;if(c(n,o.column,e))return;for(n+=1;n<=a;n++)if(c(n,0,e))return;if(t.wrap==0)return;for(n=u,a=o.row;n<=a;n++)if(c(n,0,e))return};if(t.$isMultiLine)var l=n.length,c=function(t,i,s){var o=r?t-l+1:t;if(o<0||o+l>e.getLength())return;var u=e.getLine(o),a=u.search(n[0]);if(!r&&a<i||a===-1)return;for(var f=1;f<l;f++){u=e.getLine(o+f);if(u.search(n[f])==-1)return}var c=u.match(n[l-1])[0].length;if(r&&c>i)return;if(s(o,a,o+l-1,c))return!0};else if(r)var c=function(t,r,i){var s=e.getLine(t),o=[],u,a=0;n.lastIndex=0;while(u=n.exec(s)){var f=u[0].length;a=u.index;if(!f){if(a>=s.length)break;n.lastIndex=a+=1}if(u.index+f>r)break;o.push(u.index,f)}for(var l=o.length-1;l>=0;l-=2){var c=o[l-1],f=o[l];if(i(t,c,t,c+f))return!0}};else var c=function(t,r,i){var s=e.getLine(t),o,u;n.lastIndex=r;while(u=n.exec(s)){var a=u[0].length;o=u.index;if(i(t,o,t,o+a))return!0;if(!a){n.lastIndex=o+=1;if(o>=s.length)return!1}}};return{forEach:f}}}).call(o.prototype),t.Search=o}),ace.define(\"ace/keyboard/hash_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/keys\",\"ace/lib/useragent\"],function(e,t,n){\"use strict\";function o(e,t){this.platform=t||(i.isMac?\"mac\":\"win\"),this.commands={},this.commandKeyBinding={},this.addCommands(e),this.$singleCommand=!0}function u(e,t){o.call(this,e,t),this.$singleCommand=!1}var r=e(\"../lib/keys\"),i=e(\"../lib/useragent\"),s=r.KEY_MODS;u.prototype=o.prototype,function(){function e(e){return typeof e==\"object\"&&e.bindKey&&e.bindKey.position||(e.isDefault?-100:0)}this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),this.commands[e.name]=e,e.bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e,t){var n=e&&(typeof e==\"string\"?e:e.name);e=this.commands[n],t||delete this.commands[n];var r=this.commandKeyBinding;for(var i in r){var s=r[i];if(s==e)delete r[i];else if(Array.isArray(s)){var o=s.indexOf(e);o!=-1&&(s.splice(o,1),s.length==1&&(r[i]=s[0]))}}},this.bindKey=function(e,t,n){typeof e==\"object\"&&e&&(n==undefined&&(n=e.position),e=e[this.platform]);if(!e)return;if(typeof t==\"function\")return this.addCommand({exec:t,bindKey:e,name:t.name||e});e.split(\"|\").forEach(function(e){var r=\"\";if(e.indexOf(\" \")!=-1){var i=e.split(/\\s+/);e=i.pop(),i.forEach(function(e){var t=this.parseKeys(e),n=s[t.hashId]+t.key;r+=(r?\" \":\"\")+n,this._addCommandToBinding(r,\"chainKeys\")},this),r+=\" \"}var o=this.parseKeys(e),u=s[o.hashId]+o.key;this._addCommandToBinding(r+u,t,n)},this)},this._addCommandToBinding=function(t,n,r){var i=this.commandKeyBinding,s;if(!n)delete i[t];else if(!i[t]||this.$singleCommand)i[t]=n;else{Array.isArray(i[t])?(s=i[t].indexOf(n))!=-1&&i[t].splice(s,1):i[t]=[i[t]],typeof r!=\"number\"&&(r=e(n));var o=i[t];for(s=0;s<o.length;s++){var u=o[s],a=e(u);if(a>r)break}o.splice(s,0,n)}},this.addCommands=function(e){e&&Object.keys(e).forEach(function(t){var n=e[t];if(!n)return;if(typeof n==\"string\")return this.bindKey(n,t);typeof n==\"function\"&&(n={exec:n});if(typeof n!=\"object\")return;n.name||(n.name=t),this.addCommand(n)},this)},this.removeCommands=function(e){Object.keys(e).forEach(function(t){this.removeCommand(e[t])},this)},this.bindKeys=function(e){Object.keys(e).forEach(function(t){this.bindKey(t,e[t])},this)},this._buildKeyHash=function(e){this.bindKey(e.bindKey,e)},this.parseKeys=function(e){var t=e.toLowerCase().split(/[\\-\\+]([\\-\\+])?/).filter(function(e){return e}),n=t.pop(),i=r[n];if(r.FUNCTION_KEYS[i])n=r.FUNCTION_KEYS[i].toLowerCase();else{if(!t.length)return{key:n,hashId:-1};if(t.length==1&&t[0]==\"shift\")return{key:n.toUpperCase(),hashId:-1}}var s=0;for(var o=t.length;o--;){var u=r.KEY_MODS[t[o]];if(u==null)return typeof console!=\"undefined\"&&console.error(\"invalid modifier \"+t[o]+\" in \"+e),!1;s|=u}return{key:n,hashId:s}},this.findKeyCommand=function(t,n){var r=s[t]+n;return this.commandKeyBinding[r]},this.handleKeyboard=function(e,t,n,r){if(r<0)return;var i=s[t]+n,o=this.commandKeyBinding[i];e.$keyChain&&(e.$keyChain+=\" \"+i,o=this.commandKeyBinding[e.$keyChain]||o);if(o)if(o==\"chainKeys\"||o[o.length-1]==\"chainKeys\")return e.$keyChain=e.$keyChain||i,{command:\"null\"};if(e.$keyChain)if(!!t&&t!=4||n.length!=1){if(t==-1||r>0)e.$keyChain=\"\"}else e.$keyChain=e.$keyChain.slice(0,-i.length-1);return{command:o}},this.getStatusText=function(e,t){return t.$keyChain||\"\"}}.call(o.prototype),t.HashHandler=o,t.MultiHashHandler=u}),ace.define(\"ace/commands/command_manager\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/keyboard/hash_handler\",\"ace/lib/event_emitter\"],function(e,t,n){\"use strict\";var r=e(\"../lib/oop\"),i=e(\"../keyboard/hash_handler\").MultiHashHandler,s=e(\"../lib/event_emitter\").EventEmitter,o=function(e,t){i.call(this,t,e),this.byName=this.commands,this.setDefaultHandler(\"exec\",function(e){return e.args?e.command.exec(e.editor,e.args,e.event,!1):e.command.exec(e.editor,{},e.event,!0)})};r.inherits(o,i),function(){r.implement(this,s),this.exec=function(e,t,n){if(Array.isArray(e)){for(var r=e.length;r--;)if(this.exec(e[r],t,n))return!0;return!1}typeof e==\"string\"&&(e=this.commands[e]);if(!e)return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;if(this.$checkCommandState!=0&&e.isAvailable&&!e.isAvailable(t))return!1;var i={editor:t,command:e,args:n};return i.returnValue=this._emit(\"exec\",i),this._signal(\"afterExec\",i),i.returnValue===!1?!1:!0},this.toggleRecording=function(e){if(this.$inReplay)return;return e&&e._emit(\"changeStatus\"),this.recording?(this.macro.pop(),this.off(\"exec\",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on(\"exec\",this.$addCommandToMacro),this.recording=!0)},this.replay=function(e){if(this.$inReplay||!this.macro)return;if(this.recording)return this.toggleRecording(e);try{this.$inReplay=!0,this.macro.forEach(function(t){typeof t==\"string\"?this.exec(t,e):this.exec(t[0],e,t[1])},this)}finally{this.$inReplay=!1}},this.trimMacro=function(e){return e.map(function(e){return typeof e[0]!=\"string\"&&(e[0]=e[0].name),e[1]||(e=e[0]),e})}}.call(o.prototype),t.CommandManager=o}),ace.define(\"ace/commands/default_commands\",[\"require\",\"exports\",\"module\",\"ace/lib/lang\",\"ace/config\",\"ace/range\"],function(e,t,n){\"use strict\";function o(e,t){return{win:e,mac:t}}var r=e(\"../lib/lang\"),i=e(\"../config\"),s=e(\"../range\").Range;t.commands=[{name:\"showSettingsMenu\",description:\"Show settings menu\",bindKey:o(\"Ctrl-,\",\"Command-,\"),exec:function(e){i.loadModule(\"ace/ext/settings_menu\",function(t){t.init(e),e.showSettingsMenu()})},readOnly:!0},{name:\"goToNextError\",description:\"Go to next error\",bindKey:o(\"Alt-E\",\"F4\"),exec:function(e){i.loadModule(\"./ext/error_marker\",function(t){t.showErrorMarker(e,1)})},scrollIntoView:\"animate\",readOnly:!0},{name:\"goToPreviousError\",description:\"Go to previous error\",bindKey:o(\"Alt-Shift-E\",\"Shift-F4\"),exec:function(e){i.loadModule(\"./ext/error_marker\",function(t){t.showErrorMarker(e,-1)})},scrollIntoView:\"animate\",readOnly:!0},{name:\"selectall\",description:\"Select all\",bindKey:o(\"Ctrl-A\",\"Command-A\"),exec:function(e){e.selectAll()},readOnly:!0},{name:\"centerselection\",description:\"Center selection\",bindKey:o(null,\"Ctrl-L\"),exec:function(e){e.centerSelection()},readOnly:!0},{name:\"gotoline\",description:\"Go to line...\",bindKey:o(\"Ctrl-L\",\"Command-L\"),exec:function(e,t){typeof t==\"number\"&&!isNaN(t)&&e.gotoLine(t),e.prompt({$type:\"gotoLine\"})},readOnly:!0},{name:\"fold\",bindKey:o(\"Alt-L|Ctrl-F1\",\"Command-Alt-L|Command-F1\"),exec:function(e){e.session.toggleFold(!1)},multiSelectAction:\"forEach\",scrollIntoView:\"center\",readOnly:!0},{name:\"unfold\",bindKey:o(\"Alt-Shift-L|Ctrl-Shift-F1\",\"Command-Alt-Shift-L|Command-Shift-F1\"),exec:function(e){e.session.toggleFold(!0)},multiSelectAction:\"forEach\",scrollIntoView:\"center\",readOnly:!0},{name:\"toggleFoldWidget\",description:\"Toggle fold widget\",bindKey:o(\"F2\",\"F2\"),exec:function(e){e.session.toggleFoldWidget()},multiSelectAction:\"forEach\",scrollIntoView:\"center\",readOnly:!0},{name:\"toggleParentFoldWidget\",description:\"Toggle parent fold widget\",bindKey:o(\"Alt-F2\",\"Alt-F2\"),exec:function(e){e.session.toggleFoldWidget(!0)},multiSelectAction:\"forEach\",scrollIntoView:\"center\",readOnly:!0},{name:\"foldall\",description:\"Fold all\",bindKey:o(null,\"Ctrl-Command-Option-0\"),exec:function(e){e.session.foldAll()},scrollIntoView:\"center\",readOnly:!0},{name:\"foldAllComments\",description:\"Fold all comments\",bindKey:o(null,\"Ctrl-Command-Option-0\"),exec:function(e){e.session.foldAllComments()},scrollIntoView:\"center\",readOnly:!0},{name:\"foldOther\",description:\"Fold other\",bindKey:o(\"Alt-0\",\"Command-Option-0\"),exec:function(e){e.session.foldAll(),e.session.unfold(e.selection.getAllRanges())},scrollIntoView:\"center\",readOnly:!0},{name:\"unfoldall\",description:\"Unfold all\",bindKey:o(\"Alt-Shift-0\",\"Command-Option-Shift-0\"),exec:function(e){e.session.unfold()},scrollIntoView:\"center\",readOnly:!0},{name:\"findnext\",description:\"Find next\",bindKey:o(\"Ctrl-K\",\"Command-G\"),exec:function(e){e.findNext()},multiSelectAction:\"forEach\",scrollIntoView:\"center\",readOnly:!0},{name:\"findprevious\",description:\"Find previous\",bindKey:o(\"Ctrl-Shift-K\",\"Command-Shift-G\"),exec:function(e){e.findPrevious()},multiSelectAction:\"forEach\",scrollIntoView:\"center\",readOnly:!0},{name:\"selectOrFindNext\",description:\"Select or find next\",bindKey:o(\"Alt-K\",\"Ctrl-G\"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findNext()},readOnly:!0},{name:\"selectOrFindPrevious\",description:\"Select or find previous\",bindKey:o(\"Alt-Shift-K\",\"Ctrl-Shift-G\"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findPrevious()},readOnly:!0},{name:\"find\",description:\"Find\",bindKey:o(\"Ctrl-F\",\"Command-F\"),exec:function(e){i.loadModule(\"ace/ext/searchbox\",function(t){t.Search(e)})},readOnly:!0},{name:\"overwrite\",description:\"Overwrite\",bindKey:\"Insert\",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:\"selecttostart\",description:\"Select to start\",bindKey:o(\"Ctrl-Shift-Home\",\"Command-Shift-Home|Command-Shift-Up\"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:\"forEach\",readOnly:!0,scrollIntoView:\"animate\",aceCommandGroup:\"fileJump\"},{name:\"gotostart\",description:\"Go to start\",bindKey:o(\"Ctrl-Home\",\"Command-Home|Command-Up\"),exec:function(e){e.navigateFileStart()},multiSelectAction:\"forEach\",readOnly:!0,scrollIntoView:\"animate\",aceCommandGroup:\"fileJump\"},{name:\"selectup\",description:\"Select up\",bindKey:o(\"Shift-Up\",\"Shift-Up|Ctrl-Shift-P\"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\",readOnly:!0},{name:\"golineup\",description:\"Go line up\",bindKey:o(\"Up\",\"Up|Ctrl-P\"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\",readOnly:!0},{name:\"selecttoend\",description:\"Select to end\",bindKey:o(\"Ctrl-Shift-End\",\"Command-Shift-End|Command-Shift-Down\"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:\"forEach\",readOnly:!0,scrollIntoView:\"animate\",aceCommandGroup:\"fileJump\"},{name:\"gotoend\",description:\"Go to end\",bindKey:o(\"Ctrl-End\",\"Command-End|Command-Down\"),exec:function(e){e.navigateFileEnd()},multiSelectAction:\"forEach\",readOnly:!0,scrollIntoView:\"animate\",aceCommandGroup:\"fileJump\"},{name:\"selectdown\",description:\"Select down\",bindKey:o(\"Shift-Down\",\"Shift-Down|Ctrl-Shift-N\"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\",readOnly:!0},{name:\"golinedown\",description:\"Go line down\",bindKey:o(\"Down\",\"Down|Ctrl-N\"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\",readOnly:!0},{name:\"selectwordleft\",description:\"Select word left\",bindKey:o(\"Ctrl-Shift-Left\",\"Option-Shift-Left\"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\",readOnly:!0},{name:\"gotowordleft\",description:\"Go to word left\",bindKey:o(\"Ctrl-Left\",\"Option-Left\"),exec:function(e){e.navigateWordLeft()},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\",readOnly:!0},{name:\"selecttolinestart\",description:\"Select to line start\",bindKey:o(\"Alt-Shift-Left\",\"Command-Shift-Left|Ctrl-Shift-A\"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\",readOnly:!0},{name:\"gotolinestart\",description:\"Go to line start\",bindKey:o(\"Alt-Left|Home\",\"Command-Left|Home|Ctrl-A\"),exec:function(e){e.navigateLineStart()},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\",readOnly:!0},{name:\"selectleft\",description:\"Select left\",bindKey:o(\"Shift-Left\",\"Shift-Left|Ctrl-Shift-B\"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\",readOnly:!0},{name:\"gotoleft\",description:\"Go to left\",bindKey:o(\"Left\",\"Left|Ctrl-B\"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\",readOnly:!0},{name:\"selectwordright\",description:\"Select word right\",bindKey:o(\"Ctrl-Shift-Right\",\"Option-Shift-Right\"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\",readOnly:!0},{name:\"gotowordright\",description:\"Go to word right\",bindKey:o(\"Ctrl-Right\",\"Option-Right\"),exec:function(e){e.navigateWordRight()},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\",readOnly:!0},{name:\"selecttolineend\",description:\"Select to line end\",bindKey:o(\"Alt-Shift-Right\",\"Command-Shift-Right|Shift-End|Ctrl-Shift-E\"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\",readOnly:!0},{name:\"gotolineend\",description:\"Go to line end\",bindKey:o(\"Alt-Right|End\",\"Command-Right|End|Ctrl-E\"),exec:function(e){e.navigateLineEnd()},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\",readOnly:!0},{name:\"selectright\",description:\"Select right\",bindKey:o(\"Shift-Right\",\"Shift-Right\"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\",readOnly:!0},{name:\"gotoright\",description:\"Go to right\",bindKey:o(\"Right\",\"Right|Ctrl-F\"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\",readOnly:!0},{name:\"selectpagedown\",description:\"Select page down\",bindKey:\"Shift-PageDown\",exec:function(e){e.selectPageDown()},readOnly:!0},{name:\"pagedown\",description:\"Page down\",bindKey:o(null,\"Option-PageDown\"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:\"gotopagedown\",description:\"Go to page down\",bindKey:o(\"PageDown\",\"PageDown|Ctrl-V\"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:\"selectpageup\",description:\"Select page up\",bindKey:\"Shift-PageUp\",exec:function(e){e.selectPageUp()},readOnly:!0},{name:\"pageup\",description:\"Page up\",bindKey:o(null,\"Option-PageUp\"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:\"gotopageup\",description:\"Go to page up\",bindKey:\"PageUp\",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:\"scrollup\",description:\"Scroll up\",bindKey:o(\"Ctrl-Up\",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:\"scrolldown\",description:\"Scroll down\",bindKey:o(\"Ctrl-Down\",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:\"selectlinestart\",description:\"Select line start\",bindKey:\"Shift-Home\",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\",readOnly:!0},{name:\"selectlineend\",description:\"Select line end\",bindKey:\"Shift-End\",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\",readOnly:!0},{name:\"togglerecording\",description:\"Toggle recording\",bindKey:o(\"Ctrl-Alt-E\",\"Command-Option-E\"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:\"replaymacro\",description:\"Replay macro\",bindKey:o(\"Ctrl-Shift-E\",\"Command-Shift-E\"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:\"jumptomatching\",description:\"Jump to matching\",bindKey:o(\"Ctrl-\\\\|Ctrl-P\",\"Command-\\\\\"),exec:function(e){e.jumpToMatching()},multiSelectAction:\"forEach\",scrollIntoView:\"animate\",readOnly:!0},{name:\"selecttomatching\",description:\"Select to matching\",bindKey:o(\"Ctrl-Shift-\\\\|Ctrl-Shift-P\",\"Command-Shift-\\\\\"),exec:function(e){e.jumpToMatching(!0)},multiSelectAction:\"forEach\",scrollIntoView:\"animate\",readOnly:!0},{name:\"expandToMatching\",description:\"Expand to matching\",bindKey:o(\"Ctrl-Shift-M\",\"Ctrl-Shift-M\"),exec:function(e){e.jumpToMatching(!0,!0)},multiSelectAction:\"forEach\",scrollIntoView:\"animate\",readOnly:!0},{name:\"passKeysToBrowser\",description:\"Pass keys to browser\",bindKey:o(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:\"copy\",description:\"Copy\",exec:function(e){},readOnly:!0},{name:\"cut\",description:\"Cut\",exec:function(e){var t=e.$copyWithEmptySelection&&e.selection.isEmpty(),n=t?e.selection.getLineRange():e.selection.getRange();e._emit(\"cut\",n),n.isEmpty()||e.session.remove(n),e.clearSelection()},scrollIntoView:\"cursor\",multiSelectAction:\"forEach\"},{name:\"paste\",description:\"Paste\",exec:function(e,t){e.$handlePaste(t)},scrollIntoView:\"cursor\"},{name:\"removeline\",description:\"Remove line\",bindKey:o(\"Ctrl-D\",\"Command-D\"),exec:function(e){e.removeLines()},scrollIntoView:\"cursor\",multiSelectAction:\"forEachLine\"},{name:\"duplicateSelection\",description:\"Duplicate selection\",bindKey:o(\"Ctrl-Shift-D\",\"Command-Shift-D\"),exec:function(e){e.duplicateSelection()},scrollIntoView:\"cursor\",multiSelectAction:\"forEach\"},{name:\"sortlines\",description:\"Sort lines\",bindKey:o(\"Ctrl-Alt-S\",\"Command-Alt-S\"),exec:function(e){e.sortLines()},scrollIntoView:\"selection\",multiSelectAction:\"forEachLine\"},{name:\"togglecomment\",description:\"Toggle comment\",bindKey:o(\"Ctrl-/\",\"Command-/\"),exec:function(e){e.toggleCommentLines()},multiSelectAction:\"forEachLine\",scrollIntoView:\"selectionPart\"},{name:\"toggleBlockComment\",description:\"Toggle block comment\",bindKey:o(\"Ctrl-Shift-/\",\"Command-Shift-/\"),exec:function(e){e.toggleBlockComment()},multiSelectAction:\"forEach\",scrollIntoView:\"selectionPart\"},{name:\"modifyNumberUp\",description:\"Modify number up\",bindKey:o(\"Ctrl-Shift-Up\",\"Alt-Shift-Up\"),exec:function(e){e.modifyNumber(1)},scrollIntoView:\"cursor\",multiSelectAction:\"forEach\"},{name:\"modifyNumberDown\",description:\"Modify number down\",bindKey:o(\"Ctrl-Shift-Down\",\"Alt-Shift-Down\"),exec:function(e){e.modifyNumber(-1)},scrollIntoView:\"cursor\",multiSelectAction:\"forEach\"},{name:\"replace\",description:\"Replace\",bindKey:o(\"Ctrl-H\",\"Command-Option-F\"),exec:function(e){i.loadModule(\"ace/ext/searchbox\",function(t){t.Search(e,!0)})}},{name:\"undo\",description:\"Undo\",bindKey:o(\"Ctrl-Z\",\"Command-Z\"),exec:function(e){e.undo()}},{name:\"redo\",description:\"Redo\",bindKey:o(\"Ctrl-Shift-Z|Ctrl-Y\",\"Command-Shift-Z|Command-Y\"),exec:function(e){e.redo()}},{name:\"copylinesup\",description:\"Copy lines up\",bindKey:o(\"Alt-Shift-Up\",\"Command-Option-Up\"),exec:function(e){e.copyLinesUp()},scrollIntoView:\"cursor\"},{name:\"movelinesup\",description:\"Move lines up\",bindKey:o(\"Alt-Up\",\"Option-Up\"),exec:function(e){e.moveLinesUp()},scrollIntoView:\"cursor\"},{name:\"copylinesdown\",description:\"Copy lines down\",bindKey:o(\"Alt-Shift-Down\",\"Command-Option-Down\"),exec:function(e){e.copyLinesDown()},scrollIntoView:\"cursor\"},{name:\"movelinesdown\",description:\"Move lines down\",bindKey:o(\"Alt-Down\",\"Option-Down\"),exec:function(e){e.moveLinesDown()},scrollIntoView:\"cursor\"},{name:\"del\",description:\"Delete\",bindKey:o(\"Delete\",\"Delete|Ctrl-D|Shift-Delete\"),exec:function(e){e.remove(\"right\")},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\"},{name:\"backspace\",description:\"Backspace\",bindKey:o(\"Shift-Backspace|Backspace\",\"Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H\"),exec:function(e){e.remove(\"left\")},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\"},{name:\"cut_or_delete\",description:\"Cut or delete\",bindKey:o(\"Shift-Delete\",null),exec:function(e){if(!e.selection.isEmpty())return!1;e.remove(\"left\")},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\"},{name:\"removetolinestart\",description:\"Remove to line start\",bindKey:o(\"Alt-Backspace\",\"Command-Backspace\"),exec:function(e){e.removeToLineStart()},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\"},{name:\"removetolineend\",description:\"Remove to line end\",bindKey:o(\"Alt-Delete\",\"Ctrl-K|Command-Delete\"),exec:function(e){e.removeToLineEnd()},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\"},{name:\"removetolinestarthard\",description:\"Remove to line start hard\",bindKey:o(\"Ctrl-Shift-Backspace\",null),exec:function(e){var t=e.selection.getRange();t.start.column=0,e.session.remove(t)},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\"},{name:\"removetolineendhard\",description:\"Remove to line end hard\",bindKey:o(\"Ctrl-Shift-Delete\",null),exec:function(e){var t=e.selection.getRange();t.end.column=Number.MAX_VALUE,e.session.remove(t)},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\"},{name:\"removewordleft\",description:\"Remove word left\",bindKey:o(\"Ctrl-Backspace\",\"Alt-Backspace|Ctrl-Alt-Backspace\"),exec:function(e){e.removeWordLeft()},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\"},{name:\"removewordright\",description:\"Remove word right\",bindKey:o(\"Ctrl-Delete\",\"Alt-Delete\"),exec:function(e){e.removeWordRight()},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\"},{name:\"outdent\",description:\"Outdent\",bindKey:o(\"Shift-Tab\",\"Shift-Tab\"),exec:function(e){e.blockOutdent()},multiSelectAction:\"forEach\",scrollIntoView:\"selectionPart\"},{name:\"indent\",description:\"Indent\",bindKey:o(\"Tab\",\"Tab\"),exec:function(e){e.indent()},multiSelectAction:\"forEach\",scrollIntoView:\"selectionPart\"},{name:\"blockoutdent\",description:\"Block outdent\",bindKey:o(\"Ctrl-[\",\"Ctrl-[\"),exec:function(e){e.blockOutdent()},multiSelectAction:\"forEachLine\",scrollIntoView:\"selectionPart\"},{name:\"blockindent\",description:\"Block indent\",bindKey:o(\"Ctrl-]\",\"Ctrl-]\"),exec:function(e){e.blockIndent()},multiSelectAction:\"forEachLine\",scrollIntoView:\"selectionPart\"},{name:\"insertstring\",description:\"Insert string\",exec:function(e,t){e.insert(t)},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\"},{name:\"inserttext\",description:\"Insert text\",exec:function(e,t){e.insert(r.stringRepeat(t.text||\"\",t.times||1))},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\"},{name:\"splitline\",description:\"Split line\",bindKey:o(null,\"Ctrl-O\"),exec:function(e){e.splitLine()},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\"},{name:\"transposeletters\",description:\"Transpose letters\",bindKey:o(\"Alt-Shift-X\",\"Ctrl-T\"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)},scrollIntoView:\"cursor\"},{name:\"touppercase\",description:\"To uppercase\",bindKey:o(\"Ctrl-U\",\"Ctrl-U\"),exec:function(e){e.toUpperCase()},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\"},{name:\"tolowercase\",description:\"To lowercase\",bindKey:o(\"Ctrl-Shift-U\",\"Ctrl-Shift-U\"),exec:function(e){e.toLowerCase()},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\"},{name:\"autoindent\",description:\"Auto Indent\",bindKey:o(null,null),exec:function(e){e.autoIndent()},multiSelectAction:\"forEachLine\",scrollIntoView:\"animate\"},{name:\"expandtoline\",description:\"Expand to line\",bindKey:o(\"Ctrl-Shift-L\",\"Command-Shift-L\"),exec:function(e){var t=e.selection.getRange();t.start.column=t.end.column=0,t.end.row++,e.selection.setRange(t,!1)},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\",readOnly:!0},{name:\"openlink\",bindKey:o(\"Ctrl+F3\",\"F3\"),exec:function(e){e.openLink()}},{name:\"joinlines\",description:\"Join lines\",bindKey:o(null,null),exec:function(e){var t=e.selection.isBackwards(),n=t?e.selection.getSelectionLead():e.selection.getSelectionAnchor(),i=t?e.selection.getSelectionAnchor():e.selection.getSelectionLead(),o=e.session.doc.getLine(n.row).length,u=e.session.doc.getTextRange(e.selection.getRange()),a=u.replace(/\\n\\s*/,\" \").length,f=e.session.doc.getLine(n.row);for(var l=n.row+1;l<=i.row+1;l++){var c=r.stringTrimLeft(r.stringTrimRight(e.session.doc.getLine(l)));c.length!==0&&(c=\" \"+c),f+=c}i.row+1<e.session.doc.getLength()-1&&(f+=e.session.doc.getNewLineCharacter()),e.clearSelection(),e.session.doc.replace(new s(n.row,0,i.row+2,0),f),a>0?(e.selection.moveCursorTo(n.row,n.column),e.selection.selectTo(n.row,n.column+a)):(o=e.session.doc.getLine(n.row).length>o?o+1:o,e.selection.moveCursorTo(n.row,o))},multiSelectAction:\"forEach\",readOnly:!0},{name:\"invertSelection\",description:\"Invert selection\",bindKey:o(null,null),exec:function(e){var t=e.session.doc.getLength()-1,n=e.session.doc.getLine(t).length,r=e.selection.rangeList.ranges,i=[];r.length<1&&(r=[e.selection.getRange()]);for(var o=0;o<r.length;o++)o==r.length-1&&(r[o].end.row!==t||r[o].end.column!==n)&&i.push(new s(r[o].end.row,r[o].end.column,t,n)),o===0?(r[o].start.row!==0||r[o].start.column!==0)&&i.push(new s(0,0,r[o].start.row,r[o].start.column)):i.push(new s(r[o-1].end.row,r[o-1].end.column,r[o].start.row,r[o].start.column));e.exitMultiSelectMode(),e.clearSelection();for(var o=0;o<i.length;o++)e.selection.addRange(i[o],!1)},readOnly:!0,scrollIntoView:\"none\"},{name:\"addLineAfter\",description:\"Add new line after the current line\",exec:function(e){e.selection.clearSelection(),e.navigateLineEnd(),e.insert(\"\\n\")},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\"},{name:\"addLineBefore\",description:\"Add new line before the current line\",exec:function(e){e.selection.clearSelection();var t=e.getCursorPosition();e.selection.moveTo(t.row-1,Number.MAX_VALUE),e.insert(\"\\n\"),t.row===0&&e.navigateUp()},multiSelectAction:\"forEach\",scrollIntoView:\"cursor\"},{name:\"openCommandPallete\",description:\"Open command palette\",bindKey:o(\"F1\",\"F1\"),exec:function(e){e.prompt({$type:\"commands\"})},readOnly:!0},{name:\"modeSelect\",description:\"Change language mode...\",bindKey:o(null,null),exec:function(e){e.prompt({$type:\"modes\"})},readOnly:!0}];for(var u=1;u<9;u++)t.commands.push({name:\"foldToLevel\"+u,description:\"Fold To Level \"+u,level:u,exec:function(e){e.session.foldToLevel(this.level)},scrollIntoView:\"center\",readOnly:!0})}),ace.define(\"ace/editor\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/lib/useragent\",\"ace/keyboard/textinput\",\"ace/mouse/mouse_handler\",\"ace/mouse/fold_handler\",\"ace/keyboard/keybinding\",\"ace/edit_session\",\"ace/search\",\"ace/range\",\"ace/lib/event_emitter\",\"ace/commands/command_manager\",\"ace/commands/default_commands\",\"ace/config\",\"ace/token_iterator\",\"ace/clipboard\"],function(e,t,n){\"use strict\";var r=this&&this.__values||function(e){var t=typeof Symbol==\"function\"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length==\"number\")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},i=e(\"./lib/oop\"),s=e(\"./lib/dom\"),o=e(\"./lib/lang\"),u=e(\"./lib/useragent\"),a=e(\"./keyboard/textinput\").TextInput,f=e(\"./mouse/mouse_handler\").MouseHandler,l=e(\"./mouse/fold_handler\").FoldHandler,c=e(\"./keyboard/keybinding\").KeyBinding,h=e(\"./edit_session\").EditSession,p=e(\"./search\").Search,d=e(\"./range\").Range,v=e(\"./lib/event_emitter\").EventEmitter,m=e(\"./commands/command_manager\").CommandManager,g=e(\"./commands/default_commands\").commands,y=e(\"./config\"),b=e(\"./token_iterator\").TokenIterator,w=e(\"./clipboard\"),E=function(e,t,n){this.$toDestroy=[];var r=e.getContainerElement();this.container=r,this.renderer=e,this.id=\"editor\"+ ++E.$uid,this.commands=new m(u.isMac?\"mac\":\"win\",g),typeof document==\"object\"&&(this.textInput=new a(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new f(this),new l(this)),this.keyBinding=new c(this),this.$search=(new p).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on(\"exec\",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=o.delayedCall(function(){this._signal(\"input\",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on(\"change\",function(e,t){t._$emitInputEvent.schedule(31)}),this.setSession(t||n&&n.session||new h(\"\")),y.resetOptions(this),n&&this.setOptions(n),y._signal(\"editor\",this)};E.$uid=0,function(){i.implement(this,v),this.$initOperationListeners=function(){this.commands.on(\"exec\",this.startOperation.bind(this),!0),this.commands.on(\"afterExec\",this.endOperation.bind(this),!0),this.$opResetTimer=o.delayedCall(this.endOperation.bind(this,!0)),this.on(\"change\",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on(\"changeSelection\",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(e){if(this.curOp){if(!e||this.curOp.command)return;this.prevOp=this.curOp}e||(this.previousCommand=null,e={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:e.command||{},args:e.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(e){if(this.curOp&&this.session){if(e&&e.returnValue===!1||!this.session)return this.curOp=null;if(e==1&&this.curOp.command&&this.curOp.command.name==\"mouse\")return;this._signal(\"beforeEndOperation\");if(!this.curOp)return;var t=this.curOp.command,n=t&&t.scrollIntoView;if(n){switch(n){case\"center-animate\":n=\"animate\";case\"center\":this.renderer.scrollCursorIntoView(null,.5);break;case\"animate\":case\"cursor\":this.renderer.scrollCursorIntoView();break;case\"selectionPart\":var r=this.selection.getRange(),i=this.renderer.layerConfig;(r.start.row>=i.lastRow||r.end.row<=i.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break;default:}n==\"animate\"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var s=this.selection.toJSON();this.curOp.selectionAfter=s,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(s),this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=[\"backspace\",\"del\",\"insertstring\"],this.$historyTracker=function(e){if(!this.$mergeUndoDeltas)return;var t=this.prevOp,n=this.$mergeableCommands,r=t.command&&e.command.name==t.command.name;if(e.command.name==\"insertstring\"){var i=e.args;this.mergeNextCommand===undefined&&(this.mergeNextCommand=!0),r=r&&this.mergeNextCommand&&(!/\\s/.test(i)||/\\s/.test(t.args)),this.mergeNextCommand=!0}else r=r&&n.indexOf(e.command.name)!==-1;this.$mergeUndoDeltas!=\"always\"&&Date.now()-this.sequenceStartTime>2e3&&(r=!1),r?this.session.mergeUndoDeltas=!0:n.indexOf(e.command.name)!==-1&&(this.sequenceStartTime=Date.now())},this.setKeyboardHandler=function(e,t){if(e&&typeof e==\"string\"&&e!=\"ace\"){this.$keybindingId=e;var n=this;y.loadModule([\"keybinding\",e],function(r){n.$keybindingId==e&&n.keyBinding.setKeyboardHandler(r&&r.handler),t&&t()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(e),t&&t()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){if(this.session==e)return;this.curOp&&this.endOperation(),this.curOp={};var t=this.session;if(t){this.session.off(\"change\",this.$onDocumentChange),this.session.off(\"changeMode\",this.$onChangeMode),this.session.off(\"tokenizerUpdate\",this.$onTokenizerUpdate),this.session.off(\"changeTabSize\",this.$onChangeTabSize),this.session.off(\"changeWrapLimit\",this.$onChangeWrapLimit),this.session.off(\"changeWrapMode\",this.$onChangeWrapMode),this.session.off(\"changeFold\",this.$onChangeFold),this.session.off(\"changeFrontMarker\",this.$onChangeFrontMarker),this.session.off(\"changeBackMarker\",this.$onChangeBackMarker),this.session.off(\"changeBreakpoint\",this.$onChangeBreakpoint),this.session.off(\"changeAnnotation\",this.$onChangeAnnotation),this.session.off(\"changeOverwrite\",this.$onCursorChange),this.session.off(\"changeScrollTop\",this.$onScrollTopChange),this.session.off(\"changeScrollLeft\",this.$onScrollLeftChange);var n=this.session.getSelection();n.off(\"changeCursor\",this.$onCursorChange),n.off(\"changeSelection\",this.$onSelectionChange)}this.session=e,e?(this.$onDocumentChange=this.onDocumentChange.bind(this),e.on(\"change\",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.on(\"changeMode\",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.on(\"tokenizerUpdate\",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.on(\"changeTabSize\",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.on(\"changeWrapLimit\",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.on(\"changeWrapMode\",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.on(\"changeFold\",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on(\"changeFrontMarker\",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on(\"changeBackMarker\",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on(\"changeBreakpoint\",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on(\"changeAnnotation\",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on(\"changeOverwrite\",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on(\"changeScrollTop\",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on(\"changeScrollLeft\",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.on(\"changeCursor\",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on(\"changeSelection\",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(e)),this._signal(\"changeSession\",{session:e,oldSession:t}),this.curOp=null,t&&t._signal(\"changeEditor\",{oldEditor:this}),e&&e._signal(\"changeEditor\",{editor:this}),e&&!e.destroyed&&e.bgTokenizer.scheduleStart()},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?t==1?this.navigateFileEnd():t==-1&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e,t){this.renderer.setTheme(e,t)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.getFontSize=function(){return this.getOption(\"fontSize\")||s.computedStyle(this.container).fontSize},this.setFontSize=function(e){this.setOption(\"fontSize\",e)},this.$highlightBrackets=function(){if(this.$highlightPending)return;var e=this;this.$highlightPending=!0,setTimeout(function(){e.$highlightPending=!1;var t=e.session;if(!t||t.destroyed)return;t.$bracketHighlight&&(t.$bracketHighlight.markerIds.forEach(function(e){t.removeMarker(e)}),t.$bracketHighlight=null);var n=e.getCursorPosition(),r=e.getKeyboardHandler(),i=r&&r.$getDirectionForHighlight&&r.$getDirectionForHighlight(e),s=t.getMatchingBracketRanges(n,i);if(!s){var o=new b(t,n.row,n.column),u=o.getCurrentToken();if(u&&/\\b(?:tag-open|tag-name)/.test(u.type)){var a=t.getMatchingTags(n);a&&(s=[a.openTagName,a.closeTagName])}}!s&&t.$mode.getMatching&&(s=t.$mode.getMatching(e.session));if(!s){e.getHighlightIndentGuides()&&e.renderer.$textLayer.$highlightIndentGuide();return}var f=\"ace_bracket\";Array.isArray(s)?s.length==1&&(f=\"ace_error_bracket\"):s=[s],s.length==2&&(d.comparePoints(s[0].end,s[1].start)==0?s=[d.fromPoints(s[0].start,s[1].end)]:d.comparePoints(s[0].start,s[1].end)==0&&(s=[d.fromPoints(s[1].start,s[0].end)])),t.$bracketHighlight={ranges:s,markerIds:s.map(function(e){return t.addMarker(e,f,\"text\")})},e.getHighlightIndentGuides()&&e.renderer.$textLayer.$highlightIndentGuide()},50)},this.focus=function(){this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(e){if(this.$isFocused)return;this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit(\"focus\",e)},this.onBlur=function(e){if(!this.$isFocused)return;this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit(\"blur\",e)},this.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},this.onDocumentChange=function(e){var t=this.session.$useWrapMode,n=e.start.row==e.end.row?e.end.row:Infinity;this.renderer.updateLines(e.start.row,n,t),this._signal(\"change\",e),this.$cursorChange()},this.onTokenizerUpdate=function(e){var t=e.data;this.renderer.updateLines(t.first,t.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this._signal(\"changeSelection\")},this.$updateHighlightActiveLine=function(){var e=this.getSession(),t;if(this.$highlightActiveLine){if(this.$selectionStyle!=\"line\"||!this.selection.isMultiLine())t=this.getCursorPosition();this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(t=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(t=!1)}if(e.$highlightLineMarker&&!t)e.removeMarker(e.$highlightLineMarker.id),e.$highlightLineMarker=null;else if(!e.$highlightLineMarker&&t){var n=new d(t.row,t.column,t.row,Infinity);n.id=e.addMarker(n,\"ace_active-line\",\"screenLine\"),e.$highlightLineMarker=n}else t&&(e.$highlightLineMarker.start.row=t.row,e.$highlightLineMarker.end.row=t.row,e.$highlightLineMarker.start.column=t.column,e._signal(\"changeBackMarker\"))},this.onSelectionChange=function(e){var t=this.session;t.$selectionMarker&&t.removeMarker(t.$selectionMarker),t.$selectionMarker=null;if(!this.selection.isEmpty()){var n=this.selection.getRange(),r=this.getSelectionStyle();t.$selectionMarker=t.addMarker(n,\"ace_selection\",r)}else this.$updateHighlightActiveLine();var i=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(i),this._signal(\"changeSelection\")},this.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(t.isEmpty()||t.isMultiLine())return;var n=t.start.column,r=t.end.column,i=e.getLine(t.start.row),s=i.substring(n,r);if(s.length>5e3||!/[\\w\\d]/.test(s))return;var o=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:s}),u=i.substring(n-1,r+1);if(!o.test(u))return;return o},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(e){this.renderer.updateText(),this._emit(\"changeMode\",e)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var e=this.getSelectedText(),t=this.session.doc.getNewLineCharacter(),n=!1;if(!e&&this.$copyWithEmptySelection){n=!0;var r=this.selection.getAllRanges();for(var i=0;i<r.length;i++){var s=r[i];if(i&&r[i-1].start.row==s.start.row)continue;e+=this.session.getLine(s.start.row)+t}}var o={text:e};return this._signal(\"copy\",o),w.lineMode=n?o.text:!1,o.text},this.onCopy=function(){this.commands.exec(\"copy\",this)},this.onCut=function(){this.commands.exec(\"cut\",this)},this.onPaste=function(e,t){var n={text:e,event:t};this.commands.exec(\"paste\",this,n)},this.$handlePaste=function(e){typeof e==\"string\"&&(e={text:e}),this._signal(\"paste\",e);var t=e.text,n=t===w.lineMode,r=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)n?r.insert({row:this.selection.lead.row,column:0},t):this.insert(t);else if(n)this.selection.rangeList.ranges.forEach(function(e){r.insert({row:e.start.row,column:0},t)});else{var i=t.split(/\\r\\n|\\r|\\n/),s=this.selection.rangeList.ranges,o=i.length==2&&(!i[0]||!i[1]);if(i.length!=s.length||o)return this.commands.exec(\"insertstring\",this,t);for(var u=s.length;u--;){var a=s[u];a.isEmpty()||r.remove(a),r.insert(a.start,i[u])}}},this.execCommand=function(e,t){return this.commands.exec(e,this,t)},this.insert=function(e,t){var n=this.session,r=n.getMode(),i=this.getCursorPosition();if(this.getBehavioursEnabled()&&!t){var s=r.transformAction(n.getState(i.row),\"insertion\",this,n,e);s&&(e!==s.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),e=s.text)}e==\"\t\"&&(e=this.session.getTabString());if(!this.selection.isEmpty()){var o=this.getSelectionRange();i=this.session.remove(o),this.clearSelection()}else if(this.session.getOverwrite()&&e.indexOf(\"\\n\")==-1){var o=new d.fromPoints(i,i);o.end.column+=e.length,this.session.remove(o)}if(e==\"\\n\"||e==\"\\r\\n\"){var u=n.getLine(i.row);if(i.column>u.search(/\\S|$/)){var a=u.substr(i.column).search(/\\S|$/);n.doc.removeInLine(i.row,i.column,i.column+a)}}this.clearSelection();var f=i.column,l=n.getState(i.row),u=n.getLine(i.row),c=r.checkOutdent(l,u,e);n.insert(i,e),s&&s.selection&&(s.selection.length==2?this.selection.setSelectionRange(new d(i.row,f+s.selection[0],i.row,f+s.selection[1])):this.selection.setSelectionRange(new d(i.row+s.selection[0],s.selection[1],i.row+s.selection[2],s.selection[3])));if(this.$enableAutoIndent){if(n.getDocument().isNewLine(e)){var h=r.getNextLineIndent(l,u.slice(0,i.column),n.getTabString());n.insert({row:i.row+1,column:0},h)}c&&r.autoOutdent(l,n,i.row)}},this.autoIndent=function(){var e=this.session,t=e.getMode(),n,r;if(this.selection.isEmpty())n=0,r=e.doc.getLength()-1;else{var i=this.getSelectionRange();n=i.start.row,r=i.end.row}var s=\"\",o=\"\",u=\"\",a,f,l,c=e.getTabString();for(var h=n;h<=r;h++)h>0&&(s=e.getState(h-1),o=e.getLine(h-1),u=t.getNextLineIndent(s,o,c)),a=e.getLine(h),f=t.$getIndent(a),u!==f&&(f.length>0&&(l=new d(h,0,h,f.length),e.remove(l)),u.length>0&&e.insert({row:h,column:0},u)),t.autoOutdent(s,e,h)},this.onTextInput=function(e,t){if(!t)return this.keyBinding.onTextInput(e);this.startOperation({command:{name:\"insertstring\"}});var n=this.applyComposition.bind(this,e,t);this.selection.rangeCount?this.forEachSelection(n):n(),this.endOperation()},this.applyComposition=function(e,t){if(t.extendLeft||t.extendRight){var n=this.selection.getRange();n.start.column-=t.extendLeft,n.end.column+=t.extendRight,n.start.column<0&&(n.start.row--,n.start.column+=this.session.getLine(n.start.row).length+1),this.selection.setRange(n),!e&&!n.isEmpty()&&this.remove()}(e||!this.selection.isEmpty())&&this.insert(e,!0);if(t.restoreStart||t.restoreEnd){var n=this.selection.getRange();n.start.column-=t.restoreStart,n.end.column-=t.restoreEnd,this.selection.setRange(n)}},this.onCommandKey=function(e,t,n){return this.keyBinding.onCommandKey(e,t,n)},this.setOverwrite=function(e){this.session.setOverwrite(e)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(e){this.setOption(\"scrollSpeed\",e)},this.getScrollSpeed=function(){return this.getOption(\"scrollSpeed\")},this.setDragDelay=function(e){this.setOption(\"dragDelay\",e)},this.getDragDelay=function(){return this.getOption(\"dragDelay\")},this.setSelectionStyle=function(e){this.setOption(\"selectionStyle\",e)},this.getSelectionStyle=function(){return this.getOption(\"selectionStyle\")},this.setHighlightActiveLine=function(e){this.setOption(\"highlightActiveLine\",e)},this.getHighlightActiveLine=function(){return this.getOption(\"highlightActiveLine\")},this.setHighlightGutterLine=function(e){this.setOption(\"highlightGutterLine\",e)},this.getHighlightGutterLine=function(){return this.getOption(\"highlightGutterLine\")},this.setHighlightSelectedWord=function(e){this.setOption(\"highlightSelectedWord\",e)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setHighlightIndentGuides=function(e){this.renderer.setHighlightIndentGuides(e)},this.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(e){this.setOption(\"readOnly\",e)},this.getReadOnly=function(){return this.getOption(\"readOnly\")},this.setBehavioursEnabled=function(e){this.setOption(\"behavioursEnabled\",e)},this.getBehavioursEnabled=function(){return this.getOption(\"behavioursEnabled\")},this.setWrapBehavioursEnabled=function(e){this.setOption(\"wrapBehavioursEnabled\",e)},this.getWrapBehavioursEnabled=function(){return this.getOption(\"wrapBehavioursEnabled\")},this.setShowFoldWidgets=function(e){this.setOption(\"showFoldWidgets\",e)},this.getShowFoldWidgets=function(){return this.getOption(\"showFoldWidgets\")},this.setFadeFoldWidgets=function(e){this.setOption(\"fadeFoldWidgets\",e)},this.getFadeFoldWidgets=function(){return this.getOption(\"fadeFoldWidgets\")},this.remove=function(e){this.selection.isEmpty()&&(e==\"left\"?this.selection.selectLeft():this.selection.selectRight());var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,r=n.getState(t.start.row),i=n.getMode().transformAction(r,\"deletion\",this,n,t);if(t.end.column===0){var s=n.getTextRange(t);if(s[s.length-1]==\"\\n\"){var o=n.getLine(t.end.row);/^\\s+$/.test(o)&&(t.end.column=o.length)}}i&&(t=i)}this.session.remove(t),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert(\"\\n\"),this.moveCursorToPosition(e)},this.transposeLetters=function(){if(!this.selection.isEmpty())return;var e=this.getCursorPosition(),t=e.column;if(t===0)return;var n=this.session.getLine(e.row),r,i;t<n.length?(r=n.charAt(t)+n.charAt(t-1),i=new d(e.row,t-1,e.row,t+1)):(r=n.charAt(t-1)+n.charAt(t-2),i=new d(e.row,t-2,e.row,t)),this.session.replace(i,r),this.session.selection.moveToPosition(i.end)},this.toLowerCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toLowerCase()),this.selection.setSelectionRange(e)},this.toUpperCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toUpperCase()),this.selection.setSelectionRange(e)},this.indent=function(){var e=this.session,t=this.getSelectionRange();if(t.start.row<t.end.row){var n=this.$getSelectedRows();e.indentRows(n.first,n.last,\"\t\");return}if(t.start.column<t.end.column){var r=e.getTextRange(t);if(!/^\\s+$/.test(r)){var n=this.$getSelectedRows();e.indentRows(n.first,n.last,\"\t\");return}}var i=e.getLine(t.start.row),s=t.start,u=e.getTabSize(),a=e.documentToScreenColumn(s.row,s.column);if(this.session.getUseSoftTabs())var f=u-a%u,l=o.stringRepeat(\" \",f);else{var f=a%u;while(i[t.start.column-1]==\" \"&&f)t.start.column--,f--;this.selection.setSelectionRange(t),l=\"\t\"}return this.insert(l)},this.blockIndent=function(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,\"\t\")},this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},this.sortLines=function(){var e=this.$getSelectedRows(),t=this.session,n=[];for(var r=e.first;r<=e.last;r++)n.push(t.getLine(r));n.sort(function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0});var i=new d(0,0,0,0);for(var r=e.first;r<=e.last;r++){var s=t.getLine(r);i.start.row=r,i.end.row=r,i.end.column=s.length,t.replace(i,n[r-e.first])}},this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},this.toggleBlockComment=function(){var e=this.getCursorPosition(),t=this.session.getState(e.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,n,e)},this.getNumberAt=function(e,t){var n=/[\\-]?[0-9]+(?:\\.[0-9]+)?/g;n.lastIndex=0;var r=this.session.getLine(e);while(n.lastIndex<t){var i=n.exec(r);if(i.index<=t&&i.index+i[0].length>=t){var s={value:i[0],start:i.index,end:i.index+i[0].length};return s}}return null},this.modifyNumber=function(e){var t=this.selection.getCursor().row,n=this.selection.getCursor().column,r=new d(t,n-1,t,n),i=this.session.getTextRange(r);if(!isNaN(parseFloat(i))&&isFinite(i)){var s=this.getNumberAt(t,n);if(s){var o=s.value.indexOf(\".\")>=0?s.start+s.value.indexOf(\".\")+1:s.end,u=s.start+s.value.length-o,a=parseFloat(s.value);a*=Math.pow(10,u),o!==s.end&&n<o?e*=Math.pow(10,s.end-n-1):e*=Math.pow(10,s.end-n),a+=e,a/=Math.pow(10,u);var f=a.toFixed(u),l=new d(t,s.start,t,s.end);this.session.replace(l,f),this.moveCursorTo(t,Math.max(s.start+1,n+f.length-s.value.length))}}else this.toggleWord()},this.$toggleWordPairs=[[\"first\",\"last\"],[\"true\",\"false\"],[\"yes\",\"no\"],[\"width\",\"height\"],[\"top\",\"bottom\"],[\"right\",\"left\"],[\"on\",\"off\"],[\"x\",\"y\"],[\"get\",\"set\"],[\"max\",\"min\"],[\"horizontal\",\"vertical\"],[\"show\",\"hide\"],[\"add\",\"remove\"],[\"up\",\"down\"],[\"before\",\"after\"],[\"even\",\"odd\"],[\"in\",\"out\"],[\"inside\",\"outside\"],[\"next\",\"previous\"],[\"increase\",\"decrease\"],[\"attach\",\"detach\"],[\"&&\",\"||\"],[\"==\",\"!=\"]],this.toggleWord=function(){var e=this.selection.getCursor().row,t=this.selection.getCursor().column;this.selection.selectWord();var n=this.getSelectedText(),r=this.selection.getWordRange().start.column,i=n.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,\"$1 \").split(/\\s/),s=t-r-1;s<0&&(s=0);var u=0,a=0,f=this;n.match(/[A-Za-z0-9_]+/)&&i.forEach(function(t,i){a=u+t.length,s>=u&&s<=a&&(n=t,f.selection.clearSelection(),f.moveCursorTo(e,u+r),f.selection.selectTo(e,a+r)),u=a});var l=this.$toggleWordPairs,c;for(var h=0;h<l.length;h++){var p=l[h];for(var d=0;d<=1;d++){var v=+!d,m=n.match(new RegExp(\"^\\\\s?_?(\"+o.escapeRegExp(p[d])+\")\\\\s?$\",\"i\"));if(m){var g=n.match(new RegExp(\"([_]|^|\\\\s)(\"+o.escapeRegExp(m[1])+\")($|\\\\s)\",\"g\"));g&&(c=n.replace(new RegExp(o.escapeRegExp(p[d]),\"i\"),function(e){var t=p[v];return e.toUpperCase()==e?t=t.toUpperCase():e.charAt(0).toUpperCase()==e.charAt(0)&&(t=t.substr(0,0)+p[v].charAt(0).toUpperCase()+t.substr(1)),t}),this.insert(c),c=\"\")}}}},this.findLinkAt=function(e,t){var n,i,s=this.session.getLine(e),o=s.split(/((?:https?|ftp):\\/\\/[\\S]+)/),u=t;u<0&&(u=0);var a=0,f=0,l;try{for(var c=r(o),h=c.next();!h.done;h=c.next()){var p=h.value;f=a+p.length;if(u>=a&&u<=f&&p.match(/((?:https?|ftp):\\/\\/[\\S]+)/)){l=p.replace(/[\\s:.,'\";}\\]]+$/,\"\");break}a=f}}catch(d){n={error:d}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return l},this.openLink=function(){var e=this.selection.getCursor(),t=this.findLinkAt(e.row,e.column);return t&&window.open(t,\"_blank\"),t!=null},this.removeLines=function(){var e=this.$getSelectedRows();this.session.removeFullLines(e.first,e.last),this.clearSelection()},this.duplicateSelection=function(){var e=this.selection,t=this.session,n=e.getRange(),r=e.isBackwards();if(n.isEmpty()){var i=n.start.row;t.duplicateLines(i,i)}else{var s=r?n.start:n.end,o=t.insert(s,t.getTextRange(n),!1);n.start=s,n.end=o,e.setSelectionRange(n,r)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(e,t,n){return this.session.moveText(e,t,n)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(e,t){var n,r,i=this.selection;if(!i.inMultiSelectMode||this.inVirtualSelectionMode){var s=i.toOrientedRange();n=this.$getSelectedRows(s),r=this.session.$moveLines(n.first,n.last,t?0:e),t&&e==-1&&(r=0),s.moveBy(r,0),i.fromOrientedRange(s)}else{var o=i.rangeList.ranges;i.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;var u=0,a=0,f=o.length;for(var l=0;l<f;l++){var c=l;o[l].moveBy(u,0),n=this.$getSelectedRows(o[l]);var h=n.first,p=n.last;while(++l<f){a&&o[l].moveBy(a,0);var d=this.$getSelectedRows(o[l]);if(t&&d.first!=p)break;if(!t&&d.first>p+1)break;p=d.last}l--,u=this.session.$moveLines(h,p,t?0:e),t&&e==-1&&(c=l+1);while(c<=l)o[c].moveBy(u,0),c++;t||(u=0),a+=u}i.fromOrientedRange(i.ranges[0]),i.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(e){return e=(e||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}},this.onCompositionStart=function(e){this.renderer.showComposition(e)},this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(e,t){var n=this.renderer,r=this.renderer.layerConfig,i=e*Math.floor(r.height/r.lineHeight);t===!0?this.selection.$moveSelection(function(){this.moveCursorBy(i,0)}):t===!1&&(this.selection.moveCursorBy(i,0),this.selection.clearSelection());var s=n.scrollTop;n.scrollBy(0,i*r.lineHeight),t!=null&&n.scrollCursorIntoView(null,.5),n.animateScrolling(s)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(e){this.renderer.scrollToRow(e)},this.scrollToLine=function(e,t,n,r){this.renderer.scrollToLine(e,t,n,r)},this.centerSelection=function(){var e=this.getSelectionRange(),t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(t,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},this.jumpToMatching=function(e,t){var n=this.getCursorPosition(),r=new b(this.session,n.row,n.column),i=r.getCurrentToken(),s=0;i&&i.type.indexOf(\"tag-name\")!==-1&&(i=r.stepBackward());var o=i||r.stepForward();if(!o)return;var u,a=!1,f={},l=n.column-o.start,c,h={\")\":\"(\",\"(\":\"(\",\"]\":\"[\",\"[\":\"[\",\"{\":\"{\",\"}\":\"{\"};do{if(o.value.match(/[{}()\\[\\]]/g))for(;l<o.value.length&&!a;l++){if(!h[o.value[l]])continue;c=h[o.value[l]]+\".\"+o.type.replace(\"rparen\",\"lparen\"),isNaN(f[c])&&(f[c]=0);switch(o.value[l]){case\"(\":case\"[\":case\"{\":f[c]++;break;case\")\":case\"]\":case\"}\":f[c]--,f[c]===-1&&(u=\"bracket\",a=!0)}}else o.type.indexOf(\"tag-name\")!==-1&&(isNaN(f[o.value])&&(f[o.value]=0),i.value===\"<\"&&s>1?f[o.value]++:i.value===\"</\"&&f[o.value]--,f[o.value]===-1&&(u=\"tag\",a=!0));a||(i=o,s++,o=r.stepForward(),l=0)}while(o&&!a);if(!u)return;var p,v;if(u===\"bracket\"){p=this.session.getBracketRange(n);if(!p){p=new d(r.getCurrentTokenRow(),r.getCurrentTokenColumn()+l-1,r.getCurrentTokenRow(),r.getCurrentTokenColumn()+l-1),v=p.start;if(t||v.row===n.row&&Math.abs(v.column-n.column)<2)p=this.session.getBracketRange(v)}}else if(u===\"tag\"){if(!o||o.type.indexOf(\"tag-name\")===-1)return;p=new d(r.getCurrentTokenRow(),r.getCurrentTokenColumn()-2,r.getCurrentTokenRow(),r.getCurrentTokenColumn()-2);if(p.compare(n.row,n.column)===0){var m=this.session.getMatchingTags(n);m&&(m.openTag.contains(n.row,n.column)?(p=m.closeTag,v=p.start):(p=m.openTag,m.closeTag.start.row===n.row&&m.closeTag.start.column===n.column?v=p.end:v=p.start))}v=v||p.start}v=p&&p.cursor||v,v&&(e?p&&t?this.selection.setRange(p):p&&p.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(v.row,v.column):this.selection.moveTo(v.row,v.column))},this.gotoLine=function(e,t,n){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(e-1,t||0),this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,n)},this.navigateTo=function(e,t){this.selection.moveTo(e,t)},this.navigateUp=function(e){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(-e||-1,0)},this.navigateDown=function(e){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(e||1,0)},this.navigateLeft=function(e){if(!this.selection.isEmpty()){var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}else{e=e||1;while(e--)this.selection.moveCursorLeft()}this.clearSelection()},this.navigateRight=function(e){if(!this.selection.isEmpty()){var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}else{e=e||1;while(e--)this.selection.moveCursorRight()}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,t){t&&this.$search.set(t);var n=this.$search.find(this.session),r=0;return n?(this.$tryReplace(n,e)&&(r=1),this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end),r):r},this.replaceAll=function(e,t){t&&this.$search.set(t);var n=this.$search.findAll(this.session),r=0;if(!n.length)return r;var i=this.getSelectionRange();this.selection.moveTo(0,0);for(var s=n.length-1;s>=0;--s)this.$tryReplace(n[s],e)&&r++;return this.selection.setSelectionRange(i),r},this.$tryReplace=function(e,t){var n=this.session.getTextRange(e);return t=this.$search.replace(n,t),t!==null?(e.end=this.session.replace(e,t),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(e,t,n){t||(t={}),typeof e==\"string\"||e instanceof RegExp?t.needle=e:typeof e==\"object\"&&i.mixin(t,e);var r=this.selection.getRange();t.needle==null&&(e=this.session.getTextRange(r)||this.$search.$options.needle,e||(r=this.session.getWordRange(r.start.row,r.start.column),e=this.session.getTextRange(r)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:r});var s=this.$search.find(this.session);if(t.preventScroll)return s;if(s)return this.revealRange(s,n),s;t.backwards?r.start=r.end:r.end=r.start,this.selection.setRange(r)},this.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},this.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},this.revealRange=function(e,t){this.session.unfold(e),this.selection.setSelectionRange(e);var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),t!==!1&&this.renderer.animateScrolling(n)},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(e){e.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal(\"destroy\",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},this.setAutoScrollEditorIntoView=function(e){if(!e)return;var t,n=this,r=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement(\"div\"));var i=this.$scrollAnchor;i.style.cssText=\"position:absolute\",this.container.insertBefore(i,this.container.firstChild);var s=this.on(\"changeSelection\",function(){r=!0}),o=this.renderer.on(\"beforeRender\",function(){r&&(t=n.renderer.container.getBoundingClientRect())}),u=this.renderer.on(\"afterRender\",function(){if(r&&t&&(n.isFocused()||n.searchBox&&n.searchBox.isFocused())){var e=n.renderer,s=e.$cursorLayer.$pixelPos,o=e.layerConfig,u=s.top-o.offset;s.top>=0&&u+t.top<0?r=!0:s.top<o.height&&s.top+t.top+o.lineHeight>window.innerHeight?r=!1:r=null,r!=null&&(i.style.top=u+\"px\",i.style.left=s.left+\"px\",i.style.height=o.lineHeight+\"px\",i.scrollIntoView(r)),r=t=null}});this.setAutoScrollEditorIntoView=function(e){if(e)return;delete this.setAutoScrollEditorIntoView,this.off(\"changeSelection\",s),this.renderer.off(\"afterRender\",u),this.renderer.off(\"beforeRender\",o)}},this.$resetCursorStyle=function(){var e=this.$cursorStyle||\"ace\",t=this.renderer.$cursorLayer;if(!t)return;t.setSmoothBlinking(/smooth/.test(e)),t.isBlinking=!this.$readOnly&&e!=\"wide\",s.setCssClass(t.element,\"ace_slim-cursors\",/slim/.test(e))},this.prompt=function(e,t,n){var r=this;y.loadModule(\"./ext/prompt\",function(i){i.prompt(r,e,t,n)})}}.call(E.prototype),y.defineOptions(E.prototype,\"editor\",{selectionStyle:{set:function(e){this.onSelectionChange(),this._signal(\"changeSelectionStyle\",{data:e})},initialValue:\"line\"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(e){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(e){this.textInput.setReadOnly(e),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(e){this.textInput.setCopyWithEmptySelection(e)},initialValue:!1},cursorStyle:{set:function(e){this.$resetCursorStyle()},values:[\"ace\",\"slim\",\"smooth\",\"wide\"],initialValue:\"ace\"},mergeUndoDeltas:{values:[!1,!0,\"always\"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(e){this.setAutoScrollEditorIntoView(e)}},keyboardHandler:{set:function(e){this.setKeyboardHandler(e)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(e){this.session.setValue(e)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(e){this.setSession(e)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(e){this.renderer.$gutterLayer.setShowLineNumbers(e),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),e&&this.$relativeLineNumbers?S.attach(this):S.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(e){this.$showLineNumbers&&e?S.attach(this):S.detach(this)}},placeholder:{set:function(e){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var e=this.session&&(this.renderer.$composition||this.getValue());if(e&&this.renderer.placeholderNode)this.renderer.off(\"afterRender\",this.$updatePlaceholder),s.removeCssClass(this.container,\"ace_hasPlaceholder\"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!e&&!this.renderer.placeholderNode){this.renderer.on(\"afterRender\",this.$updatePlaceholder),s.addCssClass(this.container,\"ace_hasPlaceholder\");var t=s.createElement(\"div\");t.className=\"ace_placeholder\",t.textContent=this.$placeholder||\"\",this.renderer.placeholderNode=t,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!e&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||\"\")}.bind(this),this.on(\"input\",this.$updatePlaceholder)),this.$updatePlaceholder()}},customScrollbar:\"renderer\",hScrollBarAlwaysVisible:\"renderer\",vScrollBarAlwaysVisible:\"renderer\",highlightGutterLine:\"renderer\",animatedScroll:\"renderer\",showInvisibles:\"renderer\",showPrintMargin:\"renderer\",printMarginColumn:\"renderer\",printMargin:\"renderer\",fadeFoldWidgets:\"renderer\",showFoldWidgets:\"renderer\",displayIndentGuides:\"renderer\",highlightIndentGuides:\"renderer\",showGutter:\"renderer\",fontSize:\"renderer\",fontFamily:\"renderer\",maxLines:\"renderer\",minLines:\"renderer\",scrollPastEnd:\"renderer\",fixedWidthGutter:\"renderer\",theme:\"renderer\",hasCssTransforms:\"renderer\",maxPixelHeight:\"renderer\",useTextareaForIME:\"renderer\",scrollSpeed:\"$mouseHandler\",dragDelay:\"$mouseHandler\",dragEnabled:\"$mouseHandler\",focusTimeout:\"$mouseHandler\",tooltipFollowsMouse:\"$mouseHandler\",firstLineNumber:\"session\",overwrite:\"session\",newLineMode:\"session\",useWorker:\"session\",useSoftTabs:\"session\",navigateWithinSoftTabs:\"session\",tabSize:\"session\",wrap:\"session\",indentedSoftWrap:\"session\",foldStyle:\"session\",mode:\"session\"});var S={getText:function(e,t){return(Math.abs(e.selection.lead.row-t)||t+1+(t<9?\"\\u00b7\":\"\"))+\"\"},getWidth:function(e,t,n){return Math.max(t.toString().length,(n.lastRow+1).toString().length,2)*n.characterWidth},update:function(e,t){t.renderer.$loop.schedule(t.renderer.CHANGE_GUTTER)},attach:function(e){e.renderer.$gutterLayer.$renderer=this,e.on(\"changeSelection\",this.update),this.update(null,e)},detach:function(e){e.renderer.$gutterLayer.$renderer==this&&(e.renderer.$gutterLayer.$renderer=null),e.off(\"changeSelection\",this.update),this.update(null,e)}};t.Editor=E}),ace.define(\"ace/undomanager\",[\"require\",\"exports\",\"module\",\"ace/range\"],function(e,t,n){\"use strict\";function i(e,t){for(var n=t;n--;){var r=e[n];if(r&&!r[0].ignore){while(n<t-1){var i=d(e[n],e[n+1]);e[n]=i[0],e[n+1]=i[1],n++}return!0}}}function a(e){var t=e.action==\"insert\",n=e.start,r=e.end,i=(r.row-n.row)*(t?1:-1),s=(r.column-n.column)*(t?1:-1);t&&(r=n);for(var o in this.marks){var a=this.marks[o],f=u(a,n);if(f<0)continue;if(f===0&&t){if(a.bias!=1){a.bias==-1;continue}f=1}var l=t?f:u(a,r);if(l>0){a.row+=i,a.column+=a.row==r.row?s:0;continue}!t&&l<=0&&(a.row=n.row,a.column=n.column,l===0&&(a.bias=1))}}function f(e){return{row:e.row,column:e.column}}function l(e){return{start:f(e.start),end:f(e.end),action:e.action,lines:e.lines.slice()}}function c(e){e=e||this;if(Array.isArray(e))return e.map(c).join(\"\\n\");var t=\"\";e.action?(t=e.action==\"insert\"?\"+\":\"-\",t+=\"[\"+e.lines+\"]\"):e.value&&(Array.isArray(e.value)?t=e.value.map(h).join(\"\\n\"):t=h(e.value)),e.start&&(t+=h(e));if(e.id||e.rev)t+=\"\t(\"+(e.id||e.rev)+\")\";return t}function h(e){return e.start.row+\":\"+e.start.column+\"=>\"+e.end.row+\":\"+e.end.column}function p(e,t){var n=e.action==\"insert\",r=t.action==\"insert\";if(n&&r)if(o(t.start,e.end)>=0)m(t,e,-1);else{if(!(o(t.start,e.start)<=0))return null;m(e,t,1)}else if(n&&!r)if(o(t.start,e.end)>=0)m(t,e,-1);else{if(!(o(t.end,e.start)<=0))return null;m(e,t,-1)}else if(!n&&r)if(o(t.start,e.start)>=0)m(t,e,1);else{if(!(o(t.start,e.start)<=0))return null;m(e,t,1)}else if(!n&&!r)if(o(t.start,e.start)>=0)m(t,e,1);else{if(!(o(t.end,e.start)<=0))return null;m(e,t,-1)}return[t,e]}function d(e,t){for(var n=e.length;n--;)for(var r=0;r<t.length;r++)if(!p(e[n],t[r])){while(n<e.length){while(r--)p(t[r],e[n]);r=t.length,n++}return[e,t]}return e.selectionBefore=t.selectionBefore=e.selectionAfter=t.selectionAfter=null,[t,e]}function v(e,t){var n=e.action==\"insert\",r=t.action==\"insert\";if(n&&r)o(e.start,t.start)<0?m(t,e,1):m(e,t,1);else if(n&&!r)o(e.start,t.end)>=0?m(e,t,-1):o(e.start,t.start)<=0?m(t,e,1):(m(e,s.fromPoints(t.start,e.start),-1),m(t,e,1));else if(!n&&r)o(t.start,e.end)>=0?m(t,e,-1):o(t.start,e.start)<=0?m(e,t,1):(m(t,s.fromPoints(e.start,t.start),-1),m(e,t,1));else if(!n&&!r)if(o(t.start,e.end)>=0)m(t,e,-1);else{if(!(o(t.end,e.start)<=0)){var i,u;return o(e.start,t.start)<0&&(i=e,e=y(e,t.start)),o(e.end,t.end)>0&&(u=y(e,t.end)),g(t.end,e.start,e.end,-1),u&&!i&&(e.lines=u.lines,e.start=u.start,e.end=u.end,u=e),[t,i,u].filter(Boolean)}m(e,t,-1)}return[t,e]}function m(e,t,n){g(e.start,t.start,t.end,n),g(e.end,t.start,t.end,n)}function g(e,t,n,r){e.row==(r==1?t:n).row&&(e.column+=r*(n.column-t.column)),e.row+=r*(n.row-t.row)}function y(e,t){var n=e.lines,r=e.end;e.end=f(t);var i=e.end.row-e.start.row,s=n.splice(i,n.length),o=i?t.column:t.column-e.start.column;n.push(s[0].substring(0,o)),s[0]=s[0].substr(o);var u={start:f(t),end:r,lines:s,action:e.action};return u}function b(e,t){t=l(t);for(var n=e.length;n--;){var r=e[n];for(var i=0;i<r.length;i++){var s=r[i],o=v(s,t);t=o[0],o.length!=2&&(o[2]?(r.splice(i+1,1,o[1],o[2]),i++):o[1]||(r.splice(i,1),i--))}r.length||e.splice(n,1)}return e}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];for(var i=0;i<r.length;i++)b(e,r[i])}}var r=function(){this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=Infinity,this.reset()};(function(){this.addSession=function(e){this.$session=e},this.add=function(e,t,n){if(this.$fromUndo)return;if(e==this.$lastDelta)return;this.$keepRedoStack||(this.$redoStack.length=0);if(t===!1||!this.lastDeltas){this.lastDeltas=[];var r=this.$undoStack.length;r>this.$undoDepth-1&&this.$undoStack.splice(0,r-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),e.id=this.$rev=++this.$maxRev}if(e.action==\"remove\"||e.action==\"insert\")this.$lastDelta=e;this.lastDeltas.push(e)},this.addSelection=function(e,t){this.selections.push({value:e,rev:t||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(e,t){t==null&&(t=this.$rev+1);var n=this.$undoStack;for(var r=n.length;r--;){var i=n[r][0];if(i.id<=e)break;i.id<t&&(i.ignore=!0)}this.lastDeltas=null},this.getSelection=function(e,t){var n=this.selections;for(var r=n.length;r--;){var i=n[r];if(i.rev<e)return t&&(i=n[r+1]),i}},this.getRevision=function(){return this.$rev},this.getDeltas=function(e,t){t==null&&(t=this.$rev+1);var n=this.$undoStack,r=null,i=0;for(var s=n.length;s--;){var o=n[s][0];o.id<t&&!r&&(r=s+1);if(o.id<=e){i=s+1;break}}return n.slice(i,r)},this.getChangedRanges=function(e,t){t==null&&(t=this.$rev+1)},this.getChangedLines=function(e,t){t==null&&(t=this.$rev+1)},this.undo=function(e,t){this.lastDeltas=null;var n=this.$undoStack;if(!i(n,n.length))return;e||(e=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var r=n.pop(),s=null;return r&&(s=e.undoChanges(r,t),this.$redoStack.push(r),this.$syncRev()),this.$fromUndo=!1,s},this.redo=function(e,t){this.lastDeltas=null,e||(e=this.$session),this.$fromUndo=!0;if(this.$redoStackBaseRev!=this.$rev){var n=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);w(this.$redoStack,n),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(e){e[0].id=++this.$maxRev},this)}var r=this.$redoStack.pop(),i=null;return r&&(i=e.redoChanges(r,t),this.$undoStack.push(r),this.$syncRev()),this.$fromUndo=!1,i},this.$syncRev=function(){var e=this.$undoStack,t=e[e.length-1],n=t&&t[0].id||0;this.$redoStackBaseRev=n,this.$rev=n},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},this.canUndo=function(){return this.$undoStack.length>0},this.canRedo=function(){return this.$redoStack.length>0},this.bookmark=function(e){e==undefined&&(e=this.$rev),this.mark=e},this.isAtBookmark=function(){return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark,this.$prettyPrint=function(e){return e?c(e):c(this.$undoStack)+\"\\n---\\n\"+c(this.$redoStack)}}).call(r.prototype);var s=e(\"./range\").Range,o=s.comparePoints,u=s.comparePoints;t.UndoManager=r}),ace.define(\"ace/layer/lines\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"],function(e,t,n){\"use strict\";var r=e(\"../lib/dom\"),i=function(e,t){this.element=e,this.canvasHeight=t||5e5,this.element.style.height=this.canvasHeight*2+\"px\",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0};(function(){this.moveContainer=function(e){r.translate(this.element,0,-(e.firstRowScreen*e.lineHeight%this.canvasHeight)-e.offset*this.$offsetCoefficient)},this.pageChanged=function(e,t){return Math.floor(e.firstRowScreen*e.lineHeight/this.canvasHeight)!==Math.floor(t.firstRowScreen*t.lineHeight/this.canvasHeight)},this.computeLineTop=function(e,t,n){var r=t.firstRowScreen*t.lineHeight,i=Math.floor(r/this.canvasHeight),s=n.documentToScreenRow(e,0)*t.lineHeight;return s-i*this.canvasHeight},this.computeLineHeight=function(e,t,n){return t.lineHeight*n.getRowLineCount(e)},this.getLength=function(){return this.cells.length},this.get=function(e){return this.cells[e]},this.shift=function(){this.$cacheCell(this.cells.shift())},this.pop=function(){this.$cacheCell(this.cells.pop())},this.push=function(e){if(Array.isArray(e)){this.cells.push.apply(this.cells,e);var t=r.createFragment(this.element);for(var n=0;n<e.length;n++)t.appendChild(e[n].element);this.element.appendChild(t)}else this.cells.push(e),this.element.appendChild(e.element)},this.unshift=function(e){if(Array.isArray(e)){this.cells.unshift.apply(this.cells,e);var t=r.createFragment(this.element);for(var n=0;n<e.length;n++)t.appendChild(e[n].element);this.element.firstChild?this.element.insertBefore(t,this.element.firstChild):this.element.appendChild(t)}else this.cells.unshift(e),this.element.insertAdjacentElement(\"afterbegin\",e.element)},this.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},this.$cacheCell=function(e){if(!e)return;e.element.remove(),this.cellCache.push(e)},this.createCell=function(e,t,n,i){var s=this.cellCache.pop();if(!s){var o=r.createElement(\"div\");i&&i(o),this.element.appendChild(o),s={element:o,text:\"\",row:e}}return s.row=e,s}}).call(i.prototype),t.Lines=i}),ace.define(\"ace/layer/gutter\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/oop\",\"ace/lib/lang\",\"ace/lib/event_emitter\",\"ace/layer/lines\"],function(e,t,n){\"use strict\";function f(e){var t=document.createTextNode(\"\");e.appendChild(t);var n=r.createElement(\"span\");return e.appendChild(n),e}var r=e(\"../lib/dom\"),i=e(\"../lib/oop\"),s=e(\"../lib/lang\"),o=e(\"../lib/event_emitter\").EventEmitter,u=e(\"./lines\").Lines,a=function(e){this.element=r.createElement(\"div\"),this.element.className=\"ace_layer ace_gutter-layer\",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new u(this.element),this.$lines.$offsetCoefficient=1};(function(){i.implement(this,o),this.setSession=function(e){this.session&&this.session.off(\"change\",this.$updateAnnotations),this.session=e,e&&e.on(\"change\",this.$updateAnnotations)},this.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn(\"deprecated use session.addGutterDecoration\"),this.session.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn(\"deprecated use session.removeGutterDecoration\"),this.session.removeGutterDecoration(e,t)},this.setAnnotations=function(e){this.$annotations=[];for(var t=0;t<e.length;t++){var n=e[t],r=n.row,i=this.$annotations[r];i||(i=this.$annotations[r]={text:[]});var o=n.text;o=o?s.escapeHTML(o):n.html||\"\",i.text.indexOf(o)===-1&&i.text.push(o);var u=n.type,a=n.className;a?i.className=a:u==\"error\"?i.className=\" ace_error\":u==\"warning\"&&i.className!=\" ace_error\"?i.className=\" ace_warning\":u==\"info\"&&!i.className&&(i.className=\" ace_info\")}},this.$updateAnnotations=function(e){if(!this.$annotations.length)return;var t=e.start.row,n=e.end.row-t;if(n!==0)if(e.action==\"remove\")this.$annotations.splice(t,n+1,null);else{var r=new Array(n+1);r.unshift(t,1),this.$annotations.splice.apply(this.$annotations,r)}},this.update=function(e){this.config=e;var t=this.session,n=e.firstRow,r=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1);this.oldLastRow=r,this.config=e,this.$lines.moveContainer(e),this.$updateCursorRow();var i=t.getNextFoldLine(n),s=i?i.start.row:Infinity,o=null,u=-1,a=n;for(;;){a>s&&(a=i.end.row+1,i=t.getNextFoldLine(a,i),s=i?i.start.row:Infinity);if(a>r){while(this.$lines.getLength()>u+1)this.$lines.pop();break}o=this.$lines.get(++u),o?o.row=a:(o=this.$lines.createCell(a,e,this.session,f),this.$lines.push(o)),this.$renderCell(o,e,i,a),a++}this._signal(\"afterRender\"),this.$updateGutterWidth(e)},this.$updateGutterWidth=function(e){var t=this.session,n=t.gutterRenderer||this.$renderer,r=t.$firstLineNumber,i=this.$lines.last()?this.$lines.last().text:\"\";if(this.$fixedWidth||t.$useWrapMode)i=t.getLength()+r-1;var s=n?n.getWidth(t,i,e):i.toString().length*e.characterWidth,o=this.$padding||this.$computePadding();s+=o.left+o.right,s!==this.gutterWidth&&!isNaN(s)&&(this.gutterWidth=s,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+\"px\",this._signal(\"changeGutterWidth\",s))},this.$updateCursorRow=function(){if(!this.$highlightGutterLine)return;var e=this.session.selection.getCursor();if(this.$cursorRow===e.row)return;this.$cursorRow=e.row},this.updateLineHighlight=function(){if(!this.$highlightGutterLine)return;var e=this.session.selection.cursor.row;this.$cursorRow=e;if(this.$cursorCell&&this.$cursorCell.row==e)return;this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace(\"ace_gutter-active-line \",\"\"));var t=this.$lines.cells;this.$cursorCell=null;for(var n=0;n<t.length;n++){var r=t[n];if(r.row>=this.$cursorRow){if(r.row>this.$cursorRow){var i=this.session.getFoldLine(this.$cursorRow);if(!(n>0&&i&&i.start.row==t[n-1].row))break;r=t[n-1]}r.element.className=\"ace_gutter-active-line \"+r.element.className,this.$cursorCell=r;break}}},this.scrollLines=function(e){var t=this.config;this.config=e,this.$updateCursorRow();if(this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=Math.min(e.lastRow+e.gutterOffset,this.session.getLength()-1),r=this.oldLastRow;this.oldLastRow=n;if(!t||r<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var i=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);i>0;i--)this.$lines.shift();if(r>n)for(var i=this.session.getFoldedRowCount(n+1,r);i>0;i--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLines(e,e.firstRow,t.firstRow-1)),n>r&&this.$lines.push(this.$renderLines(e,r+1,n)),this.updateLineHighlight(),this._signal(\"afterRender\"),this.$updateGutterWidth(e)},this.$renderLines=function(e,t,n){var r=[],i=t,s=this.session.getNextFoldLine(i),o=s?s.start.row:Infinity;for(;;){i>o&&(i=s.end.row+1,s=this.session.getNextFoldLine(i,s),o=s?s.start.row:Infinity);if(i>n)break;var u=this.$lines.createCell(i,e,this.session,f);this.$renderCell(u,e,s,i),r.push(u),i++}return r},this.$renderCell=function(e,t,n,i){var s=e.element,o=this.session,u=s.childNodes[0],a=s.childNodes[1],f=o.$firstLineNumber,l=o.$breakpoints,c=o.$decorations,h=o.gutterRenderer||this.$renderer,p=this.$showFoldWidgets&&o.foldWidgets,d=n?n.start.row:Number.MAX_VALUE,v=\"ace_gutter-cell \";this.$highlightGutterLine&&(i==this.$cursorRow||n&&i<this.$cursorRow&&i>=d&&this.$cursorRow<=n.end.row)&&(v+=\"ace_gutter-active-line \",this.$cursorCell!=e&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace(\"ace_gutter-active-line \",\"\")),this.$cursorCell=e)),l[i]&&(v+=l[i]),c[i]&&(v+=c[i]),this.$annotations[i]&&(v+=this.$annotations[i].className),s.className!=v&&(s.className=v);if(p){var m=p[i];m==null&&(m=p[i]=o.getFoldWidget(i))}if(m){var v=\"ace_fold-widget ace_\"+m;m==\"start\"&&i==d&&i<n.end.row?v+=\" ace_closed\":v+=\" ace_open\",a.className!=v&&(a.className=v);var g=t.lineHeight+\"px\";r.setStyle(a.style,\"height\",g),r.setStyle(a.style,\"display\",\"inline-block\")}else a&&r.setStyle(a.style,\"display\",\"none\");var y=(h?h.getText(o,i):i+f).toString();return y!==u.data&&(u.data=y),r.setStyle(e.element.style,\"height\",this.$lines.computeLineHeight(i,t,o)+\"px\"),r.setStyle(e.element.style,\"top\",this.$lines.computeLineTop(i,t,o)+\"px\"),e.text=y,e},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer=\"\",this.setHighlightGutterLine=function(e){this.$highlightGutterLine=e},this.$showLineNumbers=!0,this.$renderer=\"\",this.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return 0},getText:function(){return\"\"}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?r.addCssClass(this.element,\"ace_folding-enabled\"):r.removeCssClass(this.element,\"ace_folding-enabled\"),this.$showFoldWidgets=e,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=r.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(e.borderLeftWidth)||0)+(parseInt(e.paddingLeft)||0)+1,this.$padding.right=(parseInt(e.borderRightWidth)||0)+(parseInt(e.paddingRight)||0),this.$padding},this.getRegion=function(e){var t=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();if(e.x<t.left+n.left)return\"markers\";if(this.$showFoldWidgets&&e.x>n.right-t.right)return\"foldWidgets\"}}).call(a.prototype),t.Gutter=a}),ace.define(\"ace/layer/marker\",[\"require\",\"exports\",\"module\",\"ace/range\",\"ace/lib/dom\"],function(e,t,n){\"use strict\";var r=e(\"../range\").Range,i=e(\"../lib/dom\"),s=function(e){this.element=i.createElement(\"div\"),this.element.className=\"ace_layer ace_marker-layer\",e.appendChild(this.element)};(function(){function e(e,t,n,r){return(e?1:0)|(t?2:0)|(n?4:0)|(r?8:0)}this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setMarkers=function(e){this.markers=e},this.elt=function(e,t){var n=this.i!=-1&&this.element.childNodes[this.i];n?this.i++:(n=document.createElement(\"div\"),this.element.appendChild(n),this.i=-1),n.style.cssText=t,n.className=e},this.update=function(e){if(!e)return;this.config=e,this.i=0;var t;for(var n in this.markers){var r=this.markers[n];if(!r.range){r.update(t,this,this.session,e);continue}var i=r.range.clipRows(e.firstRow,e.lastRow);if(i.isEmpty())continue;i=i.toScreenRange(this.session);if(r.renderer){var s=this.$getTop(i.start.row,e),o=this.$padding+i.start.column*e.characterWidth;r.renderer(t,i,o,s,e)}else r.type==\"fullLine\"?this.drawFullLineMarker(t,i,r.clazz,e):r.type==\"screenLine\"?this.drawScreenLineMarker(t,i,r.clazz,e):i.isMultiLine()?r.type==\"text\"?this.drawTextMarker(t,i,r.clazz,e):this.drawMultiLineMarker(t,i,r.clazz,e):this.drawSingleLineMarker(t,i,r.clazz+\" ace_start\"+\" ace_br15\",e)}if(this.i!=-1)while(this.i<this.element.childElementCount)this.element.removeChild(this.element.lastChild)},this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},this.drawTextMarker=function(t,n,i,s,o){var u=this.session,a=n.start.row,f=n.end.row,l=a,c=0,h=0,p=u.getScreenLastRowColumn(l),d=new r(l,n.start.column,l,h);for(;l<=f;l++)d.start.row=d.end.row=l,d.start.column=l==a?n.start.column:u.getRowWrapIndent(l),d.end.column=p,c=h,h=p,p=l+1<f?u.getScreenLastRowColumn(l+1):l==f?0:n.end.column,this.drawSingleLineMarker(t,d,i+(l==a?\" ace_start\":\"\")+\" ace_br\"+e(l==a||l==a+1&&n.start.column,c<h,h>p,l==f),s,l==f?0:1,o)},this.drawMultiLineMarker=function(e,t,n,r,i){var s=this.$padding,o=r.lineHeight,u=this.$getTop(t.start.row,r),a=s+t.start.column*r.characterWidth;i=i||\"\";if(this.session.$bidiHandler.isBidiRow(t.start.row)){var f=t.clone();f.end.row=f.start.row,f.end.column=this.session.getLine(f.start.row).length,this.drawBidiSingleLineMarker(e,f,n+\" ace_br1 ace_start\",r,null,i)}else this.elt(n+\" ace_br1 ace_start\",\"height:\"+o+\"px;\"+\"right:0;\"+\"top:\"+u+\"px;left:\"+a+\"px;\"+(i||\"\"));if(this.session.$bidiHandler.isBidiRow(t.end.row)){var f=t.clone();f.start.row=f.end.row,f.start.column=0,this.drawBidiSingleLineMarker(e,f,n+\" ace_br12\",r,null,i)}else{u=this.$getTop(t.end.row,r);var l=t.end.column*r.characterWidth;this.elt(n+\" ace_br12\",\"height:\"+o+\"px;\"+\"width:\"+l+\"px;\"+\"top:\"+u+\"px;\"+\"left:\"+s+\"px;\"+(i||\"\"))}o=(t.end.row-t.start.row-1)*r.lineHeight;if(o<=0)return;u=this.$getTop(t.start.row+1,r);var c=(t.start.column?1:0)|(t.end.column?0:8);this.elt(n+(c?\" ace_br\"+c:\"\"),\"height:\"+o+\"px;\"+\"right:0;\"+\"top:\"+u+\"px;\"+\"left:\"+s+\"px;\"+(i||\"\"))},this.drawSingleLineMarker=function(e,t,n,r,i,s){if(this.session.$bidiHandler.isBidiRow(t.start.row))return this.drawBidiSingleLineMarker(e,t,n,r,i,s);var o=r.lineHeight,u=(t.end.column+(i||0)-t.start.column)*r.characterWidth,a=this.$getTop(t.start.row,r),f=this.$padding+t.start.column*r.characterWidth;this.elt(n,\"height:\"+o+\"px;\"+\"width:\"+u+\"px;\"+\"top:\"+a+\"px;\"+\"left:\"+f+\"px;\"+(s||\"\"))},this.drawBidiSingleLineMarker=function(e,t,n,r,i,s){var o=r.lineHeight,u=this.$getTop(t.start.row,r),a=this.$padding,f=this.session.$bidiHandler.getSelections(t.start.column,t.end.column);f.forEach(function(e){this.elt(n,\"height:\"+o+\"px;\"+\"width:\"+(e.width+(i||0))+\"px;\"+\"top:\"+u+\"px;\"+\"left:\"+(a+e.left)+\"px;\"+(s||\"\"))},this)},this.drawFullLineMarker=function(e,t,n,r,i){var s=this.$getTop(t.start.row,r),o=r.lineHeight;t.start.row!=t.end.row&&(o+=this.$getTop(t.end.row,r)-s),this.elt(n,\"height:\"+o+\"px;\"+\"top:\"+s+\"px;\"+\"left:0;right:0;\"+(i||\"\"))},this.drawScreenLineMarker=function(e,t,n,r,i){var s=this.$getTop(t.start.row,r),o=r.lineHeight;this.elt(n,\"height:\"+o+\"px;\"+\"top:\"+s+\"px;\"+\"left:0;right:0;\"+(i||\"\"))}}).call(s.prototype),t.Marker=s}),ace.define(\"ace/layer/text\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/layer/lines\",\"ace/lib/event_emitter\"],function(e,t,n){\"use strict\";var r=e(\"../lib/oop\"),i=e(\"../lib/dom\"),s=e(\"../lib/lang\"),o=e(\"./lines\").Lines,u=e(\"../lib/event_emitter\").EventEmitter,a=function(e){this.dom=i,this.element=this.dom.createElement(\"div\"),this.element.className=\"ace_layer ace_text-layer\",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new o(this.element)};(function(){r.implement(this,u),this.EOF_CHAR=\"\\u00b6\",this.EOL_CHAR_LF=\"\\u00ac\",this.EOL_CHAR_CRLF=\"\\u00a4\",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR=\"\\u2014\",this.SPACE_CHAR=\"\\u00b7\",this.$padding=0,this.MAX_LINE_LENGTH=1e4,this.MAX_CHUNK_LENGTH=250,this.$updateEolChar=function(){var e=this.session.doc,t=e.getNewLineCharacter()==\"\\n\"&&e.getNewLineMode()!=\"windows\",n=t?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=n)return this.EOL_CHAR=n,!0},this.setPadding=function(e){this.$padding=e,this.element.style.margin=\"0 \"+e+\"px\"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(e){this.$fontMetrics=e,this.$fontMetrics.on(\"changeCharacterSize\",function(e){this._signal(\"changeCharacterSize\",e)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(e){this.session=e,e&&this.$computeTabString()},this.showInvisibles=!1,this.showSpaces=!1,this.showTabs=!1,this.showEOL=!1,this.setShowInvisibles=function(e){return this.showInvisibles==e?!1:(this.showInvisibles=e,typeof e==\"string\"?(this.showSpaces=/tab/i.test(e),this.showTabs=/space/i.test(e),this.showEOL=/eol/i.test(e)):this.showSpaces=this.showTabs=this.showEOL=e,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(e){return this.displayIndentGuides==e?!1:(this.displayIndentGuides=e,this.$computeTabString(),!0)},this.$highlightIndentGuides=!0,this.setHighlightIndentGuides=function(e){return this.$highlightIndentGuides===e?!1:(this.$highlightIndentGuides=e,e)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;var t=this.$tabStrings=[0];for(var n=1;n<e+1;n++)if(this.showTabs){var r=this.dom.createElement(\"span\");r.className=\"ace_invisible ace_invisible_tab\",r.textContent=s.stringRepeat(this.TAB_CHAR,n),t.push(r)}else t.push(this.dom.createTextNode(s.stringRepeat(\" \",n),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\\s\\S| \\t|\\t |\\s$/;var i=\"ace_indent-guide\",o=this.showSpaces?\" ace_invisible ace_invisible_space\":\"\",u=this.showSpaces?s.stringRepeat(this.SPACE_CHAR,this.tabSize):s.stringRepeat(\" \",this.tabSize),a=this.showTabs?\" ace_invisible ace_invisible_tab\":\"\",f=this.showTabs?s.stringRepeat(this.TAB_CHAR,this.tabSize):u,r=this.dom.createElement(\"span\");r.className=i+o,r.textContent=u,this.$tabStrings[\" \"]=r;var r=this.dom.createElement(\"span\");r.className=i+a,r.textContent=f,this.$tabStrings[\"\t\"]=r}},this.updateLines=function(e,t,n){if(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)return this.update(e);this.config=e;var r=Math.max(t,e.firstRow),i=Math.min(n,e.lastRow),s=this.element.childNodes,o=0;for(var u=e.firstRow;u<r;u++){var a=this.session.getFoldLine(u);if(a){if(a.containsRow(r)){r=a.start.row;break}u=a.end.row}o++}var f=!1,u=r,a=this.session.getNextFoldLine(u),l=a?a.start.row:Infinity;for(;;){u>l&&(u=a.end.row+1,a=this.session.getNextFoldLine(u,a),l=a?a.start.row:Infinity);if(u>i)break;var c=s[o++];if(c){this.dom.removeChildren(c),this.$renderLine(c,u,u==l?a:!1),f&&(c.style.top=this.$lines.computeLineTop(u,e,this.session)+\"px\");var h=e.lineHeight*this.session.getRowLength(u)+\"px\";c.style.height!=h&&(f=!0,c.style.height=h)}u++}if(f)while(o<this.$lines.cells.length){var p=this.$lines.cells[o++];p.element.style.top=this.$lines.computeLineTop(p.row,e,this.session)+\"px\"}},this.scrollLines=function(e){var t=this.config;this.config=e;if(this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=e.lastRow,r=t?t.lastRow:-1;if(!t||r<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var i=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);i>0;i--)this.$lines.shift();if(t.lastRow>e.lastRow)for(var i=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);i>0;i--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLinesFragment(e,e.firstRow,t.firstRow-1)),e.lastRow>t.lastRow&&this.$lines.push(this.$renderLinesFragment(e,t.lastRow+1,e.lastRow)),this.$highlightIndentGuide()},this.$renderLinesFragment=function(e,t,n){var r=[],s=t,o=this.session.getNextFoldLine(s),u=o?o.start.row:Infinity;for(;;){s>u&&(s=o.end.row+1,o=this.session.getNextFoldLine(s,o),u=o?o.start.row:Infinity);if(s>n)break;var a=this.$lines.createCell(s,e,this.session),f=a.element;this.dom.removeChildren(f),i.setStyle(f.style,\"height\",this.$lines.computeLineHeight(s,e,this.session)+\"px\"),i.setStyle(f.style,\"top\",this.$lines.computeLineTop(s,e,this.session)+\"px\"),this.$renderLine(f,s,s==u?o:!1),this.$useLineGroups()?f.className=\"ace_line_group\":(f.className=\"ace_line\",f.setAttribute(\"role\",\"option\")),r.push(a),s++}return r},this.update=function(e){this.$lines.moveContainer(e),this.config=e;var t=e.firstRow,n=e.lastRow,r=this.$lines;while(r.getLength())r.pop();r.push(this.$renderLinesFragment(e,t,n))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderTokenInChunks=function(e,t,n,r){var i;for(var s=0;s<r.length;s+=this.MAX_CHUNK_LENGTH){var o=r.substring(s,s+this.MAX_CHUNK_LENGTH),u={type:n.type,value:o};i=this.$renderToken(e,t+s,u,o)}return i},this.$renderToken=function(e,t,n,r){var i=this,o=/(\\t)|( +)|([\\x00-\\x1f\\x80-\\xa0\\xad\\u1680\\u180E\\u2000-\\u200f\\u2028\\u2029\\u202F\\u205F\\uFEFF\\uFFF9-\\uFFFC\\u2066\\u2067\\u2068\\u202A\\u202B\\u202D\\u202E\\u202C\\u2069]+)|(\\u3000)|([\\u1100-\\u115F\\u11A3-\\u11A7\\u11FA-\\u11FF\\u2329-\\u232A\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u2FF0-\\u2FFB\\u3001-\\u303E\\u3041-\\u3096\\u3099-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u3190-\\u31BA\\u31C0-\\u31E3\\u31F0-\\u321E\\u3220-\\u3247\\u3250-\\u32FE\\u3300-\\u4DBF\\u4E00-\\uA48C\\uA490-\\uA4C6\\uA960-\\uA97C\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFAFF\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE66\\uFE68-\\uFE6B\\uFF01-\\uFF60\\uFFE0-\\uFFE6]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF])/g,u=this.dom.createFragment(this.element),a,f=0;while(a=o.exec(r)){var l=a[1],c=a[2],h=a[3],p=a[4],d=a[5];if(!i.showSpaces&&c)continue;var v=f!=a.index?r.slice(f,a.index):\"\";f=a.index+a[0].length,v&&u.appendChild(this.dom.createTextNode(v,this.element));if(l){var m=i.session.getScreenTabSize(t+a.index);u.appendChild(i.$tabStrings[m].cloneNode(!0)),t+=m-1}else if(c)if(i.showSpaces){var g=this.dom.createElement(\"span\");g.className=\"ace_invisible ace_invisible_space\",g.textContent=s.stringRepeat(i.SPACE_CHAR,c.length),u.appendChild(g)}else u.appendChild(this.com.createTextNode(c,this.element));else if(h){var g=this.dom.createElement(\"span\");g.className=\"ace_invisible ace_invisible_space ace_invalid\",g.textContent=s.stringRepeat(i.SPACE_CHAR,h.length),u.appendChild(g)}else if(p){t+=1;var g=this.dom.createElement(\"span\");g.style.width=i.config.characterWidth*2+\"px\",g.className=i.showSpaces?\"ace_cjk ace_invisible ace_invisible_space\":\"ace_cjk\",g.textContent=i.showSpaces?i.SPACE_CHAR:p,u.appendChild(g)}else if(d){t+=1;var g=this.dom.createElement(\"span\");g.style.width=i.config.characterWidth*2+\"px\",g.className=\"ace_cjk\",g.textContent=d,u.appendChild(g)}}u.appendChild(this.dom.createTextNode(f?r.slice(f):r,this.element));var g=this.dom.createElement(\"span\");if(!this.$textToken[n.type]){var y=\"ace_\"+n.type.replace(/\\./g,\" ace_\");n.type==\"fold\"&&(g.style.width=n.value.length*this.config.characterWidth+\"px\"),g.className=y}return g.appendChild(u),e.appendChild(g),t+r.length},this.renderIndentGuide=function(e,t,n){var r=t.search(this.$indentGuideRe);if(r<=0||r>=n)return t;if(t[0]==\" \"){r-=r%this.tabSize;var i=r/this.tabSize;for(var s=0;s<i;s++)e.appendChild(this.$tabStrings[\" \"].cloneNode(!0));return this.$highlightIndentGuide(),t.substr(r)}if(t[0]==\"\t\"){for(var s=0;s<r;s++)e.appendChild(this.$tabStrings[\"\t\"].cloneNode(!0));return this.$highlightIndentGuide(),t.substr(r)}return this.$highlightIndentGuide(),t},this.$highlightIndentGuide=function(){if(!this.$highlightIndentGuides||!this.displayIndentGuides)return;this.$highlightIndentGuideMarker={indentLevel:undefined,start:undefined,end:undefined,dir:undefined};var e=this.session.doc.$lines;if(!e)return;var t=this.session.selection.getCursor(),n=/^\\s*/.exec(this.session.doc.getLine(t.row))[0].length,r=Math.floor(n/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:r,start:t.row};var i=this.session.$bracketHighlight;if(i){var s=this.session.$bracketHighlight.ranges;for(var o=0;o<s.length;o++)if(t.row!==s[o].start.row){this.$highlightIndentGuideMarker.end=s[o].start.row,t.row>s[o].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&e[t.row]!==\"\"&&t.column===e[t.row].length){this.$highlightIndentGuideMarker.dir=1;for(var o=t.row+1;o<e.length;o++){var u=e[o],a=/^\\s*/.exec(u)[0].length;if(u!==\"\"){this.$highlightIndentGuideMarker.end=o;if(a<=n)break}}}this.$renderHighlightIndentGuide()},this.$clearActiveIndentGuide=function(){var e=this.$lines.cells;for(var t=0;t<e.length;t++){var n=e[t],r=n.element.childNodes;if(r.length>0)for(var i=0;i<r.length;i++)if(r[i].classList&&r[i].classList.contains(\"ace_indent-guide-active\")){r[i].classList.remove(\"ace_indent-guide-active\");break}}},this.$setIndentGuideActive=function(e,t){var n=this.session.doc.getLine(e.row);if(n!==\"\"){var r=e.element.childNodes;if(r){var i=r[t-1];i&&i.classList&&i.classList.contains(\"ace_indent-guide\")&&i.classList.add(\"ace_indent-guide-active\")}}},this.$renderHighlightIndentGuide=function(){if(!this.$lines)return;var e=this.$lines.cells;this.$clearActiveIndentGuide();var t=this.$highlightIndentGuideMarker.indentLevel;if(t!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var n=0;n<e.length;n++){var r=e[n];if(this.$highlightIndentGuideMarker.end&&r.row>=this.$highlightIndentGuideMarker.start+1){if(r.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(r,t)}}else for(var n=e.length-1;n>=0;n--){var r=e[n];if(this.$highlightIndentGuideMarker.end&&r.row<this.$highlightIndentGuideMarker.start){if(r.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(r,t)}}},this.$createLineElement=function(e){var t=this.dom.createElement(\"div\");return t.className=\"ace_line\",t.style.height=this.config.lineHeight+\"px\",t},this.$renderWrappedLine=function(e,t,n){var r=0,i=0,o=n[0],u=0,a=this.$createLineElement();e.appendChild(a);for(var f=0;f<t.length;f++){var l=t[f],c=l.value;if(f==0&&this.displayIndentGuides){r=c.length,c=this.renderIndentGuide(a,c,o);if(!c)continue;r-=c.length}if(r+c.length<o)u=this.$renderTokenInChunks(a,u,l,c),r+=c.length;else{while(r+c.length>=o)u=this.$renderTokenInChunks(a,u,l,c.substring(0,o-r)),c=c.substring(o-r),r=o,a=this.$createLineElement(),e.appendChild(a),a.appendChild(this.dom.createTextNode(s.stringRepeat(\"\\u00a0\",n.indent),this.element)),i++,u=0,o=n[i]||Number.MAX_VALUE;c.length!=0&&(r+=c.length,u=this.$renderTokenInChunks(a,u,l,c))}}n[n.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(a,u,null,\"\",!0)},this.$renderSimpleLine=function(e,t){var n=0;for(var r=0;r<t.length;r++){var i=t[r],s=i.value;if(r==0&&this.displayIndentGuides){s=this.renderIndentGuide(e,s);if(!s)continue}if(n+s.length>this.MAX_LINE_LENGTH){this.$renderOverflowMessage(e,n,i,s);return}n=this.$renderTokenInChunks(e,n,i,s)}},this.$renderOverflowMessage=function(e,t,n,r,i){n&&this.$renderTokenInChunks(e,t,n,r.slice(0,this.MAX_LINE_LENGTH-t));var s=this.dom.createElement(\"span\");s.className=\"ace_inline_button ace_keyword ace_toggle_wrap\",s.textContent=i?\"<hide>\":\"<click to see more...>\",e.appendChild(s)},this.$renderLine=function(e,t,n){!n&&n!=0&&(n=this.session.getFoldLine(t));if(n)var r=this.$getFoldLineTokens(t,n);else var r=this.session.getTokens(t);var i=e;if(r.length){var s=this.session.getRowSplitData(t);if(s&&s.length){this.$renderWrappedLine(e,r,s);var i=e.lastChild}else{var i=e;this.$useLineGroups()&&(i=this.$createLineElement(),e.appendChild(i)),this.$renderSimpleLine(i,r)}}else this.$useLineGroups()&&(i=this.$createLineElement(),e.appendChild(i));if(this.showEOL&&i){n&&(t=n.end.row);var o=this.dom.createElement(\"span\");o.className=\"ace_invisible ace_invisible_eol\",o.textContent=t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,i.appendChild(o)}},this.$getFoldLineTokens=function(e,t){function i(e,t,n){var i=0,s=0;while(s+e[i].value.length<t){s+=e[i].value.length,i++;if(i==e.length)return}if(s!=t){var o=e[i].value.substring(t-s);o.length>n-t&&(o=o.substring(0,n-t)),r.push({type:e[i].type,value:o}),s=t+o.length,i+=1}while(s<n&&i<e.length){var o=e[i].value;o.length+s>n?r.push({type:e[i].type,value:o.substring(0,n-s)}):r.push(e[i]),s+=o.length,i+=1}}var n=this.session,r=[],s=n.getTokens(e);return t.walk(function(e,t,o,u,a){e!=null?r.push({type:\"fold\",value:e}):(a&&(s=n.getTokens(t)),s.length&&i(s,u,o))},t.end.row,this.session.getLine(t.end.row).length),r},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){}}).call(a.prototype),t.Text=a}),ace.define(\"ace/layer/cursor\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"],function(e,t,n){\"use strict\";var r=e(\"../lib/dom\"),i=function(e){this.element=r.createElement(\"div\"),this.element.className=\"ace_layer ace_cursor-layer\",e.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),r.addCssClass(this.element,\"ace_hidden-cursors\"),this.$updateCursors=this.$updateOpacity.bind(this)};(function(){this.$updateOpacity=function(e){var t=this.cursors;for(var n=t.length;n--;)r.setStyle(t[n].style,\"opacity\",e?\"\":\"0\")},this.$startCssAnimation=function(){var e=this.cursors;for(var t=e.length;t--;)e[t].style.animationDuration=this.blinkInterval+\"ms\";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&r.addCssClass(this.element,\"ace_animate-blinking\")}.bind(this))},this.$stopCssAnimation=function(){this.$isAnimating=!1,r.removeCssClass(this.element,\"ace_animate-blinking\")},this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setBlinking=function(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())},this.setBlinkInterval=function(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())},this.setSmoothBlinking=function(e){e!=this.smoothBlinking&&(this.smoothBlinking=e,r.setCssClass(this.element,\"ace_smooth-blinking\",e),this.$updateCursors(!0),this.restartTimer())},this.addCursor=function(){var e=r.createElement(\"div\");return e.className=\"ace_cursor\",this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}},this.hideCursor=function(){this.isVisible=!1,r.addCssClass(this.element,\"ace_hidden-cursors\"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,r.removeCssClass(this.element,\"ace_hidden-cursors\"),this.restartTimer()},this.restartTimer=function(){var e=this.$updateCursors;clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,r.removeCssClass(this.element,\"ace_smooth-blinking\")),e(!0);if(!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&r.addCssClass(this.element,\"ace_smooth-blinking\")}.bind(this)));if(r.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var t=function(){this.timeoutId=setTimeout(function(){e(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){e(!0),t()},this.blinkInterval),t()}},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(e),r=this.$padding+(this.session.$bidiHandler.isBidiRow(n.row,e.row)?this.session.$bidiHandler.getPosLeft(n.column):n.column*this.config.characterWidth),i=(n.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:r,top:i}},this.isCursorInView=function(e,t){return e.top>=0&&e.top<t.maxHeight},this.update=function(e){this.config=e;var t=this.session.$selectionMarkers,n=0,i=0;if(t===undefined||t.length===0)t=[{cursor:null}];for(var n=0,s=t.length;n<s;n++){var o=this.getPixelPosition(t[n].cursor,!0);if((o.top>e.height+e.offset||o.top<0)&&n>1)continue;var u=this.cursors[i++]||this.addCursor(),a=u.style;this.drawCursor?this.drawCursor(u,o,e,t[n],this.session):this.isCursorInView(o,e)?(r.setStyle(a,\"display\",\"block\"),r.translate(u,o.left,o.top),r.setStyle(a,\"width\",Math.round(e.characterWidth)+\"px\"),r.setStyle(a,\"height\",e.lineHeight+\"px\")):r.setStyle(a,\"display\",\"none\")}while(this.cursors.length>i)this.removeCursor();var f=this.session.getOverwrite();this.$setOverwrite(f),this.$pixelPos=o,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(e){e!=this.overwrite&&(this.overwrite=e,e?r.addCssClass(this.element,\"ace_overwrite-cursors\"):r.removeCssClass(this.element,\"ace_overwrite-cursors\"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(i.prototype),t.Cursor=i}),ace.define(\"ace/scrollbar\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/lib/event\",\"ace/lib/event_emitter\"],function(e,t,n){\"use strict\";var r=e(\"./lib/oop\"),i=e(\"./lib/dom\"),s=e(\"./lib/event\"),o=e(\"./lib/event_emitter\").EventEmitter,u=32768,a=function(e){this.element=i.createElement(\"div\"),this.element.className=\"ace_scrollbar ace_scrollbar\"+this.classSuffix,this.inner=i.createElement(\"div\"),this.inner.className=\"ace_scrollbar-inner\",this.inner.textContent=\"\\u00a0\",this.element.appendChild(this.inner),e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,s.addListener(this.element,\"scroll\",this.onScroll.bind(this)),s.addListener(this.element,\"mousedown\",s.preventDefault)};(function(){r.implement(this,o),this.setVisible=function(e){this.element.style.display=e?\"\":\"none\",this.isVisible=e,this.coeff=1}}).call(a.prototype);var f=function(e,t){a.call(this,e),this.scrollTop=0,this.scrollHeight=0,t.$scrollbarWidth=this.width=i.scrollbarWidth(e.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+\"px\",this.$minWidth=0};r.inherits(f,a),function(){this.classSuffix=\"-v\",this.onScroll=function(){if(!this.skipEvent){this.scrollTop=this.element.scrollTop;if(this.coeff!=1){var e=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-e)/(this.coeff-e)}this._emit(\"scroll\",{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(e){this.element.style.height=e+\"px\"},this.setInnerHeight=this.setScrollHeight=function(e){this.scrollHeight=e,e>u?(this.coeff=u/e,e=u):this.coeff!=1&&(this.coeff=1),this.inner.style.height=e+\"px\"},this.setScrollTop=function(e){this.scrollTop!=e&&(this.skipEvent=!0,this.scrollTop=e,this.element.scrollTop=e*this.coeff)}}.call(f.prototype);var l=function(e,t){a.call(this,e),this.scrollLeft=0,this.height=t.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+\"px\"};r.inherits(l,a),function(){this.classSuffix=\"-h\",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit(\"scroll\",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(e){this.element.style.width=e+\"px\"},this.setInnerWidth=function(e){this.inner.style.width=e+\"px\"},this.setScrollWidth=function(e){this.inner.style.width=e+\"px\"},this.setScrollLeft=function(e){this.scrollLeft!=e&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=e)}}.call(l.prototype),t.ScrollBar=f,t.ScrollBarV=f,t.ScrollBarH=l,t.VScrollBar=f,t.HScrollBar=l}),ace.define(\"ace/scrollbar_custom\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/lib/event\",\"ace/lib/event_emitter\"],function(e,t,n){\"use strict\";var r=e(\"./lib/oop\"),i=e(\"./lib/dom\"),s=e(\"./lib/event\"),o=e(\"./lib/event_emitter\").EventEmitter;i.importCssString(\".ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{\\n  position: absolute;\\n  background: rgba(128, 128, 128, 0.6);\\n  -moz-box-sizing: border-box;\\n  box-sizing: border-box;\\n  border: 1px solid #bbb;\\n  border-radius: 2px;\\n  z-index: 8;\\n}\\n.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {\\n  position: absolute;\\n  z-index: 6;\\n  background: none;\\n  overflow: hidden!important;\\n}\\n.ace_editor>.ace_sb-v {\\n  z-index: 6;\\n  right: 0;\\n  top: 0;\\n  width: 12px;\\n}\\n.ace_editor>.ace_sb-v div {\\n  z-index: 8;\\n  right: 0;\\n  width: 100%;\\n}\\n.ace_editor>.ace_sb-h {\\n  bottom: 0;\\n  left: 0;\\n  height: 12px;\\n}\\n.ace_editor>.ace_sb-h div {\\n  bottom: 0;\\n  height: 100%;\\n}\\n.ace_editor>.ace_sb_grabbed {\\n  z-index: 8;\\n  background: #000;\\n}\",\"ace_scrollbar.css\",!1);var u=function(e){this.element=i.createElement(\"div\"),this.element.className=\"ace_sb\"+this.classSuffix,this.inner=i.createElement(\"div\"),this.inner.className=\"\",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,s.addMultiMouseDownListener(this.element,[500,300,300],this,\"onMouseDown\")};(function(){r.implement(this,o),this.setVisible=function(e){this.element.style.display=e?\"\":\"none\",this.isVisible=e,this.coeff=1}}).call(u.prototype);var a=function(e,t){u.call(this,e),this.scrollTop=0,this.scrollHeight=0,this.parent=e,this.width=this.VScrollWidth,this.renderer=t,this.inner.style.width=this.element.style.width=(this.width||15)+\"px\",this.$minWidth=0};r.inherits(a,u),function(){this.classSuffix=\"-v\",r.implement(this,o),this.onMouseDown=function(e,t){if(e!==\"mousedown\")return;if(s.getButton(t)!==0||t.detail===2)return;if(t.target===this.inner){var n=this,r=t.clientY,i=function(e){r=e.clientY},o=function(){clearInterval(l)},u=t.clientY,a=this.thumbTop,f=function(){if(r===undefined)return;var e=n.scrollTopFromThumbTop(a+r-u);if(e===n.scrollTop)return;n._emit(\"scroll\",{data:e})};s.capture(this.inner,i,o);var l=setInterval(f,20);return s.preventDefault(t)}var c=t.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit(\"scroll\",{data:this.scrollTopFromThumbTop(c)}),s.preventDefault(t)},this.getHeight=function(){return this.height},this.scrollTopFromThumbTop=function(e){var t=e*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return t>>=0,t<0?t=0:t>this.pageHeight-this.viewHeight&&(t=this.pageHeight-this.viewHeight),t},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(e){this.height=Math.max(0,e),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},this.setInnerHeight=this.setScrollHeight=function(e,t){if(this.pageHeight===e&&!t)return;this.pageHeight=e,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+\"px\",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit(\"scroll\",{data:this.scrollTop}))},this.setScrollTop=function(e){this.scrollTop=e,e<0&&(e=0),this.thumbTop=e*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+\"px\"}}.call(a.prototype);var f=function(e,t){u.call(this,e),this.scrollLeft=0,this.scrollWidth=0,this.height=this.HScrollHeight,this.inner.style.height=this.element.style.height=(this.height||12)+\"px\",this.renderer=t};r.inherits(f,u),function(){this.classSuffix=\"-h\",r.implement(this,o),this.onMouseDown=function(e,t){if(e!==\"mousedown\")return;if(s.getButton(t)!==0||t.detail===2)return;if(t.target===this.inner){var n=this,r=t.clientX,i=function(e){r=e.clientX},o=function(){clearInterval(l)},u=t.clientX,a=this.thumbLeft,f=function(){if(r===undefined)return;var e=n.scrollLeftFromThumbLeft(a+r-u);if(e===n.scrollLeft)return;n._emit(\"scroll\",{data:e})};s.capture(this.inner,i,o);var l=setInterval(f,20);return s.preventDefault(t)}var c=t.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit(\"scroll\",{data:this.scrollLeftFromThumbLeft(c)}),s.preventDefault(t)},this.getHeight=function(){return this.isVisible?this.height:0},this.scrollLeftFromThumbLeft=function(e){var t=e*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return t>>=0,t<0?t=0:t>this.pageWidth-this.viewWidth&&(t=this.pageWidth-this.viewWidth),t},this.setWidth=function(e){this.width=Math.max(0,e),this.element.style.width=this.width+\"px\",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},this.setInnerWidth=this.setScrollWidth=function(e,t){if(this.pageWidth===e&&!t)return;this.pageWidth=e,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+\"px\",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit(\"scroll\",{data:this.scrollLeft}))},this.setScrollLeft=function(e){this.scrollLeft=e,e<0&&(e=0),this.thumbLeft=e*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+\"px\"}}.call(f.prototype),t.ScrollBar=a,t.ScrollBarV=a,t.ScrollBarH=f,t.VScrollBar=a,t.HScrollBar=f}),ace.define(\"ace/renderloop\",[\"require\",\"exports\",\"module\",\"ace/lib/event\"],function(e,t,n){\"use strict\";var r=e(\"./lib/event\"),i=function(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=t||window;var n=this;this._flush=function(e){n.pending=!1;var t=n.changes;t&&(r.blockIdle(100),n.changes=0,n.onRender(t));if(n.changes){if(n.$recursionLimit--<0)return;n.schedule()}else n.$recursionLimit=2}};(function(){this.schedule=function(e){this.changes=this.changes|e,this.changes&&!this.pending&&(r.nextFrame(this._flush),this.pending=!0)},this.clear=function(e){var t=this.changes;return this.changes=0,t}}).call(i.prototype),t.RenderLoop=i}),ace.define(\"ace/layer/font_metrics\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/lib/event\",\"ace/lib/useragent\",\"ace/lib/event_emitter\"],function(e,t,n){var r=e(\"../lib/oop\"),i=e(\"../lib/dom\"),s=e(\"../lib/lang\"),o=e(\"../lib/event\"),u=e(\"../lib/useragent\"),a=e(\"../lib/event_emitter\").EventEmitter,f=250,l=typeof ResizeObserver==\"function\",c=200,h=t.FontMetrics=function(e,t){this.charCount=t||f,this.el=i.createElement(\"div\"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=i.createElement(\"div\"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=i.createElement(\"div\"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),e.appendChild(this.el),this.$measureNode.textContent=s.stringRepeat(\"X\",this.charCount),this.$characterSize={width:0,height:0},l?this.$addObserver():this.checkForSizeChanges()};(function(){r.implement(this,a),this.$characterSize={width:0,height:0},this.$setMeasureNodeStyles=function(e,t){e.width=e.height=\"auto\",e.left=e.top=\"0px\",e.visibility=\"hidden\",e.position=\"absolute\",e.whiteSpace=\"pre\",u.isIE<8?e[\"font-family\"]=\"inherit\":e.font=\"inherit\",e.overflow=t?\"hidden\":\"visible\"},this.checkForSizeChanges=function(e){e===undefined&&(e=this.$measureSizes());if(e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight=\"bold\";var t=this.$measureSizes();this.$measureNode.style.fontWeight=\"\",this.$characterSize=e,this.charSizes=Object.create(null),this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit(\"changeCharacterSize\",{data:e})}},this.$addObserver=function(){var e=this;this.$observer=new window.ResizeObserver(function(t){e.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var e=this;return this.$pollSizeChangesTimer=o.onIdle(function t(){e.checkForSizeChanges(),o.onIdle(t,500)},500)},this.setPolling=function(e){e?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(e){e=e||this.$measureNode;var t=e.getBoundingClientRect(),n={height:t.height,width:t.width/this.charCount};return n.width===0||n.height===0?null:n},this.$measureCharWidth=function(e){this.$main.textContent=s.stringRepeat(e,this.charCount);var t=this.$main.getBoundingClientRect();return t.width/this.charCount},this.getCharacterWidth=function(e){var t=this.charSizes[e];return t===undefined&&(t=this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width),t},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},this.$getZoom=function e(t){return!t||!t.parentElement?1:(window.getComputedStyle(t).zoom||1)*e(t.parentElement)},this.$initTransformMeasureNodes=function(){var e=function(e,t){return[\"div\",{style:\"position: absolute;top:\"+e+\"px;left:\"+t+\"px;\"}]};this.els=i.buildDom([e(0,0),e(c,0),e(0,c),e(c,c)],this.el)},this.transformCoordinates=function(e,t){function r(e,t,n){var r=e[1]*t[0]-e[0]*t[1];return[(-t[1]*n[0]+t[0]*n[1])/r,(+e[1]*n[0]-e[0]*n[1])/r]}function i(e,t){return[e[0]-t[0],e[1]-t[1]]}function s(e,t){return[e[0]+t[0],e[1]+t[1]]}function o(e,t){return[e*t[0],e*t[1]]}function u(e){var t=e.getBoundingClientRect();return[t.left,t.top]}if(e){var n=this.$getZoom(this.el);e=o(1/n,e)}this.els||this.$initTransformMeasureNodes();var a=u(this.els[0]),f=u(this.els[1]),l=u(this.els[2]),h=u(this.els[3]),p=r(i(h,f),i(h,l),i(s(f,l),s(h,a))),d=o(1+p[0],i(f,a)),v=o(1+p[1],i(l,a));if(t){var m=t,g=p[0]*m[0]/c+p[1]*m[1]/c+1,y=s(o(m[0],d),o(m[1],v));return s(o(1/g/c,y),a)}var b=i(e,a),w=r(i(d,o(p[0],b)),i(v,o(p[1],b)),b);return o(c,w)}}).call(h.prototype)}),ace.define(\"ace/css/editor.css\",[\"require\",\"exports\",\"module\"],function(e,t,n){n.exports='/*\\nstyles = []\\nfor (var i = 1; i < 16; i++) {\\n    styles.push(\".ace_br\" + i + \"{\" + (\\n        [\"top-left\", \"top-right\", \"bottom-right\", \"bottom-left\"]\\n    ).map(function(x, j) {\\n        return i & (1<<j) ? \"border-\" + x + \"-radius: 3px;\" : \"\" \\n    }).filter(Boolean).join(\" \") + \"}\")\\n}\\nstyles.join(\"\\\\n\")\\n*/\\n.ace_br1 {border-top-left-radius    : 3px;}\\n.ace_br2 {border-top-right-radius   : 3px;}\\n.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}\\n.ace_br4 {border-bottom-right-radius: 3px;}\\n.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}\\n.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}\\n.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}\\n.ace_br8 {border-bottom-left-radius : 3px;}\\n.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}\\n.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}\\n.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}\\n.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\\n.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\\n.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\\n.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}\\n\\n\\n.ace_editor {\\n    position: relative;\\n    overflow: hidden;\\n    padding: 0;\\n    font: 12px/normal \\'Monaco\\', \\'Menlo\\', \\'Ubuntu Mono\\', \\'Consolas\\', \\'source-code-pro\\', monospace;\\n    direction: ltr;\\n    text-align: left;\\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\\n}\\n\\n.ace_scroller {\\n    position: absolute;\\n    overflow: hidden;\\n    top: 0;\\n    bottom: 0;\\n    background-color: inherit;\\n    -ms-user-select: none;\\n    -moz-user-select: none;\\n    -webkit-user-select: none;\\n    user-select: none;\\n    cursor: text;\\n}\\n\\n.ace_content {\\n    position: absolute;\\n    box-sizing: border-box;\\n    min-width: 100%;\\n    contain: style size layout;\\n    font-variant-ligatures: no-common-ligatures;\\n}\\n\\n.ace_dragging .ace_scroller:before{\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    content: \\'\\';\\n    background: rgba(250, 250, 250, 0.01);\\n    z-index: 1000;\\n}\\n.ace_dragging.ace_dark .ace_scroller:before{\\n    background: rgba(0, 0, 0, 0.01);\\n}\\n\\n.ace_gutter {\\n    position: absolute;\\n    overflow : hidden;\\n    width: auto;\\n    top: 0;\\n    bottom: 0;\\n    left: 0;\\n    cursor: default;\\n    z-index: 4;\\n    -ms-user-select: none;\\n    -moz-user-select: none;\\n    -webkit-user-select: none;\\n    user-select: none;\\n    contain: style size layout;\\n}\\n\\n.ace_gutter-active-line {\\n    position: absolute;\\n    left: 0;\\n    right: 0;\\n}\\n\\n.ace_scroller.ace_scroll-left {\\n    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;\\n}\\n\\n.ace_gutter-cell {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    padding-left: 19px;\\n    padding-right: 6px;\\n    background-repeat: no-repeat;\\n}\\n\\n.ace_gutter-cell.ace_error {\\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==\");\\n    background-repeat: no-repeat;\\n    background-position: 2px center;\\n}\\n\\n.ace_gutter-cell.ace_warning {\\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==\");\\n    background-position: 2px center;\\n}\\n\\n.ace_gutter-cell.ace_info {\\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=\");\\n    background-position: 2px center;\\n}\\n.ace_dark .ace_gutter-cell.ace_info {\\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC\");\\n}\\n\\n.ace_scrollbar {\\n    contain: strict;\\n    position: absolute;\\n    right: 0;\\n    bottom: 0;\\n    z-index: 6;\\n}\\n\\n.ace_scrollbar-inner {\\n    position: absolute;\\n    cursor: text;\\n    left: 0;\\n    top: 0;\\n}\\n\\n.ace_scrollbar-v{\\n    overflow-x: hidden;\\n    overflow-y: scroll;\\n    top: 0;\\n}\\n\\n.ace_scrollbar-h {\\n    overflow-x: scroll;\\n    overflow-y: hidden;\\n    left: 0;\\n}\\n\\n.ace_print-margin {\\n    position: absolute;\\n    height: 100%;\\n}\\n\\n.ace_text-input {\\n    position: absolute;\\n    z-index: 0;\\n    width: 0.5em;\\n    height: 1em;\\n    opacity: 0;\\n    background: transparent;\\n    -moz-appearance: none;\\n    appearance: none;\\n    border: none;\\n    resize: none;\\n    outline: none;\\n    overflow: hidden;\\n    font: inherit;\\n    padding: 0 1px;\\n    margin: 0 -1px;\\n    contain: strict;\\n    -ms-user-select: text;\\n    -moz-user-select: text;\\n    -webkit-user-select: text;\\n    user-select: text;\\n    /*with `pre-line` chrome inserts &nbsp; instead of space*/\\n    white-space: pre!important;\\n}\\n.ace_text-input.ace_composition {\\n    background: transparent;\\n    color: inherit;\\n    z-index: 1000;\\n    opacity: 1;\\n}\\n.ace_composition_placeholder { color: transparent }\\n.ace_composition_marker { \\n    border-bottom: 1px solid;\\n    position: absolute;\\n    border-radius: 0;\\n    margin-top: 1px;\\n}\\n\\n[ace_nocontext=true] {\\n    transform: none!important;\\n    filter: none!important;\\n    clip-path: none!important;\\n    mask : none!important;\\n    contain: none!important;\\n    perspective: none!important;\\n    mix-blend-mode: initial!important;\\n    z-index: auto;\\n}\\n\\n.ace_layer {\\n    z-index: 1;\\n    position: absolute;\\n    overflow: hidden;\\n    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/\\n    word-wrap: normal;\\n    white-space: pre;\\n    height: 100%;\\n    width: 100%;\\n    box-sizing: border-box;\\n    /* setting pointer-events: auto; on node under the mouse, which changes\\n        during scroll, will break mouse wheel scrolling in Safari */\\n    pointer-events: none;\\n}\\n\\n.ace_gutter-layer {\\n    position: relative;\\n    width: auto;\\n    text-align: right;\\n    pointer-events: auto;\\n    height: 1000000px;\\n    contain: style size layout;\\n}\\n\\n.ace_text-layer {\\n    font: inherit !important;\\n    position: absolute;\\n    height: 1000000px;\\n    width: 1000000px;\\n    contain: style size layout;\\n}\\n\\n.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {\\n    contain: style size layout;\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n}\\n\\n.ace_hidpi .ace_text-layer,\\n.ace_hidpi .ace_gutter-layer,\\n.ace_hidpi .ace_content,\\n.ace_hidpi .ace_gutter {\\n    contain: strict;\\n    will-change: transform;\\n}\\n.ace_hidpi .ace_text-layer > .ace_line, \\n.ace_hidpi .ace_text-layer > .ace_line_group {\\n    contain: strict;\\n}\\n\\n.ace_cjk {\\n    display: inline-block;\\n    text-align: center;\\n}\\n\\n.ace_cursor-layer {\\n    z-index: 4;\\n}\\n\\n.ace_cursor {\\n    z-index: 4;\\n    position: absolute;\\n    box-sizing: border-box;\\n    border-left: 2px solid;\\n    /* workaround for smooth cursor repaintng whole screen in chrome */\\n    transform: translatez(0);\\n}\\n\\n.ace_multiselect .ace_cursor {\\n    border-left-width: 1px;\\n}\\n\\n.ace_slim-cursors .ace_cursor {\\n    border-left-width: 1px;\\n}\\n\\n.ace_overwrite-cursors .ace_cursor {\\n    border-left-width: 0;\\n    border-bottom: 1px solid;\\n}\\n\\n.ace_hidden-cursors .ace_cursor {\\n    opacity: 0.2;\\n}\\n\\n.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {\\n    opacity: 0;\\n}\\n\\n.ace_smooth-blinking .ace_cursor {\\n    transition: opacity 0.18s;\\n}\\n\\n.ace_animate-blinking .ace_cursor {\\n    animation-duration: 1000ms;\\n    animation-timing-function: step-end;\\n    animation-name: blink-ace-animate;\\n    animation-iteration-count: infinite;\\n}\\n\\n.ace_animate-blinking.ace_smooth-blinking .ace_cursor {\\n    animation-duration: 1000ms;\\n    animation-timing-function: ease-in-out;\\n    animation-name: blink-ace-animate-smooth;\\n}\\n    \\n@keyframes blink-ace-animate {\\n    from, to { opacity: 1; }\\n    60% { opacity: 0; }\\n}\\n\\n@keyframes blink-ace-animate-smooth {\\n    from, to { opacity: 1; }\\n    45% { opacity: 1; }\\n    60% { opacity: 0; }\\n    85% { opacity: 0; }\\n}\\n\\n.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {\\n    position: absolute;\\n    z-index: 3;\\n}\\n\\n.ace_marker-layer .ace_selection {\\n    position: absolute;\\n    z-index: 5;\\n}\\n\\n.ace_marker-layer .ace_bracket {\\n    position: absolute;\\n    z-index: 6;\\n}\\n\\n.ace_marker-layer .ace_error_bracket {\\n    position: absolute;\\n    border-bottom: 1px solid #DE5555;\\n    border-radius: 0;\\n}\\n\\n.ace_marker-layer .ace_active-line {\\n    position: absolute;\\n    z-index: 2;\\n}\\n\\n.ace_marker-layer .ace_selected-word {\\n    position: absolute;\\n    z-index: 4;\\n    box-sizing: border-box;\\n}\\n\\n.ace_line .ace_fold {\\n    box-sizing: border-box;\\n\\n    display: inline-block;\\n    height: 11px;\\n    margin-top: -2px;\\n    vertical-align: middle;\\n\\n    background-image:\\n        url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII=\"),\\n        url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=\");\\n    background-repeat: no-repeat, repeat-x;\\n    background-position: center center, top left;\\n    color: transparent;\\n\\n    border: 1px solid black;\\n    border-radius: 2px;\\n\\n    cursor: pointer;\\n    pointer-events: auto;\\n}\\n\\n.ace_dark .ace_fold {\\n}\\n\\n.ace_fold:hover{\\n    background-image:\\n        url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII=\"),\\n        url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC\");\\n}\\n\\n.ace_tooltip {\\n    background-color: #FFF;\\n    background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));\\n    border: 1px solid gray;\\n    border-radius: 1px;\\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\\n    color: black;\\n    max-width: 100%;\\n    padding: 3px 4px;\\n    position: fixed;\\n    z-index: 999999;\\n    box-sizing: border-box;\\n    cursor: default;\\n    white-space: pre;\\n    word-wrap: break-word;\\n    line-height: normal;\\n    font-style: normal;\\n    font-weight: normal;\\n    letter-spacing: normal;\\n    pointer-events: none;\\n}\\n\\n.ace_folding-enabled > .ace_gutter-cell {\\n    padding-right: 13px;\\n}\\n\\n.ace_fold-widget {\\n    box-sizing: border-box;\\n\\n    margin: 0 -12px 0 1px;\\n    display: none;\\n    width: 11px;\\n    vertical-align: top;\\n\\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==\");\\n    background-repeat: no-repeat;\\n    background-position: center;\\n\\n    border-radius: 3px;\\n    \\n    border: 1px solid transparent;\\n    cursor: pointer;\\n}\\n\\n.ace_folding-enabled .ace_fold-widget {\\n    display: inline-block;   \\n}\\n\\n.ace_fold-widget.ace_end {\\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==\");\\n}\\n\\n.ace_fold-widget.ace_closed {\\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==\");\\n}\\n\\n.ace_fold-widget:hover {\\n    border: 1px solid rgba(0, 0, 0, 0.3);\\n    background-color: rgba(255, 255, 255, 0.2);\\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\\n}\\n\\n.ace_fold-widget:active {\\n    border: 1px solid rgba(0, 0, 0, 0.4);\\n    background-color: rgba(0, 0, 0, 0.05);\\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\\n}\\n/**\\n * Dark version for fold widgets\\n */\\n.ace_dark .ace_fold-widget {\\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC\");\\n}\\n.ace_dark .ace_fold-widget.ace_end {\\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==\");\\n}\\n.ace_dark .ace_fold-widget.ace_closed {\\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==\");\\n}\\n.ace_dark .ace_fold-widget:hover {\\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\\n    background-color: rgba(255, 255, 255, 0.1);\\n}\\n.ace_dark .ace_fold-widget:active {\\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\\n}\\n\\n.ace_inline_button {\\n    border: 1px solid lightgray;\\n    display: inline-block;\\n    margin: -1px 8px;\\n    padding: 0 5px;\\n    pointer-events: auto;\\n    cursor: pointer;\\n}\\n.ace_inline_button:hover {\\n    border-color: gray;\\n    background: rgba(200,200,200,0.2);\\n    display: inline-block;\\n    pointer-events: auto;\\n}\\n\\n.ace_fold-widget.ace_invalid {\\n    background-color: #FFB4B4;\\n    border-color: #DE5555;\\n}\\n\\n.ace_fade-fold-widgets .ace_fold-widget {\\n    transition: opacity 0.4s ease 0.05s;\\n    opacity: 0;\\n}\\n\\n.ace_fade-fold-widgets:hover .ace_fold-widget {\\n    transition: opacity 0.05s ease 0.05s;\\n    opacity:1;\\n}\\n\\n.ace_underline {\\n    text-decoration: underline;\\n}\\n\\n.ace_bold {\\n    font-weight: bold;\\n}\\n\\n.ace_nobold .ace_bold {\\n    font-weight: normal;\\n}\\n\\n.ace_italic {\\n    font-style: italic;\\n}\\n\\n\\n.ace_error-marker {\\n    background-color: rgba(255, 0, 0,0.2);\\n    position: absolute;\\n    z-index: 9;\\n}\\n\\n.ace_highlight-marker {\\n    background-color: rgba(255, 255, 0,0.2);\\n    position: absolute;\\n    z-index: 8;\\n}\\n\\n.ace_mobile-menu {\\n    position: absolute;\\n    line-height: 1.5;\\n    border-radius: 4px;\\n    -ms-user-select: none;\\n    -moz-user-select: none;\\n    -webkit-user-select: none;\\n    user-select: none;\\n    background: white;\\n    box-shadow: 1px 3px 2px grey;\\n    border: 1px solid #dcdcdc;\\n    color: black;\\n}\\n.ace_dark > .ace_mobile-menu {\\n    background: #333;\\n    color: #ccc;\\n    box-shadow: 1px 3px 2px grey;\\n    border: 1px solid #444;\\n\\n}\\n.ace_mobile-button {\\n    padding: 2px;\\n    cursor: pointer;\\n    overflow: hidden;\\n}\\n.ace_mobile-button:hover {\\n    background-color: #eee;\\n    opacity:1;\\n}\\n.ace_mobile-button:active {\\n    background-color: #ddd;\\n}\\n\\n.ace_placeholder {\\n    font-family: arial;\\n    transform: scale(0.9);\\n    transform-origin: left;\\n    white-space: pre;\\n    opacity: 0.7;\\n    margin: 0 10px;\\n}'}),ace.define(\"ace/layer/decorators\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/oop\",\"ace/lib/event_emitter\"],function(e,t,n){\"use strict\";var r=e(\"../lib/dom\"),i=e(\"../lib/oop\"),s=e(\"../lib/event_emitter\").EventEmitter,o=function(e,t){this.canvas=r.createElement(\"canvas\"),this.renderer=t,this.pixelRatio=1,this.maxHeight=t.layerConfig.maxHeight,this.lineHeight=t.layerConfig.lineHeight,this.canvasHeight=e.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=e.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top=\"0px\",this.canvas.style.right=\"0px\",this.canvas.style.zIndex=\"7px\",this.canvas.style.position=\"absolute\",this.colors={},this.colors.dark={error:\"rgba(255, 18, 18, 1)\",warning:\"rgba(18, 136, 18, 1)\",info:\"rgba(18, 18, 136, 1)\"},this.colors.light={error:\"rgb(255,51,51)\",warning:\"rgb(32,133,72)\",info:\"rgb(35,68,138)\"},e.element.appendChild(this.canvas)};(function(){i.implement(this,s),this.$updateDecorators=function(e){function i(e,t){return e.priority<t.priority?-1:e.priority>t.priority?1:0}var t=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;if(e){this.maxHeight=e.maxHeight,this.lineHeight=e.lineHeight,this.canvasHeight=e.height;var n=(e.lastRow+1)*this.lineHeight;n<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight}var r=this.canvas.getContext(\"2d\"),s=this.renderer.session.$annotations;r.clearRect(0,0,this.canvas.width,this.canvas.height);if(s){var o={info:1,warning:2,error:3};s.forEach(function(e){e.priority=o[e.type]||null}),s=s.sort(i);var u=this.renderer.session.$foldData;for(var a=0;a<s.length;a++){var f=s[a].row,l=this.compensateFoldRows(f,u),c=Math.round((f-l)*this.lineHeight*this.heightRatio),h=Math.round((f-l)*this.lineHeight*this.heightRatio),p=Math.round(((f-l)*this.lineHeight+this.lineHeight)*this.heightRatio),d=p-h;if(d<this.minDecorationHeight){var v=(h+p)/2|0;v<this.halfMinDecorationHeight?v=this.halfMinDecorationHeight:v+this.halfMinDecorationHeight>this.canvasHeight&&(v=this.canvasHeight-this.halfMinDecorationHeight),h=Math.round(v-this.halfMinDecorationHeight),p=Math.round(v+this.halfMinDecorationHeight)}r.fillStyle=t[s[a].type]||null,r.fillRect(0,c,this.canvasWidth,p-h)}}var m=this.renderer.session.selection.getCursor();if(m){var l=this.compensateFoldRows(m.row,u),c=Math.round((m.row-l)*this.lineHeight*this.heightRatio);r.fillStyle=\"rgba(0, 0, 0, 0.5)\",r.fillRect(0,c,this.canvasWidth,2)}},this.compensateFoldRows=function(e,t){var n=0;if(t&&t.length>0)for(var r=0;r<t.length;r++)e>t[r].start.row&&e<t[r].end.row?n+=e-t[r].start.row:e>=t[r].end.row&&(n+=t[r].end.row-t[r].start.row);return n}}).call(o.prototype),t.Decorator=o}),ace.define(\"ace/virtual_renderer\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/config\",\"ace/layer/gutter\",\"ace/layer/marker\",\"ace/layer/text\",\"ace/layer/cursor\",\"ace/scrollbar\",\"ace/scrollbar\",\"ace/scrollbar_custom\",\"ace/scrollbar_custom\",\"ace/renderloop\",\"ace/layer/font_metrics\",\"ace/lib/event_emitter\",\"ace/css/editor.css\",\"ace/layer/decorators\",\"ace/lib/useragent\"],function(e,t,n){\"use strict\";var r=e(\"./lib/oop\"),i=e(\"./lib/dom\"),s=e(\"./config\"),o=e(\"./layer/gutter\").Gutter,u=e(\"./layer/marker\").Marker,a=e(\"./layer/text\").Text,f=e(\"./layer/cursor\").Cursor,l=e(\"./scrollbar\").HScrollBar,c=e(\"./scrollbar\").VScrollBar,h=e(\"./scrollbar_custom\").HScrollBar,p=e(\"./scrollbar_custom\").VScrollBar,d=e(\"./renderloop\").RenderLoop,v=e(\"./layer/font_metrics\").FontMetrics,m=e(\"./lib/event_emitter\").EventEmitter,g=e(\"./css/editor.css\"),y=e(\"./layer/decorators\").Decorator,b=e(\"./lib/useragent\"),w=b.isIE;i.importCssString(g,\"ace_editor.css\",!1);var E=function(e,t){var n=this;this.container=e||i.createElement(\"div\"),i.addCssClass(this.container,\"ace_editor\"),i.HI_DPI&&i.addCssClass(this.container,\"ace_hidpi\"),this.setTheme(t),s.get(\"useStrictCSP\")==null&&s.set(\"useStrictCSP\",!1),this.$gutter=i.createElement(\"div\"),this.$gutter.className=\"ace_gutter\",this.container.appendChild(this.$gutter),this.$gutter.setAttribute(\"aria-hidden\",!0),this.scroller=i.createElement(\"div\"),this.scroller.className=\"ace_scroller\",this.container.appendChild(this.scroller),this.content=i.createElement(\"div\"),this.content.className=\"ace_content\",this.scroller.appendChild(this.content),this.$gutterLayer=new o(this.$gutter),this.$gutterLayer.on(\"changeGutterWidth\",this.onGutterResize.bind(this)),this.$markerBack=new u(this.content);var r=this.$textLayer=new a(this.content);this.canvas=r.element,this.$markerFront=new u(this.content),this.$cursorLayer=new f(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new c(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.on(\"scroll\",function(e){n.$scrollAnimation||n.session.setScrollTop(e.data-n.scrollMargin.top)}),this.scrollBarH.on(\"scroll\",function(e){n.$scrollAnimation||n.session.setScrollLeft(e.data-n.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new v(this.container,this.$textLayer.MAX_CHUNK_LENGTH),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on(\"changeCharacterSize\",function(e){n.updateCharacterSize(),n.onResize(!0,n.gutterWidth,n.$size.width,n.$size.height),n._signal(\"changeCharacterSize\",e)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!b.isIOS,this.$loop=new d(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),s.resetOptions(this),s._signal(\"renderer\",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,r.implement(this,m),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle(\"ace_nobold\",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),i.setStyle(this.scroller.style,\"line-height\",this.lineHeight+\"px\")},this.setSession=function(e){this.session&&this.session.doc.off(\"changeNewLineMode\",this.onChangeNewLineMode),this.session=e,e&&this.scrollMargin.top&&e.getScrollTop()<=0&&e.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e);if(!e)return;this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on(\"changeNewLineMode\",this.onChangeNewLineMode)},this.updateLines=function(e,t,n){t===undefined&&(t=Infinity),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t};if(this.$changedLines.lastRow<this.layerConfig.firstRow){if(!n)return;this.$changedLines.lastRow=this.layerConfig.lastRow}if(this.$changedLines.firstRow>this.layerConfig.lastRow)return;this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(e,t,n,r){if(this.resizing>2)return;this.resizing>0?this.resizing++:this.resizing=e?1:0;var i=this.container;r||(r=i.clientHeight||i.scrollHeight),n||(n=i.clientWidth||i.scrollWidth);var s=this.$updateCachedSize(e,t,n,r);if(!this.$size.scrollerHeight||!n&&!r)return this.resizing=0;e&&(this.$gutterLayer.$padding=null),e?this.$renderChanges(s|this.$changes,!0):this.$loop.schedule(s|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)},this.$updateCachedSize=function(e,t,n,r){r-=this.$extraHeight||0;var s=0,o=this.$size,u={width:o.width,height:o.height,scrollerHeight:o.scrollerHeight,scrollerWidth:o.scrollerWidth};r&&(e||o.height!=r)&&(o.height=r,s|=this.CHANGE_SIZE,o.scrollerHeight=o.height,this.$horizScroll&&(o.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(o.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+\"px\",s|=this.CHANGE_SCROLL);if(n&&(e||o.width!=n)){s|=this.CHANGE_SIZE,o.width=n,t==null&&(t=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=t,i.setStyle(this.scrollBarH.element.style,\"left\",t+\"px\"),i.setStyle(this.scroller.style,\"left\",t+this.margin.left+\"px\"),o.scrollerWidth=Math.max(0,n-t-this.scrollBarV.getWidth()-this.margin.h),i.setStyle(this.$gutter.style,\"left\",this.margin.left+\"px\");var a=this.scrollBarV.getWidth()+\"px\";i.setStyle(this.scrollBarH.element.style,\"right\",a),i.setStyle(this.scroller.style,\"right\",a),i.setStyle(this.scroller.style,\"bottom\",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(o.scrollerWidth);if(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)s|=this.CHANGE_FULL}return o.$dirty=!n||!r,s&&this._signal(\"resize\",u),s},this.onGutterResize=function(e){var t=this.$showGutter?e:0;t!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,t,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},this.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-this.$padding*2,t=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(t,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(e){this.setOption(\"animatedScroll\",e)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(e){this.setOption(\"showInvisibles\",e),this.session.$bidiHandler.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.getOption(\"showInvisibles\")},this.getDisplayIndentGuides=function(){return this.getOption(\"displayIndentGuides\")},this.setDisplayIndentGuides=function(e){this.setOption(\"displayIndentGuides\",e)},this.getHighlightIndentGuides=function(){return this.getOption(\"highlightIndentGuides\")},this.setHighlightIndentGuides=function(e){this.setOption(\"highlightIndentGuides\",e)},this.setShowPrintMargin=function(e){this.setOption(\"showPrintMargin\",e)},this.getShowPrintMargin=function(){return this.getOption(\"showPrintMargin\")},this.setPrintMarginColumn=function(e){this.setOption(\"printMarginColumn\",e)},this.getPrintMarginColumn=function(){return this.getOption(\"printMarginColumn\")},this.getShowGutter=function(){return this.getOption(\"showGutter\")},this.setShowGutter=function(e){return this.setOption(\"showGutter\",e)},this.getFadeFoldWidgets=function(){return this.getOption(\"fadeFoldWidgets\")},this.setFadeFoldWidgets=function(e){this.setOption(\"fadeFoldWidgets\",e)},this.setHighlightGutterLine=function(e){this.setOption(\"highlightGutterLine\",e)},this.getHighlightGutterLine=function(){return this.getOption(\"highlightGutterLine\")},this.$updatePrintMargin=function(){if(!this.$showPrintMargin&&!this.$printMarginEl)return;if(!this.$printMarginEl){var e=i.createElement(\"div\");e.className=\"ace_layer ace_print-margin-layer\",this.$printMarginEl=i.createElement(\"div\"),this.$printMarginEl.className=\"ace_print-margin\",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild)}var t=this.$printMarginEl.style;t.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+\"px\",t.visibility=this.$showPrintMargin?\"visible\":\"hidden\",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(this.$isMousePressed)return;var e=this.textarea.style,t=this.$composition;if(!this.$keepTextAreaAtCursor&&!t){i.translate(this.textarea,-100,0);return}var n=this.$cursorLayer.$pixelPos;if(!n)return;t&&t.markerRange&&(n=this.$cursorLayer.getPixelPosition(t.markerRange.start,!0));var r=this.layerConfig,s=n.top,o=n.left;s-=r.offset;var u=t&&t.useTextareaForIME?this.lineHeight:w?0:1;if(s<0||s>r.height-u){i.translate(this.textarea,0,0);return}var a=1,f=this.$size.height-u;if(!t)s+=this.lineHeight;else if(t.useTextareaForIME){var l=this.textarea.value;a=this.characterWidth*this.session.$getStringScreenWidth(l)[0]}else s+=this.lineHeight+2;o-=this.scrollLeft,o>this.$size.scrollerWidth-a&&(o=this.$size.scrollerWidth-a),o+=this.gutterWidth+this.margin.left,i.setStyle(e,\"height\",u+\"px\"),i.setStyle(e,\"width\",a+\"px\"),i.translate(this.textarea,Math.min(o,this.$size.scrollerWidth-a),Math.min(s,f))},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},this.getLastFullyVisibleRow=function(){var e=this.layerConfig,t=e.lastRow,n=this.session.documentToScreenRow(t,0)*e.lineHeight;return n-this.session.getScrollTop()>e.height-e.lineHeight?t-1:t},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(e,t,n,r){var i=this.scrollMargin;i.top=e|0,i.bottom=t|0,i.right=r|0,i.left=n|0,i.v=i.top+i.bottom,i.h=i.left+i.right,i.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-i.top),this.updateFull()},this.setMargin=function(e,t,n,r){var i=this.margin;i.top=e|0,i.bottom=t|0,i.right=r|0,i.left=n|0,i.v=i.top+i.bottom,i.h=i.left+i.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(e){this.setOption(\"hScrollBarAlwaysVisible\",e)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(e){this.setOption(\"vScrollBarAlwaysVisible\",e)},this.$updateScrollBarV=function(){var e=this.layerConfig.maxHeight,t=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(e-=(t-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>e-t&&(e=this.scrollTop+t,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(e+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(e,t){this.$changes&&(e|=this.$changes,this.$changes=0);if(!this.session||!this.container.offsetWidth||this.$frozen||!e&&!t){this.$changes|=e;return}if(this.$size.$dirty)return this.$changes|=e,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal(\"beforeRender\",e),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var n=this.layerConfig;if(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL){e|=this.$computeLayerConfig()|this.$loop.clear();if(n.firstRow!=this.layerConfig.firstRow&&n.firstRowScreen==this.layerConfig.firstRowScreen){var r=this.scrollTop+(n.firstRow-this.layerConfig.firstRow)*this.lineHeight;r>0&&(this.scrollTop=r,e|=this.CHANGE_SCROLL,e|=this.$computeLayerConfig()|this.$loop.clear())}n=this.layerConfig,this.$updateScrollBarV(),e&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),i.translate(this.content,-this.scrollLeft,-n.offset);var s=n.width+2*this.$padding+\"px\",o=n.minHeight+\"px\";i.setStyle(this.content.style,\"width\",s),i.setStyle(this.content.style,\"height\",o)}e&this.CHANGE_H_SCROLL&&(i.translate(this.content,-this.scrollLeft,-n.offset),this.scroller.className=this.scrollLeft<=0?\"ace_scroller\":\"ace_scroller ace_scroll-left\");if(e&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this._signal(\"afterRender\",e);return}if(e&this.CHANGE_SCROLL){this.$changedLines=null,e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(n):this.$textLayer.scrollLines(n),this.$showGutter&&(e&this.CHANGE_GUTTER||e&this.CHANGE_LINES?this.$gutterLayer.update(n):this.$gutterLayer.scrollLines(n)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this._signal(\"afterRender\",e);return}e&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(n)):e&this.CHANGE_LINES?((this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(n),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(n)):e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(n),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(n)):e&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(n),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(n)),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(n),this.$moveTextAreaToCursor()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(n),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(n),this._signal(\"afterRender\",e)},this.$autosize=function(){var e=this.session.getScreenLength()*this.lineHeight,t=this.$maxLines*this.lineHeight,n=Math.min(t,Math.max((this.$minLines||1)*this.lineHeight,e))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(n+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&n>this.$maxPixelHeight&&(n=this.$maxPixelHeight);var r=n<=2*this.lineHeight,i=!r&&e>t;if(n!=this.desiredHeight||this.$size.height!=this.desiredHeight||i!=this.$vScroll){i!=this.$vScroll&&(this.$vScroll=i,this.scrollBarV.setVisible(i));var s=this.container.clientWidth;this.container.style.height=n+\"px\",this.$updateCachedSize(!0,this.$gutterWidth,s,n),this.desiredHeight=n,this._signal(\"autosize\")}},this.$computeLayerConfig=function(){var e=this.session,t=this.$size,n=t.height<=2*this.lineHeight,r=this.session.getScreenLength(),i=r*this.lineHeight,s=this.$getLongestLine(),o=!n&&(this.$hScrollBarAlwaysVisible||t.scrollerWidth-s-2*this.$padding<0),u=this.$horizScroll!==o;u&&(this.$horizScroll=o,this.scrollBarH.setVisible(o));var a=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var f=t.scrollerHeight+this.lineHeight,l=!this.$maxLines&&this.$scrollPastEnd?(t.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;i+=l;var c=this.scrollMargin;this.session.setScrollTop(Math.max(-c.top,Math.min(this.scrollTop,i-t.scrollerHeight+c.bottom))),this.session.setScrollLeft(Math.max(-c.left,Math.min(this.scrollLeft,s+2*this.$padding-t.scrollerWidth+c.right)));var h=!n&&(this.$vScrollBarAlwaysVisible||t.scrollerHeight-i+l<0||this.scrollTop>c.top),p=a!==h;p&&(this.$vScroll=h,this.scrollBarV.setVisible(h));var d=this.scrollTop%this.lineHeight,v=Math.ceil(f/this.lineHeight)-1,m=Math.max(0,Math.round((this.scrollTop-d)/this.lineHeight)),g=m+v,y,b,w=this.lineHeight;m=e.screenToDocumentRow(m,0);var E=e.getFoldLine(m);E&&(m=E.start.row),y=e.documentToScreenRow(m,0),b=e.getRowLength(m)*w,g=Math.min(e.screenToDocumentRow(g,0),e.getLength()-1),f=t.scrollerHeight+e.getRowLength(g)*w+b,d=this.scrollTop-y*w;var S=0;if(this.layerConfig.width!=s||u)S=this.CHANGE_H_SCROLL;if(u||p)S|=this.$updateCachedSize(!0,this.gutterWidth,t.width,t.height),this._signal(\"scrollbarVisibilityChanged\"),p&&(s=this.$getLongestLine());return this.layerConfig={width:s,padding:this.$padding,firstRow:m,firstRowScreen:y,lastRow:g,lineHeight:w,characterWidth:this.characterWidth,minHeight:f,maxHeight:i,offset:d,gutterOffset:w?Math.max(0,Math.ceil((d+t.height-t.scrollerHeight)/w)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(s-this.$padding),S},this.$updateLines=function(){if(!this.$changedLines)return;var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(e>n.lastRow+1)return;if(t<n.firstRow)return;if(t===Infinity){this.$showGutter&&this.$gutterLayer.update(n),this.$textLayer.update(n);return}return this.$textLayer.updateLines(n,e,t),!0},this.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(e+=1),this.$textLayer&&e>this.$textLayer.MAX_LINE_LENGTH&&(e=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)},this.updateBreakpoints=function(e){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(e,t,n){this.scrollCursorIntoView(e,n),this.scrollCursorIntoView(t,n)},this.scrollCursorIntoView=function(e,t,n){if(this.$size.scrollerHeight===0)return;var r=this.$cursorLayer.getPixelPosition(e),i=r.left,s=r.top,o=n&&n.top||0,u=n&&n.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var a=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;a+o>s?(t&&a+o>s+this.lineHeight&&(s-=t*this.$size.scrollerHeight),s===0&&(s=-this.scrollMargin.top),this.session.setScrollTop(s)):a+this.$size.scrollerHeight-u<s+this.lineHeight&&(t&&a+this.$size.scrollerHeight-u<s-this.lineHeight&&(s+=t*this.$size.scrollerHeight),this.session.setScrollTop(s+this.lineHeight+u-this.$size.scrollerHeight));var f=this.scrollLeft,l=2*this.layerConfig.characterWidth;i-l<f?(i-=l,i<this.$padding+l&&(i=-this.scrollMargin.left),this.session.setScrollLeft(i)):(i+=l,f+this.$size.scrollerWidth<i+this.characterWidth?this.session.setScrollLeft(Math.round(i+this.characterWidth-this.$size.scrollerWidth)):f<=this.$padding&&i-f<this.characterWidth&&this.session.setScrollLeft(0))},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},this.alignCursor=function(e,t){typeof e==\"number\"&&(e={row:e,column:0});var n=this.$cursorLayer.getPixelPosition(e),r=this.$size.scrollerHeight-this.lineHeight,i=n.top-r*(t||0);return this.session.setScrollTop(i),i},this.STEPS=8,this.$calcSteps=function(e,t){var n=0,r=this.STEPS,i=[],s=function(e,t,n){return n*(Math.pow(e-1,3)+1)+t};for(n=0;n<r;++n)i.push(s(n/this.STEPS,e,t-e));return i},this.scrollToLine=function(e,t,n,r){var i=this.$cursorLayer.getPixelPosition({row:e,column:0}),s=i.top;t&&(s-=this.$size.scrollerHeight/2);var o=this.scrollTop;this.session.setScrollTop(s),n!==!1&&this.animateScrolling(o,r)},this.animateScrolling=function(e,t){function o(){r.$timer=clearInterval(r.$timer),r.$scrollAnimation=null,r.$stopAnimation=!1,t&&t()}var n=this.scrollTop;if(!this.$animatedScroll)return;var r=this;if(e==n)return;if(this.$scrollAnimation){var i=this.$scrollAnimation.steps;if(i.length){e=i[0];if(e==n)return}}var s=r.$calcSteps(e,n);this.$scrollAnimation={from:e,to:n,steps:s},clearInterval(this.$timer),r.session.setScrollTop(s.shift()),r.session.$scrollTop=n,this.$timer=setInterval(function(){if(r.$stopAnimation){o();return}if(!r.session)return clearInterval(r.$timer);s.length?(r.session.setScrollTop(s.shift()),r.session.$scrollTop=n):n!=null?(r.session.$scrollTop=-1,r.session.setScrollTop(n),n=null):o()},10)},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(e)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){if(t<0&&this.session.getScrollTop()>=1-this.scrollMargin.top)return!0;if(t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom)return!0;if(e<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left)return!0;if(e>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},this.pixelToScreenCoordinates=function(e,t){var n;if(this.$hasCssTransforms){n={top:0,left:0};var r=this.$fontMetrics.transformCoordinates([e,t]);e=r[1]-this.gutterWidth-this.margin.left,t=r[0]}else n=this.scroller.getBoundingClientRect();var i=e+this.scrollLeft-n.left-this.$padding,s=i/this.characterWidth,o=Math.floor((t+this.scrollTop-n.top)/this.lineHeight),u=this.$blockCursor?Math.floor(s):Math.round(s);return{row:o,column:u,side:s-u>0?1:-1,offsetX:i}},this.screenToTextCoordinates=function(e,t){var n;if(this.$hasCssTransforms){n={top:0,left:0};var r=this.$fontMetrics.transformCoordinates([e,t]);e=r[1]-this.gutterWidth-this.margin.left,t=r[0]}else n=this.scroller.getBoundingClientRect();var i=e+this.scrollLeft-n.left-this.$padding,s=i/this.characterWidth,o=this.$blockCursor?Math.floor(s):Math.round(s),u=Math.floor((t+this.scrollTop-n.top)/this.lineHeight);return this.session.screenToDocumentPosition(u,Math.max(o,0),i)},this.textToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=this.session.documentToScreenPosition(e,t),i=this.$padding+(this.session.$bidiHandler.isBidiRow(r.row,e)?this.session.$bidiHandler.getPosLeft(r.column):Math.round(r.column*this.characterWidth)),s=r.row*this.lineHeight;return{pageX:n.left+i-this.scrollLeft,pageY:n.top+s-this.scrollTop}},this.visualizeFocus=function(){i.addCssClass(this.container,\"ace_focus\")},this.visualizeBlur=function(){i.removeCssClass(this.container,\"ace_focus\")},this.showComposition=function(e){this.$composition=e,e.cssText||(e.cssText=this.textarea.style.cssText),e.useTextareaForIME==undefined&&(e.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(i.addCssClass(this.textarea,\"ace_composition\"),this.textarea.style.cssText=\"\",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display=\"none\"):e.markerId=this.session.addMarker(e.markerRange,\"ace_composition_marker\",\"text\")},this.setCompositionText=function(e){var t=this.session.selection.cursor;this.addToken(e,\"composition_placeholder\",t.row,t.column),this.$moveTextAreaToCursor()},this.hideComposition=function(){if(!this.$composition)return;this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),i.removeCssClass(this.textarea,\"ace_composition\"),this.textarea.style.cssText=this.$composition.cssText;var e=this.session.selection.cursor;this.removeExtraToken(e.row,e.column),this.$composition=null,this.$cursorLayer.element.style.display=\"\"},this.addToken=function(e,t,n,r){var i=this.session;i.bgTokenizer.lines[n]=null;var s={type:t,value:e},o=i.getTokens(n);if(r==null)o.push(s);else{var u=0;for(var a=0;a<o.length;a++){var f=o[a];u+=f.value.length;if(r<=u){var l=f.value.length-(u-r),c=f.value.slice(0,l),h=f.value.slice(l);o.splice(a,1,{type:f.type,value:c},s,{type:f.type,value:h});break}}}this.updateLines(n,n)},this.removeExtraToken=function(e,t){this.updateLines(e,e)},this.setTheme=function(e,t){function o(r){if(n.$themeId!=e)return t&&t();if(!r||!r.cssClass)throw new Error(\"couldn't load module \"+e+\" or it didn't call define\");r.$id&&(n.$themeId=r.$id),i.importCssString(r.cssText,r.cssClass,n.container),n.theme&&i.removeCssClass(n.container,n.theme.cssClass);var s=\"padding\"in r?r.padding:\"padding\"in(n.theme||{})?4:n.$padding;n.$padding&&s!=n.$padding&&n.setPadding(s),n.$theme=r.cssClass,n.theme=r,i.addCssClass(n.container,r.cssClass),i.setCssClass(n.container,\"ace_dark\",r.isDark),n.$size&&(n.$size.width=0,n.$updateSizeAsync()),n._dispatchEvent(\"themeLoaded\",{theme:r}),t&&t()}var n=this;this.$themeId=e,n._dispatchEvent(\"themeChange\",{theme:e});if(!e||typeof e==\"string\"){var r=e||this.$options.theme.initialValue;s.loadModule([\"theme\",r],o)}else o(e)},this.getTheme=function(){return this.$themeId},this.setStyle=function(e,t){i.setCssClass(this.container,e,t!==!1)},this.unsetStyle=function(e){i.removeCssClass(this.container,e)},this.setCursorStyle=function(e){i.setStyle(this.scroller.style,\"cursor\",e)},this.setMouseCursor=function(e){i.setStyle(this.scroller.style,\"cursor\",e)},this.attachToShadowRoot=function(){i.importCssString(g,\"ace_editor.css\",this.container)},this.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent=\"\"},this.$updateCustomScrollbar=function(e){var t=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,e===!0?(this.scrollBarV=new p(this.container,this),this.scrollBarH=new h(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener(\"scroll\",function(e){t.$scrollAnimation||t.session.setScrollTop(e.data-t.scrollMargin.top)}),this.scrollBarH.addEventListener(\"scroll\",function(e){t.$scrollAnimation||t.session.setScrollLeft(e.data-t.scrollMargin.left)}),this.$scrollDecorator=new y(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new c(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.addEventListener(\"scroll\",function(e){t.$scrollAnimation||t.session.setScrollTop(e.data-t.scrollMargin.top)}),this.scrollBarH.addEventListener(\"scroll\",function(e){t.$scrollAnimation||t.session.setScrollLeft(e.data-t.scrollMargin.left)}))}}).call(E.prototype),s.defineOptions(E.prototype,\"renderer\",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){typeof e==\"number\"&&(this.$printMarginColumn=e),this.$showPrintMargin=!!e,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?\"block\":\"none\",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(e){i.setCssClass(this.$gutter,\"ace_fade-fold-widgets\",e)},initialValue:!1},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(e){this.$textLayer.setDisplayIndentGuides(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(e){this.$textLayer.setHighlightIndentGuides(e)==1?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(e){this.$gutterLayer.setHighlightGutterLine(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(e){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(e){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(e){typeof e==\"number\"&&(e+=\"px\"),this.container.style.fontSize=e,this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e,this.updateFontSize()}},maxLines:{set:function(e){this.updateFull()}},minLines:{set:function(e){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(e){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(e){e=+e||0;if(this.$scrollPastEnd==e)return;this.$scrollPastEnd=e,this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(e){this.$gutterLayer.$fixedWidth=!!e,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(e){this.$updateCustomScrollbar(e)},initialValue:!1},theme:{set:function(e){this.setTheme(e)},get:function(){return this.$themeId||this.theme},initialValue:\"./theme/textmate\",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!b.isMobile&&!b.isIE}}),t.VirtualRenderer=E}),ace.define(\"ace/worker/worker_client\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/net\",\"ace/lib/event_emitter\",\"ace/config\"],function(e,t,n){\"use strict\";function u(e){var t=\"importScripts('\"+i.qualifyURL(e)+\"');\";try{return new Blob([t],{type:\"application/javascript\"})}catch(n){var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,s=new r;return s.append(t),s.getBlob(\"application/javascript\")}}function a(e){if(typeof Worker==\"undefined\")return{postMessage:function(){},terminate:function(){}};if(o.get(\"loadWorkerFromBlob\")){var t=u(e),n=window.URL||window.webkitURL,r=n.createObjectURL(t);return new Worker(r)}return new Worker(e)}var r=e(\"../lib/oop\"),i=e(\"../lib/net\"),s=e(\"../lib/event_emitter\").EventEmitter,o=e(\"../config\"),f=function(e){e.postMessage||(e=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=e,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){r.implement(this,s),this.$createWorkerFromOldConfig=function(t,n,r,i,s){e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl);if(o.get(\"packaged\")||!e.toUrl)i=i||o.moduleUrl(n,\"worker\");else{var u=this.$normalizePath;i=i||u(e.toUrl(\"ace/worker/worker.js\",null,\"_\"));var f={};t.forEach(function(t){f[t]=u(e.toUrl(t,null,\"_\").replace(/(\\.js)?(\\?.*)?$/,\"\"))})}return this.$worker=a(i),s&&this.send(\"importScripts\",s),this.$worker.postMessage({init:!0,tlns:f,module:n,classname:r}),this.$worker},this.onMessage=function(e){var t=e.data;switch(t.type){case\"event\":this._signal(t.name,{data:t.data});break;case\"call\":var n=this.callbacks[t.id];n&&(n(t.data),delete this.callbacks[t.id]);break;case\"error\":this.reportError(t.data);break;case\"log\":window.console&&console.log&&console.log.apply(console,t.data)}},this.reportError=function(e){window.console&&console.error&&console.error(e)},this.$normalizePath=function(e){return i.qualifyURL(e)},this.terminate=function(){this._signal(\"terminate\",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off(\"change\",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,n){if(n){var r=this.callbackId++;this.callbacks[r]=n,t.push(r)}this.send(e,t)},this.emit=function(e,t){try{t.data&&t.data.err&&(t.data.err={message:t.data.err.message,stack:t.data.err.stack,code:t.data.err.code}),this.$worker&&this.$worker.postMessage({event:e,data:{data:t.data}})}catch(n){console.error(n.stack)}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call(\"setValue\",[e.getValue()]),e.on(\"change\",this.changeListener,!0)},this.changeListener=function(e){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),e.action==\"insert\"?this.deltaQueue.push(e.start,e.lines):this.deltaQueue.push(e.start,e.end)},this.$sendDeltaQueue=function(){var e=this.deltaQueue;if(!e)return;this.deltaQueue=null,e.length>50&&e.length>this.$doc.getLength()>>1?this.call(\"setValue\",[this.$doc.getValue()]):this.emit(\"change\",{data:e})}}).call(f.prototype);var l=function(e,t,n){var r=null,i=!1,u=Object.create(s),a=[],l=new f({messageBuffer:a,terminate:function(){},postMessage:function(e){a.push(e);if(!r)return;i?setTimeout(c):c()}});l.setEmitSync=function(e){i=e};var c=function(){var e=a.shift();e.command?r[e.command].apply(r,e.args):e.event&&u._signal(e.event,e.data)};return u.postMessage=function(e){l.onMessage({data:e})},u.callback=function(e,t){this.postMessage({type:\"call\",id:t,data:e})},u.emit=function(e,t){this.postMessage({type:\"event\",name:e,data:t})},o.loadModule([\"worker\",t],function(e){r=new e[n](u);while(a.length)c()}),l};t.UIWorkerClient=l,t.WorkerClient=f,t.createWorker=a}),ace.define(\"ace/placeholder\",[\"require\",\"exports\",\"module\",\"ace/range\",\"ace/lib/event_emitter\",\"ace/lib/oop\"],function(e,t,n){\"use strict\";var r=e(\"./range\").Range,i=e(\"./lib/event_emitter\").EventEmitter,s=e(\"./lib/oop\"),o=function(e,t,n,r,i,s){var o=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=i,this.othersClass=s,this.$onUpdate=this.onUpdate.bind(this),this.doc.on(\"change\",this.$onUpdate,!0),this.$others=r,this.$onCursorChange=function(){setTimeout(function(){o.onCursorChange()})},this.$pos=n;var u=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=u.length,this.setup(),e.selection.on(\"changeCursor\",this.$onCursorChange)};(function(){s.implement(this,i),this.setup=function(){var e=this,t=this.doc,n=this.session;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=t.createAnchor(this.$pos.row,this.$pos.column);var i=this.pos;i.$insertRight=!0,i.detach(),i.markerId=n.addMarker(new r(i.row,i.column,i.row,i.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(n){var r=t.createAnchor(n.row,n.column);r.$insertRight=!0,r.detach(),e.others.push(r)}),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(this.othersActive)return;var e=this.session,t=this;this.othersActive=!0,this.others.forEach(function(n){n.markerId=e.addMarker(new r(n.row,n.column,n.row,n.column+t.length),t.othersClass,null,!1)})},this.hideOtherMarkers=function(){if(!this.othersActive)return;this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)},this.onUpdate=function(e){if(this.$updating)return this.updateAnchors(e);var t=e;if(t.start.row!==t.end.row)return;if(t.start.row!==this.pos.row)return;this.$updating=!0;var n=e.action===\"insert\"?t.end.column-t.start.column:t.start.column-t.end.column,i=t.start.column>=this.pos.column&&t.start.column<=this.pos.column+this.length+1,s=t.start.column-this.pos.column;this.updateAnchors(e),i&&(this.length+=n);if(i&&!this.session.$fromUndo)if(e.action===\"insert\")for(var o=this.others.length-1;o>=0;o--){var u=this.others[o],a={row:u.row,column:u.column+s};this.doc.insertMergedLines(a,e.lines)}else if(e.action===\"remove\")for(var o=this.others.length-1;o>=0;o--){var u=this.others[o],a={row:u.row,column:u.column+s};this.doc.remove(new r(a.row,a.column,a.row,a.column-n))}this.$updating=!1,this.updateMarkers()},this.updateAnchors=function(e){this.pos.onChange(e);for(var t=this.others.length;t--;)this.others[t].onChange(e);this.updateMarkers()},this.updateMarkers=function(){if(this.$updating)return;var e=this,t=this.session,n=function(n,i){t.removeMarker(n.markerId),n.markerId=t.addMarker(new r(n.row,n.column,n.row,n.column+e.length),i,null,!1)};n(this.pos,this.mainClass);for(var i=this.others.length;i--;)n(this.others[i],this.othersClass)},this.onCursorChange=function(e){if(this.$updating||!this.session)return;var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit(\"cursorEnter\",e)):(this.hideOtherMarkers(),this._emit(\"cursorLeave\",e))},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off(\"change\",this.$onUpdate),this.session.selection.off(\"changeCursor\",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(this.$undoStackDepth===-1)return;var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth;for(var n=0;n<t;n++)e.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}).call(o.prototype),t.PlaceHolder=o}),ace.define(\"ace/mouse/multi_select_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/event\",\"ace/lib/useragent\"],function(e,t,n){function s(e,t){return e.row==t.row&&e.column==t.column}function o(e){var t=e.domEvent,n=t.altKey,o=t.shiftKey,u=t.ctrlKey,a=e.getAccelKey(),f=e.getButton();u&&i.isMac&&(f=t.button);if(e.editor.inMultiSelectMode&&f==2){e.editor.textInput.onContextMenu(e.domEvent);return}if(!u&&!n&&!a){f===0&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode();return}if(f!==0)return;var l=e.editor,c=l.selection,h=l.inMultiSelectMode,p=e.getDocumentPosition(),d=c.getCursor(),v=e.inSelection()||c.isEmpty()&&s(p,d),m=e.x,g=e.y,y=function(e){m=e.clientX,g=e.clientY},b=l.session,w=l.renderer.pixelToScreenCoordinates(m,g),E=w,S;if(l.$mouseHandler.$enableJumpToDef)u&&n||a&&n?S=o?\"block\":\"add\":n&&l.$blockSelectEnabled&&(S=\"block\");else if(a&&!n){S=\"add\";if(!h&&o)return}else n&&l.$blockSelectEnabled&&(S=\"block\");S&&i.isMac&&t.ctrlKey&&l.$mouseHandler.cancelContextMenu();if(S==\"add\"){if(!h&&v)return;if(!h){var x=c.toOrientedRange();l.addSelectionMarker(x)}var T=c.rangeList.rangeAtPoint(p);l.inVirtualSelectionMode=!0,o&&(T=null,x=c.ranges[0]||x,l.removeSelectionMarker(x)),l.once(\"mouseup\",function(){var e=c.toOrientedRange();T&&e.isEmpty()&&s(T.cursor,e.cursor)?c.substractPoint(e.cursor):(o?c.substractPoint(x.cursor):x&&(l.removeSelectionMarker(x),c.addRange(x)),c.addRange(e)),l.inVirtualSelectionMode=!1})}else if(S==\"block\"){e.stop(),l.inVirtualSelectionMode=!0;var N,C=[],k=function(){var e=l.renderer.pixelToScreenCoordinates(m,g),t=b.screenToDocumentPosition(e.row,e.column,e.offsetX);if(s(E,e)&&s(t,c.lead))return;E=e,l.selection.moveToPosition(t),l.renderer.scrollCursorIntoView(),l.removeSelectionMarkers(C),C=c.rectangularRangeBlock(E,w),l.$mouseHandler.$clickSelection&&C.length==1&&C[0].isEmpty()&&(C[0]=l.$mouseHandler.$clickSelection.clone()),C.forEach(l.addSelectionMarker,l),l.updateSelectionMarkers()};h&&!a?c.toSingleRange():!h&&a&&(N=c.toOrientedRange(),l.addSelectionMarker(N)),o?w=b.documentToScreenPosition(c.lead):c.moveToPosition(p),E={row:-1,column:-1};var L=function(e){k(),clearInterval(O),l.removeSelectionMarkers(C),C.length||(C=[c.toOrientedRange()]),N&&(l.removeSelectionMarker(N),c.toSingleRange(N));for(var t=0;t<C.length;t++)c.addRange(C[t]);l.inVirtualSelectionMode=!1,l.$mouseHandler.$clickSelection=null},A=k;r.capture(l.container,y,L);var O=setInterval(function(){A()},20);return e.preventDefault()}}var r=e(\"../lib/event\"),i=e(\"../lib/useragent\");t.onMouseDown=o}),ace.define(\"ace/commands/multi_select_commands\",[\"require\",\"exports\",\"module\",\"ace/keyboard/hash_handler\"],function(e,t,n){t.defaultCommands=[{name:\"addCursorAbove\",description:\"Add cursor above\",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:\"Ctrl-Alt-Up\",mac:\"Ctrl-Alt-Up\"},scrollIntoView:\"cursor\",readOnly:!0},{name:\"addCursorBelow\",description:\"Add cursor below\",exec:function(e){e.selectMoreLines(1)},bindKey:{win:\"Ctrl-Alt-Down\",mac:\"Ctrl-Alt-Down\"},scrollIntoView:\"cursor\",readOnly:!0},{name:\"addCursorAboveSkipCurrent\",description:\"Add cursor above (skip current)\",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:\"Ctrl-Alt-Shift-Up\",mac:\"Ctrl-Alt-Shift-Up\"},scrollIntoView:\"cursor\",readOnly:!0},{name:\"addCursorBelowSkipCurrent\",description:\"Add cursor below (skip current)\",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:\"Ctrl-Alt-Shift-Down\",mac:\"Ctrl-Alt-Shift-Down\"},scrollIntoView:\"cursor\",readOnly:!0},{name:\"selectMoreBefore\",description:\"Select more before\",exec:function(e){e.selectMore(-1)},bindKey:{win:\"Ctrl-Alt-Left\",mac:\"Ctrl-Alt-Left\"},scrollIntoView:\"cursor\",readOnly:!0},{name:\"selectMoreAfter\",description:\"Select more after\",exec:function(e){e.selectMore(1)},bindKey:{win:\"Ctrl-Alt-Right\",mac:\"Ctrl-Alt-Right\"},scrollIntoView:\"cursor\",readOnly:!0},{name:\"selectNextBefore\",description:\"Select next before\",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:\"Ctrl-Alt-Shift-Left\",mac:\"Ctrl-Alt-Shift-Left\"},scrollIntoView:\"cursor\",readOnly:!0},{name:\"selectNextAfter\",description:\"Select next after\",exec:function(e){e.selectMore(1,!0)},bindKey:{win:\"Ctrl-Alt-Shift-Right\",mac:\"Ctrl-Alt-Shift-Right\"},scrollIntoView:\"cursor\",readOnly:!0},{name:\"toggleSplitSelectionIntoLines\",description:\"Split into lines\",exec:function(e){e.multiSelect.rangeCount>1?e.multiSelect.joinSelections():e.multiSelect.splitIntoLines()},bindKey:{win:\"Ctrl-Alt-L\",mac:\"Ctrl-Alt-L\"},readOnly:!0},{name:\"splitSelectionIntoLines\",description:\"Split into lines\",exec:function(e){e.multiSelect.splitIntoLines()},readOnly:!0},{name:\"alignCursors\",description:\"Align cursors\",exec:function(e){e.alignCursors()},bindKey:{win:\"Ctrl-Alt-A\",mac:\"Ctrl-Alt-A\"},scrollIntoView:\"cursor\"},{name:\"findAll\",description:\"Find all\",exec:function(e){e.findAll()},bindKey:{win:\"Ctrl-Alt-K\",mac:\"Ctrl-Alt-G\"},scrollIntoView:\"cursor\",readOnly:!0}],t.multiSelectCommands=[{name:\"singleSelection\",description:\"Single selection\",bindKey:\"esc\",exec:function(e){e.exitMultiSelectMode()},scrollIntoView:\"cursor\",readOnly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];var r=e(\"../keyboard/hash_handler\").HashHandler;t.keyboardHandler=new r(t.multiSelectCommands)}),ace.define(\"ace/multi_select\",[\"require\",\"exports\",\"module\",\"ace/range_list\",\"ace/range\",\"ace/selection\",\"ace/mouse/multi_select_handler\",\"ace/lib/event\",\"ace/lib/lang\",\"ace/commands/multi_select_commands\",\"ace/search\",\"ace/edit_session\",\"ace/editor\",\"ace/config\"],function(e,t,n){function h(e,t,n){return c.$options.wrap=!0,c.$options.needle=t,c.$options.backwards=n==-1,c.find(e)}function v(e,t){return e.row==t.row&&e.column==t.column}function m(e){if(e.$multiselectOnSessionChange)return;e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),e.$multiselectOnSessionChange=t.onSessionChange.bind(e),e.$checkMultiselectChange=e.$checkMultiselectChange.bind(e),e.$multiselectOnSessionChange(e),e.on(\"changeSession\",e.$multiselectOnSessionChange),e.on(\"mousedown\",o),e.commands.addCommands(f.defaultCommands),g(e)}function g(e){function r(t){n&&(e.renderer.setMouseCursor(\"\"),n=!1)}if(!e.textInput)return;var t=e.textInput.getElement(),n=!1;u.addListener(t,\"keydown\",function(t){var i=t.keyCode==18&&!(t.ctrlKey||t.shiftKey||t.metaKey);e.$blockSelectEnabled&&i?n||(e.renderer.setMouseCursor(\"crosshair\"),n=!0):n&&r()},e),u.addListener(t,\"keyup\",r,e),u.addListener(t,\"blur\",r,e)}var r=e(\"./range_list\").RangeList,i=e(\"./range\").Range,s=e(\"./selection\").Selection,o=e(\"./mouse/multi_select_handler\").onMouseDown,u=e(\"./lib/event\"),a=e(\"./lib/lang\"),f=e(\"./commands/multi_select_commands\");t.commands=f.defaultCommands.concat(f.multiSelectCommands);var l=e(\"./search\").Search,c=new l,p=e(\"./edit_session\").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(p.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(!e)return;if(!this.inMultiSelectMode&&this.rangeCount===0){var n=this.toOrientedRange();this.rangeList.add(n),this.rangeList.add(e);if(this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),t||this.fromOrientedRange(e);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}e.cursor||(e.cursor=e.end);var r=this.rangeList.add(e);return this.$onAddRange(e),r.length&&this.$onRemoveRange(r),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal(\"multiSelect\"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){var t=this.rangeList.substractPoint(e);if(t)return this.$onRemoveRange(t),t[0]},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length&&this.$onRemoveRange(e)},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._signal(\"addRange\",{range:e})},this.$onRemoveRange=function(e){this.rangeCount=this.rangeList.ranges.length;if(this.rangeCount==1&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop();e.push(t),this.rangeCount=0}for(var n=e.length;n--;){var r=this.ranges.indexOf(e[n]);this.ranges.splice(r,1)}this._signal(\"removeRange\",{ranges:e}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal(\"singleSelect\"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),t=t||this.ranges[0],t&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){if(this.rangeList)return;this.rangeList=new r,this.ranges=[],this.rangeCount=0},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){var e=this.ranges.length?this.ranges:[this.getRange()],t=[];for(var n=0;n<e.length;n++){var r=e[n],s=r.start.row,o=r.end.row;if(s===o)t.push(r.clone());else{t.push(new i(s,r.start.column,s,this.session.getLine(s).length));while(++s<o)t.push(this.getLineRange(s,!0));t.push(new i(o,0,o,r.end.column))}n==0&&!this.isBackwards()&&(t=t.reverse())}this.toSingleRange();for(var n=t.length;n--;)this.addRange(t[n])},this.joinSelections=function(){var e=this.rangeList.ranges,t=e[e.length-1],n=i.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=i.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var r=this.session.documentToScreenPosition(this.cursor),s=this.session.documentToScreenPosition(this.anchor),o=this.rectangularRangeBlock(r,s);o.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(e,t,n){var r=[],s=e.column<t.column;if(s)var o=e.column,u=t.column,a=e.offsetX,f=t.offsetX;else var o=t.column,u=e.column,a=t.offsetX,f=e.offsetX;var l=e.row<t.row;if(l)var c=e.row,h=t.row;else var c=t.row,h=e.row;o<0&&(o=0),c<0&&(c=0),c==h&&(n=!0);var p;for(var d=c;d<=h;d++){var m=i.fromPoints(this.session.screenToDocumentPosition(d,o,a),this.session.screenToDocumentPosition(d,u,f));if(m.isEmpty()){if(p&&v(m.end,p))break;p=m.end}m.cursor=s?m.start:m.end,r.push(m)}l&&r.reverse();if(!n){var g=r.length-1;while(r[g].isEmpty()&&g>0)g--;if(g>0){var y=0;while(r[y].isEmpty())y++}for(var b=g;b>=y;b--)r[b].isEmpty()&&r.splice(b,1)}return r}}.call(s.prototype);var d=e(\"./editor\").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,\"ace_selection\",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){if(!e.marker)return;this.session.removeMarker(e.marker);var t=this.session.$selectionMarkers.indexOf(e);t!=-1&&this.session.$selectionMarkers.splice(t,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length},this.removeSelectionMarkers=function(e){var t=this.session.$selectionMarkers;for(var n=e.length;n--;){var r=e[n];if(!r.marker)continue;this.session.removeMarker(r.marker);var i=t.indexOf(r);i!=-1&&t.splice(i,1)}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(e){if(this.inMultiSelectMode)return;this.inMultiSelectMode=!0,this.setStyle(\"ace_multiselect\"),this.keyBinding.addKeyboardHandler(f.keyboardHandler),this.commands.setDefaultHandler(\"exec\",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onSingleSelect=function(e){if(this.session.multiSelect.inVirtualMode)return;this.inMultiSelectMode=!1,this.unsetStyle(\"ace_multiselect\"),this.keyBinding.removeKeyboardHandler(f.keyboardHandler),this.commands.removeDefaultHandler(\"exec\",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit(\"changeSelection\")},this.$onMultiSelectExec=function(e){var t=e.command,n=e.editor;if(!n.multiSelect)return;if(!t.multiSelectAction){var r=t.exec(n,e.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()}else t.multiSelectAction==\"forEach\"?r=n.forEachSelection(t,e.args):t.multiSelectAction==\"forEachLine\"?r=n.forEachSelection(t,e.args,!0):t.multiSelectAction==\"single\"?(n.exitMultiSelectMode(),r=t.exec(n,e.args||{})):r=t.multiSelectAction(n,e.args||{});return r},this.forEachSelection=function(e,t,n){if(this.inVirtualSelectionMode)return;var r=n&&n.keepOrder,i=n==1||n&&n.$byLines,o=this.session,u=this.selection,a=u.rangeList,f=(r?u:a).ranges,l;if(!f.length)return e.exec?e.exec(this,t||{}):e(this,t||{});var c=u._eventRegistry;u._eventRegistry={};var h=new s(o);this.inVirtualSelectionMode=!0;for(var p=f.length;p--;){if(i)while(p>0&&f[p].start.row==f[p-1].end.row)p--;h.fromOrientedRange(f[p]),h.index=p,this.selection=o.selection=h;var d=e.exec?e.exec(this,t||{}):e(this,t||{});!l&&d!==undefined&&(l=d),h.toOrientedRange(f[p])}h.detach(),this.selection=o.selection=u,this.inVirtualSelectionMode=!1,u._eventRegistry=c,u.mergeOverlappingRanges(),u.ranges[0]&&u.fromOrientedRange(u.ranges[0]);var v=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),v&&v.from==v.to&&this.renderer.animateScrolling(v.from),l},this.exitMultiSelectMode=function(){if(!this.inMultiSelectMode||this.inVirtualSelectionMode)return;this.multiSelect.toSingleRange()},this.getSelectedText=function(){var e=\"\";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var t=this.multiSelect.rangeList.ranges,n=[];for(var r=0;r<t.length;r++)n.push(this.session.getTextRange(t[r]));var i=this.session.getDocument().getNewLineCharacter();e=n.join(i),e.length==(n.length-1)*i.length&&(e=\"\")}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return e},this.$checkMultiselectChange=function(e,t){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var n=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&t==this.multiSelect.anchor)return;var r=t==this.multiSelect.anchor?n.cursor==n.start?n.end:n.start:n.cursor;r.row!=t.row||this.session.$clipPositionToDocument(r.row,r.column).column!=t.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(e,t,n){t=t||{},t.needle=e||t.needle;if(t.needle==undefined){var r=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();t.needle=this.session.getTextRange(r)}this.$search.set(t);var i=this.$search.findAll(this.session);if(!i.length)return 0;var s=this.multiSelect;n||s.toSingleRange(i[0]);for(var o=i.length;o--;)s.addRange(i[o],!0);return r&&s.rangeList.rangeAtPoint(r.start)&&s.addRange(r,!0),i.length},this.selectMoreLines=function(e,t){var n=this.selection.toOrientedRange(),r=n.cursor==n.end,s=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(s.column=this.selection.$desiredColumn);var o=this.session.screenToDocumentPosition(s.row+e,s.column);if(!n.isEmpty())var u=this.session.documentToScreenPosition(r?n.end:n.start),a=this.session.screenToDocumentPosition(u.row+e,u.column);else var a=o;if(r){var f=i.fromPoints(o,a);f.cursor=f.start}else{var f=i.fromPoints(a,o);f.cursor=f.end}f.desiredColumn=s.column;if(!this.selection.inMultiSelectMode)this.selection.addRange(n);else if(t)var l=n.cursor;this.selection.addRange(f),l&&this.selection.substractPoint(l)},this.transposeSelections=function(e){var t=this.session,n=t.multiSelect,r=n.ranges;for(var i=r.length;i--;){var s=r[i];if(s.isEmpty()){var o=t.getWordRange(s.start.row,s.start.column);s.start.row=o.start.row,s.start.column=o.start.column,s.end.row=o.end.row,s.end.column=o.end.column}}n.mergeOverlappingRanges();var u=[];for(var i=r.length;i--;){var s=r[i];u.unshift(t.getTextRange(s))}e<0?u.unshift(u.pop()):u.push(u.shift());for(var i=r.length;i--;){var s=r[i],o=s.clone();t.replace(s,u[i]),s.start.row=o.start.row,s.start.column=o.start.column}n.fromOrientedRange(n.ranges[0])},this.selectMore=function(e,t,n){var r=this.session,i=r.multiSelect,s=i.toOrientedRange();if(s.isEmpty()){s=r.getWordRange(s.start.row,s.start.column),s.cursor=e==-1?s.start:s.end,this.multiSelect.addRange(s);if(n)return}var o=r.getTextRange(s),u=h(r,o,e);u&&(u.cursor=e==-1?u.start:u.end,this.session.unfold(u),this.multiSelect.addRange(u),this.renderer.scrollCursorIntoView(null,.5)),t&&this.multiSelect.substractPoint(s.cursor)},this.alignCursors=function(){var e=this.session,t=e.multiSelect,n=t.ranges,r=-1,s=n.filter(function(e){if(e.cursor.row==r)return!0;r=e.cursor.row});if(!n.length||s.length==n.length-1){var o=this.selection.getRange(),u=o.start.row,f=o.end.row,l=u==f;if(l){var c=this.session.getLength(),h;do h=this.session.getLine(f);while(/[=:]/.test(h)&&++f<c);do h=this.session.getLine(u);while(/[=:]/.test(h)&&--u>0);u<0&&(u=0),f>=c&&(f=c-1)}var p=this.session.removeFullLines(u,f);p=this.$reAlignText(p,l),this.session.insert({row:u,column:0},p.join(\"\\n\")+\"\\n\"),l||(o.start.column=0,o.end.column=p[p.length-1].length),this.selection.setRange(o)}else{s.forEach(function(e){t.substractPoint(e.cursor)});var d=0,v=Infinity,m=n.map(function(t){var n=t.cursor,r=e.getLine(n.row),i=r.substr(n.column).search(/\\S/g);return i==-1&&(i=0),n.column>d&&(d=n.column),i<v&&(v=i),i});n.forEach(function(t,n){var r=t.cursor,s=d-r.column,o=m[n]-v;s>o?e.insert(r,a.stringRepeat(\" \",s-o)):e.remove(new i(r.row,r.column,r.row,r.column-s+o)),t.start.column=t.end.column=d,t.start.row=t.end.row=r.row,t.cursor=t.end}),t.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(e,t){function u(e){return a.stringRepeat(\" \",e)}function f(e){return e[2]?u(i)+e[2]+u(s-e[2].length+o)+e[4].replace(/^([=:])\\s+/,\"$1 \"):e[0]}function l(e){return e[2]?u(i+s-e[2].length)+e[2]+u(o)+e[4].replace(/^([=:])\\s+/,\"$1 \"):e[0]}function c(e){return e[2]?u(i)+e[2]+u(o)+e[4].replace(/^([=:])\\s+/,\"$1 \"):e[0]}var n=!0,r=!0,i,s,o;return e.map(function(e){var t=e.match(/(\\s*)(.*?)(\\s*)([=:].*)/);return t?i==null?(i=t[1].length,s=t[2].length,o=t[3].length,t):(i+s+o!=t[1].length+t[2].length+t[3].length&&(r=!1),i!=t[1].length&&(n=!1),i>t[1].length&&(i=t[1].length),s<t[2].length&&(s=t[2].length),o>t[3].length&&(o=t[3].length),t):[e]}).map(t?f:n?r?l:f:c)}}).call(d.prototype),t.onSessionChange=function(e){var t=e.session;t&&!t.multiSelect&&(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t&&t.multiSelect;var n=e.oldSession;n&&(n.multiSelect.off(\"addRange\",this.$onAddRange),n.multiSelect.off(\"removeRange\",this.$onRemoveRange),n.multiSelect.off(\"multiSelect\",this.$onMultiSelect),n.multiSelect.off(\"singleSelect\",this.$onSingleSelect),n.multiSelect.lead.off(\"change\",this.$checkMultiselectChange),n.multiSelect.anchor.off(\"change\",this.$checkMultiselectChange)),t&&(t.multiSelect.on(\"addRange\",this.$onAddRange),t.multiSelect.on(\"removeRange\",this.$onRemoveRange),t.multiSelect.on(\"multiSelect\",this.$onMultiSelect),t.multiSelect.on(\"singleSelect\",this.$onSingleSelect),t.multiSelect.lead.on(\"change\",this.$checkMultiselectChange),t.multiSelect.anchor.on(\"change\",this.$checkMultiselectChange)),t&&this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},t.MultiSelect=m,e(\"./config\").defineOptions(d.prototype,\"editor\",{enableMultiselect:{set:function(e){m(this),e?(this.on(\"changeSession\",this.$multiselectOnSessionChange),this.on(\"mousedown\",o)):(this.off(\"changeSession\",this.$multiselectOnSessionChange),this.off(\"mousedown\",o))},value:!0},enableBlockSelect:{set:function(e){this.$blockSelectEnabled=e},value:!0}})}),ace.define(\"ace/mode/folding/fold_mode\",[\"require\",\"exports\",\"module\",\"ace/range\"],function(e,t,n){\"use strict\";var r=e(\"../../range\").Range,i=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(e,t,n){var r=e.getLine(n);return this.foldingStartMarker.test(r)?\"start\":t==\"markbeginend\"&&this.foldingStopMarker&&this.foldingStopMarker.test(r)?\"end\":\"\"},this.getFoldWidgetRange=function(e,t,n){return null},this.indentationBlock=function(e,t,n){var i=/\\S/,s=e.getLine(t),o=s.search(i);if(o==-1)return;var u=n||s.length,a=e.getLength(),f=t,l=t;while(++t<a){var c=e.getLine(t).search(i);if(c==-1)continue;if(c<=o){var h=e.getTokenAt(t,0);if(!h||h.type!==\"string\")break}l=t}if(l>f){var p=e.getLine(l).length;return new r(f,u,l,p)}},this.openingBracketBlock=function(e,t,n,i,s){var o={row:n,column:i+1},u=e.$findClosingBracket(t,o,s);if(!u)return;var a=e.foldWidgets[u.row];return a==null&&(a=e.getFoldWidget(u.row)),a==\"start\"&&u.row>o.row&&(u.row--,u.column=e.getLine(u.row).length),r.fromPoints(o,u)},this.closingBracketBlock=function(e,t,n,i,s){var o={row:n,column:i},u=e.$findOpeningBracket(t,o);if(!u)return;return u.column++,o.column--,r.fromPoints(u,o)}}).call(i.prototype)}),ace.define(\"ace/line_widgets\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"],function(e,t,n){\"use strict\";function i(e){this.session=e,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on(\"change\",this.updateOnChange),this.session.on(\"changeFold\",this.updateOnFold),this.session.on(\"changeEditor\",this.$onChangeEditor)}var r=e(\"./lib/dom\");(function(){this.getRowLength=function(e){var t;return this.lineWidgets?t=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0:t=0,!this.$useWrapMode||!this.$wrapData[e]?1+t:this.$wrapData[e].length+1+t},this.$getWidgetScreenLength=function(){var e=0;return this.lineWidgets.forEach(function(t){t&&t.rowCount&&!t.hidden&&(e+=t.rowCount)}),e},this.$onChangeEditor=function(e){this.attach(e.editor)},this.attach=function(e){e&&e.widgetManager&&e.widgetManager!=this&&e.widgetManager.detach();if(this.editor==e)return;this.detach(),this.editor=e,e&&(e.widgetManager=this,e.renderer.on(\"beforeRender\",this.measureWidgets),e.renderer.on(\"afterRender\",this.renderWidgets))},this.detach=function(e){var t=this.editor;if(!t)return;this.editor=null,t.widgetManager=null,t.renderer.off(\"beforeRender\",this.measureWidgets),t.renderer.off(\"afterRender\",this.renderWidgets);var n=this.session.lineWidgets;n&&n.forEach(function(e){e&&e.el&&e.el.parentNode&&(e._inDocument=!1,e.el.parentNode.removeChild(e.el))})},this.updateOnFold=function(e,t){var n=t.lineWidgets;if(!n||!e.action)return;var r=e.data,i=r.start.row,s=r.end.row,o=e.action==\"add\";for(var u=i+1;u<s;u++)n[u]&&(n[u].hidden=o);n[s]&&(o?n[i]?n[s].hidden=o:n[i]=n[s]:(n[i]==n[s]&&(n[i]=undefined),n[s].hidden=o))},this.updateOnChange=function(e){var t=this.session.lineWidgets;if(!t)return;var n=e.start.row,r=e.end.row-n;if(r!==0)if(e.action==\"remove\"){var i=t.splice(n+1,r);!t[n]&&i[i.length-1]&&(t[n]=i.pop()),i.forEach(function(e){e&&this.removeLineWidget(e)},this),this.$updateRows()}else{var s=new Array(r);t[n]&&t[n].column!=null&&e.start.column>t[n].column&&n++,s.unshift(n,0),t.splice.apply(t,s),this.$updateRows()}},this.$updateRows=function(){var e=this.session.lineWidgets;if(!e)return;var t=!0;e.forEach(function(e,n){if(e){t=!1,e.row=n;while(e.$oldWidget)e.$oldWidget.row=n,e=e.$oldWidget}}),t&&(this.session.lineWidgets=null)},this.$registerLineWidget=function(e){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var t=this.session.lineWidgets[e.row];return t&&(e.$oldWidget=t,t.el&&t.el.parentNode&&(t.el.parentNode.removeChild(t.el),t._inDocument=!1)),this.session.lineWidgets[e.row]=e,e},this.addLineWidget=function(e){this.$registerLineWidget(e),e.session=this.session;if(!this.editor)return e;var t=this.editor.renderer;e.html&&!e.el&&(e.el=r.createElement(\"div\"),e.el.innerHTML=e.html),e.el&&(r.addCssClass(e.el,\"ace_lineWidgetContainer\"),e.el.style.position=\"absolute\",e.el.style.zIndex=5,t.container.appendChild(e.el),e._inDocument=!0,e.coverGutter||(e.el.style.zIndex=3),e.pixelHeight==null&&(e.pixelHeight=e.el.offsetHeight)),e.rowCount==null&&(e.rowCount=e.pixelHeight/t.layerConfig.lineHeight);var n=this.session.getFoldAt(e.row,0);e.$fold=n;if(n){var i=this.session.lineWidgets;e.row==n.end.row&&!i[n.start.row]?i[n.start.row]=e:e.hidden=!0}return this.session._emit(\"changeFold\",{data:{start:{row:e.row}}}),this.$updateRows(),this.renderWidgets(null,t),this.onWidgetChanged(e),e},this.removeLineWidget=function(e){e._inDocument=!1,e.session=null,e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el);if(e.editor&&e.editor.destroy)try{e.editor.destroy()}catch(t){}if(this.session.lineWidgets){var n=this.session.lineWidgets[e.row];if(n==e)this.session.lineWidgets[e.row]=e.$oldWidget,e.$oldWidget&&this.onWidgetChanged(e.$oldWidget);else while(n){if(n.$oldWidget==e){n.$oldWidget=e.$oldWidget;break}n=n.$oldWidget}}this.session._emit(\"changeFold\",{data:{start:{row:e.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(e){var t=this.session.lineWidgets,n=t&&t[e],r=[];while(n)r.push(n),n=n.$oldWidget;return r},this.onWidgetChanged=function(e){this.session._changedWidgets.push(e),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(e,t){var n=this.session._changedWidgets,r=t.layerConfig;if(!n||!n.length)return;var i=Infinity;for(var s=0;s<n.length;s++){var o=n[s];if(!o||!o.el)continue;if(o.session!=this.session)continue;if(!o._inDocument){if(this.session.lineWidgets[o.row]!=o)continue;o._inDocument=!0,t.container.appendChild(o.el)}o.h=o.el.offsetHeight,o.fixedWidth||(o.w=o.el.offsetWidth,o.screenWidth=Math.ceil(o.w/r.characterWidth));var u=o.h/r.lineHeight;o.coverLine&&(u-=this.session.getRowLineCount(o.row),u<0&&(u=0)),o.rowCount!=u&&(o.rowCount=u,o.row<i&&(i=o.row))}i!=Infinity&&(this.session._emit(\"changeFold\",{data:{start:{row:i}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]},this.renderWidgets=function(e,t){var n=t.layerConfig,r=this.session.lineWidgets;if(!r)return;var i=Math.min(this.firstRow,n.firstRow),s=Math.max(this.lastRow,n.lastRow,r.length);while(i>0&&!r[i])i--;this.firstRow=n.firstRow,this.lastRow=n.lastRow,t.$cursorLayer.config=n;for(var o=i;o<=s;o++){var u=r[o];if(!u||!u.el)continue;if(u.hidden){u.el.style.top=-100-(u.pixelHeight||0)+\"px\";continue}u._inDocument||(u._inDocument=!0,t.container.appendChild(u.el));var a=t.$cursorLayer.getPixelPosition({row:o,column:0},!0).top;u.coverLine||(a+=n.lineHeight*this.session.getRowLineCount(u.row)),u.el.style.top=a-n.offset+\"px\";var f=u.coverGutter?0:t.gutterWidth;u.fixedWidth||(f-=t.scrollLeft),u.el.style.left=f+\"px\",u.fullWidth&&u.screenWidth&&(u.el.style.minWidth=n.width+2*n.padding+\"px\"),u.fixedWidth?u.el.style.right=t.scrollBar.getWidth()+\"px\":u.el.style.right=\"\"}}}).call(i.prototype),t.LineWidgets=i}),ace.define(\"ace/ext/error_marker\",[\"require\",\"exports\",\"module\",\"ace/line_widgets\",\"ace/lib/dom\",\"ace/range\"],function(e,t,n){\"use strict\";function o(e,t,n){var r=0,i=e.length-1;while(r<=i){var s=r+i>>1,o=n(t,e[s]);if(o>0)r=s+1;else{if(!(o<0))return s;i=s-1}}return-(r+1)}function u(e,t,n){var r=e.getAnnotations().sort(s.comparePoints);if(!r.length)return;var i=o(r,{row:t,column:-1},s.comparePoints);i<0&&(i=-i-1),i>=r.length?i=n>0?0:r.length-1:i===0&&n<0&&(i=r.length-1);var u=r[i];if(!u||!n)return;if(u.row===t){do u=r[i+=n];while(u&&u.row===t);if(!u)return r.slice()}var a=[];t=u.row;do a[n<0?\"unshift\":\"push\"](u),u=r[i+=n];while(u&&u.row==t);return a.length&&a}var r=e(\"../line_widgets\").LineWidgets,i=e(\"../lib/dom\"),s=e(\"../range\").Range;t.showErrorMarker=function(e,t){var n=e.session;n.widgetManager||(n.widgetManager=new r(n),n.widgetManager.attach(e));var s=e.getCursorPosition(),o=s.row,a=n.widgetManager.getWidgetsAtRow(o).filter(function(e){return e.type==\"errorMarker\"})[0];a?a.destroy():o-=t;var f=u(n,o,t),l;if(f){var c=f[0];s.column=(c.pos&&typeof c.column!=\"number\"?c.pos.sc:c.column)||0,s.row=c.row,l=e.renderer.$gutterLayer.$annotations[s.row]}else{if(a)return;l={text:[\"Looks good!\"],className:\"ace_ok\"}}e.session.unfold(s.row),e.selection.moveToPosition(s);var h={row:s.row,fixedWidth:!0,coverGutter:!0,el:i.createElement(\"div\"),type:\"errorMarker\"},p=h.el.appendChild(i.createElement(\"div\")),d=h.el.appendChild(i.createElement(\"div\"));d.className=\"error_widget_arrow \"+l.className;var v=e.renderer.$cursorLayer.getPixelPosition(s).left;d.style.left=v+e.renderer.gutterWidth-5+\"px\",h.el.className=\"error_widget_wrapper\",p.className=\"error_widget \"+l.className,p.innerHTML=l.text.join(\"<br>\"),p.appendChild(i.createElement(\"div\"));var m=function(e,t,n){if(t===0&&(n===\"esc\"||n===\"return\"))return h.destroy(),{command:\"null\"}};h.destroy=function(){if(e.$mouseHandler.isMousePressed)return;e.keyBinding.removeKeyboardHandler(m),n.widgetManager.removeLineWidget(h),e.off(\"changeSelection\",h.destroy),e.off(\"changeSession\",h.destroy),e.off(\"mouseup\",h.destroy),e.off(\"change\",h.destroy)},e.keyBinding.addKeyboardHandler(m),e.on(\"changeSelection\",h.destroy),e.on(\"changeSession\",h.destroy),e.on(\"mouseup\",h.destroy),e.on(\"change\",h.destroy),e.session.widgetManager.addLineWidget(h),h.el.onmousedown=e.focus.bind(e),e.renderer.scrollCursorIntoView(null,.5,{bottom:h.el.offsetHeight})},i.importCssString(\"\\n    .error_widget_wrapper {\\n        background: inherit;\\n        color: inherit;\\n        border:none\\n    }\\n    .error_widget {\\n        border-top: solid 2px;\\n        border-bottom: solid 2px;\\n        margin: 5px 0;\\n        padding: 10px 40px;\\n        white-space: pre-wrap;\\n    }\\n    .error_widget.ace_error, .error_widget_arrow.ace_error{\\n        border-color: #ff5a5a\\n    }\\n    .error_widget.ace_warning, .error_widget_arrow.ace_warning{\\n        border-color: #F1D817\\n    }\\n    .error_widget.ace_info, .error_widget_arrow.ace_info{\\n        border-color: #5a5a5a\\n    }\\n    .error_widget.ace_ok, .error_widget_arrow.ace_ok{\\n        border-color: #5aaa5a\\n    }\\n    .error_widget_arrow {\\n        position: absolute;\\n        border: solid 5px;\\n        border-top-color: transparent!important;\\n        border-right-color: transparent!important;\\n        border-left-color: transparent!important;\\n        top: -5px;\\n    }\\n\",\"error_marker.css\",!1)}),ace.define(\"ace/ace\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/event\",\"ace/range\",\"ace/editor\",\"ace/edit_session\",\"ace/undomanager\",\"ace/virtual_renderer\",\"ace/worker/worker_client\",\"ace/keyboard/hash_handler\",\"ace/placeholder\",\"ace/multi_select\",\"ace/mode/folding/fold_mode\",\"ace/theme/textmate\",\"ace/ext/error_marker\",\"ace/config\",\"ace/loader_build\"],function(e,t,n){\"use strict\";e(\"./loader_build\")(t);var r=e(\"./lib/dom\"),i=e(\"./lib/event\"),s=e(\"./range\").Range,o=e(\"./editor\").Editor,u=e(\"./edit_session\").EditSession,a=e(\"./undomanager\").UndoManager,f=e(\"./virtual_renderer\").VirtualRenderer;e(\"./worker/worker_client\"),e(\"./keyboard/hash_handler\"),e(\"./placeholder\"),e(\"./multi_select\"),e(\"./mode/folding/fold_mode\"),e(\"./theme/textmate\"),e(\"./ext/error_marker\"),t.config=e(\"./config\"),t.edit=function(e,n){if(typeof e==\"string\"){var s=e;e=document.getElementById(s);if(!e)throw new Error(\"ace.edit can't find div #\"+s)}if(e&&e.env&&e.env.editor instanceof o)return e.env.editor;var u=\"\";if(e&&/input|textarea/i.test(e.tagName)){var a=e;u=a.value,e=r.createElement(\"pre\"),a.parentNode.replaceChild(e,a)}else e&&(u=e.textContent,e.innerHTML=\"\");var l=t.createEditSession(u),c=new o(new f(e),l,n),h={document:l,editor:c,onResize:c.resize.bind(c,null)};return a&&(h.textarea=a),i.addListener(window,\"resize\",h.onResize),c.on(\"destroy\",function(){i.removeListener(window,\"resize\",h.onResize),h.editor.container.env=null}),c.container.env=c.env=h,c},t.createEditSession=function(e,t){var n=new u(e,t);return n.setUndoManager(new a),n},t.Range=s,t.Editor=o,t.EditSession=u,t.UndoManager=a,t.VirtualRenderer=f,t.version=t.config.version});            (function() {\n                ace.require([\"ace/ace\"], function(a) {\n                    if (a) {\n                        a.config.init(true);\n                        a.define = ace.define;\n                    }\n                    if (!window.ace)\n                        window.ace = a;\n                    for (var key in a) if (a.hasOwnProperty(key))\n                        window.ace[key] = a[key];\n                    window.ace[\"default\"] = window.ace;\n                    if ( true && module) {\n                        module.exports = window.ace;\n                    }\n                });\n            })();\n        \n\n//# sourceURL=webpack://playground/./node_modules/ace-builds/src-min-noconflict/ace.js?");

/***/ }),

/***/ "./node_modules/ace-builds/src-min-noconflict/ext-modelist.js":
/*!********************************************************************!*\
  !*** ./node_modules/ace-builds/src-min-noconflict/ext-modelist.js ***!
  \********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/* module decorator */ module = __webpack_require__.nmd(module);\nace.define(\"ace/ext/modelist\",[\"require\",\"exports\",\"module\"],function(e,t,n){\"use strict\";function i(e){var t=a.text,n=e.split(/[\\/\\\\]/).pop();for(var i=0;i<r.length;i++)if(r[i].supportsFile(n)){t=r[i];break}return t}var r=[],s=function(e,t,n){this.name=e,this.caption=t,this.mode=\"ace/mode/\"+e,this.extensions=n;var r;/\\^/.test(n)?r=n.replace(/\\|(\\^)?/g,function(e,t){return\"$|\"+(t?\"^\":\"^.*\\\\.\")})+\"$\":r=\"^.*\\\\.(\"+n+\")$\",this.extRe=new RegExp(r,\"gi\")};s.prototype.supportsFile=function(e){return e.match(this.extRe)};var o={ABAP:[\"abap\"],ABC:[\"abc\"],ActionScript:[\"as\"],ADA:[\"ada|adb\"],Alda:[\"alda\"],Apache_Conf:[\"^htaccess|^htgroups|^htpasswd|^conf|htaccess|htgroups|htpasswd\"],Apex:[\"apex|cls|trigger|tgr\"],AQL:[\"aql\"],AsciiDoc:[\"asciidoc|adoc\"],ASL:[\"dsl|asl|asl.json\"],Assembly_x86:[\"asm|a\"],AutoHotKey:[\"ahk\"],BatchFile:[\"bat|cmd\"],BibTeX:[\"bib\"],C_Cpp:[\"cpp|c|cc|cxx|h|hh|hpp|ino\"],C9Search:[\"c9search_results\"],Cirru:[\"cirru|cr\"],Clojure:[\"clj|cljs\"],Cobol:[\"CBL|COB\"],coffee:[\"coffee|cf|cson|^Cakefile\"],ColdFusion:[\"cfm\"],Crystal:[\"cr\"],CSharp:[\"cs\"],Csound_Document:[\"csd\"],Csound_Orchestra:[\"orc\"],Csound_Score:[\"sco\"],CSS:[\"css\"],Curly:[\"curly\"],D:[\"d|di\"],Dart:[\"dart\"],Diff:[\"diff|patch\"],Dockerfile:[\"^Dockerfile\"],Dot:[\"dot\"],Drools:[\"drl\"],Edifact:[\"edi\"],Eiffel:[\"e|ge\"],EJS:[\"ejs\"],Elixir:[\"ex|exs\"],Elm:[\"elm\"],Erlang:[\"erl|hrl\"],Forth:[\"frt|fs|ldr|fth|4th\"],Fortran:[\"f|f90\"],FSharp:[\"fsi|fs|ml|mli|fsx|fsscript\"],FSL:[\"fsl\"],FTL:[\"ftl\"],Gcode:[\"gcode\"],Gherkin:[\"feature\"],Gitignore:[\"^.gitignore\"],Glsl:[\"glsl|frag|vert\"],Gobstones:[\"gbs\"],golang:[\"go\"],GraphQLSchema:[\"gql\"],Groovy:[\"groovy\"],HAML:[\"haml\"],Handlebars:[\"hbs|handlebars|tpl|mustache\"],Haskell:[\"hs\"],Haskell_Cabal:[\"cabal\"],haXe:[\"hx\"],Hjson:[\"hjson\"],HTML:[\"html|htm|xhtml|vue|we|wpy\"],HTML_Elixir:[\"eex|html.eex\"],HTML_Ruby:[\"erb|rhtml|html.erb\"],INI:[\"ini|conf|cfg|prefs\"],Io:[\"io\"],Ion:[\"ion\"],Jack:[\"jack\"],Jade:[\"jade|pug\"],Java:[\"java\"],JavaScript:[\"js|jsm|jsx|cjs|mjs\"],JEXL:[\"jexl\"],JSON:[\"json\"],JSON5:[\"json5\"],JSONiq:[\"jq\"],JSP:[\"jsp\"],JSSM:[\"jssm|jssm_state\"],JSX:[\"jsx\"],Julia:[\"jl\"],Kotlin:[\"kt|kts\"],LaTeX:[\"tex|latex|ltx|bib\"],Latte:[\"latte\"],LESS:[\"less\"],Liquid:[\"liquid\"],Lisp:[\"lisp\"],LiveScript:[\"ls\"],Log:[\"log\"],LogiQL:[\"logic|lql\"],Logtalk:[\"lgt\"],LSL:[\"lsl\"],Lua:[\"lua\"],LuaPage:[\"lp\"],Lucene:[\"lucene\"],Makefile:[\"^Makefile|^GNUmakefile|^makefile|^OCamlMakefile|make\"],Markdown:[\"md|markdown\"],Mask:[\"mask\"],MATLAB:[\"matlab\"],Maze:[\"mz\"],MediaWiki:[\"wiki|mediawiki\"],MEL:[\"mel\"],MIPS:[\"s|asm\"],MIXAL:[\"mixal\"],MUSHCode:[\"mc|mush\"],MySQL:[\"mysql\"],Nginx:[\"nginx|conf\"],Nim:[\"nim\"],Nix:[\"nix\"],NSIS:[\"nsi|nsh\"],Nunjucks:[\"nunjucks|nunjs|nj|njk\"],ObjectiveC:[\"m|mm\"],OCaml:[\"ml|mli\"],PartiQL:[\"partiql|pql\"],Pascal:[\"pas|p\"],Perl:[\"pl|pm\"],pgSQL:[\"pgsql\"],PHP_Laravel_blade:[\"blade.php\"],PHP:[\"php|inc|phtml|shtml|php3|php4|php5|phps|phpt|aw|ctp|module\"],Pig:[\"pig\"],Powershell:[\"ps1\"],Praat:[\"praat|praatscript|psc|proc\"],Prisma:[\"prisma\"],Prolog:[\"plg|prolog\"],Properties:[\"properties\"],Protobuf:[\"proto\"],Puppet:[\"epp|pp\"],Python:[\"py\"],QML:[\"qml\"],R:[\"r\"],Raku:[\"raku|rakumod|rakutest|p6|pl6|pm6\"],Razor:[\"cshtml|asp\"],RDoc:[\"Rd\"],Red:[\"red|reds\"],RHTML:[\"Rhtml\"],Robot:[\"robot|resource\"],RST:[\"rst\"],Ruby:[\"rb|ru|gemspec|rake|^Guardfile|^Rakefile|^Gemfile\"],Rust:[\"rs\"],SaC:[\"sac\"],SASS:[\"sass\"],SCAD:[\"scad\"],Scala:[\"scala|sbt\"],Scheme:[\"scm|sm|rkt|oak|scheme\"],Scrypt:[\"scrypt\"],SCSS:[\"scss\"],SH:[\"sh|bash|^.bashrc\"],SJS:[\"sjs\"],Slim:[\"slim|skim\"],Smarty:[\"smarty|tpl\"],Smithy:[\"smithy\"],snippets:[\"snippets\"],Soy_Template:[\"soy\"],Space:[\"space\"],SPARQL:[\"rq\"],SQL:[\"sql\"],SQLServer:[\"sqlserver\"],Stylus:[\"styl|stylus\"],SVG:[\"svg\"],Swift:[\"swift\"],Tcl:[\"tcl\"],Terraform:[\"tf\",\"tfvars\",\"terragrunt\"],Tex:[\"tex\"],Text:[\"txt\"],Textile:[\"textile\"],Toml:[\"toml\"],TSX:[\"tsx\"],Turtle:[\"ttl\"],Twig:[\"twig|swig\"],Typescript:[\"ts|typescript|str\"],Vala:[\"vala\"],VBScript:[\"vbs|vb\"],Velocity:[\"vm\"],Verilog:[\"v|vh|sv|svh\"],VHDL:[\"vhd|vhdl\"],Visualforce:[\"vfp|component|page\"],Wollok:[\"wlk|wpgm|wtest\"],XML:[\"xml|rdf|rss|wsdl|xslt|atom|mathml|mml|xul|xbl|xaml\"],XQuery:[\"xq\"],YAML:[\"yaml|yml\"],Zeek:[\"zeek|bro\"],Django:[\"html\"]},u={ObjectiveC:\"Objective-C\",CSharp:\"C#\",golang:\"Go\",C_Cpp:\"C and C++\",Csound_Document:\"Csound Document\",Csound_Orchestra:\"Csound\",Csound_Score:\"Csound Score\",coffee:\"CoffeeScript\",HTML_Ruby:\"HTML (Ruby)\",HTML_Elixir:\"HTML (Elixir)\",FTL:\"FreeMarker\",PHP_Laravel_blade:\"PHP (Blade Template)\",Perl6:\"Perl 6\",AutoHotKey:\"AutoHotkey / AutoIt\"},a={};for(var f in o){var l=o[f],c=(u[f]||f).replace(/_/g,\" \"),h=f.toLowerCase(),p=new s(h,c,l[0]);a[h]=p,r.push(p)}n.exports={getModeForPath:i,modes:r,modesByName:a}});                (function() {\n                    ace.require([\"ace/ext/modelist\"], function(m) {\n                        if ( true && module) {\n                            module.exports = m;\n                        }\n                    });\n                })();\n            \n\n//# sourceURL=webpack://playground/./node_modules/ace-builds/src-min-noconflict/ext-modelist.js?");

/***/ }),

/***/ "./node_modules/ace-builds/src-min-noconflict/mode-html.js":
/*!*****************************************************************!*\
  !*** ./node_modules/ace-builds/src-min-noconflict/mode-html.js ***!
  \*****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/* module decorator */ module = __webpack_require__.nmd(module);\nace.define(\"ace/mode/doc_comment_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text_highlight_rules\"],function(e,t,n){\"use strict\";var r=e(\"../lib/oop\"),i=e(\"./text_highlight_rules\").TextHighlightRules,s=function(){this.$rules={start:[{token:\"comment.doc.tag\",regex:\"@[\\\\w\\\\d_]+\"},s.getTagRule(),{defaultToken:\"comment.doc\",caseInsensitive:!0}]}};r.inherits(s,i),s.getTagRule=function(e){return{token:\"comment.doc.tag.storage.type\",regex:\"\\\\b(?:TODO|FIXME|XXX|HACK)\\\\b\"}},s.getStartRule=function(e){return{token:\"comment.doc\",regex:\"\\\\/\\\\*(?=\\\\*)\",next:e}},s.getEndRule=function(e){return{token:\"comment.doc\",regex:\"\\\\*\\\\/\",next:e}},t.DocCommentHighlightRules=s}),ace.define(\"ace/mode/javascript_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/doc_comment_highlight_rules\",\"ace/mode/text_highlight_rules\"],function(e,t,n){\"use strict\";function a(){var e=o.replace(\"\\\\d\",\"\\\\d\\\\-\"),t={onMatch:function(e,t,n){var r=e.charAt(1)==\"/\"?2:1;if(r==1)t!=this.nextState?n.unshift(this.next,this.nextState,0):n.unshift(this.next),n[2]++;else if(r==2&&t==this.nextState){n[1]--;if(!n[1]||n[1]<0)n.shift(),n.shift()}return[{type:\"meta.tag.punctuation.\"+(r==1?\"\":\"end-\")+\"tag-open.xml\",value:e.slice(0,r)},{type:\"meta.tag.tag-name.xml\",value:e.substr(r)}]},regex:\"</?\"+e+\"\",next:\"jsxAttributes\",nextState:\"jsx\"};this.$rules.start.unshift(t);var n={regex:\"{\",token:\"paren.quasi.start\",push:\"start\"};this.$rules.jsx=[n,t,{include:\"reference\"},{defaultToken:\"string\"}],this.$rules.jsxAttributes=[{token:\"meta.tag.punctuation.tag-close.xml\",regex:\"/?>\",onMatch:function(e,t,n){return t==n[0]&&n.shift(),e.length==2&&(n[0]==this.nextState&&n[1]--,(!n[1]||n[1]<0)&&n.splice(0,2)),this.next=n[0]||\"start\",[{type:this.token,value:e}]},nextState:\"jsx\"},n,f(\"jsxAttributes\"),{token:\"entity.other.attribute-name.xml\",regex:e},{token:\"keyword.operator.attribute-equals.xml\",regex:\"=\"},{token:\"text.tag-whitespace.xml\",regex:\"\\\\s+\"},{token:\"string.attribute-value.xml\",regex:\"'\",stateName:\"jsx_attr_q\",push:[{token:\"string.attribute-value.xml\",regex:\"'\",next:\"pop\"},{include:\"reference\"},{defaultToken:\"string.attribute-value.xml\"}]},{token:\"string.attribute-value.xml\",regex:'\"',stateName:\"jsx_attr_qq\",push:[{token:\"string.attribute-value.xml\",regex:'\"',next:\"pop\"},{include:\"reference\"},{defaultToken:\"string.attribute-value.xml\"}]},t],this.$rules.reference=[{token:\"constant.language.escape.reference.xml\",regex:\"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\\\.-]+;)\"}]}function f(e){return[{token:\"comment\",regex:/\\/\\*/,next:[i.getTagRule(),{token:\"comment\",regex:\"\\\\*\\\\/\",next:e||\"pop\"},{defaultToken:\"comment\",caseInsensitive:!0}]},{token:\"comment\",regex:\"\\\\/\\\\/\",next:[i.getTagRule(),{token:\"comment\",regex:\"$|^\",next:e||\"pop\"},{defaultToken:\"comment\",caseInsensitive:!0}]}]}var r=e(\"../lib/oop\"),i=e(\"./doc_comment_highlight_rules\").DocCommentHighlightRules,s=e(\"./text_highlight_rules\").TextHighlightRules,o=\"[a-zA-Z\\\\$_\\u00a1-\\uffff][a-zA-Z\\\\d\\\\$_\\u00a1-\\uffff]*\",u=function(e){var t=this.createKeywordMapper({\"variable.language\":\"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Symbol|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|isNaN|parseFloat|parseInt|JSON|Math|this|arguments|prototype|window|document\",keyword:\"const|yield|import|get|set|async|await|break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|of|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|__parent__|__count__|escape|unescape|with|__proto__|class|enum|extends|super|export|implements|private|public|interface|package|protected|static|constructor\",\"storage.type\":\"const|let|var|function\",\"constant.language\":\"null|Infinity|NaN|undefined\",\"support.function\":\"alert\",\"constant.language.boolean\":\"true|false\"},\"identifier\"),n=\"case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void\",r=\"\\\\\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|u{[0-9a-fA-F]{1,6}}|[0-2][0-7]{0,2}|3[0-7][0-7]?|[4-7][0-7]?|.)\";this.$rules={no_regex:[i.getStartRule(\"doc-start\"),f(\"no_regex\"),{token:\"string\",regex:\"'(?=.)\",next:\"qstring\"},{token:\"string\",regex:'\"(?=.)',next:\"qqstring\"},{token:\"constant.numeric\",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\\b/},{token:\"constant.numeric\",regex:/(?:\\d\\d*(?:\\.\\d*)?|\\.\\d+)(?:[eE][+-]?\\d+\\b)?/},{token:[\"storage.type\",\"punctuation.operator\",\"support.function\",\"punctuation.operator\",\"entity.name.function\",\"text\",\"keyword.operator\"],regex:\"(\"+o+\")(\\\\.)(prototype)(\\\\.)(\"+o+\")(\\\\s*)(=)\",next:\"function_arguments\"},{token:[\"storage.type\",\"punctuation.operator\",\"entity.name.function\",\"text\",\"keyword.operator\",\"text\",\"storage.type\",\"text\",\"paren.lparen\"],regex:\"(\"+o+\")(\\\\.)(\"+o+\")(\\\\s*)(=)(\\\\s*)(function\\\\*?)(\\\\s*)(\\\\()\",next:\"function_arguments\"},{token:[\"entity.name.function\",\"text\",\"keyword.operator\",\"text\",\"storage.type\",\"text\",\"paren.lparen\"],regex:\"(\"+o+\")(\\\\s*)(=)(\\\\s*)(function\\\\*?)(\\\\s*)(\\\\()\",next:\"function_arguments\"},{token:[\"storage.type\",\"punctuation.operator\",\"entity.name.function\",\"text\",\"keyword.operator\",\"text\",\"storage.type\",\"text\",\"entity.name.function\",\"text\",\"paren.lparen\"],regex:\"(\"+o+\")(\\\\.)(\"+o+\")(\\\\s*)(=)(\\\\s*)(function\\\\*?)(\\\\s+)(\\\\w+)(\\\\s*)(\\\\()\",next:\"function_arguments\"},{token:[\"storage.type\",\"text\",\"entity.name.function\",\"text\",\"paren.lparen\"],regex:\"(function\\\\*?)(\\\\s+)(\"+o+\")(\\\\s*)(\\\\()\",next:\"function_arguments\"},{token:[\"entity.name.function\",\"text\",\"punctuation.operator\",\"text\",\"storage.type\",\"text\",\"paren.lparen\"],regex:\"(\"+o+\")(\\\\s*)(:)(\\\\s*)(function\\\\*?)(\\\\s*)(\\\\()\",next:\"function_arguments\"},{token:[\"text\",\"text\",\"storage.type\",\"text\",\"paren.lparen\"],regex:\"(:)(\\\\s*)(function\\\\*?)(\\\\s*)(\\\\()\",next:\"function_arguments\"},{token:\"keyword\",regex:\"from(?=\\\\s*('|\\\"))\"},{token:\"keyword\",regex:\"(?:\"+n+\")\\\\b\",next:\"start\"},{token:\"support.constant\",regex:/that\\b/},{token:[\"storage.type\",\"punctuation.operator\",\"support.function.firebug\"],regex:/(console)(\\.)(warn|info|log|error|time|trace|timeEnd|assert)\\b/},{token:t,regex:o},{token:\"punctuation.operator\",regex:/[.](?![.])/,next:\"property\"},{token:\"storage.type\",regex:/=>/,next:\"start\"},{token:\"keyword.operator\",regex:/--|\\+\\+|\\.{3}|===|==|=|!=|!==|<+=?|>+=?|!|&&|\\|\\||\\?:|[!$%&*+\\-~\\/^]=?/,next:\"start\"},{token:\"punctuation.operator\",regex:/[?:,;.]/,next:\"start\"},{token:\"paren.lparen\",regex:/[\\[({]/,next:\"start\"},{token:\"paren.rparen\",regex:/[\\])}]/},{token:\"comment\",regex:/^#!.*$/}],property:[{token:\"text\",regex:\"\\\\s+\"},{token:[\"storage.type\",\"punctuation.operator\",\"entity.name.function\",\"text\",\"keyword.operator\",\"text\",\"storage.type\",\"text\",\"entity.name.function\",\"text\",\"paren.lparen\"],regex:\"(\"+o+\")(\\\\.)(\"+o+\")(\\\\s*)(=)(\\\\s*)(function\\\\*?)(?:(\\\\s+)(\\\\w+))?(\\\\s*)(\\\\()\",next:\"function_arguments\"},{token:\"punctuation.operator\",regex:/[.](?![.])/},{token:\"support.function\",regex:/(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|lter|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward|rEach)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\\b(?=\\()/},{token:\"support.function.dom\",regex:/(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\\b(?=\\()/},{token:\"support.constant\",regex:/(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\\b/},{token:\"identifier\",regex:o},{regex:\"\",token:\"empty\",next:\"no_regex\"}],start:[i.getStartRule(\"doc-start\"),f(\"start\"),{token:\"string.regexp\",regex:\"\\\\/\",next:\"regex\"},{token:\"text\",regex:\"\\\\s+|^$\",next:\"start\"},{token:\"empty\",regex:\"\",next:\"no_regex\"}],regex:[{token:\"regexp.keyword.operator\",regex:\"\\\\\\\\(?:u[\\\\da-fA-F]{4}|x[\\\\da-fA-F]{2}|.)\"},{token:\"string.regexp\",regex:\"/[sxngimy]*\",next:\"no_regex\"},{token:\"invalid\",regex:/\\{\\d+\\b,?\\d*\\}[+*]|[+*$^?][+*]|[$^][?]|\\?{3,}/},{token:\"constant.language.escape\",regex:/\\(\\?[:=!]|\\)|\\{\\d+\\b,?\\d*\\}|[+*]\\?|[()$^+*?.]/},{token:\"constant.language.delimiter\",regex:/\\|/},{token:\"constant.language.escape\",regex:/\\[\\^?/,next:\"regex_character_class\"},{token:\"empty\",regex:\"$\",next:\"no_regex\"},{defaultToken:\"string.regexp\"}],regex_character_class:[{token:\"regexp.charclass.keyword.operator\",regex:\"\\\\\\\\(?:u[\\\\da-fA-F]{4}|x[\\\\da-fA-F]{2}|.)\"},{token:\"constant.language.escape\",regex:\"]\",next:\"regex\"},{token:\"constant.language.escape\",regex:\"-\"},{token:\"empty\",regex:\"$\",next:\"no_regex\"},{defaultToken:\"string.regexp.charachterclass\"}],default_parameter:[{token:\"string\",regex:\"'(?=.)\",push:[{token:\"string\",regex:\"'|$\",next:\"pop\"},{include:\"qstring\"}]},{token:\"string\",regex:'\"(?=.)',push:[{token:\"string\",regex:'\"|$',next:\"pop\"},{include:\"qqstring\"}]},{token:\"constant.language\",regex:\"null|Infinity|NaN|undefined\"},{token:\"constant.numeric\",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\\b/},{token:\"constant.numeric\",regex:/(?:\\d\\d*(?:\\.\\d*)?|\\.\\d+)(?:[eE][+-]?\\d+\\b)?/},{token:\"punctuation.operator\",regex:\",\",next:\"function_arguments\"},{token:\"text\",regex:\"\\\\s+\"},{token:\"punctuation.operator\",regex:\"$\"},{token:\"empty\",regex:\"\",next:\"no_regex\"}],function_arguments:[f(\"function_arguments\"),{token:\"variable.parameter\",regex:o},{token:\"punctuation.operator\",regex:\",\"},{token:\"text\",regex:\"\\\\s+\"},{token:\"punctuation.operator\",regex:\"$\"},{token:\"empty\",regex:\"\",next:\"no_regex\"}],qqstring:[{token:\"constant.language.escape\",regex:r},{token:\"string\",regex:\"\\\\\\\\$\",consumeLineEnd:!0},{token:\"string\",regex:'\"|$',next:\"no_regex\"},{defaultToken:\"string\"}],qstring:[{token:\"constant.language.escape\",regex:r},{token:\"string\",regex:\"\\\\\\\\$\",consumeLineEnd:!0},{token:\"string\",regex:\"'|$\",next:\"no_regex\"},{defaultToken:\"string\"}]};if(!e||!e.noES6)this.$rules.no_regex.unshift({regex:\"[{}]\",onMatch:function(e,t,n){this.next=e==\"{\"?this.nextState:\"\";if(e==\"{\"&&n.length)n.unshift(\"start\",t);else if(e==\"}\"&&n.length){n.shift(),this.next=n.shift();if(this.next.indexOf(\"string\")!=-1||this.next.indexOf(\"jsx\")!=-1)return\"paren.quasi.end\"}return e==\"{\"?\"paren.lparen\":\"paren.rparen\"},nextState:\"start\"},{token:\"string.quasi.start\",regex:/`/,push:[{token:\"constant.language.escape\",regex:r},{token:\"paren.quasi.start\",regex:/\\${/,push:\"start\"},{token:\"string.quasi.end\",regex:/`/,next:\"pop\"},{defaultToken:\"string.quasi\"}]},{token:[\"variable.parameter\",\"text\"],regex:\"(\"+o+\")(\\\\s*)(?=\\\\=>)\"},{token:\"paren.lparen\",regex:\"(\\\\()(?=.+\\\\s*=>)\",next:\"function_arguments\"},{token:\"variable.language\",regex:\"(?:(?:(?:Weak)?(?:Set|Map))|Promise)\\\\b\"}),this.$rules.function_arguments.unshift({token:\"keyword.operator\",regex:\"=\",next:\"default_parameter\"},{token:\"keyword.operator\",regex:\"\\\\.{3}\"}),this.$rules.property.unshift({token:\"support.function\",regex:\"(findIndex|repeat|startsWith|endsWith|includes|isSafeInteger|trunc|cbrt|log2|log10|sign|then|catch|finally|resolve|reject|race|any|all|allSettled|keys|entries|isInteger)\\\\b(?=\\\\()\"},{token:\"constant.language\",regex:\"(?:MAX_SAFE_INTEGER|MIN_SAFE_INTEGER|EPSILON)\\\\b\"}),(!e||e.jsx!=0)&&a.call(this);this.embedRules(i,\"doc-\",[i.getEndRule(\"no_regex\")]),this.normalizeRules()};r.inherits(u,s),t.JavaScriptHighlightRules=u}),ace.define(\"ace/mode/matching_brace_outdent\",[\"require\",\"exports\",\"module\",\"ace/range\"],function(e,t,n){\"use strict\";var r=e(\"../range\").Range,i=function(){};(function(){this.checkOutdent=function(e,t){return/^\\s+$/.test(e)?/^\\s*\\}/.test(t):!1},this.autoOutdent=function(e,t){var n=e.getLine(t),i=n.match(/^(\\s*\\})/);if(!i)return 0;var s=i[1].length,o=e.findMatchingBracket({row:t,column:s});if(!o||o.row==t)return 0;var u=this.$getIndent(e.getLine(o.row));e.replace(new r(t,0,t,s-1),u)},this.$getIndent=function(e){return e.match(/^\\s*/)[0]}}).call(i.prototype),t.MatchingBraceOutdent=i}),ace.define(\"ace/mode/folding/cstyle\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/range\",\"ace/mode/folding/fold_mode\"],function(e,t,n){\"use strict\";var r=e(\"../../lib/oop\"),i=e(\"../../range\").Range,s=e(\"./fold_mode\").FoldMode,o=t.FoldMode=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\\|[^|]*?$/,\"|\"+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\\|[^|]*?$/,\"|\"+e.end)))};r.inherits(o,s),function(){this.foldingStartMarker=/([\\{\\[\\(])[^\\}\\]\\)]*$|^\\s*(\\/\\*)/,this.foldingStopMarker=/^[^\\[\\{\\(]*([\\}\\]\\)])|^[\\s\\*]*(\\*\\/)/,this.singleLineBlockCommentRe=/^\\s*(\\/\\*).*\\*\\/\\s*$/,this.tripleStarBlockCommentRe=/^\\s*(\\/\\*\\*\\*).*\\*\\/\\s*$/,this.startRegionRe=/^\\s*(\\/\\*|\\/\\/)#?region\\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(e,t,n){var r=e.getLine(n);if(this.singleLineBlockCommentRe.test(r)&&!this.startRegionRe.test(r)&&!this.tripleStarBlockCommentRe.test(r))return\"\";var i=this._getFoldWidgetBase(e,t,n);return!i&&this.startRegionRe.test(r)?\"start\":i},this.getFoldWidgetRange=function(e,t,n,r){var i=e.getLine(n);if(this.startRegionRe.test(i))return this.getCommentRegionBlock(e,i,n);var s=i.match(this.foldingStartMarker);if(s){var o=s.index;if(s[1])return this.openingBracketBlock(e,s[1],n,o);var u=e.getCommentFoldRange(n,o+s[0].length,1);return u&&!u.isMultiLine()&&(r?u=this.getSectionRange(e,n):t!=\"all\"&&(u=null)),u}if(t===\"markbegin\")return;var s=i.match(this.foldingStopMarker);if(s){var o=s.index+s[0].length;return s[1]?this.closingBracketBlock(e,s[1],n,o):e.getCommentFoldRange(n,o,-1)}},this.getSectionRange=function(e,t){var n=e.getLine(t),r=n.search(/\\S/),s=t,o=n.length;t+=1;var u=t,a=e.getLength();while(++t<a){n=e.getLine(t);var f=n.search(/\\S/);if(f===-1)continue;if(r>f)break;var l=this.getFoldWidgetRange(e,\"all\",t);if(l){if(l.start.row<=s)break;if(l.isMultiLine())t=l.end.row;else if(r==f)break}u=t}return new i(s,o,u,e.getLine(u).length)},this.getCommentRegionBlock=function(e,t,n){var r=t.search(/\\s*$/),s=e.getLength(),o=n,u=/^\\s*(?:\\/\\*|\\/\\/|--)#?(end)?region\\b/,a=1;while(++n<s){t=e.getLine(n);var f=u.exec(t);if(!f)continue;f[1]?a--:a++;if(!a)break}var l=n;if(l>o)return new i(o,r,l,t.length)}}.call(o.prototype)}),ace.define(\"ace/mode/javascript\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text\",\"ace/mode/javascript_highlight_rules\",\"ace/mode/matching_brace_outdent\",\"ace/worker/worker_client\",\"ace/mode/behaviour/cstyle\",\"ace/mode/folding/cstyle\"],function(e,t,n){\"use strict\";var r=e(\"../lib/oop\"),i=e(\"./text\").Mode,s=e(\"./javascript_highlight_rules\").JavaScriptHighlightRules,o=e(\"./matching_brace_outdent\").MatchingBraceOutdent,u=e(\"../worker/worker_client\").WorkerClient,a=e(\"./behaviour/cstyle\").CstyleBehaviour,f=e(\"./folding/cstyle\").FoldMode,l=function(){this.HighlightRules=s,this.$outdent=new o,this.$behaviour=new a,this.foldingRules=new f};r.inherits(l,i),function(){this.lineCommentStart=\"//\",this.blockComment={start:\"/*\",end:\"*/\"},this.$quotes={'\"':'\"',\"'\":\"'\",\"`\":\"`\"},this.getNextLineIndent=function(e,t,n){var r=this.$getIndent(t),i=this.getTokenizer().getLineTokens(t,e),s=i.tokens,o=i.state;if(s.length&&s[s.length-1].type==\"comment\")return r;if(e==\"start\"||e==\"no_regex\"){var u=t.match(/^.*(?:\\bcase\\b.*:|[\\{\\(\\[])\\s*$/);u&&(r+=n)}else if(e==\"doc-start\"){if(o==\"start\"||o==\"no_regex\")return\"\";var u=t.match(/^\\s*(\\/?)\\*/);u&&(u[1]&&(r+=\" \"),r+=\"* \")}return r},this.checkOutdent=function(e,t,n){return this.$outdent.checkOutdent(t,n)},this.autoOutdent=function(e,t,n){this.$outdent.autoOutdent(t,n)},this.createWorker=function(e){var t=new u([\"ace\"],\"ace/mode/javascript_worker\",\"JavaScriptWorker\");return t.attachToDocument(e.getDocument()),t.on(\"annotate\",function(t){e.setAnnotations(t.data)}),t.on(\"terminate\",function(){e.clearAnnotations()}),t},this.$id=\"ace/mode/javascript\",this.snippetFileId=\"ace/snippets/javascript\"}.call(l.prototype),t.Mode=l}),ace.define(\"ace/mode/css_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/lang\",\"ace/mode/text_highlight_rules\"],function(e,t,n){\"use strict\";var r=e(\"../lib/oop\"),i=e(\"../lib/lang\"),s=e(\"./text_highlight_rules\").TextHighlightRules,o=t.supportType=\"align-content|align-items|align-self|all|animation|animation-delay|animation-direction|animation-duration|animation-fill-mode|animation-iteration-count|animation-name|animation-play-state|animation-timing-function|backface-visibility|background|background-attachment|background-blend-mode|background-clip|background-color|background-image|background-origin|background-position|background-repeat|background-size|border|border-bottom|border-bottom-color|border-bottom-left-radius|border-bottom-right-radius|border-bottom-style|border-bottom-width|border-collapse|border-color|border-image|border-image-outset|border-image-repeat|border-image-slice|border-image-source|border-image-width|border-left|border-left-color|border-left-style|border-left-width|border-radius|border-right|border-right-color|border-right-style|border-right-width|border-spacing|border-style|border-top|border-top-color|border-top-left-radius|border-top-right-radius|border-top-style|border-top-width|border-width|bottom|box-shadow|box-sizing|caption-side|clear|clip|color|column-count|column-fill|column-gap|column-rule|column-rule-color|column-rule-style|column-rule-width|column-span|column-width|columns|content|counter-increment|counter-reset|cursor|direction|display|empty-cells|filter|flex|flex-basis|flex-direction|flex-flow|flex-grow|flex-shrink|flex-wrap|float|font|font-family|font-size|font-size-adjust|font-stretch|font-style|font-variant|font-weight|hanging-punctuation|height|justify-content|left|letter-spacing|line-height|list-style|list-style-image|list-style-position|list-style-type|margin|margin-bottom|margin-left|margin-right|margin-top|max-height|max-width|max-zoom|min-height|min-width|min-zoom|nav-down|nav-index|nav-left|nav-right|nav-up|opacity|order|outline|outline-color|outline-offset|outline-style|outline-width|overflow|overflow-x|overflow-y|padding|padding-bottom|padding-left|padding-right|padding-top|page-break-after|page-break-before|page-break-inside|perspective|perspective-origin|position|quotes|resize|right|tab-size|table-layout|text-align|text-align-last|text-decoration|text-decoration-color|text-decoration-line|text-decoration-style|text-indent|text-justify|text-overflow|text-shadow|text-transform|top|transform|transform-origin|transform-style|transition|transition-delay|transition-duration|transition-property|transition-timing-function|unicode-bidi|user-select|user-zoom|vertical-align|visibility|white-space|width|word-break|word-spacing|word-wrap|z-index\",u=t.supportFunction=\"rgb|rgba|url|attr|counter|counters\",a=t.supportConstant=\"absolute|after-edge|after|all-scroll|all|alphabetic|always|antialiased|armenian|auto|avoid-column|avoid-page|avoid|balance|baseline|before-edge|before|below|bidi-override|block-line-height|block|bold|bolder|border-box|both|bottom|box|break-all|break-word|capitalize|caps-height|caption|center|central|char|circle|cjk-ideographic|clone|close-quote|col-resize|collapse|column|consider-shifts|contain|content-box|cover|crosshair|cubic-bezier|dashed|decimal-leading-zero|decimal|default|disabled|disc|disregard-shifts|distribute-all-lines|distribute-letter|distribute-space|distribute|dotted|double|e-resize|ease-in|ease-in-out|ease-out|ease|ellipsis|end|exclude-ruby|flex-end|flex-start|fill|fixed|georgian|glyphs|grid-height|groove|hand|hanging|hebrew|help|hidden|hiragana-iroha|hiragana|horizontal|icon|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space|ideographic|inactive|include-ruby|inherit|initial|inline-block|inline-box|inline-line-height|inline-table|inline|inset|inside|inter-ideograph|inter-word|invert|italic|justify|katakana-iroha|katakana|keep-all|last|left|lighter|line-edge|line-through|line|linear|list-item|local|loose|lower-alpha|lower-greek|lower-latin|lower-roman|lowercase|lr-tb|ltr|mathematical|max-height|max-size|medium|menu|message-box|middle|move|n-resize|ne-resize|newspaper|no-change|no-close-quote|no-drop|no-open-quote|no-repeat|none|normal|not-allowed|nowrap|nw-resize|oblique|open-quote|outset|outside|overline|padding-box|page|pointer|pre-line|pre-wrap|pre|preserve-3d|progress|relative|repeat-x|repeat-y|repeat|replaced|reset-size|ridge|right|round|row-resize|rtl|s-resize|scroll|se-resize|separate|slice|small-caps|small-caption|solid|space|square|start|static|status-bar|step-end|step-start|steps|stretch|strict|sub|super|sw-resize|table-caption|table-cell|table-column-group|table-column|table-footer-group|table-header-group|table-row-group|table-row|table|tb-rl|text-after-edge|text-before-edge|text-bottom|text-size|text-top|text|thick|thin|transparent|underline|upper-alpha|upper-latin|upper-roman|uppercase|use-script|vertical-ideographic|vertical-text|visible|w-resize|wait|whitespace|z-index|zero|zoom\",f=t.supportConstantColor=\"aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightslategrey|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|rebeccapurple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|violet|wheat|white|whitesmoke|yellow|yellowgreen\",l=t.supportConstantFonts=\"arial|century|comic|courier|cursive|fantasy|garamond|georgia|helvetica|impact|lucida|symbol|system|tahoma|times|trebuchet|utopia|verdana|webdings|sans-serif|serif|monospace\",c=t.numRe=\"\\\\-?(?:(?:[0-9]+(?:\\\\.[0-9]+)?)|(?:\\\\.[0-9]+))\",h=t.pseudoElements=\"(\\\\:+)\\\\b(after|before|first-letter|first-line|moz-selection|selection)\\\\b\",p=t.pseudoClasses=\"(:)\\\\b(active|checked|disabled|empty|enabled|first-child|first-of-type|focus|hover|indeterminate|invalid|last-child|last-of-type|link|not|nth-child|nth-last-child|nth-last-of-type|nth-of-type|only-child|only-of-type|required|root|target|valid|visited)\\\\b\",d=function(){var e=this.createKeywordMapper({\"support.function\":u,\"support.constant\":a,\"support.type\":o,\"support.constant.color\":f,\"support.constant.fonts\":l},\"text\",!0);this.$rules={start:[{include:[\"strings\",\"url\",\"comments\"]},{token:\"paren.lparen\",regex:\"\\\\{\",next:\"ruleset\"},{token:\"paren.rparen\",regex:\"\\\\}\"},{token:\"string\",regex:\"@(?!viewport)\",next:\"media\"},{token:\"keyword\",regex:\"#[a-z0-9-_]+\"},{token:\"keyword\",regex:\"%\"},{token:\"variable\",regex:\"\\\\.[a-z0-9-_]+\"},{token:\"string\",regex:\":[a-z0-9-_]+\"},{token:\"constant.numeric\",regex:c},{token:\"constant\",regex:\"[a-z0-9-_]+\"},{caseInsensitive:!0}],media:[{include:[\"strings\",\"url\",\"comments\"]},{token:\"paren.lparen\",regex:\"\\\\{\",next:\"start\"},{token:\"paren.rparen\",regex:\"\\\\}\",next:\"start\"},{token:\"string\",regex:\";\",next:\"start\"},{token:\"keyword\",regex:\"(?:media|supports|document|charset|import|namespace|media|supports|document|page|font|keyframes|viewport|counter-style|font-feature-values|swash|ornaments|annotation|stylistic|styleset|character-variant)\"}],comments:[{token:\"comment\",regex:\"\\\\/\\\\*\",push:[{token:\"comment\",regex:\"\\\\*\\\\/\",next:\"pop\"},{defaultToken:\"comment\"}]}],ruleset:[{regex:\"-(webkit|ms|moz|o)-\",token:\"text\"},{token:\"punctuation.operator\",regex:\"[:;]\"},{token:\"paren.rparen\",regex:\"\\\\}\",next:\"start\"},{include:[\"strings\",\"url\",\"comments\"]},{token:[\"constant.numeric\",\"keyword\"],regex:\"(\"+c+\")(ch|cm|deg|em|ex|fr|gd|grad|Hz|in|kHz|mm|ms|pc|pt|px|rad|rem|s|turn|vh|vmax|vmin|vm|vw|%)\"},{token:\"constant.numeric\",regex:c},{token:\"constant.numeric\",regex:\"#[a-f0-9]{6}\"},{token:\"constant.numeric\",regex:\"#[a-f0-9]{3}\"},{token:[\"punctuation\",\"entity.other.attribute-name.pseudo-element.css\"],regex:h},{token:[\"punctuation\",\"entity.other.attribute-name.pseudo-class.css\"],regex:p},{include:\"url\"},{token:e,regex:\"\\\\-?[a-zA-Z_][a-zA-Z0-9_\\\\-]*\"},{caseInsensitive:!0}],url:[{token:\"support.function\",regex:\"(?:url(:?-prefix)?|domain|regexp)\\\\(\",push:[{token:\"support.function\",regex:\"\\\\)\",next:\"pop\"},{defaultToken:\"string\"}]}],strings:[{token:\"string.start\",regex:\"'\",push:[{token:\"string.end\",regex:\"'|$\",next:\"pop\"},{include:\"escapes\"},{token:\"constant.language.escape\",regex:/\\\\$/,consumeLineEnd:!0},{defaultToken:\"string\"}]},{token:\"string.start\",regex:'\"',push:[{token:\"string.end\",regex:'\"|$',next:\"pop\"},{include:\"escapes\"},{token:\"constant.language.escape\",regex:/\\\\$/,consumeLineEnd:!0},{defaultToken:\"string\"}]}],escapes:[{token:\"constant.language.escape\",regex:/\\\\([a-fA-F\\d]{1,6}|[^a-fA-F\\d])/}]},this.normalizeRules()};r.inherits(d,s),t.CssHighlightRules=d}),ace.define(\"ace/mode/css_completions\",[\"require\",\"exports\",\"module\"],function(e,t,n){\"use strict\";var r={background:{\"#$0\":1},\"background-color\":{\"#$0\":1,transparent:1,fixed:1},\"background-image\":{\"url('/$0')\":1},\"background-repeat\":{repeat:1,\"repeat-x\":1,\"repeat-y\":1,\"no-repeat\":1,inherit:1},\"background-position\":{bottom:2,center:2,left:2,right:2,top:2,inherit:2},\"background-attachment\":{scroll:1,fixed:1},\"background-size\":{cover:1,contain:1},\"background-clip\":{\"border-box\":1,\"padding-box\":1,\"content-box\":1},\"background-origin\":{\"border-box\":1,\"padding-box\":1,\"content-box\":1},border:{\"solid $0\":1,\"dashed $0\":1,\"dotted $0\":1,\"#$0\":1},\"border-color\":{\"#$0\":1},\"border-style\":{solid:2,dashed:2,dotted:2,\"double\":2,groove:2,hidden:2,inherit:2,inset:2,none:2,outset:2,ridged:2},\"border-collapse\":{collapse:1,separate:1},bottom:{px:1,em:1,\"%\":1},clear:{left:1,right:1,both:1,none:1},color:{\"#$0\":1,\"rgb(#$00,0,0)\":1},cursor:{\"default\":1,pointer:1,move:1,text:1,wait:1,help:1,progress:1,\"n-resize\":1,\"ne-resize\":1,\"e-resize\":1,\"se-resize\":1,\"s-resize\":1,\"sw-resize\":1,\"w-resize\":1,\"nw-resize\":1},display:{none:1,block:1,inline:1,\"inline-block\":1,\"table-cell\":1},\"empty-cells\":{show:1,hide:1},\"float\":{left:1,right:1,none:1},\"font-family\":{Arial:2,\"Comic Sans MS\":2,Consolas:2,\"Courier New\":2,Courier:2,Georgia:2,Monospace:2,\"Sans-Serif\":2,\"Segoe UI\":2,Tahoma:2,\"Times New Roman\":2,\"Trebuchet MS\":2,Verdana:1},\"font-size\":{px:1,em:1,\"%\":1},\"font-weight\":{bold:1,normal:1},\"font-style\":{italic:1,normal:1},\"font-variant\":{normal:1,\"small-caps\":1},height:{px:1,em:1,\"%\":1},left:{px:1,em:1,\"%\":1},\"letter-spacing\":{normal:1},\"line-height\":{normal:1},\"list-style-type\":{none:1,disc:1,circle:1,square:1,decimal:1,\"decimal-leading-zero\":1,\"lower-roman\":1,\"upper-roman\":1,\"lower-greek\":1,\"lower-latin\":1,\"upper-latin\":1,georgian:1,\"lower-alpha\":1,\"upper-alpha\":1},margin:{px:1,em:1,\"%\":1},\"margin-right\":{px:1,em:1,\"%\":1},\"margin-left\":{px:1,em:1,\"%\":1},\"margin-top\":{px:1,em:1,\"%\":1},\"margin-bottom\":{px:1,em:1,\"%\":1},\"max-height\":{px:1,em:1,\"%\":1},\"max-width\":{px:1,em:1,\"%\":1},\"min-height\":{px:1,em:1,\"%\":1},\"min-width\":{px:1,em:1,\"%\":1},overflow:{hidden:1,visible:1,auto:1,scroll:1},\"overflow-x\":{hidden:1,visible:1,auto:1,scroll:1},\"overflow-y\":{hidden:1,visible:1,auto:1,scroll:1},padding:{px:1,em:1,\"%\":1},\"padding-top\":{px:1,em:1,\"%\":1},\"padding-right\":{px:1,em:1,\"%\":1},\"padding-bottom\":{px:1,em:1,\"%\":1},\"padding-left\":{px:1,em:1,\"%\":1},\"page-break-after\":{auto:1,always:1,avoid:1,left:1,right:1},\"page-break-before\":{auto:1,always:1,avoid:1,left:1,right:1},position:{absolute:1,relative:1,fixed:1,\"static\":1},right:{px:1,em:1,\"%\":1},\"table-layout\":{fixed:1,auto:1},\"text-decoration\":{none:1,underline:1,\"line-through\":1,blink:1},\"text-align\":{left:1,right:1,center:1,justify:1},\"text-transform\":{capitalize:1,uppercase:1,lowercase:1,none:1},top:{px:1,em:1,\"%\":1},\"vertical-align\":{top:1,bottom:1},visibility:{hidden:1,visible:1},\"white-space\":{nowrap:1,normal:1,pre:1,\"pre-line\":1,\"pre-wrap\":1},width:{px:1,em:1,\"%\":1},\"word-spacing\":{normal:1},filter:{\"alpha(opacity=$0100)\":1},\"text-shadow\":{\"$02px 2px 2px #777\":1},\"text-overflow\":{\"ellipsis-word\":1,clip:1,ellipsis:1},\"-moz-border-radius\":1,\"-moz-border-radius-topright\":1,\"-moz-border-radius-bottomright\":1,\"-moz-border-radius-topleft\":1,\"-moz-border-radius-bottomleft\":1,\"-webkit-border-radius\":1,\"-webkit-border-top-right-radius\":1,\"-webkit-border-top-left-radius\":1,\"-webkit-border-bottom-right-radius\":1,\"-webkit-border-bottom-left-radius\":1,\"-moz-box-shadow\":1,\"-webkit-box-shadow\":1,transform:{\"rotate($00deg)\":1,\"skew($00deg)\":1},\"-moz-transform\":{\"rotate($00deg)\":1,\"skew($00deg)\":1},\"-webkit-transform\":{\"rotate($00deg)\":1,\"skew($00deg)\":1}},i=function(){};(function(){this.completionsDefined=!1,this.defineCompletions=function(){if(document){var e=document.createElement(\"c\").style;for(var t in e){if(typeof e[t]!=\"string\")continue;var n=t.replace(/[A-Z]/g,function(e){return\"-\"+e.toLowerCase()});r.hasOwnProperty(n)||(r[n]=1)}}this.completionsDefined=!0},this.getCompletions=function(e,t,n,r){this.completionsDefined||this.defineCompletions();if(e===\"ruleset\"||t.$mode.$id==\"ace/mode/scss\"){var i=t.getLine(n.row).substr(0,n.column),s=/\\([^)]*$/.test(i);return s&&(i=i.substr(i.lastIndexOf(\"(\")+1)),/:[^;]+$/.test(i)?(/([\\w\\-]+):[^:]*$/.test(i),this.getPropertyValueCompletions(e,t,n,r)):this.getPropertyCompletions(e,t,n,r,s)}return[]},this.getPropertyCompletions=function(e,t,n,i,s){s=s||!1;var o=Object.keys(r);return o.map(function(e){return{caption:e,snippet:e+\": $0\"+(s?\"\":\";\"),meta:\"property\",score:1e6}})},this.getPropertyValueCompletions=function(e,t,n,i){var s=t.getLine(n.row).substr(0,n.column),o=(/([\\w\\-]+):[^:]*$/.exec(s)||{})[1];if(!o)return[];var u=[];return o in r&&typeof r[o]==\"object\"&&(u=Object.keys(r[o])),u.map(function(e){return{caption:e,snippet:e,meta:\"property value\",score:1e6}})}}).call(i.prototype),t.CssCompletions=i}),ace.define(\"ace/mode/behaviour/css\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/behaviour\",\"ace/mode/behaviour/cstyle\",\"ace/token_iterator\"],function(e,t,n){\"use strict\";var r=e(\"../../lib/oop\"),i=e(\"../behaviour\").Behaviour,s=e(\"./cstyle\").CstyleBehaviour,o=e(\"../../token_iterator\").TokenIterator,u=function(){this.inherit(s),this.add(\"colon\",\"insertion\",function(e,t,n,r,i){if(i===\":\"&&n.selection.isEmpty()){var s=n.getCursorPosition(),u=new o(r,s.row,s.column),a=u.getCurrentToken();a&&a.value.match(/\\s+/)&&(a=u.stepBackward());if(a&&a.type===\"support.type\"){var f=r.doc.getLine(s.row),l=f.substring(s.column,s.column+1);if(l===\":\")return{text:\"\",selection:[1,1]};if(/^(\\s+[^;]|\\s*$)/.test(f.substring(s.column)))return{text:\":;\",selection:[1,1]}}}}),this.add(\"colon\",\"deletion\",function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&s===\":\"){var u=n.getCursorPosition(),a=new o(r,u.row,u.column),f=a.getCurrentToken();f&&f.value.match(/\\s+/)&&(f=a.stepBackward());if(f&&f.type===\"support.type\"){var l=r.doc.getLine(i.start.row),c=l.substring(i.end.column,i.end.column+1);if(c===\";\")return i.end.column++,i}}}),this.add(\"semicolon\",\"insertion\",function(e,t,n,r,i){if(i===\";\"&&n.selection.isEmpty()){var s=n.getCursorPosition(),o=r.doc.getLine(s.row),u=o.substring(s.column,s.column+1);if(u===\";\")return{text:\"\",selection:[1,1]}}}),this.add(\"!important\",\"insertion\",function(e,t,n,r,i){if(i===\"!\"&&n.selection.isEmpty()){var s=n.getCursorPosition(),o=r.doc.getLine(s.row);if(/^\\s*(;|}|$)/.test(o.substring(s.column)))return{text:\"!important\",selection:[10,10]}}})};r.inherits(u,s),t.CssBehaviour=u}),ace.define(\"ace/mode/css\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text\",\"ace/mode/css_highlight_rules\",\"ace/mode/matching_brace_outdent\",\"ace/worker/worker_client\",\"ace/mode/css_completions\",\"ace/mode/behaviour/css\",\"ace/mode/folding/cstyle\"],function(e,t,n){\"use strict\";var r=e(\"../lib/oop\"),i=e(\"./text\").Mode,s=e(\"./css_highlight_rules\").CssHighlightRules,o=e(\"./matching_brace_outdent\").MatchingBraceOutdent,u=e(\"../worker/worker_client\").WorkerClient,a=e(\"./css_completions\").CssCompletions,f=e(\"./behaviour/css\").CssBehaviour,l=e(\"./folding/cstyle\").FoldMode,c=function(){this.HighlightRules=s,this.$outdent=new o,this.$behaviour=new f,this.$completer=new a,this.foldingRules=new l};r.inherits(c,i),function(){this.foldingRules=\"cStyle\",this.blockComment={start:\"/*\",end:\"*/\"},this.getNextLineIndent=function(e,t,n){var r=this.$getIndent(t),i=this.getTokenizer().getLineTokens(t,e).tokens;if(i.length&&i[i.length-1].type==\"comment\")return r;var s=t.match(/^.*\\{\\s*$/);return s&&(r+=n),r},this.checkOutdent=function(e,t,n){return this.$outdent.checkOutdent(t,n)},this.autoOutdent=function(e,t,n){this.$outdent.autoOutdent(t,n)},this.getCompletions=function(e,t,n,r){return this.$completer.getCompletions(e,t,n,r)},this.createWorker=function(e){var t=new u([\"ace\"],\"ace/mode/css_worker\",\"Worker\");return t.attachToDocument(e.getDocument()),t.on(\"annotate\",function(t){e.setAnnotations(t.data)}),t.on(\"terminate\",function(){e.clearAnnotations()}),t},this.$id=\"ace/mode/css\",this.snippetFileId=\"ace/snippets/css\"}.call(c.prototype),t.Mode=c}),ace.define(\"ace/mode/xml_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text_highlight_rules\"],function(e,t,n){\"use strict\";var r=e(\"../lib/oop\"),i=e(\"./text_highlight_rules\").TextHighlightRules,s=function(e){var t=\"[_:a-zA-Z\\u00c0-\\uffff][-_:.a-zA-Z0-9\\u00c0-\\uffff]*\";this.$rules={start:[{token:\"string.cdata.xml\",regex:\"<\\\\!\\\\[CDATA\\\\[\",next:\"cdata\"},{token:[\"punctuation.instruction.xml\",\"keyword.instruction.xml\"],regex:\"(<\\\\?)(\"+t+\")\",next:\"processing_instruction\"},{token:\"comment.start.xml\",regex:\"<\\\\!--\",next:\"comment\"},{token:[\"xml-pe.doctype.xml\",\"xml-pe.doctype.xml\"],regex:\"(<\\\\!)(DOCTYPE)(?=[\\\\s])\",next:\"doctype\",caseInsensitive:!0},{include:\"tag\"},{token:\"text.end-tag-open.xml\",regex:\"</\"},{token:\"text.tag-open.xml\",regex:\"<\"},{include:\"reference\"},{defaultToken:\"text.xml\"}],processing_instruction:[{token:\"entity.other.attribute-name.decl-attribute-name.xml\",regex:t},{token:\"keyword.operator.decl-attribute-equals.xml\",regex:\"=\"},{include:\"whitespace\"},{include:\"string\"},{token:\"punctuation.xml-decl.xml\",regex:\"\\\\?>\",next:\"start\"}],doctype:[{include:\"whitespace\"},{include:\"string\"},{token:\"xml-pe.doctype.xml\",regex:\">\",next:\"start\"},{token:\"xml-pe.xml\",regex:\"[-_a-zA-Z0-9:]+\"},{token:\"punctuation.int-subset\",regex:\"\\\\[\",push:\"int_subset\"}],int_subset:[{token:\"text.xml\",regex:\"\\\\s+\"},{token:\"punctuation.int-subset.xml\",regex:\"]\",next:\"pop\"},{token:[\"punctuation.markup-decl.xml\",\"keyword.markup-decl.xml\"],regex:\"(<\\\\!)(\"+t+\")\",push:[{token:\"text\",regex:\"\\\\s+\"},{token:\"punctuation.markup-decl.xml\",regex:\">\",next:\"pop\"},{include:\"string\"}]}],cdata:[{token:\"string.cdata.xml\",regex:\"\\\\]\\\\]>\",next:\"start\"},{token:\"text.xml\",regex:\"\\\\s+\"},{token:\"text.xml\",regex:\"(?:[^\\\\]]|\\\\](?!\\\\]>))+\"}],comment:[{token:\"comment.end.xml\",regex:\"-->\",next:\"start\"},{defaultToken:\"comment.xml\"}],reference:[{token:\"constant.language.escape.reference.xml\",regex:\"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\\\.-]+;)\"}],attr_reference:[{token:\"constant.language.escape.reference.attribute-value.xml\",regex:\"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\\\.-]+;)\"}],tag:[{token:[\"meta.tag.punctuation.tag-open.xml\",\"meta.tag.punctuation.end-tag-open.xml\",\"meta.tag.tag-name.xml\"],regex:\"(?:(<)|(</))((?:\"+t+\":)?\"+t+\")\",next:[{include:\"attributes\"},{token:\"meta.tag.punctuation.tag-close.xml\",regex:\"/?>\",next:\"start\"}]}],tag_whitespace:[{token:\"text.tag-whitespace.xml\",regex:\"\\\\s+\"}],whitespace:[{token:\"text.whitespace.xml\",regex:\"\\\\s+\"}],string:[{token:\"string.xml\",regex:\"'\",push:[{token:\"string.xml\",regex:\"'\",next:\"pop\"},{defaultToken:\"string.xml\"}]},{token:\"string.xml\",regex:'\"',push:[{token:\"string.xml\",regex:'\"',next:\"pop\"},{defaultToken:\"string.xml\"}]}],attributes:[{token:\"entity.other.attribute-name.xml\",regex:t},{token:\"keyword.operator.attribute-equals.xml\",regex:\"=\"},{include:\"tag_whitespace\"},{include:\"attribute_value\"}],attribute_value:[{token:\"string.attribute-value.xml\",regex:\"'\",push:[{token:\"string.attribute-value.xml\",regex:\"'\",next:\"pop\"},{include:\"attr_reference\"},{defaultToken:\"string.attribute-value.xml\"}]},{token:\"string.attribute-value.xml\",regex:'\"',push:[{token:\"string.attribute-value.xml\",regex:'\"',next:\"pop\"},{include:\"attr_reference\"},{defaultToken:\"string.attribute-value.xml\"}]}]},this.constructor===s&&this.normalizeRules()};(function(){this.embedTagRules=function(e,t,n){this.$rules.tag.unshift({token:[\"meta.tag.punctuation.tag-open.xml\",\"meta.tag.\"+n+\".tag-name.xml\"],regex:\"(<)(\"+n+\"(?=\\\\s|>|$))\",next:[{include:\"attributes\"},{token:\"meta.tag.punctuation.tag-close.xml\",regex:\"/?>\",next:t+\"start\"}]}),this.$rules[n+\"-end\"]=[{include:\"attributes\"},{token:\"meta.tag.punctuation.tag-close.xml\",regex:\"/?>\",next:\"start\",onMatch:function(e,t,n){return n.splice(0),this.token}}],this.embedRules(e,t,[{token:[\"meta.tag.punctuation.end-tag-open.xml\",\"meta.tag.\"+n+\".tag-name.xml\"],regex:\"(</)(\"+n+\"(?=\\\\s|>|$))\",next:n+\"-end\"},{token:\"string.cdata.xml\",regex:\"<\\\\!\\\\[CDATA\\\\[\"},{token:\"string.cdata.xml\",regex:\"\\\\]\\\\]>\"}])}}).call(i.prototype),r.inherits(s,i),t.XmlHighlightRules=s}),ace.define(\"ace/mode/html_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/lang\",\"ace/mode/css_highlight_rules\",\"ace/mode/javascript_highlight_rules\",\"ace/mode/xml_highlight_rules\"],function(e,t,n){\"use strict\";var r=e(\"../lib/oop\"),i=e(\"../lib/lang\"),s=e(\"./css_highlight_rules\").CssHighlightRules,o=e(\"./javascript_highlight_rules\").JavaScriptHighlightRules,u=e(\"./xml_highlight_rules\").XmlHighlightRules,a=i.createMap({a:\"anchor\",button:\"form\",form:\"form\",img:\"image\",input:\"form\",label:\"form\",option:\"form\",script:\"script\",select:\"form\",textarea:\"form\",style:\"style\",table:\"table\",tbody:\"table\",td:\"table\",tfoot:\"table\",th:\"table\",tr:\"table\"}),f=function(){u.call(this),this.addRules({attributes:[{include:\"tag_whitespace\"},{token:\"entity.other.attribute-name.xml\",regex:\"[-_a-zA-Z0-9:.]+\"},{token:\"keyword.operator.attribute-equals.xml\",regex:\"=\",push:[{include:\"tag_whitespace\"},{token:\"string.unquoted.attribute-value.html\",regex:\"[^<>='\\\"`\\\\s]+\",next:\"pop\"},{token:\"empty\",regex:\"\",next:\"pop\"}]},{include:\"attribute_value\"}],tag:[{token:function(e,t){var n=a[t];return[\"meta.tag.punctuation.\"+(e==\"<\"?\"\":\"end-\")+\"tag-open.xml\",\"meta.tag\"+(n?\".\"+n:\"\")+\".tag-name.xml\"]},regex:\"(</?)([-_a-zA-Z0-9:.]+)\",next:\"tag_stuff\"}],tag_stuff:[{include:\"attributes\"},{token:\"meta.tag.punctuation.tag-close.xml\",regex:\"/?>\",next:\"start\"}]}),this.embedTagRules(s,\"css-\",\"style\"),this.embedTagRules((new o({jsx:!1})).getRules(),\"js-\",\"script\"),this.constructor===f&&this.normalizeRules()};r.inherits(f,u),t.HtmlHighlightRules=f}),ace.define(\"ace/mode/behaviour/xml\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/behaviour\",\"ace/token_iterator\",\"ace/lib/lang\"],function(e,t,n){\"use strict\";function u(e,t){return e&&e.type.lastIndexOf(t+\".xml\")>-1}var r=e(\"../../lib/oop\"),i=e(\"../behaviour\").Behaviour,s=e(\"../../token_iterator\").TokenIterator,o=e(\"../../lib/lang\"),a=function(){this.add(\"string_dquotes\",\"insertion\",function(e,t,n,r,i){if(i=='\"'||i==\"'\"){var o=i,a=r.doc.getTextRange(n.getSelectionRange());if(a!==\"\"&&a!==\"'\"&&a!='\"'&&n.getWrapBehavioursEnabled())return{text:o+a+o,selection:!1};var f=n.getCursorPosition(),l=r.doc.getLine(f.row),c=l.substring(f.column,f.column+1),h=new s(r,f.row,f.column),p=h.getCurrentToken();if(c==o&&(u(p,\"attribute-value\")||u(p,\"string\")))return{text:\"\",selection:[1,1]};p||(p=h.stepBackward());if(!p)return;while(u(p,\"tag-whitespace\")||u(p,\"whitespace\"))p=h.stepBackward();var d=!c||c.match(/\\s/);if(u(p,\"attribute-equals\")&&(d||c==\">\")||u(p,\"decl-attribute-equals\")&&(d||c==\"?\"))return{text:o+o,selection:[1,1]}}}),this.add(\"string_dquotes\",\"deletion\",function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&(s=='\"'||s==\"'\")){var o=r.doc.getLine(i.start.row),u=o.substring(i.start.column+1,i.start.column+2);if(u==s)return i.end.column++,i}}),this.add(\"autoclosing\",\"insertion\",function(e,t,n,r,i){if(i==\">\"){var o=n.getSelectionRange().start,a=new s(r,o.row,o.column),f=a.getCurrentToken()||a.stepBackward();if(!f||!(u(f,\"tag-name\")||u(f,\"tag-whitespace\")||u(f,\"attribute-name\")||u(f,\"attribute-equals\")||u(f,\"attribute-value\")))return;if(u(f,\"reference.attribute-value\"))return;if(u(f,\"attribute-value\")){var l=a.getCurrentTokenColumn()+f.value.length;if(o.column<l)return;if(o.column==l){var c=a.stepForward();if(c&&u(c,\"attribute-value\"))return;a.stepBackward()}}if(/^\\s*>/.test(r.getLine(o.row).slice(o.column)))return;while(!u(f,\"tag-name\")){f=a.stepBackward();if(f.value==\"<\"){f=a.stepForward();break}}var h=a.getCurrentTokenRow(),p=a.getCurrentTokenColumn();if(u(a.stepBackward(),\"end-tag-open\"))return;var d=f.value;h==o.row&&(d=d.substring(0,o.column-p));if(this.voidElements.hasOwnProperty(d.toLowerCase()))return;return{text:\"></\"+d+\">\",selection:[1,1]}}}),this.add(\"autoindent\",\"insertion\",function(e,t,n,r,i){if(i==\"\\n\"){var o=n.getCursorPosition(),u=r.getLine(o.row),a=new s(r,o.row,o.column),f=a.getCurrentToken();if(f&&f.type.indexOf(\"tag-close\")!==-1){if(f.value==\"/>\")return;while(f&&f.type.indexOf(\"tag-name\")===-1)f=a.stepBackward();if(!f)return;var l=f.value,c=a.getCurrentTokenRow();f=a.stepBackward();if(!f||f.type.indexOf(\"end-tag\")!==-1)return;if(this.voidElements&&!this.voidElements[l]){var h=r.getTokenAt(o.row,o.column+1),u=r.getLine(c),p=this.$getIndent(u),d=p+r.getTabString();return h&&h.value===\"</\"?{text:\"\\n\"+d+\"\\n\"+p,selection:[1,d.length,1,d.length]}:{text:\"\\n\"+d}}}}})};r.inherits(a,i),t.XmlBehaviour=a}),ace.define(\"ace/mode/folding/mixed\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/folding/fold_mode\"],function(e,t,n){\"use strict\";var r=e(\"../../lib/oop\"),i=e(\"./fold_mode\").FoldMode,s=t.FoldMode=function(e,t){this.defaultMode=e,this.subModes=t};r.inherits(s,i),function(){this.$getMode=function(e){typeof e!=\"string\"&&(e=e[0]);for(var t in this.subModes)if(e.indexOf(t)===0)return this.subModes[t];return null},this.$tryMode=function(e,t,n,r){var i=this.$getMode(e);return i?i.getFoldWidget(t,n,r):\"\"},this.getFoldWidget=function(e,t,n){return this.$tryMode(e.getState(n-1),e,t,n)||this.$tryMode(e.getState(n),e,t,n)||this.defaultMode.getFoldWidget(e,t,n)},this.getFoldWidgetRange=function(e,t,n){var r=this.$getMode(e.getState(n-1));if(!r||!r.getFoldWidget(e,t,n))r=this.$getMode(e.getState(n));if(!r||!r.getFoldWidget(e,t,n))r=this.defaultMode;return r.getFoldWidgetRange(e,t,n)}}.call(s.prototype)}),ace.define(\"ace/mode/folding/xml\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/range\",\"ace/mode/folding/fold_mode\"],function(e,t,n){\"use strict\";function a(e,t){return e.type.lastIndexOf(t+\".xml\")>-1}var r=e(\"../../lib/oop\"),i=e(\"../../range\").Range,s=e(\"./fold_mode\").FoldMode,o=t.FoldMode=function(e,t){s.call(this),this.voidElements=e||{},this.optionalEndTags=r.mixin({},this.voidElements),t&&r.mixin(this.optionalEndTags,t)};r.inherits(o,s);var u=function(){this.tagName=\"\",this.closing=!1,this.selfClosing=!1,this.start={row:0,column:0},this.end={row:0,column:0}};(function(){this.getFoldWidget=function(e,t,n){var r=this._getFirstTagInLine(e,n);return r?r.closing||!r.tagName&&r.selfClosing?t===\"markbeginend\"?\"end\":\"\":!r.tagName||r.selfClosing||this.voidElements.hasOwnProperty(r.tagName.toLowerCase())?\"\":this._findEndTagInLine(e,n,r.tagName,r.end.column)?\"\":\"start\":this.getCommentFoldWidget(e,n)},this.getCommentFoldWidget=function(e,t){return/comment/.test(e.getState(t))&&/<!-/.test(e.getLine(t))?\"start\":\"\"},this._getFirstTagInLine=function(e,t){var n=e.getTokens(t),r=new u;for(var i=0;i<n.length;i++){var s=n[i];if(a(s,\"tag-open\")){r.end.column=r.start.column+s.value.length,r.closing=a(s,\"end-tag-open\"),s=n[++i];if(!s)return null;r.tagName=s.value,r.end.column+=s.value.length;for(i++;i<n.length;i++){s=n[i],r.end.column+=s.value.length;if(a(s,\"tag-close\")){r.selfClosing=s.value==\"/>\";break}}return r}if(a(s,\"tag-close\"))return r.selfClosing=s.value==\"/>\",r;r.start.column+=s.value.length}return null},this._findEndTagInLine=function(e,t,n,r){var i=e.getTokens(t),s=0;for(var o=0;o<i.length;o++){var u=i[o];s+=u.value.length;if(s<r)continue;if(a(u,\"end-tag-open\")){u=i[o+1];if(u&&u.value==n)return!0}}return!1},this.getFoldWidgetRange=function(e,t,n){var r=e.getMatchingTags({row:n,column:0});return r?new i(r.openTag.end.row,r.openTag.end.column,r.closeTag.start.row,r.closeTag.start.column):this.getCommentFoldWidget(e,n)&&e.getCommentFoldRange(n,e.getLine(n).length)}}).call(o.prototype)}),ace.define(\"ace/mode/folding/html\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/folding/mixed\",\"ace/mode/folding/xml\",\"ace/mode/folding/cstyle\"],function(e,t,n){\"use strict\";var r=e(\"../../lib/oop\"),i=e(\"./mixed\").FoldMode,s=e(\"./xml\").FoldMode,o=e(\"./cstyle\").FoldMode,u=t.FoldMode=function(e,t){i.call(this,new s(e,t),{\"js-\":new o,\"css-\":new o})};r.inherits(u,i)}),ace.define(\"ace/mode/html_completions\",[\"require\",\"exports\",\"module\",\"ace/token_iterator\"],function(e,t,n){\"use strict\";function f(e,t){return e.type.lastIndexOf(t+\".xml\")>-1}function l(e,t){var n=new r(e,t.row,t.column),i=n.getCurrentToken();while(i&&!f(i,\"tag-name\"))i=n.stepBackward();if(i)return i.value}function c(e,t){var n=new r(e,t.row,t.column),i=n.getCurrentToken();while(i&&!f(i,\"attribute-name\"))i=n.stepBackward();if(i)return i.value}var r=e(\"../token_iterator\").TokenIterator,i=[\"accesskey\",\"class\",\"contenteditable\",\"contextmenu\",\"dir\",\"draggable\",\"dropzone\",\"hidden\",\"id\",\"inert\",\"itemid\",\"itemprop\",\"itemref\",\"itemscope\",\"itemtype\",\"lang\",\"spellcheck\",\"style\",\"tabindex\",\"title\",\"translate\"],s=[\"onabort\",\"onblur\",\"oncancel\",\"oncanplay\",\"oncanplaythrough\",\"onchange\",\"onclick\",\"onclose\",\"oncontextmenu\",\"oncuechange\",\"ondblclick\",\"ondrag\",\"ondragend\",\"ondragenter\",\"ondragleave\",\"ondragover\",\"ondragstart\",\"ondrop\",\"ondurationchange\",\"onemptied\",\"onended\",\"onerror\",\"onfocus\",\"oninput\",\"oninvalid\",\"onkeydown\",\"onkeypress\",\"onkeyup\",\"onload\",\"onloadeddata\",\"onloadedmetadata\",\"onloadstart\",\"onmousedown\",\"onmousemove\",\"onmouseout\",\"onmouseover\",\"onmouseup\",\"onmousewheel\",\"onpause\",\"onplay\",\"onplaying\",\"onprogress\",\"onratechange\",\"onreset\",\"onscroll\",\"onseeked\",\"onseeking\",\"onselect\",\"onshow\",\"onstalled\",\"onsubmit\",\"onsuspend\",\"ontimeupdate\",\"onvolumechange\",\"onwaiting\"],o=i.concat(s),u={a:{href:1,target:{_blank:1,top:1},ping:1,rel:{nofollow:1,alternate:1,author:1,bookmark:1,help:1,license:1,next:1,noreferrer:1,prefetch:1,prev:1,search:1,tag:1},media:1,hreflang:1,type:1},abbr:{},address:{},area:{shape:1,coords:1,href:1,hreflang:1,alt:1,target:1,media:1,rel:1,ping:1,type:1},article:{pubdate:1},aside:{},audio:{src:1,autobuffer:1,autoplay:{autoplay:1},loop:{loop:1},controls:{controls:1},muted:{muted:1},preload:{auto:1,metadata:1,none:1}},b:{},base:{href:1,target:1},bdi:{},bdo:{},blockquote:{cite:1},body:{onafterprint:1,onbeforeprint:1,onbeforeunload:1,onhashchange:1,onmessage:1,onoffline:1,onpopstate:1,onredo:1,onresize:1,onstorage:1,onundo:1,onunload:1},br:{},button:{autofocus:1,disabled:{disabled:1},form:1,formaction:1,formenctype:1,formmethod:1,formnovalidate:1,formtarget:1,name:1,value:1,type:{button:1,submit:1}},canvas:{width:1,height:1},caption:{},cite:{},code:{},col:{span:1},colgroup:{span:1},command:{type:1,label:1,icon:1,disabled:1,checked:1,radiogroup:1,command:1},data:{},datalist:{},dd:{},del:{cite:1,datetime:1},details:{open:1},dfn:{},dialog:{open:1},div:{},dl:{},dt:{},em:{},embed:{src:1,height:1,width:1,type:1},fieldset:{disabled:1,form:1,name:1},figcaption:{},figure:{},footer:{},form:{\"accept-charset\":1,action:1,autocomplete:1,enctype:{\"multipart/form-data\":1,\"application/x-www-form-urlencoded\":1},method:{get:1,post:1},name:1,novalidate:1,target:{_blank:1,top:1}},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},head:{},header:{},hr:{},html:{manifest:1},i:{},iframe:{name:1,src:1,height:1,width:1,sandbox:{\"allow-same-origin\":1,\"allow-top-navigation\":1,\"allow-forms\":1,\"allow-scripts\":1},seamless:{seamless:1}},img:{alt:1,src:1,height:1,width:1,usemap:1,ismap:1},input:{type:{text:1,password:1,hidden:1,checkbox:1,submit:1,radio:1,file:1,button:1,reset:1,image:31,color:1,date:1,datetime:1,\"datetime-local\":1,email:1,month:1,number:1,range:1,search:1,tel:1,time:1,url:1,week:1},accept:1,alt:1,autocomplete:{on:1,off:1},autofocus:{autofocus:1},checked:{checked:1},disabled:{disabled:1},form:1,formaction:1,formenctype:{\"application/x-www-form-urlencoded\":1,\"multipart/form-data\":1,\"text/plain\":1},formmethod:{get:1,post:1},formnovalidate:{formnovalidate:1},formtarget:{_blank:1,_self:1,_parent:1,_top:1},height:1,list:1,max:1,maxlength:1,min:1,multiple:{multiple:1},name:1,pattern:1,placeholder:1,readonly:{readonly:1},required:{required:1},size:1,src:1,step:1,width:1,files:1,value:1},ins:{cite:1,datetime:1},kbd:{},keygen:{autofocus:1,challenge:{challenge:1},disabled:{disabled:1},form:1,keytype:{rsa:1,dsa:1,ec:1},name:1},label:{form:1,\"for\":1},legend:{},li:{value:1},link:{href:1,hreflang:1,rel:{stylesheet:1,icon:1},media:{all:1,screen:1,print:1},type:{\"text/css\":1,\"image/png\":1,\"image/jpeg\":1,\"image/gif\":1},sizes:1},main:{},map:{name:1},mark:{},math:{},menu:{type:1,label:1},meta:{\"http-equiv\":{\"content-type\":1},name:{description:1,keywords:1},content:{\"text/html; charset=UTF-8\":1},charset:1},meter:{value:1,min:1,max:1,low:1,high:1,optimum:1},nav:{},noscript:{href:1},object:{param:1,data:1,type:1,height:1,width:1,usemap:1,name:1,form:1,classid:1},ol:{start:1,reversed:1},optgroup:{disabled:1,label:1},option:{disabled:1,selected:1,label:1,value:1},output:{\"for\":1,form:1,name:1},p:{},param:{name:1,value:1},pre:{},progress:{value:1,max:1},q:{cite:1},rp:{},rt:{},ruby:{},s:{},samp:{},script:{charset:1,type:{\"text/javascript\":1},src:1,defer:1,async:1},select:{autofocus:1,disabled:1,form:1,multiple:{multiple:1},name:1,size:1,readonly:{readonly:1}},small:{},source:{src:1,type:1,media:1},span:{},strong:{},style:{type:1,media:{all:1,screen:1,print:1},scoped:1},sub:{},sup:{},svg:{},table:{summary:1},tbody:{},td:{headers:1,rowspan:1,colspan:1},textarea:{autofocus:{autofocus:1},disabled:{disabled:1},form:1,maxlength:1,name:1,placeholder:1,readonly:{readonly:1},required:{required:1},rows:1,cols:1,wrap:{on:1,off:1,hard:1,soft:1}},tfoot:{},th:{headers:1,rowspan:1,colspan:1,scope:1},thead:{},time:{datetime:1},title:{},tr:{},track:{kind:1,src:1,srclang:1,label:1,\"default\":1},section:{},summary:{},u:{},ul:{},\"var\":{},video:{src:1,autobuffer:1,autoplay:{autoplay:1},loop:{loop:1},controls:{controls:1},width:1,height:1,poster:1,muted:{muted:1},preload:{auto:1,metadata:1,none:1}},wbr:{}},a=Object.keys(u),h=function(){};(function(){this.getCompletions=function(e,t,n,r){var i=t.getTokenAt(n.row,n.column);if(!i)return[];if(f(i,\"tag-name\")||f(i,\"tag-open\")||f(i,\"end-tag-open\"))return this.getTagCompletions(e,t,n,r);if(f(i,\"tag-whitespace\")||f(i,\"attribute-name\"))return this.getAttributeCompletions(e,t,n,r);if(f(i,\"attribute-value\"))return this.getAttributeValueCompletions(e,t,n,r);var s=t.getLine(n.row).substr(0,n.column);return/&[a-z]*$/i.test(s)?this.getHTMLEntityCompletions(e,t,n,r):[]},this.getTagCompletions=function(e,t,n,r){return a.map(function(e){return{value:e,meta:\"tag\",score:1e6}})},this.getAttributeCompletions=function(e,t,n,r){var i=l(t,n);if(!i)return[];var s=o;return i in u&&(s=s.concat(Object.keys(u[i]))),s.map(function(e){return{caption:e,snippet:e+'=\"$0\"',meta:\"attribute\",score:1e6}})},this.getAttributeValueCompletions=function(e,t,n,r){var i=l(t,n),s=c(t,n);if(!i)return[];var o=[];return i in u&&s in u[i]&&typeof u[i][s]==\"object\"&&(o=Object.keys(u[i][s])),o.map(function(e){return{caption:e,snippet:e,meta:\"attribute value\",score:1e6}})},this.getHTMLEntityCompletions=function(e,t,n,r){var i=[\"Aacute;\",\"aacute;\",\"Acirc;\",\"acirc;\",\"acute;\",\"AElig;\",\"aelig;\",\"Agrave;\",\"agrave;\",\"alefsym;\",\"Alpha;\",\"alpha;\",\"amp;\",\"and;\",\"ang;\",\"Aring;\",\"aring;\",\"asymp;\",\"Atilde;\",\"atilde;\",\"Auml;\",\"auml;\",\"bdquo;\",\"Beta;\",\"beta;\",\"brvbar;\",\"bull;\",\"cap;\",\"Ccedil;\",\"ccedil;\",\"cedil;\",\"cent;\",\"Chi;\",\"chi;\",\"circ;\",\"clubs;\",\"cong;\",\"copy;\",\"crarr;\",\"cup;\",\"curren;\",\"Dagger;\",\"dagger;\",\"dArr;\",\"darr;\",\"deg;\",\"Delta;\",\"delta;\",\"diams;\",\"divide;\",\"Eacute;\",\"eacute;\",\"Ecirc;\",\"ecirc;\",\"Egrave;\",\"egrave;\",\"empty;\",\"emsp;\",\"ensp;\",\"Epsilon;\",\"epsilon;\",\"equiv;\",\"Eta;\",\"eta;\",\"ETH;\",\"eth;\",\"Euml;\",\"euml;\",\"euro;\",\"exist;\",\"fnof;\",\"forall;\",\"frac12;\",\"frac14;\",\"frac34;\",\"frasl;\",\"Gamma;\",\"gamma;\",\"ge;\",\"gt;\",\"hArr;\",\"harr;\",\"hearts;\",\"hellip;\",\"Iacute;\",\"iacute;\",\"Icirc;\",\"icirc;\",\"iexcl;\",\"Igrave;\",\"igrave;\",\"image;\",\"infin;\",\"int;\",\"Iota;\",\"iota;\",\"iquest;\",\"isin;\",\"Iuml;\",\"iuml;\",\"Kappa;\",\"kappa;\",\"Lambda;\",\"lambda;\",\"lang;\",\"laquo;\",\"lArr;\",\"larr;\",\"lceil;\",\"ldquo;\",\"le;\",\"lfloor;\",\"lowast;\",\"loz;\",\"lrm;\",\"lsaquo;\",\"lsquo;\",\"lt;\",\"macr;\",\"mdash;\",\"micro;\",\"middot;\",\"minus;\",\"Mu;\",\"mu;\",\"nabla;\",\"nbsp;\",\"ndash;\",\"ne;\",\"ni;\",\"not;\",\"notin;\",\"nsub;\",\"Ntilde;\",\"ntilde;\",\"Nu;\",\"nu;\",\"Oacute;\",\"oacute;\",\"Ocirc;\",\"ocirc;\",\"OElig;\",\"oelig;\",\"Ograve;\",\"ograve;\",\"oline;\",\"Omega;\",\"omega;\",\"Omicron;\",\"omicron;\",\"oplus;\",\"or;\",\"ordf;\",\"ordm;\",\"Oslash;\",\"oslash;\",\"Otilde;\",\"otilde;\",\"otimes;\",\"Ouml;\",\"ouml;\",\"para;\",\"part;\",\"permil;\",\"perp;\",\"Phi;\",\"phi;\",\"Pi;\",\"pi;\",\"piv;\",\"plusmn;\",\"pound;\",\"Prime;\",\"prime;\",\"prod;\",\"prop;\",\"Psi;\",\"psi;\",\"quot;\",\"radic;\",\"rang;\",\"raquo;\",\"rArr;\",\"rarr;\",\"rceil;\",\"rdquo;\",\"real;\",\"reg;\",\"rfloor;\",\"Rho;\",\"rho;\",\"rlm;\",\"rsaquo;\",\"rsquo;\",\"sbquo;\",\"Scaron;\",\"scaron;\",\"sdot;\",\"sect;\",\"shy;\",\"Sigma;\",\"sigma;\",\"sigmaf;\",\"sim;\",\"spades;\",\"sub;\",\"sube;\",\"sum;\",\"sup;\",\"sup1;\",\"sup2;\",\"sup3;\",\"supe;\",\"szlig;\",\"Tau;\",\"tau;\",\"there4;\",\"Theta;\",\"theta;\",\"thetasym;\",\"thinsp;\",\"THORN;\",\"thorn;\",\"tilde;\",\"times;\",\"trade;\",\"Uacute;\",\"uacute;\",\"uArr;\",\"uarr;\",\"Ucirc;\",\"ucirc;\",\"Ugrave;\",\"ugrave;\",\"uml;\",\"upsih;\",\"Upsilon;\",\"upsilon;\",\"Uuml;\",\"uuml;\",\"weierp;\",\"Xi;\",\"xi;\",\"Yacute;\",\"yacute;\",\"yen;\",\"Yuml;\",\"yuml;\",\"Zeta;\",\"zeta;\",\"zwj;\",\"zwnj;\"];return i.map(function(e){return{caption:e,snippet:e,meta:\"html entity\",score:1e6}})}}).call(h.prototype),t.HtmlCompletions=h}),ace.define(\"ace/mode/html\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/lang\",\"ace/mode/text\",\"ace/mode/javascript\",\"ace/mode/css\",\"ace/mode/html_highlight_rules\",\"ace/mode/behaviour/xml\",\"ace/mode/folding/html\",\"ace/mode/html_completions\",\"ace/worker/worker_client\"],function(e,t,n){\"use strict\";var r=e(\"../lib/oop\"),i=e(\"../lib/lang\"),s=e(\"./text\").Mode,o=e(\"./javascript\").Mode,u=e(\"./css\").Mode,a=e(\"./html_highlight_rules\").HtmlHighlightRules,f=e(\"./behaviour/xml\").XmlBehaviour,l=e(\"./folding/html\").FoldMode,c=e(\"./html_completions\").HtmlCompletions,h=e(\"../worker/worker_client\").WorkerClient,p=[\"area\",\"base\",\"br\",\"col\",\"embed\",\"hr\",\"img\",\"input\",\"keygen\",\"link\",\"meta\",\"menuitem\",\"param\",\"source\",\"track\",\"wbr\"],d=[\"li\",\"dt\",\"dd\",\"p\",\"rt\",\"rp\",\"optgroup\",\"option\",\"colgroup\",\"td\",\"th\"],v=function(e){this.fragmentContext=e&&e.fragmentContext,this.HighlightRules=a,this.$behaviour=new f,this.$completer=new c,this.createModeDelegates({\"js-\":o,\"css-\":u}),this.foldingRules=new l(this.voidElements,i.arrayToMap(d))};r.inherits(v,s),function(){this.blockComment={start:\"<!--\",end:\"-->\"},this.voidElements=i.arrayToMap(p),this.getNextLineIndent=function(e,t,n){return this.$getIndent(t)},this.checkOutdent=function(e,t,n){return!1},this.getCompletions=function(e,t,n,r){return this.$completer.getCompletions(e,t,n,r)},this.createWorker=function(e){if(this.constructor!=v)return;var t=new h([\"ace\"],\"ace/mode/html_worker\",\"Worker\");return t.attachToDocument(e.getDocument()),this.fragmentContext&&t.call(\"setOptions\",[{context:this.fragmentContext}]),t.on(\"error\",function(t){e.setAnnotations(t.data)}),t.on(\"terminate\",function(){e.clearAnnotations()}),t},this.$id=\"ace/mode/html\",this.snippetFileId=\"ace/snippets/html\"}.call(v.prototype),t.Mode=v});                (function() {\n                    ace.require([\"ace/mode/html\"], function(m) {\n                        if ( true && module) {\n                            module.exports = m;\n                        }\n                    });\n                })();\n            \n\n//# sourceURL=webpack://playground/./node_modules/ace-builds/src-min-noconflict/mode-html.js?");

/***/ }),

/***/ "./node_modules/ace-builds/src-min-noconflict/mode-java.js":
/*!*****************************************************************!*\
  !*** ./node_modules/ace-builds/src-min-noconflict/mode-java.js ***!
  \*****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/* module decorator */ module = __webpack_require__.nmd(module);\nace.define(\"ace/mode/doc_comment_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text_highlight_rules\"],function(e,t,n){\"use strict\";var r=e(\"../lib/oop\"),i=e(\"./text_highlight_rules\").TextHighlightRules,s=function(){this.$rules={start:[{token:\"comment.doc.tag\",regex:\"@[\\\\w\\\\d_]+\"},s.getTagRule(),{defaultToken:\"comment.doc\",caseInsensitive:!0}]}};r.inherits(s,i),s.getTagRule=function(e){return{token:\"comment.doc.tag.storage.type\",regex:\"\\\\b(?:TODO|FIXME|XXX|HACK)\\\\b\"}},s.getStartRule=function(e){return{token:\"comment.doc\",regex:\"\\\\/\\\\*(?=\\\\*)\",next:e}},s.getEndRule=function(e){return{token:\"comment.doc\",regex:\"\\\\*\\\\/\",next:e}},t.DocCommentHighlightRules=s}),ace.define(\"ace/mode/javascript_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/doc_comment_highlight_rules\",\"ace/mode/text_highlight_rules\"],function(e,t,n){\"use strict\";function a(){var e=o.replace(\"\\\\d\",\"\\\\d\\\\-\"),t={onMatch:function(e,t,n){var r=e.charAt(1)==\"/\"?2:1;if(r==1)t!=this.nextState?n.unshift(this.next,this.nextState,0):n.unshift(this.next),n[2]++;else if(r==2&&t==this.nextState){n[1]--;if(!n[1]||n[1]<0)n.shift(),n.shift()}return[{type:\"meta.tag.punctuation.\"+(r==1?\"\":\"end-\")+\"tag-open.xml\",value:e.slice(0,r)},{type:\"meta.tag.tag-name.xml\",value:e.substr(r)}]},regex:\"</?\"+e+\"\",next:\"jsxAttributes\",nextState:\"jsx\"};this.$rules.start.unshift(t);var n={regex:\"{\",token:\"paren.quasi.start\",push:\"start\"};this.$rules.jsx=[n,t,{include:\"reference\"},{defaultToken:\"string\"}],this.$rules.jsxAttributes=[{token:\"meta.tag.punctuation.tag-close.xml\",regex:\"/?>\",onMatch:function(e,t,n){return t==n[0]&&n.shift(),e.length==2&&(n[0]==this.nextState&&n[1]--,(!n[1]||n[1]<0)&&n.splice(0,2)),this.next=n[0]||\"start\",[{type:this.token,value:e}]},nextState:\"jsx\"},n,f(\"jsxAttributes\"),{token:\"entity.other.attribute-name.xml\",regex:e},{token:\"keyword.operator.attribute-equals.xml\",regex:\"=\"},{token:\"text.tag-whitespace.xml\",regex:\"\\\\s+\"},{token:\"string.attribute-value.xml\",regex:\"'\",stateName:\"jsx_attr_q\",push:[{token:\"string.attribute-value.xml\",regex:\"'\",next:\"pop\"},{include:\"reference\"},{defaultToken:\"string.attribute-value.xml\"}]},{token:\"string.attribute-value.xml\",regex:'\"',stateName:\"jsx_attr_qq\",push:[{token:\"string.attribute-value.xml\",regex:'\"',next:\"pop\"},{include:\"reference\"},{defaultToken:\"string.attribute-value.xml\"}]},t],this.$rules.reference=[{token:\"constant.language.escape.reference.xml\",regex:\"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\\\.-]+;)\"}]}function f(e){return[{token:\"comment\",regex:/\\/\\*/,next:[i.getTagRule(),{token:\"comment\",regex:\"\\\\*\\\\/\",next:e||\"pop\"},{defaultToken:\"comment\",caseInsensitive:!0}]},{token:\"comment\",regex:\"\\\\/\\\\/\",next:[i.getTagRule(),{token:\"comment\",regex:\"$|^\",next:e||\"pop\"},{defaultToken:\"comment\",caseInsensitive:!0}]}]}var r=e(\"../lib/oop\"),i=e(\"./doc_comment_highlight_rules\").DocCommentHighlightRules,s=e(\"./text_highlight_rules\").TextHighlightRules,o=\"[a-zA-Z\\\\$_\\u00a1-\\uffff][a-zA-Z\\\\d\\\\$_\\u00a1-\\uffff]*\",u=function(e){var t=this.createKeywordMapper({\"variable.language\":\"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Symbol|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|isNaN|parseFloat|parseInt|JSON|Math|this|arguments|prototype|window|document\",keyword:\"const|yield|import|get|set|async|await|break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|of|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|__parent__|__count__|escape|unescape|with|__proto__|class|enum|extends|super|export|implements|private|public|interface|package|protected|static|constructor\",\"storage.type\":\"const|let|var|function\",\"constant.language\":\"null|Infinity|NaN|undefined\",\"support.function\":\"alert\",\"constant.language.boolean\":\"true|false\"},\"identifier\"),n=\"case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void\",r=\"\\\\\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|u{[0-9a-fA-F]{1,6}}|[0-2][0-7]{0,2}|3[0-7][0-7]?|[4-7][0-7]?|.)\";this.$rules={no_regex:[i.getStartRule(\"doc-start\"),f(\"no_regex\"),{token:\"string\",regex:\"'(?=.)\",next:\"qstring\"},{token:\"string\",regex:'\"(?=.)',next:\"qqstring\"},{token:\"constant.numeric\",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\\b/},{token:\"constant.numeric\",regex:/(?:\\d\\d*(?:\\.\\d*)?|\\.\\d+)(?:[eE][+-]?\\d+\\b)?/},{token:[\"storage.type\",\"punctuation.operator\",\"support.function\",\"punctuation.operator\",\"entity.name.function\",\"text\",\"keyword.operator\"],regex:\"(\"+o+\")(\\\\.)(prototype)(\\\\.)(\"+o+\")(\\\\s*)(=)\",next:\"function_arguments\"},{token:[\"storage.type\",\"punctuation.operator\",\"entity.name.function\",\"text\",\"keyword.operator\",\"text\",\"storage.type\",\"text\",\"paren.lparen\"],regex:\"(\"+o+\")(\\\\.)(\"+o+\")(\\\\s*)(=)(\\\\s*)(function\\\\*?)(\\\\s*)(\\\\()\",next:\"function_arguments\"},{token:[\"entity.name.function\",\"text\",\"keyword.operator\",\"text\",\"storage.type\",\"text\",\"paren.lparen\"],regex:\"(\"+o+\")(\\\\s*)(=)(\\\\s*)(function\\\\*?)(\\\\s*)(\\\\()\",next:\"function_arguments\"},{token:[\"storage.type\",\"punctuation.operator\",\"entity.name.function\",\"text\",\"keyword.operator\",\"text\",\"storage.type\",\"text\",\"entity.name.function\",\"text\",\"paren.lparen\"],regex:\"(\"+o+\")(\\\\.)(\"+o+\")(\\\\s*)(=)(\\\\s*)(function\\\\*?)(\\\\s+)(\\\\w+)(\\\\s*)(\\\\()\",next:\"function_arguments\"},{token:[\"storage.type\",\"text\",\"entity.name.function\",\"text\",\"paren.lparen\"],regex:\"(function\\\\*?)(\\\\s+)(\"+o+\")(\\\\s*)(\\\\()\",next:\"function_arguments\"},{token:[\"entity.name.function\",\"text\",\"punctuation.operator\",\"text\",\"storage.type\",\"text\",\"paren.lparen\"],regex:\"(\"+o+\")(\\\\s*)(:)(\\\\s*)(function\\\\*?)(\\\\s*)(\\\\()\",next:\"function_arguments\"},{token:[\"text\",\"text\",\"storage.type\",\"text\",\"paren.lparen\"],regex:\"(:)(\\\\s*)(function\\\\*?)(\\\\s*)(\\\\()\",next:\"function_arguments\"},{token:\"keyword\",regex:\"from(?=\\\\s*('|\\\"))\"},{token:\"keyword\",regex:\"(?:\"+n+\")\\\\b\",next:\"start\"},{token:\"support.constant\",regex:/that\\b/},{token:[\"storage.type\",\"punctuation.operator\",\"support.function.firebug\"],regex:/(console)(\\.)(warn|info|log|error|time|trace|timeEnd|assert)\\b/},{token:t,regex:o},{token:\"punctuation.operator\",regex:/[.](?![.])/,next:\"property\"},{token:\"storage.type\",regex:/=>/,next:\"start\"},{token:\"keyword.operator\",regex:/--|\\+\\+|\\.{3}|===|==|=|!=|!==|<+=?|>+=?|!|&&|\\|\\||\\?:|[!$%&*+\\-~\\/^]=?/,next:\"start\"},{token:\"punctuation.operator\",regex:/[?:,;.]/,next:\"start\"},{token:\"paren.lparen\",regex:/[\\[({]/,next:\"start\"},{token:\"paren.rparen\",regex:/[\\])}]/},{token:\"comment\",regex:/^#!.*$/}],property:[{token:\"text\",regex:\"\\\\s+\"},{token:[\"storage.type\",\"punctuation.operator\",\"entity.name.function\",\"text\",\"keyword.operator\",\"text\",\"storage.type\",\"text\",\"entity.name.function\",\"text\",\"paren.lparen\"],regex:\"(\"+o+\")(\\\\.)(\"+o+\")(\\\\s*)(=)(\\\\s*)(function\\\\*?)(?:(\\\\s+)(\\\\w+))?(\\\\s*)(\\\\()\",next:\"function_arguments\"},{token:\"punctuation.operator\",regex:/[.](?![.])/},{token:\"support.function\",regex:/(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|lter|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward|rEach)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\\b(?=\\()/},{token:\"support.function.dom\",regex:/(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\\b(?=\\()/},{token:\"support.constant\",regex:/(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\\b/},{token:\"identifier\",regex:o},{regex:\"\",token:\"empty\",next:\"no_regex\"}],start:[i.getStartRule(\"doc-start\"),f(\"start\"),{token:\"string.regexp\",regex:\"\\\\/\",next:\"regex\"},{token:\"text\",regex:\"\\\\s+|^$\",next:\"start\"},{token:\"empty\",regex:\"\",next:\"no_regex\"}],regex:[{token:\"regexp.keyword.operator\",regex:\"\\\\\\\\(?:u[\\\\da-fA-F]{4}|x[\\\\da-fA-F]{2}|.)\"},{token:\"string.regexp\",regex:\"/[sxngimy]*\",next:\"no_regex\"},{token:\"invalid\",regex:/\\{\\d+\\b,?\\d*\\}[+*]|[+*$^?][+*]|[$^][?]|\\?{3,}/},{token:\"constant.language.escape\",regex:/\\(\\?[:=!]|\\)|\\{\\d+\\b,?\\d*\\}|[+*]\\?|[()$^+*?.]/},{token:\"constant.language.delimiter\",regex:/\\|/},{token:\"constant.language.escape\",regex:/\\[\\^?/,next:\"regex_character_class\"},{token:\"empty\",regex:\"$\",next:\"no_regex\"},{defaultToken:\"string.regexp\"}],regex_character_class:[{token:\"regexp.charclass.keyword.operator\",regex:\"\\\\\\\\(?:u[\\\\da-fA-F]{4}|x[\\\\da-fA-F]{2}|.)\"},{token:\"constant.language.escape\",regex:\"]\",next:\"regex\"},{token:\"constant.language.escape\",regex:\"-\"},{token:\"empty\",regex:\"$\",next:\"no_regex\"},{defaultToken:\"string.regexp.charachterclass\"}],default_parameter:[{token:\"string\",regex:\"'(?=.)\",push:[{token:\"string\",regex:\"'|$\",next:\"pop\"},{include:\"qstring\"}]},{token:\"string\",regex:'\"(?=.)',push:[{token:\"string\",regex:'\"|$',next:\"pop\"},{include:\"qqstring\"}]},{token:\"constant.language\",regex:\"null|Infinity|NaN|undefined\"},{token:\"constant.numeric\",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\\b/},{token:\"constant.numeric\",regex:/(?:\\d\\d*(?:\\.\\d*)?|\\.\\d+)(?:[eE][+-]?\\d+\\b)?/},{token:\"punctuation.operator\",regex:\",\",next:\"function_arguments\"},{token:\"text\",regex:\"\\\\s+\"},{token:\"punctuation.operator\",regex:\"$\"},{token:\"empty\",regex:\"\",next:\"no_regex\"}],function_arguments:[f(\"function_arguments\"),{token:\"variable.parameter\",regex:o},{token:\"punctuation.operator\",regex:\",\"},{token:\"text\",regex:\"\\\\s+\"},{token:\"punctuation.operator\",regex:\"$\"},{token:\"empty\",regex:\"\",next:\"no_regex\"}],qqstring:[{token:\"constant.language.escape\",regex:r},{token:\"string\",regex:\"\\\\\\\\$\",consumeLineEnd:!0},{token:\"string\",regex:'\"|$',next:\"no_regex\"},{defaultToken:\"string\"}],qstring:[{token:\"constant.language.escape\",regex:r},{token:\"string\",regex:\"\\\\\\\\$\",consumeLineEnd:!0},{token:\"string\",regex:\"'|$\",next:\"no_regex\"},{defaultToken:\"string\"}]};if(!e||!e.noES6)this.$rules.no_regex.unshift({regex:\"[{}]\",onMatch:function(e,t,n){this.next=e==\"{\"?this.nextState:\"\";if(e==\"{\"&&n.length)n.unshift(\"start\",t);else if(e==\"}\"&&n.length){n.shift(),this.next=n.shift();if(this.next.indexOf(\"string\")!=-1||this.next.indexOf(\"jsx\")!=-1)return\"paren.quasi.end\"}return e==\"{\"?\"paren.lparen\":\"paren.rparen\"},nextState:\"start\"},{token:\"string.quasi.start\",regex:/`/,push:[{token:\"constant.language.escape\",regex:r},{token:\"paren.quasi.start\",regex:/\\${/,push:\"start\"},{token:\"string.quasi.end\",regex:/`/,next:\"pop\"},{defaultToken:\"string.quasi\"}]},{token:[\"variable.parameter\",\"text\"],regex:\"(\"+o+\")(\\\\s*)(?=\\\\=>)\"},{token:\"paren.lparen\",regex:\"(\\\\()(?=.+\\\\s*=>)\",next:\"function_arguments\"},{token:\"variable.language\",regex:\"(?:(?:(?:Weak)?(?:Set|Map))|Promise)\\\\b\"}),this.$rules.function_arguments.unshift({token:\"keyword.operator\",regex:\"=\",next:\"default_parameter\"},{token:\"keyword.operator\",regex:\"\\\\.{3}\"}),this.$rules.property.unshift({token:\"support.function\",regex:\"(findIndex|repeat|startsWith|endsWith|includes|isSafeInteger|trunc|cbrt|log2|log10|sign|then|catch|finally|resolve|reject|race|any|all|allSettled|keys|entries|isInteger)\\\\b(?=\\\\()\"},{token:\"constant.language\",regex:\"(?:MAX_SAFE_INTEGER|MIN_SAFE_INTEGER|EPSILON)\\\\b\"}),(!e||e.jsx!=0)&&a.call(this);this.embedRules(i,\"doc-\",[i.getEndRule(\"no_regex\")]),this.normalizeRules()};r.inherits(u,s),t.JavaScriptHighlightRules=u}),ace.define(\"ace/mode/matching_brace_outdent\",[\"require\",\"exports\",\"module\",\"ace/range\"],function(e,t,n){\"use strict\";var r=e(\"../range\").Range,i=function(){};(function(){this.checkOutdent=function(e,t){return/^\\s+$/.test(e)?/^\\s*\\}/.test(t):!1},this.autoOutdent=function(e,t){var n=e.getLine(t),i=n.match(/^(\\s*\\})/);if(!i)return 0;var s=i[1].length,o=e.findMatchingBracket({row:t,column:s});if(!o||o.row==t)return 0;var u=this.$getIndent(e.getLine(o.row));e.replace(new r(t,0,t,s-1),u)},this.$getIndent=function(e){return e.match(/^\\s*/)[0]}}).call(i.prototype),t.MatchingBraceOutdent=i}),ace.define(\"ace/mode/folding/cstyle\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/range\",\"ace/mode/folding/fold_mode\"],function(e,t,n){\"use strict\";var r=e(\"../../lib/oop\"),i=e(\"../../range\").Range,s=e(\"./fold_mode\").FoldMode,o=t.FoldMode=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\\|[^|]*?$/,\"|\"+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\\|[^|]*?$/,\"|\"+e.end)))};r.inherits(o,s),function(){this.foldingStartMarker=/([\\{\\[\\(])[^\\}\\]\\)]*$|^\\s*(\\/\\*)/,this.foldingStopMarker=/^[^\\[\\{\\(]*([\\}\\]\\)])|^[\\s\\*]*(\\*\\/)/,this.singleLineBlockCommentRe=/^\\s*(\\/\\*).*\\*\\/\\s*$/,this.tripleStarBlockCommentRe=/^\\s*(\\/\\*\\*\\*).*\\*\\/\\s*$/,this.startRegionRe=/^\\s*(\\/\\*|\\/\\/)#?region\\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(e,t,n){var r=e.getLine(n);if(this.singleLineBlockCommentRe.test(r)&&!this.startRegionRe.test(r)&&!this.tripleStarBlockCommentRe.test(r))return\"\";var i=this._getFoldWidgetBase(e,t,n);return!i&&this.startRegionRe.test(r)?\"start\":i},this.getFoldWidgetRange=function(e,t,n,r){var i=e.getLine(n);if(this.startRegionRe.test(i))return this.getCommentRegionBlock(e,i,n);var s=i.match(this.foldingStartMarker);if(s){var o=s.index;if(s[1])return this.openingBracketBlock(e,s[1],n,o);var u=e.getCommentFoldRange(n,o+s[0].length,1);return u&&!u.isMultiLine()&&(r?u=this.getSectionRange(e,n):t!=\"all\"&&(u=null)),u}if(t===\"markbegin\")return;var s=i.match(this.foldingStopMarker);if(s){var o=s.index+s[0].length;return s[1]?this.closingBracketBlock(e,s[1],n,o):e.getCommentFoldRange(n,o,-1)}},this.getSectionRange=function(e,t){var n=e.getLine(t),r=n.search(/\\S/),s=t,o=n.length;t+=1;var u=t,a=e.getLength();while(++t<a){n=e.getLine(t);var f=n.search(/\\S/);if(f===-1)continue;if(r>f)break;var l=this.getFoldWidgetRange(e,\"all\",t);if(l){if(l.start.row<=s)break;if(l.isMultiLine())t=l.end.row;else if(r==f)break}u=t}return new i(s,o,u,e.getLine(u).length)},this.getCommentRegionBlock=function(e,t,n){var r=t.search(/\\s*$/),s=e.getLength(),o=n,u=/^\\s*(?:\\/\\*|\\/\\/|--)#?(end)?region\\b/,a=1;while(++n<s){t=e.getLine(n);var f=u.exec(t);if(!f)continue;f[1]?a--:a++;if(!a)break}var l=n;if(l>o)return new i(o,r,l,t.length)}}.call(o.prototype)}),ace.define(\"ace/mode/javascript\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text\",\"ace/mode/javascript_highlight_rules\",\"ace/mode/matching_brace_outdent\",\"ace/worker/worker_client\",\"ace/mode/behaviour/cstyle\",\"ace/mode/folding/cstyle\"],function(e,t,n){\"use strict\";var r=e(\"../lib/oop\"),i=e(\"./text\").Mode,s=e(\"./javascript_highlight_rules\").JavaScriptHighlightRules,o=e(\"./matching_brace_outdent\").MatchingBraceOutdent,u=e(\"../worker/worker_client\").WorkerClient,a=e(\"./behaviour/cstyle\").CstyleBehaviour,f=e(\"./folding/cstyle\").FoldMode,l=function(){this.HighlightRules=s,this.$outdent=new o,this.$behaviour=new a,this.foldingRules=new f};r.inherits(l,i),function(){this.lineCommentStart=\"//\",this.blockComment={start:\"/*\",end:\"*/\"},this.$quotes={'\"':'\"',\"'\":\"'\",\"`\":\"`\"},this.getNextLineIndent=function(e,t,n){var r=this.$getIndent(t),i=this.getTokenizer().getLineTokens(t,e),s=i.tokens,o=i.state;if(s.length&&s[s.length-1].type==\"comment\")return r;if(e==\"start\"||e==\"no_regex\"){var u=t.match(/^.*(?:\\bcase\\b.*:|[\\{\\(\\[])\\s*$/);u&&(r+=n)}else if(e==\"doc-start\"){if(o==\"start\"||o==\"no_regex\")return\"\";var u=t.match(/^\\s*(\\/?)\\*/);u&&(u[1]&&(r+=\" \"),r+=\"* \")}return r},this.checkOutdent=function(e,t,n){return this.$outdent.checkOutdent(t,n)},this.autoOutdent=function(e,t,n){this.$outdent.autoOutdent(t,n)},this.createWorker=function(e){var t=new u([\"ace\"],\"ace/mode/javascript_worker\",\"JavaScriptWorker\");return t.attachToDocument(e.getDocument()),t.on(\"annotate\",function(t){e.setAnnotations(t.data)}),t.on(\"terminate\",function(){e.clearAnnotations()}),t},this.$id=\"ace/mode/javascript\",this.snippetFileId=\"ace/snippets/javascript\"}.call(l.prototype),t.Mode=l}),ace.define(\"ace/mode/java_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/doc_comment_highlight_rules\",\"ace/mode/text_highlight_rules\"],function(e,t,n){\"use strict\";var r=e(\"../lib/oop\"),i=e(\"./doc_comment_highlight_rules\").DocCommentHighlightRules,s=e(\"./text_highlight_rules\").TextHighlightRules,o=function(){var e=\"abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while|var\",t=\"null|Infinity|NaN|undefined\",n=\"AbstractMethodError|AssertionError|ClassCircularityError|ClassFormatError|Deprecated|EnumConstantNotPresentException|ExceptionInInitializerError|IllegalAccessError|IllegalThreadStateException|InstantiationError|InternalError|NegativeArraySizeException|NoSuchFieldError|Override|Process|ProcessBuilder|SecurityManager|StringIndexOutOfBoundsException|SuppressWarnings|TypeNotPresentException|UnknownError|UnsatisfiedLinkError|UnsupportedClassVersionError|VerifyError|InstantiationException|IndexOutOfBoundsException|ArrayIndexOutOfBoundsException|CloneNotSupportedException|NoSuchFieldException|IllegalArgumentException|NumberFormatException|SecurityException|Void|InheritableThreadLocal|IllegalStateException|InterruptedException|NoSuchMethodException|IllegalAccessException|UnsupportedOperationException|Enum|StrictMath|Package|Compiler|Readable|Runtime|StringBuilder|Math|IncompatibleClassChangeError|NoSuchMethodError|ThreadLocal|RuntimePermission|ArithmeticException|NullPointerException|Long|Integer|Short|Byte|Double|Number|Float|Character|Boolean|StackTraceElement|Appendable|StringBuffer|Iterable|ThreadGroup|Runnable|Thread|IllegalMonitorStateException|StackOverflowError|OutOfMemoryError|VirtualMachineError|ArrayStoreException|ClassCastException|LinkageError|NoClassDefFoundError|ClassNotFoundException|RuntimeException|Exception|ThreadDeath|Error|Throwable|System|ClassLoader|Cloneable|Class|CharSequence|Comparable|String|Object\",r=this.createKeywordMapper({\"variable.language\":\"this\",keyword:e,\"constant.language\":t,\"support.function\":n},\"identifier\");this.$rules={start:[{token:\"comment\",regex:\"\\\\/\\\\/.*$\"},i.getStartRule(\"doc-start\"),{token:\"comment\",regex:\"\\\\/\\\\*\",next:\"comment\"},{token:\"string\",regex:'[\"](?:(?:\\\\\\\\.)|(?:[^\"\\\\\\\\]))*?[\"]'},{token:\"string\",regex:\"['](?:(?:\\\\\\\\.)|(?:[^'\\\\\\\\]))*?[']\"},{token:\"constant.numeric\",regex:/0(?:[xX][0-9a-fA-F][0-9a-fA-F_]*|[bB][01][01_]*)[LlSsDdFfYy]?\\b/},{token:\"constant.numeric\",regex:/[+-]?\\d[\\d_]*(?:(?:\\.[\\d_]*)?(?:[eE][+-]?[\\d_]+)?)?[LlSsDdFfYy]?\\b/},{token:\"constant.language.boolean\",regex:\"(?:true|false)\\\\b\"},{regex:\"(open(?:\\\\s+))?module(?=\\\\s*\\\\w)\",token:\"keyword\",next:[{regex:\"{\",token:\"paren.lparen\",next:[{regex:\"}\",token:\"paren.rparen\",next:\"start\"},{regex:\"\\\\b(requires|transitive|exports|opens|to|uses|provides|with)\\\\b\",token:\"keyword\"}]},{token:\"text\",regex:\"\\\\s+\"},{token:\"identifier\",regex:\"\\\\w+\"},{token:\"punctuation.operator\",regex:\".\"},{token:\"text\",regex:\"\\\\s+\"},{regex:\"\",next:\"start\"}]},{token:r,regex:\"[a-zA-Z_$][a-zA-Z0-9_$]*\\\\b\"},{token:\"keyword.operator\",regex:\"!|\\\\$|%|&|\\\\||\\\\^|\\\\*|\\\\/|\\\\-\\\\-|\\\\-|\\\\+\\\\+|\\\\+|~|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\\\\|\\\\||\\\\?|\\\\:|\\\\*=|\\\\/=|%=|\\\\+=|\\\\-=|&=|\\\\|=|\\\\^=|\\\\b(?:in|instanceof|new|delete|typeof|void)\"},{token:\"lparen\",regex:\"[[({]\"},{token:\"rparen\",regex:\"[\\\\])}]\"},{token:\"text\",regex:\"\\\\s+\"}],comment:[{token:\"comment\",regex:\"\\\\*\\\\/\",next:\"start\"},{defaultToken:\"comment\"}]},this.embedRules(i,\"doc-\",[i.getEndRule(\"start\")]),this.normalizeRules()};r.inherits(o,s),t.JavaHighlightRules=o}),ace.define(\"ace/mode/folding/java\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/folding/cstyle\",\"ace/range\"],function(e,t,n){\"use strict\";var r=e(\"../../lib/oop\"),i=e(\"./cstyle\").FoldMode,s=e(\"../../range\").Range,o=t.FoldMode=function(){};r.inherits(o,i),function(){this.importRegex=/^import /,this.getCStyleFoldWidget=this.getFoldWidget,this.getFoldWidget=function(e,t,n){if(t===\"markbegin\"){var r=e.getLine(n);if(this.importRegex.test(r))if(n==0||!this.importRegex.test(e.getLine(n-1)))return\"start\"}return this.getCStyleFoldWidget(e,t,n)},this.getCstyleFoldWidgetRange=this.getFoldWidgetRange,this.getFoldWidgetRange=function(e,t,n,r){var i=e.getLine(n),o=i.match(this.importRegex);if(!o||t!==\"markbegin\")return this.getCstyleFoldWidgetRange(e,t,n,r);var u=o[0].length,a=e.getLength(),f=n,l=n;while(++n<a){var i=e.getLine(n);if(i.match(/^\\s*$/))continue;if(!i.match(this.importRegex))break;l=n}if(l>f){var c=e.getLine(l).length;return new s(f,u,l,c)}}}.call(o.prototype)}),ace.define(\"ace/mode/java\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/javascript\",\"ace/mode/java_highlight_rules\",\"ace/mode/folding/java\"],function(e,t,n){\"use strict\";var r=e(\"../lib/oop\"),i=e(\"./javascript\").Mode,s=e(\"./java_highlight_rules\").JavaHighlightRules,o=e(\"./folding/java\").FoldMode,u=function(){i.call(this),this.HighlightRules=s,this.foldingRules=new o};r.inherits(u,i),function(){this.createWorker=function(e){return null},this.$id=\"ace/mode/java\",this.snippetFileId=\"ace/snippets/java\"}.call(u.prototype),t.Mode=u});                (function() {\n                    ace.require([\"ace/mode/java\"], function(m) {\n                        if ( true && module) {\n                            module.exports = m;\n                        }\n                    });\n                })();\n            \n\n//# sourceURL=webpack://playground/./node_modules/ace-builds/src-min-noconflict/mode-java.js?");

/***/ }),

/***/ "./node_modules/ace-builds/src-min-noconflict/mode-xml.js":
/*!****************************************************************!*\
  !*** ./node_modules/ace-builds/src-min-noconflict/mode-xml.js ***!
  \****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/* module decorator */ module = __webpack_require__.nmd(module);\nace.define(\"ace/mode/xml_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text_highlight_rules\"],function(e,t,n){\"use strict\";var r=e(\"../lib/oop\"),i=e(\"./text_highlight_rules\").TextHighlightRules,s=function(e){var t=\"[_:a-zA-Z\\u00c0-\\uffff][-_:.a-zA-Z0-9\\u00c0-\\uffff]*\";this.$rules={start:[{token:\"string.cdata.xml\",regex:\"<\\\\!\\\\[CDATA\\\\[\",next:\"cdata\"},{token:[\"punctuation.instruction.xml\",\"keyword.instruction.xml\"],regex:\"(<\\\\?)(\"+t+\")\",next:\"processing_instruction\"},{token:\"comment.start.xml\",regex:\"<\\\\!--\",next:\"comment\"},{token:[\"xml-pe.doctype.xml\",\"xml-pe.doctype.xml\"],regex:\"(<\\\\!)(DOCTYPE)(?=[\\\\s])\",next:\"doctype\",caseInsensitive:!0},{include:\"tag\"},{token:\"text.end-tag-open.xml\",regex:\"</\"},{token:\"text.tag-open.xml\",regex:\"<\"},{include:\"reference\"},{defaultToken:\"text.xml\"}],processing_instruction:[{token:\"entity.other.attribute-name.decl-attribute-name.xml\",regex:t},{token:\"keyword.operator.decl-attribute-equals.xml\",regex:\"=\"},{include:\"whitespace\"},{include:\"string\"},{token:\"punctuation.xml-decl.xml\",regex:\"\\\\?>\",next:\"start\"}],doctype:[{include:\"whitespace\"},{include:\"string\"},{token:\"xml-pe.doctype.xml\",regex:\">\",next:\"start\"},{token:\"xml-pe.xml\",regex:\"[-_a-zA-Z0-9:]+\"},{token:\"punctuation.int-subset\",regex:\"\\\\[\",push:\"int_subset\"}],int_subset:[{token:\"text.xml\",regex:\"\\\\s+\"},{token:\"punctuation.int-subset.xml\",regex:\"]\",next:\"pop\"},{token:[\"punctuation.markup-decl.xml\",\"keyword.markup-decl.xml\"],regex:\"(<\\\\!)(\"+t+\")\",push:[{token:\"text\",regex:\"\\\\s+\"},{token:\"punctuation.markup-decl.xml\",regex:\">\",next:\"pop\"},{include:\"string\"}]}],cdata:[{token:\"string.cdata.xml\",regex:\"\\\\]\\\\]>\",next:\"start\"},{token:\"text.xml\",regex:\"\\\\s+\"},{token:\"text.xml\",regex:\"(?:[^\\\\]]|\\\\](?!\\\\]>))+\"}],comment:[{token:\"comment.end.xml\",regex:\"-->\",next:\"start\"},{defaultToken:\"comment.xml\"}],reference:[{token:\"constant.language.escape.reference.xml\",regex:\"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\\\.-]+;)\"}],attr_reference:[{token:\"constant.language.escape.reference.attribute-value.xml\",regex:\"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\\\.-]+;)\"}],tag:[{token:[\"meta.tag.punctuation.tag-open.xml\",\"meta.tag.punctuation.end-tag-open.xml\",\"meta.tag.tag-name.xml\"],regex:\"(?:(<)|(</))((?:\"+t+\":)?\"+t+\")\",next:[{include:\"attributes\"},{token:\"meta.tag.punctuation.tag-close.xml\",regex:\"/?>\",next:\"start\"}]}],tag_whitespace:[{token:\"text.tag-whitespace.xml\",regex:\"\\\\s+\"}],whitespace:[{token:\"text.whitespace.xml\",regex:\"\\\\s+\"}],string:[{token:\"string.xml\",regex:\"'\",push:[{token:\"string.xml\",regex:\"'\",next:\"pop\"},{defaultToken:\"string.xml\"}]},{token:\"string.xml\",regex:'\"',push:[{token:\"string.xml\",regex:'\"',next:\"pop\"},{defaultToken:\"string.xml\"}]}],attributes:[{token:\"entity.other.attribute-name.xml\",regex:t},{token:\"keyword.operator.attribute-equals.xml\",regex:\"=\"},{include:\"tag_whitespace\"},{include:\"attribute_value\"}],attribute_value:[{token:\"string.attribute-value.xml\",regex:\"'\",push:[{token:\"string.attribute-value.xml\",regex:\"'\",next:\"pop\"},{include:\"attr_reference\"},{defaultToken:\"string.attribute-value.xml\"}]},{token:\"string.attribute-value.xml\",regex:'\"',push:[{token:\"string.attribute-value.xml\",regex:'\"',next:\"pop\"},{include:\"attr_reference\"},{defaultToken:\"string.attribute-value.xml\"}]}]},this.constructor===s&&this.normalizeRules()};(function(){this.embedTagRules=function(e,t,n){this.$rules.tag.unshift({token:[\"meta.tag.punctuation.tag-open.xml\",\"meta.tag.\"+n+\".tag-name.xml\"],regex:\"(<)(\"+n+\"(?=\\\\s|>|$))\",next:[{include:\"attributes\"},{token:\"meta.tag.punctuation.tag-close.xml\",regex:\"/?>\",next:t+\"start\"}]}),this.$rules[n+\"-end\"]=[{include:\"attributes\"},{token:\"meta.tag.punctuation.tag-close.xml\",regex:\"/?>\",next:\"start\",onMatch:function(e,t,n){return n.splice(0),this.token}}],this.embedRules(e,t,[{token:[\"meta.tag.punctuation.end-tag-open.xml\",\"meta.tag.\"+n+\".tag-name.xml\"],regex:\"(</)(\"+n+\"(?=\\\\s|>|$))\",next:n+\"-end\"},{token:\"string.cdata.xml\",regex:\"<\\\\!\\\\[CDATA\\\\[\"},{token:\"string.cdata.xml\",regex:\"\\\\]\\\\]>\"}])}}).call(i.prototype),r.inherits(s,i),t.XmlHighlightRules=s}),ace.define(\"ace/mode/behaviour/xml\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/behaviour\",\"ace/token_iterator\",\"ace/lib/lang\"],function(e,t,n){\"use strict\";function u(e,t){return e&&e.type.lastIndexOf(t+\".xml\")>-1}var r=e(\"../../lib/oop\"),i=e(\"../behaviour\").Behaviour,s=e(\"../../token_iterator\").TokenIterator,o=e(\"../../lib/lang\"),a=function(){this.add(\"string_dquotes\",\"insertion\",function(e,t,n,r,i){if(i=='\"'||i==\"'\"){var o=i,a=r.doc.getTextRange(n.getSelectionRange());if(a!==\"\"&&a!==\"'\"&&a!='\"'&&n.getWrapBehavioursEnabled())return{text:o+a+o,selection:!1};var f=n.getCursorPosition(),l=r.doc.getLine(f.row),c=l.substring(f.column,f.column+1),h=new s(r,f.row,f.column),p=h.getCurrentToken();if(c==o&&(u(p,\"attribute-value\")||u(p,\"string\")))return{text:\"\",selection:[1,1]};p||(p=h.stepBackward());if(!p)return;while(u(p,\"tag-whitespace\")||u(p,\"whitespace\"))p=h.stepBackward();var d=!c||c.match(/\\s/);if(u(p,\"attribute-equals\")&&(d||c==\">\")||u(p,\"decl-attribute-equals\")&&(d||c==\"?\"))return{text:o+o,selection:[1,1]}}}),this.add(\"string_dquotes\",\"deletion\",function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&(s=='\"'||s==\"'\")){var o=r.doc.getLine(i.start.row),u=o.substring(i.start.column+1,i.start.column+2);if(u==s)return i.end.column++,i}}),this.add(\"autoclosing\",\"insertion\",function(e,t,n,r,i){if(i==\">\"){var o=n.getSelectionRange().start,a=new s(r,o.row,o.column),f=a.getCurrentToken()||a.stepBackward();if(!f||!(u(f,\"tag-name\")||u(f,\"tag-whitespace\")||u(f,\"attribute-name\")||u(f,\"attribute-equals\")||u(f,\"attribute-value\")))return;if(u(f,\"reference.attribute-value\"))return;if(u(f,\"attribute-value\")){var l=a.getCurrentTokenColumn()+f.value.length;if(o.column<l)return;if(o.column==l){var c=a.stepForward();if(c&&u(c,\"attribute-value\"))return;a.stepBackward()}}if(/^\\s*>/.test(r.getLine(o.row).slice(o.column)))return;while(!u(f,\"tag-name\")){f=a.stepBackward();if(f.value==\"<\"){f=a.stepForward();break}}var h=a.getCurrentTokenRow(),p=a.getCurrentTokenColumn();if(u(a.stepBackward(),\"end-tag-open\"))return;var d=f.value;h==o.row&&(d=d.substring(0,o.column-p));if(this.voidElements.hasOwnProperty(d.toLowerCase()))return;return{text:\"></\"+d+\">\",selection:[1,1]}}}),this.add(\"autoindent\",\"insertion\",function(e,t,n,r,i){if(i==\"\\n\"){var o=n.getCursorPosition(),u=r.getLine(o.row),a=new s(r,o.row,o.column),f=a.getCurrentToken();if(f&&f.type.indexOf(\"tag-close\")!==-1){if(f.value==\"/>\")return;while(f&&f.type.indexOf(\"tag-name\")===-1)f=a.stepBackward();if(!f)return;var l=f.value,c=a.getCurrentTokenRow();f=a.stepBackward();if(!f||f.type.indexOf(\"end-tag\")!==-1)return;if(this.voidElements&&!this.voidElements[l]){var h=r.getTokenAt(o.row,o.column+1),u=r.getLine(c),p=this.$getIndent(u),d=p+r.getTabString();return h&&h.value===\"</\"?{text:\"\\n\"+d+\"\\n\"+p,selection:[1,d.length,1,d.length]}:{text:\"\\n\"+d}}}}})};r.inherits(a,i),t.XmlBehaviour=a}),ace.define(\"ace/mode/folding/xml\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/range\",\"ace/mode/folding/fold_mode\"],function(e,t,n){\"use strict\";function a(e,t){return e.type.lastIndexOf(t+\".xml\")>-1}var r=e(\"../../lib/oop\"),i=e(\"../../range\").Range,s=e(\"./fold_mode\").FoldMode,o=t.FoldMode=function(e,t){s.call(this),this.voidElements=e||{},this.optionalEndTags=r.mixin({},this.voidElements),t&&r.mixin(this.optionalEndTags,t)};r.inherits(o,s);var u=function(){this.tagName=\"\",this.closing=!1,this.selfClosing=!1,this.start={row:0,column:0},this.end={row:0,column:0}};(function(){this.getFoldWidget=function(e,t,n){var r=this._getFirstTagInLine(e,n);return r?r.closing||!r.tagName&&r.selfClosing?t===\"markbeginend\"?\"end\":\"\":!r.tagName||r.selfClosing||this.voidElements.hasOwnProperty(r.tagName.toLowerCase())?\"\":this._findEndTagInLine(e,n,r.tagName,r.end.column)?\"\":\"start\":this.getCommentFoldWidget(e,n)},this.getCommentFoldWidget=function(e,t){return/comment/.test(e.getState(t))&&/<!-/.test(e.getLine(t))?\"start\":\"\"},this._getFirstTagInLine=function(e,t){var n=e.getTokens(t),r=new u;for(var i=0;i<n.length;i++){var s=n[i];if(a(s,\"tag-open\")){r.end.column=r.start.column+s.value.length,r.closing=a(s,\"end-tag-open\"),s=n[++i];if(!s)return null;r.tagName=s.value,r.end.column+=s.value.length;for(i++;i<n.length;i++){s=n[i],r.end.column+=s.value.length;if(a(s,\"tag-close\")){r.selfClosing=s.value==\"/>\";break}}return r}if(a(s,\"tag-close\"))return r.selfClosing=s.value==\"/>\",r;r.start.column+=s.value.length}return null},this._findEndTagInLine=function(e,t,n,r){var i=e.getTokens(t),s=0;for(var o=0;o<i.length;o++){var u=i[o];s+=u.value.length;if(s<r)continue;if(a(u,\"end-tag-open\")){u=i[o+1];if(u&&u.value==n)return!0}}return!1},this.getFoldWidgetRange=function(e,t,n){var r=e.getMatchingTags({row:n,column:0});return r?new i(r.openTag.end.row,r.openTag.end.column,r.closeTag.start.row,r.closeTag.start.column):this.getCommentFoldWidget(e,n)&&e.getCommentFoldRange(n,e.getLine(n).length)}}).call(o.prototype)}),ace.define(\"ace/mode/xml\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/lang\",\"ace/mode/text\",\"ace/mode/xml_highlight_rules\",\"ace/mode/behaviour/xml\",\"ace/mode/folding/xml\",\"ace/worker/worker_client\"],function(e,t,n){\"use strict\";var r=e(\"../lib/oop\"),i=e(\"../lib/lang\"),s=e(\"./text\").Mode,o=e(\"./xml_highlight_rules\").XmlHighlightRules,u=e(\"./behaviour/xml\").XmlBehaviour,a=e(\"./folding/xml\").FoldMode,f=e(\"../worker/worker_client\").WorkerClient,l=function(){this.HighlightRules=o,this.$behaviour=new u,this.foldingRules=new a};r.inherits(l,s),function(){this.voidElements=i.arrayToMap([]),this.blockComment={start:\"<!--\",end:\"-->\"},this.createWorker=function(e){var t=new f([\"ace\"],\"ace/mode/xml_worker\",\"Worker\");return t.attachToDocument(e.getDocument()),t.on(\"error\",function(t){e.setAnnotations(t.data)}),t.on(\"terminate\",function(){e.clearAnnotations()}),t},this.$id=\"ace/mode/xml\"}.call(l.prototype),t.Mode=l});                (function() {\n                    ace.require([\"ace/mode/xml\"], function(m) {\n                        if ( true && module) {\n                            module.exports = m;\n                        }\n                    });\n                })();\n            \n\n//# sourceURL=webpack://playground/./node_modules/ace-builds/src-min-noconflict/mode-xml.js?");

/***/ }),

/***/ "./node_modules/ace-builds/src-min-noconflict/mode-yaml.js":
/*!*****************************************************************!*\
  !*** ./node_modules/ace-builds/src-min-noconflict/mode-yaml.js ***!
  \*****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/* module decorator */ module = __webpack_require__.nmd(module);\nace.define(\"ace/mode/yaml_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text_highlight_rules\"],function(e,t,n){\"use strict\";var r=e(\"../lib/oop\"),i=e(\"./text_highlight_rules\").TextHighlightRules,s=function(){this.$rules={start:[{token:\"comment\",regex:\"#.*$\"},{token:\"list.markup\",regex:/^(?:-{3}|\\.{3})\\s*(?=#|$)/},{token:\"list.markup\",regex:/^\\s*[\\-?](?:$|\\s)/},{token:\"constant\",regex:\"!![\\\\w//]+\"},{token:\"constant.language\",regex:\"[&\\\\*][a-zA-Z0-9-_]+\"},{token:[\"meta.tag\",\"keyword\"],regex:/^(\\s*\\w[^\\s:]*?)(:(?=\\s|$))/},{token:[\"meta.tag\",\"keyword\"],regex:/(\\w[^\\s:]*?)(\\s*:(?=\\s|$))/},{token:\"keyword.operator\",regex:\"<<\\\\w*:\\\\w*\"},{token:\"keyword.operator\",regex:\"-\\\\s*(?=[{])\"},{token:\"string\",regex:'[\"](?:(?:\\\\\\\\.)|(?:[^\"\\\\\\\\]))*?[\"]'},{token:\"string\",regex:/[|>][-+\\d]*(?:$|\\s+(?:$|#))/,onMatch:function(e,t,n,r){r=r.replace(/ #.*/,\"\");var i=/^ *((:\\s*)?-(\\s*[^|>])?)?/.exec(r)[0].replace(/\\S\\s*$/,\"\").length,s=parseInt(/\\d+[\\s+-]*$/.exec(r));return s?(i+=s-1,this.next=\"mlString\"):this.next=\"mlStringPre\",n.length?(n[0]=this.next,n[1]=i):(n.push(this.next),n.push(i)),this.token},next:\"mlString\"},{token:\"string\",regex:\"['](?:(?:\\\\\\\\.)|(?:[^'\\\\\\\\]))*?[']\"},{token:\"constant.numeric\",regex:/(\\b|[+\\-\\.])[\\d_]+(?:(?:\\.[\\d_]*)?(?:[eE][+\\-]?[\\d_]+)?)(?=[^\\d-\\w]|$)$/},{token:\"constant.numeric\",regex:/[+\\-]?\\.inf\\b|NaN\\b|0x[\\dA-Fa-f_]+|0b[10_]+/},{token:\"constant.language.boolean\",regex:\"\\\\b(?:true|false|TRUE|FALSE|True|False|yes|no)\\\\b\"},{token:\"paren.lparen\",regex:\"[[({]\"},{token:\"paren.rparen\",regex:\"[\\\\])}]\"},{token:\"text\",regex:/[^\\s,:\\[\\]\\{\\}]+/}],mlStringPre:[{token:\"indent\",regex:/^ *$/},{token:\"indent\",regex:/^ */,onMatch:function(e,t,n){var r=n[1];return r>=e.length?(this.next=\"start\",n.shift(),n.shift()):(n[1]=e.length-1,this.next=n[0]=\"mlString\"),this.token},next:\"mlString\"},{defaultToken:\"string\"}],mlString:[{token:\"indent\",regex:/^ *$/},{token:\"indent\",regex:/^ */,onMatch:function(e,t,n){var r=n[1];return r>=e.length?(this.next=\"start\",n.splice(0)):this.next=\"mlString\",this.token},next:\"mlString\"},{token:\"string\",regex:\".+\"}]},this.normalizeRules()};r.inherits(s,i),t.YamlHighlightRules=s}),ace.define(\"ace/mode/matching_brace_outdent\",[\"require\",\"exports\",\"module\",\"ace/range\"],function(e,t,n){\"use strict\";var r=e(\"../range\").Range,i=function(){};(function(){this.checkOutdent=function(e,t){return/^\\s+$/.test(e)?/^\\s*\\}/.test(t):!1},this.autoOutdent=function(e,t){var n=e.getLine(t),i=n.match(/^(\\s*\\})/);if(!i)return 0;var s=i[1].length,o=e.findMatchingBracket({row:t,column:s});if(!o||o.row==t)return 0;var u=this.$getIndent(e.getLine(o.row));e.replace(new r(t,0,t,s-1),u)},this.$getIndent=function(e){return e.match(/^\\s*/)[0]}}).call(i.prototype),t.MatchingBraceOutdent=i}),ace.define(\"ace/mode/folding/coffee\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/folding/fold_mode\",\"ace/range\"],function(e,t,n){\"use strict\";var r=e(\"../../lib/oop\"),i=e(\"./fold_mode\").FoldMode,s=e(\"../../range\").Range,o=t.FoldMode=function(){};r.inherits(o,i),function(){this.getFoldWidgetRange=function(e,t,n){var r=this.indentationBlock(e,n);if(r)return r;var i=/\\S/,o=e.getLine(n),u=o.search(i);if(u==-1||o[u]!=\"#\")return;var a=o.length,f=e.getLength(),l=n,c=n;while(++n<f){o=e.getLine(n);var h=o.search(i);if(h==-1)continue;if(o[h]!=\"#\")break;c=n}if(c>l){var p=e.getLine(c).length;return new s(l,a,c,p)}},this.getFoldWidget=function(e,t,n){var r=e.getLine(n),i=r.search(/\\S/),s=e.getLine(n+1),o=e.getLine(n-1),u=o.search(/\\S/),a=s.search(/\\S/);if(i==-1)return e.foldWidgets[n-1]=u!=-1&&u<a?\"start\":\"\",\"\";if(u==-1){if(i==a&&r[i]==\"#\"&&s[i]==\"#\")return e.foldWidgets[n-1]=\"\",e.foldWidgets[n+1]=\"\",\"start\"}else if(u==i&&r[i]==\"#\"&&o[i]==\"#\"&&e.getLine(n-2).search(/\\S/)==-1)return e.foldWidgets[n-1]=\"start\",e.foldWidgets[n+1]=\"\",\"\";return u!=-1&&u<i?e.foldWidgets[n-1]=\"start\":e.foldWidgets[n-1]=\"\",i<a?\"start\":\"\"}}.call(o.prototype)}),ace.define(\"ace/mode/yaml\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text\",\"ace/mode/yaml_highlight_rules\",\"ace/mode/matching_brace_outdent\",\"ace/mode/folding/coffee\",\"ace/worker/worker_client\"],function(e,t,n){\"use strict\";var r=e(\"../lib/oop\"),i=e(\"./text\").Mode,s=e(\"./yaml_highlight_rules\").YamlHighlightRules,o=e(\"./matching_brace_outdent\").MatchingBraceOutdent,u=e(\"./folding/coffee\").FoldMode,a=e(\"../worker/worker_client\").WorkerClient,f=function(){this.HighlightRules=s,this.$outdent=new o,this.foldingRules=new u,this.$behaviour=this.$defaultBehaviour};r.inherits(f,i),function(){this.lineCommentStart=[\"#\"],this.getNextLineIndent=function(e,t,n){var r=this.$getIndent(t);if(e==\"start\"){var i=t.match(/^.*[\\{\\(\\[]\\s*$/);i&&(r+=n)}return r},this.checkOutdent=function(e,t,n){return this.$outdent.checkOutdent(t,n)},this.autoOutdent=function(e,t,n){this.$outdent.autoOutdent(t,n)},this.createWorker=function(e){var t=new a([\"ace\"],\"ace/mode/yaml_worker\",\"YamlWorker\");return t.attachToDocument(e.getDocument()),t.on(\"annotate\",function(t){e.setAnnotations(t.data)}),t.on(\"terminate\",function(){e.clearAnnotations()}),t},this.$id=\"ace/mode/yaml\"}.call(f.prototype),t.Mode=f});                (function() {\n                    ace.require([\"ace/mode/yaml\"], function(m) {\n                        if ( true && module) {\n                            module.exports = m;\n                        }\n                    });\n                })();\n            \n\n//# sourceURL=webpack://playground/./node_modules/ace-builds/src-min-noconflict/mode-yaml.js?");

/***/ }),

/***/ "./node_modules/ace-builds/src-min-noconflict/theme-eclipse.js":
/*!*********************************************************************!*\
  !*** ./node_modules/ace-builds/src-min-noconflict/theme-eclipse.js ***!
  \*********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/* module decorator */ module = __webpack_require__.nmd(module);\nace.define(\"ace/theme/eclipse.css\",[\"require\",\"exports\",\"module\"],function(e,t,n){n.exports='.ace-eclipse .ace_gutter {\\n  background: #ebebeb;\\n  border-right: 1px solid rgb(159, 159, 159);\\n  color: rgb(136, 136, 136);\\n}\\n\\n.ace-eclipse .ace_print-margin {\\n  width: 1px;\\n  background: #ebebeb;\\n}\\n\\n.ace-eclipse {\\n  background-color: #FFFFFF;\\n  color: black;\\n}\\n\\n.ace-eclipse .ace_fold {\\n    background-color: rgb(60, 76, 114);\\n}\\n\\n.ace-eclipse .ace_cursor {\\n  color: black;\\n}\\n\\n.ace-eclipse .ace_storage,\\n.ace-eclipse .ace_keyword,\\n.ace-eclipse .ace_variable {\\n  color: rgb(127, 0, 85);\\n}\\n\\n.ace-eclipse .ace_constant.ace_buildin {\\n  color: rgb(88, 72, 246);\\n}\\n\\n.ace-eclipse .ace_constant.ace_library {\\n  color: rgb(6, 150, 14);\\n}\\n\\n.ace-eclipse .ace_function {\\n  color: rgb(60, 76, 114);\\n}\\n\\n.ace-eclipse .ace_string {\\n  color: rgb(42, 0, 255);\\n}\\n\\n.ace-eclipse .ace_comment {\\n  color: rgb(113, 150, 130);\\n}\\n\\n.ace-eclipse .ace_comment.ace_doc {\\n  color: rgb(63, 95, 191);\\n}\\n\\n.ace-eclipse .ace_comment.ace_doc.ace_tag {\\n  color: rgb(127, 159, 191);\\n}\\n\\n.ace-eclipse .ace_constant.ace_numeric {\\n  color: darkblue;\\n}\\n\\n.ace-eclipse .ace_tag {\\n  color: rgb(25, 118, 116);\\n}\\n\\n.ace-eclipse .ace_type {\\n  color: rgb(127, 0, 127);\\n}\\n\\n.ace-eclipse .ace_xml-pe {\\n  color: rgb(104, 104, 91);\\n}\\n\\n.ace-eclipse .ace_marker-layer .ace_selection {\\n  background: rgb(181, 213, 255);\\n}\\n\\n.ace-eclipse .ace_marker-layer .ace_bracket {\\n  margin: -1px 0 0 -1px;\\n  border: 1px solid rgb(192, 192, 192);\\n}\\n\\n.ace-eclipse .ace_meta.ace_tag {\\n  color:rgb(25, 118, 116);\\n}\\n\\n.ace-eclipse .ace_invisible {\\n  color: #ddd;\\n}\\n\\n.ace-eclipse .ace_entity.ace_other.ace_attribute-name {\\n  color:rgb(127, 0, 127);\\n}\\n.ace-eclipse .ace_marker-layer .ace_step {\\n  background: rgb(255, 255, 0);\\n}\\n\\n.ace-eclipse .ace_active-line {\\n  background: rgb(232, 242, 254);\\n}\\n\\n.ace-eclipse .ace_gutter-active-line {\\n  background-color : #DADADA;\\n}\\n\\n.ace-eclipse .ace_marker-layer .ace_selected-word {\\n  border: 1px solid rgb(181, 213, 255);\\n}\\n\\n.ace-eclipse .ace_indent-guide {\\n  background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==\") right repeat-y;\\n}\\n\\n.ace-eclipse .ace_indent-guide-active {\\n  background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC\") right repeat-y;\\n} \\n'}),ace.define(\"ace/theme/eclipse\",[\"require\",\"exports\",\"module\",\"ace/theme/eclipse.css\",\"ace/lib/dom\"],function(e,t,n){\"use strict\";t.isDark=!1,t.cssText=e(\"./eclipse.css\"),t.cssClass=\"ace-eclipse\";var r=e(\"../lib/dom\");r.importCssString(t.cssText,t.cssClass,!1)});                (function() {\n                    ace.require([\"ace/theme/eclipse\"], function(m) {\n                        if ( true && module) {\n                            module.exports = m;\n                        }\n                    });\n                })();\n            \n\n//# sourceURL=webpack://playground/./node_modules/ace-builds/src-min-noconflict/theme-eclipse.js?");

/***/ }),

/***/ "./node_modules/ace-builds/src-noconflict/ace.js":
/*!*******************************************************!*\
  !*** ./node_modules/ace-builds/src-noconflict/ace.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/* module decorator */ module = __webpack_require__.nmd(module);\n/* ***** BEGIN LICENSE BLOCK *****\n * Distributed under the BSD license:\n *\n * Copyright (c) 2010, Ajax.org B.V.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *     * Neither the name of Ajax.org B.V. nor the\n *       names of its contributors may be used to endorse or promote products\n *       derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * ***** END LICENSE BLOCK ***** */\n\n/**\n * Define a module along with a payload\n * @param module a name for the payload\n * @param payload a function to call with (require, exports, module) params\n */\n\n(function() {\n\nvar ACE_NAMESPACE = \"ace\";\n\nvar global = (function() { return this; })();\nif (!global && typeof window != \"undefined\") global = window; // strict mode\n\n\nif (!ACE_NAMESPACE && typeof requirejs !== \"undefined\")\n    return;\n\n\nvar define = function(module, deps, payload) {\n    if (typeof module !== \"string\") {\n        if (define.original)\n            define.original.apply(this, arguments);\n        else {\n            console.error(\"dropping module because define wasn\\'t a string.\");\n            console.trace();\n        }\n        return;\n    }\n    if (arguments.length == 2)\n        payload = deps;\n    if (!define.modules[module]) {\n        define.payloads[module] = payload;\n        define.modules[module] = null;\n    }\n};\n\ndefine.modules = {};\ndefine.payloads = {};\n\n/**\n * Get at functionality define()ed using the function above\n */\nvar _require = function(parentId, module, callback) {\n    if (typeof module === \"string\") {\n        var payload = lookup(parentId, module);\n        if (payload != undefined) {\n            callback && callback();\n            return payload;\n        }\n    } else if (Object.prototype.toString.call(module) === \"[object Array]\") {\n        var params = [];\n        for (var i = 0, l = module.length; i < l; ++i) {\n            var dep = lookup(parentId, module[i]);\n            if (dep == undefined && require.original)\n                return;\n            params.push(dep);\n        }\n        return callback && callback.apply(null, params) || true;\n    }\n};\n\nvar require = function(module, callback) {\n    var packagedModule = _require(\"\", module, callback);\n    if (packagedModule == undefined && require.original)\n        return require.original.apply(this, arguments);\n    return packagedModule;\n};\n\nvar normalizeModule = function(parentId, moduleName) {\n    // normalize plugin requires\n    if (moduleName.indexOf(\"!\") !== -1) {\n        var chunks = moduleName.split(\"!\");\n        return normalizeModule(parentId, chunks[0]) + \"!\" + normalizeModule(parentId, chunks[1]);\n    }\n    // normalize relative requires\n    if (moduleName.charAt(0) == \".\") {\n        var base = parentId.split(\"/\").slice(0, -1).join(\"/\");\n        moduleName = base + \"/\" + moduleName;\n\n        while(moduleName.indexOf(\".\") !== -1 && previous != moduleName) {\n            var previous = moduleName;\n            moduleName = moduleName.replace(/\\/\\.\\//, \"/\").replace(/[^\\/]+\\/\\.\\.\\//, \"\");\n        }\n    }\n    return moduleName;\n};\n\n/**\n * Internal function to lookup moduleNames and resolve them by calling the\n * definition function if needed.\n */\nvar lookup = function(parentId, moduleName) {\n    moduleName = normalizeModule(parentId, moduleName);\n\n    var module = define.modules[moduleName];\n    if (!module) {\n        module = define.payloads[moduleName];\n        if (typeof module === 'function') {\n            var exports = {};\n            var mod = {\n                id: moduleName,\n                uri: '',\n                exports: exports,\n                packaged: true\n            };\n\n            var req = function(module, callback) {\n                return _require(moduleName, module, callback);\n            };\n\n            var returnValue = module(req, exports, mod);\n            exports = returnValue || mod.exports;\n            define.modules[moduleName] = exports;\n            delete define.payloads[moduleName];\n        }\n        module = define.modules[moduleName] = exports || module;\n    }\n    return module;\n};\n\nfunction exportAce(ns) {\n    var root = global;\n    if (ns) {\n        if (!global[ns])\n            global[ns] = {};\n        root = global[ns];\n    }\n\n    if (!root.define || !root.define.packaged) {\n        define.original = root.define;\n        root.define = define;\n        root.define.packaged = true;\n    }\n\n    if (!root.require || !root.require.packaged) {\n        require.original = root.require;\n        root.require = require;\n        root.require.packaged = true;\n    }\n}\n\nexportAce(ACE_NAMESPACE);\n\n})();\n\nace.define(\"ace/lib/es6-shim\",[\"require\",\"exports\",\"module\"], function(require, exports, module){function defineProp(obj, name, val) {\n    Object.defineProperty(obj, name, {\n        value: val,\n        enumerable: false,\n        writable: true,\n        configurable: true\n    });\n}\nif (!String.prototype.startsWith) {\n    defineProp(String.prototype, \"startsWith\", function (searchString, position) {\n        position = position || 0;\n        return this.lastIndexOf(searchString, position) === position;\n    });\n}\nif (!String.prototype.endsWith) {\n    defineProp(String.prototype, \"endsWith\", function (searchString, position) {\n        var subjectString = this;\n        if (position === undefined || position > subjectString.length) {\n            position = subjectString.length;\n        }\n        position -= searchString.length;\n        var lastIndex = subjectString.indexOf(searchString, position);\n        return lastIndex !== -1 && lastIndex === position;\n    });\n}\nif (!String.prototype.repeat) {\n    defineProp(String.prototype, \"repeat\", function (count) {\n        var result = \"\";\n        var string = this;\n        while (count > 0) {\n            if (count & 1)\n                result += string;\n            if ((count >>= 1))\n                string += string;\n        }\n        return result;\n    });\n}\nif (!String.prototype.includes) {\n    defineProp(String.prototype, \"includes\", function (str, position) {\n        return this.indexOf(str, position) != -1;\n    });\n}\nif (!Object.assign) {\n    Object.assign = function (target) {\n        if (target === undefined || target === null) {\n            throw new TypeError(\"Cannot convert undefined or null to object\");\n        }\n        var output = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== undefined && source !== null) {\n                Object.keys(source).forEach(function (key) {\n                    output[key] = source[key];\n                });\n            }\n        }\n        return output;\n    };\n}\nif (!Object.values) {\n    Object.values = function (o) {\n        return Object.keys(o).map(function (k) {\n            return o[k];\n        });\n    };\n}\nif (!Array.prototype.find) {\n    defineProp(Array.prototype, \"find\", function (predicate) {\n        var len = this.length;\n        var thisArg = arguments[1];\n        for (var k = 0; k < len; k++) {\n            var kValue = this[k];\n            if (predicate.call(thisArg, kValue, k, this)) {\n                return kValue;\n            }\n        }\n    });\n}\nif (!Array.prototype.findIndex) {\n    defineProp(Array.prototype, \"findIndex\", function (predicate) {\n        var len = this.length;\n        var thisArg = arguments[1];\n        for (var k = 0; k < len; k++) {\n            var kValue = this[k];\n            if (predicate.call(thisArg, kValue, k, this)) {\n                return k;\n            }\n        }\n    });\n}\nif (!Array.prototype.includes) {\n    defineProp(Array.prototype, \"includes\", function (item, position) {\n        return this.indexOf(item, position) != -1;\n    });\n}\nif (!Array.prototype.fill) {\n    defineProp(Array.prototype, \"fill\", function (value) {\n        var O = this;\n        var len = O.length >>> 0;\n        var start = arguments[1];\n        var relativeStart = start >> 0;\n        var k = relativeStart < 0\n            ? Math.max(len + relativeStart, 0)\n            : Math.min(relativeStart, len);\n        var end = arguments[2];\n        var relativeEnd = end === undefined ? len : end >> 0;\n        var final = relativeEnd < 0\n            ? Math.max(len + relativeEnd, 0)\n            : Math.min(relativeEnd, len);\n        while (k < final) {\n            O[k] = value;\n            k++;\n        }\n        return O;\n    });\n}\nif (!Array.of) {\n    defineProp(Array, \"of\", function () {\n        return Array.prototype.slice.call(arguments);\n    });\n}\n\n});\n\nace.define(\"ace/lib/fixoldbrowsers\",[\"require\",\"exports\",\"module\",\"ace/lib/es6-shim\"], function(require, exports, module){// vim:set ts=4 sts=4 sw=4 st:\n\"use strict\";\nrequire(\"./es6-shim\");\n\n});\n\nace.define(\"ace/lib/lang\",[\"require\",\"exports\",\"module\"], function(require, exports, module){\"use strict\";\nexports.last = function (a) {\n    return a[a.length - 1];\n};\nexports.stringReverse = function (string) {\n    return string.split(\"\").reverse().join(\"\");\n};\nexports.stringRepeat = function (string, count) {\n    var result = '';\n    while (count > 0) {\n        if (count & 1)\n            result += string;\n        if (count >>= 1)\n            string += string;\n    }\n    return result;\n};\nvar trimBeginRegexp = /^\\s\\s*/;\nvar trimEndRegexp = /\\s\\s*$/;\nexports.stringTrimLeft = function (string) {\n    return string.replace(trimBeginRegexp, '');\n};\nexports.stringTrimRight = function (string) {\n    return string.replace(trimEndRegexp, '');\n};\nexports.copyObject = function (obj) {\n    var copy = {};\n    for (var key in obj) {\n        copy[key] = obj[key];\n    }\n    return copy;\n};\nexports.copyArray = function (array) {\n    var copy = [];\n    for (var i = 0, l = array.length; i < l; i++) {\n        if (array[i] && typeof array[i] == \"object\")\n            copy[i] = this.copyObject(array[i]);\n        else\n            copy[i] = array[i];\n    }\n    return copy;\n};\nexports.deepCopy = function deepCopy(obj) {\n    if (typeof obj !== \"object\" || !obj)\n        return obj;\n    var copy;\n    if (Array.isArray(obj)) {\n        copy = [];\n        for (var key = 0; key < obj.length; key++) {\n            copy[key] = deepCopy(obj[key]);\n        }\n        return copy;\n    }\n    if (Object.prototype.toString.call(obj) !== \"[object Object]\")\n        return obj;\n    copy = {};\n    for (var key in obj)\n        copy[key] = deepCopy(obj[key]);\n    return copy;\n};\nexports.arrayToMap = function (arr) {\n    var map = {};\n    for (var i = 0; i < arr.length; i++) {\n        map[arr[i]] = 1;\n    }\n    return map;\n};\nexports.createMap = function (props) {\n    var map = Object.create(null);\n    for (var i in props) {\n        map[i] = props[i];\n    }\n    return map;\n};\nexports.arrayRemove = function (array, value) {\n    for (var i = 0; i <= array.length; i++) {\n        if (value === array[i]) {\n            array.splice(i, 1);\n        }\n    }\n};\nexports.escapeRegExp = function (str) {\n    return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g, '\\\\$1');\n};\nexports.escapeHTML = function (str) {\n    return (\"\" + str).replace(/&/g, \"&#38;\").replace(/\"/g, \"&#34;\").replace(/'/g, \"&#39;\").replace(/</g, \"&#60;\");\n};\nexports.getMatchOffsets = function (string, regExp) {\n    var matches = [];\n    string.replace(regExp, function (str) {\n        matches.push({\n            offset: arguments[arguments.length - 2],\n            length: str.length\n        });\n    });\n    return matches;\n};\nexports.deferredCall = function (fcn) {\n    var timer = null;\n    var callback = function () {\n        timer = null;\n        fcn();\n    };\n    var deferred = function (timeout) {\n        deferred.cancel();\n        timer = setTimeout(callback, timeout || 0);\n        return deferred;\n    };\n    deferred.schedule = deferred;\n    deferred.call = function () {\n        this.cancel();\n        fcn();\n        return deferred;\n    };\n    deferred.cancel = function () {\n        clearTimeout(timer);\n        timer = null;\n        return deferred;\n    };\n    deferred.isPending = function () {\n        return timer;\n    };\n    return deferred;\n};\nexports.delayedCall = function (fcn, defaultTimeout) {\n    var timer = null;\n    var callback = function () {\n        timer = null;\n        fcn();\n    };\n    var _self = function (timeout) {\n        if (timer == null)\n            timer = setTimeout(callback, timeout || defaultTimeout);\n    };\n    _self.delay = function (timeout) {\n        timer && clearTimeout(timer);\n        timer = setTimeout(callback, timeout || defaultTimeout);\n    };\n    _self.schedule = _self;\n    _self.call = function () {\n        this.cancel();\n        fcn();\n    };\n    _self.cancel = function () {\n        timer && clearTimeout(timer);\n        timer = null;\n    };\n    _self.isPending = function () {\n        return timer;\n    };\n    return _self;\n};\n\n});\n\nace.define(\"ace/lib/oop\",[\"require\",\"exports\",\"module\"], function(require, exports, module){\"use strict\";\nexports.inherits = function (ctor, superCtor) {\n    ctor.super_ = superCtor;\n    ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n            value: ctor,\n            enumerable: false,\n            writable: true,\n            configurable: true\n        }\n    });\n};\nexports.mixin = function (obj, mixin) {\n    for (var key in mixin) {\n        obj[key] = mixin[key];\n    }\n    return obj;\n};\nexports.implement = function (proto, mixin) {\n    exports.mixin(proto, mixin);\n};\n\n});\n\nace.define(\"ace/lib/useragent\",[\"require\",\"exports\",\"module\"], function(require, exports, module){\"use strict\";\nexports.OS = {\n    LINUX: \"LINUX\",\n    MAC: \"MAC\",\n    WINDOWS: \"WINDOWS\"\n};\nexports.getOS = function () {\n    if (exports.isMac) {\n        return exports.OS.MAC;\n    }\n    else if (exports.isLinux) {\n        return exports.OS.LINUX;\n    }\n    else {\n        return exports.OS.WINDOWS;\n    }\n};\nvar _navigator = typeof navigator == \"object\" ? navigator : {};\nvar os = (/mac|win|linux/i.exec(_navigator.platform) || [\"other\"])[0].toLowerCase();\nvar ua = _navigator.userAgent || \"\";\nvar appName = _navigator.appName || \"\";\nexports.isWin = (os == \"win\");\nexports.isMac = (os == \"mac\");\nexports.isLinux = (os == \"linux\");\nexports.isIE =\n    (appName == \"Microsoft Internet Explorer\" || appName.indexOf(\"MSAppHost\") >= 0)\n        ? parseFloat((ua.match(/(?:MSIE |Trident\\/[0-9]+[\\.0-9]+;.*rv:)([0-9]+[\\.0-9]+)/) || [])[1])\n        : parseFloat((ua.match(/(?:Trident\\/[0-9]+[\\.0-9]+;.*rv:)([0-9]+[\\.0-9]+)/) || [])[1]); // for ie\nexports.isOldIE = exports.isIE && exports.isIE < 9;\nexports.isGecko = exports.isMozilla = ua.match(/ Gecko\\/\\d+/);\nexports.isOpera = typeof opera == \"object\" && Object.prototype.toString.call(window.opera) == \"[object Opera]\";\nexports.isWebKit = parseFloat(ua.split(\"WebKit/\")[1]) || undefined;\nexports.isChrome = parseFloat(ua.split(\" Chrome/\")[1]) || undefined;\nexports.isEdge = parseFloat(ua.split(\" Edge/\")[1]) || undefined;\nexports.isAIR = ua.indexOf(\"AdobeAIR\") >= 0;\nexports.isAndroid = ua.indexOf(\"Android\") >= 0;\nexports.isChromeOS = ua.indexOf(\" CrOS \") >= 0;\nexports.isIOS = /iPad|iPhone|iPod/.test(ua) && !window.MSStream;\nif (exports.isIOS)\n    exports.isMac = true;\nexports.isMobile = exports.isIOS || exports.isAndroid;\n\n});\n\nace.define(\"ace/lib/dom\",[\"require\",\"exports\",\"module\",\"ace/lib/useragent\"], function(require, exports, module){\"use strict\";\nvar useragent = require(\"./useragent\");\nvar XHTML_NS = \"http://www.w3.org/1999/xhtml\";\nexports.buildDom = function buildDom(arr, parent, refs) {\n    if (typeof arr == \"string\" && arr) {\n        var txt = document.createTextNode(arr);\n        if (parent)\n            parent.appendChild(txt);\n        return txt;\n    }\n    if (!Array.isArray(arr)) {\n        if (arr && arr.appendChild && parent)\n            parent.appendChild(arr);\n        return arr;\n    }\n    if (typeof arr[0] != \"string\" || !arr[0]) {\n        var els = [];\n        for (var i = 0; i < arr.length; i++) {\n            var ch = buildDom(arr[i], parent, refs);\n            ch && els.push(ch);\n        }\n        return els;\n    }\n    var el = document.createElement(arr[0]);\n    var options = arr[1];\n    var childIndex = 1;\n    if (options && typeof options == \"object\" && !Array.isArray(options))\n        childIndex = 2;\n    for (var i = childIndex; i < arr.length; i++)\n        buildDom(arr[i], el, refs);\n    if (childIndex == 2) {\n        Object.keys(options).forEach(function (n) {\n            var val = options[n];\n            if (n === \"class\") {\n                el.className = Array.isArray(val) ? val.join(\" \") : val;\n            }\n            else if (typeof val == \"function\" || n == \"value\" || n[0] == \"$\") {\n                el[n] = val;\n            }\n            else if (n === \"ref\") {\n                if (refs)\n                    refs[val] = el;\n            }\n            else if (n === \"style\") {\n                if (typeof val == \"string\")\n                    el.style.cssText = val;\n            }\n            else if (val != null) {\n                el.setAttribute(n, val);\n            }\n        });\n    }\n    if (parent)\n        parent.appendChild(el);\n    return el;\n};\nexports.getDocumentHead = function (doc) {\n    if (!doc)\n        doc = document;\n    return doc.head || doc.getElementsByTagName(\"head\")[0] || doc.documentElement;\n};\nexports.createElement = function (tag, ns) {\n    return document.createElementNS ?\n        document.createElementNS(ns || XHTML_NS, tag) :\n        document.createElement(tag);\n};\nexports.removeChildren = function (element) {\n    element.innerHTML = \"\";\n};\nexports.createTextNode = function (textContent, element) {\n    var doc = element ? element.ownerDocument : document;\n    return doc.createTextNode(textContent);\n};\nexports.createFragment = function (element) {\n    var doc = element ? element.ownerDocument : document;\n    return doc.createDocumentFragment();\n};\nexports.hasCssClass = function (el, name) {\n    var classes = (el.className + \"\").split(/\\s+/g);\n    return classes.indexOf(name) !== -1;\n};\nexports.addCssClass = function (el, name) {\n    if (!exports.hasCssClass(el, name)) {\n        el.className += \" \" + name;\n    }\n};\nexports.removeCssClass = function (el, name) {\n    var classes = el.className.split(/\\s+/g);\n    while (true) {\n        var index = classes.indexOf(name);\n        if (index == -1) {\n            break;\n        }\n        classes.splice(index, 1);\n    }\n    el.className = classes.join(\" \");\n};\nexports.toggleCssClass = function (el, name) {\n    var classes = el.className.split(/\\s+/g), add = true;\n    while (true) {\n        var index = classes.indexOf(name);\n        if (index == -1) {\n            break;\n        }\n        add = false;\n        classes.splice(index, 1);\n    }\n    if (add)\n        classes.push(name);\n    el.className = classes.join(\" \");\n    return add;\n};\nexports.setCssClass = function (node, className, include) {\n    if (include) {\n        exports.addCssClass(node, className);\n    }\n    else {\n        exports.removeCssClass(node, className);\n    }\n};\nexports.hasCssString = function (id, doc) {\n    var index = 0, sheets;\n    doc = doc || document;\n    if ((sheets = doc.querySelectorAll(\"style\"))) {\n        while (index < sheets.length) {\n            if (sheets[index++].id === id) {\n                return true;\n            }\n        }\n    }\n};\nexports.removeElementById = function (id, doc) {\n    doc = doc || document;\n    if (doc.getElementById(id)) {\n        doc.getElementById(id).remove();\n    }\n};\nvar strictCSP;\nvar cssCache = [];\nexports.useStrictCSP = function (value) {\n    strictCSP = value;\n    if (value == false)\n        insertPendingStyles();\n    else if (!cssCache)\n        cssCache = [];\n};\nfunction insertPendingStyles() {\n    var cache = cssCache;\n    cssCache = null;\n    cache && cache.forEach(function (item) {\n        importCssString(item[0], item[1]);\n    });\n}\nfunction importCssString(cssText, id, target) {\n    if (typeof document == \"undefined\")\n        return;\n    if (cssCache) {\n        if (target) {\n            insertPendingStyles();\n        }\n        else if (target === false) {\n            return cssCache.push([cssText, id]);\n        }\n    }\n    if (strictCSP)\n        return;\n    var container = target;\n    if (!target || !target.getRootNode) {\n        container = document;\n    }\n    else {\n        container = target.getRootNode();\n        if (!container || container == target)\n            container = document;\n    }\n    var doc = container.ownerDocument || container;\n    if (id && exports.hasCssString(id, container))\n        return null;\n    if (id)\n        cssText += \"\\n/*# sourceURL=ace/css/\" + id + \" */\";\n    var style = exports.createElement(\"style\");\n    style.appendChild(doc.createTextNode(cssText));\n    if (id)\n        style.id = id;\n    if (container == doc)\n        container = exports.getDocumentHead(doc);\n    container.insertBefore(style, container.firstChild);\n}\nexports.importCssString = importCssString;\nexports.importCssStylsheet = function (uri, doc) {\n    exports.buildDom([\"link\", { rel: \"stylesheet\", href: uri }], exports.getDocumentHead(doc));\n};\nexports.scrollbarWidth = function (doc) {\n    var inner = exports.createElement(\"ace_inner\");\n    inner.style.width = \"100%\";\n    inner.style.minWidth = \"0px\";\n    inner.style.height = \"200px\";\n    inner.style.display = \"block\";\n    var outer = exports.createElement(\"ace_outer\");\n    var style = outer.style;\n    style.position = \"absolute\";\n    style.left = \"-10000px\";\n    style.overflow = \"hidden\";\n    style.width = \"200px\";\n    style.minWidth = \"0px\";\n    style.height = \"150px\";\n    style.display = \"block\";\n    outer.appendChild(inner);\n    var body = (doc && doc.documentElement) || (document && document.documentElement);\n    if (!body)\n        return 0;\n    body.appendChild(outer);\n    var noScrollbar = inner.offsetWidth;\n    style.overflow = \"scroll\";\n    var withScrollbar = inner.offsetWidth;\n    if (noScrollbar === withScrollbar) {\n        withScrollbar = outer.clientWidth;\n    }\n    body.removeChild(outer);\n    return noScrollbar - withScrollbar;\n};\nexports.computedStyle = function (element, style) {\n    return window.getComputedStyle(element, \"\") || {};\n};\nexports.setStyle = function (styles, property, value) {\n    if (styles[property] !== value) {\n        styles[property] = value;\n    }\n};\nexports.HAS_CSS_ANIMATION = false;\nexports.HAS_CSS_TRANSFORMS = false;\nexports.HI_DPI = useragent.isWin\n    ? typeof window !== \"undefined\" && window.devicePixelRatio >= 1.5\n    : true;\nif (useragent.isChromeOS)\n    exports.HI_DPI = false;\nif (typeof document !== \"undefined\") {\n    var div = document.createElement(\"div\");\n    if (exports.HI_DPI && div.style.transform !== undefined)\n        exports.HAS_CSS_TRANSFORMS = true;\n    if (!useragent.isEdge && typeof div.style.animationName !== \"undefined\")\n        exports.HAS_CSS_ANIMATION = true;\n    div = null;\n}\nif (exports.HAS_CSS_TRANSFORMS) {\n    exports.translate = function (element, tx, ty) {\n        element.style.transform = \"translate(\" + Math.round(tx) + \"px, \" + Math.round(ty) + \"px)\";\n    };\n}\nelse {\n    exports.translate = function (element, tx, ty) {\n        element.style.top = Math.round(ty) + \"px\";\n        element.style.left = Math.round(tx) + \"px\";\n    };\n}\n\n});\n\nace.define(\"ace/lib/net\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(require, exports, module){/*\n * based on code from:\n *\n * @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.\n * Available via the MIT or new BSD license.\n * see: http://github.com/jrburke/requirejs for details\n */\n\"use strict\";\nvar dom = require(\"./dom\");\nexports.get = function (url, callback) {\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', url, true);\n    xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n            callback(xhr.responseText);\n        }\n    };\n    xhr.send(null);\n};\nexports.loadScript = function (path, callback) {\n    var head = dom.getDocumentHead();\n    var s = document.createElement('script');\n    s.src = path;\n    head.appendChild(s);\n    s.onload = s.onreadystatechange = function (_, isAbort) {\n        if (isAbort || !s.readyState || s.readyState == \"loaded\" || s.readyState == \"complete\") {\n            s = s.onload = s.onreadystatechange = null;\n            if (!isAbort)\n                callback();\n        }\n    };\n};\nexports.qualifyURL = function (url) {\n    var a = document.createElement('a');\n    a.href = url;\n    return a.href;\n};\n\n});\n\nace.define(\"ace/lib/event_emitter\",[\"require\",\"exports\",\"module\"], function(require, exports, module){\"use strict\";\nvar EventEmitter = {};\nvar stopPropagation = function () { this.propagationStopped = true; };\nvar preventDefault = function () { this.defaultPrevented = true; };\nEventEmitter._emit =\n    EventEmitter._dispatchEvent = function (eventName, e) {\n        this._eventRegistry || (this._eventRegistry = {});\n        this._defaultHandlers || (this._defaultHandlers = {});\n        var listeners = this._eventRegistry[eventName] || [];\n        var defaultHandler = this._defaultHandlers[eventName];\n        if (!listeners.length && !defaultHandler)\n            return;\n        if (typeof e != \"object\" || !e)\n            e = {};\n        if (!e.type)\n            e.type = eventName;\n        if (!e.stopPropagation)\n            e.stopPropagation = stopPropagation;\n        if (!e.preventDefault)\n            e.preventDefault = preventDefault;\n        listeners = listeners.slice();\n        for (var i = 0; i < listeners.length; i++) {\n            listeners[i](e, this);\n            if (e.propagationStopped)\n                break;\n        }\n        if (defaultHandler && !e.defaultPrevented)\n            return defaultHandler(e, this);\n    };\nEventEmitter._signal = function (eventName, e) {\n    var listeners = (this._eventRegistry || {})[eventName];\n    if (!listeners)\n        return;\n    listeners = listeners.slice();\n    for (var i = 0; i < listeners.length; i++)\n        listeners[i](e, this);\n};\nEventEmitter.once = function (eventName, callback) {\n    var _self = this;\n    this.on(eventName, function newCallback() {\n        _self.off(eventName, newCallback);\n        callback.apply(null, arguments);\n    });\n    if (!callback) {\n        return new Promise(function (resolve) {\n            callback = resolve;\n        });\n    }\n};\nEventEmitter.setDefaultHandler = function (eventName, callback) {\n    var handlers = this._defaultHandlers;\n    if (!handlers)\n        handlers = this._defaultHandlers = { _disabled_: {} };\n    if (handlers[eventName]) {\n        var old = handlers[eventName];\n        var disabled = handlers._disabled_[eventName];\n        if (!disabled)\n            handlers._disabled_[eventName] = disabled = [];\n        disabled.push(old);\n        var i = disabled.indexOf(callback);\n        if (i != -1)\n            disabled.splice(i, 1);\n    }\n    handlers[eventName] = callback;\n};\nEventEmitter.removeDefaultHandler = function (eventName, callback) {\n    var handlers = this._defaultHandlers;\n    if (!handlers)\n        return;\n    var disabled = handlers._disabled_[eventName];\n    if (handlers[eventName] == callback) {\n        if (disabled)\n            this.setDefaultHandler(eventName, disabled.pop());\n    }\n    else if (disabled) {\n        var i = disabled.indexOf(callback);\n        if (i != -1)\n            disabled.splice(i, 1);\n    }\n};\nEventEmitter.on =\n    EventEmitter.addEventListener = function (eventName, callback, capturing) {\n        this._eventRegistry = this._eventRegistry || {};\n        var listeners = this._eventRegistry[eventName];\n        if (!listeners)\n            listeners = this._eventRegistry[eventName] = [];\n        if (listeners.indexOf(callback) == -1)\n            listeners[capturing ? \"unshift\" : \"push\"](callback);\n        return callback;\n    };\nEventEmitter.off =\n    EventEmitter.removeListener =\n        EventEmitter.removeEventListener = function (eventName, callback) {\n            this._eventRegistry = this._eventRegistry || {};\n            var listeners = this._eventRegistry[eventName];\n            if (!listeners)\n                return;\n            var index = listeners.indexOf(callback);\n            if (index !== -1)\n                listeners.splice(index, 1);\n        };\nEventEmitter.removeAllListeners = function (eventName) {\n    if (!eventName)\n        this._eventRegistry = this._defaultHandlers = undefined;\n    if (this._eventRegistry)\n        this._eventRegistry[eventName] = undefined;\n    if (this._defaultHandlers)\n        this._defaultHandlers[eventName] = undefined;\n};\nexports.EventEmitter = EventEmitter;\n\n});\n\nace.define(\"ace/lib/app_config\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/event_emitter\"], function(require, exports, module){\"no use strict\";\nvar oop = require(\"./oop\");\nvar EventEmitter = require(\"./event_emitter\").EventEmitter;\nvar optionsProvider = {\n    setOptions: function (optList) {\n        Object.keys(optList).forEach(function (key) {\n            this.setOption(key, optList[key]);\n        }, this);\n    },\n    getOptions: function (optionNames) {\n        var result = {};\n        if (!optionNames) {\n            var options = this.$options;\n            optionNames = Object.keys(options).filter(function (key) {\n                return !options[key].hidden;\n            });\n        }\n        else if (!Array.isArray(optionNames)) {\n            result = optionNames;\n            optionNames = Object.keys(result);\n        }\n        optionNames.forEach(function (key) {\n            result[key] = this.getOption(key);\n        }, this);\n        return result;\n    },\n    setOption: function (name, value) {\n        if (this[\"$\" + name] === value)\n            return;\n        var opt = this.$options[name];\n        if (!opt) {\n            return warn('misspelled option \"' + name + '\"');\n        }\n        if (opt.forwardTo)\n            return this[opt.forwardTo] && this[opt.forwardTo].setOption(name, value);\n        if (!opt.handlesSet)\n            this[\"$\" + name] = value;\n        if (opt && opt.set)\n            opt.set.call(this, value);\n    },\n    getOption: function (name) {\n        var opt = this.$options[name];\n        if (!opt) {\n            return warn('misspelled option \"' + name + '\"');\n        }\n        if (opt.forwardTo)\n            return this[opt.forwardTo] && this[opt.forwardTo].getOption(name);\n        return opt && opt.get ? opt.get.call(this) : this[\"$\" + name];\n    }\n};\nfunction warn(message) {\n    if (typeof console != \"undefined\" && console.warn)\n        console.warn.apply(console, arguments);\n}\nfunction reportError(msg, data) {\n    var e = new Error(msg);\n    e.data = data;\n    if (typeof console == \"object\" && console.error)\n        console.error(e);\n    setTimeout(function () { throw e; });\n}\nvar AppConfig = function () {\n    this.$defaultOptions = {};\n};\n(function () {\n    oop.implement(this, EventEmitter);\n    this.defineOptions = function (obj, path, options) {\n        if (!obj.$options)\n            this.$defaultOptions[path] = obj.$options = {};\n        Object.keys(options).forEach(function (key) {\n            var opt = options[key];\n            if (typeof opt == \"string\")\n                opt = { forwardTo: opt };\n            opt.name || (opt.name = key);\n            obj.$options[opt.name] = opt;\n            if (\"initialValue\" in opt)\n                obj[\"$\" + opt.name] = opt.initialValue;\n        });\n        oop.implement(obj, optionsProvider);\n        return this;\n    };\n    this.resetOptions = function (obj) {\n        Object.keys(obj.$options).forEach(function (key) {\n            var opt = obj.$options[key];\n            if (\"value\" in opt)\n                obj.setOption(key, opt.value);\n        });\n    };\n    this.setDefaultValue = function (path, name, value) {\n        if (!path) {\n            for (path in this.$defaultOptions)\n                if (this.$defaultOptions[path][name])\n                    break;\n            if (!this.$defaultOptions[path][name])\n                return false;\n        }\n        var opts = this.$defaultOptions[path] || (this.$defaultOptions[path] = {});\n        if (opts[name]) {\n            if (opts.forwardTo)\n                this.setDefaultValue(opts.forwardTo, name, value);\n            else\n                opts[name].value = value;\n        }\n    };\n    this.setDefaultValues = function (path, optionHash) {\n        Object.keys(optionHash).forEach(function (key) {\n            this.setDefaultValue(path, key, optionHash[key]);\n        }, this);\n    };\n    this.warn = warn;\n    this.reportError = reportError;\n}).call(AppConfig.prototype);\nexports.AppConfig = AppConfig;\n\n});\n\nace.define(\"ace/theme/textmate.css\",[\"require\",\"exports\",\"module\"], function(require, exports, module){module.exports = \".ace-tm .ace_gutter {\\n  background: #f0f0f0;\\n  color: #333;\\n}\\n\\n.ace-tm .ace_print-margin {\\n  width: 1px;\\n  background: #e8e8e8;\\n}\\n\\n.ace-tm .ace_fold {\\n    background-color: #6B72E6;\\n}\\n\\n.ace-tm {\\n  background-color: #FFFFFF;\\n  color: black;\\n}\\n\\n.ace-tm .ace_cursor {\\n  color: black;\\n}\\n        \\n.ace-tm .ace_invisible {\\n  color: rgb(191, 191, 191);\\n}\\n\\n.ace-tm .ace_storage,\\n.ace-tm .ace_keyword {\\n  color: blue;\\n}\\n\\n.ace-tm .ace_constant {\\n  color: rgb(197, 6, 11);\\n}\\n\\n.ace-tm .ace_constant.ace_buildin {\\n  color: rgb(88, 72, 246);\\n}\\n\\n.ace-tm .ace_constant.ace_language {\\n  color: rgb(88, 92, 246);\\n}\\n\\n.ace-tm .ace_constant.ace_library {\\n  color: rgb(6, 150, 14);\\n}\\n\\n.ace-tm .ace_invalid {\\n  background-color: rgba(255, 0, 0, 0.1);\\n  color: red;\\n}\\n\\n.ace-tm .ace_support.ace_function {\\n  color: rgb(60, 76, 114);\\n}\\n\\n.ace-tm .ace_support.ace_constant {\\n  color: rgb(6, 150, 14);\\n}\\n\\n.ace-tm .ace_support.ace_type,\\n.ace-tm .ace_support.ace_class {\\n  color: rgb(109, 121, 222);\\n}\\n\\n.ace-tm .ace_keyword.ace_operator {\\n  color: rgb(104, 118, 135);\\n}\\n\\n.ace-tm .ace_string {\\n  color: rgb(3, 106, 7);\\n}\\n\\n.ace-tm .ace_comment {\\n  color: rgb(76, 136, 107);\\n}\\n\\n.ace-tm .ace_comment.ace_doc {\\n  color: rgb(0, 102, 255);\\n}\\n\\n.ace-tm .ace_comment.ace_doc.ace_tag {\\n  color: rgb(128, 159, 191);\\n}\\n\\n.ace-tm .ace_constant.ace_numeric {\\n  color: rgb(0, 0, 205);\\n}\\n\\n.ace-tm .ace_variable {\\n  color: rgb(49, 132, 149);\\n}\\n\\n.ace-tm .ace_xml-pe {\\n  color: rgb(104, 104, 91);\\n}\\n\\n.ace-tm .ace_entity.ace_name.ace_function {\\n  color: #0000A2;\\n}\\n\\n\\n.ace-tm .ace_heading {\\n  color: rgb(12, 7, 255);\\n}\\n\\n.ace-tm .ace_list {\\n  color:rgb(185, 6, 144);\\n}\\n\\n.ace-tm .ace_meta.ace_tag {\\n  color:rgb(0, 22, 142);\\n}\\n\\n.ace-tm .ace_string.ace_regex {\\n  color: rgb(255, 0, 0)\\n}\\n\\n.ace-tm .ace_marker-layer .ace_selection {\\n  background: rgb(181, 213, 255);\\n}\\n.ace-tm.ace_multiselect .ace_selection.ace_start {\\n  box-shadow: 0 0 3px 0px white;\\n}\\n.ace-tm .ace_marker-layer .ace_step {\\n  background: rgb(252, 255, 0);\\n}\\n\\n.ace-tm .ace_marker-layer .ace_stack {\\n  background: rgb(164, 229, 101);\\n}\\n\\n.ace-tm .ace_marker-layer .ace_bracket {\\n  margin: -1px 0 0 -1px;\\n  border: 1px solid rgb(192, 192, 192);\\n}\\n\\n.ace-tm .ace_marker-layer .ace_active-line {\\n  background: rgba(0, 0, 0, 0.07);\\n}\\n\\n.ace-tm .ace_gutter-active-line {\\n    background-color : #dcdcdc;\\n}\\n\\n.ace-tm .ace_marker-layer .ace_selected-word {\\n  background: rgb(250, 250, 255);\\n  border: 1px solid rgb(200, 200, 250);\\n}\\n\\n.ace-tm .ace_indent-guide {\\n  background: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==\\\") right repeat-y;\\n}\\n\\n.ace-tm .ace_indent-guide-active {\\n  background: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC\\\") right repeat-y;\\n}\\n\";\n\n});\n\nace.define(\"ace/theme/textmate\",[\"require\",\"exports\",\"module\",\"ace/theme/textmate.css\",\"ace/lib/dom\"], function(require, exports, module){\"use strict\";\nexports.isDark = false;\nexports.cssClass = \"ace-tm\";\nexports.cssText = require(\"./textmate.css\");\nexports.$id = \"ace/theme/textmate\";\nvar dom = require(\"../lib/dom\");\ndom.importCssString(exports.cssText, exports.cssClass, false);\n\n});\n\nace.define(\"ace/config\",[\"require\",\"exports\",\"module\",\"ace/lib/lang\",\"ace/lib/oop\",\"ace/lib/net\",\"ace/lib/dom\",\"ace/lib/app_config\",\"ace/theme/textmate\"], function(require, exports, module){\"no use strict\";\nvar lang = require(\"./lib/lang\");\nvar oop = require(\"./lib/oop\");\nvar net = require(\"./lib/net\");\nvar dom = require(\"./lib/dom\");\nvar AppConfig = require(\"./lib/app_config\").AppConfig;\nmodule.exports = exports = new AppConfig();\nvar options = {\n    packaged: false,\n    workerPath: null,\n    modePath: null,\n    themePath: null,\n    basePath: \"\",\n    suffix: \".js\",\n    $moduleUrls: {},\n    loadWorkerFromBlob: true,\n    sharedPopups: false,\n    useStrictCSP: null\n};\nexports.get = function (key) {\n    if (!options.hasOwnProperty(key))\n        throw new Error(\"Unknown config key: \" + key);\n    return options[key];\n};\nexports.set = function (key, value) {\n    if (options.hasOwnProperty(key))\n        options[key] = value;\n    else if (this.setDefaultValue(\"\", key, value) == false)\n        throw new Error(\"Unknown config key: \" + key);\n    if (key == \"useStrictCSP\")\n        dom.useStrictCSP(value);\n};\nexports.all = function () {\n    return lang.copyObject(options);\n};\nexports.$modes = {};\nexports.moduleUrl = function (name, component) {\n    if (options.$moduleUrls[name])\n        return options.$moduleUrls[name];\n    var parts = name.split(\"/\");\n    component = component || parts[parts.length - 2] || \"\";\n    var sep = component == \"snippets\" ? \"/\" : \"-\";\n    var base = parts[parts.length - 1];\n    if (component == \"worker\" && sep == \"-\") {\n        var re = new RegExp(\"^\" + component + \"[\\\\-_]|[\\\\-_]\" + component + \"$\", \"g\");\n        base = base.replace(re, \"\");\n    }\n    if ((!base || base == component) && parts.length > 1)\n        base = parts[parts.length - 2];\n    var path = options[component + \"Path\"];\n    if (path == null) {\n        path = options.basePath;\n    }\n    else if (sep == \"/\") {\n        component = sep = \"\";\n    }\n    if (path && path.slice(-1) != \"/\")\n        path += \"/\";\n    return path + component + sep + base + this.get(\"suffix\");\n};\nexports.setModuleUrl = function (name, subst) {\n    return options.$moduleUrls[name] = subst;\n};\nvar loader = function (moduleName, cb) {\n    if (moduleName == \"ace/theme/textmate\")\n        return cb(null, require(\"./theme/textmate\"));\n    return console.error(\"loader is not configured\");\n};\nexports.setLoader = function (cb) {\n    loader = cb;\n};\nexports.$loading = {};\nexports.loadModule = function (moduleName, onLoad) {\n    var module, moduleType;\n    if (Array.isArray(moduleName)) {\n        moduleType = moduleName[0];\n        moduleName = moduleName[1];\n    }\n    try {\n        module = require(moduleName);\n    }\n    catch (e) { }\n    if (module && !exports.$loading[moduleName])\n        return onLoad && onLoad(module);\n    if (!exports.$loading[moduleName])\n        exports.$loading[moduleName] = [];\n    exports.$loading[moduleName].push(onLoad);\n    if (exports.$loading[moduleName].length > 1)\n        return;\n    var afterLoad = function () {\n        loader(moduleName, function (err, module) {\n            exports._emit(\"load.module\", { name: moduleName, module: module });\n            var listeners = exports.$loading[moduleName];\n            exports.$loading[moduleName] = null;\n            listeners.forEach(function (onLoad) {\n                onLoad && onLoad(module);\n            });\n        });\n    };\n    if (!exports.get(\"packaged\"))\n        return afterLoad();\n    net.loadScript(exports.moduleUrl(moduleName, moduleType), afterLoad);\n    reportErrorIfPathIsNotConfigured();\n};\nvar reportErrorIfPathIsNotConfigured = function () {\n    if (!options.basePath && !options.workerPath\n        && !options.modePath && !options.themePath\n        && !Object.keys(options.$moduleUrls).length) {\n        console.error(\"Unable to infer path to ace from script src,\", \"use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes\", \"or with webpack use ace/webpack-resolver\");\n        reportErrorIfPathIsNotConfigured = function () { };\n    }\n};\nexports.version = \"1.14.0\";\n\n});\n\nace.define(\"ace/loader_build\",[\"require\",\"exports\",\"module\",\"ace/lib/fixoldbrowsers\",\"ace/config\"], function(require, exports, module) {\n\"use strict\";\n\nrequire(\"./lib/fixoldbrowsers\");\nvar config = require(\"./config\");\nconfig.setLoader(function(moduleName, cb) {\n    require([moduleName], function(module) {\n        cb(null, module);\n    });\n});\n\nvar global = (function() {\n    return this || typeof window != \"undefined\" && window;\n})();\n\nmodule.exports = function(ace) {\n    config.init = init;\n    ace.require = require;\n\n    if (true)\n        ace.define = __webpack_require__.amdD;\n};\ninit(true);function init(packaged) {\n\n    if (!global || !global.document)\n        return;\n    \n    config.set(\"packaged\", packaged || require.packaged || module.packaged || (global.define && __webpack_require__.amdD.packaged));\n\n    var scriptOptions = {};\n    var scriptUrl = \"\";\n    var currentScript = (document.currentScript || document._currentScript ); // native or polyfill\n    var currentDocument = currentScript && currentScript.ownerDocument || document;\n    \n    var scripts = currentDocument.getElementsByTagName(\"script\");\n    for (var i=0; i<scripts.length; i++) {\n        var script = scripts[i];\n\n        var src = script.src || script.getAttribute(\"src\");\n        if (!src)\n            continue;\n\n        var attributes = script.attributes;\n        for (var j=0, l=attributes.length; j < l; j++) {\n            var attr = attributes[j];\n            if (attr.name.indexOf(\"data-ace-\") === 0) {\n                scriptOptions[deHyphenate(attr.name.replace(/^data-ace-/, \"\"))] = attr.value;\n            }\n        }\n\n        var m = src.match(/^(.*)\\/ace(\\-\\w+)?\\.js(\\?|$)/);\n        if (m)\n            scriptUrl = m[1];\n    }\n\n    if (scriptUrl) {\n        scriptOptions.base = scriptOptions.base || scriptUrl;\n        scriptOptions.packaged = true;\n    }\n\n    scriptOptions.basePath = scriptOptions.base;\n    scriptOptions.workerPath = scriptOptions.workerPath || scriptOptions.base;\n    scriptOptions.modePath = scriptOptions.modePath || scriptOptions.base;\n    scriptOptions.themePath = scriptOptions.themePath || scriptOptions.base;\n    delete scriptOptions.base;\n\n    for (var key in scriptOptions)\n        if (typeof scriptOptions[key] !== \"undefined\")\n            config.set(key, scriptOptions[key]);\n}\n\nfunction deHyphenate(str) {\n    return str.replace(/-(.)/g, function(m, m1) { return m1.toUpperCase(); });\n}\n});\n\nace.define(\"ace/lib/keys\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\"], function(require, exports, module){/*! @license\n==========================================================================\nSproutCore -- JavaScript Application Framework\ncopyright 2006-2009, Sprout Systems Inc., Apple Inc. and contributors.\n\nPermission is hereby granted, free of charge, to any person obtaining a\ncopy of this software and associated documentation files (the \"Software\"),\nto deal in the Software without restriction, including without limitation\nthe rights to use, copy, modify, merge, publish, distribute, sublicense,\nand/or sell copies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\nDEALINGS IN THE SOFTWARE.\n\nSproutCore and the SproutCore logo are trademarks of Sprout Systems, Inc.\n\nFor more information about SproutCore, visit http://www.sproutcore.com\n\n\n==========================================================================\n@license */\n\"use strict\";\nvar oop = require(\"./oop\");\nvar Keys = (function () {\n    var ret = {\n        MODIFIER_KEYS: {\n            16: 'Shift', 17: 'Ctrl', 18: 'Alt', 224: 'Meta',\n            91: 'MetaLeft', 92: 'MetaRight', 93: 'ContextMenu'\n        },\n        KEY_MODS: {\n            \"ctrl\": 1, \"alt\": 2, \"option\": 2, \"shift\": 4,\n            \"super\": 8, \"meta\": 8, \"command\": 8, \"cmd\": 8,\n            \"control\": 1\n        },\n        FUNCTION_KEYS: {\n            8: \"Backspace\",\n            9: \"Tab\",\n            13: \"Return\",\n            19: \"Pause\",\n            27: \"Esc\",\n            32: \"Space\",\n            33: \"PageUp\",\n            34: \"PageDown\",\n            35: \"End\",\n            36: \"Home\",\n            37: \"Left\",\n            38: \"Up\",\n            39: \"Right\",\n            40: \"Down\",\n            44: \"Print\",\n            45: \"Insert\",\n            46: \"Delete\",\n            96: \"Numpad0\",\n            97: \"Numpad1\",\n            98: \"Numpad2\",\n            99: \"Numpad3\",\n            100: \"Numpad4\",\n            101: \"Numpad5\",\n            102: \"Numpad6\",\n            103: \"Numpad7\",\n            104: \"Numpad8\",\n            105: \"Numpad9\",\n            '-13': \"NumpadEnter\",\n            112: \"F1\",\n            113: \"F2\",\n            114: \"F3\",\n            115: \"F4\",\n            116: \"F5\",\n            117: \"F6\",\n            118: \"F7\",\n            119: \"F8\",\n            120: \"F9\",\n            121: \"F10\",\n            122: \"F11\",\n            123: \"F12\",\n            144: \"Numlock\",\n            145: \"Scrolllock\"\n        },\n        PRINTABLE_KEYS: {\n            32: ' ', 48: '0', 49: '1', 50: '2', 51: '3', 52: '4', 53: '5',\n            54: '6', 55: '7', 56: '8', 57: '9', 59: ';', 61: '=', 65: 'a',\n            66: 'b', 67: 'c', 68: 'd', 69: 'e', 70: 'f', 71: 'g', 72: 'h',\n            73: 'i', 74: 'j', 75: 'k', 76: 'l', 77: 'm', 78: 'n', 79: 'o',\n            80: 'p', 81: 'q', 82: 'r', 83: 's', 84: 't', 85: 'u', 86: 'v',\n            87: 'w', 88: 'x', 89: 'y', 90: 'z', 107: '+', 109: '-', 110: '.',\n            186: ';', 187: '=', 188: ',', 189: '-', 190: '.', 191: '/', 192: '`',\n            219: '[', 220: '\\\\', 221: ']', 222: \"'\", 111: '/', 106: '*'\n        }\n    };\n    ret.PRINTABLE_KEYS[173] = '-';\n    var name, i;\n    for (i in ret.FUNCTION_KEYS) {\n        name = ret.FUNCTION_KEYS[i].toLowerCase();\n        ret[name] = parseInt(i, 10);\n    }\n    for (i in ret.PRINTABLE_KEYS) {\n        name = ret.PRINTABLE_KEYS[i].toLowerCase();\n        ret[name] = parseInt(i, 10);\n    }\n    oop.mixin(ret, ret.MODIFIER_KEYS);\n    oop.mixin(ret, ret.PRINTABLE_KEYS);\n    oop.mixin(ret, ret.FUNCTION_KEYS);\n    ret.enter = ret[\"return\"];\n    ret.escape = ret.esc;\n    ret.del = ret[\"delete\"];\n    (function () {\n        var mods = [\"cmd\", \"ctrl\", \"alt\", \"shift\"];\n        for (var i = Math.pow(2, mods.length); i--;) {\n            ret.KEY_MODS[i] = mods.filter(function (x) {\n                return i & ret.KEY_MODS[x];\n            }).join(\"-\") + \"-\";\n        }\n    })();\n    ret.KEY_MODS[0] = \"\";\n    ret.KEY_MODS[-1] = \"input-\";\n    return ret;\n})();\noop.mixin(exports, Keys);\nexports.keyCodeToString = function (keyCode) {\n    var keyString = Keys[keyCode];\n    if (typeof keyString != \"string\")\n        keyString = String.fromCharCode(keyCode);\n    return keyString.toLowerCase();\n};\n\n});\n\nace.define(\"ace/lib/event\",[\"require\",\"exports\",\"module\",\"ace/lib/keys\",\"ace/lib/useragent\"], function(require, exports, module){\"use strict\";\nvar keys = require(\"./keys\");\nvar useragent = require(\"./useragent\");\nvar pressedKeys = null;\nvar ts = 0;\nvar activeListenerOptions;\nfunction detectListenerOptionsSupport() {\n    activeListenerOptions = false;\n    try {\n        document.createComment(\"\").addEventListener(\"test\", function () { }, {\n            get passive() {\n                activeListenerOptions = { passive: false };\n            }\n        });\n    }\n    catch (e) { }\n}\nfunction getListenerOptions() {\n    if (activeListenerOptions == undefined)\n        detectListenerOptionsSupport();\n    return activeListenerOptions;\n}\nfunction EventListener(elem, type, callback) {\n    this.elem = elem;\n    this.type = type;\n    this.callback = callback;\n}\nEventListener.prototype.destroy = function () {\n    removeListener(this.elem, this.type, this.callback);\n    this.elem = this.type = this.callback = undefined;\n};\nvar addListener = exports.addListener = function (elem, type, callback, destroyer) {\n    elem.addEventListener(type, callback, getListenerOptions());\n    if (destroyer)\n        destroyer.$toDestroy.push(new EventListener(elem, type, callback));\n};\nvar removeListener = exports.removeListener = function (elem, type, callback) {\n    elem.removeEventListener(type, callback, getListenerOptions());\n};\nexports.stopEvent = function (e) {\n    exports.stopPropagation(e);\n    exports.preventDefault(e);\n    return false;\n};\nexports.stopPropagation = function (e) {\n    if (e.stopPropagation)\n        e.stopPropagation();\n};\nexports.preventDefault = function (e) {\n    if (e.preventDefault)\n        e.preventDefault();\n};\nexports.getButton = function (e) {\n    if (e.type == \"dblclick\")\n        return 0;\n    if (e.type == \"contextmenu\" || (useragent.isMac && (e.ctrlKey && !e.altKey && !e.shiftKey)))\n        return 2;\n    return e.button;\n};\nexports.capture = function (el, eventHandler, releaseCaptureHandler) {\n    var ownerDocument = el && el.ownerDocument || document;\n    function onMouseUp(e) {\n        eventHandler && eventHandler(e);\n        releaseCaptureHandler && releaseCaptureHandler(e);\n        removeListener(ownerDocument, \"mousemove\", eventHandler);\n        removeListener(ownerDocument, \"mouseup\", onMouseUp);\n        removeListener(ownerDocument, \"dragstart\", onMouseUp);\n    }\n    addListener(ownerDocument, \"mousemove\", eventHandler);\n    addListener(ownerDocument, \"mouseup\", onMouseUp);\n    addListener(ownerDocument, \"dragstart\", onMouseUp);\n    return onMouseUp;\n};\nexports.addMouseWheelListener = function (el, callback, destroyer) {\n    addListener(el, \"wheel\", function (e) {\n        var factor = 0.15;\n        var deltaX = e.deltaX || 0;\n        var deltaY = e.deltaY || 0;\n        switch (e.deltaMode) {\n            case e.DOM_DELTA_PIXEL:\n                e.wheelX = deltaX * factor;\n                e.wheelY = deltaY * factor;\n                break;\n            case e.DOM_DELTA_LINE:\n                var linePixels = 15;\n                e.wheelX = deltaX * linePixels;\n                e.wheelY = deltaY * linePixels;\n                break;\n            case e.DOM_DELTA_PAGE:\n                var pagePixels = 150;\n                e.wheelX = deltaX * pagePixels;\n                e.wheelY = deltaY * pagePixels;\n                break;\n        }\n        callback(e);\n    }, destroyer);\n};\nexports.addMultiMouseDownListener = function (elements, timeouts, eventHandler, callbackName, destroyer) {\n    var clicks = 0;\n    var startX, startY, timer;\n    var eventNames = {\n        2: \"dblclick\",\n        3: \"tripleclick\",\n        4: \"quadclick\"\n    };\n    function onMousedown(e) {\n        if (exports.getButton(e) !== 0) {\n            clicks = 0;\n        }\n        else if (e.detail > 1) {\n            clicks++;\n            if (clicks > 4)\n                clicks = 1;\n        }\n        else {\n            clicks = 1;\n        }\n        if (useragent.isIE) {\n            var isNewClick = Math.abs(e.clientX - startX) > 5 || Math.abs(e.clientY - startY) > 5;\n            if (!timer || isNewClick)\n                clicks = 1;\n            if (timer)\n                clearTimeout(timer);\n            timer = setTimeout(function () { timer = null; }, timeouts[clicks - 1] || 600);\n            if (clicks == 1) {\n                startX = e.clientX;\n                startY = e.clientY;\n            }\n        }\n        e._clicks = clicks;\n        eventHandler[callbackName](\"mousedown\", e);\n        if (clicks > 4)\n            clicks = 0;\n        else if (clicks > 1)\n            return eventHandler[callbackName](eventNames[clicks], e);\n    }\n    if (!Array.isArray(elements))\n        elements = [elements];\n    elements.forEach(function (el) {\n        addListener(el, \"mousedown\", onMousedown, destroyer);\n    });\n};\nvar getModifierHash = function (e) {\n    return 0 | (e.ctrlKey ? 1 : 0) | (e.altKey ? 2 : 0) | (e.shiftKey ? 4 : 0) | (e.metaKey ? 8 : 0);\n};\nexports.getModifierString = function (e) {\n    return keys.KEY_MODS[getModifierHash(e)];\n};\nfunction normalizeCommandKeys(callback, e, keyCode) {\n    var hashId = getModifierHash(e);\n    if (!useragent.isMac && pressedKeys) {\n        if (e.getModifierState && (e.getModifierState(\"OS\") || e.getModifierState(\"Win\")))\n            hashId |= 8;\n        if (pressedKeys.altGr) {\n            if ((3 & hashId) != 3)\n                pressedKeys.altGr = 0;\n            else\n                return;\n        }\n        if (keyCode === 18 || keyCode === 17) {\n            var location = \"location\" in e ? e.location : e.keyLocation;\n            if (keyCode === 17 && location === 1) {\n                if (pressedKeys[keyCode] == 1)\n                    ts = e.timeStamp;\n            }\n            else if (keyCode === 18 && hashId === 3 && location === 2) {\n                var dt = e.timeStamp - ts;\n                if (dt < 50)\n                    pressedKeys.altGr = true;\n            }\n        }\n    }\n    if (keyCode in keys.MODIFIER_KEYS) {\n        keyCode = -1;\n    }\n    if (!hashId && keyCode === 13) {\n        var location = \"location\" in e ? e.location : e.keyLocation;\n        if (location === 3) {\n            callback(e, hashId, -keyCode);\n            if (e.defaultPrevented)\n                return;\n        }\n    }\n    if (useragent.isChromeOS && hashId & 8) {\n        callback(e, hashId, keyCode);\n        if (e.defaultPrevented)\n            return;\n        else\n            hashId &= ~8;\n    }\n    if (!hashId && !(keyCode in keys.FUNCTION_KEYS) && !(keyCode in keys.PRINTABLE_KEYS)) {\n        return false;\n    }\n    return callback(e, hashId, keyCode);\n}\nexports.addCommandKeyListener = function (el, callback, destroyer) {\n    if (useragent.isOldGecko || (useragent.isOpera && !(\"KeyboardEvent\" in window))) {\n        var lastKeyDownKeyCode = null;\n        addListener(el, \"keydown\", function (e) {\n            lastKeyDownKeyCode = e.keyCode;\n        }, destroyer);\n        addListener(el, \"keypress\", function (e) {\n            return normalizeCommandKeys(callback, e, lastKeyDownKeyCode);\n        }, destroyer);\n    }\n    else {\n        var lastDefaultPrevented = null;\n        addListener(el, \"keydown\", function (e) {\n            pressedKeys[e.keyCode] = (pressedKeys[e.keyCode] || 0) + 1;\n            var result = normalizeCommandKeys(callback, e, e.keyCode);\n            lastDefaultPrevented = e.defaultPrevented;\n            return result;\n        }, destroyer);\n        addListener(el, \"keypress\", function (e) {\n            if (lastDefaultPrevented && (e.ctrlKey || e.altKey || e.shiftKey || e.metaKey)) {\n                exports.stopEvent(e);\n                lastDefaultPrevented = null;\n            }\n        }, destroyer);\n        addListener(el, \"keyup\", function (e) {\n            pressedKeys[e.keyCode] = null;\n        }, destroyer);\n        if (!pressedKeys) {\n            resetPressedKeys();\n            addListener(window, \"focus\", resetPressedKeys);\n        }\n    }\n};\nfunction resetPressedKeys() {\n    pressedKeys = Object.create(null);\n}\nif (typeof window == \"object\" && window.postMessage && !useragent.isOldIE) {\n    var postMessageId = 1;\n    exports.nextTick = function (callback, win) {\n        win = win || window;\n        var messageName = \"zero-timeout-message-\" + (postMessageId++);\n        var listener = function (e) {\n            if (e.data == messageName) {\n                exports.stopPropagation(e);\n                removeListener(win, \"message\", listener);\n                callback();\n            }\n        };\n        addListener(win, \"message\", listener);\n        win.postMessage(messageName, \"*\");\n    };\n}\nexports.$idleBlocked = false;\nexports.onIdle = function (cb, timeout) {\n    return setTimeout(function handler() {\n        if (!exports.$idleBlocked) {\n            cb();\n        }\n        else {\n            setTimeout(handler, 100);\n        }\n    }, timeout);\n};\nexports.$idleBlockId = null;\nexports.blockIdle = function (delay) {\n    if (exports.$idleBlockId)\n        clearTimeout(exports.$idleBlockId);\n    exports.$idleBlocked = true;\n    exports.$idleBlockId = setTimeout(function () {\n        exports.$idleBlocked = false;\n    }, delay || 100);\n};\nexports.nextFrame = typeof window == \"object\" && (window.requestAnimationFrame\n    || window.mozRequestAnimationFrame\n    || window.webkitRequestAnimationFrame\n    || window.msRequestAnimationFrame\n    || window.oRequestAnimationFrame);\nif (exports.nextFrame)\n    exports.nextFrame = exports.nextFrame.bind(window);\nelse\n    exports.nextFrame = function (callback) {\n        setTimeout(callback, 17);\n    };\n\n});\n\nace.define(\"ace/range\",[\"require\",\"exports\",\"module\"], function(require, exports, module){\"use strict\";\nvar comparePoints = function (p1, p2) {\n    return p1.row - p2.row || p1.column - p2.column;\n};\nvar Range = function (startRow, startColumn, endRow, endColumn) {\n    this.start = {\n        row: startRow,\n        column: startColumn\n    };\n    this.end = {\n        row: endRow,\n        column: endColumn\n    };\n};\n(function () {\n    this.isEqual = function (range) {\n        return this.start.row === range.start.row &&\n            this.end.row === range.end.row &&\n            this.start.column === range.start.column &&\n            this.end.column === range.end.column;\n    };\n    this.toString = function () {\n        return (\"Range: [\" + this.start.row + \"/\" + this.start.column +\n            \"] -> [\" + this.end.row + \"/\" + this.end.column + \"]\");\n    };\n    this.contains = function (row, column) {\n        return this.compare(row, column) == 0;\n    };\n    this.compareRange = function (range) {\n        var cmp, end = range.end, start = range.start;\n        cmp = this.compare(end.row, end.column);\n        if (cmp == 1) {\n            cmp = this.compare(start.row, start.column);\n            if (cmp == 1) {\n                return 2;\n            }\n            else if (cmp == 0) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        }\n        else if (cmp == -1) {\n            return -2;\n        }\n        else {\n            cmp = this.compare(start.row, start.column);\n            if (cmp == -1) {\n                return -1;\n            }\n            else if (cmp == 1) {\n                return 42;\n            }\n            else {\n                return 0;\n            }\n        }\n    };\n    this.comparePoint = function (p) {\n        return this.compare(p.row, p.column);\n    };\n    this.containsRange = function (range) {\n        return this.comparePoint(range.start) == 0 && this.comparePoint(range.end) == 0;\n    };\n    this.intersects = function (range) {\n        var cmp = this.compareRange(range);\n        return (cmp == -1 || cmp == 0 || cmp == 1);\n    };\n    this.isEnd = function (row, column) {\n        return this.end.row == row && this.end.column == column;\n    };\n    this.isStart = function (row, column) {\n        return this.start.row == row && this.start.column == column;\n    };\n    this.setStart = function (row, column) {\n        if (typeof row == \"object\") {\n            this.start.column = row.column;\n            this.start.row = row.row;\n        }\n        else {\n            this.start.row = row;\n            this.start.column = column;\n        }\n    };\n    this.setEnd = function (row, column) {\n        if (typeof row == \"object\") {\n            this.end.column = row.column;\n            this.end.row = row.row;\n        }\n        else {\n            this.end.row = row;\n            this.end.column = column;\n        }\n    };\n    this.inside = function (row, column) {\n        if (this.compare(row, column) == 0) {\n            if (this.isEnd(row, column) || this.isStart(row, column)) {\n                return false;\n            }\n            else {\n                return true;\n            }\n        }\n        return false;\n    };\n    this.insideStart = function (row, column) {\n        if (this.compare(row, column) == 0) {\n            if (this.isEnd(row, column)) {\n                return false;\n            }\n            else {\n                return true;\n            }\n        }\n        return false;\n    };\n    this.insideEnd = function (row, column) {\n        if (this.compare(row, column) == 0) {\n            if (this.isStart(row, column)) {\n                return false;\n            }\n            else {\n                return true;\n            }\n        }\n        return false;\n    };\n    this.compare = function (row, column) {\n        if (!this.isMultiLine()) {\n            if (row === this.start.row) {\n                return column < this.start.column ? -1 : (column > this.end.column ? 1 : 0);\n            }\n        }\n        if (row < this.start.row)\n            return -1;\n        if (row > this.end.row)\n            return 1;\n        if (this.start.row === row)\n            return column >= this.start.column ? 0 : -1;\n        if (this.end.row === row)\n            return column <= this.end.column ? 0 : 1;\n        return 0;\n    };\n    this.compareStart = function (row, column) {\n        if (this.start.row == row && this.start.column == column) {\n            return -1;\n        }\n        else {\n            return this.compare(row, column);\n        }\n    };\n    this.compareEnd = function (row, column) {\n        if (this.end.row == row && this.end.column == column) {\n            return 1;\n        }\n        else {\n            return this.compare(row, column);\n        }\n    };\n    this.compareInside = function (row, column) {\n        if (this.end.row == row && this.end.column == column) {\n            return 1;\n        }\n        else if (this.start.row == row && this.start.column == column) {\n            return -1;\n        }\n        else {\n            return this.compare(row, column);\n        }\n    };\n    this.clipRows = function (firstRow, lastRow) {\n        if (this.end.row > lastRow)\n            var end = { row: lastRow + 1, column: 0 };\n        else if (this.end.row < firstRow)\n            var end = { row: firstRow, column: 0 };\n        if (this.start.row > lastRow)\n            var start = { row: lastRow + 1, column: 0 };\n        else if (this.start.row < firstRow)\n            var start = { row: firstRow, column: 0 };\n        return Range.fromPoints(start || this.start, end || this.end);\n    };\n    this.extend = function (row, column) {\n        var cmp = this.compare(row, column);\n        if (cmp == 0)\n            return this;\n        else if (cmp == -1)\n            var start = { row: row, column: column };\n        else\n            var end = { row: row, column: column };\n        return Range.fromPoints(start || this.start, end || this.end);\n    };\n    this.isEmpty = function () {\n        return (this.start.row === this.end.row && this.start.column === this.end.column);\n    };\n    this.isMultiLine = function () {\n        return (this.start.row !== this.end.row);\n    };\n    this.clone = function () {\n        return Range.fromPoints(this.start, this.end);\n    };\n    this.collapseRows = function () {\n        if (this.end.column == 0)\n            return new Range(this.start.row, 0, Math.max(this.start.row, this.end.row - 1), 0);\n        else\n            return new Range(this.start.row, 0, this.end.row, 0);\n    };\n    this.toScreenRange = function (session) {\n        var screenPosStart = session.documentToScreenPosition(this.start);\n        var screenPosEnd = session.documentToScreenPosition(this.end);\n        return new Range(screenPosStart.row, screenPosStart.column, screenPosEnd.row, screenPosEnd.column);\n    };\n    this.moveBy = function (row, column) {\n        this.start.row += row;\n        this.start.column += column;\n        this.end.row += row;\n        this.end.column += column;\n    };\n}).call(Range.prototype);\nRange.fromPoints = function (start, end) {\n    return new Range(start.row, start.column, end.row, end.column);\n};\nRange.comparePoints = comparePoints;\nRange.comparePoints = function (p1, p2) {\n    return p1.row - p2.row || p1.column - p2.column;\n};\nexports.Range = Range;\n\n});\n\nace.define(\"ace/clipboard\",[\"require\",\"exports\",\"module\"], function(require, exports, module){\"use strict\";\nvar $cancelT;\nmodule.exports = {\n    lineMode: false,\n    pasteCancelled: function () {\n        if ($cancelT && $cancelT > Date.now() - 50)\n            return true;\n        return $cancelT = false;\n    },\n    cancel: function () {\n        $cancelT = Date.now();\n    }\n};\n\n});\n\nace.define(\"ace/keyboard/textinput\",[\"require\",\"exports\",\"module\",\"ace/lib/event\",\"ace/lib/useragent\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/clipboard\",\"ace/lib/keys\"], function(require, exports, module){\"use strict\";\nvar event = require(\"../lib/event\");\nvar useragent = require(\"../lib/useragent\");\nvar dom = require(\"../lib/dom\");\nvar lang = require(\"../lib/lang\");\nvar clipboard = require(\"../clipboard\");\nvar BROKEN_SETDATA = useragent.isChrome < 18;\nvar USE_IE_MIME_TYPE = useragent.isIE;\nvar HAS_FOCUS_ARGS = useragent.isChrome > 63;\nvar MAX_LINE_LENGTH = 400;\nvar KEYS = require(\"../lib/keys\");\nvar MODS = KEYS.KEY_MODS;\nvar isIOS = useragent.isIOS;\nvar valueResetRegex = isIOS ? /\\s/ : /\\n/;\nvar isMobile = useragent.isMobile;\nvar TextInput = function (parentNode, host) {\n    var text = dom.createElement(\"textarea\");\n    text.className = \"ace_text-input\";\n    text.setAttribute(\"wrap\", \"off\");\n    text.setAttribute(\"autocorrect\", \"off\");\n    text.setAttribute(\"autocapitalize\", \"off\");\n    text.setAttribute(\"spellcheck\", false);\n    text.style.opacity = \"0\";\n    parentNode.insertBefore(text, parentNode.firstChild);\n    var copied = false;\n    var pasted = false;\n    var inComposition = false;\n    var sendingText = false;\n    var tempStyle = '';\n    if (!isMobile)\n        text.style.fontSize = \"1px\";\n    var commandMode = false;\n    var ignoreFocusEvents = false;\n    var lastValue = \"\";\n    var lastSelectionStart = 0;\n    var lastSelectionEnd = 0;\n    var lastRestoreEnd = 0;\n    try {\n        var isFocused = document.activeElement === text;\n    }\n    catch (e) { }\n    this.setAriaOptions = function (options) {\n        if (options.activeDescendant) {\n            text.setAttribute(\"aria-haspopup\", \"true\");\n            text.setAttribute(\"aria-autocomplete\", \"list\");\n            text.setAttribute(\"aria-activedescendant\", options.activeDescendant);\n        }\n        else {\n            text.setAttribute(\"aria-haspopup\", \"false\");\n            text.setAttribute(\"aria-autocomplete\", \"both\");\n            text.removeAttribute(\"aria-activedescendant\");\n        }\n        if (options.role) {\n            text.setAttribute(\"role\", options.role);\n        }\n    };\n    this.setAriaOptions({ role: \"textbox\" });\n    event.addListener(text, \"blur\", function (e) {\n        if (ignoreFocusEvents)\n            return;\n        host.onBlur(e);\n        isFocused = false;\n    }, host);\n    event.addListener(text, \"focus\", function (e) {\n        if (ignoreFocusEvents)\n            return;\n        isFocused = true;\n        if (useragent.isEdge) {\n            try {\n                if (!document.hasFocus())\n                    return;\n            }\n            catch (e) { }\n        }\n        host.onFocus(e);\n        if (useragent.isEdge)\n            setTimeout(resetSelection);\n        else\n            resetSelection();\n    }, host);\n    this.$focusScroll = false;\n    this.focus = function () {\n        if (tempStyle || HAS_FOCUS_ARGS || this.$focusScroll == \"browser\")\n            return text.focus({ preventScroll: true });\n        var top = text.style.top;\n        text.style.position = \"fixed\";\n        text.style.top = \"0px\";\n        try {\n            var isTransformed = text.getBoundingClientRect().top != 0;\n        }\n        catch (e) {\n            return;\n        }\n        var ancestors = [];\n        if (isTransformed) {\n            var t = text.parentElement;\n            while (t && t.nodeType == 1) {\n                ancestors.push(t);\n                t.setAttribute(\"ace_nocontext\", true);\n                if (!t.parentElement && t.getRootNode)\n                    t = t.getRootNode().host;\n                else\n                    t = t.parentElement;\n            }\n        }\n        text.focus({ preventScroll: true });\n        if (isTransformed) {\n            ancestors.forEach(function (p) {\n                p.removeAttribute(\"ace_nocontext\");\n            });\n        }\n        setTimeout(function () {\n            text.style.position = \"\";\n            if (text.style.top == \"0px\")\n                text.style.top = top;\n        }, 0);\n    };\n    this.blur = function () {\n        text.blur();\n    };\n    this.isFocused = function () {\n        return isFocused;\n    };\n    host.on(\"beforeEndOperation\", function () {\n        var curOp = host.curOp;\n        var commandName = curOp && curOp.command && curOp.command.name;\n        if (commandName == \"insertstring\")\n            return;\n        var isUserAction = commandName && (curOp.docChanged || curOp.selectionChanged);\n        if (inComposition && isUserAction) {\n            lastValue = text.value = \"\";\n            onCompositionEnd();\n        }\n        resetSelection();\n    });\n    var resetSelection = isIOS\n        ? function (value) {\n            if (!isFocused || (copied && !value) || sendingText)\n                return;\n            if (!value)\n                value = \"\";\n            var newValue = \"\\n ab\" + value + \"cde fg\\n\";\n            if (newValue != text.value)\n                text.value = lastValue = newValue;\n            var selectionStart = 4;\n            var selectionEnd = 4 + (value.length || (host.selection.isEmpty() ? 0 : 1));\n            if (lastSelectionStart != selectionStart || lastSelectionEnd != selectionEnd) {\n                text.setSelectionRange(selectionStart, selectionEnd);\n            }\n            lastSelectionStart = selectionStart;\n            lastSelectionEnd = selectionEnd;\n        }\n        : function () {\n            if (inComposition || sendingText)\n                return;\n            if (!isFocused && !afterContextMenu)\n                return;\n            inComposition = true;\n            var selectionStart = 0;\n            var selectionEnd = 0;\n            var line = \"\";\n            if (host.session) {\n                var selection = host.selection;\n                var range = selection.getRange();\n                var row = selection.cursor.row;\n                selectionStart = range.start.column;\n                selectionEnd = range.end.column;\n                line = host.session.getLine(row);\n                if (range.start.row != row) {\n                    var prevLine = host.session.getLine(row - 1);\n                    selectionStart = range.start.row < row - 1 ? 0 : selectionStart;\n                    selectionEnd += prevLine.length + 1;\n                    line = prevLine + \"\\n\" + line;\n                }\n                else if (range.end.row != row) {\n                    var nextLine = host.session.getLine(row + 1);\n                    selectionEnd = range.end.row > row + 1 ? nextLine.length : selectionEnd;\n                    selectionEnd += line.length + 1;\n                    line = line + \"\\n\" + nextLine;\n                }\n                else if (isMobile && row > 0) {\n                    line = \"\\n\" + line;\n                    selectionEnd += 1;\n                    selectionStart += 1;\n                }\n                if (line.length > MAX_LINE_LENGTH) {\n                    if (selectionStart < MAX_LINE_LENGTH && selectionEnd < MAX_LINE_LENGTH) {\n                        line = line.slice(0, MAX_LINE_LENGTH);\n                    }\n                    else {\n                        line = \"\\n\";\n                        if (selectionStart == selectionEnd) {\n                            selectionStart = selectionEnd = 0;\n                        }\n                        else {\n                            selectionStart = 0;\n                            selectionEnd = 1;\n                        }\n                    }\n                }\n            }\n            var newValue = line + \"\\n\\n\";\n            if (newValue != lastValue) {\n                text.value = lastValue = newValue;\n                lastSelectionStart = lastSelectionEnd = newValue.length;\n            }\n            if (afterContextMenu) {\n                lastSelectionStart = text.selectionStart;\n                lastSelectionEnd = text.selectionEnd;\n            }\n            if (lastSelectionEnd != selectionEnd\n                || lastSelectionStart != selectionStart\n                || text.selectionEnd != lastSelectionEnd // on ie edge selectionEnd changes silently after the initialization\n            ) {\n                try {\n                    text.setSelectionRange(selectionStart, selectionEnd);\n                    lastSelectionStart = selectionStart;\n                    lastSelectionEnd = selectionEnd;\n                }\n                catch (e) { }\n            }\n            inComposition = false;\n        };\n    this.resetSelection = resetSelection;\n    if (isFocused)\n        host.onFocus();\n    var isAllSelected = function (text) {\n        return text.selectionStart === 0 && text.selectionEnd >= lastValue.length\n            && text.value === lastValue && lastValue\n            && text.selectionEnd !== lastSelectionEnd;\n    };\n    var onSelect = function (e) {\n        if (inComposition)\n            return;\n        if (copied) {\n            copied = false;\n        }\n        else if (isAllSelected(text)) {\n            host.selectAll();\n            resetSelection();\n        }\n        else if (isMobile && text.selectionStart != lastSelectionStart) {\n            resetSelection();\n        }\n    };\n    var inputHandler = null;\n    this.setInputHandler = function (cb) { inputHandler = cb; };\n    this.getInputHandler = function () { return inputHandler; };\n    var afterContextMenu = false;\n    var sendText = function (value, fromInput) {\n        if (afterContextMenu)\n            afterContextMenu = false;\n        if (pasted) {\n            resetSelection();\n            if (value)\n                host.onPaste(value);\n            pasted = false;\n            return \"\";\n        }\n        else {\n            var selectionStart = text.selectionStart;\n            var selectionEnd = text.selectionEnd;\n            var extendLeft = lastSelectionStart;\n            var extendRight = lastValue.length - lastSelectionEnd;\n            var inserted = value;\n            var restoreStart = value.length - selectionStart;\n            var restoreEnd = value.length - selectionEnd;\n            var i = 0;\n            while (extendLeft > 0 && lastValue[i] == value[i]) {\n                i++;\n                extendLeft--;\n            }\n            inserted = inserted.slice(i);\n            i = 1;\n            while (extendRight > 0 && lastValue.length - i > lastSelectionStart - 1 && lastValue[lastValue.length - i] == value[value.length - i]) {\n                i++;\n                extendRight--;\n            }\n            restoreStart -= i - 1;\n            restoreEnd -= i - 1;\n            var endIndex = inserted.length - i + 1;\n            if (endIndex < 0) {\n                extendLeft = -endIndex;\n                endIndex = 0;\n            }\n            inserted = inserted.slice(0, endIndex);\n            if (!fromInput && !inserted && !restoreStart && !extendLeft && !extendRight && !restoreEnd)\n                return \"\";\n            sendingText = true;\n            var shouldReset = false;\n            if (useragent.isAndroid && inserted == \". \") {\n                inserted = \"  \";\n                shouldReset = true;\n            }\n            if (inserted && !extendLeft && !extendRight && !restoreStart && !restoreEnd || commandMode) {\n                host.onTextInput(inserted);\n            }\n            else {\n                host.onTextInput(inserted, {\n                    extendLeft: extendLeft,\n                    extendRight: extendRight,\n                    restoreStart: restoreStart,\n                    restoreEnd: restoreEnd\n                });\n            }\n            sendingText = false;\n            lastValue = value;\n            lastSelectionStart = selectionStart;\n            lastSelectionEnd = selectionEnd;\n            lastRestoreEnd = restoreEnd;\n            return shouldReset ? \"\\n\" : inserted;\n        }\n    };\n    var onInput = function (e) {\n        if (inComposition)\n            return onCompositionUpdate();\n        if (e && e.inputType) {\n            if (e.inputType == \"historyUndo\")\n                return host.execCommand(\"undo\");\n            if (e.inputType == \"historyRedo\")\n                return host.execCommand(\"redo\");\n        }\n        var data = text.value;\n        var inserted = sendText(data, true);\n        if (data.length > MAX_LINE_LENGTH + 100\n            || valueResetRegex.test(inserted)\n            || isMobile && lastSelectionStart < 1 && lastSelectionStart == lastSelectionEnd) {\n            resetSelection();\n        }\n    };\n    var handleClipboardData = function (e, data, forceIEMime) {\n        var clipboardData = e.clipboardData || window.clipboardData;\n        if (!clipboardData || BROKEN_SETDATA)\n            return;\n        var mime = USE_IE_MIME_TYPE || forceIEMime ? \"Text\" : \"text/plain\";\n        try {\n            if (data) {\n                return clipboardData.setData(mime, data) !== false;\n            }\n            else {\n                return clipboardData.getData(mime);\n            }\n        }\n        catch (e) {\n            if (!forceIEMime)\n                return handleClipboardData(e, data, true);\n        }\n    };\n    var doCopy = function (e, isCut) {\n        var data = host.getCopyText();\n        if (!data)\n            return event.preventDefault(e);\n        if (handleClipboardData(e, data)) {\n            if (isIOS) {\n                resetSelection(data);\n                copied = data;\n                setTimeout(function () {\n                    copied = false;\n                }, 10);\n            }\n            isCut ? host.onCut() : host.onCopy();\n            event.preventDefault(e);\n        }\n        else {\n            copied = true;\n            text.value = data;\n            text.select();\n            setTimeout(function () {\n                copied = false;\n                resetSelection();\n                isCut ? host.onCut() : host.onCopy();\n            });\n        }\n    };\n    var onCut = function (e) {\n        doCopy(e, true);\n    };\n    var onCopy = function (e) {\n        doCopy(e, false);\n    };\n    var onPaste = function (e) {\n        var data = handleClipboardData(e);\n        if (clipboard.pasteCancelled())\n            return;\n        if (typeof data == \"string\") {\n            if (data)\n                host.onPaste(data, e);\n            if (useragent.isIE)\n                setTimeout(resetSelection);\n            event.preventDefault(e);\n        }\n        else {\n            text.value = \"\";\n            pasted = true;\n        }\n    };\n    event.addCommandKeyListener(text, host.onCommandKey.bind(host), host);\n    event.addListener(text, \"select\", onSelect, host);\n    event.addListener(text, \"input\", onInput, host);\n    event.addListener(text, \"cut\", onCut, host);\n    event.addListener(text, \"copy\", onCopy, host);\n    event.addListener(text, \"paste\", onPaste, host);\n    if (!('oncut' in text) || !('oncopy' in text) || !('onpaste' in text)) {\n        event.addListener(parentNode, \"keydown\", function (e) {\n            if ((useragent.isMac && !e.metaKey) || !e.ctrlKey)\n                return;\n            switch (e.keyCode) {\n                case 67:\n                    onCopy(e);\n                    break;\n                case 86:\n                    onPaste(e);\n                    break;\n                case 88:\n                    onCut(e);\n                    break;\n            }\n        }, host);\n    }\n    var onCompositionStart = function (e) {\n        if (inComposition || !host.onCompositionStart || host.$readOnly)\n            return;\n        inComposition = {};\n        if (commandMode)\n            return;\n        if (e.data)\n            inComposition.useTextareaForIME = false;\n        setTimeout(onCompositionUpdate, 0);\n        host._signal(\"compositionStart\");\n        host.on(\"mousedown\", cancelComposition);\n        var range = host.getSelectionRange();\n        range.end.row = range.start.row;\n        range.end.column = range.start.column;\n        inComposition.markerRange = range;\n        inComposition.selectionStart = lastSelectionStart;\n        host.onCompositionStart(inComposition);\n        if (inComposition.useTextareaForIME) {\n            lastValue = text.value = \"\";\n            lastSelectionStart = 0;\n            lastSelectionEnd = 0;\n        }\n        else {\n            if (text.msGetInputContext)\n                inComposition.context = text.msGetInputContext();\n            if (text.getInputContext)\n                inComposition.context = text.getInputContext();\n        }\n    };\n    var onCompositionUpdate = function () {\n        if (!inComposition || !host.onCompositionUpdate || host.$readOnly)\n            return;\n        if (commandMode)\n            return cancelComposition();\n        if (inComposition.useTextareaForIME) {\n            host.onCompositionUpdate(text.value);\n        }\n        else {\n            var data = text.value;\n            sendText(data);\n            if (inComposition.markerRange) {\n                if (inComposition.context) {\n                    inComposition.markerRange.start.column = inComposition.selectionStart\n                        = inComposition.context.compositionStartOffset;\n                }\n                inComposition.markerRange.end.column = inComposition.markerRange.start.column\n                    + lastSelectionEnd - inComposition.selectionStart + lastRestoreEnd;\n            }\n        }\n    };\n    var onCompositionEnd = function (e) {\n        if (!host.onCompositionEnd || host.$readOnly)\n            return;\n        inComposition = false;\n        host.onCompositionEnd();\n        host.off(\"mousedown\", cancelComposition);\n        if (e)\n            onInput();\n    };\n    function cancelComposition() {\n        ignoreFocusEvents = true;\n        text.blur();\n        text.focus();\n        ignoreFocusEvents = false;\n    }\n    var syncComposition = lang.delayedCall(onCompositionUpdate, 50).schedule.bind(null, null);\n    function onKeyup(e) {\n        if (e.keyCode == 27 && text.value.length < text.selectionStart) {\n            if (!inComposition)\n                lastValue = text.value;\n            lastSelectionStart = lastSelectionEnd = -1;\n            resetSelection();\n        }\n        syncComposition();\n    }\n    event.addListener(text, \"compositionstart\", onCompositionStart, host);\n    event.addListener(text, \"compositionupdate\", onCompositionUpdate, host);\n    event.addListener(text, \"keyup\", onKeyup, host);\n    event.addListener(text, \"keydown\", syncComposition, host);\n    event.addListener(text, \"compositionend\", onCompositionEnd, host);\n    this.getElement = function () {\n        return text;\n    };\n    this.setCommandMode = function (value) {\n        commandMode = value;\n        text.readOnly = false;\n    };\n    this.setReadOnly = function (readOnly) {\n        if (!commandMode)\n            text.readOnly = readOnly;\n    };\n    this.setCopyWithEmptySelection = function (value) {\n    };\n    this.onContextMenu = function (e) {\n        afterContextMenu = true;\n        resetSelection();\n        host._emit(\"nativecontextmenu\", { target: host, domEvent: e });\n        this.moveToMouse(e, true);\n    };\n    this.moveToMouse = function (e, bringToFront) {\n        if (!tempStyle)\n            tempStyle = text.style.cssText;\n        text.style.cssText = (bringToFront ? \"z-index:100000;\" : \"\")\n            + (useragent.isIE ? \"opacity:0.1;\" : \"\")\n            + \"text-indent: -\" + (lastSelectionStart + lastSelectionEnd) * host.renderer.characterWidth * 0.5 + \"px;\";\n        var rect = host.container.getBoundingClientRect();\n        var style = dom.computedStyle(host.container);\n        var top = rect.top + (parseInt(style.borderTopWidth) || 0);\n        var left = rect.left + (parseInt(rect.borderLeftWidth) || 0);\n        var maxTop = rect.bottom - top - text.clientHeight - 2;\n        var move = function (e) {\n            dom.translate(text, e.clientX - left - 2, Math.min(e.clientY - top - 2, maxTop));\n        };\n        move(e);\n        if (e.type != \"mousedown\")\n            return;\n        host.renderer.$isMousePressed = true;\n        clearTimeout(closeTimeout);\n        if (useragent.isWin)\n            event.capture(host.container, move, onContextMenuClose);\n    };\n    this.onContextMenuClose = onContextMenuClose;\n    var closeTimeout;\n    function onContextMenuClose() {\n        clearTimeout(closeTimeout);\n        closeTimeout = setTimeout(function () {\n            if (tempStyle) {\n                text.style.cssText = tempStyle;\n                tempStyle = '';\n            }\n            host.renderer.$isMousePressed = false;\n            if (host.renderer.$keepTextAreaAtCursor)\n                host.renderer.$moveTextAreaToCursor();\n        }, 0);\n    }\n    var onContextMenu = function (e) {\n        host.textInput.onContextMenu(e);\n        onContextMenuClose();\n    };\n    event.addListener(text, \"mouseup\", onContextMenu, host);\n    event.addListener(text, \"mousedown\", function (e) {\n        e.preventDefault();\n        onContextMenuClose();\n    }, host);\n    event.addListener(host.renderer.scroller, \"contextmenu\", onContextMenu, host);\n    event.addListener(text, \"contextmenu\", onContextMenu, host);\n    if (isIOS)\n        addIosSelectionHandler(parentNode, host, text);\n    function addIosSelectionHandler(parentNode, host, text) {\n        var typingResetTimeout = null;\n        var typing = false;\n        text.addEventListener(\"keydown\", function (e) {\n            if (typingResetTimeout)\n                clearTimeout(typingResetTimeout);\n            typing = true;\n        }, true);\n        text.addEventListener(\"keyup\", function (e) {\n            typingResetTimeout = setTimeout(function () {\n                typing = false;\n            }, 100);\n        }, true);\n        var detectArrowKeys = function (e) {\n            if (document.activeElement !== text)\n                return;\n            if (typing || inComposition || host.$mouseHandler.isMousePressed)\n                return;\n            if (copied) {\n                return;\n            }\n            var selectionStart = text.selectionStart;\n            var selectionEnd = text.selectionEnd;\n            var key = null;\n            var modifier = 0;\n            if (selectionStart == 0) {\n                key = KEYS.up;\n            }\n            else if (selectionStart == 1) {\n                key = KEYS.home;\n            }\n            else if (selectionEnd > lastSelectionEnd && lastValue[selectionEnd] == \"\\n\") {\n                key = KEYS.end;\n            }\n            else if (selectionStart < lastSelectionStart && lastValue[selectionStart - 1] == \" \") {\n                key = KEYS.left;\n                modifier = MODS.option;\n            }\n            else if (selectionStart < lastSelectionStart\n                || (selectionStart == lastSelectionStart\n                    && lastSelectionEnd != lastSelectionStart\n                    && selectionStart == selectionEnd)) {\n                key = KEYS.left;\n            }\n            else if (selectionEnd > lastSelectionEnd && lastValue.slice(0, selectionEnd).split(\"\\n\").length > 2) {\n                key = KEYS.down;\n            }\n            else if (selectionEnd > lastSelectionEnd && lastValue[selectionEnd - 1] == \" \") {\n                key = KEYS.right;\n                modifier = MODS.option;\n            }\n            else if (selectionEnd > lastSelectionEnd\n                || (selectionEnd == lastSelectionEnd\n                    && lastSelectionEnd != lastSelectionStart\n                    && selectionStart == selectionEnd)) {\n                key = KEYS.right;\n            }\n            if (selectionStart !== selectionEnd)\n                modifier |= MODS.shift;\n            if (key) {\n                var result = host.onCommandKey({}, modifier, key);\n                if (!result && host.commands) {\n                    key = KEYS.keyCodeToString(key);\n                    var command = host.commands.findKeyCommand(modifier, key);\n                    if (command)\n                        host.execCommand(command);\n                }\n                lastSelectionStart = selectionStart;\n                lastSelectionEnd = selectionEnd;\n                resetSelection(\"\");\n            }\n        };\n        document.addEventListener(\"selectionchange\", detectArrowKeys);\n        host.on(\"destroy\", function () {\n            document.removeEventListener(\"selectionchange\", detectArrowKeys);\n        });\n    }\n    this.destroy = function () {\n        if (text.parentElement)\n            text.parentElement.removeChild(text);\n    };\n};\nexports.TextInput = TextInput;\nexports.$setUserAgentForTests = function (_isMobile, _isIOS) {\n    isMobile = _isMobile;\n    isIOS = _isIOS;\n};\n\n});\n\nace.define(\"ace/mouse/default_handlers\",[\"require\",\"exports\",\"module\",\"ace/lib/useragent\"], function(require, exports, module){\"use strict\";\nvar useragent = require(\"../lib/useragent\");\nvar DRAG_OFFSET = 0; // pixels\nvar SCROLL_COOLDOWN_T = 550; // milliseconds\nfunction DefaultHandlers(mouseHandler) {\n    mouseHandler.$clickSelection = null;\n    var editor = mouseHandler.editor;\n    editor.setDefaultHandler(\"mousedown\", this.onMouseDown.bind(mouseHandler));\n    editor.setDefaultHandler(\"dblclick\", this.onDoubleClick.bind(mouseHandler));\n    editor.setDefaultHandler(\"tripleclick\", this.onTripleClick.bind(mouseHandler));\n    editor.setDefaultHandler(\"quadclick\", this.onQuadClick.bind(mouseHandler));\n    editor.setDefaultHandler(\"mousewheel\", this.onMouseWheel.bind(mouseHandler));\n    var exports = [\"select\", \"startSelect\", \"selectEnd\", \"selectAllEnd\", \"selectByWordsEnd\",\n        \"selectByLinesEnd\", \"dragWait\", \"dragWaitEnd\", \"focusWait\"];\n    exports.forEach(function (x) {\n        mouseHandler[x] = this[x];\n    }, this);\n    mouseHandler.selectByLines = this.extendSelectionBy.bind(mouseHandler, \"getLineRange\");\n    mouseHandler.selectByWords = this.extendSelectionBy.bind(mouseHandler, \"getWordRange\");\n}\n(function () {\n    this.onMouseDown = function (ev) {\n        var inSelection = ev.inSelection();\n        var pos = ev.getDocumentPosition();\n        this.mousedownEvent = ev;\n        var editor = this.editor;\n        var button = ev.getButton();\n        if (button !== 0) {\n            var selectionRange = editor.getSelectionRange();\n            var selectionEmpty = selectionRange.isEmpty();\n            if (selectionEmpty || button == 1)\n                editor.selection.moveToPosition(pos);\n            if (button == 2) {\n                editor.textInput.onContextMenu(ev.domEvent);\n                if (!useragent.isMozilla)\n                    ev.preventDefault();\n            }\n            return;\n        }\n        this.mousedownEvent.time = Date.now();\n        if (inSelection && !editor.isFocused()) {\n            editor.focus();\n            if (this.$focusTimeout && !this.$clickSelection && !editor.inMultiSelectMode) {\n                this.setState(\"focusWait\");\n                this.captureMouse(ev);\n                return;\n            }\n        }\n        this.captureMouse(ev);\n        this.startSelect(pos, ev.domEvent._clicks > 1);\n        return ev.preventDefault();\n    };\n    this.startSelect = function (pos, waitForClickSelection) {\n        pos = pos || this.editor.renderer.screenToTextCoordinates(this.x, this.y);\n        var editor = this.editor;\n        if (!this.mousedownEvent)\n            return;\n        if (this.mousedownEvent.getShiftKey())\n            editor.selection.selectToPosition(pos);\n        else if (!waitForClickSelection)\n            editor.selection.moveToPosition(pos);\n        if (!waitForClickSelection)\n            this.select();\n        if (editor.renderer.scroller.setCapture) {\n            editor.renderer.scroller.setCapture();\n        }\n        editor.setStyle(\"ace_selecting\");\n        this.setState(\"select\");\n    };\n    this.select = function () {\n        var anchor, editor = this.editor;\n        var cursor = editor.renderer.screenToTextCoordinates(this.x, this.y);\n        if (this.$clickSelection) {\n            var cmp = this.$clickSelection.comparePoint(cursor);\n            if (cmp == -1) {\n                anchor = this.$clickSelection.end;\n            }\n            else if (cmp == 1) {\n                anchor = this.$clickSelection.start;\n            }\n            else {\n                var orientedRange = calcRangeOrientation(this.$clickSelection, cursor);\n                cursor = orientedRange.cursor;\n                anchor = orientedRange.anchor;\n            }\n            editor.selection.setSelectionAnchor(anchor.row, anchor.column);\n        }\n        editor.selection.selectToPosition(cursor);\n        editor.renderer.scrollCursorIntoView();\n    };\n    this.extendSelectionBy = function (unitName) {\n        var anchor, editor = this.editor;\n        var cursor = editor.renderer.screenToTextCoordinates(this.x, this.y);\n        var range = editor.selection[unitName](cursor.row, cursor.column);\n        if (this.$clickSelection) {\n            var cmpStart = this.$clickSelection.comparePoint(range.start);\n            var cmpEnd = this.$clickSelection.comparePoint(range.end);\n            if (cmpStart == -1 && cmpEnd <= 0) {\n                anchor = this.$clickSelection.end;\n                if (range.end.row != cursor.row || range.end.column != cursor.column)\n                    cursor = range.start;\n            }\n            else if (cmpEnd == 1 && cmpStart >= 0) {\n                anchor = this.$clickSelection.start;\n                if (range.start.row != cursor.row || range.start.column != cursor.column)\n                    cursor = range.end;\n            }\n            else if (cmpStart == -1 && cmpEnd == 1) {\n                cursor = range.end;\n                anchor = range.start;\n            }\n            else {\n                var orientedRange = calcRangeOrientation(this.$clickSelection, cursor);\n                cursor = orientedRange.cursor;\n                anchor = orientedRange.anchor;\n            }\n            editor.selection.setSelectionAnchor(anchor.row, anchor.column);\n        }\n        editor.selection.selectToPosition(cursor);\n        editor.renderer.scrollCursorIntoView();\n    };\n    this.selectEnd =\n        this.selectAllEnd =\n            this.selectByWordsEnd =\n                this.selectByLinesEnd = function () {\n                    this.$clickSelection = null;\n                    this.editor.unsetStyle(\"ace_selecting\");\n                    if (this.editor.renderer.scroller.releaseCapture) {\n                        this.editor.renderer.scroller.releaseCapture();\n                    }\n                };\n    this.focusWait = function () {\n        var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);\n        var time = Date.now();\n        if (distance > DRAG_OFFSET || time - this.mousedownEvent.time > this.$focusTimeout)\n            this.startSelect(this.mousedownEvent.getDocumentPosition());\n    };\n    this.onDoubleClick = function (ev) {\n        var pos = ev.getDocumentPosition();\n        var editor = this.editor;\n        var session = editor.session;\n        var range = session.getBracketRange(pos);\n        if (range) {\n            if (range.isEmpty()) {\n                range.start.column--;\n                range.end.column++;\n            }\n            this.setState(\"select\");\n        }\n        else {\n            range = editor.selection.getWordRange(pos.row, pos.column);\n            this.setState(\"selectByWords\");\n        }\n        this.$clickSelection = range;\n        this.select();\n    };\n    this.onTripleClick = function (ev) {\n        var pos = ev.getDocumentPosition();\n        var editor = this.editor;\n        this.setState(\"selectByLines\");\n        var range = editor.getSelectionRange();\n        if (range.isMultiLine() && range.contains(pos.row, pos.column)) {\n            this.$clickSelection = editor.selection.getLineRange(range.start.row);\n            this.$clickSelection.end = editor.selection.getLineRange(range.end.row).end;\n        }\n        else {\n            this.$clickSelection = editor.selection.getLineRange(pos.row);\n        }\n        this.select();\n    };\n    this.onQuadClick = function (ev) {\n        var editor = this.editor;\n        editor.selectAll();\n        this.$clickSelection = editor.getSelectionRange();\n        this.setState(\"selectAll\");\n    };\n    this.onMouseWheel = function (ev) {\n        if (ev.getAccelKey())\n            return;\n        if (ev.getShiftKey() && ev.wheelY && !ev.wheelX) {\n            ev.wheelX = ev.wheelY;\n            ev.wheelY = 0;\n        }\n        var editor = this.editor;\n        if (!this.$lastScroll)\n            this.$lastScroll = { t: 0, vx: 0, vy: 0, allowed: 0 };\n        var prevScroll = this.$lastScroll;\n        var t = ev.domEvent.timeStamp;\n        var dt = t - prevScroll.t;\n        var vx = dt ? ev.wheelX / dt : prevScroll.vx;\n        var vy = dt ? ev.wheelY / dt : prevScroll.vy;\n        if (dt < SCROLL_COOLDOWN_T) {\n            vx = (vx + prevScroll.vx) / 2;\n            vy = (vy + prevScroll.vy) / 2;\n        }\n        var direction = Math.abs(vx / vy);\n        var canScroll = false;\n        if (direction >= 1 && editor.renderer.isScrollableBy(ev.wheelX * ev.speed, 0))\n            canScroll = true;\n        if (direction <= 1 && editor.renderer.isScrollableBy(0, ev.wheelY * ev.speed))\n            canScroll = true;\n        if (canScroll) {\n            prevScroll.allowed = t;\n        }\n        else if (t - prevScroll.allowed < SCROLL_COOLDOWN_T) {\n            var isSlower = Math.abs(vx) <= 1.5 * Math.abs(prevScroll.vx)\n                && Math.abs(vy) <= 1.5 * Math.abs(prevScroll.vy);\n            if (isSlower) {\n                canScroll = true;\n                prevScroll.allowed = t;\n            }\n            else {\n                prevScroll.allowed = 0;\n            }\n        }\n        prevScroll.t = t;\n        prevScroll.vx = vx;\n        prevScroll.vy = vy;\n        if (canScroll) {\n            editor.renderer.scrollBy(ev.wheelX * ev.speed, ev.wheelY * ev.speed);\n            return ev.stop();\n        }\n    };\n}).call(DefaultHandlers.prototype);\nexports.DefaultHandlers = DefaultHandlers;\nfunction calcDistance(ax, ay, bx, by) {\n    return Math.sqrt(Math.pow(bx - ax, 2) + Math.pow(by - ay, 2));\n}\nfunction calcRangeOrientation(range, cursor) {\n    if (range.start.row == range.end.row)\n        var cmp = 2 * cursor.column - range.start.column - range.end.column;\n    else if (range.start.row == range.end.row - 1 && !range.start.column && !range.end.column)\n        var cmp = cursor.column - 4;\n    else\n        var cmp = 2 * cursor.row - range.start.row - range.end.row;\n    if (cmp < 0)\n        return { cursor: range.start, anchor: range.end };\n    else\n        return { cursor: range.end, anchor: range.start };\n}\n\n});\n\nace.define(\"ace/tooltip\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\"], function(require, exports, module){\"use strict\";\nvar oop = require(\"./lib/oop\");\nvar dom = require(\"./lib/dom\");\nvar CLASSNAME = \"ace_tooltip\";\nfunction Tooltip(parentNode) {\n    this.isOpen = false;\n    this.$element = null;\n    this.$parentNode = parentNode;\n}\n(function () {\n    this.$init = function () {\n        this.$element = dom.createElement(\"div\");\n        this.$element.className = CLASSNAME;\n        this.$element.style.display = \"none\";\n        this.$parentNode.appendChild(this.$element);\n        return this.$element;\n    };\n    this.getElement = function () {\n        return this.$element || this.$init();\n    };\n    this.setText = function (text) {\n        this.getElement().textContent = text;\n    };\n    this.setHtml = function (html) {\n        this.getElement().innerHTML = html;\n    };\n    this.setPosition = function (x, y) {\n        this.getElement().style.left = x + \"px\";\n        this.getElement().style.top = y + \"px\";\n    };\n    this.setClassName = function (className) {\n        dom.addCssClass(this.getElement(), className);\n    };\n    this.show = function (text, x, y) {\n        if (text != null)\n            this.setText(text);\n        if (x != null && y != null)\n            this.setPosition(x, y);\n        if (!this.isOpen) {\n            this.getElement().style.display = \"block\";\n            this.isOpen = true;\n        }\n    };\n    this.hide = function () {\n        if (this.isOpen) {\n            this.getElement().style.display = \"none\";\n            this.getElement().className = CLASSNAME;\n            this.isOpen = false;\n        }\n    };\n    this.getHeight = function () {\n        return this.getElement().offsetHeight;\n    };\n    this.getWidth = function () {\n        return this.getElement().offsetWidth;\n    };\n    this.destroy = function () {\n        this.isOpen = false;\n        if (this.$element && this.$element.parentNode) {\n            this.$element.parentNode.removeChild(this.$element);\n        }\n    };\n}).call(Tooltip.prototype);\nexports.Tooltip = Tooltip;\n\n});\n\nace.define(\"ace/mouse/default_gutter_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/oop\",\"ace/lib/event\",\"ace/tooltip\"], function(require, exports, module){\"use strict\";\nvar dom = require(\"../lib/dom\");\nvar oop = require(\"../lib/oop\");\nvar event = require(\"../lib/event\");\nvar Tooltip = require(\"../tooltip\").Tooltip;\nfunction GutterHandler(mouseHandler) {\n    var editor = mouseHandler.editor;\n    var gutter = editor.renderer.$gutterLayer;\n    var tooltip = new GutterTooltip(editor.container);\n    mouseHandler.editor.setDefaultHandler(\"guttermousedown\", function (e) {\n        if (!editor.isFocused() || e.getButton() != 0)\n            return;\n        var gutterRegion = gutter.getRegion(e);\n        if (gutterRegion == \"foldWidgets\")\n            return;\n        var row = e.getDocumentPosition().row;\n        var selection = editor.session.selection;\n        if (e.getShiftKey())\n            selection.selectTo(row, 0);\n        else {\n            if (e.domEvent.detail == 2) {\n                editor.selectAll();\n                return e.preventDefault();\n            }\n            mouseHandler.$clickSelection = editor.selection.getLineRange(row);\n        }\n        mouseHandler.setState(\"selectByLines\");\n        mouseHandler.captureMouse(e);\n        return e.preventDefault();\n    });\n    var tooltipTimeout, mouseEvent, tooltipAnnotation;\n    function showTooltip() {\n        var row = mouseEvent.getDocumentPosition().row;\n        var annotation = gutter.$annotations[row];\n        if (!annotation)\n            return hideTooltip();\n        var maxRow = editor.session.getLength();\n        if (row == maxRow) {\n            var screenRow = editor.renderer.pixelToScreenCoordinates(0, mouseEvent.y).row;\n            var pos = mouseEvent.$pos;\n            if (screenRow > editor.session.documentToScreenRow(pos.row, pos.column))\n                return hideTooltip();\n        }\n        if (tooltipAnnotation == annotation)\n            return;\n        tooltipAnnotation = annotation.text.join(\"<br/>\");\n        tooltip.setHtml(tooltipAnnotation);\n        var annotationClassName = annotation.className;\n        if (annotationClassName) {\n            tooltip.setClassName(annotationClassName.trim());\n        }\n        tooltip.show();\n        editor._signal(\"showGutterTooltip\", tooltip);\n        editor.on(\"mousewheel\", hideTooltip);\n        if (mouseHandler.$tooltipFollowsMouse) {\n            moveTooltip(mouseEvent);\n        }\n        else {\n            var gutterElement = mouseEvent.domEvent.target;\n            var rect = gutterElement.getBoundingClientRect();\n            var style = tooltip.getElement().style;\n            style.left = rect.right + \"px\";\n            style.top = rect.bottom + \"px\";\n        }\n    }\n    function hideTooltip() {\n        if (tooltipTimeout)\n            tooltipTimeout = clearTimeout(tooltipTimeout);\n        if (tooltipAnnotation) {\n            tooltip.hide();\n            tooltipAnnotation = null;\n            editor._signal(\"hideGutterTooltip\", tooltip);\n            editor.off(\"mousewheel\", hideTooltip);\n        }\n    }\n    function moveTooltip(e) {\n        tooltip.setPosition(e.x, e.y);\n    }\n    mouseHandler.editor.setDefaultHandler(\"guttermousemove\", function (e) {\n        var target = e.domEvent.target || e.domEvent.srcElement;\n        if (dom.hasCssClass(target, \"ace_fold-widget\"))\n            return hideTooltip();\n        if (tooltipAnnotation && mouseHandler.$tooltipFollowsMouse)\n            moveTooltip(e);\n        mouseEvent = e;\n        if (tooltipTimeout)\n            return;\n        tooltipTimeout = setTimeout(function () {\n            tooltipTimeout = null;\n            if (mouseEvent && !mouseHandler.isMousePressed)\n                showTooltip();\n            else\n                hideTooltip();\n        }, 50);\n    });\n    event.addListener(editor.renderer.$gutter, \"mouseout\", function (e) {\n        mouseEvent = null;\n        if (!tooltipAnnotation || tooltipTimeout)\n            return;\n        tooltipTimeout = setTimeout(function () {\n            tooltipTimeout = null;\n            hideTooltip();\n        }, 50);\n    }, editor);\n    editor.on(\"changeSession\", hideTooltip);\n}\nfunction GutterTooltip(parentNode) {\n    Tooltip.call(this, parentNode);\n}\noop.inherits(GutterTooltip, Tooltip);\n(function () {\n    this.setPosition = function (x, y) {\n        var windowWidth = window.innerWidth || document.documentElement.clientWidth;\n        var windowHeight = window.innerHeight || document.documentElement.clientHeight;\n        var width = this.getWidth();\n        var height = this.getHeight();\n        x += 15;\n        y += 15;\n        if (x + width > windowWidth) {\n            x -= (x + width) - windowWidth;\n        }\n        if (y + height > windowHeight) {\n            y -= 20 + height;\n        }\n        Tooltip.prototype.setPosition.call(this, x, y);\n    };\n}).call(GutterTooltip.prototype);\nexports.GutterHandler = GutterHandler;\n\n});\n\nace.define(\"ace/mouse/mouse_event\",[\"require\",\"exports\",\"module\",\"ace/lib/event\",\"ace/lib/useragent\"], function(require, exports, module){\"use strict\";\nvar event = require(\"../lib/event\");\nvar useragent = require(\"../lib/useragent\");\nvar MouseEvent = exports.MouseEvent = function (domEvent, editor) {\n    this.domEvent = domEvent;\n    this.editor = editor;\n    this.x = this.clientX = domEvent.clientX;\n    this.y = this.clientY = domEvent.clientY;\n    this.$pos = null;\n    this.$inSelection = null;\n    this.propagationStopped = false;\n    this.defaultPrevented = false;\n};\n(function () {\n    this.stopPropagation = function () {\n        event.stopPropagation(this.domEvent);\n        this.propagationStopped = true;\n    };\n    this.preventDefault = function () {\n        event.preventDefault(this.domEvent);\n        this.defaultPrevented = true;\n    };\n    this.stop = function () {\n        this.stopPropagation();\n        this.preventDefault();\n    };\n    this.getDocumentPosition = function () {\n        if (this.$pos)\n            return this.$pos;\n        this.$pos = this.editor.renderer.screenToTextCoordinates(this.clientX, this.clientY);\n        return this.$pos;\n    };\n    this.inSelection = function () {\n        if (this.$inSelection !== null)\n            return this.$inSelection;\n        var editor = this.editor;\n        var selectionRange = editor.getSelectionRange();\n        if (selectionRange.isEmpty())\n            this.$inSelection = false;\n        else {\n            var pos = this.getDocumentPosition();\n            this.$inSelection = selectionRange.contains(pos.row, pos.column);\n        }\n        return this.$inSelection;\n    };\n    this.getButton = function () {\n        return event.getButton(this.domEvent);\n    };\n    this.getShiftKey = function () {\n        return this.domEvent.shiftKey;\n    };\n    this.getAccelKey = useragent.isMac\n        ? function () { return this.domEvent.metaKey; }\n        : function () { return this.domEvent.ctrlKey; };\n}).call(MouseEvent.prototype);\n\n});\n\nace.define(\"ace/mouse/dragdrop_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/event\",\"ace/lib/useragent\"], function(require, exports, module){\"use strict\";\nvar dom = require(\"../lib/dom\");\nvar event = require(\"../lib/event\");\nvar useragent = require(\"../lib/useragent\");\nvar AUTOSCROLL_DELAY = 200;\nvar SCROLL_CURSOR_DELAY = 200;\nvar SCROLL_CURSOR_HYSTERESIS = 5;\nfunction DragdropHandler(mouseHandler) {\n    var editor = mouseHandler.editor;\n    var dragImage = dom.createElement(\"div\");\n    dragImage.style.cssText = \"top:-100px;position:absolute;z-index:2147483647;opacity:0.5\";\n    dragImage.textContent = \"\\xa0\";\n    var exports = [\"dragWait\", \"dragWaitEnd\", \"startDrag\", \"dragReadyEnd\", \"onMouseDrag\"];\n    exports.forEach(function (x) {\n        mouseHandler[x] = this[x];\n    }, this);\n    editor.on(\"mousedown\", this.onMouseDown.bind(mouseHandler));\n    var mouseTarget = editor.container;\n    var dragSelectionMarker, x, y;\n    var timerId, range;\n    var dragCursor, counter = 0;\n    var dragOperation;\n    var isInternal;\n    var autoScrollStartTime;\n    var cursorMovedTime;\n    var cursorPointOnCaretMoved;\n    this.onDragStart = function (e) {\n        if (this.cancelDrag || !mouseTarget.draggable) {\n            var self = this;\n            setTimeout(function () {\n                self.startSelect();\n                self.captureMouse(e);\n            }, 0);\n            return e.preventDefault();\n        }\n        range = editor.getSelectionRange();\n        var dataTransfer = e.dataTransfer;\n        dataTransfer.effectAllowed = editor.getReadOnly() ? \"copy\" : \"copyMove\";\n        editor.container.appendChild(dragImage);\n        dataTransfer.setDragImage && dataTransfer.setDragImage(dragImage, 0, 0);\n        setTimeout(function () {\n            editor.container.removeChild(dragImage);\n        });\n        dataTransfer.clearData();\n        dataTransfer.setData(\"Text\", editor.session.getTextRange());\n        isInternal = true;\n        this.setState(\"drag\");\n    };\n    this.onDragEnd = function (e) {\n        mouseTarget.draggable = false;\n        isInternal = false;\n        this.setState(null);\n        if (!editor.getReadOnly()) {\n            var dropEffect = e.dataTransfer.dropEffect;\n            if (!dragOperation && dropEffect == \"move\")\n                editor.session.remove(editor.getSelectionRange());\n            editor.$resetCursorStyle();\n        }\n        this.editor.unsetStyle(\"ace_dragging\");\n        this.editor.renderer.setCursorStyle(\"\");\n    };\n    this.onDragEnter = function (e) {\n        if (editor.getReadOnly() || !canAccept(e.dataTransfer))\n            return;\n        x = e.clientX;\n        y = e.clientY;\n        if (!dragSelectionMarker)\n            addDragMarker();\n        counter++;\n        e.dataTransfer.dropEffect = dragOperation = getDropEffect(e);\n        return event.preventDefault(e);\n    };\n    this.onDragOver = function (e) {\n        if (editor.getReadOnly() || !canAccept(e.dataTransfer))\n            return;\n        x = e.clientX;\n        y = e.clientY;\n        if (!dragSelectionMarker) {\n            addDragMarker();\n            counter++;\n        }\n        if (onMouseMoveTimer !== null)\n            onMouseMoveTimer = null;\n        e.dataTransfer.dropEffect = dragOperation = getDropEffect(e);\n        return event.preventDefault(e);\n    };\n    this.onDragLeave = function (e) {\n        counter--;\n        if (counter <= 0 && dragSelectionMarker) {\n            clearDragMarker();\n            dragOperation = null;\n            return event.preventDefault(e);\n        }\n    };\n    this.onDrop = function (e) {\n        if (!dragCursor)\n            return;\n        var dataTransfer = e.dataTransfer;\n        if (isInternal) {\n            switch (dragOperation) {\n                case \"move\":\n                    if (range.contains(dragCursor.row, dragCursor.column)) {\n                        range = {\n                            start: dragCursor,\n                            end: dragCursor\n                        };\n                    }\n                    else {\n                        range = editor.moveText(range, dragCursor);\n                    }\n                    break;\n                case \"copy\":\n                    range = editor.moveText(range, dragCursor, true);\n                    break;\n            }\n        }\n        else {\n            var dropData = dataTransfer.getData('Text');\n            range = {\n                start: dragCursor,\n                end: editor.session.insert(dragCursor, dropData)\n            };\n            editor.focus();\n            dragOperation = null;\n        }\n        clearDragMarker();\n        return event.preventDefault(e);\n    };\n    event.addListener(mouseTarget, \"dragstart\", this.onDragStart.bind(mouseHandler), editor);\n    event.addListener(mouseTarget, \"dragend\", this.onDragEnd.bind(mouseHandler), editor);\n    event.addListener(mouseTarget, \"dragenter\", this.onDragEnter.bind(mouseHandler), editor);\n    event.addListener(mouseTarget, \"dragover\", this.onDragOver.bind(mouseHandler), editor);\n    event.addListener(mouseTarget, \"dragleave\", this.onDragLeave.bind(mouseHandler), editor);\n    event.addListener(mouseTarget, \"drop\", this.onDrop.bind(mouseHandler), editor);\n    function scrollCursorIntoView(cursor, prevCursor) {\n        var now = Date.now();\n        var vMovement = !prevCursor || cursor.row != prevCursor.row;\n        var hMovement = !prevCursor || cursor.column != prevCursor.column;\n        if (!cursorMovedTime || vMovement || hMovement) {\n            editor.moveCursorToPosition(cursor);\n            cursorMovedTime = now;\n            cursorPointOnCaretMoved = { x: x, y: y };\n        }\n        else {\n            var distance = calcDistance(cursorPointOnCaretMoved.x, cursorPointOnCaretMoved.y, x, y);\n            if (distance > SCROLL_CURSOR_HYSTERESIS) {\n                cursorMovedTime = null;\n            }\n            else if (now - cursorMovedTime >= SCROLL_CURSOR_DELAY) {\n                editor.renderer.scrollCursorIntoView();\n                cursorMovedTime = null;\n            }\n        }\n    }\n    function autoScroll(cursor, prevCursor) {\n        var now = Date.now();\n        var lineHeight = editor.renderer.layerConfig.lineHeight;\n        var characterWidth = editor.renderer.layerConfig.characterWidth;\n        var editorRect = editor.renderer.scroller.getBoundingClientRect();\n        var offsets = {\n            x: {\n                left: x - editorRect.left,\n                right: editorRect.right - x\n            },\n            y: {\n                top: y - editorRect.top,\n                bottom: editorRect.bottom - y\n            }\n        };\n        var nearestXOffset = Math.min(offsets.x.left, offsets.x.right);\n        var nearestYOffset = Math.min(offsets.y.top, offsets.y.bottom);\n        var scrollCursor = { row: cursor.row, column: cursor.column };\n        if (nearestXOffset / characterWidth <= 2) {\n            scrollCursor.column += (offsets.x.left < offsets.x.right ? -3 : +2);\n        }\n        if (nearestYOffset / lineHeight <= 1) {\n            scrollCursor.row += (offsets.y.top < offsets.y.bottom ? -1 : +1);\n        }\n        var vScroll = cursor.row != scrollCursor.row;\n        var hScroll = cursor.column != scrollCursor.column;\n        var vMovement = !prevCursor || cursor.row != prevCursor.row;\n        if (vScroll || (hScroll && !vMovement)) {\n            if (!autoScrollStartTime)\n                autoScrollStartTime = now;\n            else if (now - autoScrollStartTime >= AUTOSCROLL_DELAY)\n                editor.renderer.scrollCursorIntoView(scrollCursor);\n        }\n        else {\n            autoScrollStartTime = null;\n        }\n    }\n    function onDragInterval() {\n        var prevCursor = dragCursor;\n        dragCursor = editor.renderer.screenToTextCoordinates(x, y);\n        scrollCursorIntoView(dragCursor, prevCursor);\n        autoScroll(dragCursor, prevCursor);\n    }\n    function addDragMarker() {\n        range = editor.selection.toOrientedRange();\n        dragSelectionMarker = editor.session.addMarker(range, \"ace_selection\", editor.getSelectionStyle());\n        editor.clearSelection();\n        if (editor.isFocused())\n            editor.renderer.$cursorLayer.setBlinking(false);\n        clearInterval(timerId);\n        onDragInterval();\n        timerId = setInterval(onDragInterval, 20);\n        counter = 0;\n        event.addListener(document, \"mousemove\", onMouseMove);\n    }\n    function clearDragMarker() {\n        clearInterval(timerId);\n        editor.session.removeMarker(dragSelectionMarker);\n        dragSelectionMarker = null;\n        editor.selection.fromOrientedRange(range);\n        if (editor.isFocused() && !isInternal)\n            editor.$resetCursorStyle();\n        range = null;\n        dragCursor = null;\n        counter = 0;\n        autoScrollStartTime = null;\n        cursorMovedTime = null;\n        event.removeListener(document, \"mousemove\", onMouseMove);\n    }\n    var onMouseMoveTimer = null;\n    function onMouseMove() {\n        if (onMouseMoveTimer == null) {\n            onMouseMoveTimer = setTimeout(function () {\n                if (onMouseMoveTimer != null && dragSelectionMarker)\n                    clearDragMarker();\n            }, 20);\n        }\n    }\n    function canAccept(dataTransfer) {\n        var types = dataTransfer.types;\n        return !types || Array.prototype.some.call(types, function (type) {\n            return type == 'text/plain' || type == 'Text';\n        });\n    }\n    function getDropEffect(e) {\n        var copyAllowed = ['copy', 'copymove', 'all', 'uninitialized'];\n        var moveAllowed = ['move', 'copymove', 'linkmove', 'all', 'uninitialized'];\n        var copyModifierState = useragent.isMac ? e.altKey : e.ctrlKey;\n        var effectAllowed = \"uninitialized\";\n        try {\n            effectAllowed = e.dataTransfer.effectAllowed.toLowerCase();\n        }\n        catch (e) { }\n        var dropEffect = \"none\";\n        if (copyModifierState && copyAllowed.indexOf(effectAllowed) >= 0)\n            dropEffect = \"copy\";\n        else if (moveAllowed.indexOf(effectAllowed) >= 0)\n            dropEffect = \"move\";\n        else if (copyAllowed.indexOf(effectAllowed) >= 0)\n            dropEffect = \"copy\";\n        return dropEffect;\n    }\n}\n(function () {\n    this.dragWait = function () {\n        var interval = Date.now() - this.mousedownEvent.time;\n        if (interval > this.editor.getDragDelay())\n            this.startDrag();\n    };\n    this.dragWaitEnd = function () {\n        var target = this.editor.container;\n        target.draggable = false;\n        this.startSelect(this.mousedownEvent.getDocumentPosition());\n        this.selectEnd();\n    };\n    this.dragReadyEnd = function (e) {\n        this.editor.$resetCursorStyle();\n        this.editor.unsetStyle(\"ace_dragging\");\n        this.editor.renderer.setCursorStyle(\"\");\n        this.dragWaitEnd();\n    };\n    this.startDrag = function () {\n        this.cancelDrag = false;\n        var editor = this.editor;\n        var target = editor.container;\n        target.draggable = true;\n        editor.renderer.$cursorLayer.setBlinking(false);\n        editor.setStyle(\"ace_dragging\");\n        var cursorStyle = useragent.isWin ? \"default\" : \"move\";\n        editor.renderer.setCursorStyle(cursorStyle);\n        this.setState(\"dragReady\");\n    };\n    this.onMouseDrag = function (e) {\n        var target = this.editor.container;\n        if (useragent.isIE && this.state == \"dragReady\") {\n            var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);\n            if (distance > 3)\n                target.dragDrop();\n        }\n        if (this.state === \"dragWait\") {\n            var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);\n            if (distance > 0) {\n                target.draggable = false;\n                this.startSelect(this.mousedownEvent.getDocumentPosition());\n            }\n        }\n    };\n    this.onMouseDown = function (e) {\n        if (!this.$dragEnabled)\n            return;\n        this.mousedownEvent = e;\n        var editor = this.editor;\n        var inSelection = e.inSelection();\n        var button = e.getButton();\n        var clickCount = e.domEvent.detail || 1;\n        if (clickCount === 1 && button === 0 && inSelection) {\n            if (e.editor.inMultiSelectMode && (e.getAccelKey() || e.getShiftKey()))\n                return;\n            this.mousedownEvent.time = Date.now();\n            var eventTarget = e.domEvent.target || e.domEvent.srcElement;\n            if (\"unselectable\" in eventTarget)\n                eventTarget.unselectable = \"on\";\n            if (editor.getDragDelay()) {\n                if (useragent.isWebKit) {\n                    this.cancelDrag = true;\n                    var mouseTarget = editor.container;\n                    mouseTarget.draggable = true;\n                }\n                this.setState(\"dragWait\");\n            }\n            else {\n                this.startDrag();\n            }\n            this.captureMouse(e, this.onMouseDrag.bind(this));\n            e.defaultPrevented = true;\n        }\n    };\n}).call(DragdropHandler.prototype);\nfunction calcDistance(ax, ay, bx, by) {\n    return Math.sqrt(Math.pow(bx - ax, 2) + Math.pow(by - ay, 2));\n}\nexports.DragdropHandler = DragdropHandler;\n\n});\n\nace.define(\"ace/mouse/touch_handler\",[\"require\",\"exports\",\"module\",\"ace/mouse/mouse_event\",\"ace/lib/event\",\"ace/lib/dom\"], function(require, exports, module){\"use strict\";\nvar MouseEvent = require(\"./mouse_event\").MouseEvent;\nvar event = require(\"../lib/event\");\nvar dom = require(\"../lib/dom\");\nexports.addTouchListeners = function (el, editor) {\n    var mode = \"scroll\";\n    var startX;\n    var startY;\n    var touchStartT;\n    var lastT;\n    var longTouchTimer;\n    var animationTimer;\n    var animationSteps = 0;\n    var pos;\n    var clickCount = 0;\n    var vX = 0;\n    var vY = 0;\n    var pressed;\n    var contextMenu;\n    function createContextMenu() {\n        var clipboard = window.navigator && window.navigator.clipboard;\n        var isOpen = false;\n        var updateMenu = function () {\n            var selected = editor.getCopyText();\n            var hasUndo = editor.session.getUndoManager().hasUndo();\n            contextMenu.replaceChild(dom.buildDom(isOpen ? [\"span\",\n                !selected && [\"span\", { class: \"ace_mobile-button\", action: \"selectall\" }, \"Select All\"],\n                selected && [\"span\", { class: \"ace_mobile-button\", action: \"copy\" }, \"Copy\"],\n                selected && [\"span\", { class: \"ace_mobile-button\", action: \"cut\" }, \"Cut\"],\n                clipboard && [\"span\", { class: \"ace_mobile-button\", action: \"paste\" }, \"Paste\"],\n                hasUndo && [\"span\", { class: \"ace_mobile-button\", action: \"undo\" }, \"Undo\"],\n                [\"span\", { class: \"ace_mobile-button\", action: \"find\" }, \"Find\"],\n                [\"span\", { class: \"ace_mobile-button\", action: \"openCommandPallete\" }, \"Palette\"]\n            ] : [\"span\"]), contextMenu.firstChild);\n        };\n        var handleClick = function (e) {\n            var action = e.target.getAttribute(\"action\");\n            if (action == \"more\" || !isOpen) {\n                isOpen = !isOpen;\n                return updateMenu();\n            }\n            if (action == \"paste\") {\n                clipboard.readText().then(function (text) {\n                    editor.execCommand(action, text);\n                });\n            }\n            else if (action) {\n                if (action == \"cut\" || action == \"copy\") {\n                    if (clipboard)\n                        clipboard.writeText(editor.getCopyText());\n                    else\n                        document.execCommand(\"copy\");\n                }\n                editor.execCommand(action);\n            }\n            contextMenu.firstChild.style.display = \"none\";\n            isOpen = false;\n            if (action != \"openCommandPallete\")\n                editor.focus();\n        };\n        contextMenu = dom.buildDom([\"div\",\n            {\n                class: \"ace_mobile-menu\",\n                ontouchstart: function (e) {\n                    mode = \"menu\";\n                    e.stopPropagation();\n                    e.preventDefault();\n                    editor.textInput.focus();\n                },\n                ontouchend: function (e) {\n                    e.stopPropagation();\n                    e.preventDefault();\n                    handleClick(e);\n                },\n                onclick: handleClick\n            },\n            [\"span\"],\n            [\"span\", { class: \"ace_mobile-button\", action: \"more\" }, \"...\"]\n        ], editor.container);\n    }\n    function showContextMenu() {\n        if (!contextMenu)\n            createContextMenu();\n        var cursor = editor.selection.cursor;\n        var pagePos = editor.renderer.textToScreenCoordinates(cursor.row, cursor.column);\n        var leftOffset = editor.renderer.textToScreenCoordinates(0, 0).pageX;\n        var scrollLeft = editor.renderer.scrollLeft;\n        var rect = editor.container.getBoundingClientRect();\n        contextMenu.style.top = pagePos.pageY - rect.top - 3 + \"px\";\n        if (pagePos.pageX - rect.left < rect.width - 70) {\n            contextMenu.style.left = \"\";\n            contextMenu.style.right = \"10px\";\n        }\n        else {\n            contextMenu.style.right = \"\";\n            contextMenu.style.left = leftOffset + scrollLeft - rect.left + \"px\";\n        }\n        contextMenu.style.display = \"\";\n        contextMenu.firstChild.style.display = \"none\";\n        editor.on(\"input\", hideContextMenu);\n    }\n    function hideContextMenu(e) {\n        if (contextMenu)\n            contextMenu.style.display = \"none\";\n        editor.off(\"input\", hideContextMenu);\n    }\n    function handleLongTap() {\n        longTouchTimer = null;\n        clearTimeout(longTouchTimer);\n        var range = editor.selection.getRange();\n        var inSelection = range.contains(pos.row, pos.column);\n        if (range.isEmpty() || !inSelection) {\n            editor.selection.moveToPosition(pos);\n            editor.selection.selectWord();\n        }\n        mode = \"wait\";\n        showContextMenu();\n    }\n    function switchToSelectionMode() {\n        longTouchTimer = null;\n        clearTimeout(longTouchTimer);\n        editor.selection.moveToPosition(pos);\n        var range = clickCount >= 2\n            ? editor.selection.getLineRange(pos.row)\n            : editor.session.getBracketRange(pos);\n        if (range && !range.isEmpty()) {\n            editor.selection.setRange(range);\n        }\n        else {\n            editor.selection.selectWord();\n        }\n        mode = \"wait\";\n    }\n    event.addListener(el, \"contextmenu\", function (e) {\n        if (!pressed)\n            return;\n        var textarea = editor.textInput.getElement();\n        textarea.focus();\n    }, editor);\n    event.addListener(el, \"touchstart\", function (e) {\n        var touches = e.touches;\n        if (longTouchTimer || touches.length > 1) {\n            clearTimeout(longTouchTimer);\n            longTouchTimer = null;\n            touchStartT = -1;\n            mode = \"zoom\";\n            return;\n        }\n        pressed = editor.$mouseHandler.isMousePressed = true;\n        var h = editor.renderer.layerConfig.lineHeight;\n        var w = editor.renderer.layerConfig.lineHeight;\n        var t = e.timeStamp;\n        lastT = t;\n        var touchObj = touches[0];\n        var x = touchObj.clientX;\n        var y = touchObj.clientY;\n        if (Math.abs(startX - x) + Math.abs(startY - y) > h)\n            touchStartT = -1;\n        startX = e.clientX = x;\n        startY = e.clientY = y;\n        vX = vY = 0;\n        var ev = new MouseEvent(e, editor);\n        pos = ev.getDocumentPosition();\n        if (t - touchStartT < 500 && touches.length == 1 && !animationSteps) {\n            clickCount++;\n            e.preventDefault();\n            e.button = 0;\n            switchToSelectionMode();\n        }\n        else {\n            clickCount = 0;\n            var cursor = editor.selection.cursor;\n            var anchor = editor.selection.isEmpty() ? cursor : editor.selection.anchor;\n            var cursorPos = editor.renderer.$cursorLayer.getPixelPosition(cursor, true);\n            var anchorPos = editor.renderer.$cursorLayer.getPixelPosition(anchor, true);\n            var rect = editor.renderer.scroller.getBoundingClientRect();\n            var offsetTop = editor.renderer.layerConfig.offset;\n            var offsetLeft = editor.renderer.scrollLeft;\n            var weightedDistance = function (x, y) {\n                x = x / w;\n                y = y / h - 0.75;\n                return x * x + y * y;\n            };\n            if (e.clientX < rect.left) {\n                mode = \"zoom\";\n                return;\n            }\n            var diff1 = weightedDistance(e.clientX - rect.left - cursorPos.left + offsetLeft, e.clientY - rect.top - cursorPos.top + offsetTop);\n            var diff2 = weightedDistance(e.clientX - rect.left - anchorPos.left + offsetLeft, e.clientY - rect.top - anchorPos.top + offsetTop);\n            if (diff1 < 3.5 && diff2 < 3.5)\n                mode = diff1 > diff2 ? \"cursor\" : \"anchor\";\n            if (diff2 < 3.5)\n                mode = \"anchor\";\n            else if (diff1 < 3.5)\n                mode = \"cursor\";\n            else\n                mode = \"scroll\";\n            longTouchTimer = setTimeout(handleLongTap, 450);\n        }\n        touchStartT = t;\n    }, editor);\n    event.addListener(el, \"touchend\", function (e) {\n        pressed = editor.$mouseHandler.isMousePressed = false;\n        if (animationTimer)\n            clearInterval(animationTimer);\n        if (mode == \"zoom\") {\n            mode = \"\";\n            animationSteps = 0;\n        }\n        else if (longTouchTimer) {\n            editor.selection.moveToPosition(pos);\n            animationSteps = 0;\n            showContextMenu();\n        }\n        else if (mode == \"scroll\") {\n            animate();\n            hideContextMenu();\n        }\n        else {\n            showContextMenu();\n        }\n        clearTimeout(longTouchTimer);\n        longTouchTimer = null;\n    }, editor);\n    event.addListener(el, \"touchmove\", function (e) {\n        if (longTouchTimer) {\n            clearTimeout(longTouchTimer);\n            longTouchTimer = null;\n        }\n        var touches = e.touches;\n        if (touches.length > 1 || mode == \"zoom\")\n            return;\n        var touchObj = touches[0];\n        var wheelX = startX - touchObj.clientX;\n        var wheelY = startY - touchObj.clientY;\n        if (mode == \"wait\") {\n            if (wheelX * wheelX + wheelY * wheelY > 4)\n                mode = \"cursor\";\n            else\n                return e.preventDefault();\n        }\n        startX = touchObj.clientX;\n        startY = touchObj.clientY;\n        e.clientX = touchObj.clientX;\n        e.clientY = touchObj.clientY;\n        var t = e.timeStamp;\n        var dt = t - lastT;\n        lastT = t;\n        if (mode == \"scroll\") {\n            var mouseEvent = new MouseEvent(e, editor);\n            mouseEvent.speed = 1;\n            mouseEvent.wheelX = wheelX;\n            mouseEvent.wheelY = wheelY;\n            if (10 * Math.abs(wheelX) < Math.abs(wheelY))\n                wheelX = 0;\n            if (10 * Math.abs(wheelY) < Math.abs(wheelX))\n                wheelY = 0;\n            if (dt != 0) {\n                vX = wheelX / dt;\n                vY = wheelY / dt;\n            }\n            editor._emit(\"mousewheel\", mouseEvent);\n            if (!mouseEvent.propagationStopped) {\n                vX = vY = 0;\n            }\n        }\n        else {\n            var ev = new MouseEvent(e, editor);\n            var pos = ev.getDocumentPosition();\n            if (mode == \"cursor\")\n                editor.selection.moveCursorToPosition(pos);\n            else if (mode == \"anchor\")\n                editor.selection.setSelectionAnchor(pos.row, pos.column);\n            editor.renderer.scrollCursorIntoView(pos);\n            e.preventDefault();\n        }\n    }, editor);\n    function animate() {\n        animationSteps += 60;\n        animationTimer = setInterval(function () {\n            if (animationSteps-- <= 0) {\n                clearInterval(animationTimer);\n                animationTimer = null;\n            }\n            if (Math.abs(vX) < 0.01)\n                vX = 0;\n            if (Math.abs(vY) < 0.01)\n                vY = 0;\n            if (animationSteps < 20)\n                vX = 0.9 * vX;\n            if (animationSteps < 20)\n                vY = 0.9 * vY;\n            var oldScrollTop = editor.session.getScrollTop();\n            editor.renderer.scrollBy(10 * vX, 10 * vY);\n            if (oldScrollTop == editor.session.getScrollTop())\n                animationSteps = 0;\n        }, 10);\n    }\n};\n\n});\n\nace.define(\"ace/mouse/mouse_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/event\",\"ace/lib/useragent\",\"ace/mouse/default_handlers\",\"ace/mouse/default_gutter_handler\",\"ace/mouse/mouse_event\",\"ace/mouse/dragdrop_handler\",\"ace/mouse/touch_handler\",\"ace/config\"], function(require, exports, module){\"use strict\";\nvar event = require(\"../lib/event\");\nvar useragent = require(\"../lib/useragent\");\nvar DefaultHandlers = require(\"./default_handlers\").DefaultHandlers;\nvar DefaultGutterHandler = require(\"./default_gutter_handler\").GutterHandler;\nvar MouseEvent = require(\"./mouse_event\").MouseEvent;\nvar DragdropHandler = require(\"./dragdrop_handler\").DragdropHandler;\nvar addTouchListeners = require(\"./touch_handler\").addTouchListeners;\nvar config = require(\"../config\");\nvar MouseHandler = function (editor) {\n    var _self = this;\n    this.editor = editor;\n    new DefaultHandlers(this);\n    new DefaultGutterHandler(this);\n    new DragdropHandler(this);\n    var focusEditor = function (e) {\n        var windowBlurred = !document.hasFocus || !document.hasFocus()\n            || !editor.isFocused() && document.activeElement == (editor.textInput && editor.textInput.getElement());\n        if (windowBlurred)\n            window.focus();\n        editor.focus();\n        setTimeout(function () {\n            if (!editor.isFocused())\n                editor.focus();\n        });\n    };\n    var mouseTarget = editor.renderer.getMouseEventTarget();\n    event.addListener(mouseTarget, \"click\", this.onMouseEvent.bind(this, \"click\"), editor);\n    event.addListener(mouseTarget, \"mousemove\", this.onMouseMove.bind(this, \"mousemove\"), editor);\n    event.addMultiMouseDownListener([\n        mouseTarget,\n        editor.renderer.scrollBarV && editor.renderer.scrollBarV.inner,\n        editor.renderer.scrollBarH && editor.renderer.scrollBarH.inner,\n        editor.textInput && editor.textInput.getElement()\n    ].filter(Boolean), [400, 300, 250], this, \"onMouseEvent\", editor);\n    event.addMouseWheelListener(editor.container, this.onMouseWheel.bind(this, \"mousewheel\"), editor);\n    addTouchListeners(editor.container, editor);\n    var gutterEl = editor.renderer.$gutter;\n    event.addListener(gutterEl, \"mousedown\", this.onMouseEvent.bind(this, \"guttermousedown\"), editor);\n    event.addListener(gutterEl, \"click\", this.onMouseEvent.bind(this, \"gutterclick\"), editor);\n    event.addListener(gutterEl, \"dblclick\", this.onMouseEvent.bind(this, \"gutterdblclick\"), editor);\n    event.addListener(gutterEl, \"mousemove\", this.onMouseEvent.bind(this, \"guttermousemove\"), editor);\n    event.addListener(mouseTarget, \"mousedown\", focusEditor, editor);\n    event.addListener(gutterEl, \"mousedown\", focusEditor, editor);\n    if (useragent.isIE && editor.renderer.scrollBarV) {\n        event.addListener(editor.renderer.scrollBarV.element, \"mousedown\", focusEditor, editor);\n        event.addListener(editor.renderer.scrollBarH.element, \"mousedown\", focusEditor, editor);\n    }\n    editor.on(\"mousemove\", function (e) {\n        if (_self.state || _self.$dragDelay || !_self.$dragEnabled)\n            return;\n        var character = editor.renderer.screenToTextCoordinates(e.x, e.y);\n        var range = editor.session.selection.getRange();\n        var renderer = editor.renderer;\n        if (!range.isEmpty() && range.insideStart(character.row, character.column)) {\n            renderer.setCursorStyle(\"default\");\n        }\n        else {\n            renderer.setCursorStyle(\"\");\n        }\n    }, editor);\n};\n(function () {\n    this.onMouseEvent = function (name, e) {\n        if (!this.editor.session)\n            return;\n        this.editor._emit(name, new MouseEvent(e, this.editor));\n    };\n    this.onMouseMove = function (name, e) {\n        var listeners = this.editor._eventRegistry && this.editor._eventRegistry.mousemove;\n        if (!listeners || !listeners.length)\n            return;\n        this.editor._emit(name, new MouseEvent(e, this.editor));\n    };\n    this.onMouseWheel = function (name, e) {\n        var mouseEvent = new MouseEvent(e, this.editor);\n        mouseEvent.speed = this.$scrollSpeed * 2;\n        mouseEvent.wheelX = e.wheelX;\n        mouseEvent.wheelY = e.wheelY;\n        this.editor._emit(name, mouseEvent);\n    };\n    this.setState = function (state) {\n        this.state = state;\n    };\n    this.captureMouse = function (ev, mouseMoveHandler) {\n        this.x = ev.x;\n        this.y = ev.y;\n        this.isMousePressed = true;\n        var editor = this.editor;\n        var renderer = this.editor.renderer;\n        renderer.$isMousePressed = true;\n        var self = this;\n        var onMouseMove = function (e) {\n            if (!e)\n                return;\n            if (useragent.isWebKit && !e.which && self.releaseMouse)\n                return self.releaseMouse();\n            self.x = e.clientX;\n            self.y = e.clientY;\n            mouseMoveHandler && mouseMoveHandler(e);\n            self.mouseEvent = new MouseEvent(e, self.editor);\n            self.$mouseMoved = true;\n        };\n        var onCaptureEnd = function (e) {\n            editor.off(\"beforeEndOperation\", onOperationEnd);\n            clearInterval(timerId);\n            if (editor.session)\n                onCaptureInterval();\n            self[self.state + \"End\"] && self[self.state + \"End\"](e);\n            self.state = \"\";\n            self.isMousePressed = renderer.$isMousePressed = false;\n            if (renderer.$keepTextAreaAtCursor)\n                renderer.$moveTextAreaToCursor();\n            self.$onCaptureMouseMove = self.releaseMouse = null;\n            e && self.onMouseEvent(\"mouseup\", e);\n            editor.endOperation();\n        };\n        var onCaptureInterval = function () {\n            self[self.state] && self[self.state]();\n            self.$mouseMoved = false;\n        };\n        if (useragent.isOldIE && ev.domEvent.type == \"dblclick\") {\n            return setTimeout(function () { onCaptureEnd(ev); });\n        }\n        var onOperationEnd = function (e) {\n            if (!self.releaseMouse)\n                return;\n            if (editor.curOp.command.name && editor.curOp.selectionChanged) {\n                self[self.state + \"End\"] && self[self.state + \"End\"]();\n                self.state = \"\";\n                self.releaseMouse();\n            }\n        };\n        editor.on(\"beforeEndOperation\", onOperationEnd);\n        editor.startOperation({ command: { name: \"mouse\" } });\n        self.$onCaptureMouseMove = onMouseMove;\n        self.releaseMouse = event.capture(this.editor.container, onMouseMove, onCaptureEnd);\n        var timerId = setInterval(onCaptureInterval, 20);\n    };\n    this.releaseMouse = null;\n    this.cancelContextMenu = function () {\n        var stop = function (e) {\n            if (e && e.domEvent && e.domEvent.type != \"contextmenu\")\n                return;\n            this.editor.off(\"nativecontextmenu\", stop);\n            if (e && e.domEvent)\n                event.stopEvent(e.domEvent);\n        }.bind(this);\n        setTimeout(stop, 10);\n        this.editor.on(\"nativecontextmenu\", stop);\n    };\n    this.destroy = function () {\n        if (this.releaseMouse)\n            this.releaseMouse();\n    };\n}).call(MouseHandler.prototype);\nconfig.defineOptions(MouseHandler.prototype, \"mouseHandler\", {\n    scrollSpeed: { initialValue: 2 },\n    dragDelay: { initialValue: (useragent.isMac ? 150 : 0) },\n    dragEnabled: { initialValue: true },\n    focusTimeout: { initialValue: 0 },\n    tooltipFollowsMouse: { initialValue: true }\n});\nexports.MouseHandler = MouseHandler;\n\n});\n\nace.define(\"ace/mouse/fold_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(require, exports, module){\"use strict\";\nvar dom = require(\"../lib/dom\");\nfunction FoldHandler(editor) {\n    editor.on(\"click\", function (e) {\n        var position = e.getDocumentPosition();\n        var session = editor.session;\n        var fold = session.getFoldAt(position.row, position.column, 1);\n        if (fold) {\n            if (e.getAccelKey())\n                session.removeFold(fold);\n            else\n                session.expandFold(fold);\n            e.stop();\n        }\n        var target = e.domEvent && e.domEvent.target;\n        if (target && dom.hasCssClass(target, \"ace_inline_button\")) {\n            if (dom.hasCssClass(target, \"ace_toggle_wrap\")) {\n                session.setOption(\"wrap\", !session.getUseWrapMode());\n                editor.renderer.scrollCursorIntoView();\n            }\n        }\n    });\n    editor.on(\"gutterclick\", function (e) {\n        var gutterRegion = editor.renderer.$gutterLayer.getRegion(e);\n        if (gutterRegion == \"foldWidgets\") {\n            var row = e.getDocumentPosition().row;\n            var session = editor.session;\n            if (session.foldWidgets && session.foldWidgets[row])\n                editor.session.onFoldWidgetClick(row, e);\n            if (!editor.isFocused())\n                editor.focus();\n            e.stop();\n        }\n    });\n    editor.on(\"gutterdblclick\", function (e) {\n        var gutterRegion = editor.renderer.$gutterLayer.getRegion(e);\n        if (gutterRegion == \"foldWidgets\") {\n            var row = e.getDocumentPosition().row;\n            var session = editor.session;\n            var data = session.getParentFoldRangeData(row, true);\n            var range = data.range || data.firstRange;\n            if (range) {\n                row = range.start.row;\n                var fold = session.getFoldAt(row, session.getLine(row).length, 1);\n                if (fold) {\n                    session.removeFold(fold);\n                }\n                else {\n                    session.addFold(\"...\", range);\n                    editor.renderer.scrollCursorIntoView({ row: range.start.row, column: 0 });\n                }\n            }\n            e.stop();\n        }\n    });\n}\nexports.FoldHandler = FoldHandler;\n\n});\n\nace.define(\"ace/keyboard/keybinding\",[\"require\",\"exports\",\"module\",\"ace/lib/keys\",\"ace/lib/event\"], function(require, exports, module){\"use strict\";\nvar keyUtil = require(\"../lib/keys\");\nvar event = require(\"../lib/event\");\nvar KeyBinding = function (editor) {\n    this.$editor = editor;\n    this.$data = { editor: editor };\n    this.$handlers = [];\n    this.setDefaultHandler(editor.commands);\n};\n(function () {\n    this.setDefaultHandler = function (kb) {\n        this.removeKeyboardHandler(this.$defaultHandler);\n        this.$defaultHandler = kb;\n        this.addKeyboardHandler(kb, 0);\n    };\n    this.setKeyboardHandler = function (kb) {\n        var h = this.$handlers;\n        if (h[h.length - 1] == kb)\n            return;\n        while (h[h.length - 1] && h[h.length - 1] != this.$defaultHandler)\n            this.removeKeyboardHandler(h[h.length - 1]);\n        this.addKeyboardHandler(kb, 1);\n    };\n    this.addKeyboardHandler = function (kb, pos) {\n        if (!kb)\n            return;\n        if (typeof kb == \"function\" && !kb.handleKeyboard)\n            kb.handleKeyboard = kb;\n        var i = this.$handlers.indexOf(kb);\n        if (i != -1)\n            this.$handlers.splice(i, 1);\n        if (pos == undefined)\n            this.$handlers.push(kb);\n        else\n            this.$handlers.splice(pos, 0, kb);\n        if (i == -1 && kb.attach)\n            kb.attach(this.$editor);\n    };\n    this.removeKeyboardHandler = function (kb) {\n        var i = this.$handlers.indexOf(kb);\n        if (i == -1)\n            return false;\n        this.$handlers.splice(i, 1);\n        kb.detach && kb.detach(this.$editor);\n        return true;\n    };\n    this.getKeyboardHandler = function () {\n        return this.$handlers[this.$handlers.length - 1];\n    };\n    this.getStatusText = function () {\n        var data = this.$data;\n        var editor = data.editor;\n        return this.$handlers.map(function (h) {\n            return h.getStatusText && h.getStatusText(editor, data) || \"\";\n        }).filter(Boolean).join(\" \");\n    };\n    this.$callKeyboardHandlers = function (hashId, keyString, keyCode, e) {\n        var toExecute;\n        var success = false;\n        var commands = this.$editor.commands;\n        for (var i = this.$handlers.length; i--;) {\n            toExecute = this.$handlers[i].handleKeyboard(this.$data, hashId, keyString, keyCode, e);\n            if (!toExecute || !toExecute.command)\n                continue;\n            if (toExecute.command == \"null\") {\n                success = true;\n            }\n            else {\n                success = commands.exec(toExecute.command, this.$editor, toExecute.args, e);\n            }\n            if (success && e && hashId != -1 &&\n                toExecute.passEvent != true && toExecute.command.passEvent != true) {\n                event.stopEvent(e);\n            }\n            if (success)\n                break;\n        }\n        if (!success && hashId == -1) {\n            toExecute = { command: \"insertstring\" };\n            success = commands.exec(\"insertstring\", this.$editor, keyString);\n        }\n        if (success && this.$editor._signal)\n            this.$editor._signal(\"keyboardActivity\", toExecute);\n        return success;\n    };\n    this.onCommandKey = function (e, hashId, keyCode) {\n        var keyString = keyUtil.keyCodeToString(keyCode);\n        return this.$callKeyboardHandlers(hashId, keyString, keyCode, e);\n    };\n    this.onTextInput = function (text) {\n        return this.$callKeyboardHandlers(-1, text);\n    };\n}).call(KeyBinding.prototype);\nexports.KeyBinding = KeyBinding;\n\n});\n\nace.define(\"ace/lib/bidiutil\",[\"require\",\"exports\",\"module\"], function(require, exports, module){\"use strict\";\nvar ArabicAlefBetIntervalsBegine = ['\\u0621', '\\u0641'];\nvar ArabicAlefBetIntervalsEnd = ['\\u063A', '\\u064a'];\nvar dir = 0, hiLevel = 0;\nvar lastArabic = false, hasUBAT_AL = false, hasUBAT_B = false, hasUBAT_S = false, hasBlockSep = false, hasSegSep = false;\nvar impTab_LTR = [ [0, 3, 0, 1, 0, 0, 0], [0, 3, 0, 1, 2, 2, 0], [0, 3, 0, 0x11, 2, 0, 1], [0, 3, 5, 5, 4, 1, 0], [0, 3, 0x15, 0x15, 4, 0, 1], [0, 3, 5, 5, 4, 2, 0]\n];\nvar impTab_RTL = [ [2, 0, 1, 1, 0, 1, 0], [2, 0, 1, 1, 0, 2, 0], [2, 0, 2, 1, 3, 2, 0], [2, 0, 2, 0x21, 3, 1, 1]\n];\nvar LTR = 0, RTL = 1;\nvar L = 0;\nvar R = 1;\nvar EN = 2;\nvar AN = 3;\nvar ON = 4;\nvar B = 5;\nvar S = 6;\nvar AL = 7;\nvar WS = 8;\nvar CS = 9;\nvar ES = 10;\nvar ET = 11;\nvar NSM = 12;\nvar LRE = 13;\nvar RLE = 14;\nvar PDF = 15;\nvar LRO = 16;\nvar RLO = 17;\nvar BN = 18;\nvar UnicodeTBL00 = [\n    BN, BN, BN, BN, BN, BN, BN, BN, BN, S, B, S, WS, B, BN, BN,\n    BN, BN, BN, BN, BN, BN, BN, BN, BN, BN, BN, BN, B, B, B, S,\n    WS, ON, ON, ET, ET, ET, ON, ON, ON, ON, ON, ES, CS, ES, CS, CS,\n    EN, EN, EN, EN, EN, EN, EN, EN, EN, EN, CS, ON, ON, ON, ON, ON,\n    ON, L, L, L, L, L, L, L, L, L, L, L, L, L, L, L,\n    L, L, L, L, L, L, L, L, L, L, L, ON, ON, ON, ON, ON,\n    ON, L, L, L, L, L, L, L, L, L, L, L, L, L, L, L,\n    L, L, L, L, L, L, L, L, L, L, L, ON, ON, ON, ON, BN,\n    BN, BN, BN, BN, BN, B, BN, BN, BN, BN, BN, BN, BN, BN, BN, BN,\n    BN, BN, BN, BN, BN, BN, BN, BN, BN, BN, BN, BN, BN, BN, BN, BN,\n    CS, ON, ET, ET, ET, ET, ON, ON, ON, ON, L, ON, ON, BN, ON, ON,\n    ET, ET, EN, EN, ON, L, ON, ON, ON, EN, L, ON, ON, ON, ON, ON\n];\nvar UnicodeTBL20 = [\n    WS, WS, WS, WS, WS, WS, WS, WS, WS, WS, WS, BN, BN, BN, L, R,\n    ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON,\n    ON, ON, ON, ON, ON, ON, ON, ON, WS, B, LRE, RLE, PDF, LRO, RLO, CS,\n    ET, ET, ET, ET, ET, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON,\n    ON, ON, ON, ON, CS, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON,\n    ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, WS\n];\nfunction _computeLevels(chars, levels, len, charTypes) {\n    var impTab = dir ? impTab_RTL : impTab_LTR, prevState = null, newClass = null, newLevel = null, newState = 0, action = null, cond = null, condPos = -1, i = null, ix = null, classes = [];\n    if (!charTypes) {\n        for (i = 0, charTypes = []; i < len; i++) {\n            charTypes[i] = _getCharacterType(chars[i]);\n        }\n    }\n    hiLevel = dir;\n    lastArabic = false;\n    hasUBAT_AL = false;\n    hasUBAT_B = false;\n    hasUBAT_S = false;\n    for (ix = 0; ix < len; ix++) {\n        prevState = newState;\n        classes[ix] = newClass = _getCharClass(chars, charTypes, classes, ix);\n        newState = impTab[prevState][newClass];\n        action = newState & 0xF0;\n        newState &= 0x0F;\n        levels[ix] = newLevel = impTab[newState][5];\n        if (action > 0) {\n            if (action == 0x10) {\n                for (i = condPos; i < ix; i++) {\n                    levels[i] = 1;\n                }\n                condPos = -1;\n            }\n            else {\n                condPos = -1;\n            }\n        }\n        cond = impTab[newState][6];\n        if (cond) {\n            if (condPos == -1) {\n                condPos = ix;\n            }\n        }\n        else {\n            if (condPos > -1) {\n                for (i = condPos; i < ix; i++) {\n                    levels[i] = newLevel;\n                }\n                condPos = -1;\n            }\n        }\n        if (charTypes[ix] == B) {\n            levels[ix] = 0;\n        }\n        hiLevel |= newLevel;\n    }\n    if (hasUBAT_S) {\n        for (i = 0; i < len; i++) {\n            if (charTypes[i] == S) {\n                levels[i] = dir;\n                for (var j = i - 1; j >= 0; j--) {\n                    if (charTypes[j] == WS) {\n                        levels[j] = dir;\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n        }\n    }\n}\nfunction _invertLevel(lev, levels, _array) {\n    if (hiLevel < lev) {\n        return;\n    }\n    if (lev == 1 && dir == RTL && !hasUBAT_B) {\n        _array.reverse();\n        return;\n    }\n    var len = _array.length, start = 0, end, lo, hi, tmp;\n    while (start < len) {\n        if (levels[start] >= lev) {\n            end = start + 1;\n            while (end < len && levels[end] >= lev) {\n                end++;\n            }\n            for (lo = start, hi = end - 1; lo < hi; lo++, hi--) {\n                tmp = _array[lo];\n                _array[lo] = _array[hi];\n                _array[hi] = tmp;\n            }\n            start = end;\n        }\n        start++;\n    }\n}\nfunction _getCharClass(chars, types, classes, ix) {\n    var cType = types[ix], wType, nType, len, i;\n    switch (cType) {\n        case L:\n        case R:\n            lastArabic = false;\n        case ON:\n        case AN:\n            return cType;\n        case EN:\n            return lastArabic ? AN : EN;\n        case AL:\n            lastArabic = true;\n            hasUBAT_AL = true;\n            return R;\n        case WS:\n            return ON;\n        case CS:\n            if (ix < 1 || (ix + 1) >= types.length ||\n                ((wType = classes[ix - 1]) != EN && wType != AN) ||\n                ((nType = types[ix + 1]) != EN && nType != AN)) {\n                return ON;\n            }\n            if (lastArabic) {\n                nType = AN;\n            }\n            return nType == wType ? nType : ON;\n        case ES:\n            wType = ix > 0 ? classes[ix - 1] : B;\n            if (wType == EN && (ix + 1) < types.length && types[ix + 1] == EN) {\n                return EN;\n            }\n            return ON;\n        case ET:\n            if (ix > 0 && classes[ix - 1] == EN) {\n                return EN;\n            }\n            if (lastArabic) {\n                return ON;\n            }\n            i = ix + 1;\n            len = types.length;\n            while (i < len && types[i] == ET) {\n                i++;\n            }\n            if (i < len && types[i] == EN) {\n                return EN;\n            }\n            return ON;\n        case NSM:\n            len = types.length;\n            i = ix + 1;\n            while (i < len && types[i] == NSM) {\n                i++;\n            }\n            if (i < len) {\n                var c = chars[ix], rtlCandidate = (c >= 0x0591 && c <= 0x08FF) || c == 0xFB1E;\n                wType = types[i];\n                if (rtlCandidate && (wType == R || wType == AL)) {\n                    return R;\n                }\n            }\n            if (ix < 1 || (wType = types[ix - 1]) == B) {\n                return ON;\n            }\n            return classes[ix - 1];\n        case B:\n            lastArabic = false;\n            hasUBAT_B = true;\n            return dir;\n        case S:\n            hasUBAT_S = true;\n            return ON;\n        case LRE:\n        case RLE:\n        case LRO:\n        case RLO:\n        case PDF:\n            lastArabic = false;\n        case BN:\n            return ON;\n    }\n}\nfunction _getCharacterType(ch) {\n    var uc = ch.charCodeAt(0), hi = uc >> 8;\n    if (hi == 0) {\n        return ((uc > 0x00BF) ? L : UnicodeTBL00[uc]);\n    }\n    else if (hi == 5) {\n        return (/[\\u0591-\\u05f4]/.test(ch) ? R : L);\n    }\n    else if (hi == 6) {\n        if (/[\\u0610-\\u061a\\u064b-\\u065f\\u06d6-\\u06e4\\u06e7-\\u06ed]/.test(ch))\n            return NSM;\n        else if (/[\\u0660-\\u0669\\u066b-\\u066c]/.test(ch))\n            return AN;\n        else if (uc == 0x066A)\n            return ET;\n        else if (/[\\u06f0-\\u06f9]/.test(ch))\n            return EN;\n        else\n            return AL;\n    }\n    else if (hi == 0x20 && uc <= 0x205F) {\n        return UnicodeTBL20[uc & 0xFF];\n    }\n    else if (hi == 0xFE) {\n        return (uc >= 0xFE70 ? AL : ON);\n    }\n    return ON;\n}\nfunction _isArabicDiacritics(ch) {\n    return (ch >= '\\u064b' && ch <= '\\u0655');\n}\nexports.L = L;\nexports.R = R;\nexports.EN = EN;\nexports.ON_R = 3;\nexports.AN = 4;\nexports.R_H = 5;\nexports.B = 6;\nexports.RLE = 7;\nexports.DOT = \"\\xB7\";\nexports.doBidiReorder = function (text, textCharTypes, isRtl) {\n    if (text.length < 2)\n        return {};\n    var chars = text.split(\"\"), logicalFromVisual = new Array(chars.length), bidiLevels = new Array(chars.length), levels = [];\n    dir = isRtl ? RTL : LTR;\n    _computeLevels(chars, levels, chars.length, textCharTypes);\n    for (var i = 0; i < logicalFromVisual.length; logicalFromVisual[i] = i, i++)\n        ;\n    _invertLevel(2, levels, logicalFromVisual);\n    _invertLevel(1, levels, logicalFromVisual);\n    for (var i = 0; i < logicalFromVisual.length - 1; i++) { //fix levels to reflect character width\n        if (textCharTypes[i] === AN) {\n            levels[i] = exports.AN;\n        }\n        else if (levels[i] === R && ((textCharTypes[i] > AL && textCharTypes[i] < LRE)\n            || textCharTypes[i] === ON || textCharTypes[i] === BN)) {\n            levels[i] = exports.ON_R;\n        }\n        else if ((i > 0 && chars[i - 1] === '\\u0644') && /\\u0622|\\u0623|\\u0625|\\u0627/.test(chars[i])) {\n            levels[i - 1] = levels[i] = exports.R_H;\n            i++;\n        }\n    }\n    if (chars[chars.length - 1] === exports.DOT)\n        levels[chars.length - 1] = exports.B;\n    if (chars[0] === '\\u202B')\n        levels[0] = exports.RLE;\n    for (var i = 0; i < logicalFromVisual.length; i++) {\n        bidiLevels[i] = levels[logicalFromVisual[i]];\n    }\n    return { 'logicalFromVisual': logicalFromVisual, 'bidiLevels': bidiLevels };\n};\nexports.hasBidiCharacters = function (text, textCharTypes) {\n    var ret = false;\n    for (var i = 0; i < text.length; i++) {\n        textCharTypes[i] = _getCharacterType(text.charAt(i));\n        if (!ret && (textCharTypes[i] == R || textCharTypes[i] == AL || textCharTypes[i] == AN))\n            ret = true;\n    }\n    return ret;\n};\nexports.getVisualFromLogicalIdx = function (logIdx, rowMap) {\n    for (var i = 0; i < rowMap.logicalFromVisual.length; i++) {\n        if (rowMap.logicalFromVisual[i] == logIdx)\n            return i;\n    }\n    return 0;\n};\n\n});\n\nace.define(\"ace/bidihandler\",[\"require\",\"exports\",\"module\",\"ace/lib/bidiutil\",\"ace/lib/lang\"], function(require, exports, module){\"use strict\";\nvar bidiUtil = require(\"./lib/bidiutil\");\nvar lang = require(\"./lib/lang\");\nvar bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac\\u202B]/;\nvar BidiHandler = function (session) {\n    this.session = session;\n    this.bidiMap = {};\n    this.currentRow = null;\n    this.bidiUtil = bidiUtil;\n    this.charWidths = [];\n    this.EOL = \"\\xAC\";\n    this.showInvisibles = true;\n    this.isRtlDir = false;\n    this.$isRtl = false;\n    this.line = \"\";\n    this.wrapIndent = 0;\n    this.EOF = \"\\xB6\";\n    this.RLE = \"\\u202B\";\n    this.contentWidth = 0;\n    this.fontMetrics = null;\n    this.rtlLineOffset = 0;\n    this.wrapOffset = 0;\n    this.isMoveLeftOperation = false;\n    this.seenBidi = bidiRE.test(session.getValue());\n};\n(function () {\n    this.isBidiRow = function (screenRow, docRow, splitIndex) {\n        if (!this.seenBidi)\n            return false;\n        if (screenRow !== this.currentRow) {\n            this.currentRow = screenRow;\n            this.updateRowLine(docRow, splitIndex);\n            this.updateBidiMap();\n        }\n        return this.bidiMap.bidiLevels;\n    };\n    this.onChange = function (delta) {\n        if (!this.seenBidi) {\n            if (delta.action == \"insert\" && bidiRE.test(delta.lines.join(\"\\n\"))) {\n                this.seenBidi = true;\n                this.currentRow = null;\n            }\n        }\n        else {\n            this.currentRow = null;\n        }\n    };\n    this.getDocumentRow = function () {\n        var docRow = 0;\n        var rowCache = this.session.$screenRowCache;\n        if (rowCache.length) {\n            var index = this.session.$getRowCacheIndex(rowCache, this.currentRow);\n            if (index >= 0)\n                docRow = this.session.$docRowCache[index];\n        }\n        return docRow;\n    };\n    this.getSplitIndex = function () {\n        var splitIndex = 0;\n        var rowCache = this.session.$screenRowCache;\n        if (rowCache.length) {\n            var currentIndex, prevIndex = this.session.$getRowCacheIndex(rowCache, this.currentRow);\n            while (this.currentRow - splitIndex > 0) {\n                currentIndex = this.session.$getRowCacheIndex(rowCache, this.currentRow - splitIndex - 1);\n                if (currentIndex !== prevIndex)\n                    break;\n                prevIndex = currentIndex;\n                splitIndex++;\n            }\n        }\n        else {\n            splitIndex = this.currentRow;\n        }\n        return splitIndex;\n    };\n    this.updateRowLine = function (docRow, splitIndex) {\n        if (docRow === undefined)\n            docRow = this.getDocumentRow();\n        var isLastRow = (docRow === this.session.getLength() - 1), endOfLine = isLastRow ? this.EOF : this.EOL;\n        this.wrapIndent = 0;\n        this.line = this.session.getLine(docRow);\n        this.isRtlDir = this.$isRtl || this.line.charAt(0) === this.RLE;\n        if (this.session.$useWrapMode) {\n            var splits = this.session.$wrapData[docRow];\n            if (splits) {\n                if (splitIndex === undefined)\n                    splitIndex = this.getSplitIndex();\n                if (splitIndex > 0 && splits.length) {\n                    this.wrapIndent = splits.indent;\n                    this.wrapOffset = this.wrapIndent * this.charWidths[bidiUtil.L];\n                    this.line = (splitIndex < splits.length) ?\n                        this.line.substring(splits[splitIndex - 1], splits[splitIndex]) :\n                        this.line.substring(splits[splits.length - 1]);\n                }\n                else {\n                    this.line = this.line.substring(0, splits[splitIndex]);\n                }\n                if (splitIndex == splits.length) {\n                    this.line += (this.showInvisibles) ? endOfLine : bidiUtil.DOT;\n                }\n            }\n        }\n        else {\n            this.line += this.showInvisibles ? endOfLine : bidiUtil.DOT;\n        }\n        var session = this.session, shift = 0, size;\n        this.line = this.line.replace(/\\t|[\\u1100-\\u2029, \\u202F-\\uFFE6]/g, function (ch, i) {\n            if (ch === '\\t' || session.isFullWidth(ch.charCodeAt(0))) {\n                size = (ch === '\\t') ? session.getScreenTabSize(i + shift) : 2;\n                shift += size - 1;\n                return lang.stringRepeat(bidiUtil.DOT, size);\n            }\n            return ch;\n        });\n        if (this.isRtlDir) {\n            this.fontMetrics.$main.textContent = (this.line.charAt(this.line.length - 1) == bidiUtil.DOT) ? this.line.substr(0, this.line.length - 1) : this.line;\n            this.rtlLineOffset = this.contentWidth - this.fontMetrics.$main.getBoundingClientRect().width;\n        }\n    };\n    this.updateBidiMap = function () {\n        var textCharTypes = [];\n        if (bidiUtil.hasBidiCharacters(this.line, textCharTypes) || this.isRtlDir) {\n            this.bidiMap = bidiUtil.doBidiReorder(this.line, textCharTypes, this.isRtlDir);\n        }\n        else {\n            this.bidiMap = {};\n        }\n    };\n    this.markAsDirty = function () {\n        this.currentRow = null;\n    };\n    this.updateCharacterWidths = function (fontMetrics) {\n        if (this.characterWidth === fontMetrics.$characterSize.width)\n            return;\n        this.fontMetrics = fontMetrics;\n        var characterWidth = this.characterWidth = fontMetrics.$characterSize.width;\n        var bidiCharWidth = fontMetrics.$measureCharWidth(\"\\u05d4\");\n        this.charWidths[bidiUtil.L] = this.charWidths[bidiUtil.EN] = this.charWidths[bidiUtil.ON_R] = characterWidth;\n        this.charWidths[bidiUtil.R] = this.charWidths[bidiUtil.AN] = bidiCharWidth;\n        this.charWidths[bidiUtil.R_H] = bidiCharWidth * 0.45;\n        this.charWidths[bidiUtil.B] = this.charWidths[bidiUtil.RLE] = 0;\n        this.currentRow = null;\n    };\n    this.setShowInvisibles = function (showInvisibles) {\n        this.showInvisibles = showInvisibles;\n        this.currentRow = null;\n    };\n    this.setEolChar = function (eolChar) {\n        this.EOL = eolChar;\n    };\n    this.setContentWidth = function (width) {\n        this.contentWidth = width;\n    };\n    this.isRtlLine = function (row) {\n        if (this.$isRtl)\n            return true;\n        if (row != undefined)\n            return (this.session.getLine(row).charAt(0) == this.RLE);\n        else\n            return this.isRtlDir;\n    };\n    this.setRtlDirection = function (editor, isRtlDir) {\n        var cursor = editor.getCursorPosition();\n        for (var row = editor.selection.getSelectionAnchor().row; row <= cursor.row; row++) {\n            if (!isRtlDir && editor.session.getLine(row).charAt(0) === editor.session.$bidiHandler.RLE)\n                editor.session.doc.removeInLine(row, 0, 1);\n            else if (isRtlDir && editor.session.getLine(row).charAt(0) !== editor.session.$bidiHandler.RLE)\n                editor.session.doc.insert({ column: 0, row: row }, editor.session.$bidiHandler.RLE);\n        }\n    };\n    this.getPosLeft = function (col) {\n        col -= this.wrapIndent;\n        var leftBoundary = (this.line.charAt(0) === this.RLE) ? 1 : 0;\n        var logicalIdx = (col > leftBoundary) ? (this.session.getOverwrite() ? col : col - 1) : leftBoundary;\n        var visualIdx = bidiUtil.getVisualFromLogicalIdx(logicalIdx, this.bidiMap), levels = this.bidiMap.bidiLevels, left = 0;\n        if (!this.session.getOverwrite() && col <= leftBoundary && levels[visualIdx] % 2 !== 0)\n            visualIdx++;\n        for (var i = 0; i < visualIdx; i++) {\n            left += this.charWidths[levels[i]];\n        }\n        if (!this.session.getOverwrite() && (col > leftBoundary) && (levels[visualIdx] % 2 === 0))\n            left += this.charWidths[levels[visualIdx]];\n        if (this.wrapIndent)\n            left += this.isRtlDir ? (-1 * this.wrapOffset) : this.wrapOffset;\n        if (this.isRtlDir)\n            left += this.rtlLineOffset;\n        return left;\n    };\n    this.getSelections = function (startCol, endCol) {\n        var map = this.bidiMap, levels = map.bidiLevels, level, selections = [], offset = 0, selColMin = Math.min(startCol, endCol) - this.wrapIndent, selColMax = Math.max(startCol, endCol) - this.wrapIndent, isSelected = false, isSelectedPrev = false, selectionStart = 0;\n        if (this.wrapIndent)\n            offset += this.isRtlDir ? (-1 * this.wrapOffset) : this.wrapOffset;\n        for (var logIdx, visIdx = 0; visIdx < levels.length; visIdx++) {\n            logIdx = map.logicalFromVisual[visIdx];\n            level = levels[visIdx];\n            isSelected = (logIdx >= selColMin) && (logIdx < selColMax);\n            if (isSelected && !isSelectedPrev) {\n                selectionStart = offset;\n            }\n            else if (!isSelected && isSelectedPrev) {\n                selections.push({ left: selectionStart, width: offset - selectionStart });\n            }\n            offset += this.charWidths[level];\n            isSelectedPrev = isSelected;\n        }\n        if (isSelected && (visIdx === levels.length)) {\n            selections.push({ left: selectionStart, width: offset - selectionStart });\n        }\n        if (this.isRtlDir) {\n            for (var i = 0; i < selections.length; i++) {\n                selections[i].left += this.rtlLineOffset;\n            }\n        }\n        return selections;\n    };\n    this.offsetToCol = function (posX) {\n        if (this.isRtlDir)\n            posX -= this.rtlLineOffset;\n        var logicalIdx = 0, posX = Math.max(posX, 0), offset = 0, visualIdx = 0, levels = this.bidiMap.bidiLevels, charWidth = this.charWidths[levels[visualIdx]];\n        if (this.wrapIndent)\n            posX -= this.isRtlDir ? (-1 * this.wrapOffset) : this.wrapOffset;\n        while (posX > offset + charWidth / 2) {\n            offset += charWidth;\n            if (visualIdx === levels.length - 1) {\n                charWidth = 0;\n                break;\n            }\n            charWidth = this.charWidths[levels[++visualIdx]];\n        }\n        if (visualIdx > 0 && (levels[visualIdx - 1] % 2 !== 0) && (levels[visualIdx] % 2 === 0)) {\n            if (posX < offset)\n                visualIdx--;\n            logicalIdx = this.bidiMap.logicalFromVisual[visualIdx];\n        }\n        else if (visualIdx > 0 && (levels[visualIdx - 1] % 2 === 0) && (levels[visualIdx] % 2 !== 0)) {\n            logicalIdx = 1 + ((posX > offset) ? this.bidiMap.logicalFromVisual[visualIdx]\n                : this.bidiMap.logicalFromVisual[visualIdx - 1]);\n        }\n        else if ((this.isRtlDir && visualIdx === levels.length - 1 && charWidth === 0 && (levels[visualIdx - 1] % 2 === 0))\n            || (!this.isRtlDir && visualIdx === 0 && (levels[visualIdx] % 2 !== 0))) {\n            logicalIdx = 1 + this.bidiMap.logicalFromVisual[visualIdx];\n        }\n        else {\n            if (visualIdx > 0 && (levels[visualIdx - 1] % 2 !== 0) && charWidth !== 0)\n                visualIdx--;\n            logicalIdx = this.bidiMap.logicalFromVisual[visualIdx];\n        }\n        if (logicalIdx === 0 && this.isRtlDir)\n            logicalIdx++;\n        return (logicalIdx + this.wrapIndent);\n    };\n}).call(BidiHandler.prototype);\nexports.BidiHandler = BidiHandler;\n\n});\n\nace.define(\"ace/selection\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/lang\",\"ace/lib/event_emitter\",\"ace/range\"], function(require, exports, module){\"use strict\";\nvar oop = require(\"./lib/oop\");\nvar lang = require(\"./lib/lang\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar Range = require(\"./range\").Range;\nvar Selection = function (session) {\n    this.session = session;\n    this.doc = session.getDocument();\n    this.clearSelection();\n    this.cursor = this.lead = this.doc.createAnchor(0, 0);\n    this.anchor = this.doc.createAnchor(0, 0);\n    this.$silent = false;\n    var self = this;\n    this.cursor.on(\"change\", function (e) {\n        self.$cursorChanged = true;\n        if (!self.$silent)\n            self._emit(\"changeCursor\");\n        if (!self.$isEmpty && !self.$silent)\n            self._emit(\"changeSelection\");\n        if (!self.$keepDesiredColumnOnChange && e.old.column != e.value.column)\n            self.$desiredColumn = null;\n    });\n    this.anchor.on(\"change\", function () {\n        self.$anchorChanged = true;\n        if (!self.$isEmpty && !self.$silent)\n            self._emit(\"changeSelection\");\n    });\n};\n(function () {\n    oop.implement(this, EventEmitter);\n    this.isEmpty = function () {\n        return this.$isEmpty || (this.anchor.row == this.lead.row &&\n            this.anchor.column == this.lead.column);\n    };\n    this.isMultiLine = function () {\n        return !this.$isEmpty && this.anchor.row != this.cursor.row;\n    };\n    this.getCursor = function () {\n        return this.lead.getPosition();\n    };\n    this.setSelectionAnchor = function (row, column) {\n        this.$isEmpty = false;\n        this.anchor.setPosition(row, column);\n    };\n    this.getAnchor =\n        this.getSelectionAnchor = function () {\n            if (this.$isEmpty)\n                return this.getSelectionLead();\n            return this.anchor.getPosition();\n        };\n    this.getSelectionLead = function () {\n        return this.lead.getPosition();\n    };\n    this.isBackwards = function () {\n        var anchor = this.anchor;\n        var lead = this.lead;\n        return (anchor.row > lead.row || (anchor.row == lead.row && anchor.column > lead.column));\n    };\n    this.getRange = function () {\n        var anchor = this.anchor;\n        var lead = this.lead;\n        if (this.$isEmpty)\n            return Range.fromPoints(lead, lead);\n        return this.isBackwards()\n            ? Range.fromPoints(lead, anchor)\n            : Range.fromPoints(anchor, lead);\n    };\n    this.clearSelection = function () {\n        if (!this.$isEmpty) {\n            this.$isEmpty = true;\n            this._emit(\"changeSelection\");\n        }\n    };\n    this.selectAll = function () {\n        this.$setSelection(0, 0, Number.MAX_VALUE, Number.MAX_VALUE);\n    };\n    this.setRange =\n        this.setSelectionRange = function (range, reverse) {\n            var start = reverse ? range.end : range.start;\n            var end = reverse ? range.start : range.end;\n            this.$setSelection(start.row, start.column, end.row, end.column);\n        };\n    this.$setSelection = function (anchorRow, anchorColumn, cursorRow, cursorColumn) {\n        if (this.$silent)\n            return;\n        var wasEmpty = this.$isEmpty;\n        var wasMultiselect = this.inMultiSelectMode;\n        this.$silent = true;\n        this.$cursorChanged = this.$anchorChanged = false;\n        this.anchor.setPosition(anchorRow, anchorColumn);\n        this.cursor.setPosition(cursorRow, cursorColumn);\n        this.$isEmpty = !Range.comparePoints(this.anchor, this.cursor);\n        this.$silent = false;\n        if (this.$cursorChanged)\n            this._emit(\"changeCursor\");\n        if (this.$cursorChanged || this.$anchorChanged || wasEmpty != this.$isEmpty || wasMultiselect)\n            this._emit(\"changeSelection\");\n    };\n    this.$moveSelection = function (mover) {\n        var lead = this.lead;\n        if (this.$isEmpty)\n            this.setSelectionAnchor(lead.row, lead.column);\n        mover.call(this);\n    };\n    this.selectTo = function (row, column) {\n        this.$moveSelection(function () {\n            this.moveCursorTo(row, column);\n        });\n    };\n    this.selectToPosition = function (pos) {\n        this.$moveSelection(function () {\n            this.moveCursorToPosition(pos);\n        });\n    };\n    this.moveTo = function (row, column) {\n        this.clearSelection();\n        this.moveCursorTo(row, column);\n    };\n    this.moveToPosition = function (pos) {\n        this.clearSelection();\n        this.moveCursorToPosition(pos);\n    };\n    this.selectUp = function () {\n        this.$moveSelection(this.moveCursorUp);\n    };\n    this.selectDown = function () {\n        this.$moveSelection(this.moveCursorDown);\n    };\n    this.selectRight = function () {\n        this.$moveSelection(this.moveCursorRight);\n    };\n    this.selectLeft = function () {\n        this.$moveSelection(this.moveCursorLeft);\n    };\n    this.selectLineStart = function () {\n        this.$moveSelection(this.moveCursorLineStart);\n    };\n    this.selectLineEnd = function () {\n        this.$moveSelection(this.moveCursorLineEnd);\n    };\n    this.selectFileEnd = function () {\n        this.$moveSelection(this.moveCursorFileEnd);\n    };\n    this.selectFileStart = function () {\n        this.$moveSelection(this.moveCursorFileStart);\n    };\n    this.selectWordRight = function () {\n        this.$moveSelection(this.moveCursorWordRight);\n    };\n    this.selectWordLeft = function () {\n        this.$moveSelection(this.moveCursorWordLeft);\n    };\n    this.getWordRange = function (row, column) {\n        if (typeof column == \"undefined\") {\n            var cursor = row || this.lead;\n            row = cursor.row;\n            column = cursor.column;\n        }\n        return this.session.getWordRange(row, column);\n    };\n    this.selectWord = function () {\n        this.setSelectionRange(this.getWordRange());\n    };\n    this.selectAWord = function () {\n        var cursor = this.getCursor();\n        var range = this.session.getAWordRange(cursor.row, cursor.column);\n        this.setSelectionRange(range);\n    };\n    this.getLineRange = function (row, excludeLastChar) {\n        var rowStart = typeof row == \"number\" ? row : this.lead.row;\n        var rowEnd;\n        var foldLine = this.session.getFoldLine(rowStart);\n        if (foldLine) {\n            rowStart = foldLine.start.row;\n            rowEnd = foldLine.end.row;\n        }\n        else {\n            rowEnd = rowStart;\n        }\n        if (excludeLastChar === true)\n            return new Range(rowStart, 0, rowEnd, this.session.getLine(rowEnd).length);\n        else\n            return new Range(rowStart, 0, rowEnd + 1, 0);\n    };\n    this.selectLine = function () {\n        this.setSelectionRange(this.getLineRange());\n    };\n    this.moveCursorUp = function () {\n        this.moveCursorBy(-1, 0);\n    };\n    this.moveCursorDown = function () {\n        this.moveCursorBy(1, 0);\n    };\n    this.wouldMoveIntoSoftTab = function (cursor, tabSize, direction) {\n        var start = cursor.column;\n        var end = cursor.column + tabSize;\n        if (direction < 0) {\n            start = cursor.column - tabSize;\n            end = cursor.column;\n        }\n        return this.session.isTabStop(cursor) && this.doc.getLine(cursor.row).slice(start, end).split(\" \").length - 1 == tabSize;\n    };\n    this.moveCursorLeft = function () {\n        var cursor = this.lead.getPosition(), fold;\n        if (fold = this.session.getFoldAt(cursor.row, cursor.column, -1)) {\n            this.moveCursorTo(fold.start.row, fold.start.column);\n        }\n        else if (cursor.column === 0) {\n            if (cursor.row > 0) {\n                this.moveCursorTo(cursor.row - 1, this.doc.getLine(cursor.row - 1).length);\n            }\n        }\n        else {\n            var tabSize = this.session.getTabSize();\n            if (this.wouldMoveIntoSoftTab(cursor, tabSize, -1) && !this.session.getNavigateWithinSoftTabs()) {\n                this.moveCursorBy(0, -tabSize);\n            }\n            else {\n                this.moveCursorBy(0, -1);\n            }\n        }\n    };\n    this.moveCursorRight = function () {\n        var cursor = this.lead.getPosition(), fold;\n        if (fold = this.session.getFoldAt(cursor.row, cursor.column, 1)) {\n            this.moveCursorTo(fold.end.row, fold.end.column);\n        }\n        else if (this.lead.column == this.doc.getLine(this.lead.row).length) {\n            if (this.lead.row < this.doc.getLength() - 1) {\n                this.moveCursorTo(this.lead.row + 1, 0);\n            }\n        }\n        else {\n            var tabSize = this.session.getTabSize();\n            var cursor = this.lead;\n            if (this.wouldMoveIntoSoftTab(cursor, tabSize, 1) && !this.session.getNavigateWithinSoftTabs()) {\n                this.moveCursorBy(0, tabSize);\n            }\n            else {\n                this.moveCursorBy(0, 1);\n            }\n        }\n    };\n    this.moveCursorLineStart = function () {\n        var row = this.lead.row;\n        var column = this.lead.column;\n        var screenRow = this.session.documentToScreenRow(row, column);\n        var firstColumnPosition = this.session.screenToDocumentPosition(screenRow, 0);\n        var beforeCursor = this.session.getDisplayLine(row, null, firstColumnPosition.row, firstColumnPosition.column);\n        var leadingSpace = beforeCursor.match(/^\\s*/);\n        if (leadingSpace[0].length != column && !this.session.$useEmacsStyleLineStart)\n            firstColumnPosition.column += leadingSpace[0].length;\n        this.moveCursorToPosition(firstColumnPosition);\n    };\n    this.moveCursorLineEnd = function () {\n        var lead = this.lead;\n        var lineEnd = this.session.getDocumentLastRowColumnPosition(lead.row, lead.column);\n        if (this.lead.column == lineEnd.column) {\n            var line = this.session.getLine(lineEnd.row);\n            if (lineEnd.column == line.length) {\n                var textEnd = line.search(/\\s+$/);\n                if (textEnd > 0)\n                    lineEnd.column = textEnd;\n            }\n        }\n        this.moveCursorTo(lineEnd.row, lineEnd.column);\n    };\n    this.moveCursorFileEnd = function () {\n        var row = this.doc.getLength() - 1;\n        var column = this.doc.getLine(row).length;\n        this.moveCursorTo(row, column);\n    };\n    this.moveCursorFileStart = function () {\n        this.moveCursorTo(0, 0);\n    };\n    this.moveCursorLongWordRight = function () {\n        var row = this.lead.row;\n        var column = this.lead.column;\n        var line = this.doc.getLine(row);\n        var rightOfCursor = line.substring(column);\n        this.session.nonTokenRe.lastIndex = 0;\n        this.session.tokenRe.lastIndex = 0;\n        var fold = this.session.getFoldAt(row, column, 1);\n        if (fold) {\n            this.moveCursorTo(fold.end.row, fold.end.column);\n            return;\n        }\n        if (this.session.nonTokenRe.exec(rightOfCursor)) {\n            column += this.session.nonTokenRe.lastIndex;\n            this.session.nonTokenRe.lastIndex = 0;\n            rightOfCursor = line.substring(column);\n        }\n        if (column >= line.length) {\n            this.moveCursorTo(row, line.length);\n            this.moveCursorRight();\n            if (row < this.doc.getLength() - 1)\n                this.moveCursorWordRight();\n            return;\n        }\n        if (this.session.tokenRe.exec(rightOfCursor)) {\n            column += this.session.tokenRe.lastIndex;\n            this.session.tokenRe.lastIndex = 0;\n        }\n        this.moveCursorTo(row, column);\n    };\n    this.moveCursorLongWordLeft = function () {\n        var row = this.lead.row;\n        var column = this.lead.column;\n        var fold;\n        if (fold = this.session.getFoldAt(row, column, -1)) {\n            this.moveCursorTo(fold.start.row, fold.start.column);\n            return;\n        }\n        var str = this.session.getFoldStringAt(row, column, -1);\n        if (str == null) {\n            str = this.doc.getLine(row).substring(0, column);\n        }\n        var leftOfCursor = lang.stringReverse(str);\n        this.session.nonTokenRe.lastIndex = 0;\n        this.session.tokenRe.lastIndex = 0;\n        if (this.session.nonTokenRe.exec(leftOfCursor)) {\n            column -= this.session.nonTokenRe.lastIndex;\n            leftOfCursor = leftOfCursor.slice(this.session.nonTokenRe.lastIndex);\n            this.session.nonTokenRe.lastIndex = 0;\n        }\n        if (column <= 0) {\n            this.moveCursorTo(row, 0);\n            this.moveCursorLeft();\n            if (row > 0)\n                this.moveCursorWordLeft();\n            return;\n        }\n        if (this.session.tokenRe.exec(leftOfCursor)) {\n            column -= this.session.tokenRe.lastIndex;\n            this.session.tokenRe.lastIndex = 0;\n        }\n        this.moveCursorTo(row, column);\n    };\n    this.$shortWordEndIndex = function (rightOfCursor) {\n        var index = 0, ch;\n        var whitespaceRe = /\\s/;\n        var tokenRe = this.session.tokenRe;\n        tokenRe.lastIndex = 0;\n        if (this.session.tokenRe.exec(rightOfCursor)) {\n            index = this.session.tokenRe.lastIndex;\n        }\n        else {\n            while ((ch = rightOfCursor[index]) && whitespaceRe.test(ch))\n                index++;\n            if (index < 1) {\n                tokenRe.lastIndex = 0;\n                while ((ch = rightOfCursor[index]) && !tokenRe.test(ch)) {\n                    tokenRe.lastIndex = 0;\n                    index++;\n                    if (whitespaceRe.test(ch)) {\n                        if (index > 2) {\n                            index--;\n                            break;\n                        }\n                        else {\n                            while ((ch = rightOfCursor[index]) && whitespaceRe.test(ch))\n                                index++;\n                            if (index > 2)\n                                break;\n                        }\n                    }\n                }\n            }\n        }\n        tokenRe.lastIndex = 0;\n        return index;\n    };\n    this.moveCursorShortWordRight = function () {\n        var row = this.lead.row;\n        var column = this.lead.column;\n        var line = this.doc.getLine(row);\n        var rightOfCursor = line.substring(column);\n        var fold = this.session.getFoldAt(row, column, 1);\n        if (fold)\n            return this.moveCursorTo(fold.end.row, fold.end.column);\n        if (column == line.length) {\n            var l = this.doc.getLength();\n            do {\n                row++;\n                rightOfCursor = this.doc.getLine(row);\n            } while (row < l && /^\\s*$/.test(rightOfCursor));\n            if (!/^\\s+/.test(rightOfCursor))\n                rightOfCursor = \"\";\n            column = 0;\n        }\n        var index = this.$shortWordEndIndex(rightOfCursor);\n        this.moveCursorTo(row, column + index);\n    };\n    this.moveCursorShortWordLeft = function () {\n        var row = this.lead.row;\n        var column = this.lead.column;\n        var fold;\n        if (fold = this.session.getFoldAt(row, column, -1))\n            return this.moveCursorTo(fold.start.row, fold.start.column);\n        var line = this.session.getLine(row).substring(0, column);\n        if (column === 0) {\n            do {\n                row--;\n                line = this.doc.getLine(row);\n            } while (row > 0 && /^\\s*$/.test(line));\n            column = line.length;\n            if (!/\\s+$/.test(line))\n                line = \"\";\n        }\n        var leftOfCursor = lang.stringReverse(line);\n        var index = this.$shortWordEndIndex(leftOfCursor);\n        return this.moveCursorTo(row, column - index);\n    };\n    this.moveCursorWordRight = function () {\n        if (this.session.$selectLongWords)\n            this.moveCursorLongWordRight();\n        else\n            this.moveCursorShortWordRight();\n    };\n    this.moveCursorWordLeft = function () {\n        if (this.session.$selectLongWords)\n            this.moveCursorLongWordLeft();\n        else\n            this.moveCursorShortWordLeft();\n    };\n    this.moveCursorBy = function (rows, chars) {\n        var screenPos = this.session.documentToScreenPosition(this.lead.row, this.lead.column);\n        var offsetX;\n        if (chars === 0) {\n            if (rows !== 0) {\n                if (this.session.$bidiHandler.isBidiRow(screenPos.row, this.lead.row)) {\n                    offsetX = this.session.$bidiHandler.getPosLeft(screenPos.column);\n                    screenPos.column = Math.round(offsetX / this.session.$bidiHandler.charWidths[0]);\n                }\n                else {\n                    offsetX = screenPos.column * this.session.$bidiHandler.charWidths[0];\n                }\n            }\n            if (this.$desiredColumn)\n                screenPos.column = this.$desiredColumn;\n            else\n                this.$desiredColumn = screenPos.column;\n        }\n        if (rows != 0 && this.session.lineWidgets && this.session.lineWidgets[this.lead.row]) {\n            var widget = this.session.lineWidgets[this.lead.row];\n            if (rows < 0)\n                rows -= widget.rowsAbove || 0;\n            else if (rows > 0)\n                rows += widget.rowCount - (widget.rowsAbove || 0);\n        }\n        var docPos = this.session.screenToDocumentPosition(screenPos.row + rows, screenPos.column, offsetX);\n        if (rows !== 0 && chars === 0 && docPos.row === this.lead.row && docPos.column === this.lead.column) {\n        }\n        this.moveCursorTo(docPos.row, docPos.column + chars, chars === 0);\n    };\n    this.moveCursorToPosition = function (position) {\n        this.moveCursorTo(position.row, position.column);\n    };\n    this.moveCursorTo = function (row, column, keepDesiredColumn) {\n        var fold = this.session.getFoldAt(row, column, 1);\n        if (fold) {\n            row = fold.start.row;\n            column = fold.start.column;\n        }\n        this.$keepDesiredColumnOnChange = true;\n        var line = this.session.getLine(row);\n        if (/[\\uDC00-\\uDFFF]/.test(line.charAt(column)) && line.charAt(column - 1)) {\n            if (this.lead.row == row && this.lead.column == column + 1)\n                column = column - 1;\n            else\n                column = column + 1;\n        }\n        this.lead.setPosition(row, column);\n        this.$keepDesiredColumnOnChange = false;\n        if (!keepDesiredColumn)\n            this.$desiredColumn = null;\n    };\n    this.moveCursorToScreen = function (row, column, keepDesiredColumn) {\n        var pos = this.session.screenToDocumentPosition(row, column);\n        this.moveCursorTo(pos.row, pos.column, keepDesiredColumn);\n    };\n    this.detach = function () {\n        this.lead.detach();\n        this.anchor.detach();\n    };\n    this.fromOrientedRange = function (range) {\n        this.setSelectionRange(range, range.cursor == range.start);\n        this.$desiredColumn = range.desiredColumn || this.$desiredColumn;\n    };\n    this.toOrientedRange = function (range) {\n        var r = this.getRange();\n        if (range) {\n            range.start.column = r.start.column;\n            range.start.row = r.start.row;\n            range.end.column = r.end.column;\n            range.end.row = r.end.row;\n        }\n        else {\n            range = r;\n        }\n        range.cursor = this.isBackwards() ? range.start : range.end;\n        range.desiredColumn = this.$desiredColumn;\n        return range;\n    };\n    this.getRangeOfMovements = function (func) {\n        var start = this.getCursor();\n        try {\n            func(this);\n            var end = this.getCursor();\n            return Range.fromPoints(start, end);\n        }\n        catch (e) {\n            return Range.fromPoints(start, start);\n        }\n        finally {\n            this.moveCursorToPosition(start);\n        }\n    };\n    this.toJSON = function () {\n        if (this.rangeCount) {\n            var data = this.ranges.map(function (r) {\n                var r1 = r.clone();\n                r1.isBackwards = r.cursor == r.start;\n                return r1;\n            });\n        }\n        else {\n            var data = this.getRange();\n            data.isBackwards = this.isBackwards();\n        }\n        return data;\n    };\n    this.fromJSON = function (data) {\n        if (data.start == undefined) {\n            if (this.rangeList && data.length > 1) {\n                this.toSingleRange(data[0]);\n                for (var i = data.length; i--;) {\n                    var r = Range.fromPoints(data[i].start, data[i].end);\n                    if (data[i].isBackwards)\n                        r.cursor = r.start;\n                    this.addRange(r, true);\n                }\n                return;\n            }\n            else {\n                data = data[0];\n            }\n        }\n        if (this.rangeList)\n            this.toSingleRange(data);\n        this.setSelectionRange(data, data.isBackwards);\n    };\n    this.isEqual = function (data) {\n        if ((data.length || this.rangeCount) && data.length != this.rangeCount)\n            return false;\n        if (!data.length || !this.ranges)\n            return this.getRange().isEqual(data);\n        for (var i = this.ranges.length; i--;) {\n            if (!this.ranges[i].isEqual(data[i]))\n                return false;\n        }\n        return true;\n    };\n}).call(Selection.prototype);\nexports.Selection = Selection;\n\n});\n\nace.define(\"ace/tokenizer\",[\"require\",\"exports\",\"module\",\"ace/config\"], function(require, exports, module){\"use strict\";\nvar config = require(\"./config\");\nvar MAX_TOKEN_COUNT = 2000;\nvar Tokenizer = function (rules) {\n    this.states = rules;\n    this.regExps = {};\n    this.matchMappings = {};\n    for (var key in this.states) {\n        var state = this.states[key];\n        var ruleRegExps = [];\n        var matchTotal = 0;\n        var mapping = this.matchMappings[key] = { defaultToken: \"text\" };\n        var flag = \"g\";\n        var splitterRurles = [];\n        for (var i = 0; i < state.length; i++) {\n            var rule = state[i];\n            if (rule.defaultToken)\n                mapping.defaultToken = rule.defaultToken;\n            if (rule.caseInsensitive && flag.indexOf(\"i\") === -1)\n                flag += \"i\";\n            if (rule.unicode && flag.indexOf(\"u\") === -1)\n                flag += \"u\";\n            if (rule.regex == null)\n                continue;\n            if (rule.regex instanceof RegExp)\n                rule.regex = rule.regex.toString().slice(1, -1);\n            var adjustedregex = rule.regex;\n            var matchcount = new RegExp(\"(?:(\" + adjustedregex + \")|(.))\").exec(\"a\").length - 2;\n            if (Array.isArray(rule.token)) {\n                if (rule.token.length == 1 || matchcount == 1) {\n                    rule.token = rule.token[0];\n                }\n                else if (matchcount - 1 != rule.token.length) {\n                    this.reportError(\"number of classes and regexp groups doesn't match\", {\n                        rule: rule,\n                        groupCount: matchcount - 1\n                    });\n                    rule.token = rule.token[0];\n                }\n                else {\n                    rule.tokenArray = rule.token;\n                    rule.token = null;\n                    rule.onMatch = this.$arrayTokens;\n                }\n            }\n            else if (typeof rule.token == \"function\" && !rule.onMatch) {\n                if (matchcount > 1)\n                    rule.onMatch = this.$applyToken;\n                else\n                    rule.onMatch = rule.token;\n            }\n            if (matchcount > 1) {\n                if (/\\\\\\d/.test(rule.regex)) {\n                    adjustedregex = rule.regex.replace(/\\\\([0-9]+)/g, function (match, digit) {\n                        return \"\\\\\" + (parseInt(digit, 10) + matchTotal + 1);\n                    });\n                }\n                else {\n                    matchcount = 1;\n                    adjustedregex = this.removeCapturingGroups(rule.regex);\n                }\n                if (!rule.splitRegex && typeof rule.token != \"string\")\n                    splitterRurles.push(rule); // flag will be known only at the very end\n            }\n            mapping[matchTotal] = i;\n            matchTotal += matchcount;\n            ruleRegExps.push(adjustedregex);\n            if (!rule.onMatch)\n                rule.onMatch = null;\n        }\n        if (!ruleRegExps.length) {\n            mapping[0] = 0;\n            ruleRegExps.push(\"$\");\n        }\n        splitterRurles.forEach(function (rule) {\n            rule.splitRegex = this.createSplitterRegexp(rule.regex, flag);\n        }, this);\n        this.regExps[key] = new RegExp(\"(\" + ruleRegExps.join(\")|(\") + \")|($)\", flag);\n    }\n};\n(function () {\n    this.$setMaxTokenCount = function (m) {\n        MAX_TOKEN_COUNT = m | 0;\n    };\n    this.$applyToken = function (str) {\n        var values = this.splitRegex.exec(str).slice(1);\n        var types = this.token.apply(this, values);\n        if (typeof types === \"string\")\n            return [{ type: types, value: str }];\n        var tokens = [];\n        for (var i = 0, l = types.length; i < l; i++) {\n            if (values[i])\n                tokens[tokens.length] = {\n                    type: types[i],\n                    value: values[i]\n                };\n        }\n        return tokens;\n    };\n    this.$arrayTokens = function (str) {\n        if (!str)\n            return [];\n        var values = this.splitRegex.exec(str);\n        if (!values)\n            return \"text\";\n        var tokens = [];\n        var types = this.tokenArray;\n        for (var i = 0, l = types.length; i < l; i++) {\n            if (values[i + 1])\n                tokens[tokens.length] = {\n                    type: types[i],\n                    value: values[i + 1]\n                };\n        }\n        return tokens;\n    };\n    this.removeCapturingGroups = function (src) {\n        var r = src.replace(/\\\\.|\\[(?:\\\\.|[^\\\\\\]])*|\\(\\?[:=!<]|(\\()/g, function (x, y) { return y ? \"(?:\" : x; });\n        return r;\n    };\n    this.createSplitterRegexp = function (src, flag) {\n        if (src.indexOf(\"(?=\") != -1) {\n            var stack = 0;\n            var inChClass = false;\n            var lastCapture = {};\n            src.replace(/(\\\\.)|(\\((?:\\?[=!])?)|(\\))|([\\[\\]])/g, function (m, esc, parenOpen, parenClose, square, index) {\n                if (inChClass) {\n                    inChClass = square != \"]\";\n                }\n                else if (square) {\n                    inChClass = true;\n                }\n                else if (parenClose) {\n                    if (stack == lastCapture.stack) {\n                        lastCapture.end = index + 1;\n                        lastCapture.stack = -1;\n                    }\n                    stack--;\n                }\n                else if (parenOpen) {\n                    stack++;\n                    if (parenOpen.length != 1) {\n                        lastCapture.stack = stack;\n                        lastCapture.start = index;\n                    }\n                }\n                return m;\n            });\n            if (lastCapture.end != null && /^\\)*$/.test(src.substr(lastCapture.end)))\n                src = src.substring(0, lastCapture.start) + src.substr(lastCapture.end);\n        }\n        if (src.charAt(0) != \"^\")\n            src = \"^\" + src;\n        if (src.charAt(src.length - 1) != \"$\")\n            src += \"$\";\n        return new RegExp(src, (flag || \"\").replace(\"g\", \"\"));\n    };\n    this.getLineTokens = function (line, startState) {\n        if (startState && typeof startState != \"string\") {\n            var stack = startState.slice(0);\n            startState = stack[0];\n            if (startState === \"#tmp\") {\n                stack.shift();\n                startState = stack.shift();\n            }\n        }\n        else\n            var stack = [];\n        var currentState = startState || \"start\";\n        var state = this.states[currentState];\n        if (!state) {\n            currentState = \"start\";\n            state = this.states[currentState];\n        }\n        var mapping = this.matchMappings[currentState];\n        var re = this.regExps[currentState];\n        re.lastIndex = 0;\n        var match, tokens = [];\n        var lastIndex = 0;\n        var matchAttempts = 0;\n        var token = { type: null, value: \"\" };\n        while (match = re.exec(line)) {\n            var type = mapping.defaultToken;\n            var rule = null;\n            var value = match[0];\n            var index = re.lastIndex;\n            if (index - value.length > lastIndex) {\n                var skipped = line.substring(lastIndex, index - value.length);\n                if (token.type == type) {\n                    token.value += skipped;\n                }\n                else {\n                    if (token.type)\n                        tokens.push(token);\n                    token = { type: type, value: skipped };\n                }\n            }\n            for (var i = 0; i < match.length - 2; i++) {\n                if (match[i + 1] === undefined)\n                    continue;\n                rule = state[mapping[i]];\n                if (rule.onMatch)\n                    type = rule.onMatch(value, currentState, stack, line);\n                else\n                    type = rule.token;\n                if (rule.next) {\n                    if (typeof rule.next == \"string\") {\n                        currentState = rule.next;\n                    }\n                    else {\n                        currentState = rule.next(currentState, stack);\n                    }\n                    state = this.states[currentState];\n                    if (!state) {\n                        this.reportError(\"state doesn't exist\", currentState);\n                        currentState = \"start\";\n                        state = this.states[currentState];\n                    }\n                    mapping = this.matchMappings[currentState];\n                    lastIndex = index;\n                    re = this.regExps[currentState];\n                    re.lastIndex = index;\n                }\n                if (rule.consumeLineEnd)\n                    lastIndex = index;\n                break;\n            }\n            if (value) {\n                if (typeof type === \"string\") {\n                    if ((!rule || rule.merge !== false) && token.type === type) {\n                        token.value += value;\n                    }\n                    else {\n                        if (token.type)\n                            tokens.push(token);\n                        token = { type: type, value: value };\n                    }\n                }\n                else if (type) {\n                    if (token.type)\n                        tokens.push(token);\n                    token = { type: null, value: \"\" };\n                    for (var i = 0; i < type.length; i++)\n                        tokens.push(type[i]);\n                }\n            }\n            if (lastIndex == line.length)\n                break;\n            lastIndex = index;\n            if (matchAttempts++ > MAX_TOKEN_COUNT) {\n                if (matchAttempts > 2 * line.length) {\n                    this.reportError(\"infinite loop with in ace tokenizer\", {\n                        startState: startState,\n                        line: line\n                    });\n                }\n                while (lastIndex < line.length) {\n                    if (token.type)\n                        tokens.push(token);\n                    token = {\n                        value: line.substring(lastIndex, lastIndex += 500),\n                        type: \"overflow\"\n                    };\n                }\n                currentState = \"start\";\n                stack = [];\n                break;\n            }\n        }\n        if (token.type)\n            tokens.push(token);\n        if (stack.length > 1) {\n            if (stack[0] !== currentState)\n                stack.unshift(\"#tmp\", currentState);\n        }\n        return {\n            tokens: tokens,\n            state: stack.length ? stack : currentState\n        };\n    };\n    this.reportError = config.reportError;\n}).call(Tokenizer.prototype);\nexports.Tokenizer = Tokenizer;\n\n});\n\nace.define(\"ace/mode/text_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/lang\"], function(require, exports, module){\"use strict\";\nvar lang = require(\"../lib/lang\");\nvar TextHighlightRules = function () {\n    this.$rules = {\n        \"start\": [{\n                token: \"empty_line\",\n                regex: '^$'\n            }, {\n                defaultToken: \"text\"\n            }]\n    };\n};\n(function () {\n    this.addRules = function (rules, prefix) {\n        if (!prefix) {\n            for (var key in rules)\n                this.$rules[key] = rules[key];\n            return;\n        }\n        for (var key in rules) {\n            var state = rules[key];\n            for (var i = 0; i < state.length; i++) {\n                var rule = state[i];\n                if (rule.next || rule.onMatch) {\n                    if (typeof rule.next == \"string\") {\n                        if (rule.next.indexOf(prefix) !== 0)\n                            rule.next = prefix + rule.next;\n                    }\n                    if (rule.nextState && rule.nextState.indexOf(prefix) !== 0)\n                        rule.nextState = prefix + rule.nextState;\n                }\n            }\n            this.$rules[prefix + key] = state;\n        }\n    };\n    this.getRules = function () {\n        return this.$rules;\n    };\n    this.embedRules = function (HighlightRules, prefix, escapeRules, states, append) {\n        var embedRules = typeof HighlightRules == \"function\"\n            ? new HighlightRules().getRules()\n            : HighlightRules;\n        if (states) {\n            for (var i = 0; i < states.length; i++)\n                states[i] = prefix + states[i];\n        }\n        else {\n            states = [];\n            for (var key in embedRules)\n                states.push(prefix + key);\n        }\n        this.addRules(embedRules, prefix);\n        if (escapeRules) {\n            var addRules = Array.prototype[append ? \"push\" : \"unshift\"];\n            for (var i = 0; i < states.length; i++)\n                addRules.apply(this.$rules[states[i]], lang.deepCopy(escapeRules));\n        }\n        if (!this.$embeds)\n            this.$embeds = [];\n        this.$embeds.push(prefix);\n    };\n    this.getEmbeds = function () {\n        return this.$embeds;\n    };\n    var pushState = function (currentState, stack) {\n        if (currentState != \"start\" || stack.length)\n            stack.unshift(this.nextState, currentState);\n        return this.nextState;\n    };\n    var popState = function (currentState, stack) {\n        stack.shift();\n        return stack.shift() || \"start\";\n    };\n    this.normalizeRules = function () {\n        var id = 0;\n        var rules = this.$rules;\n        function processState(key) {\n            var state = rules[key];\n            state.processed = true;\n            for (var i = 0; i < state.length; i++) {\n                var rule = state[i];\n                var toInsert = null;\n                if (Array.isArray(rule)) {\n                    toInsert = rule;\n                    rule = {};\n                }\n                if (!rule.regex && rule.start) {\n                    rule.regex = rule.start;\n                    if (!rule.next)\n                        rule.next = [];\n                    rule.next.push({\n                        defaultToken: rule.token\n                    }, {\n                        token: rule.token + \".end\",\n                        regex: rule.end || rule.start,\n                        next: \"pop\"\n                    });\n                    rule.token = rule.token + \".start\";\n                    rule.push = true;\n                }\n                var next = rule.next || rule.push;\n                if (next && Array.isArray(next)) {\n                    var stateName = rule.stateName;\n                    if (!stateName) {\n                        stateName = rule.token;\n                        if (typeof stateName != \"string\")\n                            stateName = stateName[0] || \"\";\n                        if (rules[stateName])\n                            stateName += id++;\n                    }\n                    rules[stateName] = next;\n                    rule.next = stateName;\n                    processState(stateName);\n                }\n                else if (next == \"pop\") {\n                    rule.next = popState;\n                }\n                if (rule.push) {\n                    rule.nextState = rule.next || rule.push;\n                    rule.next = pushState;\n                    delete rule.push;\n                }\n                if (rule.rules) {\n                    for (var r in rule.rules) {\n                        if (rules[r]) {\n                            if (rules[r].push)\n                                rules[r].push.apply(rules[r], rule.rules[r]);\n                        }\n                        else {\n                            rules[r] = rule.rules[r];\n                        }\n                    }\n                }\n                var includeName = typeof rule == \"string\" ? rule : rule.include;\n                if (includeName) {\n                    if (Array.isArray(includeName))\n                        toInsert = includeName.map(function (x) { return rules[x]; });\n                    else\n                        toInsert = rules[includeName];\n                }\n                if (toInsert) {\n                    var args = [i, 1].concat(toInsert);\n                    if (rule.noEscape)\n                        args = args.filter(function (x) { return !x.next; });\n                    state.splice.apply(state, args);\n                    i--;\n                }\n                if (rule.keywordMap) {\n                    rule.token = this.createKeywordMapper(rule.keywordMap, rule.defaultToken || \"text\", rule.caseInsensitive);\n                    delete rule.defaultToken;\n                }\n            }\n        }\n        Object.keys(rules).forEach(processState, this);\n    };\n    this.createKeywordMapper = function (map, defaultToken, ignoreCase, splitChar) {\n        var keywords = Object.create(null);\n        this.$keywordList = [];\n        Object.keys(map).forEach(function (className) {\n            var a = map[className];\n            var list = a.split(splitChar || \"|\");\n            for (var i = list.length; i--;) {\n                var word = list[i];\n                this.$keywordList.push(word);\n                if (ignoreCase)\n                    word = word.toLowerCase();\n                keywords[word] = className;\n            }\n        }, this);\n        map = null;\n        return ignoreCase\n            ? function (value) { return keywords[value.toLowerCase()] || defaultToken; }\n            : function (value) { return keywords[value] || defaultToken; };\n    };\n    this.getKeywords = function () {\n        return this.$keywords;\n    };\n}).call(TextHighlightRules.prototype);\nexports.TextHighlightRules = TextHighlightRules;\n\n});\n\nace.define(\"ace/mode/behaviour\",[\"require\",\"exports\",\"module\"], function(require, exports, module){\"use strict\";\nvar Behaviour = function () {\n    this.$behaviours = {};\n};\n(function () {\n    this.add = function (name, action, callback) {\n        switch (undefined) {\n            case this.$behaviours:\n                this.$behaviours = {};\n            case this.$behaviours[name]:\n                this.$behaviours[name] = {};\n        }\n        this.$behaviours[name][action] = callback;\n    };\n    this.addBehaviours = function (behaviours) {\n        for (var key in behaviours) {\n            for (var action in behaviours[key]) {\n                this.add(key, action, behaviours[key][action]);\n            }\n        }\n    };\n    this.remove = function (name) {\n        if (this.$behaviours && this.$behaviours[name]) {\n            delete this.$behaviours[name];\n        }\n    };\n    this.inherit = function (mode, filter) {\n        if (typeof mode === \"function\") {\n            var behaviours = new mode().getBehaviours(filter);\n        }\n        else {\n            var behaviours = mode.getBehaviours(filter);\n        }\n        this.addBehaviours(behaviours);\n    };\n    this.getBehaviours = function (filter) {\n        if (!filter) {\n            return this.$behaviours;\n        }\n        else {\n            var ret = {};\n            for (var i = 0; i < filter.length; i++) {\n                if (this.$behaviours[filter[i]]) {\n                    ret[filter[i]] = this.$behaviours[filter[i]];\n                }\n            }\n            return ret;\n        }\n    };\n}).call(Behaviour.prototype);\nexports.Behaviour = Behaviour;\n\n});\n\nace.define(\"ace/token_iterator\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(require, exports, module){\"use strict\";\nvar Range = require(\"./range\").Range;\nvar TokenIterator = function (session, initialRow, initialColumn) {\n    this.$session = session;\n    this.$row = initialRow;\n    this.$rowTokens = session.getTokens(initialRow);\n    var token = session.getTokenAt(initialRow, initialColumn);\n    this.$tokenIndex = token ? token.index : -1;\n};\n(function () {\n    this.stepBackward = function () {\n        this.$tokenIndex -= 1;\n        while (this.$tokenIndex < 0) {\n            this.$row -= 1;\n            if (this.$row < 0) {\n                this.$row = 0;\n                return null;\n            }\n            this.$rowTokens = this.$session.getTokens(this.$row);\n            this.$tokenIndex = this.$rowTokens.length - 1;\n        }\n        return this.$rowTokens[this.$tokenIndex];\n    };\n    this.stepForward = function () {\n        this.$tokenIndex += 1;\n        var rowCount;\n        while (this.$tokenIndex >= this.$rowTokens.length) {\n            this.$row += 1;\n            if (!rowCount)\n                rowCount = this.$session.getLength();\n            if (this.$row >= rowCount) {\n                this.$row = rowCount - 1;\n                return null;\n            }\n            this.$rowTokens = this.$session.getTokens(this.$row);\n            this.$tokenIndex = 0;\n        }\n        return this.$rowTokens[this.$tokenIndex];\n    };\n    this.getCurrentToken = function () {\n        return this.$rowTokens[this.$tokenIndex];\n    };\n    this.getCurrentTokenRow = function () {\n        return this.$row;\n    };\n    this.getCurrentTokenColumn = function () {\n        var rowTokens = this.$rowTokens;\n        var tokenIndex = this.$tokenIndex;\n        var column = rowTokens[tokenIndex].start;\n        if (column !== undefined)\n            return column;\n        column = 0;\n        while (tokenIndex > 0) {\n            tokenIndex -= 1;\n            column += rowTokens[tokenIndex].value.length;\n        }\n        return column;\n    };\n    this.getCurrentTokenPosition = function () {\n        return { row: this.$row, column: this.getCurrentTokenColumn() };\n    };\n    this.getCurrentTokenRange = function () {\n        var token = this.$rowTokens[this.$tokenIndex];\n        var column = this.getCurrentTokenColumn();\n        return new Range(this.$row, column, this.$row, column + token.value.length);\n    };\n}).call(TokenIterator.prototype);\nexports.TokenIterator = TokenIterator;\n\n});\n\nace.define(\"ace/mode/behaviour/cstyle\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/behaviour\",\"ace/token_iterator\",\"ace/lib/lang\"], function(require, exports, module){\"use strict\";\nvar oop = require(\"../../lib/oop\");\nvar Behaviour = require(\"../behaviour\").Behaviour;\nvar TokenIterator = require(\"../../token_iterator\").TokenIterator;\nvar lang = require(\"../../lib/lang\");\nvar SAFE_INSERT_IN_TOKENS = [\"text\", \"paren.rparen\", \"rparen\", \"paren\", \"punctuation.operator\"];\nvar SAFE_INSERT_BEFORE_TOKENS = [\"text\", \"paren.rparen\", \"rparen\", \"paren\", \"punctuation.operator\", \"comment\"];\nvar context;\nvar contextCache = {};\nvar defaultQuotes = { '\"': '\"', \"'\": \"'\" };\nvar initContext = function (editor) {\n    var id = -1;\n    if (editor.multiSelect) {\n        id = editor.selection.index;\n        if (contextCache.rangeCount != editor.multiSelect.rangeCount)\n            contextCache = { rangeCount: editor.multiSelect.rangeCount };\n    }\n    if (contextCache[id])\n        return context = contextCache[id];\n    context = contextCache[id] = {\n        autoInsertedBrackets: 0,\n        autoInsertedRow: -1,\n        autoInsertedLineEnd: \"\",\n        maybeInsertedBrackets: 0,\n        maybeInsertedRow: -1,\n        maybeInsertedLineStart: \"\",\n        maybeInsertedLineEnd: \"\"\n    };\n};\nvar getWrapped = function (selection, selected, opening, closing) {\n    var rowDiff = selection.end.row - selection.start.row;\n    return {\n        text: opening + selected + closing,\n        selection: [\n            0,\n            selection.start.column + 1,\n            rowDiff,\n            selection.end.column + (rowDiff ? 0 : 1)\n        ]\n    };\n};\nvar CstyleBehaviour = function (options) {\n    this.add(\"braces\", \"insertion\", function (state, action, editor, session, text) {\n        var cursor = editor.getCursorPosition();\n        var line = session.doc.getLine(cursor.row);\n        if (text == '{') {\n            initContext(editor);\n            var selection = editor.getSelectionRange();\n            var selected = session.doc.getTextRange(selection);\n            if (selected !== \"\" && selected !== \"{\" && editor.getWrapBehavioursEnabled()) {\n                return getWrapped(selection, selected, '{', '}');\n            }\n            else if (CstyleBehaviour.isSaneInsertion(editor, session)) {\n                if (/[\\]\\}\\)]/.test(line[cursor.column]) || editor.inMultiSelectMode || options && options.braces) {\n                    CstyleBehaviour.recordAutoInsert(editor, session, \"}\");\n                    return {\n                        text: '{}',\n                        selection: [1, 1]\n                    };\n                }\n                else {\n                    CstyleBehaviour.recordMaybeInsert(editor, session, \"{\");\n                    return {\n                        text: '{',\n                        selection: [1, 1]\n                    };\n                }\n            }\n        }\n        else if (text == '}') {\n            initContext(editor);\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            if (rightChar == '}') {\n                var matching = session.$findOpeningBracket('}', { column: cursor.column + 1, row: cursor.row });\n                if (matching !== null && CstyleBehaviour.isAutoInsertedClosing(cursor, line, text)) {\n                    CstyleBehaviour.popAutoInsertedClosing();\n                    return {\n                        text: '',\n                        selection: [1, 1]\n                    };\n                }\n            }\n        }\n        else if (text == \"\\n\" || text == \"\\r\\n\") {\n            initContext(editor);\n            var closing = \"\";\n            if (CstyleBehaviour.isMaybeInsertedClosing(cursor, line)) {\n                closing = lang.stringRepeat(\"}\", context.maybeInsertedBrackets);\n                CstyleBehaviour.clearMaybeInsertedClosing();\n            }\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            if (rightChar === '}') {\n                var openBracePos = session.findMatchingBracket({ row: cursor.row, column: cursor.column + 1 }, '}');\n                if (!openBracePos)\n                    return null;\n                var next_indent = this.$getIndent(session.getLine(openBracePos.row));\n            }\n            else if (closing) {\n                var next_indent = this.$getIndent(line);\n            }\n            else {\n                CstyleBehaviour.clearMaybeInsertedClosing();\n                return;\n            }\n            var indent = next_indent + session.getTabString();\n            return {\n                text: '\\n' + indent + '\\n' + next_indent + closing,\n                selection: [1, indent.length, 1, indent.length]\n            };\n        }\n        else {\n            CstyleBehaviour.clearMaybeInsertedClosing();\n        }\n    });\n    this.add(\"braces\", \"deletion\", function (state, action, editor, session, range) {\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && selected == '{') {\n            initContext(editor);\n            var line = session.doc.getLine(range.start.row);\n            var rightChar = line.substring(range.end.column, range.end.column + 1);\n            if (rightChar == '}') {\n                range.end.column++;\n                return range;\n            }\n            else {\n                context.maybeInsertedBrackets--;\n            }\n        }\n    });\n    this.add(\"parens\", \"insertion\", function (state, action, editor, session, text) {\n        if (text == '(') {\n            initContext(editor);\n            var selection = editor.getSelectionRange();\n            var selected = session.doc.getTextRange(selection);\n            if (selected !== \"\" && editor.getWrapBehavioursEnabled()) {\n                return getWrapped(selection, selected, '(', ')');\n            }\n            else if (CstyleBehaviour.isSaneInsertion(editor, session)) {\n                CstyleBehaviour.recordAutoInsert(editor, session, \")\");\n                return {\n                    text: '()',\n                    selection: [1, 1]\n                };\n            }\n        }\n        else if (text == ')') {\n            initContext(editor);\n            var cursor = editor.getCursorPosition();\n            var line = session.doc.getLine(cursor.row);\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            if (rightChar == ')') {\n                var matching = session.$findOpeningBracket(')', { column: cursor.column + 1, row: cursor.row });\n                if (matching !== null && CstyleBehaviour.isAutoInsertedClosing(cursor, line, text)) {\n                    CstyleBehaviour.popAutoInsertedClosing();\n                    return {\n                        text: '',\n                        selection: [1, 1]\n                    };\n                }\n            }\n        }\n    });\n    this.add(\"parens\", \"deletion\", function (state, action, editor, session, range) {\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && selected == '(') {\n            initContext(editor);\n            var line = session.doc.getLine(range.start.row);\n            var rightChar = line.substring(range.start.column + 1, range.start.column + 2);\n            if (rightChar == ')') {\n                range.end.column++;\n                return range;\n            }\n        }\n    });\n    this.add(\"brackets\", \"insertion\", function (state, action, editor, session, text) {\n        if (text == '[') {\n            initContext(editor);\n            var selection = editor.getSelectionRange();\n            var selected = session.doc.getTextRange(selection);\n            if (selected !== \"\" && editor.getWrapBehavioursEnabled()) {\n                return getWrapped(selection, selected, '[', ']');\n            }\n            else if (CstyleBehaviour.isSaneInsertion(editor, session)) {\n                CstyleBehaviour.recordAutoInsert(editor, session, \"]\");\n                return {\n                    text: '[]',\n                    selection: [1, 1]\n                };\n            }\n        }\n        else if (text == ']') {\n            initContext(editor);\n            var cursor = editor.getCursorPosition();\n            var line = session.doc.getLine(cursor.row);\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            if (rightChar == ']') {\n                var matching = session.$findOpeningBracket(']', { column: cursor.column + 1, row: cursor.row });\n                if (matching !== null && CstyleBehaviour.isAutoInsertedClosing(cursor, line, text)) {\n                    CstyleBehaviour.popAutoInsertedClosing();\n                    return {\n                        text: '',\n                        selection: [1, 1]\n                    };\n                }\n            }\n        }\n    });\n    this.add(\"brackets\", \"deletion\", function (state, action, editor, session, range) {\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && selected == '[') {\n            initContext(editor);\n            var line = session.doc.getLine(range.start.row);\n            var rightChar = line.substring(range.start.column + 1, range.start.column + 2);\n            if (rightChar == ']') {\n                range.end.column++;\n                return range;\n            }\n        }\n    });\n    this.add(\"string_dquotes\", \"insertion\", function (state, action, editor, session, text) {\n        var quotes = session.$mode.$quotes || defaultQuotes;\n        if (text.length == 1 && quotes[text]) {\n            if (this.lineCommentStart && this.lineCommentStart.indexOf(text) != -1)\n                return;\n            initContext(editor);\n            var quote = text;\n            var selection = editor.getSelectionRange();\n            var selected = session.doc.getTextRange(selection);\n            if (selected !== \"\" && (selected.length != 1 || !quotes[selected]) && editor.getWrapBehavioursEnabled()) {\n                return getWrapped(selection, selected, quote, quote);\n            }\n            else if (!selected) {\n                var cursor = editor.getCursorPosition();\n                var line = session.doc.getLine(cursor.row);\n                var leftChar = line.substring(cursor.column - 1, cursor.column);\n                var rightChar = line.substring(cursor.column, cursor.column + 1);\n                var token = session.getTokenAt(cursor.row, cursor.column);\n                var rightToken = session.getTokenAt(cursor.row, cursor.column + 1);\n                if (leftChar == \"\\\\\" && token && /escape/.test(token.type))\n                    return null;\n                var stringBefore = token && /string|escape/.test(token.type);\n                var stringAfter = !rightToken || /string|escape/.test(rightToken.type);\n                var pair;\n                if (rightChar == quote) {\n                    pair = stringBefore !== stringAfter;\n                    if (pair && /string\\.end/.test(rightToken.type))\n                        pair = false;\n                }\n                else {\n                    if (stringBefore && !stringAfter)\n                        return null; // wrap string with different quote\n                    if (stringBefore && stringAfter)\n                        return null; // do not pair quotes inside strings\n                    var wordRe = session.$mode.tokenRe;\n                    wordRe.lastIndex = 0;\n                    var isWordBefore = wordRe.test(leftChar);\n                    wordRe.lastIndex = 0;\n                    var isWordAfter = wordRe.test(leftChar);\n                    if (isWordBefore || isWordAfter)\n                        return null; // before or after alphanumeric\n                    if (rightChar && !/[\\s;,.})\\]\\\\]/.test(rightChar))\n                        return null; // there is rightChar and it isn't closing\n                    var charBefore = line[cursor.column - 2];\n                    if (leftChar == quote && (charBefore == quote || wordRe.test(charBefore)))\n                        return null;\n                    pair = true;\n                }\n                return {\n                    text: pair ? quote + quote : \"\",\n                    selection: [1, 1]\n                };\n            }\n        }\n    });\n    this.add(\"string_dquotes\", \"deletion\", function (state, action, editor, session, range) {\n        var quotes = session.$mode.$quotes || defaultQuotes;\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && quotes.hasOwnProperty(selected)) {\n            initContext(editor);\n            var line = session.doc.getLine(range.start.row);\n            var rightChar = line.substring(range.start.column + 1, range.start.column + 2);\n            if (rightChar == selected) {\n                range.end.column++;\n                return range;\n            }\n        }\n    });\n};\nCstyleBehaviour.isSaneInsertion = function (editor, session) {\n    var cursor = editor.getCursorPosition();\n    var iterator = new TokenIterator(session, cursor.row, cursor.column);\n    if (!this.$matchTokenType(iterator.getCurrentToken() || \"text\", SAFE_INSERT_IN_TOKENS)) {\n        if (/[)}\\]]/.test(editor.session.getLine(cursor.row)[cursor.column]))\n            return true;\n        var iterator2 = new TokenIterator(session, cursor.row, cursor.column + 1);\n        if (!this.$matchTokenType(iterator2.getCurrentToken() || \"text\", SAFE_INSERT_IN_TOKENS))\n            return false;\n    }\n    iterator.stepForward();\n    return iterator.getCurrentTokenRow() !== cursor.row ||\n        this.$matchTokenType(iterator.getCurrentToken() || \"text\", SAFE_INSERT_BEFORE_TOKENS);\n};\nCstyleBehaviour.$matchTokenType = function (token, types) {\n    return types.indexOf(token.type || token) > -1;\n};\nCstyleBehaviour.recordAutoInsert = function (editor, session, bracket) {\n    var cursor = editor.getCursorPosition();\n    var line = session.doc.getLine(cursor.row);\n    if (!this.isAutoInsertedClosing(cursor, line, context.autoInsertedLineEnd[0]))\n        context.autoInsertedBrackets = 0;\n    context.autoInsertedRow = cursor.row;\n    context.autoInsertedLineEnd = bracket + line.substr(cursor.column);\n    context.autoInsertedBrackets++;\n};\nCstyleBehaviour.recordMaybeInsert = function (editor, session, bracket) {\n    var cursor = editor.getCursorPosition();\n    var line = session.doc.getLine(cursor.row);\n    if (!this.isMaybeInsertedClosing(cursor, line))\n        context.maybeInsertedBrackets = 0;\n    context.maybeInsertedRow = cursor.row;\n    context.maybeInsertedLineStart = line.substr(0, cursor.column) + bracket;\n    context.maybeInsertedLineEnd = line.substr(cursor.column);\n    context.maybeInsertedBrackets++;\n};\nCstyleBehaviour.isAutoInsertedClosing = function (cursor, line, bracket) {\n    return context.autoInsertedBrackets > 0 &&\n        cursor.row === context.autoInsertedRow &&\n        bracket === context.autoInsertedLineEnd[0] &&\n        line.substr(cursor.column) === context.autoInsertedLineEnd;\n};\nCstyleBehaviour.isMaybeInsertedClosing = function (cursor, line) {\n    return context.maybeInsertedBrackets > 0 &&\n        cursor.row === context.maybeInsertedRow &&\n        line.substr(cursor.column) === context.maybeInsertedLineEnd &&\n        line.substr(0, cursor.column) == context.maybeInsertedLineStart;\n};\nCstyleBehaviour.popAutoInsertedClosing = function () {\n    context.autoInsertedLineEnd = context.autoInsertedLineEnd.substr(1);\n    context.autoInsertedBrackets--;\n};\nCstyleBehaviour.clearMaybeInsertedClosing = function () {\n    if (context) {\n        context.maybeInsertedBrackets = 0;\n        context.maybeInsertedRow = -1;\n    }\n};\noop.inherits(CstyleBehaviour, Behaviour);\nexports.CstyleBehaviour = CstyleBehaviour;\n\n});\n\nace.define(\"ace/unicode\",[\"require\",\"exports\",\"module\"], function(require, exports, module){\"use strict\";\nvar wordChars = [48, 9, 8, 25, 5, 0, 2, 25, 48, 0, 11, 0, 5, 0, 6, 22, 2, 30, 2, 457, 5, 11, 15, 4, 8, 0, 2, 0, 18, 116, 2, 1, 3, 3, 9, 0, 2, 2, 2, 0, 2, 19, 2, 82, 2, 138, 2, 4, 3, 155, 12, 37, 3, 0, 8, 38, 10, 44, 2, 0, 2, 1, 2, 1, 2, 0, 9, 26, 6, 2, 30, 10, 7, 61, 2, 9, 5, 101, 2, 7, 3, 9, 2, 18, 3, 0, 17, 58, 3, 100, 15, 53, 5, 0, 6, 45, 211, 57, 3, 18, 2, 5, 3, 11, 3, 9, 2, 1, 7, 6, 2, 2, 2, 7, 3, 1, 3, 21, 2, 6, 2, 0, 4, 3, 3, 8, 3, 1, 3, 3, 9, 0, 5, 1, 2, 4, 3, 11, 16, 2, 2, 5, 5, 1, 3, 21, 2, 6, 2, 1, 2, 1, 2, 1, 3, 0, 2, 4, 5, 1, 3, 2, 4, 0, 8, 3, 2, 0, 8, 15, 12, 2, 2, 8, 2, 2, 2, 21, 2, 6, 2, 1, 2, 4, 3, 9, 2, 2, 2, 2, 3, 0, 16, 3, 3, 9, 18, 2, 2, 7, 3, 1, 3, 21, 2, 6, 2, 1, 2, 4, 3, 8, 3, 1, 3, 2, 9, 1, 5, 1, 2, 4, 3, 9, 2, 0, 17, 1, 2, 5, 4, 2, 2, 3, 4, 1, 2, 0, 2, 1, 4, 1, 4, 2, 4, 11, 5, 4, 4, 2, 2, 3, 3, 0, 7, 0, 15, 9, 18, 2, 2, 7, 2, 2, 2, 22, 2, 9, 2, 4, 4, 7, 2, 2, 2, 3, 8, 1, 2, 1, 7, 3, 3, 9, 19, 1, 2, 7, 2, 2, 2, 22, 2, 9, 2, 4, 3, 8, 2, 2, 2, 3, 8, 1, 8, 0, 2, 3, 3, 9, 19, 1, 2, 7, 2, 2, 2, 22, 2, 15, 4, 7, 2, 2, 2, 3, 10, 0, 9, 3, 3, 9, 11, 5, 3, 1, 2, 17, 4, 23, 2, 8, 2, 0, 3, 6, 4, 0, 5, 5, 2, 0, 2, 7, 19, 1, 14, 57, 6, 14, 2, 9, 40, 1, 2, 0, 3, 1, 2, 0, 3, 0, 7, 3, 2, 6, 2, 2, 2, 0, 2, 0, 3, 1, 2, 12, 2, 2, 3, 4, 2, 0, 2, 5, 3, 9, 3, 1, 35, 0, 24, 1, 7, 9, 12, 0, 2, 0, 2, 0, 5, 9, 2, 35, 5, 19, 2, 5, 5, 7, 2, 35, 10, 0, 58, 73, 7, 77, 3, 37, 11, 42, 2, 0, 4, 328, 2, 3, 3, 6, 2, 0, 2, 3, 3, 40, 2, 3, 3, 32, 2, 3, 3, 6, 2, 0, 2, 3, 3, 14, 2, 56, 2, 3, 3, 66, 5, 0, 33, 15, 17, 84, 13, 619, 3, 16, 2, 25, 6, 74, 22, 12, 2, 6, 12, 20, 12, 19, 13, 12, 2, 2, 2, 1, 13, 51, 3, 29, 4, 0, 5, 1, 3, 9, 34, 2, 3, 9, 7, 87, 9, 42, 6, 69, 11, 28, 4, 11, 5, 11, 11, 39, 3, 4, 12, 43, 5, 25, 7, 10, 38, 27, 5, 62, 2, 28, 3, 10, 7, 9, 14, 0, 89, 75, 5, 9, 18, 8, 13, 42, 4, 11, 71, 55, 9, 9, 4, 48, 83, 2, 2, 30, 14, 230, 23, 280, 3, 5, 3, 37, 3, 5, 3, 7, 2, 0, 2, 0, 2, 0, 2, 30, 3, 52, 2, 6, 2, 0, 4, 2, 2, 6, 4, 3, 3, 5, 5, 12, 6, 2, 2, 6, 67, 1, 20, 0, 29, 0, 14, 0, 17, 4, 60, 12, 5, 0, 4, 11, 18, 0, 5, 0, 3, 9, 2, 0, 4, 4, 7, 0, 2, 0, 2, 0, 2, 3, 2, 10, 3, 3, 6, 4, 5, 0, 53, 1, 2684, 46, 2, 46, 2, 132, 7, 6, 15, 37, 11, 53, 10, 0, 17, 22, 10, 6, 2, 6, 2, 6, 2, 6, 2, 6, 2, 6, 2, 6, 2, 6, 2, 31, 48, 0, 470, 1, 36, 5, 2, 4, 6, 1, 5, 85, 3, 1, 3, 2, 2, 89, 2, 3, 6, 40, 4, 93, 18, 23, 57, 15, 513, 6581, 75, 20939, 53, 1164, 68, 45, 3, 268, 4, 27, 21, 31, 3, 13, 13, 1, 2, 24, 9, 69, 11, 1, 38, 8, 3, 102, 3, 1, 111, 44, 25, 51, 13, 68, 12, 9, 7, 23, 4, 0, 5, 45, 3, 35, 13, 28, 4, 64, 15, 10, 39, 54, 10, 13, 3, 9, 7, 22, 4, 1, 5, 66, 25, 2, 227, 42, 2, 1, 3, 9, 7, 11171, 13, 22, 5, 48, 8453, 301, 3, 61, 3, 105, 39, 6, 13, 4, 6, 11, 2, 12, 2, 4, 2, 0, 2, 1, 2, 1, 2, 107, 34, 362, 19, 63, 3, 53, 41, 11, 5, 15, 17, 6, 13, 1, 25, 2, 33, 4, 2, 134, 20, 9, 8, 25, 5, 0, 2, 25, 12, 88, 4, 5, 3, 5, 3, 5, 3, 2];\nvar code = 0;\nvar str = [];\nfor (var i = 0; i < wordChars.length; i += 2) {\n    str.push(code += wordChars[i]);\n    if (wordChars[i + 1])\n        str.push(45, code += wordChars[i + 1]);\n}\nexports.wordChars = String.fromCharCode.apply(null, str);\n\n});\n\nace.define(\"ace/mode/text\",[\"require\",\"exports\",\"module\",\"ace/config\",\"ace/tokenizer\",\"ace/mode/text_highlight_rules\",\"ace/mode/behaviour/cstyle\",\"ace/unicode\",\"ace/lib/lang\",\"ace/token_iterator\",\"ace/range\"], function(require, exports, module){\"use strict\";\nvar config = require(\"../config\");\nvar Tokenizer = require(\"../tokenizer\").Tokenizer;\nvar TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\nvar CstyleBehaviour = require(\"./behaviour/cstyle\").CstyleBehaviour;\nvar unicode = require(\"../unicode\");\nvar lang = require(\"../lib/lang\");\nvar TokenIterator = require(\"../token_iterator\").TokenIterator;\nvar Range = require(\"../range\").Range;\nvar Mode = function () {\n    this.HighlightRules = TextHighlightRules;\n};\n(function () {\n    this.$defaultBehaviour = new CstyleBehaviour();\n    this.tokenRe = new RegExp(\"^[\" + unicode.wordChars + \"\\\\$_]+\", \"g\");\n    this.nonTokenRe = new RegExp(\"^(?:[^\" + unicode.wordChars + \"\\\\$_]|\\\\s])+\", \"g\");\n    this.getTokenizer = function () {\n        if (!this.$tokenizer) {\n            this.$highlightRules = this.$highlightRules || new this.HighlightRules(this.$highlightRuleConfig);\n            this.$tokenizer = new Tokenizer(this.$highlightRules.getRules());\n        }\n        return this.$tokenizer;\n    };\n    this.lineCommentStart = \"\";\n    this.blockComment = \"\";\n    this.toggleCommentLines = function (state, session, startRow, endRow) {\n        var doc = session.doc;\n        var ignoreBlankLines = true;\n        var shouldRemove = true;\n        var minIndent = Infinity;\n        var tabSize = session.getTabSize();\n        var insertAtTabStop = false;\n        if (!this.lineCommentStart) {\n            if (!this.blockComment)\n                return false;\n            var lineCommentStart = this.blockComment.start;\n            var lineCommentEnd = this.blockComment.end;\n            var regexpStart = new RegExp(\"^(\\\\s*)(?:\" + lang.escapeRegExp(lineCommentStart) + \")\");\n            var regexpEnd = new RegExp(\"(?:\" + lang.escapeRegExp(lineCommentEnd) + \")\\\\s*$\");\n            var comment = function (line, i) {\n                if (testRemove(line, i))\n                    return;\n                if (!ignoreBlankLines || /\\S/.test(line)) {\n                    doc.insertInLine({ row: i, column: line.length }, lineCommentEnd);\n                    doc.insertInLine({ row: i, column: minIndent }, lineCommentStart);\n                }\n            };\n            var uncomment = function (line, i) {\n                var m;\n                if (m = line.match(regexpEnd))\n                    doc.removeInLine(i, line.length - m[0].length, line.length);\n                if (m = line.match(regexpStart))\n                    doc.removeInLine(i, m[1].length, m[0].length);\n            };\n            var testRemove = function (line, row) {\n                if (regexpStart.test(line))\n                    return true;\n                var tokens = session.getTokens(row);\n                for (var i = 0; i < tokens.length; i++) {\n                    if (tokens[i].type === \"comment\")\n                        return true;\n                }\n            };\n        }\n        else {\n            if (Array.isArray(this.lineCommentStart)) {\n                var regexpStart = this.lineCommentStart.map(lang.escapeRegExp).join(\"|\");\n                var lineCommentStart = this.lineCommentStart[0];\n            }\n            else {\n                var regexpStart = lang.escapeRegExp(this.lineCommentStart);\n                var lineCommentStart = this.lineCommentStart;\n            }\n            regexpStart = new RegExp(\"^(\\\\s*)(?:\" + regexpStart + \") ?\");\n            insertAtTabStop = session.getUseSoftTabs();\n            var uncomment = function (line, i) {\n                var m = line.match(regexpStart);\n                if (!m)\n                    return;\n                var start = m[1].length, end = m[0].length;\n                if (!shouldInsertSpace(line, start, end) && m[0][end - 1] == \" \")\n                    end--;\n                doc.removeInLine(i, start, end);\n            };\n            var commentWithSpace = lineCommentStart + \" \";\n            var comment = function (line, i) {\n                if (!ignoreBlankLines || /\\S/.test(line)) {\n                    if (shouldInsertSpace(line, minIndent, minIndent))\n                        doc.insertInLine({ row: i, column: minIndent }, commentWithSpace);\n                    else\n                        doc.insertInLine({ row: i, column: minIndent }, lineCommentStart);\n                }\n            };\n            var testRemove = function (line, i) {\n                return regexpStart.test(line);\n            };\n            var shouldInsertSpace = function (line, before, after) {\n                var spaces = 0;\n                while (before-- && line.charAt(before) == \" \")\n                    spaces++;\n                if (spaces % tabSize != 0)\n                    return false;\n                var spaces = 0;\n                while (line.charAt(after++) == \" \")\n                    spaces++;\n                if (tabSize > 2)\n                    return spaces % tabSize != tabSize - 1;\n                else\n                    return spaces % tabSize == 0;\n            };\n        }\n        function iter(fun) {\n            for (var i = startRow; i <= endRow; i++)\n                fun(doc.getLine(i), i);\n        }\n        var minEmptyLength = Infinity;\n        iter(function (line, i) {\n            var indent = line.search(/\\S/);\n            if (indent !== -1) {\n                if (indent < minIndent)\n                    minIndent = indent;\n                if (shouldRemove && !testRemove(line, i))\n                    shouldRemove = false;\n            }\n            else if (minEmptyLength > line.length) {\n                minEmptyLength = line.length;\n            }\n        });\n        if (minIndent == Infinity) {\n            minIndent = minEmptyLength;\n            ignoreBlankLines = false;\n            shouldRemove = false;\n        }\n        if (insertAtTabStop && minIndent % tabSize != 0)\n            minIndent = Math.floor(minIndent / tabSize) * tabSize;\n        iter(shouldRemove ? uncomment : comment);\n    };\n    this.toggleBlockComment = function (state, session, range, cursor) {\n        var comment = this.blockComment;\n        if (!comment)\n            return;\n        if (!comment.start && comment[0])\n            comment = comment[0];\n        var iterator = new TokenIterator(session, cursor.row, cursor.column);\n        var token = iterator.getCurrentToken();\n        var sel = session.selection;\n        var initialRange = session.selection.toOrientedRange();\n        var startRow, colDiff;\n        if (token && /comment/.test(token.type)) {\n            var startRange, endRange;\n            while (token && /comment/.test(token.type)) {\n                var i = token.value.indexOf(comment.start);\n                if (i != -1) {\n                    var row = iterator.getCurrentTokenRow();\n                    var column = iterator.getCurrentTokenColumn() + i;\n                    startRange = new Range(row, column, row, column + comment.start.length);\n                    break;\n                }\n                token = iterator.stepBackward();\n            }\n            var iterator = new TokenIterator(session, cursor.row, cursor.column);\n            var token = iterator.getCurrentToken();\n            while (token && /comment/.test(token.type)) {\n                var i = token.value.indexOf(comment.end);\n                if (i != -1) {\n                    var row = iterator.getCurrentTokenRow();\n                    var column = iterator.getCurrentTokenColumn() + i;\n                    endRange = new Range(row, column, row, column + comment.end.length);\n                    break;\n                }\n                token = iterator.stepForward();\n            }\n            if (endRange)\n                session.remove(endRange);\n            if (startRange) {\n                session.remove(startRange);\n                startRow = startRange.start.row;\n                colDiff = -comment.start.length;\n            }\n        }\n        else {\n            colDiff = comment.start.length;\n            startRow = range.start.row;\n            session.insert(range.end, comment.end);\n            session.insert(range.start, comment.start);\n        }\n        if (initialRange.start.row == startRow)\n            initialRange.start.column += colDiff;\n        if (initialRange.end.row == startRow)\n            initialRange.end.column += colDiff;\n        session.selection.fromOrientedRange(initialRange);\n    };\n    this.getNextLineIndent = function (state, line, tab) {\n        return this.$getIndent(line);\n    };\n    this.checkOutdent = function (state, line, input) {\n        return false;\n    };\n    this.autoOutdent = function (state, doc, row) {\n    };\n    this.$getIndent = function (line) {\n        return line.match(/^\\s*/)[0];\n    };\n    this.createWorker = function (session) {\n        return null;\n    };\n    this.createModeDelegates = function (mapping) {\n        this.$embeds = [];\n        this.$modes = {};\n        for (var i in mapping) {\n            if (mapping[i]) {\n                var Mode = mapping[i];\n                var id = Mode.prototype.$id;\n                var mode = config.$modes[id];\n                if (!mode)\n                    config.$modes[id] = mode = new Mode();\n                if (!config.$modes[i])\n                    config.$modes[i] = mode;\n                this.$embeds.push(i);\n                this.$modes[i] = mode;\n            }\n        }\n        var delegations = [\"toggleBlockComment\", \"toggleCommentLines\", \"getNextLineIndent\",\n            \"checkOutdent\", \"autoOutdent\", \"transformAction\", \"getCompletions\"];\n        for (var i = 0; i < delegations.length; i++) {\n            (function (scope) {\n                var functionName = delegations[i];\n                var defaultHandler = scope[functionName];\n                scope[delegations[i]] = function () {\n                    return this.$delegator(functionName, arguments, defaultHandler);\n                };\n            }(this));\n        }\n    };\n    this.$delegator = function (method, args, defaultHandler) {\n        var state = args[0] || \"start\";\n        if (typeof state != \"string\") {\n            if (Array.isArray(state[2])) {\n                var language = state[2][state[2].length - 1];\n                var mode = this.$modes[language];\n                if (mode)\n                    return mode[method].apply(mode, [state[1]].concat([].slice.call(args, 1)));\n            }\n            state = state[0] || \"start\";\n        }\n        for (var i = 0; i < this.$embeds.length; i++) {\n            if (!this.$modes[this.$embeds[i]])\n                continue;\n            var split = state.split(this.$embeds[i]);\n            if (!split[0] && split[1]) {\n                args[0] = split[1];\n                var mode = this.$modes[this.$embeds[i]];\n                return mode[method].apply(mode, args);\n            }\n        }\n        var ret = defaultHandler.apply(this, args);\n        return defaultHandler ? ret : undefined;\n    };\n    this.transformAction = function (state, action, editor, session, param) {\n        if (this.$behaviour) {\n            var behaviours = this.$behaviour.getBehaviours();\n            for (var key in behaviours) {\n                if (behaviours[key][action]) {\n                    var ret = behaviours[key][action].apply(this, arguments);\n                    if (ret) {\n                        return ret;\n                    }\n                }\n            }\n        }\n    };\n    this.getKeywords = function (append) {\n        if (!this.completionKeywords) {\n            var rules = this.$tokenizer.rules;\n            var completionKeywords = [];\n            for (var rule in rules) {\n                var ruleItr = rules[rule];\n                for (var r = 0, l = ruleItr.length; r < l; r++) {\n                    if (typeof ruleItr[r].token === \"string\") {\n                        if (/keyword|support|storage/.test(ruleItr[r].token))\n                            completionKeywords.push(ruleItr[r].regex);\n                    }\n                    else if (typeof ruleItr[r].token === \"object\") {\n                        for (var a = 0, aLength = ruleItr[r].token.length; a < aLength; a++) {\n                            if (/keyword|support|storage/.test(ruleItr[r].token[a])) {\n                                var rule = ruleItr[r].regex.match(/\\(.+?\\)/g)[a];\n                                completionKeywords.push(rule.substr(1, rule.length - 2));\n                            }\n                        }\n                    }\n                }\n            }\n            this.completionKeywords = completionKeywords;\n        }\n        if (!append)\n            return this.$keywordList;\n        return completionKeywords.concat(this.$keywordList || []);\n    };\n    this.$createKeywordList = function () {\n        if (!this.$highlightRules)\n            this.getTokenizer();\n        return this.$keywordList = this.$highlightRules.$keywordList || [];\n    };\n    this.getCompletions = function (state, session, pos, prefix) {\n        var keywords = this.$keywordList || this.$createKeywordList();\n        return keywords.map(function (word) {\n            return {\n                name: word,\n                value: word,\n                score: 0,\n                meta: \"keyword\"\n            };\n        });\n    };\n    this.$id = \"ace/mode/text\";\n}).call(Mode.prototype);\nexports.Mode = Mode;\n\n});\n\nace.define(\"ace/apply_delta\",[\"require\",\"exports\",\"module\"], function(require, exports, module){\"use strict\";\nfunction throwDeltaError(delta, errorText) {\n    console.log(\"Invalid Delta:\", delta);\n    throw \"Invalid Delta: \" + errorText;\n}\nfunction positionInDocument(docLines, position) {\n    return position.row >= 0 && position.row < docLines.length &&\n        position.column >= 0 && position.column <= docLines[position.row].length;\n}\nfunction validateDelta(docLines, delta) {\n    if (delta.action != \"insert\" && delta.action != \"remove\")\n        throwDeltaError(delta, \"delta.action must be 'insert' or 'remove'\");\n    if (!(delta.lines instanceof Array))\n        throwDeltaError(delta, \"delta.lines must be an Array\");\n    if (!delta.start || !delta.end)\n        throwDeltaError(delta, \"delta.start/end must be an present\");\n    var start = delta.start;\n    if (!positionInDocument(docLines, delta.start))\n        throwDeltaError(delta, \"delta.start must be contained in document\");\n    var end = delta.end;\n    if (delta.action == \"remove\" && !positionInDocument(docLines, end))\n        throwDeltaError(delta, \"delta.end must contained in document for 'remove' actions\");\n    var numRangeRows = end.row - start.row;\n    var numRangeLastLineChars = (end.column - (numRangeRows == 0 ? start.column : 0));\n    if (numRangeRows != delta.lines.length - 1 || delta.lines[numRangeRows].length != numRangeLastLineChars)\n        throwDeltaError(delta, \"delta.range must match delta lines\");\n}\nexports.applyDelta = function (docLines, delta, doNotValidate) {\n    var row = delta.start.row;\n    var startColumn = delta.start.column;\n    var line = docLines[row] || \"\";\n    switch (delta.action) {\n        case \"insert\":\n            var lines = delta.lines;\n            if (lines.length === 1) {\n                docLines[row] = line.substring(0, startColumn) + delta.lines[0] + line.substring(startColumn);\n            }\n            else {\n                var args = [row, 1].concat(delta.lines);\n                docLines.splice.apply(docLines, args);\n                docLines[row] = line.substring(0, startColumn) + docLines[row];\n                docLines[row + delta.lines.length - 1] += line.substring(startColumn);\n            }\n            break;\n        case \"remove\":\n            var endColumn = delta.end.column;\n            var endRow = delta.end.row;\n            if (row === endRow) {\n                docLines[row] = line.substring(0, startColumn) + line.substring(endColumn);\n            }\n            else {\n                docLines.splice(row, endRow - row + 1, line.substring(0, startColumn) + docLines[endRow].substring(endColumn));\n            }\n            break;\n    }\n};\n\n});\n\nace.define(\"ace/anchor\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/event_emitter\"], function(require, exports, module){\"use strict\";\nvar oop = require(\"./lib/oop\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar Anchor = exports.Anchor = function (doc, row, column) {\n    this.$onChange = this.onChange.bind(this);\n    this.attach(doc);\n    if (typeof column == \"undefined\")\n        this.setPosition(row.row, row.column);\n    else\n        this.setPosition(row, column);\n};\n(function () {\n    oop.implement(this, EventEmitter);\n    this.getPosition = function () {\n        return this.$clipPositionToDocument(this.row, this.column);\n    };\n    this.getDocument = function () {\n        return this.document;\n    };\n    this.$insertRight = false;\n    this.onChange = function (delta) {\n        if (delta.start.row == delta.end.row && delta.start.row != this.row)\n            return;\n        if (delta.start.row > this.row)\n            return;\n        var point = $getTransformedPoint(delta, { row: this.row, column: this.column }, this.$insertRight);\n        this.setPosition(point.row, point.column, true);\n    };\n    function $pointsInOrder(point1, point2, equalPointsInOrder) {\n        var bColIsAfter = equalPointsInOrder ? point1.column <= point2.column : point1.column < point2.column;\n        return (point1.row < point2.row) || (point1.row == point2.row && bColIsAfter);\n    }\n    function $getTransformedPoint(delta, point, moveIfEqual) {\n        var deltaIsInsert = delta.action == \"insert\";\n        var deltaRowShift = (deltaIsInsert ? 1 : -1) * (delta.end.row - delta.start.row);\n        var deltaColShift = (deltaIsInsert ? 1 : -1) * (delta.end.column - delta.start.column);\n        var deltaStart = delta.start;\n        var deltaEnd = deltaIsInsert ? deltaStart : delta.end; // Collapse insert range.\n        if ($pointsInOrder(point, deltaStart, moveIfEqual)) {\n            return {\n                row: point.row,\n                column: point.column\n            };\n        }\n        if ($pointsInOrder(deltaEnd, point, !moveIfEqual)) {\n            return {\n                row: point.row + deltaRowShift,\n                column: point.column + (point.row == deltaEnd.row ? deltaColShift : 0)\n            };\n        }\n        return {\n            row: deltaStart.row,\n            column: deltaStart.column\n        };\n    }\n    this.setPosition = function (row, column, noClip) {\n        var pos;\n        if (noClip) {\n            pos = {\n                row: row,\n                column: column\n            };\n        }\n        else {\n            pos = this.$clipPositionToDocument(row, column);\n        }\n        if (this.row == pos.row && this.column == pos.column)\n            return;\n        var old = {\n            row: this.row,\n            column: this.column\n        };\n        this.row = pos.row;\n        this.column = pos.column;\n        this._signal(\"change\", {\n            old: old,\n            value: pos\n        });\n    };\n    this.detach = function () {\n        this.document.off(\"change\", this.$onChange);\n    };\n    this.attach = function (doc) {\n        this.document = doc || this.document;\n        this.document.on(\"change\", this.$onChange);\n    };\n    this.$clipPositionToDocument = function (row, column) {\n        var pos = {};\n        if (row >= this.document.getLength()) {\n            pos.row = Math.max(0, this.document.getLength() - 1);\n            pos.column = this.document.getLine(pos.row).length;\n        }\n        else if (row < 0) {\n            pos.row = 0;\n            pos.column = 0;\n        }\n        else {\n            pos.row = row;\n            pos.column = Math.min(this.document.getLine(pos.row).length, Math.max(0, column));\n        }\n        if (column < 0)\n            pos.column = 0;\n        return pos;\n    };\n}).call(Anchor.prototype);\n\n});\n\nace.define(\"ace/document\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/apply_delta\",\"ace/lib/event_emitter\",\"ace/range\",\"ace/anchor\"], function(require, exports, module){\"use strict\";\nvar oop = require(\"./lib/oop\");\nvar applyDelta = require(\"./apply_delta\").applyDelta;\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar Range = require(\"./range\").Range;\nvar Anchor = require(\"./anchor\").Anchor;\nvar Document = function (textOrLines) {\n    this.$lines = [\"\"];\n    if (textOrLines.length === 0) {\n        this.$lines = [\"\"];\n    }\n    else if (Array.isArray(textOrLines)) {\n        this.insertMergedLines({ row: 0, column: 0 }, textOrLines);\n    }\n    else {\n        this.insert({ row: 0, column: 0 }, textOrLines);\n    }\n};\n(function () {\n    oop.implement(this, EventEmitter);\n    this.setValue = function (text) {\n        var len = this.getLength() - 1;\n        this.remove(new Range(0, 0, len, this.getLine(len).length));\n        this.insert({ row: 0, column: 0 }, text || \"\");\n    };\n    this.getValue = function () {\n        return this.getAllLines().join(this.getNewLineCharacter());\n    };\n    this.createAnchor = function (row, column) {\n        return new Anchor(this, row, column);\n    };\n    if (\"aaa\".split(/a/).length === 0) {\n        this.$split = function (text) {\n            return text.replace(/\\r\\n|\\r/g, \"\\n\").split(\"\\n\");\n        };\n    }\n    else {\n        this.$split = function (text) {\n            return text.split(/\\r\\n|\\r|\\n/);\n        };\n    }\n    this.$detectNewLine = function (text) {\n        var match = text.match(/^.*?(\\r\\n|\\r|\\n)/m);\n        this.$autoNewLine = match ? match[1] : \"\\n\";\n        this._signal(\"changeNewLineMode\");\n    };\n    this.getNewLineCharacter = function () {\n        switch (this.$newLineMode) {\n            case \"windows\":\n                return \"\\r\\n\";\n            case \"unix\":\n                return \"\\n\";\n            default:\n                return this.$autoNewLine || \"\\n\";\n        }\n    };\n    this.$autoNewLine = \"\";\n    this.$newLineMode = \"auto\";\n    this.setNewLineMode = function (newLineMode) {\n        if (this.$newLineMode === newLineMode)\n            return;\n        this.$newLineMode = newLineMode;\n        this._signal(\"changeNewLineMode\");\n    };\n    this.getNewLineMode = function () {\n        return this.$newLineMode;\n    };\n    this.isNewLine = function (text) {\n        return (text == \"\\r\\n\" || text == \"\\r\" || text == \"\\n\");\n    };\n    this.getLine = function (row) {\n        return this.$lines[row] || \"\";\n    };\n    this.getLines = function (firstRow, lastRow) {\n        return this.$lines.slice(firstRow, lastRow + 1);\n    };\n    this.getAllLines = function () {\n        return this.getLines(0, this.getLength());\n    };\n    this.getLength = function () {\n        return this.$lines.length;\n    };\n    this.getTextRange = function (range) {\n        return this.getLinesForRange(range).join(this.getNewLineCharacter());\n    };\n    this.getLinesForRange = function (range) {\n        var lines;\n        if (range.start.row === range.end.row) {\n            lines = [this.getLine(range.start.row).substring(range.start.column, range.end.column)];\n        }\n        else {\n            lines = this.getLines(range.start.row, range.end.row);\n            lines[0] = (lines[0] || \"\").substring(range.start.column);\n            var l = lines.length - 1;\n            if (range.end.row - range.start.row == l)\n                lines[l] = lines[l].substring(0, range.end.column);\n        }\n        return lines;\n    };\n    this.insertLines = function (row, lines) {\n        console.warn(\"Use of document.insertLines is deprecated. Use the insertFullLines method instead.\");\n        return this.insertFullLines(row, lines);\n    };\n    this.removeLines = function (firstRow, lastRow) {\n        console.warn(\"Use of document.removeLines is deprecated. Use the removeFullLines method instead.\");\n        return this.removeFullLines(firstRow, lastRow);\n    };\n    this.insertNewLine = function (position) {\n        console.warn(\"Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead.\");\n        return this.insertMergedLines(position, [\"\", \"\"]);\n    };\n    this.insert = function (position, text) {\n        if (this.getLength() <= 1)\n            this.$detectNewLine(text);\n        return this.insertMergedLines(position, this.$split(text));\n    };\n    this.insertInLine = function (position, text) {\n        var start = this.clippedPos(position.row, position.column);\n        var end = this.pos(position.row, position.column + text.length);\n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"insert\",\n            lines: [text]\n        }, true);\n        return this.clonePos(end);\n    };\n    this.clippedPos = function (row, column) {\n        var length = this.getLength();\n        if (row === undefined) {\n            row = length;\n        }\n        else if (row < 0) {\n            row = 0;\n        }\n        else if (row >= length) {\n            row = length - 1;\n            column = undefined;\n        }\n        var line = this.getLine(row);\n        if (column == undefined)\n            column = line.length;\n        column = Math.min(Math.max(column, 0), line.length);\n        return { row: row, column: column };\n    };\n    this.clonePos = function (pos) {\n        return { row: pos.row, column: pos.column };\n    };\n    this.pos = function (row, column) {\n        return { row: row, column: column };\n    };\n    this.$clipPosition = function (position) {\n        var length = this.getLength();\n        if (position.row >= length) {\n            position.row = Math.max(0, length - 1);\n            position.column = this.getLine(length - 1).length;\n        }\n        else {\n            position.row = Math.max(0, position.row);\n            position.column = Math.min(Math.max(position.column, 0), this.getLine(position.row).length);\n        }\n        return position;\n    };\n    this.insertFullLines = function (row, lines) {\n        row = Math.min(Math.max(row, 0), this.getLength());\n        var column = 0;\n        if (row < this.getLength()) {\n            lines = lines.concat([\"\"]);\n            column = 0;\n        }\n        else {\n            lines = [\"\"].concat(lines);\n            row--;\n            column = this.$lines[row].length;\n        }\n        this.insertMergedLines({ row: row, column: column }, lines);\n    };\n    this.insertMergedLines = function (position, lines) {\n        var start = this.clippedPos(position.row, position.column);\n        var end = {\n            row: start.row + lines.length - 1,\n            column: (lines.length == 1 ? start.column : 0) + lines[lines.length - 1].length\n        };\n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"insert\",\n            lines: lines\n        });\n        return this.clonePos(end);\n    };\n    this.remove = function (range) {\n        var start = this.clippedPos(range.start.row, range.start.column);\n        var end = this.clippedPos(range.end.row, range.end.column);\n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"remove\",\n            lines: this.getLinesForRange({ start: start, end: end })\n        });\n        return this.clonePos(start);\n    };\n    this.removeInLine = function (row, startColumn, endColumn) {\n        var start = this.clippedPos(row, startColumn);\n        var end = this.clippedPos(row, endColumn);\n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"remove\",\n            lines: this.getLinesForRange({ start: start, end: end })\n        }, true);\n        return this.clonePos(start);\n    };\n    this.removeFullLines = function (firstRow, lastRow) {\n        firstRow = Math.min(Math.max(0, firstRow), this.getLength() - 1);\n        lastRow = Math.min(Math.max(0, lastRow), this.getLength() - 1);\n        var deleteFirstNewLine = lastRow == this.getLength() - 1 && firstRow > 0;\n        var deleteLastNewLine = lastRow < this.getLength() - 1;\n        var startRow = (deleteFirstNewLine ? firstRow - 1 : firstRow);\n        var startCol = (deleteFirstNewLine ? this.getLine(startRow).length : 0);\n        var endRow = (deleteLastNewLine ? lastRow + 1 : lastRow);\n        var endCol = (deleteLastNewLine ? 0 : this.getLine(endRow).length);\n        var range = new Range(startRow, startCol, endRow, endCol);\n        var deletedLines = this.$lines.slice(firstRow, lastRow + 1);\n        this.applyDelta({\n            start: range.start,\n            end: range.end,\n            action: \"remove\",\n            lines: this.getLinesForRange(range)\n        });\n        return deletedLines;\n    };\n    this.removeNewLine = function (row) {\n        if (row < this.getLength() - 1 && row >= 0) {\n            this.applyDelta({\n                start: this.pos(row, this.getLine(row).length),\n                end: this.pos(row + 1, 0),\n                action: \"remove\",\n                lines: [\"\", \"\"]\n            });\n        }\n    };\n    this.replace = function (range, text) {\n        if (!(range instanceof Range))\n            range = Range.fromPoints(range.start, range.end);\n        if (text.length === 0 && range.isEmpty())\n            return range.start;\n        if (text == this.getTextRange(range))\n            return range.end;\n        this.remove(range);\n        var end;\n        if (text) {\n            end = this.insert(range.start, text);\n        }\n        else {\n            end = range.start;\n        }\n        return end;\n    };\n    this.applyDeltas = function (deltas) {\n        for (var i = 0; i < deltas.length; i++) {\n            this.applyDelta(deltas[i]);\n        }\n    };\n    this.revertDeltas = function (deltas) {\n        for (var i = deltas.length - 1; i >= 0; i--) {\n            this.revertDelta(deltas[i]);\n        }\n    };\n    this.applyDelta = function (delta, doNotValidate) {\n        var isInsert = delta.action == \"insert\";\n        if (isInsert ? delta.lines.length <= 1 && !delta.lines[0]\n            : !Range.comparePoints(delta.start, delta.end)) {\n            return;\n        }\n        if (isInsert && delta.lines.length > 20000) {\n            this.$splitAndapplyLargeDelta(delta, 20000);\n        }\n        else {\n            applyDelta(this.$lines, delta, doNotValidate);\n            this._signal(\"change\", delta);\n        }\n    };\n    this.$safeApplyDelta = function (delta) {\n        var docLength = this.$lines.length;\n        if (delta.action == \"remove\" && delta.start.row < docLength && delta.end.row < docLength\n            || delta.action == \"insert\" && delta.start.row <= docLength) {\n            this.applyDelta(delta);\n        }\n    };\n    this.$splitAndapplyLargeDelta = function (delta, MAX) {\n        var lines = delta.lines;\n        var l = lines.length - MAX + 1;\n        var row = delta.start.row;\n        var column = delta.start.column;\n        for (var from = 0, to = 0; from < l; from = to) {\n            to += MAX - 1;\n            var chunk = lines.slice(from, to);\n            chunk.push(\"\");\n            this.applyDelta({\n                start: this.pos(row + from, column),\n                end: this.pos(row + to, column = 0),\n                action: delta.action,\n                lines: chunk\n            }, true);\n        }\n        delta.lines = lines.slice(from);\n        delta.start.row = row + from;\n        delta.start.column = column;\n        this.applyDelta(delta, true);\n    };\n    this.revertDelta = function (delta) {\n        this.$safeApplyDelta({\n            start: this.clonePos(delta.start),\n            end: this.clonePos(delta.end),\n            action: (delta.action == \"insert\" ? \"remove\" : \"insert\"),\n            lines: delta.lines.slice()\n        });\n    };\n    this.indexToPosition = function (index, startRow) {\n        var lines = this.$lines || this.getAllLines();\n        var newlineLength = this.getNewLineCharacter().length;\n        for (var i = startRow || 0, l = lines.length; i < l; i++) {\n            index -= lines[i].length + newlineLength;\n            if (index < 0)\n                return { row: i, column: index + lines[i].length + newlineLength };\n        }\n        return { row: l - 1, column: index + lines[l - 1].length + newlineLength };\n    };\n    this.positionToIndex = function (pos, startRow) {\n        var lines = this.$lines || this.getAllLines();\n        var newlineLength = this.getNewLineCharacter().length;\n        var index = 0;\n        var row = Math.min(pos.row, lines.length);\n        for (var i = startRow || 0; i < row; ++i)\n            index += lines[i].length + newlineLength;\n        return index + pos.column;\n    };\n}).call(Document.prototype);\nexports.Document = Document;\n\n});\n\nace.define(\"ace/background_tokenizer\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/event_emitter\"], function(require, exports, module){\"use strict\";\nvar oop = require(\"./lib/oop\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar BackgroundTokenizer = function (tokenizer, editor) {\n    this.running = false;\n    this.lines = [];\n    this.states = [];\n    this.currentLine = 0;\n    this.tokenizer = tokenizer;\n    var self = this;\n    this.$worker = function () {\n        if (!self.running) {\n            return;\n        }\n        var workerStart = new Date();\n        var currentLine = self.currentLine;\n        var endLine = -1;\n        var doc = self.doc;\n        var startLine = currentLine;\n        while (self.lines[currentLine])\n            currentLine++;\n        var len = doc.getLength();\n        var processedLines = 0;\n        self.running = false;\n        while (currentLine < len) {\n            self.$tokenizeRow(currentLine);\n            endLine = currentLine;\n            do {\n                currentLine++;\n            } while (self.lines[currentLine]);\n            processedLines++;\n            if ((processedLines % 5 === 0) && (new Date() - workerStart) > 20) {\n                self.running = setTimeout(self.$worker, 20);\n                break;\n            }\n        }\n        self.currentLine = currentLine;\n        if (endLine == -1)\n            endLine = currentLine;\n        if (startLine <= endLine)\n            self.fireUpdateEvent(startLine, endLine);\n    };\n};\n(function () {\n    oop.implement(this, EventEmitter);\n    this.setTokenizer = function (tokenizer) {\n        this.tokenizer = tokenizer;\n        this.lines = [];\n        this.states = [];\n        this.start(0);\n    };\n    this.setDocument = function (doc) {\n        this.doc = doc;\n        this.lines = [];\n        this.states = [];\n        this.stop();\n    };\n    this.fireUpdateEvent = function (firstRow, lastRow) {\n        var data = {\n            first: firstRow,\n            last: lastRow\n        };\n        this._signal(\"update\", { data: data });\n    };\n    this.start = function (startRow) {\n        this.currentLine = Math.min(startRow || 0, this.currentLine, this.doc.getLength());\n        this.lines.splice(this.currentLine, this.lines.length);\n        this.states.splice(this.currentLine, this.states.length);\n        this.stop();\n        this.running = setTimeout(this.$worker, 700);\n    };\n    this.scheduleStart = function () {\n        if (!this.running)\n            this.running = setTimeout(this.$worker, 700);\n    };\n    this.$updateOnChange = function (delta) {\n        var startRow = delta.start.row;\n        var len = delta.end.row - startRow;\n        if (len === 0) {\n            this.lines[startRow] = null;\n        }\n        else if (delta.action == \"remove\") {\n            this.lines.splice(startRow, len + 1, null);\n            this.states.splice(startRow, len + 1, null);\n        }\n        else {\n            var args = Array(len + 1);\n            args.unshift(startRow, 1);\n            this.lines.splice.apply(this.lines, args);\n            this.states.splice.apply(this.states, args);\n        }\n        this.currentLine = Math.min(startRow, this.currentLine, this.doc.getLength());\n        this.stop();\n    };\n    this.stop = function () {\n        if (this.running)\n            clearTimeout(this.running);\n        this.running = false;\n    };\n    this.getTokens = function (row) {\n        return this.lines[row] || this.$tokenizeRow(row);\n    };\n    this.getState = function (row) {\n        if (this.currentLine == row)\n            this.$tokenizeRow(row);\n        return this.states[row] || \"start\";\n    };\n    this.$tokenizeRow = function (row) {\n        var line = this.doc.getLine(row);\n        var state = this.states[row - 1];\n        var data = this.tokenizer.getLineTokens(line, state, row);\n        if (this.states[row] + \"\" !== data.state + \"\") {\n            this.states[row] = data.state;\n            this.lines[row + 1] = null;\n            if (this.currentLine > row + 1)\n                this.currentLine = row + 1;\n        }\n        else if (this.currentLine == row) {\n            this.currentLine = row + 1;\n        }\n        return this.lines[row] = data.tokens;\n    };\n    this.cleanup = function () {\n        this.running = false;\n        this.lines = [];\n        this.states = [];\n        this.currentLine = 0;\n        this.removeAllListeners();\n    };\n}).call(BackgroundTokenizer.prototype);\nexports.BackgroundTokenizer = BackgroundTokenizer;\n\n});\n\nace.define(\"ace/search_highlight\",[\"require\",\"exports\",\"module\",\"ace/lib/lang\",\"ace/lib/oop\",\"ace/range\"], function(require, exports, module){\"use strict\";\nvar lang = require(\"./lib/lang\");\nvar oop = require(\"./lib/oop\");\nvar Range = require(\"./range\").Range;\nvar SearchHighlight = function (regExp, clazz, type) {\n    this.setRegexp(regExp);\n    this.clazz = clazz;\n    this.type = type || \"text\";\n};\n(function () {\n    this.MAX_RANGES = 500;\n    this.setRegexp = function (regExp) {\n        if (this.regExp + \"\" == regExp + \"\")\n            return;\n        this.regExp = regExp;\n        this.cache = [];\n    };\n    this.update = function (html, markerLayer, session, config) {\n        if (!this.regExp)\n            return;\n        var start = config.firstRow, end = config.lastRow;\n        var renderedMarkerRanges = {};\n        for (var i = start; i <= end; i++) {\n            var ranges = this.cache[i];\n            if (ranges == null) {\n                ranges = lang.getMatchOffsets(session.getLine(i), this.regExp);\n                if (ranges.length > this.MAX_RANGES)\n                    ranges = ranges.slice(0, this.MAX_RANGES);\n                ranges = ranges.map(function (match) {\n                    return new Range(i, match.offset, i, match.offset + match.length);\n                });\n                this.cache[i] = ranges.length ? ranges : \"\";\n            }\n            for (var j = ranges.length; j--;) {\n                var rangeToAddMarkerTo = ranges[j].toScreenRange(session);\n                var rangeAsString = rangeToAddMarkerTo.toString();\n                if (renderedMarkerRanges[rangeAsString])\n                    continue;\n                renderedMarkerRanges[rangeAsString] = true;\n                markerLayer.drawSingleLineMarker(html, rangeToAddMarkerTo, this.clazz, config);\n            }\n        }\n    };\n}).call(SearchHighlight.prototype);\nexports.SearchHighlight = SearchHighlight;\n\n});\n\nace.define(\"ace/edit_session/fold_line\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(require, exports, module){\"use strict\";\nvar Range = require(\"../range\").Range;\nfunction FoldLine(foldData, folds) {\n    this.foldData = foldData;\n    if (Array.isArray(folds)) {\n        this.folds = folds;\n    }\n    else {\n        folds = this.folds = [folds];\n    }\n    var last = folds[folds.length - 1];\n    this.range = new Range(folds[0].start.row, folds[0].start.column, last.end.row, last.end.column);\n    this.start = this.range.start;\n    this.end = this.range.end;\n    this.folds.forEach(function (fold) {\n        fold.setFoldLine(this);\n    }, this);\n}\n(function () {\n    this.shiftRow = function (shift) {\n        this.start.row += shift;\n        this.end.row += shift;\n        this.folds.forEach(function (fold) {\n            fold.start.row += shift;\n            fold.end.row += shift;\n        });\n    };\n    this.addFold = function (fold) {\n        if (fold.sameRow) {\n            if (fold.start.row < this.startRow || fold.endRow > this.endRow) {\n                throw new Error(\"Can't add a fold to this FoldLine as it has no connection\");\n            }\n            this.folds.push(fold);\n            this.folds.sort(function (a, b) {\n                return -a.range.compareEnd(b.start.row, b.start.column);\n            });\n            if (this.range.compareEnd(fold.start.row, fold.start.column) > 0) {\n                this.end.row = fold.end.row;\n                this.end.column = fold.end.column;\n            }\n            else if (this.range.compareStart(fold.end.row, fold.end.column) < 0) {\n                this.start.row = fold.start.row;\n                this.start.column = fold.start.column;\n            }\n        }\n        else if (fold.start.row == this.end.row) {\n            this.folds.push(fold);\n            this.end.row = fold.end.row;\n            this.end.column = fold.end.column;\n        }\n        else if (fold.end.row == this.start.row) {\n            this.folds.unshift(fold);\n            this.start.row = fold.start.row;\n            this.start.column = fold.start.column;\n        }\n        else {\n            throw new Error(\"Trying to add fold to FoldRow that doesn't have a matching row\");\n        }\n        fold.foldLine = this;\n    };\n    this.containsRow = function (row) {\n        return row >= this.start.row && row <= this.end.row;\n    };\n    this.walk = function (callback, endRow, endColumn) {\n        var lastEnd = 0, folds = this.folds, fold, cmp, stop, isNewRow = true;\n        if (endRow == null) {\n            endRow = this.end.row;\n            endColumn = this.end.column;\n        }\n        for (var i = 0; i < folds.length; i++) {\n            fold = folds[i];\n            cmp = fold.range.compareStart(endRow, endColumn);\n            if (cmp == -1) {\n                callback(null, endRow, endColumn, lastEnd, isNewRow);\n                return;\n            }\n            stop = callback(null, fold.start.row, fold.start.column, lastEnd, isNewRow);\n            stop = !stop && callback(fold.placeholder, fold.start.row, fold.start.column, lastEnd);\n            if (stop || cmp === 0) {\n                return;\n            }\n            isNewRow = !fold.sameRow;\n            lastEnd = fold.end.column;\n        }\n        callback(null, endRow, endColumn, lastEnd, isNewRow);\n    };\n    this.getNextFoldTo = function (row, column) {\n        var fold, cmp;\n        for (var i = 0; i < this.folds.length; i++) {\n            fold = this.folds[i];\n            cmp = fold.range.compareEnd(row, column);\n            if (cmp == -1) {\n                return {\n                    fold: fold,\n                    kind: \"after\"\n                };\n            }\n            else if (cmp === 0) {\n                return {\n                    fold: fold,\n                    kind: \"inside\"\n                };\n            }\n        }\n        return null;\n    };\n    this.addRemoveChars = function (row, column, len) {\n        var ret = this.getNextFoldTo(row, column), fold, folds;\n        if (ret) {\n            fold = ret.fold;\n            if (ret.kind == \"inside\"\n                && fold.start.column != column\n                && fold.start.row != row) {\n                window.console && window.console.log(row, column, fold);\n            }\n            else if (fold.start.row == row) {\n                folds = this.folds;\n                var i = folds.indexOf(fold);\n                if (i === 0) {\n                    this.start.column += len;\n                }\n                for (i; i < folds.length; i++) {\n                    fold = folds[i];\n                    fold.start.column += len;\n                    if (!fold.sameRow) {\n                        return;\n                    }\n                    fold.end.column += len;\n                }\n                this.end.column += len;\n            }\n        }\n    };\n    this.split = function (row, column) {\n        var pos = this.getNextFoldTo(row, column);\n        if (!pos || pos.kind == \"inside\")\n            return null;\n        var fold = pos.fold;\n        var folds = this.folds;\n        var foldData = this.foldData;\n        var i = folds.indexOf(fold);\n        var foldBefore = folds[i - 1];\n        this.end.row = foldBefore.end.row;\n        this.end.column = foldBefore.end.column;\n        folds = folds.splice(i, folds.length - i);\n        var newFoldLine = new FoldLine(foldData, folds);\n        foldData.splice(foldData.indexOf(this) + 1, 0, newFoldLine);\n        return newFoldLine;\n    };\n    this.merge = function (foldLineNext) {\n        var folds = foldLineNext.folds;\n        for (var i = 0; i < folds.length; i++) {\n            this.addFold(folds[i]);\n        }\n        var foldData = this.foldData;\n        foldData.splice(foldData.indexOf(foldLineNext), 1);\n    };\n    this.toString = function () {\n        var ret = [this.range.toString() + \": [\"];\n        this.folds.forEach(function (fold) {\n            ret.push(\"  \" + fold.toString());\n        });\n        ret.push(\"]\");\n        return ret.join(\"\\n\");\n    };\n    this.idxToPosition = function (idx) {\n        var lastFoldEndColumn = 0;\n        for (var i = 0; i < this.folds.length; i++) {\n            var fold = this.folds[i];\n            idx -= fold.start.column - lastFoldEndColumn;\n            if (idx < 0) {\n                return {\n                    row: fold.start.row,\n                    column: fold.start.column + idx\n                };\n            }\n            idx -= fold.placeholder.length;\n            if (idx < 0) {\n                return fold.start;\n            }\n            lastFoldEndColumn = fold.end.column;\n        }\n        return {\n            row: this.end.row,\n            column: this.end.column + idx\n        };\n    };\n}).call(FoldLine.prototype);\nexports.FoldLine = FoldLine;\n\n});\n\nace.define(\"ace/range_list\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(require, exports, module){\"use strict\";\nvar Range = require(\"./range\").Range;\nvar comparePoints = Range.comparePoints;\nvar RangeList = function () {\n    this.ranges = [];\n    this.$bias = 1;\n};\n(function () {\n    this.comparePoints = comparePoints;\n    this.pointIndex = function (pos, excludeEdges, startIndex) {\n        var list = this.ranges;\n        for (var i = startIndex || 0; i < list.length; i++) {\n            var range = list[i];\n            var cmpEnd = comparePoints(pos, range.end);\n            if (cmpEnd > 0)\n                continue;\n            var cmpStart = comparePoints(pos, range.start);\n            if (cmpEnd === 0)\n                return excludeEdges && cmpStart !== 0 ? -i - 2 : i;\n            if (cmpStart > 0 || (cmpStart === 0 && !excludeEdges))\n                return i;\n            return -i - 1;\n        }\n        return -i - 1;\n    };\n    this.add = function (range) {\n        var excludeEdges = !range.isEmpty();\n        var startIndex = this.pointIndex(range.start, excludeEdges);\n        if (startIndex < 0)\n            startIndex = -startIndex - 1;\n        var endIndex = this.pointIndex(range.end, excludeEdges, startIndex);\n        if (endIndex < 0)\n            endIndex = -endIndex - 1;\n        else\n            endIndex++;\n        return this.ranges.splice(startIndex, endIndex - startIndex, range);\n    };\n    this.addList = function (list) {\n        var removed = [];\n        for (var i = list.length; i--;) {\n            removed.push.apply(removed, this.add(list[i]));\n        }\n        return removed;\n    };\n    this.substractPoint = function (pos) {\n        var i = this.pointIndex(pos);\n        if (i >= 0)\n            return this.ranges.splice(i, 1);\n    };\n    this.merge = function () {\n        var removed = [];\n        var list = this.ranges;\n        list = list.sort(function (a, b) {\n            return comparePoints(a.start, b.start);\n        });\n        var next = list[0], range;\n        for (var i = 1; i < list.length; i++) {\n            range = next;\n            next = list[i];\n            var cmp = comparePoints(range.end, next.start);\n            if (cmp < 0)\n                continue;\n            if (cmp == 0 && !range.isEmpty() && !next.isEmpty())\n                continue;\n            if (comparePoints(range.end, next.end) < 0) {\n                range.end.row = next.end.row;\n                range.end.column = next.end.column;\n            }\n            list.splice(i, 1);\n            removed.push(next);\n            next = range;\n            i--;\n        }\n        this.ranges = list;\n        return removed;\n    };\n    this.contains = function (row, column) {\n        return this.pointIndex({ row: row, column: column }) >= 0;\n    };\n    this.containsPoint = function (pos) {\n        return this.pointIndex(pos) >= 0;\n    };\n    this.rangeAtPoint = function (pos) {\n        var i = this.pointIndex(pos);\n        if (i >= 0)\n            return this.ranges[i];\n    };\n    this.clipRows = function (startRow, endRow) {\n        var list = this.ranges;\n        if (list[0].start.row > endRow || list[list.length - 1].start.row < startRow)\n            return [];\n        var startIndex = this.pointIndex({ row: startRow, column: 0 });\n        if (startIndex < 0)\n            startIndex = -startIndex - 1;\n        var endIndex = this.pointIndex({ row: endRow, column: 0 }, startIndex);\n        if (endIndex < 0)\n            endIndex = -endIndex - 1;\n        var clipped = [];\n        for (var i = startIndex; i < endIndex; i++) {\n            clipped.push(list[i]);\n        }\n        return clipped;\n    };\n    this.removeAll = function () {\n        return this.ranges.splice(0, this.ranges.length);\n    };\n    this.attach = function (session) {\n        if (this.session)\n            this.detach();\n        this.session = session;\n        this.onChange = this.$onChange.bind(this);\n        this.session.on('change', this.onChange);\n    };\n    this.detach = function () {\n        if (!this.session)\n            return;\n        this.session.removeListener('change', this.onChange);\n        this.session = null;\n    };\n    this.$onChange = function (delta) {\n        var start = delta.start;\n        var end = delta.end;\n        var startRow = start.row;\n        var endRow = end.row;\n        var ranges = this.ranges;\n        for (var i = 0, n = ranges.length; i < n; i++) {\n            var r = ranges[i];\n            if (r.end.row >= startRow)\n                break;\n        }\n        if (delta.action == \"insert\") {\n            var lineDif = endRow - startRow;\n            var colDiff = -start.column + end.column;\n            for (; i < n; i++) {\n                var r = ranges[i];\n                if (r.start.row > startRow)\n                    break;\n                if (r.start.row == startRow && r.start.column >= start.column) {\n                    if (r.start.column == start.column && this.$bias <= 0) {\n                    }\n                    else {\n                        r.start.column += colDiff;\n                        r.start.row += lineDif;\n                    }\n                }\n                if (r.end.row == startRow && r.end.column >= start.column) {\n                    if (r.end.column == start.column && this.$bias < 0) {\n                        continue;\n                    }\n                    if (r.end.column == start.column && colDiff > 0 && i < n - 1) {\n                        if (r.end.column > r.start.column && r.end.column == ranges[i + 1].start.column)\n                            r.end.column -= colDiff;\n                    }\n                    r.end.column += colDiff;\n                    r.end.row += lineDif;\n                }\n            }\n        }\n        else {\n            var lineDif = startRow - endRow;\n            var colDiff = start.column - end.column;\n            for (; i < n; i++) {\n                var r = ranges[i];\n                if (r.start.row > endRow)\n                    break;\n                if (r.end.row < endRow\n                    && (startRow < r.end.row\n                        || startRow == r.end.row && start.column < r.end.column)) {\n                    r.end.row = startRow;\n                    r.end.column = start.column;\n                }\n                else if (r.end.row == endRow) {\n                    if (r.end.column <= end.column) {\n                        if (lineDif || r.end.column > start.column) {\n                            r.end.column = start.column;\n                            r.end.row = start.row;\n                        }\n                    }\n                    else {\n                        r.end.column += colDiff;\n                        r.end.row += lineDif;\n                    }\n                }\n                else if (r.end.row > endRow) {\n                    r.end.row += lineDif;\n                }\n                if (r.start.row < endRow\n                    && (startRow < r.start.row\n                        || startRow == r.start.row && start.column < r.start.column)) {\n                    r.start.row = startRow;\n                    r.start.column = start.column;\n                }\n                else if (r.start.row == endRow) {\n                    if (r.start.column <= end.column) {\n                        if (lineDif || r.start.column > start.column) {\n                            r.start.column = start.column;\n                            r.start.row = start.row;\n                        }\n                    }\n                    else {\n                        r.start.column += colDiff;\n                        r.start.row += lineDif;\n                    }\n                }\n                else if (r.start.row > endRow) {\n                    r.start.row += lineDif;\n                }\n            }\n        }\n        if (lineDif != 0 && i < n) {\n            for (; i < n; i++) {\n                var r = ranges[i];\n                r.start.row += lineDif;\n                r.end.row += lineDif;\n            }\n        }\n    };\n}).call(RangeList.prototype);\nexports.RangeList = RangeList;\n\n});\n\nace.define(\"ace/edit_session/fold\",[\"require\",\"exports\",\"module\",\"ace/range_list\",\"ace/lib/oop\"], function(require, exports, module){\"use strict\";\nvar RangeList = require(\"../range_list\").RangeList;\nvar oop = require(\"../lib/oop\");\nvar Fold = exports.Fold = function (range, placeholder) {\n    this.foldLine = null;\n    this.placeholder = placeholder;\n    this.range = range;\n    this.start = range.start;\n    this.end = range.end;\n    this.sameRow = range.start.row == range.end.row;\n    this.subFolds = this.ranges = [];\n};\noop.inherits(Fold, RangeList);\n(function () {\n    this.toString = function () {\n        return '\"' + this.placeholder + '\" ' + this.range.toString();\n    };\n    this.setFoldLine = function (foldLine) {\n        this.foldLine = foldLine;\n        this.subFolds.forEach(function (fold) {\n            fold.setFoldLine(foldLine);\n        });\n    };\n    this.clone = function () {\n        var range = this.range.clone();\n        var fold = new Fold(range, this.placeholder);\n        this.subFolds.forEach(function (subFold) {\n            fold.subFolds.push(subFold.clone());\n        });\n        fold.collapseChildren = this.collapseChildren;\n        return fold;\n    };\n    this.addSubFold = function (fold) {\n        if (this.range.isEqual(fold))\n            return;\n        consumeRange(fold, this.start);\n        var row = fold.start.row, column = fold.start.column;\n        for (var i = 0, cmp = -1; i < this.subFolds.length; i++) {\n            cmp = this.subFolds[i].range.compare(row, column);\n            if (cmp != 1)\n                break;\n        }\n        var afterStart = this.subFolds[i];\n        var firstConsumed = 0;\n        if (cmp == 0) {\n            if (afterStart.range.containsRange(fold))\n                return afterStart.addSubFold(fold);\n            else\n                firstConsumed = 1;\n        }\n        var row = fold.range.end.row, column = fold.range.end.column;\n        for (var j = i, cmp = -1; j < this.subFolds.length; j++) {\n            cmp = this.subFolds[j].range.compare(row, column);\n            if (cmp != 1)\n                break;\n        }\n        if (cmp == 0)\n            j++;\n        var consumedFolds = this.subFolds.splice(i, j - i, fold);\n        var last = cmp == 0 ? consumedFolds.length - 1 : consumedFolds.length;\n        for (var k = firstConsumed; k < last; k++) {\n            fold.addSubFold(consumedFolds[k]);\n        }\n        fold.setFoldLine(this.foldLine);\n        return fold;\n    };\n    this.restoreRange = function (range) {\n        return restoreRange(range, this.start);\n    };\n}).call(Fold.prototype);\nfunction consumePoint(point, anchor) {\n    point.row -= anchor.row;\n    if (point.row == 0)\n        point.column -= anchor.column;\n}\nfunction consumeRange(range, anchor) {\n    consumePoint(range.start, anchor);\n    consumePoint(range.end, anchor);\n}\nfunction restorePoint(point, anchor) {\n    if (point.row == 0)\n        point.column += anchor.column;\n    point.row += anchor.row;\n}\nfunction restoreRange(range, anchor) {\n    restorePoint(range.start, anchor);\n    restorePoint(range.end, anchor);\n}\n\n});\n\nace.define(\"ace/edit_session/folding\",[\"require\",\"exports\",\"module\",\"ace/range\",\"ace/edit_session/fold_line\",\"ace/edit_session/fold\",\"ace/token_iterator\"], function(require, exports, module){\"use strict\";\nvar Range = require(\"../range\").Range;\nvar FoldLine = require(\"./fold_line\").FoldLine;\nvar Fold = require(\"./fold\").Fold;\nvar TokenIterator = require(\"../token_iterator\").TokenIterator;\nfunction Folding() {\n    this.getFoldAt = function (row, column, side) {\n        var foldLine = this.getFoldLine(row);\n        if (!foldLine)\n            return null;\n        var folds = foldLine.folds;\n        for (var i = 0; i < folds.length; i++) {\n            var range = folds[i].range;\n            if (range.contains(row, column)) {\n                if (side == 1 && range.isEnd(row, column) && !range.isEmpty()) {\n                    continue;\n                }\n                else if (side == -1 && range.isStart(row, column) && !range.isEmpty()) {\n                    continue;\n                }\n                return folds[i];\n            }\n        }\n    };\n    this.getFoldsInRange = function (range) {\n        var start = range.start;\n        var end = range.end;\n        var foldLines = this.$foldData;\n        var foundFolds = [];\n        start.column += 1;\n        end.column -= 1;\n        for (var i = 0; i < foldLines.length; i++) {\n            var cmp = foldLines[i].range.compareRange(range);\n            if (cmp == 2) {\n                continue;\n            }\n            else if (cmp == -2) {\n                break;\n            }\n            var folds = foldLines[i].folds;\n            for (var j = 0; j < folds.length; j++) {\n                var fold = folds[j];\n                cmp = fold.range.compareRange(range);\n                if (cmp == -2) {\n                    break;\n                }\n                else if (cmp == 2) {\n                    continue;\n                }\n                else \n                if (cmp == 42) {\n                    break;\n                }\n                foundFolds.push(fold);\n            }\n        }\n        start.column -= 1;\n        end.column += 1;\n        return foundFolds;\n    };\n    this.getFoldsInRangeList = function (ranges) {\n        if (Array.isArray(ranges)) {\n            var folds = [];\n            ranges.forEach(function (range) {\n                folds = folds.concat(this.getFoldsInRange(range));\n            }, this);\n        }\n        else {\n            var folds = this.getFoldsInRange(ranges);\n        }\n        return folds;\n    };\n    this.getAllFolds = function () {\n        var folds = [];\n        var foldLines = this.$foldData;\n        for (var i = 0; i < foldLines.length; i++)\n            for (var j = 0; j < foldLines[i].folds.length; j++)\n                folds.push(foldLines[i].folds[j]);\n        return folds;\n    };\n    this.getFoldStringAt = function (row, column, trim, foldLine) {\n        foldLine = foldLine || this.getFoldLine(row);\n        if (!foldLine)\n            return null;\n        var lastFold = {\n            end: { column: 0 }\n        };\n        var str, fold;\n        for (var i = 0; i < foldLine.folds.length; i++) {\n            fold = foldLine.folds[i];\n            var cmp = fold.range.compareEnd(row, column);\n            if (cmp == -1) {\n                str = this\n                    .getLine(fold.start.row)\n                    .substring(lastFold.end.column, fold.start.column);\n                break;\n            }\n            else if (cmp === 0) {\n                return null;\n            }\n            lastFold = fold;\n        }\n        if (!str)\n            str = this.getLine(fold.start.row).substring(lastFold.end.column);\n        if (trim == -1)\n            return str.substring(0, column - lastFold.end.column);\n        else if (trim == 1)\n            return str.substring(column - lastFold.end.column);\n        else\n            return str;\n    };\n    this.getFoldLine = function (docRow, startFoldLine) {\n        var foldData = this.$foldData;\n        var i = 0;\n        if (startFoldLine)\n            i = foldData.indexOf(startFoldLine);\n        if (i == -1)\n            i = 0;\n        for (i; i < foldData.length; i++) {\n            var foldLine = foldData[i];\n            if (foldLine.start.row <= docRow && foldLine.end.row >= docRow) {\n                return foldLine;\n            }\n            else if (foldLine.end.row > docRow) {\n                return null;\n            }\n        }\n        return null;\n    };\n    this.getNextFoldLine = function (docRow, startFoldLine) {\n        var foldData = this.$foldData;\n        var i = 0;\n        if (startFoldLine)\n            i = foldData.indexOf(startFoldLine);\n        if (i == -1)\n            i = 0;\n        for (i; i < foldData.length; i++) {\n            var foldLine = foldData[i];\n            if (foldLine.end.row >= docRow) {\n                return foldLine;\n            }\n        }\n        return null;\n    };\n    this.getFoldedRowCount = function (first, last) {\n        var foldData = this.$foldData, rowCount = last - first + 1;\n        for (var i = 0; i < foldData.length; i++) {\n            var foldLine = foldData[i], end = foldLine.end.row, start = foldLine.start.row;\n            if (end >= last) {\n                if (start < last) {\n                    if (start >= first)\n                        rowCount -= last - start;\n                    else\n                        rowCount = 0; // in one fold\n                }\n                break;\n            }\n            else if (end >= first) {\n                if (start >= first) // fold inside range\n                    rowCount -= end - start;\n                else\n                    rowCount -= end - first + 1;\n            }\n        }\n        return rowCount;\n    };\n    this.$addFoldLine = function (foldLine) {\n        this.$foldData.push(foldLine);\n        this.$foldData.sort(function (a, b) {\n            return a.start.row - b.start.row;\n        });\n        return foldLine;\n    };\n    this.addFold = function (placeholder, range) {\n        var foldData = this.$foldData;\n        var added = false;\n        var fold;\n        if (placeholder instanceof Fold)\n            fold = placeholder;\n        else {\n            fold = new Fold(range, placeholder);\n            fold.collapseChildren = range.collapseChildren;\n        }\n        this.$clipRangeToDocument(fold.range);\n        var startRow = fold.start.row;\n        var startColumn = fold.start.column;\n        var endRow = fold.end.row;\n        var endColumn = fold.end.column;\n        var startFold = this.getFoldAt(startRow, startColumn, 1);\n        var endFold = this.getFoldAt(endRow, endColumn, -1);\n        if (startFold && endFold == startFold)\n            return startFold.addSubFold(fold);\n        if (startFold && !startFold.range.isStart(startRow, startColumn))\n            this.removeFold(startFold);\n        if (endFold && !endFold.range.isEnd(endRow, endColumn))\n            this.removeFold(endFold);\n        var folds = this.getFoldsInRange(fold.range);\n        if (folds.length > 0) {\n            this.removeFolds(folds);\n            if (!fold.collapseChildren) {\n                folds.forEach(function (subFold) {\n                    fold.addSubFold(subFold);\n                });\n            }\n        }\n        for (var i = 0; i < foldData.length; i++) {\n            var foldLine = foldData[i];\n            if (endRow == foldLine.start.row) {\n                foldLine.addFold(fold);\n                added = true;\n                break;\n            }\n            else if (startRow == foldLine.end.row) {\n                foldLine.addFold(fold);\n                added = true;\n                if (!fold.sameRow) {\n                    var foldLineNext = foldData[i + 1];\n                    if (foldLineNext && foldLineNext.start.row == endRow) {\n                        foldLine.merge(foldLineNext);\n                        break;\n                    }\n                }\n                break;\n            }\n            else if (endRow <= foldLine.start.row) {\n                break;\n            }\n        }\n        if (!added)\n            foldLine = this.$addFoldLine(new FoldLine(this.$foldData, fold));\n        if (this.$useWrapMode)\n            this.$updateWrapData(foldLine.start.row, foldLine.start.row);\n        else\n            this.$updateRowLengthCache(foldLine.start.row, foldLine.start.row);\n        this.$modified = true;\n        this._signal(\"changeFold\", { data: fold, action: \"add\" });\n        return fold;\n    };\n    this.addFolds = function (folds) {\n        folds.forEach(function (fold) {\n            this.addFold(fold);\n        }, this);\n    };\n    this.removeFold = function (fold) {\n        var foldLine = fold.foldLine;\n        var startRow = foldLine.start.row;\n        var endRow = foldLine.end.row;\n        var foldLines = this.$foldData;\n        var folds = foldLine.folds;\n        if (folds.length == 1) {\n            foldLines.splice(foldLines.indexOf(foldLine), 1);\n        }\n        else \n        if (foldLine.range.isEnd(fold.end.row, fold.end.column)) {\n            folds.pop();\n            foldLine.end.row = folds[folds.length - 1].end.row;\n            foldLine.end.column = folds[folds.length - 1].end.column;\n        }\n        else \n        if (foldLine.range.isStart(fold.start.row, fold.start.column)) {\n            folds.shift();\n            foldLine.start.row = folds[0].start.row;\n            foldLine.start.column = folds[0].start.column;\n        }\n        else \n        if (fold.sameRow) {\n            folds.splice(folds.indexOf(fold), 1);\n        }\n        else \n        {\n            var newFoldLine = foldLine.split(fold.start.row, fold.start.column);\n            folds = newFoldLine.folds;\n            folds.shift();\n            newFoldLine.start.row = folds[0].start.row;\n            newFoldLine.start.column = folds[0].start.column;\n        }\n        if (!this.$updating) {\n            if (this.$useWrapMode)\n                this.$updateWrapData(startRow, endRow);\n            else\n                this.$updateRowLengthCache(startRow, endRow);\n        }\n        this.$modified = true;\n        this._signal(\"changeFold\", { data: fold, action: \"remove\" });\n    };\n    this.removeFolds = function (folds) {\n        var cloneFolds = [];\n        for (var i = 0; i < folds.length; i++) {\n            cloneFolds.push(folds[i]);\n        }\n        cloneFolds.forEach(function (fold) {\n            this.removeFold(fold);\n        }, this);\n        this.$modified = true;\n    };\n    this.expandFold = function (fold) {\n        this.removeFold(fold);\n        fold.subFolds.forEach(function (subFold) {\n            fold.restoreRange(subFold);\n            this.addFold(subFold);\n        }, this);\n        if (fold.collapseChildren > 0) {\n            this.foldAll(fold.start.row + 1, fold.end.row, fold.collapseChildren - 1);\n        }\n        fold.subFolds = [];\n    };\n    this.expandFolds = function (folds) {\n        folds.forEach(function (fold) {\n            this.expandFold(fold);\n        }, this);\n    };\n    this.unfold = function (location, expandInner) {\n        var range, folds;\n        if (location == null) {\n            range = new Range(0, 0, this.getLength(), 0);\n            if (expandInner == null)\n                expandInner = true;\n        }\n        else if (typeof location == \"number\") {\n            range = new Range(location, 0, location, this.getLine(location).length);\n        }\n        else if (\"row\" in location) {\n            range = Range.fromPoints(location, location);\n        }\n        else if (Array.isArray(location)) {\n            folds = [];\n            location.forEach(function (range) {\n                folds = folds.concat(this.unfold(range));\n            }, this);\n            return folds;\n        }\n        else {\n            range = location;\n        }\n        folds = this.getFoldsInRangeList(range);\n        var outermostFolds = folds;\n        while (folds.length == 1\n            && Range.comparePoints(folds[0].start, range.start) < 0\n            && Range.comparePoints(folds[0].end, range.end) > 0) {\n            this.expandFolds(folds);\n            folds = this.getFoldsInRangeList(range);\n        }\n        if (expandInner != false) {\n            this.removeFolds(folds);\n        }\n        else {\n            this.expandFolds(folds);\n        }\n        if (outermostFolds.length)\n            return outermostFolds;\n    };\n    this.isRowFolded = function (docRow, startFoldRow) {\n        return !!this.getFoldLine(docRow, startFoldRow);\n    };\n    this.getRowFoldEnd = function (docRow, startFoldRow) {\n        var foldLine = this.getFoldLine(docRow, startFoldRow);\n        return foldLine ? foldLine.end.row : docRow;\n    };\n    this.getRowFoldStart = function (docRow, startFoldRow) {\n        var foldLine = this.getFoldLine(docRow, startFoldRow);\n        return foldLine ? foldLine.start.row : docRow;\n    };\n    this.getFoldDisplayLine = function (foldLine, endRow, endColumn, startRow, startColumn) {\n        if (startRow == null)\n            startRow = foldLine.start.row;\n        if (startColumn == null)\n            startColumn = 0;\n        if (endRow == null)\n            endRow = foldLine.end.row;\n        if (endColumn == null)\n            endColumn = this.getLine(endRow).length;\n        var doc = this.doc;\n        var textLine = \"\";\n        foldLine.walk(function (placeholder, row, column, lastColumn) {\n            if (row < startRow)\n                return;\n            if (row == startRow) {\n                if (column < startColumn)\n                    return;\n                lastColumn = Math.max(startColumn, lastColumn);\n            }\n            if (placeholder != null) {\n                textLine += placeholder;\n            }\n            else {\n                textLine += doc.getLine(row).substring(lastColumn, column);\n            }\n        }, endRow, endColumn);\n        return textLine;\n    };\n    this.getDisplayLine = function (row, endColumn, startRow, startColumn) {\n        var foldLine = this.getFoldLine(row);\n        if (!foldLine) {\n            var line;\n            line = this.doc.getLine(row);\n            return line.substring(startColumn || 0, endColumn || line.length);\n        }\n        else {\n            return this.getFoldDisplayLine(foldLine, row, endColumn, startRow, startColumn);\n        }\n    };\n    this.$cloneFoldData = function () {\n        var fd = [];\n        fd = this.$foldData.map(function (foldLine) {\n            var folds = foldLine.folds.map(function (fold) {\n                return fold.clone();\n            });\n            return new FoldLine(fd, folds);\n        });\n        return fd;\n    };\n    this.toggleFold = function (tryToUnfold) {\n        var selection = this.selection;\n        var range = selection.getRange();\n        var fold;\n        var bracketPos;\n        if (range.isEmpty()) {\n            var cursor = range.start;\n            fold = this.getFoldAt(cursor.row, cursor.column);\n            if (fold) {\n                this.expandFold(fold);\n                return;\n            }\n            else if (bracketPos = this.findMatchingBracket(cursor)) {\n                if (range.comparePoint(bracketPos) == 1) {\n                    range.end = bracketPos;\n                }\n                else {\n                    range.start = bracketPos;\n                    range.start.column++;\n                    range.end.column--;\n                }\n            }\n            else if (bracketPos = this.findMatchingBracket({ row: cursor.row, column: cursor.column + 1 })) {\n                if (range.comparePoint(bracketPos) == 1)\n                    range.end = bracketPos;\n                else\n                    range.start = bracketPos;\n                range.start.column++;\n            }\n            else {\n                range = this.getCommentFoldRange(cursor.row, cursor.column) || range;\n            }\n        }\n        else {\n            var folds = this.getFoldsInRange(range);\n            if (tryToUnfold && folds.length) {\n                this.expandFolds(folds);\n                return;\n            }\n            else if (folds.length == 1) {\n                fold = folds[0];\n            }\n        }\n        if (!fold)\n            fold = this.getFoldAt(range.start.row, range.start.column);\n        if (fold && fold.range.toString() == range.toString()) {\n            this.expandFold(fold);\n            return;\n        }\n        var placeholder = \"...\";\n        if (!range.isMultiLine()) {\n            placeholder = this.getTextRange(range);\n            if (placeholder.length < 4)\n                return;\n            placeholder = placeholder.trim().substring(0, 2) + \"..\";\n        }\n        this.addFold(placeholder, range);\n    };\n    this.getCommentFoldRange = function (row, column, dir) {\n        var iterator = new TokenIterator(this, row, column);\n        var token = iterator.getCurrentToken();\n        var type = token && token.type;\n        if (token && /^comment|string/.test(type)) {\n            type = type.match(/comment|string/)[0];\n            if (type == \"comment\")\n                type += \"|doc-start\";\n            var re = new RegExp(type);\n            var range = new Range();\n            if (dir != 1) {\n                do {\n                    token = iterator.stepBackward();\n                } while (token && re.test(token.type) && !/^comment.end/.test(token.type));\n                token = iterator.stepForward();\n            }\n            range.start.row = iterator.getCurrentTokenRow();\n            range.start.column = iterator.getCurrentTokenColumn() + (/^comment.start/.test(token.type) ? token.value.length : 2);\n            iterator = new TokenIterator(this, row, column);\n            if (dir != -1) {\n                var lastRow = -1;\n                do {\n                    token = iterator.stepForward();\n                    if (lastRow == -1) {\n                        var state = this.getState(iterator.$row);\n                        if (!re.test(state))\n                            lastRow = iterator.$row;\n                    }\n                    else if (iterator.$row > lastRow) {\n                        break;\n                    }\n                } while (token && re.test(token.type) && !/^comment.start/.test(token.type));\n                token = iterator.stepBackward();\n            }\n            else\n                token = iterator.getCurrentToken();\n            range.end.row = iterator.getCurrentTokenRow();\n            range.end.column = iterator.getCurrentTokenColumn();\n            if (!/^comment.end/.test(token.type)) {\n                range.end.column += token.value.length - 2;\n            }\n            return range;\n        }\n    };\n    this.foldAll = function (startRow, endRow, depth, test) {\n        if (depth == undefined)\n            depth = 100000; // JSON.stringify doesn't hanle Infinity\n        var foldWidgets = this.foldWidgets;\n        if (!foldWidgets)\n            return; // mode doesn't support folding\n        endRow = endRow || this.getLength();\n        startRow = startRow || 0;\n        for (var row = startRow; row < endRow; row++) {\n            if (foldWidgets[row] == null)\n                foldWidgets[row] = this.getFoldWidget(row);\n            if (foldWidgets[row] != \"start\")\n                continue;\n            if (test && !test(row))\n                continue;\n            var range = this.getFoldWidgetRange(row);\n            if (range && range.isMultiLine()\n                && range.end.row <= endRow\n                && range.start.row >= startRow) {\n                row = range.end.row;\n                range.collapseChildren = depth;\n                this.addFold(\"...\", range);\n            }\n        }\n    };\n    this.foldToLevel = function (level) {\n        this.foldAll();\n        while (level-- > 0)\n            this.unfold(null, false);\n    };\n    this.foldAllComments = function () {\n        var session = this;\n        this.foldAll(null, null, null, function (row) {\n            var tokens = session.getTokens(row);\n            for (var i = 0; i < tokens.length; i++) {\n                var token = tokens[i];\n                if (token.type == \"text\" && /^\\s+$/.test(token.value))\n                    continue;\n                if (/comment/.test(token.type))\n                    return true;\n                return false;\n            }\n        });\n    };\n    this.$foldStyles = {\n        \"manual\": 1,\n        \"markbegin\": 1,\n        \"markbeginend\": 1\n    };\n    this.$foldStyle = \"markbegin\";\n    this.setFoldStyle = function (style) {\n        if (!this.$foldStyles[style])\n            throw new Error(\"invalid fold style: \" + style + \"[\" + Object.keys(this.$foldStyles).join(\", \") + \"]\");\n        if (this.$foldStyle == style)\n            return;\n        this.$foldStyle = style;\n        if (style == \"manual\")\n            this.unfold();\n        var mode = this.$foldMode;\n        this.$setFolding(null);\n        this.$setFolding(mode);\n    };\n    this.$setFolding = function (foldMode) {\n        if (this.$foldMode == foldMode)\n            return;\n        this.$foldMode = foldMode;\n        this.off('change', this.$updateFoldWidgets);\n        this.off('tokenizerUpdate', this.$tokenizerUpdateFoldWidgets);\n        this._signal(\"changeAnnotation\");\n        if (!foldMode || this.$foldStyle == \"manual\") {\n            this.foldWidgets = null;\n            return;\n        }\n        this.foldWidgets = [];\n        this.getFoldWidget = foldMode.getFoldWidget.bind(foldMode, this, this.$foldStyle);\n        this.getFoldWidgetRange = foldMode.getFoldWidgetRange.bind(foldMode, this, this.$foldStyle);\n        this.$updateFoldWidgets = this.updateFoldWidgets.bind(this);\n        this.$tokenizerUpdateFoldWidgets = this.tokenizerUpdateFoldWidgets.bind(this);\n        this.on('change', this.$updateFoldWidgets);\n        this.on('tokenizerUpdate', this.$tokenizerUpdateFoldWidgets);\n    };\n    this.getParentFoldRangeData = function (row, ignoreCurrent) {\n        var fw = this.foldWidgets;\n        if (!fw || (ignoreCurrent && fw[row]))\n            return {};\n        var i = row - 1, firstRange;\n        while (i >= 0) {\n            var c = fw[i];\n            if (c == null)\n                c = fw[i] = this.getFoldWidget(i);\n            if (c == \"start\") {\n                var range = this.getFoldWidgetRange(i);\n                if (!firstRange)\n                    firstRange = range;\n                if (range && range.end.row >= row)\n                    break;\n            }\n            i--;\n        }\n        return {\n            range: i !== -1 && range,\n            firstRange: firstRange\n        };\n    };\n    this.onFoldWidgetClick = function (row, e) {\n        e = e.domEvent;\n        var options = {\n            children: e.shiftKey,\n            all: e.ctrlKey || e.metaKey,\n            siblings: e.altKey\n        };\n        var range = this.$toggleFoldWidget(row, options);\n        if (!range) {\n            var el = (e.target || e.srcElement);\n            if (el && /ace_fold-widget/.test(el.className))\n                el.className += \" ace_invalid\";\n        }\n    };\n    this.$toggleFoldWidget = function (row, options) {\n        if (!this.getFoldWidget)\n            return;\n        var type = this.getFoldWidget(row);\n        var line = this.getLine(row);\n        var dir = type === \"end\" ? -1 : 1;\n        var fold = this.getFoldAt(row, dir === -1 ? 0 : line.length, dir);\n        if (fold) {\n            if (options.children || options.all)\n                this.removeFold(fold);\n            else\n                this.expandFold(fold);\n            return fold;\n        }\n        var range = this.getFoldWidgetRange(row, true);\n        if (range && !range.isMultiLine()) {\n            fold = this.getFoldAt(range.start.row, range.start.column, 1);\n            if (fold && range.isEqual(fold.range)) {\n                this.removeFold(fold);\n                return fold;\n            }\n        }\n        if (options.siblings) {\n            var data = this.getParentFoldRangeData(row);\n            if (data.range) {\n                var startRow = data.range.start.row + 1;\n                var endRow = data.range.end.row;\n            }\n            this.foldAll(startRow, endRow, options.all ? 10000 : 0);\n        }\n        else if (options.children) {\n            endRow = range ? range.end.row : this.getLength();\n            this.foldAll(row + 1, endRow, options.all ? 10000 : 0);\n        }\n        else if (range) {\n            if (options.all)\n                range.collapseChildren = 10000;\n            this.addFold(\"...\", range);\n        }\n        return range;\n    };\n    this.toggleFoldWidget = function (toggleParent) {\n        var row = this.selection.getCursor().row;\n        row = this.getRowFoldStart(row);\n        var range = this.$toggleFoldWidget(row, {});\n        if (range)\n            return;\n        var data = this.getParentFoldRangeData(row, true);\n        range = data.range || data.firstRange;\n        if (range) {\n            row = range.start.row;\n            var fold = this.getFoldAt(row, this.getLine(row).length, 1);\n            if (fold) {\n                this.removeFold(fold);\n            }\n            else {\n                this.addFold(\"...\", range);\n            }\n        }\n    };\n    this.updateFoldWidgets = function (delta) {\n        var firstRow = delta.start.row;\n        var len = delta.end.row - firstRow;\n        if (len === 0) {\n            this.foldWidgets[firstRow] = null;\n        }\n        else if (delta.action == 'remove') {\n            this.foldWidgets.splice(firstRow, len + 1, null);\n        }\n        else {\n            var args = Array(len + 1);\n            args.unshift(firstRow, 1);\n            this.foldWidgets.splice.apply(this.foldWidgets, args);\n        }\n    };\n    this.tokenizerUpdateFoldWidgets = function (e) {\n        var rows = e.data;\n        if (rows.first != rows.last) {\n            if (this.foldWidgets.length > rows.first)\n                this.foldWidgets.splice(rows.first, this.foldWidgets.length);\n        }\n    };\n}\nexports.Folding = Folding;\n\n});\n\nace.define(\"ace/edit_session/bracket_match\",[\"require\",\"exports\",\"module\",\"ace/token_iterator\",\"ace/range\"], function(require, exports, module){\"use strict\";\nvar TokenIterator = require(\"../token_iterator\").TokenIterator;\nvar Range = require(\"../range\").Range;\nfunction BracketMatch() {\n    this.findMatchingBracket = function (position, chr) {\n        if (position.column == 0)\n            return null;\n        var charBeforeCursor = chr || this.getLine(position.row).charAt(position.column - 1);\n        if (charBeforeCursor == \"\")\n            return null;\n        var match = charBeforeCursor.match(/([\\(\\[\\{])|([\\)\\]\\}])/);\n        if (!match)\n            return null;\n        if (match[1])\n            return this.$findClosingBracket(match[1], position);\n        else\n            return this.$findOpeningBracket(match[2], position);\n    };\n    this.getBracketRange = function (pos) {\n        var line = this.getLine(pos.row);\n        var before = true, range;\n        var chr = line.charAt(pos.column - 1);\n        var match = chr && chr.match(/([\\(\\[\\{])|([\\)\\]\\}])/);\n        if (!match) {\n            chr = line.charAt(pos.column);\n            pos = { row: pos.row, column: pos.column + 1 };\n            match = chr && chr.match(/([\\(\\[\\{])|([\\)\\]\\}])/);\n            before = false;\n        }\n        if (!match)\n            return null;\n        if (match[1]) {\n            var bracketPos = this.$findClosingBracket(match[1], pos);\n            if (!bracketPos)\n                return null;\n            range = Range.fromPoints(pos, bracketPos);\n            if (!before) {\n                range.end.column++;\n                range.start.column--;\n            }\n            range.cursor = range.end;\n        }\n        else {\n            var bracketPos = this.$findOpeningBracket(match[2], pos);\n            if (!bracketPos)\n                return null;\n            range = Range.fromPoints(bracketPos, pos);\n            if (!before) {\n                range.start.column++;\n                range.end.column--;\n            }\n            range.cursor = range.start;\n        }\n        return range;\n    };\n    this.getMatchingBracketRanges = function (pos, isBackwards) {\n        var line = this.getLine(pos.row);\n        var bracketsRegExp = /([\\(\\[\\{])|([\\)\\]\\}])/;\n        var chr = !isBackwards && line.charAt(pos.column - 1);\n        var match = chr && chr.match(bracketsRegExp);\n        if (!match) {\n            chr = (isBackwards === undefined || isBackwards) && line.charAt(pos.column);\n            pos = {\n                row: pos.row,\n                column: pos.column + 1\n            };\n            match = chr && chr.match(bracketsRegExp);\n        }\n        if (!match)\n            return null;\n        var startRange = new Range(pos.row, pos.column - 1, pos.row, pos.column);\n        var bracketPos = match[1] ? this.$findClosingBracket(match[1], pos)\n            : this.$findOpeningBracket(match[2], pos);\n        if (!bracketPos)\n            return [startRange];\n        var endRange = new Range(bracketPos.row, bracketPos.column, bracketPos.row, bracketPos.column + 1);\n        return [startRange, endRange];\n    };\n    this.$brackets = {\n        \")\": \"(\",\n        \"(\": \")\",\n        \"]\": \"[\",\n        \"[\": \"]\",\n        \"{\": \"}\",\n        \"}\": \"{\",\n        \"<\": \">\",\n        \">\": \"<\"\n    };\n    this.$findOpeningBracket = function (bracket, position, typeRe) {\n        var openBracket = this.$brackets[bracket];\n        var depth = 1;\n        var iterator = new TokenIterator(this, position.row, position.column);\n        var token = iterator.getCurrentToken();\n        if (!token)\n            token = iterator.stepForward();\n        if (!token)\n            return;\n        if (!typeRe) {\n            typeRe = new RegExp(\"(\\\\.?\" +\n                token.type.replace(\".\", \"\\\\.\").replace(\"rparen\", \".paren\")\n                    .replace(/\\b(?:end)\\b/, \"(?:start|begin|end)\")\n                + \")+\");\n        }\n        var valueIndex = position.column - iterator.getCurrentTokenColumn() - 2;\n        var value = token.value;\n        while (true) {\n            while (valueIndex >= 0) {\n                var chr = value.charAt(valueIndex);\n                if (chr == openBracket) {\n                    depth -= 1;\n                    if (depth == 0) {\n                        return { row: iterator.getCurrentTokenRow(),\n                            column: valueIndex + iterator.getCurrentTokenColumn() };\n                    }\n                }\n                else if (chr == bracket) {\n                    depth += 1;\n                }\n                valueIndex -= 1;\n            }\n            do {\n                token = iterator.stepBackward();\n            } while (token && !typeRe.test(token.type));\n            if (token == null)\n                break;\n            value = token.value;\n            valueIndex = value.length - 1;\n        }\n        return null;\n    };\n    this.$findClosingBracket = function (bracket, position, typeRe) {\n        var closingBracket = this.$brackets[bracket];\n        var depth = 1;\n        var iterator = new TokenIterator(this, position.row, position.column);\n        var token = iterator.getCurrentToken();\n        if (!token)\n            token = iterator.stepForward();\n        if (!token)\n            return;\n        if (!typeRe) {\n            typeRe = new RegExp(\"(\\\\.?\" +\n                token.type.replace(\".\", \"\\\\.\").replace(\"lparen\", \".paren\")\n                    .replace(/\\b(?:start|begin)\\b/, \"(?:start|begin|end)\")\n                + \")+\");\n        }\n        var valueIndex = position.column - iterator.getCurrentTokenColumn();\n        while (true) {\n            var value = token.value;\n            var valueLength = value.length;\n            while (valueIndex < valueLength) {\n                var chr = value.charAt(valueIndex);\n                if (chr == closingBracket) {\n                    depth -= 1;\n                    if (depth == 0) {\n                        return { row: iterator.getCurrentTokenRow(),\n                            column: valueIndex + iterator.getCurrentTokenColumn() };\n                    }\n                }\n                else if (chr == bracket) {\n                    depth += 1;\n                }\n                valueIndex += 1;\n            }\n            do {\n                token = iterator.stepForward();\n            } while (token && !typeRe.test(token.type));\n            if (token == null)\n                break;\n            valueIndex = 0;\n        }\n        return null;\n    };\n    this.getMatchingTags = function (pos) {\n        var iterator = new TokenIterator(this, pos.row, pos.column);\n        var token = this.$findTagName(iterator);\n        if (!token)\n            return;\n        var prevToken = iterator.stepBackward();\n        if (prevToken.value === '<') {\n            return this.$findClosingTag(iterator, token);\n        }\n        else {\n            return this.$findOpeningTag(iterator, token);\n        }\n    };\n    this.$findTagName = function (iterator) {\n        var token = iterator.getCurrentToken();\n        var found = false;\n        var backward = false;\n        if (token && token.type.indexOf('tag-name') === -1) {\n            do {\n                if (backward)\n                    token = iterator.stepBackward();\n                else\n                    token = iterator.stepForward();\n                if (token) {\n                    if (token.value === \"/>\") {\n                        backward = true;\n                    }\n                    else if (token.type.indexOf('tag-name') !== -1) {\n                        found = true;\n                    }\n                }\n            } while (token && !found);\n        }\n        return token;\n    };\n    this.$findClosingTag = function (iterator, token) {\n        var prevToken;\n        var currentTag = token.value;\n        var tag = token.value;\n        var depth = 0;\n        var openTagStart = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1);\n        token = iterator.stepForward();\n        var openTagName = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + token.value.length);\n        var foundOpenTagEnd = false;\n        do {\n            prevToken = token;\n            token = iterator.stepForward();\n            if (token) {\n                if (token.value === '>' && !foundOpenTagEnd) {\n                    var openTagEnd = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1); //Range for `>`\n                    foundOpenTagEnd = true;\n                }\n                if (token.type.indexOf('tag-name') !== -1) {\n                    currentTag = token.value;\n                    if (tag === currentTag) {\n                        if (prevToken.value === '<') {\n                            depth++;\n                        }\n                        else if (prevToken.value === '</') {\n                            depth--;\n                            if (depth < 0) { //found closing tag\n                                iterator.stepBackward();\n                                var closeTagStart = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 2); //Range for </\n                                token = iterator.stepForward();\n                                var closeTagName = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + token.value.length);\n                                token = iterator.stepForward();\n                                if (token && token.value === '>') {\n                                    var closeTagEnd = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1); //Range for >\n                                }\n                                else {\n                                    return;\n                                }\n                            }\n                        }\n                    }\n                }\n                else if (tag === currentTag && token.value === '/>') { // self-closing tag\n                    depth--;\n                    if (depth < 0) { //found self-closing tag end\n                        var closeTagStart = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 2);\n                        var closeTagName = closeTagStart;\n                        var closeTagEnd = closeTagName;\n                        var openTagEnd = new Range(openTagName.end.row, openTagName.end.column, openTagName.end.row, openTagName.end.column + 1);\n                    }\n                }\n            }\n        } while (token && depth >= 0);\n        if (openTagStart && openTagEnd && closeTagStart && closeTagEnd && openTagName && closeTagName) {\n            return {\n                openTag: new Range(openTagStart.start.row, openTagStart.start.column, openTagEnd.end.row, openTagEnd.end.column),\n                closeTag: new Range(closeTagStart.start.row, closeTagStart.start.column, closeTagEnd.end.row, closeTagEnd.end.column),\n                openTagName: openTagName,\n                closeTagName: closeTagName\n            };\n        }\n    };\n    this.$findOpeningTag = function (iterator, token) {\n        var prevToken = iterator.getCurrentToken();\n        var tag = token.value;\n        var depth = 0;\n        var startRow = iterator.getCurrentTokenRow();\n        var startColumn = iterator.getCurrentTokenColumn();\n        var endColumn = startColumn + 2;\n        var closeTagStart = new Range(startRow, startColumn, startRow, endColumn); //Range for </\n        iterator.stepForward();\n        var closeTagName = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + token.value.length);\n        token = iterator.stepForward();\n        if (!token || token.value !== \">\")\n            return;\n        var closeTagEnd = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1); //Range for >\n        iterator.stepBackward();\n        iterator.stepBackward();\n        do {\n            token = prevToken;\n            startRow = iterator.getCurrentTokenRow();\n            startColumn = iterator.getCurrentTokenColumn();\n            endColumn = startColumn + token.value.length;\n            prevToken = iterator.stepBackward();\n            if (token) {\n                if (token.type.indexOf('tag-name') !== -1) {\n                    if (tag === token.value) {\n                        if (prevToken.value === '<') {\n                            depth++;\n                            if (depth > 0) { //found opening tag\n                                var openTagName = new Range(startRow, startColumn, startRow, endColumn);\n                                var openTagStart = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1); //Range for <\n                                do {\n                                    token = iterator.stepForward();\n                                } while (token && token.value !== '>');\n                                var openTagEnd = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1); //Range for >\n                            }\n                        }\n                        else if (prevToken.value === '</') {\n                            depth--;\n                        }\n                    }\n                }\n                else if (token.value === '/>') { // self-closing tag\n                    var stepCount = 0;\n                    var tmpToken = prevToken;\n                    while (tmpToken) {\n                        if (tmpToken.type.indexOf('tag-name') !== -1 && tmpToken.value === tag) {\n                            depth--;\n                            break;\n                        }\n                        else if (tmpToken.value === '<') {\n                            break;\n                        }\n                        tmpToken = iterator.stepBackward();\n                        stepCount++;\n                    }\n                    for (var i = 0; i < stepCount; i++) {\n                        iterator.stepForward();\n                    }\n                }\n            }\n        } while (prevToken && depth <= 0);\n        if (openTagStart && openTagEnd && closeTagStart && closeTagEnd && openTagName && closeTagName) {\n            return {\n                openTag: new Range(openTagStart.start.row, openTagStart.start.column, openTagEnd.end.row, openTagEnd.end.column),\n                closeTag: new Range(closeTagStart.start.row, closeTagStart.start.column, closeTagEnd.end.row, closeTagEnd.end.column),\n                openTagName: openTagName,\n                closeTagName: closeTagName\n            };\n        }\n    };\n}\nexports.BracketMatch = BracketMatch;\n\n});\n\nace.define(\"ace/edit_session\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/lang\",\"ace/bidihandler\",\"ace/config\",\"ace/lib/event_emitter\",\"ace/selection\",\"ace/mode/text\",\"ace/range\",\"ace/document\",\"ace/background_tokenizer\",\"ace/search_highlight\",\"ace/edit_session/folding\",\"ace/edit_session/bracket_match\"], function(require, exports, module){\"use strict\";\nvar oop = require(\"./lib/oop\");\nvar lang = require(\"./lib/lang\");\nvar BidiHandler = require(\"./bidihandler\").BidiHandler;\nvar config = require(\"./config\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar Selection = require(\"./selection\").Selection;\nvar TextMode = require(\"./mode/text\").Mode;\nvar Range = require(\"./range\").Range;\nvar Document = require(\"./document\").Document;\nvar BackgroundTokenizer = require(\"./background_tokenizer\").BackgroundTokenizer;\nvar SearchHighlight = require(\"./search_highlight\").SearchHighlight;\nvar EditSession = function (text, mode) {\n    this.$breakpoints = [];\n    this.$decorations = [];\n    this.$frontMarkers = {};\n    this.$backMarkers = {};\n    this.$markerId = 1;\n    this.$undoSelect = true;\n    this.$foldData = [];\n    this.id = \"session\" + (++EditSession.$uid);\n    this.$foldData.toString = function () {\n        return this.join(\"\\n\");\n    };\n    this.bgTokenizer = new BackgroundTokenizer((new TextMode()).getTokenizer(), this);\n    var _self = this;\n    this.bgTokenizer.on(\"update\", function (e) {\n        _self._signal(\"tokenizerUpdate\", e);\n    });\n    this.on(\"changeFold\", this.onChangeFold.bind(this));\n    this.$onChange = this.onChange.bind(this);\n    if (typeof text != \"object\" || !text.getLine)\n        text = new Document(text);\n    this.setDocument(text);\n    this.selection = new Selection(this);\n    this.$bidiHandler = new BidiHandler(this);\n    config.resetOptions(this);\n    this.setMode(mode);\n    config._signal(\"session\", this);\n    this.destroyed = false;\n};\nEditSession.$uid = 0;\n(function () {\n    oop.implement(this, EventEmitter);\n    this.setDocument = function (doc) {\n        if (this.doc)\n            this.doc.off(\"change\", this.$onChange);\n        this.doc = doc;\n        doc.on(\"change\", this.$onChange, true);\n        this.bgTokenizer.setDocument(this.getDocument());\n        this.resetCaches();\n    };\n    this.getDocument = function () {\n        return this.doc;\n    };\n    this.$resetRowCache = function (docRow) {\n        if (!docRow) {\n            this.$docRowCache = [];\n            this.$screenRowCache = [];\n            return;\n        }\n        var l = this.$docRowCache.length;\n        var i = this.$getRowCacheIndex(this.$docRowCache, docRow) + 1;\n        if (l > i) {\n            this.$docRowCache.splice(i, l);\n            this.$screenRowCache.splice(i, l);\n        }\n    };\n    this.$getRowCacheIndex = function (cacheArray, val) {\n        var low = 0;\n        var hi = cacheArray.length - 1;\n        while (low <= hi) {\n            var mid = (low + hi) >> 1;\n            var c = cacheArray[mid];\n            if (val > c)\n                low = mid + 1;\n            else if (val < c)\n                hi = mid - 1;\n            else\n                return mid;\n        }\n        return low - 1;\n    };\n    this.resetCaches = function () {\n        this.$modified = true;\n        this.$wrapData = [];\n        this.$rowLengthCache = [];\n        this.$resetRowCache(0);\n        if (!this.destroyed)\n            this.bgTokenizer.start(0);\n    };\n    this.onChangeFold = function (e) {\n        var fold = e.data;\n        this.$resetRowCache(fold.start.row);\n    };\n    this.onChange = function (delta) {\n        this.$modified = true;\n        this.$bidiHandler.onChange(delta);\n        this.$resetRowCache(delta.start.row);\n        var removedFolds = this.$updateInternalDataOnChange(delta);\n        if (!this.$fromUndo && this.$undoManager) {\n            if (removedFolds && removedFolds.length) {\n                this.$undoManager.add({\n                    action: \"removeFolds\",\n                    folds: removedFolds\n                }, this.mergeUndoDeltas);\n                this.mergeUndoDeltas = true;\n            }\n            this.$undoManager.add(delta, this.mergeUndoDeltas);\n            this.mergeUndoDeltas = true;\n            this.$informUndoManager.schedule();\n        }\n        this.bgTokenizer.$updateOnChange(delta);\n        this._signal(\"change\", delta);\n    };\n    this.setValue = function (text) {\n        this.doc.setValue(text);\n        this.selection.moveTo(0, 0);\n        this.$resetRowCache(0);\n        this.setUndoManager(this.$undoManager);\n        this.getUndoManager().reset();\n    };\n    this.getValue =\n        this.toString = function () {\n            return this.doc.getValue();\n        };\n    this.getSelection = function () {\n        return this.selection;\n    };\n    this.getState = function (row) {\n        return this.bgTokenizer.getState(row);\n    };\n    this.getTokens = function (row) {\n        return this.bgTokenizer.getTokens(row);\n    };\n    this.getTokenAt = function (row, column) {\n        var tokens = this.bgTokenizer.getTokens(row);\n        var token, c = 0;\n        if (column == null) {\n            var i = tokens.length - 1;\n            c = this.getLine(row).length;\n        }\n        else {\n            for (var i = 0; i < tokens.length; i++) {\n                c += tokens[i].value.length;\n                if (c >= column)\n                    break;\n            }\n        }\n        token = tokens[i];\n        if (!token)\n            return null;\n        token.index = i;\n        token.start = c - token.value.length;\n        return token;\n    };\n    this.setUndoManager = function (undoManager) {\n        this.$undoManager = undoManager;\n        if (this.$informUndoManager)\n            this.$informUndoManager.cancel();\n        if (undoManager) {\n            var self = this;\n            undoManager.addSession(this);\n            this.$syncInformUndoManager = function () {\n                self.$informUndoManager.cancel();\n                self.mergeUndoDeltas = false;\n            };\n            this.$informUndoManager = lang.delayedCall(this.$syncInformUndoManager);\n        }\n        else {\n            this.$syncInformUndoManager = function () { };\n        }\n    };\n    this.markUndoGroup = function () {\n        if (this.$syncInformUndoManager)\n            this.$syncInformUndoManager();\n    };\n    this.$defaultUndoManager = {\n        undo: function () { },\n        redo: function () { },\n        hasUndo: function () { },\n        hasRedo: function () { },\n        reset: function () { },\n        add: function () { },\n        addSelection: function () { },\n        startNewGroup: function () { },\n        addSession: function () { }\n    };\n    this.getUndoManager = function () {\n        return this.$undoManager || this.$defaultUndoManager;\n    };\n    this.getTabString = function () {\n        if (this.getUseSoftTabs()) {\n            return lang.stringRepeat(\" \", this.getTabSize());\n        }\n        else {\n            return \"\\t\";\n        }\n    };\n    this.setUseSoftTabs = function (val) {\n        this.setOption(\"useSoftTabs\", val);\n    };\n    this.getUseSoftTabs = function () {\n        return this.$useSoftTabs && !this.$mode.$indentWithTabs;\n    };\n    this.setTabSize = function (tabSize) {\n        this.setOption(\"tabSize\", tabSize);\n    };\n    this.getTabSize = function () {\n        return this.$tabSize;\n    };\n    this.isTabStop = function (position) {\n        return this.$useSoftTabs && (position.column % this.$tabSize === 0);\n    };\n    this.setNavigateWithinSoftTabs = function (navigateWithinSoftTabs) {\n        this.setOption(\"navigateWithinSoftTabs\", navigateWithinSoftTabs);\n    };\n    this.getNavigateWithinSoftTabs = function () {\n        return this.$navigateWithinSoftTabs;\n    };\n    this.$overwrite = false;\n    this.setOverwrite = function (overwrite) {\n        this.setOption(\"overwrite\", overwrite);\n    };\n    this.getOverwrite = function () {\n        return this.$overwrite;\n    };\n    this.toggleOverwrite = function () {\n        this.setOverwrite(!this.$overwrite);\n    };\n    this.addGutterDecoration = function (row, className) {\n        if (!this.$decorations[row])\n            this.$decorations[row] = \"\";\n        this.$decorations[row] += \" \" + className;\n        this._signal(\"changeBreakpoint\", {});\n    };\n    this.removeGutterDecoration = function (row, className) {\n        this.$decorations[row] = (this.$decorations[row] || \"\").replace(\" \" + className, \"\");\n        this._signal(\"changeBreakpoint\", {});\n    };\n    this.getBreakpoints = function () {\n        return this.$breakpoints;\n    };\n    this.setBreakpoints = function (rows) {\n        this.$breakpoints = [];\n        for (var i = 0; i < rows.length; i++) {\n            this.$breakpoints[rows[i]] = \"ace_breakpoint\";\n        }\n        this._signal(\"changeBreakpoint\", {});\n    };\n    this.clearBreakpoints = function () {\n        this.$breakpoints = [];\n        this._signal(\"changeBreakpoint\", {});\n    };\n    this.setBreakpoint = function (row, className) {\n        if (className === undefined)\n            className = \"ace_breakpoint\";\n        if (className)\n            this.$breakpoints[row] = className;\n        else\n            delete this.$breakpoints[row];\n        this._signal(\"changeBreakpoint\", {});\n    };\n    this.clearBreakpoint = function (row) {\n        delete this.$breakpoints[row];\n        this._signal(\"changeBreakpoint\", {});\n    };\n    this.addMarker = function (range, clazz, type, inFront) {\n        var id = this.$markerId++;\n        var marker = {\n            range: range,\n            type: type || \"line\",\n            renderer: typeof type == \"function\" ? type : null,\n            clazz: clazz,\n            inFront: !!inFront,\n            id: id\n        };\n        if (inFront) {\n            this.$frontMarkers[id] = marker;\n            this._signal(\"changeFrontMarker\");\n        }\n        else {\n            this.$backMarkers[id] = marker;\n            this._signal(\"changeBackMarker\");\n        }\n        return id;\n    };\n    this.addDynamicMarker = function (marker, inFront) {\n        if (!marker.update)\n            return;\n        var id = this.$markerId++;\n        marker.id = id;\n        marker.inFront = !!inFront;\n        if (inFront) {\n            this.$frontMarkers[id] = marker;\n            this._signal(\"changeFrontMarker\");\n        }\n        else {\n            this.$backMarkers[id] = marker;\n            this._signal(\"changeBackMarker\");\n        }\n        return marker;\n    };\n    this.removeMarker = function (markerId) {\n        var marker = this.$frontMarkers[markerId] || this.$backMarkers[markerId];\n        if (!marker)\n            return;\n        var markers = marker.inFront ? this.$frontMarkers : this.$backMarkers;\n        delete (markers[markerId]);\n        this._signal(marker.inFront ? \"changeFrontMarker\" : \"changeBackMarker\");\n    };\n    this.getMarkers = function (inFront) {\n        return inFront ? this.$frontMarkers : this.$backMarkers;\n    };\n    this.highlight = function (re) {\n        if (!this.$searchHighlight) {\n            var highlight = new SearchHighlight(null, \"ace_selected-word\", \"text\");\n            this.$searchHighlight = this.addDynamicMarker(highlight);\n        }\n        this.$searchHighlight.setRegexp(re);\n    };\n    this.highlightLines = function (startRow, endRow, clazz, inFront) {\n        if (typeof endRow != \"number\") {\n            clazz = endRow;\n            endRow = startRow;\n        }\n        if (!clazz)\n            clazz = \"ace_step\";\n        var range = new Range(startRow, 0, endRow, Infinity);\n        range.id = this.addMarker(range, clazz, \"fullLine\", inFront);\n        return range;\n    };\n    this.setAnnotations = function (annotations) {\n        this.$annotations = annotations;\n        this._signal(\"changeAnnotation\", {});\n    };\n    this.getAnnotations = function () {\n        return this.$annotations || [];\n    };\n    this.clearAnnotations = function () {\n        this.setAnnotations([]);\n    };\n    this.$detectNewLine = function (text) {\n        var match = text.match(/^.*?(\\r?\\n)/m);\n        if (match) {\n            this.$autoNewLine = match[1];\n        }\n        else {\n            this.$autoNewLine = \"\\n\";\n        }\n    };\n    this.getWordRange = function (row, column) {\n        var line = this.getLine(row);\n        var inToken = false;\n        if (column > 0)\n            inToken = !!line.charAt(column - 1).match(this.tokenRe);\n        if (!inToken)\n            inToken = !!line.charAt(column).match(this.tokenRe);\n        if (inToken)\n            var re = this.tokenRe;\n        else if (/^\\s+$/.test(line.slice(column - 1, column + 1)))\n            var re = /\\s/;\n        else\n            var re = this.nonTokenRe;\n        var start = column;\n        if (start > 0) {\n            do {\n                start--;\n            } while (start >= 0 && line.charAt(start).match(re));\n            start++;\n        }\n        var end = column;\n        while (end < line.length && line.charAt(end).match(re)) {\n            end++;\n        }\n        return new Range(row, start, row, end);\n    };\n    this.getAWordRange = function (row, column) {\n        var wordRange = this.getWordRange(row, column);\n        var line = this.getLine(wordRange.end.row);\n        while (line.charAt(wordRange.end.column).match(/[ \\t]/)) {\n            wordRange.end.column += 1;\n        }\n        return wordRange;\n    };\n    this.setNewLineMode = function (newLineMode) {\n        this.doc.setNewLineMode(newLineMode);\n    };\n    this.getNewLineMode = function () {\n        return this.doc.getNewLineMode();\n    };\n    this.setUseWorker = function (useWorker) { this.setOption(\"useWorker\", useWorker); };\n    this.getUseWorker = function () { return this.$useWorker; };\n    this.onReloadTokenizer = function (e) {\n        var rows = e.data;\n        this.bgTokenizer.start(rows.first);\n        this._signal(\"tokenizerUpdate\", e);\n    };\n    this.$modes = config.$modes;\n    this.$mode = null;\n    this.$modeId = null;\n    this.setMode = function (mode, cb) {\n        if (mode && typeof mode === \"object\") {\n            if (mode.getTokenizer)\n                return this.$onChangeMode(mode);\n            var options = mode;\n            var path = options.path;\n        }\n        else {\n            path = mode || \"ace/mode/text\";\n        }\n        if (!this.$modes[\"ace/mode/text\"])\n            this.$modes[\"ace/mode/text\"] = new TextMode();\n        if (this.$modes[path] && !options) {\n            this.$onChangeMode(this.$modes[path]);\n            cb && cb();\n            return;\n        }\n        this.$modeId = path;\n        config.loadModule([\"mode\", path], function (m) {\n            if (this.$modeId !== path)\n                return cb && cb();\n            if (this.$modes[path] && !options) {\n                this.$onChangeMode(this.$modes[path]);\n            }\n            else if (m && m.Mode) {\n                m = new m.Mode(options);\n                if (!options) {\n                    this.$modes[path] = m;\n                    m.$id = path;\n                }\n                this.$onChangeMode(m);\n            }\n            cb && cb();\n        }.bind(this));\n        if (!this.$mode)\n            this.$onChangeMode(this.$modes[\"ace/mode/text\"], true);\n    };\n    this.$onChangeMode = function (mode, $isPlaceholder) {\n        if (!$isPlaceholder)\n            this.$modeId = mode.$id;\n        if (this.$mode === mode)\n            return;\n        var oldMode = this.$mode;\n        this.$mode = mode;\n        this.$stopWorker();\n        if (this.$useWorker)\n            this.$startWorker();\n        var tokenizer = mode.getTokenizer();\n        if (tokenizer.on !== undefined) {\n            var onReloadTokenizer = this.onReloadTokenizer.bind(this);\n            tokenizer.on(\"update\", onReloadTokenizer);\n        }\n        this.bgTokenizer.setTokenizer(tokenizer);\n        this.bgTokenizer.setDocument(this.getDocument());\n        this.tokenRe = mode.tokenRe;\n        this.nonTokenRe = mode.nonTokenRe;\n        if (!$isPlaceholder) {\n            if (mode.attachToSession)\n                mode.attachToSession(this);\n            this.$options.wrapMethod.set.call(this, this.$wrapMethod);\n            this.$setFolding(mode.foldingRules);\n            this.bgTokenizer.start(0);\n            this._emit(\"changeMode\", { oldMode: oldMode, mode: mode });\n        }\n    };\n    this.$stopWorker = function () {\n        if (this.$worker) {\n            this.$worker.terminate();\n            this.$worker = null;\n        }\n    };\n    this.$startWorker = function () {\n        try {\n            this.$worker = this.$mode.createWorker(this);\n        }\n        catch (e) {\n            config.warn(\"Could not load worker\", e);\n            this.$worker = null;\n        }\n    };\n    this.getMode = function () {\n        return this.$mode;\n    };\n    this.$scrollTop = 0;\n    this.setScrollTop = function (scrollTop) {\n        if (this.$scrollTop === scrollTop || isNaN(scrollTop))\n            return;\n        this.$scrollTop = scrollTop;\n        this._signal(\"changeScrollTop\", scrollTop);\n    };\n    this.getScrollTop = function () {\n        return this.$scrollTop;\n    };\n    this.$scrollLeft = 0;\n    this.setScrollLeft = function (scrollLeft) {\n        if (this.$scrollLeft === scrollLeft || isNaN(scrollLeft))\n            return;\n        this.$scrollLeft = scrollLeft;\n        this._signal(\"changeScrollLeft\", scrollLeft);\n    };\n    this.getScrollLeft = function () {\n        return this.$scrollLeft;\n    };\n    this.getScreenWidth = function () {\n        this.$computeWidth();\n        if (this.lineWidgets)\n            return Math.max(this.getLineWidgetMaxWidth(), this.screenWidth);\n        return this.screenWidth;\n    };\n    this.getLineWidgetMaxWidth = function () {\n        if (this.lineWidgetsWidth != null)\n            return this.lineWidgetsWidth;\n        var width = 0;\n        this.lineWidgets.forEach(function (w) {\n            if (w && w.screenWidth > width)\n                width = w.screenWidth;\n        });\n        return this.lineWidgetWidth = width;\n    };\n    this.$computeWidth = function (force) {\n        if (this.$modified || force) {\n            this.$modified = false;\n            if (this.$useWrapMode)\n                return this.screenWidth = this.$wrapLimit;\n            var lines = this.doc.getAllLines();\n            var cache = this.$rowLengthCache;\n            var longestScreenLine = 0;\n            var foldIndex = 0;\n            var foldLine = this.$foldData[foldIndex];\n            var foldStart = foldLine ? foldLine.start.row : Infinity;\n            var len = lines.length;\n            for (var i = 0; i < len; i++) {\n                if (i > foldStart) {\n                    i = foldLine.end.row + 1;\n                    if (i >= len)\n                        break;\n                    foldLine = this.$foldData[foldIndex++];\n                    foldStart = foldLine ? foldLine.start.row : Infinity;\n                }\n                if (cache[i] == null)\n                    cache[i] = this.$getStringScreenWidth(lines[i])[0];\n                if (cache[i] > longestScreenLine)\n                    longestScreenLine = cache[i];\n            }\n            this.screenWidth = longestScreenLine;\n        }\n    };\n    this.getLine = function (row) {\n        return this.doc.getLine(row);\n    };\n    this.getLines = function (firstRow, lastRow) {\n        return this.doc.getLines(firstRow, lastRow);\n    };\n    this.getLength = function () {\n        return this.doc.getLength();\n    };\n    this.getTextRange = function (range) {\n        return this.doc.getTextRange(range || this.selection.getRange());\n    };\n    this.insert = function (position, text) {\n        return this.doc.insert(position, text);\n    };\n    this.remove = function (range) {\n        return this.doc.remove(range);\n    };\n    this.removeFullLines = function (firstRow, lastRow) {\n        return this.doc.removeFullLines(firstRow, lastRow);\n    };\n    this.undoChanges = function (deltas, dontSelect) {\n        if (!deltas.length)\n            return;\n        this.$fromUndo = true;\n        for (var i = deltas.length - 1; i != -1; i--) {\n            var delta = deltas[i];\n            if (delta.action == \"insert\" || delta.action == \"remove\") {\n                this.doc.revertDelta(delta);\n            }\n            else if (delta.folds) {\n                this.addFolds(delta.folds);\n            }\n        }\n        if (!dontSelect && this.$undoSelect) {\n            if (deltas.selectionBefore)\n                this.selection.fromJSON(deltas.selectionBefore);\n            else\n                this.selection.setRange(this.$getUndoSelection(deltas, true));\n        }\n        this.$fromUndo = false;\n    };\n    this.redoChanges = function (deltas, dontSelect) {\n        if (!deltas.length)\n            return;\n        this.$fromUndo = true;\n        for (var i = 0; i < deltas.length; i++) {\n            var delta = deltas[i];\n            if (delta.action == \"insert\" || delta.action == \"remove\") {\n                this.doc.$safeApplyDelta(delta);\n            }\n        }\n        if (!dontSelect && this.$undoSelect) {\n            if (deltas.selectionAfter)\n                this.selection.fromJSON(deltas.selectionAfter);\n            else\n                this.selection.setRange(this.$getUndoSelection(deltas, false));\n        }\n        this.$fromUndo = false;\n    };\n    this.setUndoSelect = function (enable) {\n        this.$undoSelect = enable;\n    };\n    this.$getUndoSelection = function (deltas, isUndo) {\n        function isInsert(delta) {\n            return isUndo ? delta.action !== \"insert\" : delta.action === \"insert\";\n        }\n        var range, point;\n        for (var i = 0; i < deltas.length; i++) {\n            var delta = deltas[i];\n            if (!delta.start)\n                continue; // skip folds\n            if (!range) {\n                if (isInsert(delta)) {\n                    range = Range.fromPoints(delta.start, delta.end);\n                }\n                else {\n                    range = Range.fromPoints(delta.start, delta.start);\n                }\n                continue;\n            }\n            if (isInsert(delta)) {\n                point = delta.start;\n                if (range.compare(point.row, point.column) == -1) {\n                    range.setStart(point);\n                }\n                point = delta.end;\n                if (range.compare(point.row, point.column) == 1) {\n                    range.setEnd(point);\n                }\n            }\n            else {\n                point = delta.start;\n                if (range.compare(point.row, point.column) == -1) {\n                    range = Range.fromPoints(delta.start, delta.start);\n                }\n            }\n        }\n        return range;\n    };\n    this.replace = function (range, text) {\n        return this.doc.replace(range, text);\n    };\n    this.moveText = function (fromRange, toPosition, copy) {\n        var text = this.getTextRange(fromRange);\n        var folds = this.getFoldsInRange(fromRange);\n        var toRange = Range.fromPoints(toPosition, toPosition);\n        if (!copy) {\n            this.remove(fromRange);\n            var rowDiff = fromRange.start.row - fromRange.end.row;\n            var collDiff = rowDiff ? -fromRange.end.column : fromRange.start.column - fromRange.end.column;\n            if (collDiff) {\n                if (toRange.start.row == fromRange.end.row && toRange.start.column > fromRange.end.column)\n                    toRange.start.column += collDiff;\n                if (toRange.end.row == fromRange.end.row && toRange.end.column > fromRange.end.column)\n                    toRange.end.column += collDiff;\n            }\n            if (rowDiff && toRange.start.row >= fromRange.end.row) {\n                toRange.start.row += rowDiff;\n                toRange.end.row += rowDiff;\n            }\n        }\n        toRange.end = this.insert(toRange.start, text);\n        if (folds.length) {\n            var oldStart = fromRange.start;\n            var newStart = toRange.start;\n            var rowDiff = newStart.row - oldStart.row;\n            var collDiff = newStart.column - oldStart.column;\n            this.addFolds(folds.map(function (x) {\n                x = x.clone();\n                if (x.start.row == oldStart.row)\n                    x.start.column += collDiff;\n                if (x.end.row == oldStart.row)\n                    x.end.column += collDiff;\n                x.start.row += rowDiff;\n                x.end.row += rowDiff;\n                return x;\n            }));\n        }\n        return toRange;\n    };\n    this.indentRows = function (startRow, endRow, indentString) {\n        indentString = indentString.replace(/\\t/g, this.getTabString());\n        for (var row = startRow; row <= endRow; row++)\n            this.doc.insertInLine({ row: row, column: 0 }, indentString);\n    };\n    this.outdentRows = function (range) {\n        var rowRange = range.collapseRows();\n        var deleteRange = new Range(0, 0, 0, 0);\n        var size = this.getTabSize();\n        for (var i = rowRange.start.row; i <= rowRange.end.row; ++i) {\n            var line = this.getLine(i);\n            deleteRange.start.row = i;\n            deleteRange.end.row = i;\n            for (var j = 0; j < size; ++j)\n                if (line.charAt(j) != ' ')\n                    break;\n            if (j < size && line.charAt(j) == '\\t') {\n                deleteRange.start.column = j;\n                deleteRange.end.column = j + 1;\n            }\n            else {\n                deleteRange.start.column = 0;\n                deleteRange.end.column = j;\n            }\n            this.remove(deleteRange);\n        }\n    };\n    this.$moveLines = function (firstRow, lastRow, dir) {\n        firstRow = this.getRowFoldStart(firstRow);\n        lastRow = this.getRowFoldEnd(lastRow);\n        if (dir < 0) {\n            var row = this.getRowFoldStart(firstRow + dir);\n            if (row < 0)\n                return 0;\n            var diff = row - firstRow;\n        }\n        else if (dir > 0) {\n            var row = this.getRowFoldEnd(lastRow + dir);\n            if (row > this.doc.getLength() - 1)\n                return 0;\n            var diff = row - lastRow;\n        }\n        else {\n            firstRow = this.$clipRowToDocument(firstRow);\n            lastRow = this.$clipRowToDocument(lastRow);\n            var diff = lastRow - firstRow + 1;\n        }\n        var range = new Range(firstRow, 0, lastRow, Number.MAX_VALUE);\n        var folds = this.getFoldsInRange(range).map(function (x) {\n            x = x.clone();\n            x.start.row += diff;\n            x.end.row += diff;\n            return x;\n        });\n        var lines = dir == 0\n            ? this.doc.getLines(firstRow, lastRow)\n            : this.doc.removeFullLines(firstRow, lastRow);\n        this.doc.insertFullLines(firstRow + diff, lines);\n        folds.length && this.addFolds(folds);\n        return diff;\n    };\n    this.moveLinesUp = function (firstRow, lastRow) {\n        return this.$moveLines(firstRow, lastRow, -1);\n    };\n    this.moveLinesDown = function (firstRow, lastRow) {\n        return this.$moveLines(firstRow, lastRow, 1);\n    };\n    this.duplicateLines = function (firstRow, lastRow) {\n        return this.$moveLines(firstRow, lastRow, 0);\n    };\n    this.$clipRowToDocument = function (row) {\n        return Math.max(0, Math.min(row, this.doc.getLength() - 1));\n    };\n    this.$clipColumnToRow = function (row, column) {\n        if (column < 0)\n            return 0;\n        return Math.min(this.doc.getLine(row).length, column);\n    };\n    this.$clipPositionToDocument = function (row, column) {\n        column = Math.max(0, column);\n        if (row < 0) {\n            row = 0;\n            column = 0;\n        }\n        else {\n            var len = this.doc.getLength();\n            if (row >= len) {\n                row = len - 1;\n                column = this.doc.getLine(len - 1).length;\n            }\n            else {\n                column = Math.min(this.doc.getLine(row).length, column);\n            }\n        }\n        return {\n            row: row,\n            column: column\n        };\n    };\n    this.$clipRangeToDocument = function (range) {\n        if (range.start.row < 0) {\n            range.start.row = 0;\n            range.start.column = 0;\n        }\n        else {\n            range.start.column = this.$clipColumnToRow(range.start.row, range.start.column);\n        }\n        var len = this.doc.getLength() - 1;\n        if (range.end.row > len) {\n            range.end.row = len;\n            range.end.column = this.doc.getLine(len).length;\n        }\n        else {\n            range.end.column = this.$clipColumnToRow(range.end.row, range.end.column);\n        }\n        return range;\n    };\n    this.$wrapLimit = 80;\n    this.$useWrapMode = false;\n    this.$wrapLimitRange = {\n        min: null,\n        max: null\n    };\n    this.setUseWrapMode = function (useWrapMode) {\n        if (useWrapMode != this.$useWrapMode) {\n            this.$useWrapMode = useWrapMode;\n            this.$modified = true;\n            this.$resetRowCache(0);\n            if (useWrapMode) {\n                var len = this.getLength();\n                this.$wrapData = Array(len);\n                this.$updateWrapData(0, len - 1);\n            }\n            this._signal(\"changeWrapMode\");\n        }\n    };\n    this.getUseWrapMode = function () {\n        return this.$useWrapMode;\n    };\n    this.setWrapLimitRange = function (min, max) {\n        if (this.$wrapLimitRange.min !== min || this.$wrapLimitRange.max !== max) {\n            this.$wrapLimitRange = { min: min, max: max };\n            this.$modified = true;\n            this.$bidiHandler.markAsDirty();\n            if (this.$useWrapMode)\n                this._signal(\"changeWrapMode\");\n        }\n    };\n    this.adjustWrapLimit = function (desiredLimit, $printMargin) {\n        var limits = this.$wrapLimitRange;\n        if (limits.max < 0)\n            limits = { min: $printMargin, max: $printMargin };\n        var wrapLimit = this.$constrainWrapLimit(desiredLimit, limits.min, limits.max);\n        if (wrapLimit != this.$wrapLimit && wrapLimit > 1) {\n            this.$wrapLimit = wrapLimit;\n            this.$modified = true;\n            if (this.$useWrapMode) {\n                this.$updateWrapData(0, this.getLength() - 1);\n                this.$resetRowCache(0);\n                this._signal(\"changeWrapLimit\");\n            }\n            return true;\n        }\n        return false;\n    };\n    this.$constrainWrapLimit = function (wrapLimit, min, max) {\n        if (min)\n            wrapLimit = Math.max(min, wrapLimit);\n        if (max)\n            wrapLimit = Math.min(max, wrapLimit);\n        return wrapLimit;\n    };\n    this.getWrapLimit = function () {\n        return this.$wrapLimit;\n    };\n    this.setWrapLimit = function (limit) {\n        this.setWrapLimitRange(limit, limit);\n    };\n    this.getWrapLimitRange = function () {\n        return {\n            min: this.$wrapLimitRange.min,\n            max: this.$wrapLimitRange.max\n        };\n    };\n    this.$updateInternalDataOnChange = function (delta) {\n        var useWrapMode = this.$useWrapMode;\n        var action = delta.action;\n        var start = delta.start;\n        var end = delta.end;\n        var firstRow = start.row;\n        var lastRow = end.row;\n        var len = lastRow - firstRow;\n        var removedFolds = null;\n        this.$updating = true;\n        if (len != 0) {\n            if (action === \"remove\") {\n                this[useWrapMode ? \"$wrapData\" : \"$rowLengthCache\"].splice(firstRow, len);\n                var foldLines = this.$foldData;\n                removedFolds = this.getFoldsInRange(delta);\n                this.removeFolds(removedFolds);\n                var foldLine = this.getFoldLine(end.row);\n                var idx = 0;\n                if (foldLine) {\n                    foldLine.addRemoveChars(end.row, end.column, start.column - end.column);\n                    foldLine.shiftRow(-len);\n                    var foldLineBefore = this.getFoldLine(firstRow);\n                    if (foldLineBefore && foldLineBefore !== foldLine) {\n                        foldLineBefore.merge(foldLine);\n                        foldLine = foldLineBefore;\n                    }\n                    idx = foldLines.indexOf(foldLine) + 1;\n                }\n                for (idx; idx < foldLines.length; idx++) {\n                    var foldLine = foldLines[idx];\n                    if (foldLine.start.row >= end.row) {\n                        foldLine.shiftRow(-len);\n                    }\n                }\n                lastRow = firstRow;\n            }\n            else {\n                var args = Array(len);\n                args.unshift(firstRow, 0);\n                var arr = useWrapMode ? this.$wrapData : this.$rowLengthCache;\n                arr.splice.apply(arr, args);\n                var foldLines = this.$foldData;\n                var foldLine = this.getFoldLine(firstRow);\n                var idx = 0;\n                if (foldLine) {\n                    var cmp = foldLine.range.compareInside(start.row, start.column);\n                    if (cmp == 0) {\n                        foldLine = foldLine.split(start.row, start.column);\n                        if (foldLine) {\n                            foldLine.shiftRow(len);\n                            foldLine.addRemoveChars(lastRow, 0, end.column - start.column);\n                        }\n                    }\n                    else \n                    if (cmp == -1) {\n                        foldLine.addRemoveChars(firstRow, 0, end.column - start.column);\n                        foldLine.shiftRow(len);\n                    }\n                    idx = foldLines.indexOf(foldLine) + 1;\n                }\n                for (idx; idx < foldLines.length; idx++) {\n                    var foldLine = foldLines[idx];\n                    if (foldLine.start.row >= firstRow) {\n                        foldLine.shiftRow(len);\n                    }\n                }\n            }\n        }\n        else {\n            len = Math.abs(delta.start.column - delta.end.column);\n            if (action === \"remove\") {\n                removedFolds = this.getFoldsInRange(delta);\n                this.removeFolds(removedFolds);\n                len = -len;\n            }\n            var foldLine = this.getFoldLine(firstRow);\n            if (foldLine) {\n                foldLine.addRemoveChars(firstRow, start.column, len);\n            }\n        }\n        if (useWrapMode && this.$wrapData.length != this.doc.getLength()) {\n            console.error(\"doc.getLength() and $wrapData.length have to be the same!\");\n        }\n        this.$updating = false;\n        if (useWrapMode)\n            this.$updateWrapData(firstRow, lastRow);\n        else\n            this.$updateRowLengthCache(firstRow, lastRow);\n        return removedFolds;\n    };\n    this.$updateRowLengthCache = function (firstRow, lastRow, b) {\n        this.$rowLengthCache[firstRow] = null;\n        this.$rowLengthCache[lastRow] = null;\n    };\n    this.$updateWrapData = function (firstRow, lastRow) {\n        var lines = this.doc.getAllLines();\n        var tabSize = this.getTabSize();\n        var wrapData = this.$wrapData;\n        var wrapLimit = this.$wrapLimit;\n        var tokens;\n        var foldLine;\n        var row = firstRow;\n        lastRow = Math.min(lastRow, lines.length - 1);\n        while (row <= lastRow) {\n            foldLine = this.getFoldLine(row, foldLine);\n            if (!foldLine) {\n                tokens = this.$getDisplayTokens(lines[row]);\n                wrapData[row] = this.$computeWrapSplits(tokens, wrapLimit, tabSize);\n                row++;\n            }\n            else {\n                tokens = [];\n                foldLine.walk(function (placeholder, row, column, lastColumn) {\n                    var walkTokens;\n                    if (placeholder != null) {\n                        walkTokens = this.$getDisplayTokens(placeholder, tokens.length);\n                        walkTokens[0] = PLACEHOLDER_START;\n                        for (var i = 1; i < walkTokens.length; i++) {\n                            walkTokens[i] = PLACEHOLDER_BODY;\n                        }\n                    }\n                    else {\n                        walkTokens = this.$getDisplayTokens(lines[row].substring(lastColumn, column), tokens.length);\n                    }\n                    tokens = tokens.concat(walkTokens);\n                }.bind(this), foldLine.end.row, lines[foldLine.end.row].length + 1);\n                wrapData[foldLine.start.row] = this.$computeWrapSplits(tokens, wrapLimit, tabSize);\n                row = foldLine.end.row + 1;\n            }\n        }\n    };\n    var CHAR = 1, CHAR_EXT = 2, PLACEHOLDER_START = 3, PLACEHOLDER_BODY = 4, PUNCTUATION = 9, SPACE = 10, TAB = 11, TAB_SPACE = 12;\n    this.$computeWrapSplits = function (tokens, wrapLimit, tabSize) {\n        if (tokens.length == 0) {\n            return [];\n        }\n        var splits = [];\n        var displayLength = tokens.length;\n        var lastSplit = 0, lastDocSplit = 0;\n        var isCode = this.$wrapAsCode;\n        var indentedSoftWrap = this.$indentedSoftWrap;\n        var maxIndent = wrapLimit <= Math.max(2 * tabSize, 8)\n            || indentedSoftWrap === false ? 0 : Math.floor(wrapLimit / 2);\n        function getWrapIndent() {\n            var indentation = 0;\n            if (maxIndent === 0)\n                return indentation;\n            if (indentedSoftWrap) {\n                for (var i = 0; i < tokens.length; i++) {\n                    var token = tokens[i];\n                    if (token == SPACE)\n                        indentation += 1;\n                    else if (token == TAB)\n                        indentation += tabSize;\n                    else if (token == TAB_SPACE)\n                        continue;\n                    else\n                        break;\n                }\n            }\n            if (isCode && indentedSoftWrap !== false)\n                indentation += tabSize;\n            return Math.min(indentation, maxIndent);\n        }\n        function addSplit(screenPos) {\n            var len = screenPos - lastSplit;\n            for (var i = lastSplit; i < screenPos; i++) {\n                var ch = tokens[i];\n                if (ch === 12 || ch === 2)\n                    len -= 1;\n            }\n            if (!splits.length) {\n                indent = getWrapIndent();\n                splits.indent = indent;\n            }\n            lastDocSplit += len;\n            splits.push(lastDocSplit);\n            lastSplit = screenPos;\n        }\n        var indent = 0;\n        while (displayLength - lastSplit > wrapLimit - indent) {\n            var split = lastSplit + wrapLimit - indent;\n            if (tokens[split - 1] >= SPACE && tokens[split] >= SPACE) {\n                addSplit(split);\n                continue;\n            }\n            if (tokens[split] == PLACEHOLDER_START || tokens[split] == PLACEHOLDER_BODY) {\n                for (split; split != lastSplit - 1; split--) {\n                    if (tokens[split] == PLACEHOLDER_START) {\n                        break;\n                    }\n                }\n                if (split > lastSplit) {\n                    addSplit(split);\n                    continue;\n                }\n                split = lastSplit + wrapLimit;\n                for (split; split < tokens.length; split++) {\n                    if (tokens[split] != PLACEHOLDER_BODY) {\n                        break;\n                    }\n                }\n                if (split == tokens.length) {\n                    break; // Breaks the while-loop.\n                }\n                addSplit(split);\n                continue;\n            }\n            var minSplit = Math.max(split - (wrapLimit - (wrapLimit >> 2)), lastSplit - 1);\n            while (split > minSplit && tokens[split] < PLACEHOLDER_START) {\n                split--;\n            }\n            if (isCode) {\n                while (split > minSplit && tokens[split] < PLACEHOLDER_START) {\n                    split--;\n                }\n                while (split > minSplit && tokens[split] == PUNCTUATION) {\n                    split--;\n                }\n            }\n            else {\n                while (split > minSplit && tokens[split] < SPACE) {\n                    split--;\n                }\n            }\n            if (split > minSplit) {\n                addSplit(++split);\n                continue;\n            }\n            split = lastSplit + wrapLimit;\n            if (tokens[split] == CHAR_EXT)\n                split--;\n            addSplit(split - indent);\n        }\n        return splits;\n    };\n    this.$getDisplayTokens = function (str, offset) {\n        var arr = [];\n        var tabSize;\n        offset = offset || 0;\n        for (var i = 0; i < str.length; i++) {\n            var c = str.charCodeAt(i);\n            if (c == 9) {\n                tabSize = this.getScreenTabSize(arr.length + offset);\n                arr.push(TAB);\n                for (var n = 1; n < tabSize; n++) {\n                    arr.push(TAB_SPACE);\n                }\n            }\n            else if (c == 32) {\n                arr.push(SPACE);\n            }\n            else if ((c > 39 && c < 48) || (c > 57 && c < 64)) {\n                arr.push(PUNCTUATION);\n            }\n            else if (c >= 0x1100 && isFullWidth(c)) {\n                arr.push(CHAR, CHAR_EXT);\n            }\n            else {\n                arr.push(CHAR);\n            }\n        }\n        return arr;\n    };\n    this.$getStringScreenWidth = function (str, maxScreenColumn, screenColumn) {\n        if (maxScreenColumn == 0)\n            return [0, 0];\n        if (maxScreenColumn == null)\n            maxScreenColumn = Infinity;\n        screenColumn = screenColumn || 0;\n        var c, column;\n        for (column = 0; column < str.length; column++) {\n            c = str.charCodeAt(column);\n            if (c == 9) {\n                screenColumn += this.getScreenTabSize(screenColumn);\n            }\n            else if (c >= 0x1100 && isFullWidth(c)) {\n                screenColumn += 2;\n            }\n            else {\n                screenColumn += 1;\n            }\n            if (screenColumn > maxScreenColumn) {\n                break;\n            }\n        }\n        return [screenColumn, column];\n    };\n    this.lineWidgets = null;\n    this.getRowLength = function (row) {\n        var h = 1;\n        if (this.lineWidgets)\n            h += this.lineWidgets[row] && this.lineWidgets[row].rowCount || 0;\n        if (!this.$useWrapMode || !this.$wrapData[row])\n            return h;\n        else\n            return this.$wrapData[row].length + h;\n    };\n    this.getRowLineCount = function (row) {\n        if (!this.$useWrapMode || !this.$wrapData[row]) {\n            return 1;\n        }\n        else {\n            return this.$wrapData[row].length + 1;\n        }\n    };\n    this.getRowWrapIndent = function (screenRow) {\n        if (this.$useWrapMode) {\n            var pos = this.screenToDocumentPosition(screenRow, Number.MAX_VALUE);\n            var splits = this.$wrapData[pos.row];\n            return splits.length && splits[0] < pos.column ? splits.indent : 0;\n        }\n        else {\n            return 0;\n        }\n    };\n    this.getScreenLastRowColumn = function (screenRow) {\n        var pos = this.screenToDocumentPosition(screenRow, Number.MAX_VALUE);\n        return this.documentToScreenColumn(pos.row, pos.column);\n    };\n    this.getDocumentLastRowColumn = function (docRow, docColumn) {\n        var screenRow = this.documentToScreenRow(docRow, docColumn);\n        return this.getScreenLastRowColumn(screenRow);\n    };\n    this.getDocumentLastRowColumnPosition = function (docRow, docColumn) {\n        var screenRow = this.documentToScreenRow(docRow, docColumn);\n        return this.screenToDocumentPosition(screenRow, Number.MAX_VALUE / 10);\n    };\n    this.getRowSplitData = function (row) {\n        if (!this.$useWrapMode) {\n            return undefined;\n        }\n        else {\n            return this.$wrapData[row];\n        }\n    };\n    this.getScreenTabSize = function (screenColumn) {\n        return this.$tabSize - (screenColumn % this.$tabSize | 0);\n    };\n    this.screenToDocumentRow = function (screenRow, screenColumn) {\n        return this.screenToDocumentPosition(screenRow, screenColumn).row;\n    };\n    this.screenToDocumentColumn = function (screenRow, screenColumn) {\n        return this.screenToDocumentPosition(screenRow, screenColumn).column;\n    };\n    this.screenToDocumentPosition = function (screenRow, screenColumn, offsetX) {\n        if (screenRow < 0)\n            return { row: 0, column: 0 };\n        var line;\n        var docRow = 0;\n        var docColumn = 0;\n        var column;\n        var row = 0;\n        var rowLength = 0;\n        var rowCache = this.$screenRowCache;\n        var i = this.$getRowCacheIndex(rowCache, screenRow);\n        var l = rowCache.length;\n        if (l && i >= 0) {\n            var row = rowCache[i];\n            var docRow = this.$docRowCache[i];\n            var doCache = screenRow > rowCache[l - 1];\n        }\n        else {\n            var doCache = !l;\n        }\n        var maxRow = this.getLength() - 1;\n        var foldLine = this.getNextFoldLine(docRow);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n        while (row <= screenRow) {\n            rowLength = this.getRowLength(docRow);\n            if (row + rowLength > screenRow || docRow >= maxRow) {\n                break;\n            }\n            else {\n                row += rowLength;\n                docRow++;\n                if (docRow > foldStart) {\n                    docRow = foldLine.end.row + 1;\n                    foldLine = this.getNextFoldLine(docRow, foldLine);\n                    foldStart = foldLine ? foldLine.start.row : Infinity;\n                }\n            }\n            if (doCache) {\n                this.$docRowCache.push(docRow);\n                this.$screenRowCache.push(row);\n            }\n        }\n        if (foldLine && foldLine.start.row <= docRow) {\n            line = this.getFoldDisplayLine(foldLine);\n            docRow = foldLine.start.row;\n        }\n        else if (row + rowLength <= screenRow || docRow > maxRow) {\n            return {\n                row: maxRow,\n                column: this.getLine(maxRow).length\n            };\n        }\n        else {\n            line = this.getLine(docRow);\n            foldLine = null;\n        }\n        var wrapIndent = 0, splitIndex = Math.floor(screenRow - row);\n        if (this.$useWrapMode) {\n            var splits = this.$wrapData[docRow];\n            if (splits) {\n                column = splits[splitIndex];\n                if (splitIndex > 0 && splits.length) {\n                    wrapIndent = splits.indent;\n                    docColumn = splits[splitIndex - 1] || splits[splits.length - 1];\n                    line = line.substring(docColumn);\n                }\n            }\n        }\n        if (offsetX !== undefined && this.$bidiHandler.isBidiRow(row + splitIndex, docRow, splitIndex))\n            screenColumn = this.$bidiHandler.offsetToCol(offsetX);\n        docColumn += this.$getStringScreenWidth(line, screenColumn - wrapIndent)[1];\n        if (this.$useWrapMode && docColumn >= column)\n            docColumn = column - 1;\n        if (foldLine)\n            return foldLine.idxToPosition(docColumn);\n        return { row: docRow, column: docColumn };\n    };\n    this.documentToScreenPosition = function (docRow, docColumn) {\n        if (typeof docColumn === \"undefined\")\n            var pos = this.$clipPositionToDocument(docRow.row, docRow.column);\n        else\n            pos = this.$clipPositionToDocument(docRow, docColumn);\n        docRow = pos.row;\n        docColumn = pos.column;\n        var screenRow = 0;\n        var foldStartRow = null;\n        var fold = null;\n        fold = this.getFoldAt(docRow, docColumn, 1);\n        if (fold) {\n            docRow = fold.start.row;\n            docColumn = fold.start.column;\n        }\n        var rowEnd, row = 0;\n        var rowCache = this.$docRowCache;\n        var i = this.$getRowCacheIndex(rowCache, docRow);\n        var l = rowCache.length;\n        if (l && i >= 0) {\n            var row = rowCache[i];\n            var screenRow = this.$screenRowCache[i];\n            var doCache = docRow > rowCache[l - 1];\n        }\n        else {\n            var doCache = !l;\n        }\n        var foldLine = this.getNextFoldLine(row);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n        while (row < docRow) {\n            if (row >= foldStart) {\n                rowEnd = foldLine.end.row + 1;\n                if (rowEnd > docRow)\n                    break;\n                foldLine = this.getNextFoldLine(rowEnd, foldLine);\n                foldStart = foldLine ? foldLine.start.row : Infinity;\n            }\n            else {\n                rowEnd = row + 1;\n            }\n            screenRow += this.getRowLength(row);\n            row = rowEnd;\n            if (doCache) {\n                this.$docRowCache.push(row);\n                this.$screenRowCache.push(screenRow);\n            }\n        }\n        var textLine = \"\";\n        if (foldLine && row >= foldStart) {\n            textLine = this.getFoldDisplayLine(foldLine, docRow, docColumn);\n            foldStartRow = foldLine.start.row;\n        }\n        else {\n            textLine = this.getLine(docRow).substring(0, docColumn);\n            foldStartRow = docRow;\n        }\n        var wrapIndent = 0;\n        if (this.$useWrapMode) {\n            var wrapRow = this.$wrapData[foldStartRow];\n            if (wrapRow) {\n                var screenRowOffset = 0;\n                while (textLine.length >= wrapRow[screenRowOffset]) {\n                    screenRow++;\n                    screenRowOffset++;\n                }\n                textLine = textLine.substring(wrapRow[screenRowOffset - 1] || 0, textLine.length);\n                wrapIndent = screenRowOffset > 0 ? wrapRow.indent : 0;\n            }\n        }\n        if (this.lineWidgets && this.lineWidgets[row] && this.lineWidgets[row].rowsAbove)\n            screenRow += this.lineWidgets[row].rowsAbove;\n        return {\n            row: screenRow,\n            column: wrapIndent + this.$getStringScreenWidth(textLine)[0]\n        };\n    };\n    this.documentToScreenColumn = function (row, docColumn) {\n        return this.documentToScreenPosition(row, docColumn).column;\n    };\n    this.documentToScreenRow = function (docRow, docColumn) {\n        return this.documentToScreenPosition(docRow, docColumn).row;\n    };\n    this.getScreenLength = function () {\n        var screenRows = 0;\n        var fold = null;\n        if (!this.$useWrapMode) {\n            screenRows = this.getLength();\n            var foldData = this.$foldData;\n            for (var i = 0; i < foldData.length; i++) {\n                fold = foldData[i];\n                screenRows -= fold.end.row - fold.start.row;\n            }\n        }\n        else {\n            var lastRow = this.$wrapData.length;\n            var row = 0, i = 0;\n            var fold = this.$foldData[i++];\n            var foldStart = fold ? fold.start.row : Infinity;\n            while (row < lastRow) {\n                var splits = this.$wrapData[row];\n                screenRows += splits ? splits.length + 1 : 1;\n                row++;\n                if (row > foldStart) {\n                    row = fold.end.row + 1;\n                    fold = this.$foldData[i++];\n                    foldStart = fold ? fold.start.row : Infinity;\n                }\n            }\n        }\n        if (this.lineWidgets)\n            screenRows += this.$getWidgetScreenLength();\n        return screenRows;\n    };\n    this.$setFontMetrics = function (fm) {\n        if (!this.$enableVarChar)\n            return;\n        this.$getStringScreenWidth = function (str, maxScreenColumn, screenColumn) {\n            if (maxScreenColumn === 0)\n                return [0, 0];\n            if (!maxScreenColumn)\n                maxScreenColumn = Infinity;\n            screenColumn = screenColumn || 0;\n            var c, column;\n            for (column = 0; column < str.length; column++) {\n                c = str.charAt(column);\n                if (c === \"\\t\") {\n                    screenColumn += this.getScreenTabSize(screenColumn);\n                }\n                else {\n                    screenColumn += fm.getCharacterWidth(c);\n                }\n                if (screenColumn > maxScreenColumn) {\n                    break;\n                }\n            }\n            return [screenColumn, column];\n        };\n    };\n    this.destroy = function () {\n        if (!this.destroyed) {\n            this.bgTokenizer.setDocument(null);\n            this.bgTokenizer.cleanup();\n            this.destroyed = true;\n        }\n        this.$stopWorker();\n        this.removeAllListeners();\n        if (this.doc) {\n            this.doc.off(\"change\", this.$onChange);\n        }\n        this.selection.detach();\n    };\n    this.isFullWidth = isFullWidth;\n    function isFullWidth(c) {\n        if (c < 0x1100)\n            return false;\n        return c >= 0x1100 && c <= 0x115F ||\n            c >= 0x11A3 && c <= 0x11A7 ||\n            c >= 0x11FA && c <= 0x11FF ||\n            c >= 0x2329 && c <= 0x232A ||\n            c >= 0x2E80 && c <= 0x2E99 ||\n            c >= 0x2E9B && c <= 0x2EF3 ||\n            c >= 0x2F00 && c <= 0x2FD5 ||\n            c >= 0x2FF0 && c <= 0x2FFB ||\n            c >= 0x3000 && c <= 0x303E ||\n            c >= 0x3041 && c <= 0x3096 ||\n            c >= 0x3099 && c <= 0x30FF ||\n            c >= 0x3105 && c <= 0x312D ||\n            c >= 0x3131 && c <= 0x318E ||\n            c >= 0x3190 && c <= 0x31BA ||\n            c >= 0x31C0 && c <= 0x31E3 ||\n            c >= 0x31F0 && c <= 0x321E ||\n            c >= 0x3220 && c <= 0x3247 ||\n            c >= 0x3250 && c <= 0x32FE ||\n            c >= 0x3300 && c <= 0x4DBF ||\n            c >= 0x4E00 && c <= 0xA48C ||\n            c >= 0xA490 && c <= 0xA4C6 ||\n            c >= 0xA960 && c <= 0xA97C ||\n            c >= 0xAC00 && c <= 0xD7A3 ||\n            c >= 0xD7B0 && c <= 0xD7C6 ||\n            c >= 0xD7CB && c <= 0xD7FB ||\n            c >= 0xF900 && c <= 0xFAFF ||\n            c >= 0xFE10 && c <= 0xFE19 ||\n            c >= 0xFE30 && c <= 0xFE52 ||\n            c >= 0xFE54 && c <= 0xFE66 ||\n            c >= 0xFE68 && c <= 0xFE6B ||\n            c >= 0xFF01 && c <= 0xFF60 ||\n            c >= 0xFFE0 && c <= 0xFFE6;\n    }\n}).call(EditSession.prototype);\nrequire(\"./edit_session/folding\").Folding.call(EditSession.prototype);\nrequire(\"./edit_session/bracket_match\").BracketMatch.call(EditSession.prototype);\nconfig.defineOptions(EditSession.prototype, \"session\", {\n    wrap: {\n        set: function (value) {\n            if (!value || value == \"off\")\n                value = false;\n            else if (value == \"free\")\n                value = true;\n            else if (value == \"printMargin\")\n                value = -1;\n            else if (typeof value == \"string\")\n                value = parseInt(value, 10) || false;\n            if (this.$wrap == value)\n                return;\n            this.$wrap = value;\n            if (!value) {\n                this.setUseWrapMode(false);\n            }\n            else {\n                var col = typeof value == \"number\" ? value : null;\n                this.setWrapLimitRange(col, col);\n                this.setUseWrapMode(true);\n            }\n        },\n        get: function () {\n            if (this.getUseWrapMode()) {\n                if (this.$wrap == -1)\n                    return \"printMargin\";\n                if (!this.getWrapLimitRange().min)\n                    return \"free\";\n                return this.$wrap;\n            }\n            return \"off\";\n        },\n        handlesSet: true\n    },\n    wrapMethod: {\n        set: function (val) {\n            val = val == \"auto\"\n                ? this.$mode.type != \"text\"\n                : val != \"text\";\n            if (val != this.$wrapAsCode) {\n                this.$wrapAsCode = val;\n                if (this.$useWrapMode) {\n                    this.$useWrapMode = false;\n                    this.setUseWrapMode(true);\n                }\n            }\n        },\n        initialValue: \"auto\"\n    },\n    indentedSoftWrap: {\n        set: function () {\n            if (this.$useWrapMode) {\n                this.$useWrapMode = false;\n                this.setUseWrapMode(true);\n            }\n        },\n        initialValue: true\n    },\n    firstLineNumber: {\n        set: function () { this._signal(\"changeBreakpoint\"); },\n        initialValue: 1\n    },\n    useWorker: {\n        set: function (useWorker) {\n            this.$useWorker = useWorker;\n            this.$stopWorker();\n            if (useWorker)\n                this.$startWorker();\n        },\n        initialValue: true\n    },\n    useSoftTabs: { initialValue: true },\n    tabSize: {\n        set: function (tabSize) {\n            tabSize = parseInt(tabSize);\n            if (tabSize > 0 && this.$tabSize !== tabSize) {\n                this.$modified = true;\n                this.$rowLengthCache = [];\n                this.$tabSize = tabSize;\n                this._signal(\"changeTabSize\");\n            }\n        },\n        initialValue: 4,\n        handlesSet: true\n    },\n    navigateWithinSoftTabs: { initialValue: false },\n    foldStyle: {\n        set: function (val) { this.setFoldStyle(val); },\n        handlesSet: true\n    },\n    overwrite: {\n        set: function (val) { this._signal(\"changeOverwrite\"); },\n        initialValue: false\n    },\n    newLineMode: {\n        set: function (val) { this.doc.setNewLineMode(val); },\n        get: function () { return this.doc.getNewLineMode(); },\n        handlesSet: true\n    },\n    mode: {\n        set: function (val) { this.setMode(val); },\n        get: function () { return this.$modeId; },\n        handlesSet: true\n    }\n});\nexports.EditSession = EditSession;\n\n});\n\nace.define(\"ace/search\",[\"require\",\"exports\",\"module\",\"ace/lib/lang\",\"ace/lib/oop\",\"ace/range\"], function(require, exports, module){\"use strict\";\nvar lang = require(\"./lib/lang\");\nvar oop = require(\"./lib/oop\");\nvar Range = require(\"./range\").Range;\nvar Search = function () {\n    this.$options = {};\n};\n(function () {\n    this.set = function (options) {\n        oop.mixin(this.$options, options);\n        return this;\n    };\n    this.getOptions = function () {\n        return lang.copyObject(this.$options);\n    };\n    this.setOptions = function (options) {\n        this.$options = options;\n    };\n    this.find = function (session) {\n        var options = this.$options;\n        var iterator = this.$matchIterator(session, options);\n        if (!iterator)\n            return false;\n        var firstRange = null;\n        iterator.forEach(function (sr, sc, er, ec) {\n            firstRange = new Range(sr, sc, er, ec);\n            if (sc == ec && options.start && options.start.start\n                && options.skipCurrent != false && firstRange.isEqual(options.start)) {\n                firstRange = null;\n                return false;\n            }\n            return true;\n        });\n        return firstRange;\n    };\n    this.findAll = function (session) {\n        var options = this.$options;\n        if (!options.needle)\n            return [];\n        this.$assembleRegExp(options);\n        var range = options.range;\n        var lines = range\n            ? session.getLines(range.start.row, range.end.row)\n            : session.doc.getAllLines();\n        var ranges = [];\n        var re = options.re;\n        if (options.$isMultiLine) {\n            var len = re.length;\n            var maxRow = lines.length - len;\n            var prevRange;\n            outer: for (var row = re.offset || 0; row <= maxRow; row++) {\n                for (var j = 0; j < len; j++)\n                    if (lines[row + j].search(re[j]) == -1)\n                        continue outer;\n                var startLine = lines[row];\n                var line = lines[row + len - 1];\n                var startIndex = startLine.length - startLine.match(re[0])[0].length;\n                var endIndex = line.match(re[len - 1])[0].length;\n                if (prevRange && prevRange.end.row === row &&\n                    prevRange.end.column > startIndex) {\n                    continue;\n                }\n                ranges.push(prevRange = new Range(row, startIndex, row + len - 1, endIndex));\n                if (len > 2)\n                    row = row + len - 2;\n            }\n        }\n        else {\n            for (var i = 0; i < lines.length; i++) {\n                var matches = lang.getMatchOffsets(lines[i], re);\n                for (var j = 0; j < matches.length; j++) {\n                    var match = matches[j];\n                    ranges.push(new Range(i, match.offset, i, match.offset + match.length));\n                }\n            }\n        }\n        if (range) {\n            var startColumn = range.start.column;\n            var endColumn = range.end.column;\n            var i = 0, j = ranges.length - 1;\n            while (i < j && ranges[i].start.column < startColumn && ranges[i].start.row == 0)\n                i++;\n            var endRow = range.end.row - range.start.row;\n            while (i < j && ranges[j].end.column > endColumn && ranges[j].end.row == endRow)\n                j--;\n            ranges = ranges.slice(i, j + 1);\n            for (i = 0, j = ranges.length; i < j; i++) {\n                ranges[i].start.row += range.start.row;\n                ranges[i].end.row += range.start.row;\n            }\n        }\n        return ranges;\n    };\n    this.replace = function (input, replacement) {\n        var options = this.$options;\n        var re = this.$assembleRegExp(options);\n        if (options.$isMultiLine)\n            return replacement;\n        if (!re)\n            return;\n        var match = re.exec(input);\n        if (!match || match[0].length != input.length)\n            return null;\n        replacement = input.replace(re, replacement);\n        if (options.preserveCase) {\n            replacement = replacement.split(\"\");\n            for (var i = Math.min(input.length, input.length); i--;) {\n                var ch = input[i];\n                if (ch && ch.toLowerCase() != ch)\n                    replacement[i] = replacement[i].toUpperCase();\n                else\n                    replacement[i] = replacement[i].toLowerCase();\n            }\n            replacement = replacement.join(\"\");\n        }\n        return replacement;\n    };\n    this.$assembleRegExp = function (options, $disableFakeMultiline) {\n        if (options.needle instanceof RegExp)\n            return options.re = options.needle;\n        var needle = options.needle;\n        if (!options.needle)\n            return options.re = false;\n        if (!options.regExp)\n            needle = lang.escapeRegExp(needle);\n        if (options.wholeWord)\n            needle = addWordBoundary(needle, options);\n        var modifier = options.caseSensitive ? \"gm\" : \"gmi\";\n        options.$isMultiLine = !$disableFakeMultiline && /[\\n\\r]/.test(needle);\n        if (options.$isMultiLine)\n            return options.re = this.$assembleMultilineRegExp(needle, modifier);\n        try {\n            var re = new RegExp(needle, modifier);\n        }\n        catch (e) {\n            re = false;\n        }\n        return options.re = re;\n    };\n    this.$assembleMultilineRegExp = function (needle, modifier) {\n        var parts = needle.replace(/\\r\\n|\\r|\\n/g, \"$\\n^\").split(\"\\n\");\n        var re = [];\n        for (var i = 0; i < parts.length; i++)\n            try {\n                re.push(new RegExp(parts[i], modifier));\n            }\n            catch (e) {\n                return false;\n            }\n        return re;\n    };\n    this.$matchIterator = function (session, options) {\n        var re = this.$assembleRegExp(options);\n        if (!re)\n            return false;\n        var backwards = options.backwards == true;\n        var skipCurrent = options.skipCurrent != false;\n        var range = options.range;\n        var start = options.start;\n        if (!start)\n            start = range ? range[backwards ? \"end\" : \"start\"] : session.selection.getRange();\n        if (start.start)\n            start = start[skipCurrent != backwards ? \"end\" : \"start\"];\n        var firstRow = range ? range.start.row : 0;\n        var lastRow = range ? range.end.row : session.getLength() - 1;\n        if (backwards) {\n            var forEach = function (callback) {\n                var row = start.row;\n                if (forEachInLine(row, start.column, callback))\n                    return;\n                for (row--; row >= firstRow; row--)\n                    if (forEachInLine(row, Number.MAX_VALUE, callback))\n                        return;\n                if (options.wrap == false)\n                    return;\n                for (row = lastRow, firstRow = start.row; row >= firstRow; row--)\n                    if (forEachInLine(row, Number.MAX_VALUE, callback))\n                        return;\n            };\n        }\n        else {\n            var forEach = function (callback) {\n                var row = start.row;\n                if (forEachInLine(row, start.column, callback))\n                    return;\n                for (row = row + 1; row <= lastRow; row++)\n                    if (forEachInLine(row, 0, callback))\n                        return;\n                if (options.wrap == false)\n                    return;\n                for (row = firstRow, lastRow = start.row; row <= lastRow; row++)\n                    if (forEachInLine(row, 0, callback))\n                        return;\n            };\n        }\n        if (options.$isMultiLine) {\n            var len = re.length;\n            var forEachInLine = function (row, offset, callback) {\n                var startRow = backwards ? row - len + 1 : row;\n                if (startRow < 0 || startRow + len > session.getLength())\n                    return;\n                var line = session.getLine(startRow);\n                var startIndex = line.search(re[0]);\n                if (!backwards && startIndex < offset || startIndex === -1)\n                    return;\n                for (var i = 1; i < len; i++) {\n                    line = session.getLine(startRow + i);\n                    if (line.search(re[i]) == -1)\n                        return;\n                }\n                var endIndex = line.match(re[len - 1])[0].length;\n                if (backwards && endIndex > offset)\n                    return;\n                if (callback(startRow, startIndex, startRow + len - 1, endIndex))\n                    return true;\n            };\n        }\n        else if (backwards) {\n            var forEachInLine = function (row, endIndex, callback) {\n                var line = session.getLine(row);\n                var matches = [];\n                var m, last = 0;\n                re.lastIndex = 0;\n                while ((m = re.exec(line))) {\n                    var length = m[0].length;\n                    last = m.index;\n                    if (!length) {\n                        if (last >= line.length)\n                            break;\n                        re.lastIndex = last += 1;\n                    }\n                    if (m.index + length > endIndex)\n                        break;\n                    matches.push(m.index, length);\n                }\n                for (var i = matches.length - 1; i >= 0; i -= 2) {\n                    var column = matches[i - 1];\n                    var length = matches[i];\n                    if (callback(row, column, row, column + length))\n                        return true;\n                }\n            };\n        }\n        else {\n            var forEachInLine = function (row, startIndex, callback) {\n                var line = session.getLine(row);\n                var last;\n                var m;\n                re.lastIndex = startIndex;\n                while ((m = re.exec(line))) {\n                    var length = m[0].length;\n                    last = m.index;\n                    if (callback(row, last, row, last + length))\n                        return true;\n                    if (!length) {\n                        re.lastIndex = last += 1;\n                        if (last >= line.length)\n                            return false;\n                    }\n                }\n            };\n        }\n        return { forEach: forEach };\n    };\n}).call(Search.prototype);\nfunction addWordBoundary(needle, options) {\n    function wordBoundary(c) {\n        if (/\\w/.test(c) || options.regExp)\n            return \"\\\\b\";\n        return \"\";\n    }\n    return wordBoundary(needle[0]) + needle\n        + wordBoundary(needle[needle.length - 1]);\n}\nexports.Search = Search;\n\n});\n\nace.define(\"ace/keyboard/hash_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/keys\",\"ace/lib/useragent\"], function(require, exports, module){\"use strict\";\nvar keyUtil = require(\"../lib/keys\");\nvar useragent = require(\"../lib/useragent\");\nvar KEY_MODS = keyUtil.KEY_MODS;\nfunction HashHandler(config, platform) {\n    this.platform = platform || (useragent.isMac ? \"mac\" : \"win\");\n    this.commands = {};\n    this.commandKeyBinding = {};\n    this.addCommands(config);\n    this.$singleCommand = true;\n}\nfunction MultiHashHandler(config, platform) {\n    HashHandler.call(this, config, platform);\n    this.$singleCommand = false;\n}\nMultiHashHandler.prototype = HashHandler.prototype;\n(function () {\n    this.addCommand = function (command) {\n        if (this.commands[command.name])\n            this.removeCommand(command);\n        this.commands[command.name] = command;\n        if (command.bindKey)\n            this._buildKeyHash(command);\n    };\n    this.removeCommand = function (command, keepCommand) {\n        var name = command && (typeof command === 'string' ? command : command.name);\n        command = this.commands[name];\n        if (!keepCommand)\n            delete this.commands[name];\n        var ckb = this.commandKeyBinding;\n        for (var keyId in ckb) {\n            var cmdGroup = ckb[keyId];\n            if (cmdGroup == command) {\n                delete ckb[keyId];\n            }\n            else if (Array.isArray(cmdGroup)) {\n                var i = cmdGroup.indexOf(command);\n                if (i != -1) {\n                    cmdGroup.splice(i, 1);\n                    if (cmdGroup.length == 1)\n                        ckb[keyId] = cmdGroup[0];\n                }\n            }\n        }\n    };\n    this.bindKey = function (key, command, position) {\n        if (typeof key == \"object\" && key) {\n            if (position == undefined)\n                position = key.position;\n            key = key[this.platform];\n        }\n        if (!key)\n            return;\n        if (typeof command == \"function\")\n            return this.addCommand({ exec: command, bindKey: key, name: command.name || key });\n        key.split(\"|\").forEach(function (keyPart) {\n            var chain = \"\";\n            if (keyPart.indexOf(\" \") != -1) {\n                var parts = keyPart.split(/\\s+/);\n                keyPart = parts.pop();\n                parts.forEach(function (keyPart) {\n                    var binding = this.parseKeys(keyPart);\n                    var id = KEY_MODS[binding.hashId] + binding.key;\n                    chain += (chain ? \" \" : \"\") + id;\n                    this._addCommandToBinding(chain, \"chainKeys\");\n                }, this);\n                chain += \" \";\n            }\n            var binding = this.parseKeys(keyPart);\n            var id = KEY_MODS[binding.hashId] + binding.key;\n            this._addCommandToBinding(chain + id, command, position);\n        }, this);\n    };\n    function getPosition(command) {\n        return typeof command == \"object\" && command.bindKey\n            && command.bindKey.position\n            || (command.isDefault ? -100 : 0);\n    }\n    this._addCommandToBinding = function (keyId, command, position) {\n        var ckb = this.commandKeyBinding, i;\n        if (!command) {\n            delete ckb[keyId];\n        }\n        else if (!ckb[keyId] || this.$singleCommand) {\n            ckb[keyId] = command;\n        }\n        else {\n            if (!Array.isArray(ckb[keyId])) {\n                ckb[keyId] = [ckb[keyId]];\n            }\n            else if ((i = ckb[keyId].indexOf(command)) != -1) {\n                ckb[keyId].splice(i, 1);\n            }\n            if (typeof position != \"number\") {\n                position = getPosition(command);\n            }\n            var commands = ckb[keyId];\n            for (i = 0; i < commands.length; i++) {\n                var other = commands[i];\n                var otherPos = getPosition(other);\n                if (otherPos > position)\n                    break;\n            }\n            commands.splice(i, 0, command);\n        }\n    };\n    this.addCommands = function (commands) {\n        commands && Object.keys(commands).forEach(function (name) {\n            var command = commands[name];\n            if (!command)\n                return;\n            if (typeof command === \"string\")\n                return this.bindKey(command, name);\n            if (typeof command === \"function\")\n                command = { exec: command };\n            if (typeof command !== \"object\")\n                return;\n            if (!command.name)\n                command.name = name;\n            this.addCommand(command);\n        }, this);\n    };\n    this.removeCommands = function (commands) {\n        Object.keys(commands).forEach(function (name) {\n            this.removeCommand(commands[name]);\n        }, this);\n    };\n    this.bindKeys = function (keyList) {\n        Object.keys(keyList).forEach(function (key) {\n            this.bindKey(key, keyList[key]);\n        }, this);\n    };\n    this._buildKeyHash = function (command) {\n        this.bindKey(command.bindKey, command);\n    };\n    this.parseKeys = function (keys) {\n        var parts = keys.toLowerCase().split(/[\\-\\+]([\\-\\+])?/).filter(function (x) { return x; });\n        var key = parts.pop();\n        var keyCode = keyUtil[key];\n        if (keyUtil.FUNCTION_KEYS[keyCode])\n            key = keyUtil.FUNCTION_KEYS[keyCode].toLowerCase();\n        else if (!parts.length)\n            return { key: key, hashId: -1 };\n        else if (parts.length == 1 && parts[0] == \"shift\")\n            return { key: key.toUpperCase(), hashId: -1 };\n        var hashId = 0;\n        for (var i = parts.length; i--;) {\n            var modifier = keyUtil.KEY_MODS[parts[i]];\n            if (modifier == null) {\n                if (typeof console != \"undefined\")\n                    console.error(\"invalid modifier \" + parts[i] + \" in \" + keys);\n                return false;\n            }\n            hashId |= modifier;\n        }\n        return { key: key, hashId: hashId };\n    };\n    this.findKeyCommand = function findKeyCommand(hashId, keyString) {\n        var key = KEY_MODS[hashId] + keyString;\n        return this.commandKeyBinding[key];\n    };\n    this.handleKeyboard = function (data, hashId, keyString, keyCode) {\n        if (keyCode < 0)\n            return;\n        var key = KEY_MODS[hashId] + keyString;\n        var command = this.commandKeyBinding[key];\n        if (data.$keyChain) {\n            data.$keyChain += \" \" + key;\n            command = this.commandKeyBinding[data.$keyChain] || command;\n        }\n        if (command) {\n            if (command == \"chainKeys\" || command[command.length - 1] == \"chainKeys\") {\n                data.$keyChain = data.$keyChain || key;\n                return { command: \"null\" };\n            }\n        }\n        if (data.$keyChain) {\n            if ((!hashId || hashId == 4) && keyString.length == 1)\n                data.$keyChain = data.$keyChain.slice(0, -key.length - 1); // wait for input\n            else if (hashId == -1 || keyCode > 0)\n                data.$keyChain = \"\"; // reset keyChain\n        }\n        return { command: command };\n    };\n    this.getStatusText = function (editor, data) {\n        return data.$keyChain || \"\";\n    };\n}).call(HashHandler.prototype);\nexports.HashHandler = HashHandler;\nexports.MultiHashHandler = MultiHashHandler;\n\n});\n\nace.define(\"ace/commands/command_manager\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/keyboard/hash_handler\",\"ace/lib/event_emitter\"], function(require, exports, module){\"use strict\";\nvar oop = require(\"../lib/oop\");\nvar MultiHashHandler = require(\"../keyboard/hash_handler\").MultiHashHandler;\nvar EventEmitter = require(\"../lib/event_emitter\").EventEmitter;\nvar CommandManager = function (platform, commands) {\n    MultiHashHandler.call(this, commands, platform);\n    this.byName = this.commands;\n    this.setDefaultHandler(\"exec\", function (e) {\n        if (!e.args) {\n            return e.command.exec(e.editor, {}, e.event, true);\n        }\n        return e.command.exec(e.editor, e.args, e.event, false);\n    });\n};\noop.inherits(CommandManager, MultiHashHandler);\n(function () {\n    oop.implement(this, EventEmitter);\n    this.exec = function (command, editor, args) {\n        if (Array.isArray(command)) {\n            for (var i = command.length; i--;) {\n                if (this.exec(command[i], editor, args))\n                    return true;\n            }\n            return false;\n        }\n        if (typeof command === \"string\")\n            command = this.commands[command];\n        if (!command)\n            return false;\n        if (editor && editor.$readOnly && !command.readOnly)\n            return false;\n        if (this.$checkCommandState != false && command.isAvailable && !command.isAvailable(editor))\n            return false;\n        var e = { editor: editor, command: command, args: args };\n        e.returnValue = this._emit(\"exec\", e);\n        this._signal(\"afterExec\", e);\n        return e.returnValue === false ? false : true;\n    };\n    this.toggleRecording = function (editor) {\n        if (this.$inReplay)\n            return;\n        editor && editor._emit(\"changeStatus\");\n        if (this.recording) {\n            this.macro.pop();\n            this.off(\"exec\", this.$addCommandToMacro);\n            if (!this.macro.length)\n                this.macro = this.oldMacro;\n            return this.recording = false;\n        }\n        if (!this.$addCommandToMacro) {\n            this.$addCommandToMacro = function (e) {\n                this.macro.push([e.command, e.args]);\n            }.bind(this);\n        }\n        this.oldMacro = this.macro;\n        this.macro = [];\n        this.on(\"exec\", this.$addCommandToMacro);\n        return this.recording = true;\n    };\n    this.replay = function (editor) {\n        if (this.$inReplay || !this.macro)\n            return;\n        if (this.recording)\n            return this.toggleRecording(editor);\n        try {\n            this.$inReplay = true;\n            this.macro.forEach(function (x) {\n                if (typeof x == \"string\")\n                    this.exec(x, editor);\n                else\n                    this.exec(x[0], editor, x[1]);\n            }, this);\n        }\n        finally {\n            this.$inReplay = false;\n        }\n    };\n    this.trimMacro = function (m) {\n        return m.map(function (x) {\n            if (typeof x[0] != \"string\")\n                x[0] = x[0].name;\n            if (!x[1])\n                x = x[0];\n            return x;\n        });\n    };\n}).call(CommandManager.prototype);\nexports.CommandManager = CommandManager;\n\n});\n\nace.define(\"ace/commands/default_commands\",[\"require\",\"exports\",\"module\",\"ace/lib/lang\",\"ace/config\",\"ace/range\"], function(require, exports, module){\"use strict\";\nvar lang = require(\"../lib/lang\");\nvar config = require(\"../config\");\nvar Range = require(\"../range\").Range;\nfunction bindKey(win, mac) {\n    return { win: win, mac: mac };\n}\nexports.commands = [{\n        name: \"showSettingsMenu\",\n        description: \"Show settings menu\",\n        bindKey: bindKey(\"Ctrl-,\", \"Command-,\"),\n        exec: function (editor) {\n            config.loadModule(\"ace/ext/settings_menu\", function (module) {\n                module.init(editor);\n                editor.showSettingsMenu();\n            });\n        },\n        readOnly: true\n    }, {\n        name: \"goToNextError\",\n        description: \"Go to next error\",\n        bindKey: bindKey(\"Alt-E\", \"F4\"),\n        exec: function (editor) {\n            config.loadModule(\"./ext/error_marker\", function (module) {\n                module.showErrorMarker(editor, 1);\n            });\n        },\n        scrollIntoView: \"animate\",\n        readOnly: true\n    }, {\n        name: \"goToPreviousError\",\n        description: \"Go to previous error\",\n        bindKey: bindKey(\"Alt-Shift-E\", \"Shift-F4\"),\n        exec: function (editor) {\n            config.loadModule(\"./ext/error_marker\", function (module) {\n                module.showErrorMarker(editor, -1);\n            });\n        },\n        scrollIntoView: \"animate\",\n        readOnly: true\n    }, {\n        name: \"selectall\",\n        description: \"Select all\",\n        bindKey: bindKey(\"Ctrl-A\", \"Command-A\"),\n        exec: function (editor) { editor.selectAll(); },\n        readOnly: true\n    }, {\n        name: \"centerselection\",\n        description: \"Center selection\",\n        bindKey: bindKey(null, \"Ctrl-L\"),\n        exec: function (editor) { editor.centerSelection(); },\n        readOnly: true\n    }, {\n        name: \"gotoline\",\n        description: \"Go to line...\",\n        bindKey: bindKey(\"Ctrl-L\", \"Command-L\"),\n        exec: function (editor, line) {\n            if (typeof line === \"number\" && !isNaN(line))\n                editor.gotoLine(line);\n            editor.prompt({ $type: \"gotoLine\" });\n        },\n        readOnly: true\n    }, {\n        name: \"fold\",\n        bindKey: bindKey(\"Alt-L|Ctrl-F1\", \"Command-Alt-L|Command-F1\"),\n        exec: function (editor) { editor.session.toggleFold(false); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"center\",\n        readOnly: true\n    }, {\n        name: \"unfold\",\n        bindKey: bindKey(\"Alt-Shift-L|Ctrl-Shift-F1\", \"Command-Alt-Shift-L|Command-Shift-F1\"),\n        exec: function (editor) { editor.session.toggleFold(true); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"center\",\n        readOnly: true\n    }, {\n        name: \"toggleFoldWidget\",\n        description: \"Toggle fold widget\",\n        bindKey: bindKey(\"F2\", \"F2\"),\n        exec: function (editor) { editor.session.toggleFoldWidget(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"center\",\n        readOnly: true\n    }, {\n        name: \"toggleParentFoldWidget\",\n        description: \"Toggle parent fold widget\",\n        bindKey: bindKey(\"Alt-F2\", \"Alt-F2\"),\n        exec: function (editor) { editor.session.toggleFoldWidget(true); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"center\",\n        readOnly: true\n    }, {\n        name: \"foldall\",\n        description: \"Fold all\",\n        bindKey: bindKey(null, \"Ctrl-Command-Option-0\"),\n        exec: function (editor) { editor.session.foldAll(); },\n        scrollIntoView: \"center\",\n        readOnly: true\n    }, {\n        name: \"foldAllComments\",\n        description: \"Fold all comments\",\n        bindKey: bindKey(null, \"Ctrl-Command-Option-0\"),\n        exec: function (editor) { editor.session.foldAllComments(); },\n        scrollIntoView: \"center\",\n        readOnly: true\n    }, {\n        name: \"foldOther\",\n        description: \"Fold other\",\n        bindKey: bindKey(\"Alt-0\", \"Command-Option-0\"),\n        exec: function (editor) {\n            editor.session.foldAll();\n            editor.session.unfold(editor.selection.getAllRanges());\n        },\n        scrollIntoView: \"center\",\n        readOnly: true\n    }, {\n        name: \"unfoldall\",\n        description: \"Unfold all\",\n        bindKey: bindKey(\"Alt-Shift-0\", \"Command-Option-Shift-0\"),\n        exec: function (editor) { editor.session.unfold(); },\n        scrollIntoView: \"center\",\n        readOnly: true\n    }, {\n        name: \"findnext\",\n        description: \"Find next\",\n        bindKey: bindKey(\"Ctrl-K\", \"Command-G\"),\n        exec: function (editor) { editor.findNext(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"center\",\n        readOnly: true\n    }, {\n        name: \"findprevious\",\n        description: \"Find previous\",\n        bindKey: bindKey(\"Ctrl-Shift-K\", \"Command-Shift-G\"),\n        exec: function (editor) { editor.findPrevious(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"center\",\n        readOnly: true\n    }, {\n        name: \"selectOrFindNext\",\n        description: \"Select or find next\",\n        bindKey: bindKey(\"Alt-K\", \"Ctrl-G\"),\n        exec: function (editor) {\n            if (editor.selection.isEmpty())\n                editor.selection.selectWord();\n            else\n                editor.findNext();\n        },\n        readOnly: true\n    }, {\n        name: \"selectOrFindPrevious\",\n        description: \"Select or find previous\",\n        bindKey: bindKey(\"Alt-Shift-K\", \"Ctrl-Shift-G\"),\n        exec: function (editor) {\n            if (editor.selection.isEmpty())\n                editor.selection.selectWord();\n            else\n                editor.findPrevious();\n        },\n        readOnly: true\n    }, {\n        name: \"find\",\n        description: \"Find\",\n        bindKey: bindKey(\"Ctrl-F\", \"Command-F\"),\n        exec: function (editor) {\n            config.loadModule(\"ace/ext/searchbox\", function (e) { e.Search(editor); });\n        },\n        readOnly: true\n    }, {\n        name: \"overwrite\",\n        description: \"Overwrite\",\n        bindKey: \"Insert\",\n        exec: function (editor) { editor.toggleOverwrite(); },\n        readOnly: true\n    }, {\n        name: \"selecttostart\",\n        description: \"Select to start\",\n        bindKey: bindKey(\"Ctrl-Shift-Home\", \"Command-Shift-Home|Command-Shift-Up\"),\n        exec: function (editor) { editor.getSelection().selectFileStart(); },\n        multiSelectAction: \"forEach\",\n        readOnly: true,\n        scrollIntoView: \"animate\",\n        aceCommandGroup: \"fileJump\"\n    }, {\n        name: \"gotostart\",\n        description: \"Go to start\",\n        bindKey: bindKey(\"Ctrl-Home\", \"Command-Home|Command-Up\"),\n        exec: function (editor) { editor.navigateFileStart(); },\n        multiSelectAction: \"forEach\",\n        readOnly: true,\n        scrollIntoView: \"animate\",\n        aceCommandGroup: \"fileJump\"\n    }, {\n        name: \"selectup\",\n        description: \"Select up\",\n        bindKey: bindKey(\"Shift-Up\", \"Shift-Up|Ctrl-Shift-P\"),\n        exec: function (editor) { editor.getSelection().selectUp(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"golineup\",\n        description: \"Go line up\",\n        bindKey: bindKey(\"Up\", \"Up|Ctrl-P\"),\n        exec: function (editor, args) { editor.navigateUp(args.times); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selecttoend\",\n        description: \"Select to end\",\n        bindKey: bindKey(\"Ctrl-Shift-End\", \"Command-Shift-End|Command-Shift-Down\"),\n        exec: function (editor) { editor.getSelection().selectFileEnd(); },\n        multiSelectAction: \"forEach\",\n        readOnly: true,\n        scrollIntoView: \"animate\",\n        aceCommandGroup: \"fileJump\"\n    }, {\n        name: \"gotoend\",\n        description: \"Go to end\",\n        bindKey: bindKey(\"Ctrl-End\", \"Command-End|Command-Down\"),\n        exec: function (editor) { editor.navigateFileEnd(); },\n        multiSelectAction: \"forEach\",\n        readOnly: true,\n        scrollIntoView: \"animate\",\n        aceCommandGroup: \"fileJump\"\n    }, {\n        name: \"selectdown\",\n        description: \"Select down\",\n        bindKey: bindKey(\"Shift-Down\", \"Shift-Down|Ctrl-Shift-N\"),\n        exec: function (editor) { editor.getSelection().selectDown(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"golinedown\",\n        description: \"Go line down\",\n        bindKey: bindKey(\"Down\", \"Down|Ctrl-N\"),\n        exec: function (editor, args) { editor.navigateDown(args.times); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selectwordleft\",\n        description: \"Select word left\",\n        bindKey: bindKey(\"Ctrl-Shift-Left\", \"Option-Shift-Left\"),\n        exec: function (editor) { editor.getSelection().selectWordLeft(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"gotowordleft\",\n        description: \"Go to word left\",\n        bindKey: bindKey(\"Ctrl-Left\", \"Option-Left\"),\n        exec: function (editor) { editor.navigateWordLeft(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selecttolinestart\",\n        description: \"Select to line start\",\n        bindKey: bindKey(\"Alt-Shift-Left\", \"Command-Shift-Left|Ctrl-Shift-A\"),\n        exec: function (editor) { editor.getSelection().selectLineStart(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"gotolinestart\",\n        description: \"Go to line start\",\n        bindKey: bindKey(\"Alt-Left|Home\", \"Command-Left|Home|Ctrl-A\"),\n        exec: function (editor) { editor.navigateLineStart(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selectleft\",\n        description: \"Select left\",\n        bindKey: bindKey(\"Shift-Left\", \"Shift-Left|Ctrl-Shift-B\"),\n        exec: function (editor) { editor.getSelection().selectLeft(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"gotoleft\",\n        description: \"Go to left\",\n        bindKey: bindKey(\"Left\", \"Left|Ctrl-B\"),\n        exec: function (editor, args) { editor.navigateLeft(args.times); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selectwordright\",\n        description: \"Select word right\",\n        bindKey: bindKey(\"Ctrl-Shift-Right\", \"Option-Shift-Right\"),\n        exec: function (editor) { editor.getSelection().selectWordRight(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"gotowordright\",\n        description: \"Go to word right\",\n        bindKey: bindKey(\"Ctrl-Right\", \"Option-Right\"),\n        exec: function (editor) { editor.navigateWordRight(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selecttolineend\",\n        description: \"Select to line end\",\n        bindKey: bindKey(\"Alt-Shift-Right\", \"Command-Shift-Right|Shift-End|Ctrl-Shift-E\"),\n        exec: function (editor) { editor.getSelection().selectLineEnd(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"gotolineend\",\n        description: \"Go to line end\",\n        bindKey: bindKey(\"Alt-Right|End\", \"Command-Right|End|Ctrl-E\"),\n        exec: function (editor) { editor.navigateLineEnd(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selectright\",\n        description: \"Select right\",\n        bindKey: bindKey(\"Shift-Right\", \"Shift-Right\"),\n        exec: function (editor) { editor.getSelection().selectRight(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"gotoright\",\n        description: \"Go to right\",\n        bindKey: bindKey(\"Right\", \"Right|Ctrl-F\"),\n        exec: function (editor, args) { editor.navigateRight(args.times); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selectpagedown\",\n        description: \"Select page down\",\n        bindKey: \"Shift-PageDown\",\n        exec: function (editor) { editor.selectPageDown(); },\n        readOnly: true\n    }, {\n        name: \"pagedown\",\n        description: \"Page down\",\n        bindKey: bindKey(null, \"Option-PageDown\"),\n        exec: function (editor) { editor.scrollPageDown(); },\n        readOnly: true\n    }, {\n        name: \"gotopagedown\",\n        description: \"Go to page down\",\n        bindKey: bindKey(\"PageDown\", \"PageDown|Ctrl-V\"),\n        exec: function (editor) { editor.gotoPageDown(); },\n        readOnly: true\n    }, {\n        name: \"selectpageup\",\n        description: \"Select page up\",\n        bindKey: \"Shift-PageUp\",\n        exec: function (editor) { editor.selectPageUp(); },\n        readOnly: true\n    }, {\n        name: \"pageup\",\n        description: \"Page up\",\n        bindKey: bindKey(null, \"Option-PageUp\"),\n        exec: function (editor) { editor.scrollPageUp(); },\n        readOnly: true\n    }, {\n        name: \"gotopageup\",\n        description: \"Go to page up\",\n        bindKey: \"PageUp\",\n        exec: function (editor) { editor.gotoPageUp(); },\n        readOnly: true\n    }, {\n        name: \"scrollup\",\n        description: \"Scroll up\",\n        bindKey: bindKey(\"Ctrl-Up\", null),\n        exec: function (e) { e.renderer.scrollBy(0, -2 * e.renderer.layerConfig.lineHeight); },\n        readOnly: true\n    }, {\n        name: \"scrolldown\",\n        description: \"Scroll down\",\n        bindKey: bindKey(\"Ctrl-Down\", null),\n        exec: function (e) { e.renderer.scrollBy(0, 2 * e.renderer.layerConfig.lineHeight); },\n        readOnly: true\n    }, {\n        name: \"selectlinestart\",\n        description: \"Select line start\",\n        bindKey: \"Shift-Home\",\n        exec: function (editor) { editor.getSelection().selectLineStart(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selectlineend\",\n        description: \"Select line end\",\n        bindKey: \"Shift-End\",\n        exec: function (editor) { editor.getSelection().selectLineEnd(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"togglerecording\",\n        description: \"Toggle recording\",\n        bindKey: bindKey(\"Ctrl-Alt-E\", \"Command-Option-E\"),\n        exec: function (editor) { editor.commands.toggleRecording(editor); },\n        readOnly: true\n    }, {\n        name: \"replaymacro\",\n        description: \"Replay macro\",\n        bindKey: bindKey(\"Ctrl-Shift-E\", \"Command-Shift-E\"),\n        exec: function (editor) { editor.commands.replay(editor); },\n        readOnly: true\n    }, {\n        name: \"jumptomatching\",\n        description: \"Jump to matching\",\n        bindKey: bindKey(\"Ctrl-\\\\|Ctrl-P\", \"Command-\\\\\"),\n        exec: function (editor) { editor.jumpToMatching(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"animate\",\n        readOnly: true\n    }, {\n        name: \"selecttomatching\",\n        description: \"Select to matching\",\n        bindKey: bindKey(\"Ctrl-Shift-\\\\|Ctrl-Shift-P\", \"Command-Shift-\\\\\"),\n        exec: function (editor) { editor.jumpToMatching(true); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"animate\",\n        readOnly: true\n    }, {\n        name: \"expandToMatching\",\n        description: \"Expand to matching\",\n        bindKey: bindKey(\"Ctrl-Shift-M\", \"Ctrl-Shift-M\"),\n        exec: function (editor) { editor.jumpToMatching(true, true); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"animate\",\n        readOnly: true\n    }, {\n        name: \"passKeysToBrowser\",\n        description: \"Pass keys to browser\",\n        bindKey: bindKey(null, null),\n        exec: function () { },\n        passEvent: true,\n        readOnly: true\n    }, {\n        name: \"copy\",\n        description: \"Copy\",\n        exec: function (editor) {\n        },\n        readOnly: true\n    },\n    {\n        name: \"cut\",\n        description: \"Cut\",\n        exec: function (editor) {\n            var cutLine = editor.$copyWithEmptySelection && editor.selection.isEmpty();\n            var range = cutLine ? editor.selection.getLineRange() : editor.selection.getRange();\n            editor._emit(\"cut\", range);\n            if (!range.isEmpty())\n                editor.session.remove(range);\n            editor.clearSelection();\n        },\n        scrollIntoView: \"cursor\",\n        multiSelectAction: \"forEach\"\n    }, {\n        name: \"paste\",\n        description: \"Paste\",\n        exec: function (editor, args) {\n            editor.$handlePaste(args);\n        },\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"removeline\",\n        description: \"Remove line\",\n        bindKey: bindKey(\"Ctrl-D\", \"Command-D\"),\n        exec: function (editor) { editor.removeLines(); },\n        scrollIntoView: \"cursor\",\n        multiSelectAction: \"forEachLine\"\n    }, {\n        name: \"duplicateSelection\",\n        description: \"Duplicate selection\",\n        bindKey: bindKey(\"Ctrl-Shift-D\", \"Command-Shift-D\"),\n        exec: function (editor) { editor.duplicateSelection(); },\n        scrollIntoView: \"cursor\",\n        multiSelectAction: \"forEach\"\n    }, {\n        name: \"sortlines\",\n        description: \"Sort lines\",\n        bindKey: bindKey(\"Ctrl-Alt-S\", \"Command-Alt-S\"),\n        exec: function (editor) { editor.sortLines(); },\n        scrollIntoView: \"selection\",\n        multiSelectAction: \"forEachLine\"\n    }, {\n        name: \"togglecomment\",\n        description: \"Toggle comment\",\n        bindKey: bindKey(\"Ctrl-/\", \"Command-/\"),\n        exec: function (editor) { editor.toggleCommentLines(); },\n        multiSelectAction: \"forEachLine\",\n        scrollIntoView: \"selectionPart\"\n    }, {\n        name: \"toggleBlockComment\",\n        description: \"Toggle block comment\",\n        bindKey: bindKey(\"Ctrl-Shift-/\", \"Command-Shift-/\"),\n        exec: function (editor) { editor.toggleBlockComment(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"selectionPart\"\n    }, {\n        name: \"modifyNumberUp\",\n        description: \"Modify number up\",\n        bindKey: bindKey(\"Ctrl-Shift-Up\", \"Alt-Shift-Up\"),\n        exec: function (editor) { editor.modifyNumber(1); },\n        scrollIntoView: \"cursor\",\n        multiSelectAction: \"forEach\"\n    }, {\n        name: \"modifyNumberDown\",\n        description: \"Modify number down\",\n        bindKey: bindKey(\"Ctrl-Shift-Down\", \"Alt-Shift-Down\"),\n        exec: function (editor) { editor.modifyNumber(-1); },\n        scrollIntoView: \"cursor\",\n        multiSelectAction: \"forEach\"\n    }, {\n        name: \"replace\",\n        description: \"Replace\",\n        bindKey: bindKey(\"Ctrl-H\", \"Command-Option-F\"),\n        exec: function (editor) {\n            config.loadModule(\"ace/ext/searchbox\", function (e) { e.Search(editor, true); });\n        }\n    }, {\n        name: \"undo\",\n        description: \"Undo\",\n        bindKey: bindKey(\"Ctrl-Z\", \"Command-Z\"),\n        exec: function (editor) { editor.undo(); }\n    }, {\n        name: \"redo\",\n        description: \"Redo\",\n        bindKey: bindKey(\"Ctrl-Shift-Z|Ctrl-Y\", \"Command-Shift-Z|Command-Y\"),\n        exec: function (editor) { editor.redo(); }\n    }, {\n        name: \"copylinesup\",\n        description: \"Copy lines up\",\n        bindKey: bindKey(\"Alt-Shift-Up\", \"Command-Option-Up\"),\n        exec: function (editor) { editor.copyLinesUp(); },\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"movelinesup\",\n        description: \"Move lines up\",\n        bindKey: bindKey(\"Alt-Up\", \"Option-Up\"),\n        exec: function (editor) { editor.moveLinesUp(); },\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"copylinesdown\",\n        description: \"Copy lines down\",\n        bindKey: bindKey(\"Alt-Shift-Down\", \"Command-Option-Down\"),\n        exec: function (editor) { editor.copyLinesDown(); },\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"movelinesdown\",\n        description: \"Move lines down\",\n        bindKey: bindKey(\"Alt-Down\", \"Option-Down\"),\n        exec: function (editor) { editor.moveLinesDown(); },\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"del\",\n        description: \"Delete\",\n        bindKey: bindKey(\"Delete\", \"Delete|Ctrl-D|Shift-Delete\"),\n        exec: function (editor) { editor.remove(\"right\"); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"backspace\",\n        description: \"Backspace\",\n        bindKey: bindKey(\"Shift-Backspace|Backspace\", \"Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H\"),\n        exec: function (editor) { editor.remove(\"left\"); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"cut_or_delete\",\n        description: \"Cut or delete\",\n        bindKey: bindKey(\"Shift-Delete\", null),\n        exec: function (editor) {\n            if (editor.selection.isEmpty()) {\n                editor.remove(\"left\");\n            }\n            else {\n                return false;\n            }\n        },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"removetolinestart\",\n        description: \"Remove to line start\",\n        bindKey: bindKey(\"Alt-Backspace\", \"Command-Backspace\"),\n        exec: function (editor) { editor.removeToLineStart(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"removetolineend\",\n        description: \"Remove to line end\",\n        bindKey: bindKey(\"Alt-Delete\", \"Ctrl-K|Command-Delete\"),\n        exec: function (editor) { editor.removeToLineEnd(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"removetolinestarthard\",\n        description: \"Remove to line start hard\",\n        bindKey: bindKey(\"Ctrl-Shift-Backspace\", null),\n        exec: function (editor) {\n            var range = editor.selection.getRange();\n            range.start.column = 0;\n            editor.session.remove(range);\n        },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"removetolineendhard\",\n        description: \"Remove to line end hard\",\n        bindKey: bindKey(\"Ctrl-Shift-Delete\", null),\n        exec: function (editor) {\n            var range = editor.selection.getRange();\n            range.end.column = Number.MAX_VALUE;\n            editor.session.remove(range);\n        },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"removewordleft\",\n        description: \"Remove word left\",\n        bindKey: bindKey(\"Ctrl-Backspace\", \"Alt-Backspace|Ctrl-Alt-Backspace\"),\n        exec: function (editor) { editor.removeWordLeft(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"removewordright\",\n        description: \"Remove word right\",\n        bindKey: bindKey(\"Ctrl-Delete\", \"Alt-Delete\"),\n        exec: function (editor) { editor.removeWordRight(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"outdent\",\n        description: \"Outdent\",\n        bindKey: bindKey(\"Shift-Tab\", \"Shift-Tab\"),\n        exec: function (editor) { editor.blockOutdent(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"selectionPart\"\n    }, {\n        name: \"indent\",\n        description: \"Indent\",\n        bindKey: bindKey(\"Tab\", \"Tab\"),\n        exec: function (editor) { editor.indent(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"selectionPart\"\n    }, {\n        name: \"blockoutdent\",\n        description: \"Block outdent\",\n        bindKey: bindKey(\"Ctrl-[\", \"Ctrl-[\"),\n        exec: function (editor) { editor.blockOutdent(); },\n        multiSelectAction: \"forEachLine\",\n        scrollIntoView: \"selectionPart\"\n    }, {\n        name: \"blockindent\",\n        description: \"Block indent\",\n        bindKey: bindKey(\"Ctrl-]\", \"Ctrl-]\"),\n        exec: function (editor) { editor.blockIndent(); },\n        multiSelectAction: \"forEachLine\",\n        scrollIntoView: \"selectionPart\"\n    }, {\n        name: \"insertstring\",\n        description: \"Insert string\",\n        exec: function (editor, str) { editor.insert(str); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"inserttext\",\n        description: \"Insert text\",\n        exec: function (editor, args) {\n            editor.insert(lang.stringRepeat(args.text || \"\", args.times || 1));\n        },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"splitline\",\n        description: \"Split line\",\n        bindKey: bindKey(null, \"Ctrl-O\"),\n        exec: function (editor) { editor.splitLine(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"transposeletters\",\n        description: \"Transpose letters\",\n        bindKey: bindKey(\"Alt-Shift-X\", \"Ctrl-T\"),\n        exec: function (editor) { editor.transposeLetters(); },\n        multiSelectAction: function (editor) { editor.transposeSelections(1); },\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"touppercase\",\n        description: \"To uppercase\",\n        bindKey: bindKey(\"Ctrl-U\", \"Ctrl-U\"),\n        exec: function (editor) { editor.toUpperCase(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"tolowercase\",\n        description: \"To lowercase\",\n        bindKey: bindKey(\"Ctrl-Shift-U\", \"Ctrl-Shift-U\"),\n        exec: function (editor) { editor.toLowerCase(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"autoindent\",\n        description: \"Auto Indent\",\n        bindKey: bindKey(null, null),\n        exec: function (editor) { editor.autoIndent(); },\n        multiSelectAction: \"forEachLine\",\n        scrollIntoView: \"animate\"\n    }, {\n        name: \"expandtoline\",\n        description: \"Expand to line\",\n        bindKey: bindKey(\"Ctrl-Shift-L\", \"Command-Shift-L\"),\n        exec: function (editor) {\n            var range = editor.selection.getRange();\n            range.start.column = range.end.column = 0;\n            range.end.row++;\n            editor.selection.setRange(range, false);\n        },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"openlink\",\n        bindKey: bindKey(\"Ctrl+F3\", \"F3\"),\n        exec: function (editor) { editor.openLink(); }\n    }, {\n        name: \"joinlines\",\n        description: \"Join lines\",\n        bindKey: bindKey(null, null),\n        exec: function (editor) {\n            var isBackwards = editor.selection.isBackwards();\n            var selectionStart = isBackwards ? editor.selection.getSelectionLead() : editor.selection.getSelectionAnchor();\n            var selectionEnd = isBackwards ? editor.selection.getSelectionAnchor() : editor.selection.getSelectionLead();\n            var firstLineEndCol = editor.session.doc.getLine(selectionStart.row).length;\n            var selectedText = editor.session.doc.getTextRange(editor.selection.getRange());\n            var selectedCount = selectedText.replace(/\\n\\s*/, \" \").length;\n            var insertLine = editor.session.doc.getLine(selectionStart.row);\n            for (var i = selectionStart.row + 1; i <= selectionEnd.row + 1; i++) {\n                var curLine = lang.stringTrimLeft(lang.stringTrimRight(editor.session.doc.getLine(i)));\n                if (curLine.length !== 0) {\n                    curLine = \" \" + curLine;\n                }\n                insertLine += curLine;\n            }\n            if (selectionEnd.row + 1 < (editor.session.doc.getLength() - 1)) {\n                insertLine += editor.session.doc.getNewLineCharacter();\n            }\n            editor.clearSelection();\n            editor.session.doc.replace(new Range(selectionStart.row, 0, selectionEnd.row + 2, 0), insertLine);\n            if (selectedCount > 0) {\n                editor.selection.moveCursorTo(selectionStart.row, selectionStart.column);\n                editor.selection.selectTo(selectionStart.row, selectionStart.column + selectedCount);\n            }\n            else {\n                firstLineEndCol = editor.session.doc.getLine(selectionStart.row).length > firstLineEndCol ? (firstLineEndCol + 1) : firstLineEndCol;\n                editor.selection.moveCursorTo(selectionStart.row, firstLineEndCol);\n            }\n        },\n        multiSelectAction: \"forEach\",\n        readOnly: true\n    }, {\n        name: \"invertSelection\",\n        description: \"Invert selection\",\n        bindKey: bindKey(null, null),\n        exec: function (editor) {\n            var endRow = editor.session.doc.getLength() - 1;\n            var endCol = editor.session.doc.getLine(endRow).length;\n            var ranges = editor.selection.rangeList.ranges;\n            var newRanges = [];\n            if (ranges.length < 1) {\n                ranges = [editor.selection.getRange()];\n            }\n            for (var i = 0; i < ranges.length; i++) {\n                if (i == (ranges.length - 1)) {\n                    if (!(ranges[i].end.row === endRow && ranges[i].end.column === endCol)) {\n                        newRanges.push(new Range(ranges[i].end.row, ranges[i].end.column, endRow, endCol));\n                    }\n                }\n                if (i === 0) {\n                    if (!(ranges[i].start.row === 0 && ranges[i].start.column === 0)) {\n                        newRanges.push(new Range(0, 0, ranges[i].start.row, ranges[i].start.column));\n                    }\n                }\n                else {\n                    newRanges.push(new Range(ranges[i - 1].end.row, ranges[i - 1].end.column, ranges[i].start.row, ranges[i].start.column));\n                }\n            }\n            editor.exitMultiSelectMode();\n            editor.clearSelection();\n            for (var i = 0; i < newRanges.length; i++) {\n                editor.selection.addRange(newRanges[i], false);\n            }\n        },\n        readOnly: true,\n        scrollIntoView: \"none\"\n    }, {\n        name: \"addLineAfter\",\n        description: \"Add new line after the current line\",\n        exec: function (editor) {\n            editor.selection.clearSelection();\n            editor.navigateLineEnd();\n            editor.insert(\"\\n\");\n        },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"addLineBefore\",\n        description: \"Add new line before the current line\",\n        exec: function (editor) {\n            editor.selection.clearSelection();\n            var cursor = editor.getCursorPosition();\n            editor.selection.moveTo(cursor.row - 1, Number.MAX_VALUE);\n            editor.insert(\"\\n\");\n            if (cursor.row === 0)\n                editor.navigateUp();\n        },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"openCommandPallete\",\n        description: \"Open command palette\",\n        bindKey: bindKey(\"F1\", \"F1\"),\n        exec: function (editor) {\n            editor.prompt({ $type: \"commands\" });\n        },\n        readOnly: true\n    }, {\n        name: \"modeSelect\",\n        description: \"Change language mode...\",\n        bindKey: bindKey(null, null),\n        exec: function (editor) {\n            editor.prompt({ $type: \"modes\" });\n        },\n        readOnly: true\n    }];\nfor (var i = 1; i < 9; i++) {\n    exports.commands.push({\n        name: \"foldToLevel\" + i,\n        description: \"Fold To Level \" + i,\n        level: i,\n        exec: function (editor) { editor.session.foldToLevel(this.level); },\n        scrollIntoView: \"center\",\n        readOnly: true\n    });\n}\n\n});\n\nace.define(\"ace/editor\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/lib/useragent\",\"ace/keyboard/textinput\",\"ace/mouse/mouse_handler\",\"ace/mouse/fold_handler\",\"ace/keyboard/keybinding\",\"ace/edit_session\",\"ace/search\",\"ace/range\",\"ace/lib/event_emitter\",\"ace/commands/command_manager\",\"ace/commands/default_commands\",\"ace/config\",\"ace/token_iterator\",\"ace/clipboard\"], function(require, exports, module){\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar oop = require(\"./lib/oop\");\nvar dom = require(\"./lib/dom\");\nvar lang = require(\"./lib/lang\");\nvar useragent = require(\"./lib/useragent\");\nvar TextInput = require(\"./keyboard/textinput\").TextInput;\nvar MouseHandler = require(\"./mouse/mouse_handler\").MouseHandler;\nvar FoldHandler = require(\"./mouse/fold_handler\").FoldHandler;\nvar KeyBinding = require(\"./keyboard/keybinding\").KeyBinding;\nvar EditSession = require(\"./edit_session\").EditSession;\nvar Search = require(\"./search\").Search;\nvar Range = require(\"./range\").Range;\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar CommandManager = require(\"./commands/command_manager\").CommandManager;\nvar defaultCommands = require(\"./commands/default_commands\").commands;\nvar config = require(\"./config\");\nvar TokenIterator = require(\"./token_iterator\").TokenIterator;\nvar clipboard = require(\"./clipboard\");\nvar Editor = function (renderer, session, options) {\n    this.$toDestroy = [];\n    var container = renderer.getContainerElement();\n    this.container = container;\n    this.renderer = renderer;\n    this.id = \"editor\" + (++Editor.$uid);\n    this.commands = new CommandManager(useragent.isMac ? \"mac\" : \"win\", defaultCommands);\n    if (typeof document == \"object\") {\n        this.textInput = new TextInput(renderer.getTextAreaContainer(), this);\n        this.renderer.textarea = this.textInput.getElement();\n        this.$mouseHandler = new MouseHandler(this);\n        new FoldHandler(this);\n    }\n    this.keyBinding = new KeyBinding(this);\n    this.$search = new Search().set({\n        wrap: true\n    });\n    this.$historyTracker = this.$historyTracker.bind(this);\n    this.commands.on(\"exec\", this.$historyTracker);\n    this.$initOperationListeners();\n    this._$emitInputEvent = lang.delayedCall(function () {\n        this._signal(\"input\", {});\n        if (this.session && !this.session.destroyed)\n            this.session.bgTokenizer.scheduleStart();\n    }.bind(this));\n    this.on(\"change\", function (_, _self) {\n        _self._$emitInputEvent.schedule(31);\n    });\n    this.setSession(session || options && options.session || new EditSession(\"\"));\n    config.resetOptions(this);\n    if (options)\n        this.setOptions(options);\n    config._signal(\"editor\", this);\n};\nEditor.$uid = 0;\n(function () {\n    oop.implement(this, EventEmitter);\n    this.$initOperationListeners = function () {\n        this.commands.on(\"exec\", this.startOperation.bind(this), true);\n        this.commands.on(\"afterExec\", this.endOperation.bind(this), true);\n        this.$opResetTimer = lang.delayedCall(this.endOperation.bind(this, true));\n        this.on(\"change\", function () {\n            if (!this.curOp) {\n                this.startOperation();\n                this.curOp.selectionBefore = this.$lastSel;\n            }\n            this.curOp.docChanged = true;\n        }.bind(this), true);\n        this.on(\"changeSelection\", function () {\n            if (!this.curOp) {\n                this.startOperation();\n                this.curOp.selectionBefore = this.$lastSel;\n            }\n            this.curOp.selectionChanged = true;\n        }.bind(this), true);\n    };\n    this.curOp = null;\n    this.prevOp = {};\n    this.startOperation = function (commandEvent) {\n        if (this.curOp) {\n            if (!commandEvent || this.curOp.command)\n                return;\n            this.prevOp = this.curOp;\n        }\n        if (!commandEvent) {\n            this.previousCommand = null;\n            commandEvent = {};\n        }\n        this.$opResetTimer.schedule();\n        this.curOp = this.session.curOp = {\n            command: commandEvent.command || {},\n            args: commandEvent.args,\n            scrollTop: this.renderer.scrollTop\n        };\n        this.curOp.selectionBefore = this.selection.toJSON();\n    };\n    this.endOperation = function (e) {\n        if (this.curOp && this.session) {\n            if (e && e.returnValue === false || !this.session)\n                return (this.curOp = null);\n            if (e == true && this.curOp.command && this.curOp.command.name == \"mouse\")\n                return;\n            this._signal(\"beforeEndOperation\");\n            if (!this.curOp)\n                return;\n            var command = this.curOp.command;\n            var scrollIntoView = command && command.scrollIntoView;\n            if (scrollIntoView) {\n                switch (scrollIntoView) {\n                    case \"center-animate\":\n                        scrollIntoView = \"animate\";\n                    case \"center\":\n                        this.renderer.scrollCursorIntoView(null, 0.5);\n                        break;\n                    case \"animate\":\n                    case \"cursor\":\n                        this.renderer.scrollCursorIntoView();\n                        break;\n                    case \"selectionPart\":\n                        var range = this.selection.getRange();\n                        var config = this.renderer.layerConfig;\n                        if (range.start.row >= config.lastRow || range.end.row <= config.firstRow) {\n                            this.renderer.scrollSelectionIntoView(this.selection.anchor, this.selection.lead);\n                        }\n                        break;\n                    default:\n                        break;\n                }\n                if (scrollIntoView == \"animate\")\n                    this.renderer.animateScrolling(this.curOp.scrollTop);\n            }\n            var sel = this.selection.toJSON();\n            this.curOp.selectionAfter = sel;\n            this.$lastSel = this.selection.toJSON();\n            this.session.getUndoManager().addSelection(sel);\n            this.prevOp = this.curOp;\n            this.curOp = null;\n        }\n    };\n    this.$mergeableCommands = [\"backspace\", \"del\", \"insertstring\"];\n    this.$historyTracker = function (e) {\n        if (!this.$mergeUndoDeltas)\n            return;\n        var prev = this.prevOp;\n        var mergeableCommands = this.$mergeableCommands;\n        var shouldMerge = prev.command && (e.command.name == prev.command.name);\n        if (e.command.name == \"insertstring\") {\n            var text = e.args;\n            if (this.mergeNextCommand === undefined)\n                this.mergeNextCommand = true;\n            shouldMerge = shouldMerge\n                && this.mergeNextCommand // previous command allows to coalesce with\n                && (!/\\s/.test(text) || /\\s/.test(prev.args)); // previous insertion was of same type\n            this.mergeNextCommand = true;\n        }\n        else {\n            shouldMerge = shouldMerge\n                && mergeableCommands.indexOf(e.command.name) !== -1; // the command is mergeable\n        }\n        if (this.$mergeUndoDeltas != \"always\"\n            && Date.now() - this.sequenceStartTime > 2000) {\n            shouldMerge = false; // the sequence is too long\n        }\n        if (shouldMerge)\n            this.session.mergeUndoDeltas = true;\n        else if (mergeableCommands.indexOf(e.command.name) !== -1)\n            this.sequenceStartTime = Date.now();\n    };\n    this.setKeyboardHandler = function (keyboardHandler, cb) {\n        if (keyboardHandler && typeof keyboardHandler === \"string\" && keyboardHandler != \"ace\") {\n            this.$keybindingId = keyboardHandler;\n            var _self = this;\n            config.loadModule([\"keybinding\", keyboardHandler], function (module) {\n                if (_self.$keybindingId == keyboardHandler)\n                    _self.keyBinding.setKeyboardHandler(module && module.handler);\n                cb && cb();\n            });\n        }\n        else {\n            this.$keybindingId = null;\n            this.keyBinding.setKeyboardHandler(keyboardHandler);\n            cb && cb();\n        }\n    };\n    this.getKeyboardHandler = function () {\n        return this.keyBinding.getKeyboardHandler();\n    };\n    this.setSession = function (session) {\n        if (this.session == session)\n            return;\n        if (this.curOp)\n            this.endOperation();\n        this.curOp = {};\n        var oldSession = this.session;\n        if (oldSession) {\n            this.session.off(\"change\", this.$onDocumentChange);\n            this.session.off(\"changeMode\", this.$onChangeMode);\n            this.session.off(\"tokenizerUpdate\", this.$onTokenizerUpdate);\n            this.session.off(\"changeTabSize\", this.$onChangeTabSize);\n            this.session.off(\"changeWrapLimit\", this.$onChangeWrapLimit);\n            this.session.off(\"changeWrapMode\", this.$onChangeWrapMode);\n            this.session.off(\"changeFold\", this.$onChangeFold);\n            this.session.off(\"changeFrontMarker\", this.$onChangeFrontMarker);\n            this.session.off(\"changeBackMarker\", this.$onChangeBackMarker);\n            this.session.off(\"changeBreakpoint\", this.$onChangeBreakpoint);\n            this.session.off(\"changeAnnotation\", this.$onChangeAnnotation);\n            this.session.off(\"changeOverwrite\", this.$onCursorChange);\n            this.session.off(\"changeScrollTop\", this.$onScrollTopChange);\n            this.session.off(\"changeScrollLeft\", this.$onScrollLeftChange);\n            var selection = this.session.getSelection();\n            selection.off(\"changeCursor\", this.$onCursorChange);\n            selection.off(\"changeSelection\", this.$onSelectionChange);\n        }\n        this.session = session;\n        if (session) {\n            this.$onDocumentChange = this.onDocumentChange.bind(this);\n            session.on(\"change\", this.$onDocumentChange);\n            this.renderer.setSession(session);\n            this.$onChangeMode = this.onChangeMode.bind(this);\n            session.on(\"changeMode\", this.$onChangeMode);\n            this.$onTokenizerUpdate = this.onTokenizerUpdate.bind(this);\n            session.on(\"tokenizerUpdate\", this.$onTokenizerUpdate);\n            this.$onChangeTabSize = this.renderer.onChangeTabSize.bind(this.renderer);\n            session.on(\"changeTabSize\", this.$onChangeTabSize);\n            this.$onChangeWrapLimit = this.onChangeWrapLimit.bind(this);\n            session.on(\"changeWrapLimit\", this.$onChangeWrapLimit);\n            this.$onChangeWrapMode = this.onChangeWrapMode.bind(this);\n            session.on(\"changeWrapMode\", this.$onChangeWrapMode);\n            this.$onChangeFold = this.onChangeFold.bind(this);\n            session.on(\"changeFold\", this.$onChangeFold);\n            this.$onChangeFrontMarker = this.onChangeFrontMarker.bind(this);\n            this.session.on(\"changeFrontMarker\", this.$onChangeFrontMarker);\n            this.$onChangeBackMarker = this.onChangeBackMarker.bind(this);\n            this.session.on(\"changeBackMarker\", this.$onChangeBackMarker);\n            this.$onChangeBreakpoint = this.onChangeBreakpoint.bind(this);\n            this.session.on(\"changeBreakpoint\", this.$onChangeBreakpoint);\n            this.$onChangeAnnotation = this.onChangeAnnotation.bind(this);\n            this.session.on(\"changeAnnotation\", this.$onChangeAnnotation);\n            this.$onCursorChange = this.onCursorChange.bind(this);\n            this.session.on(\"changeOverwrite\", this.$onCursorChange);\n            this.$onScrollTopChange = this.onScrollTopChange.bind(this);\n            this.session.on(\"changeScrollTop\", this.$onScrollTopChange);\n            this.$onScrollLeftChange = this.onScrollLeftChange.bind(this);\n            this.session.on(\"changeScrollLeft\", this.$onScrollLeftChange);\n            this.selection = session.getSelection();\n            this.selection.on(\"changeCursor\", this.$onCursorChange);\n            this.$onSelectionChange = this.onSelectionChange.bind(this);\n            this.selection.on(\"changeSelection\", this.$onSelectionChange);\n            this.onChangeMode();\n            this.onCursorChange();\n            this.onScrollTopChange();\n            this.onScrollLeftChange();\n            this.onSelectionChange();\n            this.onChangeFrontMarker();\n            this.onChangeBackMarker();\n            this.onChangeBreakpoint();\n            this.onChangeAnnotation();\n            this.session.getUseWrapMode() && this.renderer.adjustWrapLimit();\n            this.renderer.updateFull();\n        }\n        else {\n            this.selection = null;\n            this.renderer.setSession(session);\n        }\n        this._signal(\"changeSession\", {\n            session: session,\n            oldSession: oldSession\n        });\n        this.curOp = null;\n        oldSession && oldSession._signal(\"changeEditor\", { oldEditor: this });\n        session && session._signal(\"changeEditor\", { editor: this });\n        if (session && !session.destroyed)\n            session.bgTokenizer.scheduleStart();\n    };\n    this.getSession = function () {\n        return this.session;\n    };\n    this.setValue = function (val, cursorPos) {\n        this.session.doc.setValue(val);\n        if (!cursorPos)\n            this.selectAll();\n        else if (cursorPos == 1)\n            this.navigateFileEnd();\n        else if (cursorPos == -1)\n            this.navigateFileStart();\n        return val;\n    };\n    this.getValue = function () {\n        return this.session.getValue();\n    };\n    this.getSelection = function () {\n        return this.selection;\n    };\n    this.resize = function (force) {\n        this.renderer.onResize(force);\n    };\n    this.setTheme = function (theme, cb) {\n        this.renderer.setTheme(theme, cb);\n    };\n    this.getTheme = function () {\n        return this.renderer.getTheme();\n    };\n    this.setStyle = function (style) {\n        this.renderer.setStyle(style);\n    };\n    this.unsetStyle = function (style) {\n        this.renderer.unsetStyle(style);\n    };\n    this.getFontSize = function () {\n        return this.getOption(\"fontSize\") ||\n            dom.computedStyle(this.container).fontSize;\n    };\n    this.setFontSize = function (size) {\n        this.setOption(\"fontSize\", size);\n    };\n    this.$highlightBrackets = function () {\n        if (this.$highlightPending) {\n            return;\n        }\n        var self = this;\n        this.$highlightPending = true;\n        setTimeout(function () {\n            self.$highlightPending = false;\n            var session = self.session;\n            if (!session || session.destroyed)\n                return;\n            if (session.$bracketHighlight) {\n                session.$bracketHighlight.markerIds.forEach(function (id) {\n                    session.removeMarker(id);\n                });\n                session.$bracketHighlight = null;\n            }\n            var pos = self.getCursorPosition();\n            var handler = self.getKeyboardHandler();\n            var isBackwards = handler && handler.$getDirectionForHighlight && handler.$getDirectionForHighlight(self);\n            var ranges = session.getMatchingBracketRanges(pos, isBackwards);\n            if (!ranges) {\n                var iterator = new TokenIterator(session, pos.row, pos.column);\n                var token = iterator.getCurrentToken();\n                if (token && /\\b(?:tag-open|tag-name)/.test(token.type)) {\n                    var tagNamesRanges = session.getMatchingTags(pos);\n                    if (tagNamesRanges)\n                        ranges = [tagNamesRanges.openTagName, tagNamesRanges.closeTagName];\n                }\n            }\n            if (!ranges && session.$mode.getMatching)\n                ranges = session.$mode.getMatching(self.session);\n            if (!ranges) {\n                if (self.getHighlightIndentGuides())\n                    self.renderer.$textLayer.$highlightIndentGuide();\n                return;\n            }\n            var markerType = \"ace_bracket\";\n            if (!Array.isArray(ranges)) {\n                ranges = [ranges];\n            }\n            else if (ranges.length == 1) {\n                markerType = \"ace_error_bracket\";\n            }\n            if (ranges.length == 2) {\n                if (Range.comparePoints(ranges[0].end, ranges[1].start) == 0)\n                    ranges = [Range.fromPoints(ranges[0].start, ranges[1].end)];\n                else if (Range.comparePoints(ranges[0].start, ranges[1].end) == 0)\n                    ranges = [Range.fromPoints(ranges[1].start, ranges[0].end)];\n            }\n            session.$bracketHighlight = {\n                ranges: ranges,\n                markerIds: ranges.map(function (range) {\n                    return session.addMarker(range, markerType, \"text\");\n                })\n            };\n            if (self.getHighlightIndentGuides())\n                self.renderer.$textLayer.$highlightIndentGuide();\n        }, 50);\n    };\n    this.focus = function () {\n        this.textInput.focus();\n    };\n    this.isFocused = function () {\n        return this.textInput.isFocused();\n    };\n    this.blur = function () {\n        this.textInput.blur();\n    };\n    this.onFocus = function (e) {\n        if (this.$isFocused)\n            return;\n        this.$isFocused = true;\n        this.renderer.showCursor();\n        this.renderer.visualizeFocus();\n        this._emit(\"focus\", e);\n    };\n    this.onBlur = function (e) {\n        if (!this.$isFocused)\n            return;\n        this.$isFocused = false;\n        this.renderer.hideCursor();\n        this.renderer.visualizeBlur();\n        this._emit(\"blur\", e);\n    };\n    this.$cursorChange = function () {\n        this.renderer.updateCursor();\n        this.$highlightBrackets();\n        this.$updateHighlightActiveLine();\n    };\n    this.onDocumentChange = function (delta) {\n        var wrap = this.session.$useWrapMode;\n        var lastRow = (delta.start.row == delta.end.row ? delta.end.row : Infinity);\n        this.renderer.updateLines(delta.start.row, lastRow, wrap);\n        this._signal(\"change\", delta);\n        this.$cursorChange();\n    };\n    this.onTokenizerUpdate = function (e) {\n        var rows = e.data;\n        this.renderer.updateLines(rows.first, rows.last);\n    };\n    this.onScrollTopChange = function () {\n        this.renderer.scrollToY(this.session.getScrollTop());\n    };\n    this.onScrollLeftChange = function () {\n        this.renderer.scrollToX(this.session.getScrollLeft());\n    };\n    this.onCursorChange = function () {\n        this.$cursorChange();\n        this._signal(\"changeSelection\");\n    };\n    this.$updateHighlightActiveLine = function () {\n        var session = this.getSession();\n        var highlight;\n        if (this.$highlightActiveLine) {\n            if (this.$selectionStyle != \"line\" || !this.selection.isMultiLine())\n                highlight = this.getCursorPosition();\n            if (this.renderer.theme && this.renderer.theme.$selectionColorConflict && !this.selection.isEmpty())\n                highlight = false;\n            if (this.renderer.$maxLines && this.session.getLength() === 1 && !(this.renderer.$minLines > 1))\n                highlight = false;\n        }\n        if (session.$highlightLineMarker && !highlight) {\n            session.removeMarker(session.$highlightLineMarker.id);\n            session.$highlightLineMarker = null;\n        }\n        else if (!session.$highlightLineMarker && highlight) {\n            var range = new Range(highlight.row, highlight.column, highlight.row, Infinity);\n            range.id = session.addMarker(range, \"ace_active-line\", \"screenLine\");\n            session.$highlightLineMarker = range;\n        }\n        else if (highlight) {\n            session.$highlightLineMarker.start.row = highlight.row;\n            session.$highlightLineMarker.end.row = highlight.row;\n            session.$highlightLineMarker.start.column = highlight.column;\n            session._signal(\"changeBackMarker\");\n        }\n    };\n    this.onSelectionChange = function (e) {\n        var session = this.session;\n        if (session.$selectionMarker) {\n            session.removeMarker(session.$selectionMarker);\n        }\n        session.$selectionMarker = null;\n        if (!this.selection.isEmpty()) {\n            var range = this.selection.getRange();\n            var style = this.getSelectionStyle();\n            session.$selectionMarker = session.addMarker(range, \"ace_selection\", style);\n        }\n        else {\n            this.$updateHighlightActiveLine();\n        }\n        var re = this.$highlightSelectedWord && this.$getSelectionHighLightRegexp();\n        this.session.highlight(re);\n        this._signal(\"changeSelection\");\n    };\n    this.$getSelectionHighLightRegexp = function () {\n        var session = this.session;\n        var selection = this.getSelectionRange();\n        if (selection.isEmpty() || selection.isMultiLine())\n            return;\n        var startColumn = selection.start.column;\n        var endColumn = selection.end.column;\n        var line = session.getLine(selection.start.row);\n        var needle = line.substring(startColumn, endColumn);\n        if (needle.length > 5000 || !/[\\w\\d]/.test(needle))\n            return;\n        var re = this.$search.$assembleRegExp({\n            wholeWord: true,\n            caseSensitive: true,\n            needle: needle\n        });\n        var wordWithBoundary = line.substring(startColumn - 1, endColumn + 1);\n        if (!re.test(wordWithBoundary))\n            return;\n        return re;\n    };\n    this.onChangeFrontMarker = function () {\n        this.renderer.updateFrontMarkers();\n    };\n    this.onChangeBackMarker = function () {\n        this.renderer.updateBackMarkers();\n    };\n    this.onChangeBreakpoint = function () {\n        this.renderer.updateBreakpoints();\n    };\n    this.onChangeAnnotation = function () {\n        this.renderer.setAnnotations(this.session.getAnnotations());\n    };\n    this.onChangeMode = function (e) {\n        this.renderer.updateText();\n        this._emit(\"changeMode\", e);\n    };\n    this.onChangeWrapLimit = function () {\n        this.renderer.updateFull();\n    };\n    this.onChangeWrapMode = function () {\n        this.renderer.onResize(true);\n    };\n    this.onChangeFold = function () {\n        this.$updateHighlightActiveLine();\n        this.renderer.updateFull();\n    };\n    this.getSelectedText = function () {\n        return this.session.getTextRange(this.getSelectionRange());\n    };\n    this.getCopyText = function () {\n        var text = this.getSelectedText();\n        var nl = this.session.doc.getNewLineCharacter();\n        var copyLine = false;\n        if (!text && this.$copyWithEmptySelection) {\n            copyLine = true;\n            var ranges = this.selection.getAllRanges();\n            for (var i = 0; i < ranges.length; i++) {\n                var range = ranges[i];\n                if (i && ranges[i - 1].start.row == range.start.row)\n                    continue;\n                text += this.session.getLine(range.start.row) + nl;\n            }\n        }\n        var e = { text: text };\n        this._signal(\"copy\", e);\n        clipboard.lineMode = copyLine ? e.text : false;\n        return e.text;\n    };\n    this.onCopy = function () {\n        this.commands.exec(\"copy\", this);\n    };\n    this.onCut = function () {\n        this.commands.exec(\"cut\", this);\n    };\n    this.onPaste = function (text, event) {\n        var e = { text: text, event: event };\n        this.commands.exec(\"paste\", this, e);\n    };\n    this.$handlePaste = function (e) {\n        if (typeof e == \"string\")\n            e = { text: e };\n        this._signal(\"paste\", e);\n        var text = e.text;\n        var lineMode = text === clipboard.lineMode;\n        var session = this.session;\n        if (!this.inMultiSelectMode || this.inVirtualSelectionMode) {\n            if (lineMode)\n                session.insert({ row: this.selection.lead.row, column: 0 }, text);\n            else\n                this.insert(text);\n        }\n        else if (lineMode) {\n            this.selection.rangeList.ranges.forEach(function (range) {\n                session.insert({ row: range.start.row, column: 0 }, text);\n            });\n        }\n        else {\n            var lines = text.split(/\\r\\n|\\r|\\n/);\n            var ranges = this.selection.rangeList.ranges;\n            var isFullLine = lines.length == 2 && (!lines[0] || !lines[1]);\n            if (lines.length != ranges.length || isFullLine)\n                return this.commands.exec(\"insertstring\", this, text);\n            for (var i = ranges.length; i--;) {\n                var range = ranges[i];\n                if (!range.isEmpty())\n                    session.remove(range);\n                session.insert(range.start, lines[i]);\n            }\n        }\n    };\n    this.execCommand = function (command, args) {\n        return this.commands.exec(command, this, args);\n    };\n    this.insert = function (text, pasted) {\n        var session = this.session;\n        var mode = session.getMode();\n        var cursor = this.getCursorPosition();\n        if (this.getBehavioursEnabled() && !pasted) {\n            var transform = mode.transformAction(session.getState(cursor.row), 'insertion', this, session, text);\n            if (transform) {\n                if (text !== transform.text) {\n                    if (!this.inVirtualSelectionMode) {\n                        this.session.mergeUndoDeltas = false;\n                        this.mergeNextCommand = false;\n                    }\n                }\n                text = transform.text;\n            }\n        }\n        if (text == \"\\t\")\n            text = this.session.getTabString();\n        if (!this.selection.isEmpty()) {\n            var range = this.getSelectionRange();\n            cursor = this.session.remove(range);\n            this.clearSelection();\n        }\n        else if (this.session.getOverwrite() && text.indexOf(\"\\n\") == -1) {\n            var range = new Range.fromPoints(cursor, cursor);\n            range.end.column += text.length;\n            this.session.remove(range);\n        }\n        if (text == \"\\n\" || text == \"\\r\\n\") {\n            var line = session.getLine(cursor.row);\n            if (cursor.column > line.search(/\\S|$/)) {\n                var d = line.substr(cursor.column).search(/\\S|$/);\n                session.doc.removeInLine(cursor.row, cursor.column, cursor.column + d);\n            }\n        }\n        this.clearSelection();\n        var start = cursor.column;\n        var lineState = session.getState(cursor.row);\n        var line = session.getLine(cursor.row);\n        var shouldOutdent = mode.checkOutdent(lineState, line, text);\n        session.insert(cursor, text);\n        if (transform && transform.selection) {\n            if (transform.selection.length == 2) { // Transform relative to the current column\n                this.selection.setSelectionRange(new Range(cursor.row, start + transform.selection[0], cursor.row, start + transform.selection[1]));\n            }\n            else { // Transform relative to the current row.\n                this.selection.setSelectionRange(new Range(cursor.row + transform.selection[0], transform.selection[1], cursor.row + transform.selection[2], transform.selection[3]));\n            }\n        }\n        if (this.$enableAutoIndent) {\n            if (session.getDocument().isNewLine(text)) {\n                var lineIndent = mode.getNextLineIndent(lineState, line.slice(0, cursor.column), session.getTabString());\n                session.insert({ row: cursor.row + 1, column: 0 }, lineIndent);\n            }\n            if (shouldOutdent)\n                mode.autoOutdent(lineState, session, cursor.row);\n        }\n    };\n    this.autoIndent = function () {\n        var session = this.session;\n        var mode = session.getMode();\n        var startRow, endRow;\n        if (this.selection.isEmpty()) {\n            startRow = 0;\n            endRow = session.doc.getLength() - 1;\n        }\n        else {\n            var selectedRange = this.getSelectionRange();\n            startRow = selectedRange.start.row;\n            endRow = selectedRange.end.row;\n        }\n        var prevLineState = \"\";\n        var prevLine = \"\";\n        var lineIndent = \"\";\n        var line, currIndent, range;\n        var tab = session.getTabString();\n        for (var row = startRow; row <= endRow; row++) {\n            if (row > 0) {\n                prevLineState = session.getState(row - 1);\n                prevLine = session.getLine(row - 1);\n                lineIndent = mode.getNextLineIndent(prevLineState, prevLine, tab);\n            }\n            line = session.getLine(row);\n            currIndent = mode.$getIndent(line);\n            if (lineIndent !== currIndent) {\n                if (currIndent.length > 0) {\n                    range = new Range(row, 0, row, currIndent.length);\n                    session.remove(range);\n                }\n                if (lineIndent.length > 0) {\n                    session.insert({ row: row, column: 0 }, lineIndent);\n                }\n            }\n            mode.autoOutdent(prevLineState, session, row);\n        }\n    };\n    this.onTextInput = function (text, composition) {\n        if (!composition)\n            return this.keyBinding.onTextInput(text);\n        this.startOperation({ command: { name: \"insertstring\" } });\n        var applyComposition = this.applyComposition.bind(this, text, composition);\n        if (this.selection.rangeCount)\n            this.forEachSelection(applyComposition);\n        else\n            applyComposition();\n        this.endOperation();\n    };\n    this.applyComposition = function (text, composition) {\n        if (composition.extendLeft || composition.extendRight) {\n            var r = this.selection.getRange();\n            r.start.column -= composition.extendLeft;\n            r.end.column += composition.extendRight;\n            if (r.start.column < 0) {\n                r.start.row--;\n                r.start.column += this.session.getLine(r.start.row).length + 1;\n            }\n            this.selection.setRange(r);\n            if (!text && !r.isEmpty())\n                this.remove();\n        }\n        if (text || !this.selection.isEmpty())\n            this.insert(text, true);\n        if (composition.restoreStart || composition.restoreEnd) {\n            var r = this.selection.getRange();\n            r.start.column -= composition.restoreStart;\n            r.end.column -= composition.restoreEnd;\n            this.selection.setRange(r);\n        }\n    };\n    this.onCommandKey = function (e, hashId, keyCode) {\n        return this.keyBinding.onCommandKey(e, hashId, keyCode);\n    };\n    this.setOverwrite = function (overwrite) {\n        this.session.setOverwrite(overwrite);\n    };\n    this.getOverwrite = function () {\n        return this.session.getOverwrite();\n    };\n    this.toggleOverwrite = function () {\n        this.session.toggleOverwrite();\n    };\n    this.setScrollSpeed = function (speed) {\n        this.setOption(\"scrollSpeed\", speed);\n    };\n    this.getScrollSpeed = function () {\n        return this.getOption(\"scrollSpeed\");\n    };\n    this.setDragDelay = function (dragDelay) {\n        this.setOption(\"dragDelay\", dragDelay);\n    };\n    this.getDragDelay = function () {\n        return this.getOption(\"dragDelay\");\n    };\n    this.setSelectionStyle = function (val) {\n        this.setOption(\"selectionStyle\", val);\n    };\n    this.getSelectionStyle = function () {\n        return this.getOption(\"selectionStyle\");\n    };\n    this.setHighlightActiveLine = function (shouldHighlight) {\n        this.setOption(\"highlightActiveLine\", shouldHighlight);\n    };\n    this.getHighlightActiveLine = function () {\n        return this.getOption(\"highlightActiveLine\");\n    };\n    this.setHighlightGutterLine = function (shouldHighlight) {\n        this.setOption(\"highlightGutterLine\", shouldHighlight);\n    };\n    this.getHighlightGutterLine = function () {\n        return this.getOption(\"highlightGutterLine\");\n    };\n    this.setHighlightSelectedWord = function (shouldHighlight) {\n        this.setOption(\"highlightSelectedWord\", shouldHighlight);\n    };\n    this.getHighlightSelectedWord = function () {\n        return this.$highlightSelectedWord;\n    };\n    this.setAnimatedScroll = function (shouldAnimate) {\n        this.renderer.setAnimatedScroll(shouldAnimate);\n    };\n    this.getAnimatedScroll = function () {\n        return this.renderer.getAnimatedScroll();\n    };\n    this.setShowInvisibles = function (showInvisibles) {\n        this.renderer.setShowInvisibles(showInvisibles);\n    };\n    this.getShowInvisibles = function () {\n        return this.renderer.getShowInvisibles();\n    };\n    this.setDisplayIndentGuides = function (display) {\n        this.renderer.setDisplayIndentGuides(display);\n    };\n    this.getDisplayIndentGuides = function () {\n        return this.renderer.getDisplayIndentGuides();\n    };\n    this.setHighlightIndentGuides = function (highlight) {\n        this.renderer.setHighlightIndentGuides(highlight);\n    };\n    this.getHighlightIndentGuides = function () {\n        return this.renderer.getHighlightIndentGuides();\n    };\n    this.setShowPrintMargin = function (showPrintMargin) {\n        this.renderer.setShowPrintMargin(showPrintMargin);\n    };\n    this.getShowPrintMargin = function () {\n        return this.renderer.getShowPrintMargin();\n    };\n    this.setPrintMarginColumn = function (showPrintMargin) {\n        this.renderer.setPrintMarginColumn(showPrintMargin);\n    };\n    this.getPrintMarginColumn = function () {\n        return this.renderer.getPrintMarginColumn();\n    };\n    this.setReadOnly = function (readOnly) {\n        this.setOption(\"readOnly\", readOnly);\n    };\n    this.getReadOnly = function () {\n        return this.getOption(\"readOnly\");\n    };\n    this.setBehavioursEnabled = function (enabled) {\n        this.setOption(\"behavioursEnabled\", enabled);\n    };\n    this.getBehavioursEnabled = function () {\n        return this.getOption(\"behavioursEnabled\");\n    };\n    this.setWrapBehavioursEnabled = function (enabled) {\n        this.setOption(\"wrapBehavioursEnabled\", enabled);\n    };\n    this.getWrapBehavioursEnabled = function () {\n        return this.getOption(\"wrapBehavioursEnabled\");\n    };\n    this.setShowFoldWidgets = function (show) {\n        this.setOption(\"showFoldWidgets\", show);\n    };\n    this.getShowFoldWidgets = function () {\n        return this.getOption(\"showFoldWidgets\");\n    };\n    this.setFadeFoldWidgets = function (fade) {\n        this.setOption(\"fadeFoldWidgets\", fade);\n    };\n    this.getFadeFoldWidgets = function () {\n        return this.getOption(\"fadeFoldWidgets\");\n    };\n    this.remove = function (dir) {\n        if (this.selection.isEmpty()) {\n            if (dir == \"left\")\n                this.selection.selectLeft();\n            else\n                this.selection.selectRight();\n        }\n        var range = this.getSelectionRange();\n        if (this.getBehavioursEnabled()) {\n            var session = this.session;\n            var state = session.getState(range.start.row);\n            var new_range = session.getMode().transformAction(state, 'deletion', this, session, range);\n            if (range.end.column === 0) {\n                var text = session.getTextRange(range);\n                if (text[text.length - 1] == \"\\n\") {\n                    var line = session.getLine(range.end.row);\n                    if (/^\\s+$/.test(line)) {\n                        range.end.column = line.length;\n                    }\n                }\n            }\n            if (new_range)\n                range = new_range;\n        }\n        this.session.remove(range);\n        this.clearSelection();\n    };\n    this.removeWordRight = function () {\n        if (this.selection.isEmpty())\n            this.selection.selectWordRight();\n        this.session.remove(this.getSelectionRange());\n        this.clearSelection();\n    };\n    this.removeWordLeft = function () {\n        if (this.selection.isEmpty())\n            this.selection.selectWordLeft();\n        this.session.remove(this.getSelectionRange());\n        this.clearSelection();\n    };\n    this.removeToLineStart = function () {\n        if (this.selection.isEmpty())\n            this.selection.selectLineStart();\n        if (this.selection.isEmpty())\n            this.selection.selectLeft();\n        this.session.remove(this.getSelectionRange());\n        this.clearSelection();\n    };\n    this.removeToLineEnd = function () {\n        if (this.selection.isEmpty())\n            this.selection.selectLineEnd();\n        var range = this.getSelectionRange();\n        if (range.start.column == range.end.column && range.start.row == range.end.row) {\n            range.end.column = 0;\n            range.end.row++;\n        }\n        this.session.remove(range);\n        this.clearSelection();\n    };\n    this.splitLine = function () {\n        if (!this.selection.isEmpty()) {\n            this.session.remove(this.getSelectionRange());\n            this.clearSelection();\n        }\n        var cursor = this.getCursorPosition();\n        this.insert(\"\\n\");\n        this.moveCursorToPosition(cursor);\n    };\n    this.transposeLetters = function () {\n        if (!this.selection.isEmpty()) {\n            return;\n        }\n        var cursor = this.getCursorPosition();\n        var column = cursor.column;\n        if (column === 0)\n            return;\n        var line = this.session.getLine(cursor.row);\n        var swap, range;\n        if (column < line.length) {\n            swap = line.charAt(column) + line.charAt(column - 1);\n            range = new Range(cursor.row, column - 1, cursor.row, column + 1);\n        }\n        else {\n            swap = line.charAt(column - 1) + line.charAt(column - 2);\n            range = new Range(cursor.row, column - 2, cursor.row, column);\n        }\n        this.session.replace(range, swap);\n        this.session.selection.moveToPosition(range.end);\n    };\n    this.toLowerCase = function () {\n        var originalRange = this.getSelectionRange();\n        if (this.selection.isEmpty()) {\n            this.selection.selectWord();\n        }\n        var range = this.getSelectionRange();\n        var text = this.session.getTextRange(range);\n        this.session.replace(range, text.toLowerCase());\n        this.selection.setSelectionRange(originalRange);\n    };\n    this.toUpperCase = function () {\n        var originalRange = this.getSelectionRange();\n        if (this.selection.isEmpty()) {\n            this.selection.selectWord();\n        }\n        var range = this.getSelectionRange();\n        var text = this.session.getTextRange(range);\n        this.session.replace(range, text.toUpperCase());\n        this.selection.setSelectionRange(originalRange);\n    };\n    this.indent = function () {\n        var session = this.session;\n        var range = this.getSelectionRange();\n        if (range.start.row < range.end.row) {\n            var rows = this.$getSelectedRows();\n            session.indentRows(rows.first, rows.last, \"\\t\");\n            return;\n        }\n        else if (range.start.column < range.end.column) {\n            var text = session.getTextRange(range);\n            if (!/^\\s+$/.test(text)) {\n                var rows = this.$getSelectedRows();\n                session.indentRows(rows.first, rows.last, \"\\t\");\n                return;\n            }\n        }\n        var line = session.getLine(range.start.row);\n        var position = range.start;\n        var size = session.getTabSize();\n        var column = session.documentToScreenColumn(position.row, position.column);\n        if (this.session.getUseSoftTabs()) {\n            var count = (size - column % size);\n            var indentString = lang.stringRepeat(\" \", count);\n        }\n        else {\n            var count = column % size;\n            while (line[range.start.column - 1] == \" \" && count) {\n                range.start.column--;\n                count--;\n            }\n            this.selection.setSelectionRange(range);\n            indentString = \"\\t\";\n        }\n        return this.insert(indentString);\n    };\n    this.blockIndent = function () {\n        var rows = this.$getSelectedRows();\n        this.session.indentRows(rows.first, rows.last, \"\\t\");\n    };\n    this.blockOutdent = function () {\n        var selection = this.session.getSelection();\n        this.session.outdentRows(selection.getRange());\n    };\n    this.sortLines = function () {\n        var rows = this.$getSelectedRows();\n        var session = this.session;\n        var lines = [];\n        for (var i = rows.first; i <= rows.last; i++)\n            lines.push(session.getLine(i));\n        lines.sort(function (a, b) {\n            if (a.toLowerCase() < b.toLowerCase())\n                return -1;\n            if (a.toLowerCase() > b.toLowerCase())\n                return 1;\n            return 0;\n        });\n        var deleteRange = new Range(0, 0, 0, 0);\n        for (var i = rows.first; i <= rows.last; i++) {\n            var line = session.getLine(i);\n            deleteRange.start.row = i;\n            deleteRange.end.row = i;\n            deleteRange.end.column = line.length;\n            session.replace(deleteRange, lines[i - rows.first]);\n        }\n    };\n    this.toggleCommentLines = function () {\n        var state = this.session.getState(this.getCursorPosition().row);\n        var rows = this.$getSelectedRows();\n        this.session.getMode().toggleCommentLines(state, this.session, rows.first, rows.last);\n    };\n    this.toggleBlockComment = function () {\n        var cursor = this.getCursorPosition();\n        var state = this.session.getState(cursor.row);\n        var range = this.getSelectionRange();\n        this.session.getMode().toggleBlockComment(state, this.session, range, cursor);\n    };\n    this.getNumberAt = function (row, column) {\n        var _numberRx = /[\\-]?[0-9]+(?:\\.[0-9]+)?/g;\n        _numberRx.lastIndex = 0;\n        var s = this.session.getLine(row);\n        while (_numberRx.lastIndex < column) {\n            var m = _numberRx.exec(s);\n            if (m.index <= column && m.index + m[0].length >= column) {\n                var number = {\n                    value: m[0],\n                    start: m.index,\n                    end: m.index + m[0].length\n                };\n                return number;\n            }\n        }\n        return null;\n    };\n    this.modifyNumber = function (amount) {\n        var row = this.selection.getCursor().row;\n        var column = this.selection.getCursor().column;\n        var charRange = new Range(row, column - 1, row, column);\n        var c = this.session.getTextRange(charRange);\n        if (!isNaN(parseFloat(c)) && isFinite(c)) {\n            var nr = this.getNumberAt(row, column);\n            if (nr) {\n                var fp = nr.value.indexOf(\".\") >= 0 ? nr.start + nr.value.indexOf(\".\") + 1 : nr.end;\n                var decimals = nr.start + nr.value.length - fp;\n                var t = parseFloat(nr.value);\n                t *= Math.pow(10, decimals);\n                if (fp !== nr.end && column < fp) {\n                    amount *= Math.pow(10, nr.end - column - 1);\n                }\n                else {\n                    amount *= Math.pow(10, nr.end - column);\n                }\n                t += amount;\n                t /= Math.pow(10, decimals);\n                var nnr = t.toFixed(decimals);\n                var replaceRange = new Range(row, nr.start, row, nr.end);\n                this.session.replace(replaceRange, nnr);\n                this.moveCursorTo(row, Math.max(nr.start + 1, column + nnr.length - nr.value.length));\n            }\n        }\n        else {\n            this.toggleWord();\n        }\n    };\n    this.$toggleWordPairs = [\n        [\"first\", \"last\"],\n        [\"true\", \"false\"],\n        [\"yes\", \"no\"],\n        [\"width\", \"height\"],\n        [\"top\", \"bottom\"],\n        [\"right\", \"left\"],\n        [\"on\", \"off\"],\n        [\"x\", \"y\"],\n        [\"get\", \"set\"],\n        [\"max\", \"min\"],\n        [\"horizontal\", \"vertical\"],\n        [\"show\", \"hide\"],\n        [\"add\", \"remove\"],\n        [\"up\", \"down\"],\n        [\"before\", \"after\"],\n        [\"even\", \"odd\"],\n        [\"in\", \"out\"],\n        [\"inside\", \"outside\"],\n        [\"next\", \"previous\"],\n        [\"increase\", \"decrease\"],\n        [\"attach\", \"detach\"],\n        [\"&&\", \"||\"],\n        [\"==\", \"!=\"]\n    ];\n    this.toggleWord = function () {\n        var row = this.selection.getCursor().row;\n        var column = this.selection.getCursor().column;\n        this.selection.selectWord();\n        var currentState = this.getSelectedText();\n        var currWordStart = this.selection.getWordRange().start.column;\n        var wordParts = currentState.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g, '$1 ').split(/\\s/);\n        var delta = column - currWordStart - 1;\n        if (delta < 0)\n            delta = 0;\n        var curLength = 0, itLength = 0;\n        var that = this;\n        if (currentState.match(/[A-Za-z0-9_]+/)) {\n            wordParts.forEach(function (item, i) {\n                itLength = curLength + item.length;\n                if (delta >= curLength && delta <= itLength) {\n                    currentState = item;\n                    that.selection.clearSelection();\n                    that.moveCursorTo(row, curLength + currWordStart);\n                    that.selection.selectTo(row, itLength + currWordStart);\n                }\n                curLength = itLength;\n            });\n        }\n        var wordPairs = this.$toggleWordPairs;\n        var reg;\n        for (var i = 0; i < wordPairs.length; i++) {\n            var item = wordPairs[i];\n            for (var j = 0; j <= 1; j++) {\n                var negate = +!j;\n                var firstCondition = currentState.match(new RegExp('^\\\\s?_?(' + lang.escapeRegExp(item[j]) + ')\\\\s?$', 'i'));\n                if (firstCondition) {\n                    var secondCondition = currentState.match(new RegExp('([_]|^|\\\\s)(' + lang.escapeRegExp(firstCondition[1]) + ')($|\\\\s)', 'g'));\n                    if (secondCondition) {\n                        reg = currentState.replace(new RegExp(lang.escapeRegExp(item[j]), 'i'), function (result) {\n                            var res = item[negate];\n                            if (result.toUpperCase() == result) {\n                                res = res.toUpperCase();\n                            }\n                            else if (result.charAt(0).toUpperCase() == result.charAt(0)) {\n                                res = res.substr(0, 0) + item[negate].charAt(0).toUpperCase() + res.substr(1);\n                            }\n                            return res;\n                        });\n                        this.insert(reg);\n                        reg = \"\";\n                    }\n                }\n            }\n        }\n    };\n    this.findLinkAt = function (row, column) {\n        var e_1, _a;\n        var line = this.session.getLine(row);\n        var wordParts = line.split(/((?:https?|ftp):\\/\\/[\\S]+)/);\n        var columnPosition = column;\n        if (columnPosition < 0)\n            columnPosition = 0;\n        var previousPosition = 0, currentPosition = 0, match;\n        try {\n            for (var wordParts_1 = __values(wordParts), wordParts_1_1 = wordParts_1.next(); !wordParts_1_1.done; wordParts_1_1 = wordParts_1.next()) {\n                var item = wordParts_1_1.value;\n                currentPosition = previousPosition + item.length;\n                if (columnPosition >= previousPosition && columnPosition <= currentPosition) {\n                    if (item.match(/((?:https?|ftp):\\/\\/[\\S]+)/)) {\n                        match = item.replace(/[\\s:.,'\";}\\]]+$/, \"\");\n                        break;\n                    }\n                }\n                previousPosition = currentPosition;\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (wordParts_1_1 && !wordParts_1_1.done && (_a = wordParts_1.return)) _a.call(wordParts_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return match;\n    };\n    this.openLink = function () {\n        var cursor = this.selection.getCursor();\n        var url = this.findLinkAt(cursor.row, cursor.column);\n        if (url)\n            window.open(url, '_blank');\n        return url != null;\n    };\n    this.removeLines = function () {\n        var rows = this.$getSelectedRows();\n        this.session.removeFullLines(rows.first, rows.last);\n        this.clearSelection();\n    };\n    this.duplicateSelection = function () {\n        var sel = this.selection;\n        var doc = this.session;\n        var range = sel.getRange();\n        var reverse = sel.isBackwards();\n        if (range.isEmpty()) {\n            var row = range.start.row;\n            doc.duplicateLines(row, row);\n        }\n        else {\n            var point = reverse ? range.start : range.end;\n            var endPoint = doc.insert(point, doc.getTextRange(range), false);\n            range.start = point;\n            range.end = endPoint;\n            sel.setSelectionRange(range, reverse);\n        }\n    };\n    this.moveLinesDown = function () {\n        this.$moveLines(1, false);\n    };\n    this.moveLinesUp = function () {\n        this.$moveLines(-1, false);\n    };\n    this.moveText = function (range, toPosition, copy) {\n        return this.session.moveText(range, toPosition, copy);\n    };\n    this.copyLinesUp = function () {\n        this.$moveLines(-1, true);\n    };\n    this.copyLinesDown = function () {\n        this.$moveLines(1, true);\n    };\n    this.$moveLines = function (dir, copy) {\n        var rows, moved;\n        var selection = this.selection;\n        if (!selection.inMultiSelectMode || this.inVirtualSelectionMode) {\n            var range = selection.toOrientedRange();\n            rows = this.$getSelectedRows(range);\n            moved = this.session.$moveLines(rows.first, rows.last, copy ? 0 : dir);\n            if (copy && dir == -1)\n                moved = 0;\n            range.moveBy(moved, 0);\n            selection.fromOrientedRange(range);\n        }\n        else {\n            var ranges = selection.rangeList.ranges;\n            selection.rangeList.detach(this.session);\n            this.inVirtualSelectionMode = true;\n            var diff = 0;\n            var totalDiff = 0;\n            var l = ranges.length;\n            for (var i = 0; i < l; i++) {\n                var rangeIndex = i;\n                ranges[i].moveBy(diff, 0);\n                rows = this.$getSelectedRows(ranges[i]);\n                var first = rows.first;\n                var last = rows.last;\n                while (++i < l) {\n                    if (totalDiff)\n                        ranges[i].moveBy(totalDiff, 0);\n                    var subRows = this.$getSelectedRows(ranges[i]);\n                    if (copy && subRows.first != last)\n                        break;\n                    else if (!copy && subRows.first > last + 1)\n                        break;\n                    last = subRows.last;\n                }\n                i--;\n                diff = this.session.$moveLines(first, last, copy ? 0 : dir);\n                if (copy && dir == -1)\n                    rangeIndex = i + 1;\n                while (rangeIndex <= i) {\n                    ranges[rangeIndex].moveBy(diff, 0);\n                    rangeIndex++;\n                }\n                if (!copy)\n                    diff = 0;\n                totalDiff += diff;\n            }\n            selection.fromOrientedRange(selection.ranges[0]);\n            selection.rangeList.attach(this.session);\n            this.inVirtualSelectionMode = false;\n        }\n    };\n    this.$getSelectedRows = function (range) {\n        range = (range || this.getSelectionRange()).collapseRows();\n        return {\n            first: this.session.getRowFoldStart(range.start.row),\n            last: this.session.getRowFoldEnd(range.end.row)\n        };\n    };\n    this.onCompositionStart = function (compositionState) {\n        this.renderer.showComposition(compositionState);\n    };\n    this.onCompositionUpdate = function (text) {\n        this.renderer.setCompositionText(text);\n    };\n    this.onCompositionEnd = function () {\n        this.renderer.hideComposition();\n    };\n    this.getFirstVisibleRow = function () {\n        return this.renderer.getFirstVisibleRow();\n    };\n    this.getLastVisibleRow = function () {\n        return this.renderer.getLastVisibleRow();\n    };\n    this.isRowVisible = function (row) {\n        return (row >= this.getFirstVisibleRow() && row <= this.getLastVisibleRow());\n    };\n    this.isRowFullyVisible = function (row) {\n        return (row >= this.renderer.getFirstFullyVisibleRow() && row <= this.renderer.getLastFullyVisibleRow());\n    };\n    this.$getVisibleRowCount = function () {\n        return this.renderer.getScrollBottomRow() - this.renderer.getScrollTopRow() + 1;\n    };\n    this.$moveByPage = function (dir, select) {\n        var renderer = this.renderer;\n        var config = this.renderer.layerConfig;\n        var rows = dir * Math.floor(config.height / config.lineHeight);\n        if (select === true) {\n            this.selection.$moveSelection(function () {\n                this.moveCursorBy(rows, 0);\n            });\n        }\n        else if (select === false) {\n            this.selection.moveCursorBy(rows, 0);\n            this.selection.clearSelection();\n        }\n        var scrollTop = renderer.scrollTop;\n        renderer.scrollBy(0, rows * config.lineHeight);\n        if (select != null)\n            renderer.scrollCursorIntoView(null, 0.5);\n        renderer.animateScrolling(scrollTop);\n    };\n    this.selectPageDown = function () {\n        this.$moveByPage(1, true);\n    };\n    this.selectPageUp = function () {\n        this.$moveByPage(-1, true);\n    };\n    this.gotoPageDown = function () {\n        this.$moveByPage(1, false);\n    };\n    this.gotoPageUp = function () {\n        this.$moveByPage(-1, false);\n    };\n    this.scrollPageDown = function () {\n        this.$moveByPage(1);\n    };\n    this.scrollPageUp = function () {\n        this.$moveByPage(-1);\n    };\n    this.scrollToRow = function (row) {\n        this.renderer.scrollToRow(row);\n    };\n    this.scrollToLine = function (line, center, animate, callback) {\n        this.renderer.scrollToLine(line, center, animate, callback);\n    };\n    this.centerSelection = function () {\n        var range = this.getSelectionRange();\n        var pos = {\n            row: Math.floor(range.start.row + (range.end.row - range.start.row) / 2),\n            column: Math.floor(range.start.column + (range.end.column - range.start.column) / 2)\n        };\n        this.renderer.alignCursor(pos, 0.5);\n    };\n    this.getCursorPosition = function () {\n        return this.selection.getCursor();\n    };\n    this.getCursorPositionScreen = function () {\n        return this.session.documentToScreenPosition(this.getCursorPosition());\n    };\n    this.getSelectionRange = function () {\n        return this.selection.getRange();\n    };\n    this.selectAll = function () {\n        this.selection.selectAll();\n    };\n    this.clearSelection = function () {\n        this.selection.clearSelection();\n    };\n    this.moveCursorTo = function (row, column) {\n        this.selection.moveCursorTo(row, column);\n    };\n    this.moveCursorToPosition = function (pos) {\n        this.selection.moveCursorToPosition(pos);\n    };\n    this.jumpToMatching = function (select, expand) {\n        var cursor = this.getCursorPosition();\n        var iterator = new TokenIterator(this.session, cursor.row, cursor.column);\n        var prevToken = iterator.getCurrentToken();\n        var tokenCount = 0;\n        if (prevToken && prevToken.type.indexOf('tag-name') !== -1) {\n            prevToken = iterator.stepBackward();\n        }\n        var token = prevToken || iterator.stepForward();\n        if (!token)\n            return;\n        var matchType;\n        var found = false;\n        var depth = {};\n        var i = cursor.column - token.start;\n        var bracketType;\n        var brackets = {\n            \")\": \"(\",\n            \"(\": \"(\",\n            \"]\": \"[\",\n            \"[\": \"[\",\n            \"{\": \"{\",\n            \"}\": \"{\"\n        };\n        do {\n            if (token.value.match(/[{}()\\[\\]]/g)) {\n                for (; i < token.value.length && !found; i++) {\n                    if (!brackets[token.value[i]]) {\n                        continue;\n                    }\n                    bracketType = brackets[token.value[i]] + '.' + token.type.replace(\"rparen\", \"lparen\");\n                    if (isNaN(depth[bracketType])) {\n                        depth[bracketType] = 0;\n                    }\n                    switch (token.value[i]) {\n                        case '(':\n                        case '[':\n                        case '{':\n                            depth[bracketType]++;\n                            break;\n                        case ')':\n                        case ']':\n                        case '}':\n                            depth[bracketType]--;\n                            if (depth[bracketType] === -1) {\n                                matchType = 'bracket';\n                                found = true;\n                            }\n                            break;\n                    }\n                }\n            }\n            else if (token.type.indexOf('tag-name') !== -1) {\n                if (isNaN(depth[token.value])) {\n                    depth[token.value] = 0;\n                }\n                if (prevToken.value === '<' && tokenCount > 1) {\n                    depth[token.value]++;\n                }\n                else if (prevToken.value === '</') {\n                    depth[token.value]--;\n                }\n                if (depth[token.value] === -1) {\n                    matchType = 'tag';\n                    found = true;\n                }\n            }\n            if (!found) {\n                prevToken = token;\n                tokenCount++;\n                token = iterator.stepForward();\n                i = 0;\n            }\n        } while (token && !found);\n        if (!matchType)\n            return;\n        var range, pos;\n        if (matchType === 'bracket') {\n            range = this.session.getBracketRange(cursor);\n            if (!range) {\n                range = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + i - 1, iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + i - 1);\n                pos = range.start;\n                if (expand || pos.row === cursor.row && Math.abs(pos.column - cursor.column)\n                    < 2)\n                    range = this.session.getBracketRange(pos);\n            }\n        }\n        else if (matchType === 'tag') {\n            if (!token || token.type.indexOf('tag-name') === -1)\n                return;\n            range = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() - 2, iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() - 2);\n            if (range.compare(cursor.row, cursor.column) === 0) {\n                var tagsRanges = this.session.getMatchingTags(cursor);\n                if (tagsRanges) {\n                    if (tagsRanges.openTag.contains(cursor.row, cursor.column)) {\n                        range = tagsRanges.closeTag;\n                        pos = range.start;\n                    }\n                    else {\n                        range = tagsRanges.openTag;\n                        if (tagsRanges.closeTag.start.row === cursor.row && tagsRanges.closeTag.start.column\n                            === cursor.column)\n                            pos = range.end;\n                        else\n                            pos = range.start;\n                    }\n                }\n            }\n            pos = pos || range.start;\n        }\n        pos = range && range.cursor || pos;\n        if (pos) {\n            if (select) {\n                if (range && expand) {\n                    this.selection.setRange(range);\n                }\n                else if (range && range.isEqual(this.getSelectionRange())) {\n                    this.clearSelection();\n                }\n                else {\n                    this.selection.selectTo(pos.row, pos.column);\n                }\n            }\n            else {\n                this.selection.moveTo(pos.row, pos.column);\n            }\n        }\n    };\n    this.gotoLine = function (lineNumber, column, animate) {\n        this.selection.clearSelection();\n        this.session.unfold({ row: lineNumber - 1, column: column || 0 });\n        this.exitMultiSelectMode && this.exitMultiSelectMode();\n        this.moveCursorTo(lineNumber - 1, column || 0);\n        if (!this.isRowFullyVisible(lineNumber - 1))\n            this.scrollToLine(lineNumber - 1, true, animate);\n    };\n    this.navigateTo = function (row, column) {\n        this.selection.moveTo(row, column);\n    };\n    this.navigateUp = function (times) {\n        if (this.selection.isMultiLine() && !this.selection.isBackwards()) {\n            var selectionStart = this.selection.anchor.getPosition();\n            return this.moveCursorToPosition(selectionStart);\n        }\n        this.selection.clearSelection();\n        this.selection.moveCursorBy(-times || -1, 0);\n    };\n    this.navigateDown = function (times) {\n        if (this.selection.isMultiLine() && this.selection.isBackwards()) {\n            var selectionEnd = this.selection.anchor.getPosition();\n            return this.moveCursorToPosition(selectionEnd);\n        }\n        this.selection.clearSelection();\n        this.selection.moveCursorBy(times || 1, 0);\n    };\n    this.navigateLeft = function (times) {\n        if (!this.selection.isEmpty()) {\n            var selectionStart = this.getSelectionRange().start;\n            this.moveCursorToPosition(selectionStart);\n        }\n        else {\n            times = times || 1;\n            while (times--) {\n                this.selection.moveCursorLeft();\n            }\n        }\n        this.clearSelection();\n    };\n    this.navigateRight = function (times) {\n        if (!this.selection.isEmpty()) {\n            var selectionEnd = this.getSelectionRange().end;\n            this.moveCursorToPosition(selectionEnd);\n        }\n        else {\n            times = times || 1;\n            while (times--) {\n                this.selection.moveCursorRight();\n            }\n        }\n        this.clearSelection();\n    };\n    this.navigateLineStart = function () {\n        this.selection.moveCursorLineStart();\n        this.clearSelection();\n    };\n    this.navigateLineEnd = function () {\n        this.selection.moveCursorLineEnd();\n        this.clearSelection();\n    };\n    this.navigateFileEnd = function () {\n        this.selection.moveCursorFileEnd();\n        this.clearSelection();\n    };\n    this.navigateFileStart = function () {\n        this.selection.moveCursorFileStart();\n        this.clearSelection();\n    };\n    this.navigateWordRight = function () {\n        this.selection.moveCursorWordRight();\n        this.clearSelection();\n    };\n    this.navigateWordLeft = function () {\n        this.selection.moveCursorWordLeft();\n        this.clearSelection();\n    };\n    this.replace = function (replacement, options) {\n        if (options)\n            this.$search.set(options);\n        var range = this.$search.find(this.session);\n        var replaced = 0;\n        if (!range)\n            return replaced;\n        if (this.$tryReplace(range, replacement)) {\n            replaced = 1;\n        }\n        this.selection.setSelectionRange(range);\n        this.renderer.scrollSelectionIntoView(range.start, range.end);\n        return replaced;\n    };\n    this.replaceAll = function (replacement, options) {\n        if (options) {\n            this.$search.set(options);\n        }\n        var ranges = this.$search.findAll(this.session);\n        var replaced = 0;\n        if (!ranges.length)\n            return replaced;\n        var selection = this.getSelectionRange();\n        this.selection.moveTo(0, 0);\n        for (var i = ranges.length - 1; i >= 0; --i) {\n            if (this.$tryReplace(ranges[i], replacement)) {\n                replaced++;\n            }\n        }\n        this.selection.setSelectionRange(selection);\n        return replaced;\n    };\n    this.$tryReplace = function (range, replacement) {\n        var input = this.session.getTextRange(range);\n        replacement = this.$search.replace(input, replacement);\n        if (replacement !== null) {\n            range.end = this.session.replace(range, replacement);\n            return range;\n        }\n        else {\n            return null;\n        }\n    };\n    this.getLastSearchOptions = function () {\n        return this.$search.getOptions();\n    };\n    this.find = function (needle, options, animate) {\n        if (!options)\n            options = {};\n        if (typeof needle == \"string\" || needle instanceof RegExp)\n            options.needle = needle;\n        else if (typeof needle == \"object\")\n            oop.mixin(options, needle);\n        var range = this.selection.getRange();\n        if (options.needle == null) {\n            needle = this.session.getTextRange(range)\n                || this.$search.$options.needle;\n            if (!needle) {\n                range = this.session.getWordRange(range.start.row, range.start.column);\n                needle = this.session.getTextRange(range);\n            }\n            this.$search.set({ needle: needle });\n        }\n        this.$search.set(options);\n        if (!options.start)\n            this.$search.set({ start: range });\n        var newRange = this.$search.find(this.session);\n        if (options.preventScroll)\n            return newRange;\n        if (newRange) {\n            this.revealRange(newRange, animate);\n            return newRange;\n        }\n        if (options.backwards)\n            range.start = range.end;\n        else\n            range.end = range.start;\n        this.selection.setRange(range);\n    };\n    this.findNext = function (options, animate) {\n        this.find({ skipCurrent: true, backwards: false }, options, animate);\n    };\n    this.findPrevious = function (options, animate) {\n        this.find(options, { skipCurrent: true, backwards: true }, animate);\n    };\n    this.revealRange = function (range, animate) {\n        this.session.unfold(range);\n        this.selection.setSelectionRange(range);\n        var scrollTop = this.renderer.scrollTop;\n        this.renderer.scrollSelectionIntoView(range.start, range.end, 0.5);\n        if (animate !== false)\n            this.renderer.animateScrolling(scrollTop);\n    };\n    this.undo = function () {\n        this.session.getUndoManager().undo(this.session);\n        this.renderer.scrollCursorIntoView(null, 0.5);\n    };\n    this.redo = function () {\n        this.session.getUndoManager().redo(this.session);\n        this.renderer.scrollCursorIntoView(null, 0.5);\n    };\n    this.destroy = function () {\n        if (this.$toDestroy) {\n            this.$toDestroy.forEach(function (el) {\n                el.destroy();\n            });\n            this.$toDestroy = null;\n        }\n        if (this.$mouseHandler)\n            this.$mouseHandler.destroy();\n        this.renderer.destroy();\n        this._signal(\"destroy\", this);\n        if (this.session)\n            this.session.destroy();\n        if (this._$emitInputEvent)\n            this._$emitInputEvent.cancel();\n        this.removeAllListeners();\n    };\n    this.setAutoScrollEditorIntoView = function (enable) {\n        if (!enable)\n            return;\n        var rect;\n        var self = this;\n        var shouldScroll = false;\n        if (!this.$scrollAnchor)\n            this.$scrollAnchor = document.createElement(\"div\");\n        var scrollAnchor = this.$scrollAnchor;\n        scrollAnchor.style.cssText = \"position:absolute\";\n        this.container.insertBefore(scrollAnchor, this.container.firstChild);\n        var onChangeSelection = this.on(\"changeSelection\", function () {\n            shouldScroll = true;\n        });\n        var onBeforeRender = this.renderer.on(\"beforeRender\", function () {\n            if (shouldScroll)\n                rect = self.renderer.container.getBoundingClientRect();\n        });\n        var onAfterRender = this.renderer.on(\"afterRender\", function () {\n            if (shouldScroll && rect && (self.isFocused()\n                || self.searchBox && self.searchBox.isFocused())) {\n                var renderer = self.renderer;\n                var pos = renderer.$cursorLayer.$pixelPos;\n                var config = renderer.layerConfig;\n                var top = pos.top - config.offset;\n                if (pos.top >= 0 && top + rect.top < 0) {\n                    shouldScroll = true;\n                }\n                else if (pos.top < config.height &&\n                    pos.top + rect.top + config.lineHeight > window.innerHeight) {\n                    shouldScroll = false;\n                }\n                else {\n                    shouldScroll = null;\n                }\n                if (shouldScroll != null) {\n                    scrollAnchor.style.top = top + \"px\";\n                    scrollAnchor.style.left = pos.left + \"px\";\n                    scrollAnchor.style.height = config.lineHeight + \"px\";\n                    scrollAnchor.scrollIntoView(shouldScroll);\n                }\n                shouldScroll = rect = null;\n            }\n        });\n        this.setAutoScrollEditorIntoView = function (enable) {\n            if (enable)\n                return;\n            delete this.setAutoScrollEditorIntoView;\n            this.off(\"changeSelection\", onChangeSelection);\n            this.renderer.off(\"afterRender\", onAfterRender);\n            this.renderer.off(\"beforeRender\", onBeforeRender);\n        };\n    };\n    this.$resetCursorStyle = function () {\n        var style = this.$cursorStyle || \"ace\";\n        var cursorLayer = this.renderer.$cursorLayer;\n        if (!cursorLayer)\n            return;\n        cursorLayer.setSmoothBlinking(/smooth/.test(style));\n        cursorLayer.isBlinking = !this.$readOnly && style != \"wide\";\n        dom.setCssClass(cursorLayer.element, \"ace_slim-cursors\", /slim/.test(style));\n    };\n    this.prompt = function (message, options, callback) {\n        var editor = this;\n        config.loadModule(\"./ext/prompt\", function (module) {\n            module.prompt(editor, message, options, callback);\n        });\n    };\n}).call(Editor.prototype);\nconfig.defineOptions(Editor.prototype, \"editor\", {\n    selectionStyle: {\n        set: function (style) {\n            this.onSelectionChange();\n            this._signal(\"changeSelectionStyle\", { data: style });\n        },\n        initialValue: \"line\"\n    },\n    highlightActiveLine: {\n        set: function () { this.$updateHighlightActiveLine(); },\n        initialValue: true\n    },\n    highlightSelectedWord: {\n        set: function (shouldHighlight) { this.$onSelectionChange(); },\n        initialValue: true\n    },\n    readOnly: {\n        set: function (readOnly) {\n            this.textInput.setReadOnly(readOnly);\n            this.$resetCursorStyle();\n        },\n        initialValue: false\n    },\n    copyWithEmptySelection: {\n        set: function (value) {\n            this.textInput.setCopyWithEmptySelection(value);\n        },\n        initialValue: false\n    },\n    cursorStyle: {\n        set: function (val) { this.$resetCursorStyle(); },\n        values: [\"ace\", \"slim\", \"smooth\", \"wide\"],\n        initialValue: \"ace\"\n    },\n    mergeUndoDeltas: {\n        values: [false, true, \"always\"],\n        initialValue: true\n    },\n    behavioursEnabled: { initialValue: true },\n    wrapBehavioursEnabled: { initialValue: true },\n    enableAutoIndent: { initialValue: true },\n    autoScrollEditorIntoView: {\n        set: function (val) { this.setAutoScrollEditorIntoView(val); }\n    },\n    keyboardHandler: {\n        set: function (val) { this.setKeyboardHandler(val); },\n        get: function () { return this.$keybindingId; },\n        handlesSet: true\n    },\n    value: {\n        set: function (val) { this.session.setValue(val); },\n        get: function () { return this.getValue(); },\n        handlesSet: true,\n        hidden: true\n    },\n    session: {\n        set: function (val) { this.setSession(val); },\n        get: function () { return this.session; },\n        handlesSet: true,\n        hidden: true\n    },\n    showLineNumbers: {\n        set: function (show) {\n            this.renderer.$gutterLayer.setShowLineNumbers(show);\n            this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER);\n            if (show && this.$relativeLineNumbers)\n                relativeNumberRenderer.attach(this);\n            else\n                relativeNumberRenderer.detach(this);\n        },\n        initialValue: true\n    },\n    relativeLineNumbers: {\n        set: function (value) {\n            if (this.$showLineNumbers && value)\n                relativeNumberRenderer.attach(this);\n            else\n                relativeNumberRenderer.detach(this);\n        }\n    },\n    placeholder: {\n        set: function (message) {\n            if (!this.$updatePlaceholder) {\n                this.$updatePlaceholder = function () {\n                    var value = this.session && (this.renderer.$composition || this.getValue());\n                    if (value && this.renderer.placeholderNode) {\n                        this.renderer.off(\"afterRender\", this.$updatePlaceholder);\n                        dom.removeCssClass(this.container, \"ace_hasPlaceholder\");\n                        this.renderer.placeholderNode.remove();\n                        this.renderer.placeholderNode = null;\n                    }\n                    else if (!value && !this.renderer.placeholderNode) {\n                        this.renderer.on(\"afterRender\", this.$updatePlaceholder);\n                        dom.addCssClass(this.container, \"ace_hasPlaceholder\");\n                        var el = dom.createElement(\"div\");\n                        el.className = \"ace_placeholder\";\n                        el.textContent = this.$placeholder || \"\";\n                        this.renderer.placeholderNode = el;\n                        this.renderer.content.appendChild(this.renderer.placeholderNode);\n                    }\n                    else if (!value && this.renderer.placeholderNode) {\n                        this.renderer.placeholderNode.textContent = this.$placeholder || \"\";\n                    }\n                }.bind(this);\n                this.on(\"input\", this.$updatePlaceholder);\n            }\n            this.$updatePlaceholder();\n        }\n    },\n    customScrollbar: \"renderer\",\n    hScrollBarAlwaysVisible: \"renderer\",\n    vScrollBarAlwaysVisible: \"renderer\",\n    highlightGutterLine: \"renderer\",\n    animatedScroll: \"renderer\",\n    showInvisibles: \"renderer\",\n    showPrintMargin: \"renderer\",\n    printMarginColumn: \"renderer\",\n    printMargin: \"renderer\",\n    fadeFoldWidgets: \"renderer\",\n    showFoldWidgets: \"renderer\",\n    displayIndentGuides: \"renderer\",\n    highlightIndentGuides: \"renderer\",\n    showGutter: \"renderer\",\n    fontSize: \"renderer\",\n    fontFamily: \"renderer\",\n    maxLines: \"renderer\",\n    minLines: \"renderer\",\n    scrollPastEnd: \"renderer\",\n    fixedWidthGutter: \"renderer\",\n    theme: \"renderer\",\n    hasCssTransforms: \"renderer\",\n    maxPixelHeight: \"renderer\",\n    useTextareaForIME: \"renderer\",\n    scrollSpeed: \"$mouseHandler\",\n    dragDelay: \"$mouseHandler\",\n    dragEnabled: \"$mouseHandler\",\n    focusTimeout: \"$mouseHandler\",\n    tooltipFollowsMouse: \"$mouseHandler\",\n    firstLineNumber: \"session\",\n    overwrite: \"session\",\n    newLineMode: \"session\",\n    useWorker: \"session\",\n    useSoftTabs: \"session\",\n    navigateWithinSoftTabs: \"session\",\n    tabSize: \"session\",\n    wrap: \"session\",\n    indentedSoftWrap: \"session\",\n    foldStyle: \"session\",\n    mode: \"session\"\n});\nvar relativeNumberRenderer = {\n    getText: function (session, row) {\n        return (Math.abs(session.selection.lead.row - row) || (row + 1 + (row < 9 ? \"\\xb7\" : \"\"))) + \"\";\n    },\n    getWidth: function (session, lastLineNumber, config) {\n        return Math.max(lastLineNumber.toString().length, (config.lastRow + 1).toString().length, 2) * config.characterWidth;\n    },\n    update: function (e, editor) {\n        editor.renderer.$loop.schedule(editor.renderer.CHANGE_GUTTER);\n    },\n    attach: function (editor) {\n        editor.renderer.$gutterLayer.$renderer = this;\n        editor.on(\"changeSelection\", this.update);\n        this.update(null, editor);\n    },\n    detach: function (editor) {\n        if (editor.renderer.$gutterLayer.$renderer == this)\n            editor.renderer.$gutterLayer.$renderer = null;\n        editor.off(\"changeSelection\", this.update);\n        this.update(null, editor);\n    }\n};\nexports.Editor = Editor;\n\n});\n\nace.define(\"ace/undomanager\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(require, exports, module){\"use strict\";\nvar UndoManager = function () {\n    this.$maxRev = 0;\n    this.$fromUndo = false;\n    this.$undoDepth = Infinity;\n    this.reset();\n};\n(function () {\n    this.addSession = function (session) {\n        this.$session = session;\n    };\n    this.add = function (delta, allowMerge, session) {\n        if (this.$fromUndo)\n            return;\n        if (delta == this.$lastDelta)\n            return;\n        if (!this.$keepRedoStack)\n            this.$redoStack.length = 0;\n        if (allowMerge === false || !this.lastDeltas) {\n            this.lastDeltas = [];\n            var undoStackLength = this.$undoStack.length;\n            if (undoStackLength > this.$undoDepth - 1) {\n                this.$undoStack.splice(0, undoStackLength - this.$undoDepth + 1);\n            }\n            this.$undoStack.push(this.lastDeltas);\n            delta.id = this.$rev = ++this.$maxRev;\n        }\n        if (delta.action == \"remove\" || delta.action == \"insert\")\n            this.$lastDelta = delta;\n        this.lastDeltas.push(delta);\n    };\n    this.addSelection = function (selection, rev) {\n        this.selections.push({\n            value: selection,\n            rev: rev || this.$rev\n        });\n    };\n    this.startNewGroup = function () {\n        this.lastDeltas = null;\n        return this.$rev;\n    };\n    this.markIgnored = function (from, to) {\n        if (to == null)\n            to = this.$rev + 1;\n        var stack = this.$undoStack;\n        for (var i = stack.length; i--;) {\n            var delta = stack[i][0];\n            if (delta.id <= from)\n                break;\n            if (delta.id < to)\n                delta.ignore = true;\n        }\n        this.lastDeltas = null;\n    };\n    this.getSelection = function (rev, after) {\n        var stack = this.selections;\n        for (var i = stack.length; i--;) {\n            var selection = stack[i];\n            if (selection.rev < rev) {\n                if (after)\n                    selection = stack[i + 1];\n                return selection;\n            }\n        }\n    };\n    this.getRevision = function () {\n        return this.$rev;\n    };\n    this.getDeltas = function (from, to) {\n        if (to == null)\n            to = this.$rev + 1;\n        var stack = this.$undoStack;\n        var end = null, start = 0;\n        for (var i = stack.length; i--;) {\n            var delta = stack[i][0];\n            if (delta.id < to && !end)\n                end = i + 1;\n            if (delta.id <= from) {\n                start = i + 1;\n                break;\n            }\n        }\n        return stack.slice(start, end);\n    };\n    this.getChangedRanges = function (from, to) {\n        if (to == null)\n            to = this.$rev + 1;\n    };\n    this.getChangedLines = function (from, to) {\n        if (to == null)\n            to = this.$rev + 1;\n    };\n    this.undo = function (session, dontSelect) {\n        this.lastDeltas = null;\n        var stack = this.$undoStack;\n        if (!rearrangeUndoStack(stack, stack.length))\n            return;\n        if (!session)\n            session = this.$session;\n        if (this.$redoStackBaseRev !== this.$rev && this.$redoStack.length)\n            this.$redoStack = [];\n        this.$fromUndo = true;\n        var deltaSet = stack.pop();\n        var undoSelectionRange = null;\n        if (deltaSet) {\n            undoSelectionRange = session.undoChanges(deltaSet, dontSelect);\n            this.$redoStack.push(deltaSet);\n            this.$syncRev();\n        }\n        this.$fromUndo = false;\n        return undoSelectionRange;\n    };\n    this.redo = function (session, dontSelect) {\n        this.lastDeltas = null;\n        if (!session)\n            session = this.$session;\n        this.$fromUndo = true;\n        if (this.$redoStackBaseRev != this.$rev) {\n            var diff = this.getDeltas(this.$redoStackBaseRev, this.$rev + 1);\n            rebaseRedoStack(this.$redoStack, diff);\n            this.$redoStackBaseRev = this.$rev;\n            this.$redoStack.forEach(function (x) {\n                x[0].id = ++this.$maxRev;\n            }, this);\n        }\n        var deltaSet = this.$redoStack.pop();\n        var redoSelectionRange = null;\n        if (deltaSet) {\n            redoSelectionRange = session.redoChanges(deltaSet, dontSelect);\n            this.$undoStack.push(deltaSet);\n            this.$syncRev();\n        }\n        this.$fromUndo = false;\n        return redoSelectionRange;\n    };\n    this.$syncRev = function () {\n        var stack = this.$undoStack;\n        var nextDelta = stack[stack.length - 1];\n        var id = nextDelta && nextDelta[0].id || 0;\n        this.$redoStackBaseRev = id;\n        this.$rev = id;\n    };\n    this.reset = function () {\n        this.lastDeltas = null;\n        this.$lastDelta = null;\n        this.$undoStack = [];\n        this.$redoStack = [];\n        this.$rev = 0;\n        this.mark = 0;\n        this.$redoStackBaseRev = this.$rev;\n        this.selections = [];\n    };\n    this.canUndo = function () {\n        return this.$undoStack.length > 0;\n    };\n    this.canRedo = function () {\n        return this.$redoStack.length > 0;\n    };\n    this.bookmark = function (rev) {\n        if (rev == undefined)\n            rev = this.$rev;\n        this.mark = rev;\n    };\n    this.isAtBookmark = function () {\n        return this.$rev === this.mark;\n    };\n    this.toJSON = function () {\n    };\n    this.fromJSON = function () {\n    };\n    this.hasUndo = this.canUndo;\n    this.hasRedo = this.canRedo;\n    this.isClean = this.isAtBookmark;\n    this.markClean = this.bookmark;\n    this.$prettyPrint = function (delta) {\n        if (delta)\n            return stringifyDelta(delta);\n        return stringifyDelta(this.$undoStack) + \"\\n---\\n\" + stringifyDelta(this.$redoStack);\n    };\n}).call(UndoManager.prototype);\nfunction rearrangeUndoStack(stack, pos) {\n    for (var i = pos; i--;) {\n        var deltaSet = stack[i];\n        if (deltaSet && !deltaSet[0].ignore) {\n            while (i < pos - 1) {\n                var swapped = swapGroups(stack[i], stack[i + 1]);\n                stack[i] = swapped[0];\n                stack[i + 1] = swapped[1];\n                i++;\n            }\n            return true;\n        }\n    }\n}\nvar Range = require(\"./range\").Range;\nvar cmp = Range.comparePoints;\nvar comparePoints = Range.comparePoints;\nfunction $updateMarkers(delta) {\n    var isInsert = delta.action == \"insert\";\n    var start = delta.start;\n    var end = delta.end;\n    var rowShift = (end.row - start.row) * (isInsert ? 1 : -1);\n    var colShift = (end.column - start.column) * (isInsert ? 1 : -1);\n    if (isInsert)\n        end = start;\n    for (var i in this.marks) {\n        var point = this.marks[i];\n        var cmp = comparePoints(point, start);\n        if (cmp < 0) {\n            continue; // delta starts after the range\n        }\n        if (cmp === 0) {\n            if (isInsert) {\n                if (point.bias == 1) {\n                    cmp = 1;\n                }\n                else {\n                    point.bias == -1;\n                    continue;\n                }\n            }\n        }\n        var cmp2 = isInsert ? cmp : comparePoints(point, end);\n        if (cmp2 > 0) {\n            point.row += rowShift;\n            point.column += point.row == end.row ? colShift : 0;\n            continue;\n        }\n        if (!isInsert && cmp2 <= 0) {\n            point.row = start.row;\n            point.column = start.column;\n            if (cmp2 === 0)\n                point.bias = 1;\n        }\n    }\n}\nfunction clonePos(pos) {\n    return { row: pos.row, column: pos.column };\n}\nfunction cloneDelta(d) {\n    return {\n        start: clonePos(d.start),\n        end: clonePos(d.end),\n        action: d.action,\n        lines: d.lines.slice()\n    };\n}\nfunction stringifyDelta(d) {\n    d = d || this;\n    if (Array.isArray(d)) {\n        return d.map(stringifyDelta).join(\"\\n\");\n    }\n    var type = \"\";\n    if (d.action) {\n        type = d.action == \"insert\" ? \"+\" : \"-\";\n        type += \"[\" + d.lines + \"]\";\n    }\n    else if (d.value) {\n        if (Array.isArray(d.value)) {\n            type = d.value.map(stringifyRange).join(\"\\n\");\n        }\n        else {\n            type = stringifyRange(d.value);\n        }\n    }\n    if (d.start) {\n        type += stringifyRange(d);\n    }\n    if (d.id || d.rev) {\n        type += \"\\t(\" + (d.id || d.rev) + \")\";\n    }\n    return type;\n}\nfunction stringifyRange(r) {\n    return r.start.row + \":\" + r.start.column\n        + \"=>\" + r.end.row + \":\" + r.end.column;\n}\nfunction swap(d1, d2) {\n    var i1 = d1.action == \"insert\";\n    var i2 = d2.action == \"insert\";\n    if (i1 && i2) {\n        if (cmp(d2.start, d1.end) >= 0) {\n            shift(d2, d1, -1);\n        }\n        else if (cmp(d2.start, d1.start) <= 0) {\n            shift(d1, d2, +1);\n        }\n        else {\n            return null;\n        }\n    }\n    else if (i1 && !i2) {\n        if (cmp(d2.start, d1.end) >= 0) {\n            shift(d2, d1, -1);\n        }\n        else if (cmp(d2.end, d1.start) <= 0) {\n            shift(d1, d2, -1);\n        }\n        else {\n            return null;\n        }\n    }\n    else if (!i1 && i2) {\n        if (cmp(d2.start, d1.start) >= 0) {\n            shift(d2, d1, +1);\n        }\n        else if (cmp(d2.start, d1.start) <= 0) {\n            shift(d1, d2, +1);\n        }\n        else {\n            return null;\n        }\n    }\n    else if (!i1 && !i2) {\n        if (cmp(d2.start, d1.start) >= 0) {\n            shift(d2, d1, +1);\n        }\n        else if (cmp(d2.end, d1.start) <= 0) {\n            shift(d1, d2, -1);\n        }\n        else {\n            return null;\n        }\n    }\n    return [d2, d1];\n}\nfunction swapGroups(ds1, ds2) {\n    for (var i = ds1.length; i--;) {\n        for (var j = 0; j < ds2.length; j++) {\n            if (!swap(ds1[i], ds2[j])) {\n                while (i < ds1.length) {\n                    while (j--) {\n                        swap(ds2[j], ds1[i]);\n                    }\n                    j = ds2.length;\n                    i++;\n                }\n                return [ds1, ds2];\n            }\n        }\n    }\n    ds1.selectionBefore = ds2.selectionBefore =\n        ds1.selectionAfter = ds2.selectionAfter = null;\n    return [ds2, ds1];\n}\nfunction xform(d1, c1) {\n    var i1 = d1.action == \"insert\";\n    var i2 = c1.action == \"insert\";\n    if (i1 && i2) {\n        if (cmp(d1.start, c1.start) < 0) {\n            shift(c1, d1, 1);\n        }\n        else {\n            shift(d1, c1, 1);\n        }\n    }\n    else if (i1 && !i2) {\n        if (cmp(d1.start, c1.end) >= 0) {\n            shift(d1, c1, -1);\n        }\n        else if (cmp(d1.start, c1.start) <= 0) {\n            shift(c1, d1, +1);\n        }\n        else {\n            shift(d1, Range.fromPoints(c1.start, d1.start), -1);\n            shift(c1, d1, +1);\n        }\n    }\n    else if (!i1 && i2) {\n        if (cmp(c1.start, d1.end) >= 0) {\n            shift(c1, d1, -1);\n        }\n        else if (cmp(c1.start, d1.start) <= 0) {\n            shift(d1, c1, +1);\n        }\n        else {\n            shift(c1, Range.fromPoints(d1.start, c1.start), -1);\n            shift(d1, c1, +1);\n        }\n    }\n    else if (!i1 && !i2) {\n        if (cmp(c1.start, d1.end) >= 0) {\n            shift(c1, d1, -1);\n        }\n        else if (cmp(c1.end, d1.start) <= 0) {\n            shift(d1, c1, -1);\n        }\n        else {\n            var before, after;\n            if (cmp(d1.start, c1.start) < 0) {\n                before = d1;\n                d1 = splitDelta(d1, c1.start);\n            }\n            if (cmp(d1.end, c1.end) > 0) {\n                after = splitDelta(d1, c1.end);\n            }\n            shiftPos(c1.end, d1.start, d1.end, -1);\n            if (after && !before) {\n                d1.lines = after.lines;\n                d1.start = after.start;\n                d1.end = after.end;\n                after = d1;\n            }\n            return [c1, before, after].filter(Boolean);\n        }\n    }\n    return [c1, d1];\n}\nfunction shift(d1, d2, dir) {\n    shiftPos(d1.start, d2.start, d2.end, dir);\n    shiftPos(d1.end, d2.start, d2.end, dir);\n}\nfunction shiftPos(pos, start, end, dir) {\n    if (pos.row == (dir == 1 ? start : end).row) {\n        pos.column += dir * (end.column - start.column);\n    }\n    pos.row += dir * (end.row - start.row);\n}\nfunction splitDelta(c, pos) {\n    var lines = c.lines;\n    var end = c.end;\n    c.end = clonePos(pos);\n    var rowsBefore = c.end.row - c.start.row;\n    var otherLines = lines.splice(rowsBefore, lines.length);\n    var col = rowsBefore ? pos.column : pos.column - c.start.column;\n    lines.push(otherLines[0].substring(0, col));\n    otherLines[0] = otherLines[0].substr(col);\n    var rest = {\n        start: clonePos(pos),\n        end: end,\n        lines: otherLines,\n        action: c.action\n    };\n    return rest;\n}\nfunction moveDeltasByOne(redoStack, d) {\n    d = cloneDelta(d);\n    for (var j = redoStack.length; j--;) {\n        var deltaSet = redoStack[j];\n        for (var i = 0; i < deltaSet.length; i++) {\n            var x = deltaSet[i];\n            var xformed = xform(x, d);\n            d = xformed[0];\n            if (xformed.length != 2) {\n                if (xformed[2]) {\n                    deltaSet.splice(i + 1, 1, xformed[1], xformed[2]);\n                    i++;\n                }\n                else if (!xformed[1]) {\n                    deltaSet.splice(i, 1);\n                    i--;\n                }\n            }\n        }\n        if (!deltaSet.length) {\n            redoStack.splice(j, 1);\n        }\n    }\n    return redoStack;\n}\nfunction rebaseRedoStack(redoStack, deltaSets) {\n    for (var i = 0; i < deltaSets.length; i++) {\n        var deltas = deltaSets[i];\n        for (var j = 0; j < deltas.length; j++) {\n            moveDeltasByOne(redoStack, deltas[j]);\n        }\n    }\n}\nexports.UndoManager = UndoManager;\n\n});\n\nace.define(\"ace/layer/lines\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(require, exports, module){\"use strict\";\nvar dom = require(\"../lib/dom\");\nvar Lines = function (element, canvasHeight) {\n    this.element = element;\n    this.canvasHeight = canvasHeight || 500000;\n    this.element.style.height = (this.canvasHeight * 2) + \"px\";\n    this.cells = [];\n    this.cellCache = [];\n    this.$offsetCoefficient = 0;\n};\n(function () {\n    this.moveContainer = function (config) {\n        dom.translate(this.element, 0, -((config.firstRowScreen * config.lineHeight) % this.canvasHeight) - config.offset * this.$offsetCoefficient);\n    };\n    this.pageChanged = function (oldConfig, newConfig) {\n        return (Math.floor((oldConfig.firstRowScreen * oldConfig.lineHeight) / this.canvasHeight) !==\n            Math.floor((newConfig.firstRowScreen * newConfig.lineHeight) / this.canvasHeight));\n    };\n    this.computeLineTop = function (row, config, session) {\n        var screenTop = config.firstRowScreen * config.lineHeight;\n        var screenPage = Math.floor(screenTop / this.canvasHeight);\n        var lineTop = session.documentToScreenRow(row, 0) * config.lineHeight;\n        return lineTop - (screenPage * this.canvasHeight);\n    };\n    this.computeLineHeight = function (row, config, session) {\n        return config.lineHeight * session.getRowLineCount(row);\n    };\n    this.getLength = function () {\n        return this.cells.length;\n    };\n    this.get = function (index) {\n        return this.cells[index];\n    };\n    this.shift = function () {\n        this.$cacheCell(this.cells.shift());\n    };\n    this.pop = function () {\n        this.$cacheCell(this.cells.pop());\n    };\n    this.push = function (cell) {\n        if (Array.isArray(cell)) {\n            this.cells.push.apply(this.cells, cell);\n            var fragment = dom.createFragment(this.element);\n            for (var i = 0; i < cell.length; i++) {\n                fragment.appendChild(cell[i].element);\n            }\n            this.element.appendChild(fragment);\n        }\n        else {\n            this.cells.push(cell);\n            this.element.appendChild(cell.element);\n        }\n    };\n    this.unshift = function (cell) {\n        if (Array.isArray(cell)) {\n            this.cells.unshift.apply(this.cells, cell);\n            var fragment = dom.createFragment(this.element);\n            for (var i = 0; i < cell.length; i++) {\n                fragment.appendChild(cell[i].element);\n            }\n            if (this.element.firstChild)\n                this.element.insertBefore(fragment, this.element.firstChild);\n            else\n                this.element.appendChild(fragment);\n        }\n        else {\n            this.cells.unshift(cell);\n            this.element.insertAdjacentElement(\"afterbegin\", cell.element);\n        }\n    };\n    this.last = function () {\n        if (this.cells.length)\n            return this.cells[this.cells.length - 1];\n        else\n            return null;\n    };\n    this.$cacheCell = function (cell) {\n        if (!cell)\n            return;\n        cell.element.remove();\n        this.cellCache.push(cell);\n    };\n    this.createCell = function (row, config, session, initElement) {\n        var cell = this.cellCache.pop();\n        if (!cell) {\n            var element = dom.createElement(\"div\");\n            if (initElement)\n                initElement(element);\n            this.element.appendChild(element);\n            cell = {\n                element: element,\n                text: \"\",\n                row: row\n            };\n        }\n        cell.row = row;\n        return cell;\n    };\n}).call(Lines.prototype);\nexports.Lines = Lines;\n\n});\n\nace.define(\"ace/layer/gutter\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/oop\",\"ace/lib/lang\",\"ace/lib/event_emitter\",\"ace/layer/lines\"], function(require, exports, module){\"use strict\";\nvar dom = require(\"../lib/dom\");\nvar oop = require(\"../lib/oop\");\nvar lang = require(\"../lib/lang\");\nvar EventEmitter = require(\"../lib/event_emitter\").EventEmitter;\nvar Lines = require(\"./lines\").Lines;\nvar Gutter = function (parentEl) {\n    this.element = dom.createElement(\"div\");\n    this.element.className = \"ace_layer ace_gutter-layer\";\n    parentEl.appendChild(this.element);\n    this.setShowFoldWidgets(this.$showFoldWidgets);\n    this.gutterWidth = 0;\n    this.$annotations = [];\n    this.$updateAnnotations = this.$updateAnnotations.bind(this);\n    this.$lines = new Lines(this.element);\n    this.$lines.$offsetCoefficient = 1;\n};\n(function () {\n    oop.implement(this, EventEmitter);\n    this.setSession = function (session) {\n        if (this.session)\n            this.session.off(\"change\", this.$updateAnnotations);\n        this.session = session;\n        if (session)\n            session.on(\"change\", this.$updateAnnotations);\n    };\n    this.addGutterDecoration = function (row, className) {\n        if (window.console)\n            console.warn && console.warn(\"deprecated use session.addGutterDecoration\");\n        this.session.addGutterDecoration(row, className);\n    };\n    this.removeGutterDecoration = function (row, className) {\n        if (window.console)\n            console.warn && console.warn(\"deprecated use session.removeGutterDecoration\");\n        this.session.removeGutterDecoration(row, className);\n    };\n    this.setAnnotations = function (annotations) {\n        this.$annotations = [];\n        for (var i = 0; i < annotations.length; i++) {\n            var annotation = annotations[i];\n            var row = annotation.row;\n            var rowInfo = this.$annotations[row];\n            if (!rowInfo)\n                rowInfo = this.$annotations[row] = { text: [] };\n            var annoText = annotation.text;\n            annoText = annoText ? lang.escapeHTML(annoText) : annotation.html || \"\";\n            if (rowInfo.text.indexOf(annoText) === -1)\n                rowInfo.text.push(annoText);\n            var type = annotation.type;\n            var className = annotation.className;\n            if (className)\n                rowInfo.className = className;\n            else if (type == \"error\")\n                rowInfo.className = \" ace_error\";\n            else if (type == \"warning\" && rowInfo.className != \" ace_error\")\n                rowInfo.className = \" ace_warning\";\n            else if (type == \"info\" && (!rowInfo.className))\n                rowInfo.className = \" ace_info\";\n        }\n    };\n    this.$updateAnnotations = function (delta) {\n        if (!this.$annotations.length)\n            return;\n        var firstRow = delta.start.row;\n        var len = delta.end.row - firstRow;\n        if (len === 0) {\n        }\n        else if (delta.action == 'remove') {\n            this.$annotations.splice(firstRow, len + 1, null);\n        }\n        else {\n            var args = new Array(len + 1);\n            args.unshift(firstRow, 1);\n            this.$annotations.splice.apply(this.$annotations, args);\n        }\n    };\n    this.update = function (config) {\n        this.config = config;\n        var session = this.session;\n        var firstRow = config.firstRow;\n        var lastRow = Math.min(config.lastRow + config.gutterOffset, // needed to compensate for hor scollbar\n        session.getLength() - 1);\n        this.oldLastRow = lastRow;\n        this.config = config;\n        this.$lines.moveContainer(config);\n        this.$updateCursorRow();\n        var fold = session.getNextFoldLine(firstRow);\n        var foldStart = fold ? fold.start.row : Infinity;\n        var cell = null;\n        var index = -1;\n        var row = firstRow;\n        while (true) {\n            if (row > foldStart) {\n                row = fold.end.row + 1;\n                fold = session.getNextFoldLine(row, fold);\n                foldStart = fold ? fold.start.row : Infinity;\n            }\n            if (row > lastRow) {\n                while (this.$lines.getLength() > index + 1)\n                    this.$lines.pop();\n                break;\n            }\n            cell = this.$lines.get(++index);\n            if (cell) {\n                cell.row = row;\n            }\n            else {\n                cell = this.$lines.createCell(row, config, this.session, onCreateCell);\n                this.$lines.push(cell);\n            }\n            this.$renderCell(cell, config, fold, row);\n            row++;\n        }\n        this._signal(\"afterRender\");\n        this.$updateGutterWidth(config);\n    };\n    this.$updateGutterWidth = function (config) {\n        var session = this.session;\n        var gutterRenderer = session.gutterRenderer || this.$renderer;\n        var firstLineNumber = session.$firstLineNumber;\n        var lastLineText = this.$lines.last() ? this.$lines.last().text : \"\";\n        if (this.$fixedWidth || session.$useWrapMode)\n            lastLineText = session.getLength() + firstLineNumber - 1;\n        var gutterWidth = gutterRenderer\n            ? gutterRenderer.getWidth(session, lastLineText, config)\n            : lastLineText.toString().length * config.characterWidth;\n        var padding = this.$padding || this.$computePadding();\n        gutterWidth += padding.left + padding.right;\n        if (gutterWidth !== this.gutterWidth && !isNaN(gutterWidth)) {\n            this.gutterWidth = gutterWidth;\n            this.element.parentNode.style.width =\n                this.element.style.width = Math.ceil(this.gutterWidth) + \"px\";\n            this._signal(\"changeGutterWidth\", gutterWidth);\n        }\n    };\n    this.$updateCursorRow = function () {\n        if (!this.$highlightGutterLine)\n            return;\n        var position = this.session.selection.getCursor();\n        if (this.$cursorRow === position.row)\n            return;\n        this.$cursorRow = position.row;\n    };\n    this.updateLineHighlight = function () {\n        if (!this.$highlightGutterLine)\n            return;\n        var row = this.session.selection.cursor.row;\n        this.$cursorRow = row;\n        if (this.$cursorCell && this.$cursorCell.row == row)\n            return;\n        if (this.$cursorCell)\n            this.$cursorCell.element.className = this.$cursorCell.element.className.replace(\"ace_gutter-active-line \", \"\");\n        var cells = this.$lines.cells;\n        this.$cursorCell = null;\n        for (var i = 0; i < cells.length; i++) {\n            var cell = cells[i];\n            if (cell.row >= this.$cursorRow) {\n                if (cell.row > this.$cursorRow) {\n                    var fold = this.session.getFoldLine(this.$cursorRow);\n                    if (i > 0 && fold && fold.start.row == cells[i - 1].row)\n                        cell = cells[i - 1];\n                    else\n                        break;\n                }\n                cell.element.className = \"ace_gutter-active-line \" + cell.element.className;\n                this.$cursorCell = cell;\n                break;\n            }\n        }\n    };\n    this.scrollLines = function (config) {\n        var oldConfig = this.config;\n        this.config = config;\n        this.$updateCursorRow();\n        if (this.$lines.pageChanged(oldConfig, config))\n            return this.update(config);\n        this.$lines.moveContainer(config);\n        var lastRow = Math.min(config.lastRow + config.gutterOffset, // needed to compensate for hor scollbar\n        this.session.getLength() - 1);\n        var oldLastRow = this.oldLastRow;\n        this.oldLastRow = lastRow;\n        if (!oldConfig || oldLastRow < config.firstRow)\n            return this.update(config);\n        if (lastRow < oldConfig.firstRow)\n            return this.update(config);\n        if (oldConfig.firstRow < config.firstRow)\n            for (var row = this.session.getFoldedRowCount(oldConfig.firstRow, config.firstRow - 1); row > 0; row--)\n                this.$lines.shift();\n        if (oldLastRow > lastRow)\n            for (var row = this.session.getFoldedRowCount(lastRow + 1, oldLastRow); row > 0; row--)\n                this.$lines.pop();\n        if (config.firstRow < oldConfig.firstRow) {\n            this.$lines.unshift(this.$renderLines(config, config.firstRow, oldConfig.firstRow - 1));\n        }\n        if (lastRow > oldLastRow) {\n            this.$lines.push(this.$renderLines(config, oldLastRow + 1, lastRow));\n        }\n        this.updateLineHighlight();\n        this._signal(\"afterRender\");\n        this.$updateGutterWidth(config);\n    };\n    this.$renderLines = function (config, firstRow, lastRow) {\n        var fragment = [];\n        var row = firstRow;\n        var foldLine = this.session.getNextFoldLine(row);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n        while (true) {\n            if (row > foldStart) {\n                row = foldLine.end.row + 1;\n                foldLine = this.session.getNextFoldLine(row, foldLine);\n                foldStart = foldLine ? foldLine.start.row : Infinity;\n            }\n            if (row > lastRow)\n                break;\n            var cell = this.$lines.createCell(row, config, this.session, onCreateCell);\n            this.$renderCell(cell, config, foldLine, row);\n            fragment.push(cell);\n            row++;\n        }\n        return fragment;\n    };\n    this.$renderCell = function (cell, config, fold, row) {\n        var element = cell.element;\n        var session = this.session;\n        var textNode = element.childNodes[0];\n        var foldWidget = element.childNodes[1];\n        var firstLineNumber = session.$firstLineNumber;\n        var breakpoints = session.$breakpoints;\n        var decorations = session.$decorations;\n        var gutterRenderer = session.gutterRenderer || this.$renderer;\n        var foldWidgets = this.$showFoldWidgets && session.foldWidgets;\n        var foldStart = fold ? fold.start.row : Number.MAX_VALUE;\n        var className = \"ace_gutter-cell \";\n        if (this.$highlightGutterLine) {\n            if (row == this.$cursorRow || (fold && row < this.$cursorRow && row >= foldStart && this.$cursorRow <= fold.end.row)) {\n                className += \"ace_gutter-active-line \";\n                if (this.$cursorCell != cell) {\n                    if (this.$cursorCell)\n                        this.$cursorCell.element.className = this.$cursorCell.element.className.replace(\"ace_gutter-active-line \", \"\");\n                    this.$cursorCell = cell;\n                }\n            }\n        }\n        if (breakpoints[row])\n            className += breakpoints[row];\n        if (decorations[row])\n            className += decorations[row];\n        if (this.$annotations[row])\n            className += this.$annotations[row].className;\n        if (element.className != className)\n            element.className = className;\n        if (foldWidgets) {\n            var c = foldWidgets[row];\n            if (c == null)\n                c = foldWidgets[row] = session.getFoldWidget(row);\n        }\n        if (c) {\n            var className = \"ace_fold-widget ace_\" + c;\n            if (c == \"start\" && row == foldStart && row < fold.end.row)\n                className += \" ace_closed\";\n            else\n                className += \" ace_open\";\n            if (foldWidget.className != className)\n                foldWidget.className = className;\n            var foldHeight = config.lineHeight + \"px\";\n            dom.setStyle(foldWidget.style, \"height\", foldHeight);\n            dom.setStyle(foldWidget.style, \"display\", \"inline-block\");\n        }\n        else {\n            if (foldWidget) {\n                dom.setStyle(foldWidget.style, \"display\", \"none\");\n            }\n        }\n        var text = (gutterRenderer\n            ? gutterRenderer.getText(session, row)\n            : row + firstLineNumber).toString();\n        if (text !== textNode.data) {\n            textNode.data = text;\n        }\n        dom.setStyle(cell.element.style, \"height\", this.$lines.computeLineHeight(row, config, session) + \"px\");\n        dom.setStyle(cell.element.style, \"top\", this.$lines.computeLineTop(row, config, session) + \"px\");\n        cell.text = text;\n        return cell;\n    };\n    this.$fixedWidth = false;\n    this.$highlightGutterLine = true;\n    this.$renderer = \"\";\n    this.setHighlightGutterLine = function (highlightGutterLine) {\n        this.$highlightGutterLine = highlightGutterLine;\n    };\n    this.$showLineNumbers = true;\n    this.$renderer = \"\";\n    this.setShowLineNumbers = function (show) {\n        this.$renderer = !show && {\n            getWidth: function () { return 0; },\n            getText: function () { return \"\"; }\n        };\n    };\n    this.getShowLineNumbers = function () {\n        return this.$showLineNumbers;\n    };\n    this.$showFoldWidgets = true;\n    this.setShowFoldWidgets = function (show) {\n        if (show)\n            dom.addCssClass(this.element, \"ace_folding-enabled\");\n        else\n            dom.removeCssClass(this.element, \"ace_folding-enabled\");\n        this.$showFoldWidgets = show;\n        this.$padding = null;\n    };\n    this.getShowFoldWidgets = function () {\n        return this.$showFoldWidgets;\n    };\n    this.$computePadding = function () {\n        if (!this.element.firstChild)\n            return { left: 0, right: 0 };\n        var style = dom.computedStyle(this.element.firstChild);\n        this.$padding = {};\n        this.$padding.left = (parseInt(style.borderLeftWidth) || 0)\n            + (parseInt(style.paddingLeft) || 0) + 1;\n        this.$padding.right = (parseInt(style.borderRightWidth) || 0)\n            + (parseInt(style.paddingRight) || 0);\n        return this.$padding;\n    };\n    this.getRegion = function (point) {\n        var padding = this.$padding || this.$computePadding();\n        var rect = this.element.getBoundingClientRect();\n        if (point.x < padding.left + rect.left)\n            return \"markers\";\n        if (this.$showFoldWidgets && point.x > rect.right - padding.right)\n            return \"foldWidgets\";\n    };\n}).call(Gutter.prototype);\nfunction onCreateCell(element) {\n    var textNode = document.createTextNode('');\n    element.appendChild(textNode);\n    var foldWidget = dom.createElement(\"span\");\n    element.appendChild(foldWidget);\n    return element;\n}\nexports.Gutter = Gutter;\n\n});\n\nace.define(\"ace/layer/marker\",[\"require\",\"exports\",\"module\",\"ace/range\",\"ace/lib/dom\"], function(require, exports, module){\"use strict\";\nvar Range = require(\"../range\").Range;\nvar dom = require(\"../lib/dom\");\nvar Marker = function (parentEl) {\n    this.element = dom.createElement(\"div\");\n    this.element.className = \"ace_layer ace_marker-layer\";\n    parentEl.appendChild(this.element);\n};\n(function () {\n    this.$padding = 0;\n    this.setPadding = function (padding) {\n        this.$padding = padding;\n    };\n    this.setSession = function (session) {\n        this.session = session;\n    };\n    this.setMarkers = function (markers) {\n        this.markers = markers;\n    };\n    this.elt = function (className, css) {\n        var x = this.i != -1 && this.element.childNodes[this.i];\n        if (!x) {\n            x = document.createElement(\"div\");\n            this.element.appendChild(x);\n            this.i = -1;\n        }\n        else {\n            this.i++;\n        }\n        x.style.cssText = css;\n        x.className = className;\n    };\n    this.update = function (config) {\n        if (!config)\n            return;\n        this.config = config;\n        this.i = 0;\n        var html;\n        for (var key in this.markers) {\n            var marker = this.markers[key];\n            if (!marker.range) {\n                marker.update(html, this, this.session, config);\n                continue;\n            }\n            var range = marker.range.clipRows(config.firstRow, config.lastRow);\n            if (range.isEmpty())\n                continue;\n            range = range.toScreenRange(this.session);\n            if (marker.renderer) {\n                var top = this.$getTop(range.start.row, config);\n                var left = this.$padding + range.start.column * config.characterWidth;\n                marker.renderer(html, range, left, top, config);\n            }\n            else if (marker.type == \"fullLine\") {\n                this.drawFullLineMarker(html, range, marker.clazz, config);\n            }\n            else if (marker.type == \"screenLine\") {\n                this.drawScreenLineMarker(html, range, marker.clazz, config);\n            }\n            else if (range.isMultiLine()) {\n                if (marker.type == \"text\")\n                    this.drawTextMarker(html, range, marker.clazz, config);\n                else\n                    this.drawMultiLineMarker(html, range, marker.clazz, config);\n            }\n            else {\n                this.drawSingleLineMarker(html, range, marker.clazz + \" ace_start\" + \" ace_br15\", config);\n            }\n        }\n        if (this.i != -1) {\n            while (this.i < this.element.childElementCount)\n                this.element.removeChild(this.element.lastChild);\n        }\n    };\n    this.$getTop = function (row, layerConfig) {\n        return (row - layerConfig.firstRowScreen) * layerConfig.lineHeight;\n    };\n    function getBorderClass(tl, tr, br, bl) {\n        return (tl ? 1 : 0) | (tr ? 2 : 0) | (br ? 4 : 0) | (bl ? 8 : 0);\n    }\n    this.drawTextMarker = function (stringBuilder, range, clazz, layerConfig, extraStyle) {\n        var session = this.session;\n        var start = range.start.row;\n        var end = range.end.row;\n        var row = start;\n        var prev = 0;\n        var curr = 0;\n        var next = session.getScreenLastRowColumn(row);\n        var lineRange = new Range(row, range.start.column, row, curr);\n        for (; row <= end; row++) {\n            lineRange.start.row = lineRange.end.row = row;\n            lineRange.start.column = row == start ? range.start.column : session.getRowWrapIndent(row);\n            lineRange.end.column = next;\n            prev = curr;\n            curr = next;\n            next = row + 1 < end ? session.getScreenLastRowColumn(row + 1) : row == end ? 0 : range.end.column;\n            this.drawSingleLineMarker(stringBuilder, lineRange, clazz + (row == start ? \" ace_start\" : \"\") + \" ace_br\"\n                + getBorderClass(row == start || row == start + 1 && range.start.column, prev < curr, curr > next, row == end), layerConfig, row == end ? 0 : 1, extraStyle);\n        }\n    };\n    this.drawMultiLineMarker = function (stringBuilder, range, clazz, config, extraStyle) {\n        var padding = this.$padding;\n        var height = config.lineHeight;\n        var top = this.$getTop(range.start.row, config);\n        var left = padding + range.start.column * config.characterWidth;\n        extraStyle = extraStyle || \"\";\n        if (this.session.$bidiHandler.isBidiRow(range.start.row)) {\n            var range1 = range.clone();\n            range1.end.row = range1.start.row;\n            range1.end.column = this.session.getLine(range1.start.row).length;\n            this.drawBidiSingleLineMarker(stringBuilder, range1, clazz + \" ace_br1 ace_start\", config, null, extraStyle);\n        }\n        else {\n            this.elt(clazz + \" ace_br1 ace_start\", \"height:\" + height + \"px;\" + \"right:0;\" + \"top:\" + top + \"px;left:\" + left + \"px;\" + (extraStyle || \"\"));\n        }\n        if (this.session.$bidiHandler.isBidiRow(range.end.row)) {\n            var range1 = range.clone();\n            range1.start.row = range1.end.row;\n            range1.start.column = 0;\n            this.drawBidiSingleLineMarker(stringBuilder, range1, clazz + \" ace_br12\", config, null, extraStyle);\n        }\n        else {\n            top = this.$getTop(range.end.row, config);\n            var width = range.end.column * config.characterWidth;\n            this.elt(clazz + \" ace_br12\", \"height:\" + height + \"px;\" +\n                \"width:\" + width + \"px;\" +\n                \"top:\" + top + \"px;\" +\n                \"left:\" + padding + \"px;\" + (extraStyle || \"\"));\n        }\n        height = (range.end.row - range.start.row - 1) * config.lineHeight;\n        if (height <= 0)\n            return;\n        top = this.$getTop(range.start.row + 1, config);\n        var radiusClass = (range.start.column ? 1 : 0) | (range.end.column ? 0 : 8);\n        this.elt(clazz + (radiusClass ? \" ace_br\" + radiusClass : \"\"), \"height:\" + height + \"px;\" +\n            \"right:0;\" +\n            \"top:\" + top + \"px;\" +\n            \"left:\" + padding + \"px;\" + (extraStyle || \"\"));\n    };\n    this.drawSingleLineMarker = function (stringBuilder, range, clazz, config, extraLength, extraStyle) {\n        if (this.session.$bidiHandler.isBidiRow(range.start.row))\n            return this.drawBidiSingleLineMarker(stringBuilder, range, clazz, config, extraLength, extraStyle);\n        var height = config.lineHeight;\n        var width = (range.end.column + (extraLength || 0) - range.start.column) * config.characterWidth;\n        var top = this.$getTop(range.start.row, config);\n        var left = this.$padding + range.start.column * config.characterWidth;\n        this.elt(clazz, \"height:\" + height + \"px;\" +\n            \"width:\" + width + \"px;\" +\n            \"top:\" + top + \"px;\" +\n            \"left:\" + left + \"px;\" + (extraStyle || \"\"));\n    };\n    this.drawBidiSingleLineMarker = function (stringBuilder, range, clazz, config, extraLength, extraStyle) {\n        var height = config.lineHeight, top = this.$getTop(range.start.row, config), padding = this.$padding;\n        var selections = this.session.$bidiHandler.getSelections(range.start.column, range.end.column);\n        selections.forEach(function (selection) {\n            this.elt(clazz, \"height:\" + height + \"px;\" +\n                \"width:\" + (selection.width + (extraLength || 0)) + \"px;\" +\n                \"top:\" + top + \"px;\" +\n                \"left:\" + (padding + selection.left) + \"px;\" + (extraStyle || \"\"));\n        }, this);\n    };\n    this.drawFullLineMarker = function (stringBuilder, range, clazz, config, extraStyle) {\n        var top = this.$getTop(range.start.row, config);\n        var height = config.lineHeight;\n        if (range.start.row != range.end.row)\n            height += this.$getTop(range.end.row, config) - top;\n        this.elt(clazz, \"height:\" + height + \"px;\" +\n            \"top:\" + top + \"px;\" +\n            \"left:0;right:0;\" + (extraStyle || \"\"));\n    };\n    this.drawScreenLineMarker = function (stringBuilder, range, clazz, config, extraStyle) {\n        var top = this.$getTop(range.start.row, config);\n        var height = config.lineHeight;\n        this.elt(clazz, \"height:\" + height + \"px;\" +\n            \"top:\" + top + \"px;\" +\n            \"left:0;right:0;\" + (extraStyle || \"\"));\n    };\n}).call(Marker.prototype);\nexports.Marker = Marker;\n\n});\n\nace.define(\"ace/layer/text\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/layer/lines\",\"ace/lib/event_emitter\"], function(require, exports, module){\"use strict\";\nvar oop = require(\"../lib/oop\");\nvar dom = require(\"../lib/dom\");\nvar lang = require(\"../lib/lang\");\nvar Lines = require(\"./lines\").Lines;\nvar EventEmitter = require(\"../lib/event_emitter\").EventEmitter;\nvar Text = function (parentEl) {\n    this.dom = dom;\n    this.element = this.dom.createElement(\"div\");\n    this.element.className = \"ace_layer ace_text-layer\";\n    parentEl.appendChild(this.element);\n    this.$updateEolChar = this.$updateEolChar.bind(this);\n    this.$lines = new Lines(this.element);\n};\n(function () {\n    oop.implement(this, EventEmitter);\n    this.EOF_CHAR = \"\\xB6\";\n    this.EOL_CHAR_LF = \"\\xAC\";\n    this.EOL_CHAR_CRLF = \"\\xa4\";\n    this.EOL_CHAR = this.EOL_CHAR_LF;\n    this.TAB_CHAR = \"\\u2014\"; //\"\\u21E5\";\n    this.SPACE_CHAR = \"\\xB7\";\n    this.$padding = 0;\n    this.MAX_LINE_LENGTH = 10000;\n    this.MAX_CHUNK_LENGTH = 250;\n    this.$updateEolChar = function () {\n        var doc = this.session.doc;\n        var unixMode = doc.getNewLineCharacter() == \"\\n\" && doc.getNewLineMode() != \"windows\";\n        var EOL_CHAR = unixMode ? this.EOL_CHAR_LF : this.EOL_CHAR_CRLF;\n        if (this.EOL_CHAR != EOL_CHAR) {\n            this.EOL_CHAR = EOL_CHAR;\n            return true;\n        }\n    };\n    this.setPadding = function (padding) {\n        this.$padding = padding;\n        this.element.style.margin = \"0 \" + padding + \"px\";\n    };\n    this.getLineHeight = function () {\n        return this.$fontMetrics.$characterSize.height || 0;\n    };\n    this.getCharacterWidth = function () {\n        return this.$fontMetrics.$characterSize.width || 0;\n    };\n    this.$setFontMetrics = function (measure) {\n        this.$fontMetrics = measure;\n        this.$fontMetrics.on(\"changeCharacterSize\", function (e) {\n            this._signal(\"changeCharacterSize\", e);\n        }.bind(this));\n        this.$pollSizeChanges();\n    };\n    this.checkForSizeChanges = function () {\n        this.$fontMetrics.checkForSizeChanges();\n    };\n    this.$pollSizeChanges = function () {\n        return this.$pollSizeChangesTimer = this.$fontMetrics.$pollSizeChanges();\n    };\n    this.setSession = function (session) {\n        this.session = session;\n        if (session)\n            this.$computeTabString();\n    };\n    this.showInvisibles = false;\n    this.showSpaces = false;\n    this.showTabs = false;\n    this.showEOL = false;\n    this.setShowInvisibles = function (showInvisibles) {\n        if (this.showInvisibles == showInvisibles)\n            return false;\n        this.showInvisibles = showInvisibles;\n        if (typeof showInvisibles == \"string\") {\n            this.showSpaces = /tab/i.test(showInvisibles);\n            this.showTabs = /space/i.test(showInvisibles);\n            this.showEOL = /eol/i.test(showInvisibles);\n        }\n        else {\n            this.showSpaces = this.showTabs = this.showEOL = showInvisibles;\n        }\n        this.$computeTabString();\n        return true;\n    };\n    this.displayIndentGuides = true;\n    this.setDisplayIndentGuides = function (display) {\n        if (this.displayIndentGuides == display)\n            return false;\n        this.displayIndentGuides = display;\n        this.$computeTabString();\n        return true;\n    };\n    this.$highlightIndentGuides = true;\n    this.setHighlightIndentGuides = function (highlight) {\n        if (this.$highlightIndentGuides === highlight)\n            return false;\n        this.$highlightIndentGuides = highlight;\n        return highlight;\n    };\n    this.$tabStrings = [];\n    this.onChangeTabSize =\n        this.$computeTabString = function () {\n            var tabSize = this.session.getTabSize();\n            this.tabSize = tabSize;\n            var tabStr = this.$tabStrings = [0];\n            for (var i = 1; i < tabSize + 1; i++) {\n                if (this.showTabs) {\n                    var span = this.dom.createElement(\"span\");\n                    span.className = \"ace_invisible ace_invisible_tab\";\n                    span.textContent = lang.stringRepeat(this.TAB_CHAR, i);\n                    tabStr.push(span);\n                }\n                else {\n                    tabStr.push(this.dom.createTextNode(lang.stringRepeat(\" \", i), this.element));\n                }\n            }\n            if (this.displayIndentGuides) {\n                this.$indentGuideRe = /\\s\\S| \\t|\\t |\\s$/;\n                var className = \"ace_indent-guide\";\n                var spaceClass = this.showSpaces ? \" ace_invisible ace_invisible_space\" : \"\";\n                var spaceContent = this.showSpaces\n                    ? lang.stringRepeat(this.SPACE_CHAR, this.tabSize)\n                    : lang.stringRepeat(\" \", this.tabSize);\n                var tabClass = this.showTabs ? \" ace_invisible ace_invisible_tab\" : \"\";\n                var tabContent = this.showTabs\n                    ? lang.stringRepeat(this.TAB_CHAR, this.tabSize)\n                    : spaceContent;\n                var span = this.dom.createElement(\"span\");\n                span.className = className + spaceClass;\n                span.textContent = spaceContent;\n                this.$tabStrings[\" \"] = span;\n                var span = this.dom.createElement(\"span\");\n                span.className = className + tabClass;\n                span.textContent = tabContent;\n                this.$tabStrings[\"\\t\"] = span;\n            }\n        };\n    this.updateLines = function (config, firstRow, lastRow) {\n        if (this.config.lastRow != config.lastRow ||\n            this.config.firstRow != config.firstRow) {\n            return this.update(config);\n        }\n        this.config = config;\n        var first = Math.max(firstRow, config.firstRow);\n        var last = Math.min(lastRow, config.lastRow);\n        var lineElements = this.element.childNodes;\n        var lineElementsIdx = 0;\n        for (var row = config.firstRow; row < first; row++) {\n            var foldLine = this.session.getFoldLine(row);\n            if (foldLine) {\n                if (foldLine.containsRow(first)) {\n                    first = foldLine.start.row;\n                    break;\n                }\n                else {\n                    row = foldLine.end.row;\n                }\n            }\n            lineElementsIdx++;\n        }\n        var heightChanged = false;\n        var row = first;\n        var foldLine = this.session.getNextFoldLine(row);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n        while (true) {\n            if (row > foldStart) {\n                row = foldLine.end.row + 1;\n                foldLine = this.session.getNextFoldLine(row, foldLine);\n                foldStart = foldLine ? foldLine.start.row : Infinity;\n            }\n            if (row > last)\n                break;\n            var lineElement = lineElements[lineElementsIdx++];\n            if (lineElement) {\n                this.dom.removeChildren(lineElement);\n                this.$renderLine(lineElement, row, row == foldStart ? foldLine : false);\n                if (heightChanged)\n                    lineElement.style.top = this.$lines.computeLineTop(row, config, this.session) + \"px\";\n                var height = (config.lineHeight * this.session.getRowLength(row)) + \"px\";\n                if (lineElement.style.height != height) {\n                    heightChanged = true;\n                    lineElement.style.height = height;\n                }\n            }\n            row++;\n        }\n        if (heightChanged) {\n            while (lineElementsIdx < this.$lines.cells.length) {\n                var cell = this.$lines.cells[lineElementsIdx++];\n                cell.element.style.top = this.$lines.computeLineTop(cell.row, config, this.session) + \"px\";\n            }\n        }\n    };\n    this.scrollLines = function (config) {\n        var oldConfig = this.config;\n        this.config = config;\n        if (this.$lines.pageChanged(oldConfig, config))\n            return this.update(config);\n        this.$lines.moveContainer(config);\n        var lastRow = config.lastRow;\n        var oldLastRow = oldConfig ? oldConfig.lastRow : -1;\n        if (!oldConfig || oldLastRow < config.firstRow)\n            return this.update(config);\n        if (lastRow < oldConfig.firstRow)\n            return this.update(config);\n        if (!oldConfig || oldConfig.lastRow < config.firstRow)\n            return this.update(config);\n        if (config.lastRow < oldConfig.firstRow)\n            return this.update(config);\n        if (oldConfig.firstRow < config.firstRow)\n            for (var row = this.session.getFoldedRowCount(oldConfig.firstRow, config.firstRow - 1); row > 0; row--)\n                this.$lines.shift();\n        if (oldConfig.lastRow > config.lastRow)\n            for (var row = this.session.getFoldedRowCount(config.lastRow + 1, oldConfig.lastRow); row > 0; row--)\n                this.$lines.pop();\n        if (config.firstRow < oldConfig.firstRow) {\n            this.$lines.unshift(this.$renderLinesFragment(config, config.firstRow, oldConfig.firstRow - 1));\n        }\n        if (config.lastRow > oldConfig.lastRow) {\n            this.$lines.push(this.$renderLinesFragment(config, oldConfig.lastRow + 1, config.lastRow));\n        }\n        this.$highlightIndentGuide();\n    };\n    this.$renderLinesFragment = function (config, firstRow, lastRow) {\n        var fragment = [];\n        var row = firstRow;\n        var foldLine = this.session.getNextFoldLine(row);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n        while (true) {\n            if (row > foldStart) {\n                row = foldLine.end.row + 1;\n                foldLine = this.session.getNextFoldLine(row, foldLine);\n                foldStart = foldLine ? foldLine.start.row : Infinity;\n            }\n            if (row > lastRow)\n                break;\n            var line = this.$lines.createCell(row, config, this.session);\n            var lineEl = line.element;\n            this.dom.removeChildren(lineEl);\n            dom.setStyle(lineEl.style, \"height\", this.$lines.computeLineHeight(row, config, this.session) + \"px\");\n            dom.setStyle(lineEl.style, \"top\", this.$lines.computeLineTop(row, config, this.session) + \"px\");\n            this.$renderLine(lineEl, row, row == foldStart ? foldLine : false);\n            if (this.$useLineGroups()) {\n                lineEl.className = \"ace_line_group\";\n            }\n            else {\n                lineEl.className = \"ace_line\";\n                lineEl.setAttribute(\"role\", \"option\");\n            }\n            fragment.push(line);\n            row++;\n        }\n        return fragment;\n    };\n    this.update = function (config) {\n        this.$lines.moveContainer(config);\n        this.config = config;\n        var firstRow = config.firstRow;\n        var lastRow = config.lastRow;\n        var lines = this.$lines;\n        while (lines.getLength())\n            lines.pop();\n        lines.push(this.$renderLinesFragment(config, firstRow, lastRow));\n    };\n    this.$textToken = {\n        \"text\": true,\n        \"rparen\": true,\n        \"lparen\": true\n    };\n    this.$renderTokenInChunks = function (parent, screenColumn, token, value) {\n        var newScreenColumn;\n        for (var i = 0; i < value.length; i += this.MAX_CHUNK_LENGTH) {\n            var valueChunk = value.substring(i, i + this.MAX_CHUNK_LENGTH);\n            var tokenChunk = {\n                type: token.type,\n                value: valueChunk\n            };\n            newScreenColumn = this.$renderToken(parent, screenColumn + i, tokenChunk, valueChunk);\n        }\n        return newScreenColumn;\n    };\n    this.$renderToken = function (parent, screenColumn, token, value) {\n        var self = this;\n        var re = /(\\t)|( +)|([\\x00-\\x1f\\x80-\\xa0\\xad\\u1680\\u180E\\u2000-\\u200f\\u2028\\u2029\\u202F\\u205F\\uFEFF\\uFFF9-\\uFFFC\\u2066\\u2067\\u2068\\u202A\\u202B\\u202D\\u202E\\u202C\\u2069]+)|(\\u3000)|([\\u1100-\\u115F\\u11A3-\\u11A7\\u11FA-\\u11FF\\u2329-\\u232A\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u2FF0-\\u2FFB\\u3001-\\u303E\\u3041-\\u3096\\u3099-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u3190-\\u31BA\\u31C0-\\u31E3\\u31F0-\\u321E\\u3220-\\u3247\\u3250-\\u32FE\\u3300-\\u4DBF\\u4E00-\\uA48C\\uA490-\\uA4C6\\uA960-\\uA97C\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFAFF\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE66\\uFE68-\\uFE6B\\uFF01-\\uFF60\\uFFE0-\\uFFE6]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF])/g;\n        var valueFragment = this.dom.createFragment(this.element);\n        var m;\n        var i = 0;\n        while (m = re.exec(value)) {\n            var tab = m[1];\n            var simpleSpace = m[2];\n            var controlCharacter = m[3];\n            var cjkSpace = m[4];\n            var cjk = m[5];\n            if (!self.showSpaces && simpleSpace)\n                continue;\n            var before = i != m.index ? value.slice(i, m.index) : \"\";\n            i = m.index + m[0].length;\n            if (before) {\n                valueFragment.appendChild(this.dom.createTextNode(before, this.element));\n            }\n            if (tab) {\n                var tabSize = self.session.getScreenTabSize(screenColumn + m.index);\n                valueFragment.appendChild(self.$tabStrings[tabSize].cloneNode(true));\n                screenColumn += tabSize - 1;\n            }\n            else if (simpleSpace) {\n                if (self.showSpaces) {\n                    var span = this.dom.createElement(\"span\");\n                    span.className = \"ace_invisible ace_invisible_space\";\n                    span.textContent = lang.stringRepeat(self.SPACE_CHAR, simpleSpace.length);\n                    valueFragment.appendChild(span);\n                }\n                else {\n                    valueFragment.appendChild(this.com.createTextNode(simpleSpace, this.element));\n                }\n            }\n            else if (controlCharacter) {\n                var span = this.dom.createElement(\"span\");\n                span.className = \"ace_invisible ace_invisible_space ace_invalid\";\n                span.textContent = lang.stringRepeat(self.SPACE_CHAR, controlCharacter.length);\n                valueFragment.appendChild(span);\n            }\n            else if (cjkSpace) {\n                screenColumn += 1;\n                var span = this.dom.createElement(\"span\");\n                span.style.width = (self.config.characterWidth * 2) + \"px\";\n                span.className = self.showSpaces ? \"ace_cjk ace_invisible ace_invisible_space\" : \"ace_cjk\";\n                span.textContent = self.showSpaces ? self.SPACE_CHAR : cjkSpace;\n                valueFragment.appendChild(span);\n            }\n            else if (cjk) {\n                screenColumn += 1;\n                var span = this.dom.createElement(\"span\");\n                span.style.width = (self.config.characterWidth * 2) + \"px\";\n                span.className = \"ace_cjk\";\n                span.textContent = cjk;\n                valueFragment.appendChild(span);\n            }\n        }\n        valueFragment.appendChild(this.dom.createTextNode(i ? value.slice(i) : value, this.element));\n        var span = this.dom.createElement(\"span\");\n        if (!this.$textToken[token.type]) {\n            var classes = \"ace_\" + token.type.replace(/\\./g, \" ace_\");\n            if (token.type == \"fold\")\n                span.style.width = (token.value.length * this.config.characterWidth) + \"px\";\n            span.className = classes;\n        }\n        span.appendChild(valueFragment);\n        parent.appendChild(span);\n        return screenColumn + value.length;\n    };\n    this.renderIndentGuide = function (parent, value, max) {\n        var cols = value.search(this.$indentGuideRe);\n        if (cols <= 0 || cols >= max)\n            return value;\n        if (value[0] == \" \") {\n            cols -= cols % this.tabSize;\n            var count = cols / this.tabSize;\n            for (var i = 0; i < count; i++) {\n                parent.appendChild(this.$tabStrings[\" \"].cloneNode(true));\n            }\n            this.$highlightIndentGuide();\n            return value.substr(cols);\n        }\n        else if (value[0] == \"\\t\") {\n            for (var i = 0; i < cols; i++) {\n                parent.appendChild(this.$tabStrings[\"\\t\"].cloneNode(true));\n            }\n            this.$highlightIndentGuide();\n            return value.substr(cols);\n        }\n        this.$highlightIndentGuide();\n        return value;\n    };\n    this.$highlightIndentGuide = function () {\n        if (!this.$highlightIndentGuides || !this.displayIndentGuides)\n            return;\n        this.$highlightIndentGuideMarker = {\n            indentLevel: undefined,\n            start: undefined,\n            end: undefined,\n            dir: undefined\n        };\n        var lines = this.session.doc.$lines;\n        if (!lines)\n            return;\n        var cursor = this.session.selection.getCursor();\n        var initialIndent = /^\\s*/.exec(this.session.doc.getLine(cursor.row))[0].length;\n        var elementIndentLevel = Math.floor(initialIndent / this.tabSize);\n        this.$highlightIndentGuideMarker = {\n            indentLevel: elementIndentLevel,\n            start: cursor.row\n        };\n        var bracketHighlight = this.session.$bracketHighlight;\n        if (bracketHighlight) {\n            var ranges = this.session.$bracketHighlight.ranges;\n            for (var i = 0; i < ranges.length; i++) {\n                if (cursor.row !== ranges[i].start.row) {\n                    this.$highlightIndentGuideMarker.end = ranges[i].start.row;\n                    if (cursor.row > ranges[i].start.row) {\n                        this.$highlightIndentGuideMarker.dir = -1;\n                    }\n                    else {\n                        this.$highlightIndentGuideMarker.dir = 1;\n                    }\n                    break;\n                }\n            }\n        }\n        if (!this.$highlightIndentGuideMarker.end) {\n            if (lines[cursor.row] !== '' && cursor.column === lines[cursor.row].length) {\n                this.$highlightIndentGuideMarker.dir = 1;\n                for (var i = cursor.row + 1; i < lines.length; i++) {\n                    var line = lines[i];\n                    var currentIndent = /^\\s*/.exec(line)[0].length;\n                    if (line !== '') {\n                        this.$highlightIndentGuideMarker.end = i;\n                        if (currentIndent <= initialIndent)\n                            break;\n                    }\n                }\n            }\n        }\n        this.$renderHighlightIndentGuide();\n    };\n    this.$clearActiveIndentGuide = function () {\n        var cells = this.$lines.cells;\n        for (var i = 0; i < cells.length; i++) {\n            var cell = cells[i];\n            var childNodes = cell.element.childNodes;\n            if (childNodes.length > 0) {\n                for (var j = 0; j < childNodes.length; j++) {\n                    if (childNodes[j].classList && childNodes[j].classList.contains(\"ace_indent-guide-active\")) {\n                        childNodes[j].classList.remove(\"ace_indent-guide-active\");\n                        break;\n                    }\n                }\n            }\n        }\n    };\n    this.$setIndentGuideActive = function (cell, indentLevel) {\n        var line = this.session.doc.getLine(cell.row);\n        if (line !== \"\") {\n            var childNodes = cell.element.childNodes;\n            if (childNodes) {\n                var node = childNodes[indentLevel - 1];\n                if (node && node.classList && node.classList.contains(\"ace_indent-guide\"))\n                    node.classList.add(\"ace_indent-guide-active\");\n            }\n        }\n    };\n    this.$renderHighlightIndentGuide = function () {\n        if (!this.$lines)\n            return;\n        var cells = this.$lines.cells;\n        this.$clearActiveIndentGuide();\n        var indentLevel = this.$highlightIndentGuideMarker.indentLevel;\n        if (indentLevel !== 0) {\n            if (this.$highlightIndentGuideMarker.dir === 1) {\n                for (var i = 0; i < cells.length; i++) {\n                    var cell = cells[i];\n                    if (this.$highlightIndentGuideMarker.end && cell.row >= this.$highlightIndentGuideMarker.start\n                        + 1) {\n                        if (cell.row >= this.$highlightIndentGuideMarker.end)\n                            break;\n                        this.$setIndentGuideActive(cell, indentLevel);\n                    }\n                }\n            }\n            else {\n                for (var i = cells.length - 1; i >= 0; i--) {\n                    var cell = cells[i];\n                    if (this.$highlightIndentGuideMarker.end && cell.row < this.$highlightIndentGuideMarker.start) {\n                        if (cell.row <= this.$highlightIndentGuideMarker.end)\n                            break;\n                        this.$setIndentGuideActive(cell, indentLevel);\n                    }\n                }\n            }\n        }\n    };\n    this.$createLineElement = function (parent) {\n        var lineEl = this.dom.createElement(\"div\");\n        lineEl.className = \"ace_line\";\n        lineEl.style.height = this.config.lineHeight + \"px\";\n        return lineEl;\n    };\n    this.$renderWrappedLine = function (parent, tokens, splits) {\n        var chars = 0;\n        var split = 0;\n        var splitChars = splits[0];\n        var screenColumn = 0;\n        var lineEl = this.$createLineElement();\n        parent.appendChild(lineEl);\n        for (var i = 0; i < tokens.length; i++) {\n            var token = tokens[i];\n            var value = token.value;\n            if (i == 0 && this.displayIndentGuides) {\n                chars = value.length;\n                value = this.renderIndentGuide(lineEl, value, splitChars);\n                if (!value)\n                    continue;\n                chars -= value.length;\n            }\n            if (chars + value.length < splitChars) {\n                screenColumn = this.$renderTokenInChunks(lineEl, screenColumn, token, value);\n                chars += value.length;\n            }\n            else {\n                while (chars + value.length >= splitChars) {\n                    screenColumn = this.$renderTokenInChunks(lineEl, screenColumn, token, value.substring(0, splitChars - chars));\n                    value = value.substring(splitChars - chars);\n                    chars = splitChars;\n                    lineEl = this.$createLineElement();\n                    parent.appendChild(lineEl);\n                    lineEl.appendChild(this.dom.createTextNode(lang.stringRepeat(\"\\xa0\", splits.indent), this.element));\n                    split++;\n                    screenColumn = 0;\n                    splitChars = splits[split] || Number.MAX_VALUE;\n                }\n                if (value.length != 0) {\n                    chars += value.length;\n                    screenColumn = this.$renderTokenInChunks(lineEl, screenColumn, token, value);\n                }\n            }\n        }\n        if (splits[splits.length - 1] > this.MAX_LINE_LENGTH)\n            this.$renderOverflowMessage(lineEl, screenColumn, null, \"\", true);\n    };\n    this.$renderSimpleLine = function (parent, tokens) {\n        var screenColumn = 0;\n        for (var i = 0; i < tokens.length; i++) {\n            var token = tokens[i];\n            var value = token.value;\n            if (i == 0 && this.displayIndentGuides) {\n                value = this.renderIndentGuide(parent, value);\n                if (!value)\n                    continue;\n            }\n            if (screenColumn + value.length > this.MAX_LINE_LENGTH) {\n                this.$renderOverflowMessage(parent, screenColumn, token, value);\n                return;\n            }\n            screenColumn = this.$renderTokenInChunks(parent, screenColumn, token, value);\n        }\n    };\n    this.$renderOverflowMessage = function (parent, screenColumn, token, value, hide) {\n        if (token) {\n            this.$renderTokenInChunks(parent, screenColumn, token, value.slice(0, this.MAX_LINE_LENGTH - screenColumn));\n        }\n        var overflowEl = this.dom.createElement(\"span\");\n        overflowEl.className = \"ace_inline_button ace_keyword ace_toggle_wrap\";\n        overflowEl.textContent = hide ? \"<hide>\" : \"<click to see more...>\";\n        parent.appendChild(overflowEl);\n    };\n    this.$renderLine = function (parent, row, foldLine) {\n        if (!foldLine && foldLine != false)\n            foldLine = this.session.getFoldLine(row);\n        if (foldLine)\n            var tokens = this.$getFoldLineTokens(row, foldLine);\n        else\n            var tokens = this.session.getTokens(row);\n        var lastLineEl = parent;\n        if (tokens.length) {\n            var splits = this.session.getRowSplitData(row);\n            if (splits && splits.length) {\n                this.$renderWrappedLine(parent, tokens, splits);\n                var lastLineEl = parent.lastChild;\n            }\n            else {\n                var lastLineEl = parent;\n                if (this.$useLineGroups()) {\n                    lastLineEl = this.$createLineElement();\n                    parent.appendChild(lastLineEl);\n                }\n                this.$renderSimpleLine(lastLineEl, tokens);\n            }\n        }\n        else if (this.$useLineGroups()) {\n            lastLineEl = this.$createLineElement();\n            parent.appendChild(lastLineEl);\n        }\n        if (this.showEOL && lastLineEl) {\n            if (foldLine)\n                row = foldLine.end.row;\n            var invisibleEl = this.dom.createElement(\"span\");\n            invisibleEl.className = \"ace_invisible ace_invisible_eol\";\n            invisibleEl.textContent = row == this.session.getLength() - 1 ? this.EOF_CHAR : this.EOL_CHAR;\n            lastLineEl.appendChild(invisibleEl);\n        }\n    };\n    this.$getFoldLineTokens = function (row, foldLine) {\n        var session = this.session;\n        var renderTokens = [];\n        function addTokens(tokens, from, to) {\n            var idx = 0, col = 0;\n            while ((col + tokens[idx].value.length) < from) {\n                col += tokens[idx].value.length;\n                idx++;\n                if (idx == tokens.length)\n                    return;\n            }\n            if (col != from) {\n                var value = tokens[idx].value.substring(from - col);\n                if (value.length > (to - from))\n                    value = value.substring(0, to - from);\n                renderTokens.push({\n                    type: tokens[idx].type,\n                    value: value\n                });\n                col = from + value.length;\n                idx += 1;\n            }\n            while (col < to && idx < tokens.length) {\n                var value = tokens[idx].value;\n                if (value.length + col > to) {\n                    renderTokens.push({\n                        type: tokens[idx].type,\n                        value: value.substring(0, to - col)\n                    });\n                }\n                else\n                    renderTokens.push(tokens[idx]);\n                col += value.length;\n                idx += 1;\n            }\n        }\n        var tokens = session.getTokens(row);\n        foldLine.walk(function (placeholder, row, column, lastColumn, isNewRow) {\n            if (placeholder != null) {\n                renderTokens.push({\n                    type: \"fold\",\n                    value: placeholder\n                });\n            }\n            else {\n                if (isNewRow)\n                    tokens = session.getTokens(row);\n                if (tokens.length)\n                    addTokens(tokens, lastColumn, column);\n            }\n        }, foldLine.end.row, this.session.getLine(foldLine.end.row).length);\n        return renderTokens;\n    };\n    this.$useLineGroups = function () {\n        return this.session.getUseWrapMode();\n    };\n    this.destroy = function () { };\n}).call(Text.prototype);\nexports.Text = Text;\n\n});\n\nace.define(\"ace/layer/cursor\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(require, exports, module){\"use strict\";\nvar dom = require(\"../lib/dom\");\nvar Cursor = function (parentEl) {\n    this.element = dom.createElement(\"div\");\n    this.element.className = \"ace_layer ace_cursor-layer\";\n    parentEl.appendChild(this.element);\n    this.isVisible = false;\n    this.isBlinking = true;\n    this.blinkInterval = 1000;\n    this.smoothBlinking = false;\n    this.cursors = [];\n    this.cursor = this.addCursor();\n    dom.addCssClass(this.element, \"ace_hidden-cursors\");\n    this.$updateCursors = this.$updateOpacity.bind(this);\n};\n(function () {\n    this.$updateOpacity = function (val) {\n        var cursors = this.cursors;\n        for (var i = cursors.length; i--;)\n            dom.setStyle(cursors[i].style, \"opacity\", val ? \"\" : \"0\");\n    };\n    this.$startCssAnimation = function () {\n        var cursors = this.cursors;\n        for (var i = cursors.length; i--;)\n            cursors[i].style.animationDuration = this.blinkInterval + \"ms\";\n        this.$isAnimating = true;\n        setTimeout(function () {\n            if (this.$isAnimating) {\n                dom.addCssClass(this.element, \"ace_animate-blinking\");\n            }\n        }.bind(this));\n    };\n    this.$stopCssAnimation = function () {\n        this.$isAnimating = false;\n        dom.removeCssClass(this.element, \"ace_animate-blinking\");\n    };\n    this.$padding = 0;\n    this.setPadding = function (padding) {\n        this.$padding = padding;\n    };\n    this.setSession = function (session) {\n        this.session = session;\n    };\n    this.setBlinking = function (blinking) {\n        if (blinking != this.isBlinking) {\n            this.isBlinking = blinking;\n            this.restartTimer();\n        }\n    };\n    this.setBlinkInterval = function (blinkInterval) {\n        if (blinkInterval != this.blinkInterval) {\n            this.blinkInterval = blinkInterval;\n            this.restartTimer();\n        }\n    };\n    this.setSmoothBlinking = function (smoothBlinking) {\n        if (smoothBlinking != this.smoothBlinking) {\n            this.smoothBlinking = smoothBlinking;\n            dom.setCssClass(this.element, \"ace_smooth-blinking\", smoothBlinking);\n            this.$updateCursors(true);\n            this.restartTimer();\n        }\n    };\n    this.addCursor = function () {\n        var el = dom.createElement(\"div\");\n        el.className = \"ace_cursor\";\n        this.element.appendChild(el);\n        this.cursors.push(el);\n        return el;\n    };\n    this.removeCursor = function () {\n        if (this.cursors.length > 1) {\n            var el = this.cursors.pop();\n            el.parentNode.removeChild(el);\n            return el;\n        }\n    };\n    this.hideCursor = function () {\n        this.isVisible = false;\n        dom.addCssClass(this.element, \"ace_hidden-cursors\");\n        this.restartTimer();\n    };\n    this.showCursor = function () {\n        this.isVisible = true;\n        dom.removeCssClass(this.element, \"ace_hidden-cursors\");\n        this.restartTimer();\n    };\n    this.restartTimer = function () {\n        var update = this.$updateCursors;\n        clearInterval(this.intervalId);\n        clearTimeout(this.timeoutId);\n        this.$stopCssAnimation();\n        if (this.smoothBlinking) {\n            this.$isSmoothBlinking = false;\n            dom.removeCssClass(this.element, \"ace_smooth-blinking\");\n        }\n        update(true);\n        if (!this.isBlinking || !this.blinkInterval || !this.isVisible) {\n            this.$stopCssAnimation();\n            return;\n        }\n        if (this.smoothBlinking) {\n            this.$isSmoothBlinking = true;\n            setTimeout(function () {\n                if (this.$isSmoothBlinking) {\n                    dom.addCssClass(this.element, \"ace_smooth-blinking\");\n                }\n            }.bind(this));\n        }\n        if (dom.HAS_CSS_ANIMATION) {\n            this.$startCssAnimation();\n        }\n        else {\n            var blink = function () {\n                this.timeoutId = setTimeout(function () {\n                    update(false);\n                }, 0.6 * this.blinkInterval);\n            }.bind(this);\n            this.intervalId = setInterval(function () {\n                update(true);\n                blink();\n            }, this.blinkInterval);\n            blink();\n        }\n    };\n    this.getPixelPosition = function (position, onScreen) {\n        if (!this.config || !this.session)\n            return { left: 0, top: 0 };\n        if (!position)\n            position = this.session.selection.getCursor();\n        var pos = this.session.documentToScreenPosition(position);\n        var cursorLeft = this.$padding + (this.session.$bidiHandler.isBidiRow(pos.row, position.row)\n            ? this.session.$bidiHandler.getPosLeft(pos.column)\n            : pos.column * this.config.characterWidth);\n        var cursorTop = (pos.row - (onScreen ? this.config.firstRowScreen : 0)) *\n            this.config.lineHeight;\n        return { left: cursorLeft, top: cursorTop };\n    };\n    this.isCursorInView = function (pixelPos, config) {\n        return pixelPos.top >= 0 && pixelPos.top < config.maxHeight;\n    };\n    this.update = function (config) {\n        this.config = config;\n        var selections = this.session.$selectionMarkers;\n        var i = 0, cursorIndex = 0;\n        if (selections === undefined || selections.length === 0) {\n            selections = [{ cursor: null }];\n        }\n        for (var i = 0, n = selections.length; i < n; i++) {\n            var pixelPos = this.getPixelPosition(selections[i].cursor, true);\n            if ((pixelPos.top > config.height + config.offset ||\n                pixelPos.top < 0) && i > 1) {\n                continue;\n            }\n            var element = this.cursors[cursorIndex++] || this.addCursor();\n            var style = element.style;\n            if (!this.drawCursor) {\n                if (!this.isCursorInView(pixelPos, config)) {\n                    dom.setStyle(style, \"display\", \"none\");\n                }\n                else {\n                    dom.setStyle(style, \"display\", \"block\");\n                    dom.translate(element, pixelPos.left, pixelPos.top);\n                    dom.setStyle(style, \"width\", Math.round(config.characterWidth) + \"px\");\n                    dom.setStyle(style, \"height\", config.lineHeight + \"px\");\n                }\n            }\n            else {\n                this.drawCursor(element, pixelPos, config, selections[i], this.session);\n            }\n        }\n        while (this.cursors.length > cursorIndex)\n            this.removeCursor();\n        var overwrite = this.session.getOverwrite();\n        this.$setOverwrite(overwrite);\n        this.$pixelPos = pixelPos;\n        this.restartTimer();\n    };\n    this.drawCursor = null;\n    this.$setOverwrite = function (overwrite) {\n        if (overwrite != this.overwrite) {\n            this.overwrite = overwrite;\n            if (overwrite)\n                dom.addCssClass(this.element, \"ace_overwrite-cursors\");\n            else\n                dom.removeCssClass(this.element, \"ace_overwrite-cursors\");\n        }\n    };\n    this.destroy = function () {\n        clearInterval(this.intervalId);\n        clearTimeout(this.timeoutId);\n    };\n}).call(Cursor.prototype);\nexports.Cursor = Cursor;\n\n});\n\nace.define(\"ace/scrollbar\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/lib/event\",\"ace/lib/event_emitter\"], function(require, exports, module){\"use strict\";\nvar oop = require(\"./lib/oop\");\nvar dom = require(\"./lib/dom\");\nvar event = require(\"./lib/event\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar MAX_SCROLL_H = 0x8000;\nvar ScrollBar = function (parent) {\n    this.element = dom.createElement(\"div\");\n    this.element.className = \"ace_scrollbar ace_scrollbar\" + this.classSuffix;\n    this.inner = dom.createElement(\"div\");\n    this.inner.className = \"ace_scrollbar-inner\";\n    this.inner.textContent = \"\\xa0\";\n    this.element.appendChild(this.inner);\n    parent.appendChild(this.element);\n    this.setVisible(false);\n    this.skipEvent = false;\n    event.addListener(this.element, \"scroll\", this.onScroll.bind(this));\n    event.addListener(this.element, \"mousedown\", event.preventDefault);\n};\n(function () {\n    oop.implement(this, EventEmitter);\n    this.setVisible = function (isVisible) {\n        this.element.style.display = isVisible ? \"\" : \"none\";\n        this.isVisible = isVisible;\n        this.coeff = 1;\n    };\n}).call(ScrollBar.prototype);\nvar VScrollBar = function (parent, renderer) {\n    ScrollBar.call(this, parent);\n    this.scrollTop = 0;\n    this.scrollHeight = 0;\n    renderer.$scrollbarWidth =\n        this.width = dom.scrollbarWidth(parent.ownerDocument);\n    this.inner.style.width =\n        this.element.style.width = (this.width || 15) + 5 + \"px\";\n    this.$minWidth = 0;\n};\noop.inherits(VScrollBar, ScrollBar);\n(function () {\n    this.classSuffix = '-v';\n    this.onScroll = function () {\n        if (!this.skipEvent) {\n            this.scrollTop = this.element.scrollTop;\n            if (this.coeff != 1) {\n                var h = this.element.clientHeight / this.scrollHeight;\n                this.scrollTop = this.scrollTop * (1 - h) / (this.coeff - h);\n            }\n            this._emit(\"scroll\", { data: this.scrollTop });\n        }\n        this.skipEvent = false;\n    };\n    this.getWidth = function () {\n        return Math.max(this.isVisible ? this.width : 0, this.$minWidth || 0);\n    };\n    this.setHeight = function (height) {\n        this.element.style.height = height + \"px\";\n    };\n    this.setInnerHeight =\n        this.setScrollHeight = function (height) {\n            this.scrollHeight = height;\n            if (height > MAX_SCROLL_H) {\n                this.coeff = MAX_SCROLL_H / height;\n                height = MAX_SCROLL_H;\n            }\n            else if (this.coeff != 1) {\n                this.coeff = 1;\n            }\n            this.inner.style.height = height + \"px\";\n        };\n    this.setScrollTop = function (scrollTop) {\n        if (this.scrollTop != scrollTop) {\n            this.skipEvent = true;\n            this.scrollTop = scrollTop;\n            this.element.scrollTop = scrollTop * this.coeff;\n        }\n    };\n}).call(VScrollBar.prototype);\nvar HScrollBar = function (parent, renderer) {\n    ScrollBar.call(this, parent);\n    this.scrollLeft = 0;\n    this.height = renderer.$scrollbarWidth;\n    this.inner.style.height =\n        this.element.style.height = (this.height || 15) + 5 + \"px\";\n};\noop.inherits(HScrollBar, ScrollBar);\n(function () {\n    this.classSuffix = '-h';\n    this.onScroll = function () {\n        if (!this.skipEvent) {\n            this.scrollLeft = this.element.scrollLeft;\n            this._emit(\"scroll\", { data: this.scrollLeft });\n        }\n        this.skipEvent = false;\n    };\n    this.getHeight = function () {\n        return this.isVisible ? this.height : 0;\n    };\n    this.setWidth = function (width) {\n        this.element.style.width = width + \"px\";\n    };\n    this.setInnerWidth = function (width) {\n        this.inner.style.width = width + \"px\";\n    };\n    this.setScrollWidth = function (width) {\n        this.inner.style.width = width + \"px\";\n    };\n    this.setScrollLeft = function (scrollLeft) {\n        if (this.scrollLeft != scrollLeft) {\n            this.skipEvent = true;\n            this.scrollLeft = this.element.scrollLeft = scrollLeft;\n        }\n    };\n}).call(HScrollBar.prototype);\nexports.ScrollBar = VScrollBar; // backward compatibility\nexports.ScrollBarV = VScrollBar; // backward compatibility\nexports.ScrollBarH = HScrollBar; // backward compatibility\nexports.VScrollBar = VScrollBar;\nexports.HScrollBar = HScrollBar;\n\n});\n\nace.define(\"ace/scrollbar_custom\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/lib/event\",\"ace/lib/event_emitter\"], function(require, exports, module){\"use strict\";\nvar oop = require(\"./lib/oop\");\nvar dom = require(\"./lib/dom\");\nvar event = require(\"./lib/event\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\ndom.importCssString(\".ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{\\n  position: absolute;\\n  background: rgba(128, 128, 128, 0.6);\\n  -moz-box-sizing: border-box;\\n  box-sizing: border-box;\\n  border: 1px solid #bbb;\\n  border-radius: 2px;\\n  z-index: 8;\\n}\\n.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {\\n  position: absolute;\\n  z-index: 6;\\n  background: none;\\n  overflow: hidden!important;\\n}\\n.ace_editor>.ace_sb-v {\\n  z-index: 6;\\n  right: 0;\\n  top: 0;\\n  width: 12px;\\n}\\n.ace_editor>.ace_sb-v div {\\n  z-index: 8;\\n  right: 0;\\n  width: 100%;\\n}\\n.ace_editor>.ace_sb-h {\\n  bottom: 0;\\n  left: 0;\\n  height: 12px;\\n}\\n.ace_editor>.ace_sb-h div {\\n  bottom: 0;\\n  height: 100%;\\n}\\n.ace_editor>.ace_sb_grabbed {\\n  z-index: 8;\\n  background: #000;\\n}\", \"ace_scrollbar.css\", false);\nvar ScrollBar = function (parent) {\n    this.element = dom.createElement(\"div\");\n    this.element.className = \"ace_sb\" + this.classSuffix;\n    this.inner = dom.createElement(\"div\");\n    this.inner.className = \"\";\n    this.element.appendChild(this.inner);\n    this.VScrollWidth = 12;\n    this.HScrollHeight = 12;\n    parent.appendChild(this.element);\n    this.setVisible(false);\n    this.skipEvent = false;\n    event.addMultiMouseDownListener(this.element, [500, 300, 300], this, \"onMouseDown\");\n};\n(function () {\n    oop.implement(this, EventEmitter);\n    this.setVisible = function (isVisible) {\n        this.element.style.display = isVisible ? \"\" : \"none\";\n        this.isVisible = isVisible;\n        this.coeff = 1;\n    };\n}).call(ScrollBar.prototype);\nvar VScrollBar = function (parent, renderer) {\n    ScrollBar.call(this, parent);\n    this.scrollTop = 0;\n    this.scrollHeight = 0;\n    this.parent = parent;\n    this.width = this.VScrollWidth;\n    this.renderer = renderer;\n    this.inner.style.width = this.element.style.width = (this.width || 15) + \"px\";\n    this.$minWidth = 0;\n};\noop.inherits(VScrollBar, ScrollBar);\n(function () {\n    this.classSuffix = '-v';\n    oop.implement(this, EventEmitter);\n    this.onMouseDown = function (eType, e) {\n        if (eType !== \"mousedown\")\n            return;\n        if (event.getButton(e) !== 0 || e.detail === 2) {\n            return;\n        }\n        if (e.target === this.inner) {\n            var self = this;\n            var mousePageY = e.clientY;\n            var onMouseMove = function (e) {\n                mousePageY = e.clientY;\n            };\n            var onMouseUp = function () {\n                clearInterval(timerId);\n            };\n            var startY = e.clientY;\n            var startTop = this.thumbTop;\n            var onScrollInterval = function () {\n                if (mousePageY === undefined)\n                    return;\n                var scrollTop = self.scrollTopFromThumbTop(startTop + mousePageY - startY);\n                if (scrollTop === self.scrollTop)\n                    return;\n                self._emit(\"scroll\", { data: scrollTop });\n            };\n            event.capture(this.inner, onMouseMove, onMouseUp);\n            var timerId = setInterval(onScrollInterval, 20);\n            return event.preventDefault(e);\n        }\n        var top = e.clientY - this.element.getBoundingClientRect().top - this.thumbHeight / 2;\n        this._emit(\"scroll\", { data: this.scrollTopFromThumbTop(top) });\n        return event.preventDefault(e);\n    };\n    this.getHeight = function () {\n        return this.height;\n    };\n    this.scrollTopFromThumbTop = function (thumbTop) {\n        var scrollTop = thumbTop * (this.pageHeight - this.viewHeight) / (this.slideHeight - this.thumbHeight);\n        scrollTop = scrollTop >> 0;\n        if (scrollTop < 0) {\n            scrollTop = 0;\n        }\n        else if (scrollTop > this.pageHeight - this.viewHeight) {\n            scrollTop = this.pageHeight - this.viewHeight;\n        }\n        return scrollTop;\n    };\n    this.getWidth = function () {\n        return Math.max(this.isVisible ? this.width : 0, this.$minWidth || 0);\n    };\n    this.setHeight = function (height) {\n        this.height = Math.max(0, height);\n        this.slideHeight = this.height;\n        this.viewHeight = this.height;\n        this.setScrollHeight(this.pageHeight, true);\n    };\n    this.setInnerHeight = this.setScrollHeight = function (height, force) {\n        if (this.pageHeight === height && !force)\n            return;\n        this.pageHeight = height;\n        this.thumbHeight = this.slideHeight * this.viewHeight / this.pageHeight;\n        if (this.thumbHeight > this.slideHeight)\n            this.thumbHeight = this.slideHeight;\n        if (this.thumbHeight < 15)\n            this.thumbHeight = 15;\n        this.inner.style.height = this.thumbHeight + \"px\";\n        if (this.scrollTop > (this.pageHeight - this.viewHeight)) {\n            this.scrollTop = (this.pageHeight - this.viewHeight);\n            if (this.scrollTop < 0)\n                this.scrollTop = 0;\n            this._emit(\"scroll\", { data: this.scrollTop });\n        }\n    };\n    this.setScrollTop = function (scrollTop) {\n        this.scrollTop = scrollTop;\n        if (scrollTop < 0)\n            scrollTop = 0;\n        this.thumbTop = scrollTop * (this.slideHeight - this.thumbHeight) / (this.pageHeight - this.viewHeight);\n        this.inner.style.top = this.thumbTop + \"px\";\n    };\n}).call(VScrollBar.prototype);\nvar HScrollBar = function (parent, renderer) {\n    ScrollBar.call(this, parent);\n    this.scrollLeft = 0;\n    this.scrollWidth = 0;\n    this.height = this.HScrollHeight;\n    this.inner.style.height = this.element.style.height = (this.height || 12) + \"px\";\n    this.renderer = renderer;\n};\noop.inherits(HScrollBar, ScrollBar);\n(function () {\n    this.classSuffix = '-h';\n    oop.implement(this, EventEmitter);\n    this.onMouseDown = function (eType, e) {\n        if (eType !== \"mousedown\")\n            return;\n        if (event.getButton(e) !== 0 || e.detail === 2) {\n            return;\n        }\n        if (e.target === this.inner) {\n            var self = this;\n            var mousePageX = e.clientX;\n            var onMouseMove = function (e) {\n                mousePageX = e.clientX;\n            };\n            var onMouseUp = function () {\n                clearInterval(timerId);\n            };\n            var startX = e.clientX;\n            var startLeft = this.thumbLeft;\n            var onScrollInterval = function () {\n                if (mousePageX === undefined)\n                    return;\n                var scrollLeft = self.scrollLeftFromThumbLeft(startLeft + mousePageX - startX);\n                if (scrollLeft === self.scrollLeft)\n                    return;\n                self._emit(\"scroll\", { data: scrollLeft });\n            };\n            event.capture(this.inner, onMouseMove, onMouseUp);\n            var timerId = setInterval(onScrollInterval, 20);\n            return event.preventDefault(e);\n        }\n        var left = e.clientX - this.element.getBoundingClientRect().left - this.thumbWidth / 2;\n        this._emit(\"scroll\", { data: this.scrollLeftFromThumbLeft(left) });\n        return event.preventDefault(e);\n    };\n    this.getHeight = function () {\n        return this.isVisible ? this.height : 0;\n    };\n    this.scrollLeftFromThumbLeft = function (thumbLeft) {\n        var scrollLeft = thumbLeft * (this.pageWidth - this.viewWidth) / (this.slideWidth - this.thumbWidth);\n        scrollLeft = scrollLeft >> 0;\n        if (scrollLeft < 0) {\n            scrollLeft = 0;\n        }\n        else if (scrollLeft > this.pageWidth - this.viewWidth) {\n            scrollLeft = this.pageWidth - this.viewWidth;\n        }\n        return scrollLeft;\n    };\n    this.setWidth = function (width) {\n        this.width = Math.max(0, width);\n        this.element.style.width = this.width + \"px\";\n        this.slideWidth = this.width;\n        this.viewWidth = this.width;\n        this.setScrollWidth(this.pageWidth, true);\n    };\n    this.setInnerWidth = this.setScrollWidth = function (width, force) {\n        if (this.pageWidth === width && !force)\n            return;\n        this.pageWidth = width;\n        this.thumbWidth = this.slideWidth * this.viewWidth / this.pageWidth;\n        if (this.thumbWidth > this.slideWidth)\n            this.thumbWidth = this.slideWidth;\n        if (this.thumbWidth < 15)\n            this.thumbWidth = 15;\n        this.inner.style.width = this.thumbWidth + \"px\";\n        if (this.scrollLeft > (this.pageWidth - this.viewWidth)) {\n            this.scrollLeft = (this.pageWidth - this.viewWidth);\n            if (this.scrollLeft < 0)\n                this.scrollLeft = 0;\n            this._emit(\"scroll\", { data: this.scrollLeft });\n        }\n    };\n    this.setScrollLeft = function (scrollLeft) {\n        this.scrollLeft = scrollLeft;\n        if (scrollLeft < 0)\n            scrollLeft = 0;\n        this.thumbLeft = scrollLeft * (this.slideWidth - this.thumbWidth) / (this.pageWidth - this.viewWidth);\n        this.inner.style.left = (this.thumbLeft) + \"px\";\n    };\n}).call(HScrollBar.prototype);\nexports.ScrollBar = VScrollBar; // backward compatibility\nexports.ScrollBarV = VScrollBar; // backward compatibility\nexports.ScrollBarH = HScrollBar; // backward compatibility\nexports.VScrollBar = VScrollBar;\nexports.HScrollBar = HScrollBar;\n\n});\n\nace.define(\"ace/renderloop\",[\"require\",\"exports\",\"module\",\"ace/lib/event\"], function(require, exports, module){\"use strict\";\nvar event = require(\"./lib/event\");\nvar RenderLoop = function (onRender, win) {\n    this.onRender = onRender;\n    this.pending = false;\n    this.changes = 0;\n    this.$recursionLimit = 2;\n    this.window = win || window;\n    var _self = this;\n    this._flush = function (ts) {\n        _self.pending = false;\n        var changes = _self.changes;\n        if (changes) {\n            event.blockIdle(100);\n            _self.changes = 0;\n            _self.onRender(changes);\n        }\n        if (_self.changes) {\n            if (_self.$recursionLimit-- < 0)\n                return;\n            _self.schedule();\n        }\n        else {\n            _self.$recursionLimit = 2;\n        }\n    };\n};\n(function () {\n    this.schedule = function (change) {\n        this.changes = this.changes | change;\n        if (this.changes && !this.pending) {\n            event.nextFrame(this._flush);\n            this.pending = true;\n        }\n    };\n    this.clear = function (change) {\n        var changes = this.changes;\n        this.changes = 0;\n        return changes;\n    };\n}).call(RenderLoop.prototype);\nexports.RenderLoop = RenderLoop;\n\n});\n\nace.define(\"ace/layer/font_metrics\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/lib/event\",\"ace/lib/useragent\",\"ace/lib/event_emitter\"], function(require, exports, module){var oop = require(\"../lib/oop\");\nvar dom = require(\"../lib/dom\");\nvar lang = require(\"../lib/lang\");\nvar event = require(\"../lib/event\");\nvar useragent = require(\"../lib/useragent\");\nvar EventEmitter = require(\"../lib/event_emitter\").EventEmitter;\nvar DEFAULT_CHAR_COUNT = 250;\nvar USE_OBSERVER = typeof ResizeObserver == \"function\";\nvar L = 200;\nvar FontMetrics = exports.FontMetrics = function (parentEl, charCount) {\n    this.charCount = charCount || DEFAULT_CHAR_COUNT;\n    this.el = dom.createElement(\"div\");\n    this.$setMeasureNodeStyles(this.el.style, true);\n    this.$main = dom.createElement(\"div\");\n    this.$setMeasureNodeStyles(this.$main.style);\n    this.$measureNode = dom.createElement(\"div\");\n    this.$setMeasureNodeStyles(this.$measureNode.style);\n    this.el.appendChild(this.$main);\n    this.el.appendChild(this.$measureNode);\n    parentEl.appendChild(this.el);\n    this.$measureNode.textContent = lang.stringRepeat(\"X\", this.charCount);\n    this.$characterSize = { width: 0, height: 0 };\n    if (USE_OBSERVER)\n        this.$addObserver();\n    else\n        this.checkForSizeChanges();\n};\n(function () {\n    oop.implement(this, EventEmitter);\n    this.$characterSize = { width: 0, height: 0 };\n    this.$setMeasureNodeStyles = function (style, isRoot) {\n        style.width = style.height = \"auto\";\n        style.left = style.top = \"0px\";\n        style.visibility = \"hidden\";\n        style.position = \"absolute\";\n        style.whiteSpace = \"pre\";\n        if (useragent.isIE < 8) {\n            style[\"font-family\"] = \"inherit\";\n        }\n        else {\n            style.font = \"inherit\";\n        }\n        style.overflow = isRoot ? \"hidden\" : \"visible\";\n    };\n    this.checkForSizeChanges = function (size) {\n        if (size === undefined)\n            size = this.$measureSizes();\n        if (size && (this.$characterSize.width !== size.width || this.$characterSize.height !== size.height)) {\n            this.$measureNode.style.fontWeight = \"bold\";\n            var boldSize = this.$measureSizes();\n            this.$measureNode.style.fontWeight = \"\";\n            this.$characterSize = size;\n            this.charSizes = Object.create(null);\n            this.allowBoldFonts = boldSize && boldSize.width === size.width && boldSize.height === size.height;\n            this._emit(\"changeCharacterSize\", { data: size });\n        }\n    };\n    this.$addObserver = function () {\n        var self = this;\n        this.$observer = new window.ResizeObserver(function (e) {\n            self.checkForSizeChanges();\n        });\n        this.$observer.observe(this.$measureNode);\n    };\n    this.$pollSizeChanges = function () {\n        if (this.$pollSizeChangesTimer || this.$observer)\n            return this.$pollSizeChangesTimer;\n        var self = this;\n        return this.$pollSizeChangesTimer = event.onIdle(function cb() {\n            self.checkForSizeChanges();\n            event.onIdle(cb, 500);\n        }, 500);\n    };\n    this.setPolling = function (val) {\n        if (val) {\n            this.$pollSizeChanges();\n        }\n        else if (this.$pollSizeChangesTimer) {\n            clearInterval(this.$pollSizeChangesTimer);\n            this.$pollSizeChangesTimer = 0;\n        }\n    };\n    this.$measureSizes = function (node) {\n        node = node || this.$measureNode;\n        var rect = node.getBoundingClientRect();\n        var charSize = {\n            height: rect.height,\n            width: rect.width / this.charCount\n        };\n        if (charSize.width === 0 || charSize.height === 0)\n            return null;\n        return charSize;\n    };\n    this.$measureCharWidth = function (ch) {\n        this.$main.textContent = lang.stringRepeat(ch, this.charCount);\n        var rect = this.$main.getBoundingClientRect();\n        return rect.width / this.charCount;\n    };\n    this.getCharacterWidth = function (ch) {\n        var w = this.charSizes[ch];\n        if (w === undefined) {\n            w = this.charSizes[ch] = this.$measureCharWidth(ch) / this.$characterSize.width;\n        }\n        return w;\n    };\n    this.destroy = function () {\n        clearInterval(this.$pollSizeChangesTimer);\n        if (this.$observer)\n            this.$observer.disconnect();\n        if (this.el && this.el.parentNode)\n            this.el.parentNode.removeChild(this.el);\n    };\n    this.$getZoom = function getZoom(element) {\n        if (!element || !element.parentElement)\n            return 1;\n        return (window.getComputedStyle(element).zoom || 1) * getZoom(element.parentElement);\n    };\n    this.$initTransformMeasureNodes = function () {\n        var t = function (t, l) {\n            return [\"div\", {\n                    style: \"position: absolute;top:\" + t + \"px;left:\" + l + \"px;\"\n                }];\n        };\n        this.els = dom.buildDom([t(0, 0), t(L, 0), t(0, L), t(L, L)], this.el);\n    };\n    this.transformCoordinates = function (clientPos, elPos) {\n        if (clientPos) {\n            var zoom = this.$getZoom(this.el);\n            clientPos = mul(1 / zoom, clientPos);\n        }\n        function solve(l1, l2, r) {\n            var det = l1[1] * l2[0] - l1[0] * l2[1];\n            return [\n                (-l2[1] * r[0] + l2[0] * r[1]) / det,\n                (+l1[1] * r[0] - l1[0] * r[1]) / det\n            ];\n        }\n        function sub(a, b) { return [a[0] - b[0], a[1] - b[1]]; }\n        function add(a, b) { return [a[0] + b[0], a[1] + b[1]]; }\n        function mul(a, b) { return [a * b[0], a * b[1]]; }\n        if (!this.els)\n            this.$initTransformMeasureNodes();\n        function p(el) {\n            var r = el.getBoundingClientRect();\n            return [r.left, r.top];\n        }\n        var a = p(this.els[0]);\n        var b = p(this.els[1]);\n        var c = p(this.els[2]);\n        var d = p(this.els[3]);\n        var h = solve(sub(d, b), sub(d, c), sub(add(b, c), add(d, a)));\n        var m1 = mul(1 + h[0], sub(b, a));\n        var m2 = mul(1 + h[1], sub(c, a));\n        if (elPos) {\n            var x = elPos;\n            var k = h[0] * x[0] / L + h[1] * x[1] / L + 1;\n            var ut = add(mul(x[0], m1), mul(x[1], m2));\n            return add(mul(1 / k / L, ut), a);\n        }\n        var u = sub(clientPos, a);\n        var f = solve(sub(m1, mul(h[0], u)), sub(m2, mul(h[1], u)), u);\n        return mul(L, f);\n    };\n}).call(FontMetrics.prototype);\n\n});\n\nace.define(\"ace/css/editor.css\",[\"require\",\"exports\",\"module\"], function(require, exports, module){module.exports = \"/*\\nstyles = []\\nfor (var i = 1; i < 16; i++) {\\n    styles.push(\\\".ace_br\\\" + i + \\\"{\\\" + (\\n        [\\\"top-left\\\", \\\"top-right\\\", \\\"bottom-right\\\", \\\"bottom-left\\\"]\\n    ).map(function(x, j) {\\n        return i & (1<<j) ? \\\"border-\\\" + x + \\\"-radius: 3px;\\\" : \\\"\\\" \\n    }).filter(Boolean).join(\\\" \\\") + \\\"}\\\")\\n}\\nstyles.join(\\\"\\\\n\\\")\\n*/\\n.ace_br1 {border-top-left-radius    : 3px;}\\n.ace_br2 {border-top-right-radius   : 3px;}\\n.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}\\n.ace_br4 {border-bottom-right-radius: 3px;}\\n.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}\\n.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}\\n.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}\\n.ace_br8 {border-bottom-left-radius : 3px;}\\n.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}\\n.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}\\n.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}\\n.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\\n.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\\n.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\\n.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}\\n\\n\\n.ace_editor {\\n    position: relative;\\n    overflow: hidden;\\n    padding: 0;\\n    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;\\n    direction: ltr;\\n    text-align: left;\\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\\n}\\n\\n.ace_scroller {\\n    position: absolute;\\n    overflow: hidden;\\n    top: 0;\\n    bottom: 0;\\n    background-color: inherit;\\n    -ms-user-select: none;\\n    -moz-user-select: none;\\n    -webkit-user-select: none;\\n    user-select: none;\\n    cursor: text;\\n}\\n\\n.ace_content {\\n    position: absolute;\\n    box-sizing: border-box;\\n    min-width: 100%;\\n    contain: style size layout;\\n    font-variant-ligatures: no-common-ligatures;\\n}\\n\\n.ace_dragging .ace_scroller:before{\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    content: '';\\n    background: rgba(250, 250, 250, 0.01);\\n    z-index: 1000;\\n}\\n.ace_dragging.ace_dark .ace_scroller:before{\\n    background: rgba(0, 0, 0, 0.01);\\n}\\n\\n.ace_gutter {\\n    position: absolute;\\n    overflow : hidden;\\n    width: auto;\\n    top: 0;\\n    bottom: 0;\\n    left: 0;\\n    cursor: default;\\n    z-index: 4;\\n    -ms-user-select: none;\\n    -moz-user-select: none;\\n    -webkit-user-select: none;\\n    user-select: none;\\n    contain: style size layout;\\n}\\n\\n.ace_gutter-active-line {\\n    position: absolute;\\n    left: 0;\\n    right: 0;\\n}\\n\\n.ace_scroller.ace_scroll-left {\\n    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;\\n}\\n\\n.ace_gutter-cell {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    padding-left: 19px;\\n    padding-right: 6px;\\n    background-repeat: no-repeat;\\n}\\n\\n.ace_gutter-cell.ace_error {\\n    background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==\\\");\\n    background-repeat: no-repeat;\\n    background-position: 2px center;\\n}\\n\\n.ace_gutter-cell.ace_warning {\\n    background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==\\\");\\n    background-position: 2px center;\\n}\\n\\n.ace_gutter-cell.ace_info {\\n    background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=\\\");\\n    background-position: 2px center;\\n}\\n.ace_dark .ace_gutter-cell.ace_info {\\n    background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC\\\");\\n}\\n\\n.ace_scrollbar {\\n    contain: strict;\\n    position: absolute;\\n    right: 0;\\n    bottom: 0;\\n    z-index: 6;\\n}\\n\\n.ace_scrollbar-inner {\\n    position: absolute;\\n    cursor: text;\\n    left: 0;\\n    top: 0;\\n}\\n\\n.ace_scrollbar-v{\\n    overflow-x: hidden;\\n    overflow-y: scroll;\\n    top: 0;\\n}\\n\\n.ace_scrollbar-h {\\n    overflow-x: scroll;\\n    overflow-y: hidden;\\n    left: 0;\\n}\\n\\n.ace_print-margin {\\n    position: absolute;\\n    height: 100%;\\n}\\n\\n.ace_text-input {\\n    position: absolute;\\n    z-index: 0;\\n    width: 0.5em;\\n    height: 1em;\\n    opacity: 0;\\n    background: transparent;\\n    -moz-appearance: none;\\n    appearance: none;\\n    border: none;\\n    resize: none;\\n    outline: none;\\n    overflow: hidden;\\n    font: inherit;\\n    padding: 0 1px;\\n    margin: 0 -1px;\\n    contain: strict;\\n    -ms-user-select: text;\\n    -moz-user-select: text;\\n    -webkit-user-select: text;\\n    user-select: text;\\n    /*with `pre-line` chrome inserts &nbsp; instead of space*/\\n    white-space: pre!important;\\n}\\n.ace_text-input.ace_composition {\\n    background: transparent;\\n    color: inherit;\\n    z-index: 1000;\\n    opacity: 1;\\n}\\n.ace_composition_placeholder { color: transparent }\\n.ace_composition_marker { \\n    border-bottom: 1px solid;\\n    position: absolute;\\n    border-radius: 0;\\n    margin-top: 1px;\\n}\\n\\n[ace_nocontext=true] {\\n    transform: none!important;\\n    filter: none!important;\\n    clip-path: none!important;\\n    mask : none!important;\\n    contain: none!important;\\n    perspective: none!important;\\n    mix-blend-mode: initial!important;\\n    z-index: auto;\\n}\\n\\n.ace_layer {\\n    z-index: 1;\\n    position: absolute;\\n    overflow: hidden;\\n    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/\\n    word-wrap: normal;\\n    white-space: pre;\\n    height: 100%;\\n    width: 100%;\\n    box-sizing: border-box;\\n    /* setting pointer-events: auto; on node under the mouse, which changes\\n        during scroll, will break mouse wheel scrolling in Safari */\\n    pointer-events: none;\\n}\\n\\n.ace_gutter-layer {\\n    position: relative;\\n    width: auto;\\n    text-align: right;\\n    pointer-events: auto;\\n    height: 1000000px;\\n    contain: style size layout;\\n}\\n\\n.ace_text-layer {\\n    font: inherit !important;\\n    position: absolute;\\n    height: 1000000px;\\n    width: 1000000px;\\n    contain: style size layout;\\n}\\n\\n.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {\\n    contain: style size layout;\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n}\\n\\n.ace_hidpi .ace_text-layer,\\n.ace_hidpi .ace_gutter-layer,\\n.ace_hidpi .ace_content,\\n.ace_hidpi .ace_gutter {\\n    contain: strict;\\n    will-change: transform;\\n}\\n.ace_hidpi .ace_text-layer > .ace_line, \\n.ace_hidpi .ace_text-layer > .ace_line_group {\\n    contain: strict;\\n}\\n\\n.ace_cjk {\\n    display: inline-block;\\n    text-align: center;\\n}\\n\\n.ace_cursor-layer {\\n    z-index: 4;\\n}\\n\\n.ace_cursor {\\n    z-index: 4;\\n    position: absolute;\\n    box-sizing: border-box;\\n    border-left: 2px solid;\\n    /* workaround for smooth cursor repaintng whole screen in chrome */\\n    transform: translatez(0);\\n}\\n\\n.ace_multiselect .ace_cursor {\\n    border-left-width: 1px;\\n}\\n\\n.ace_slim-cursors .ace_cursor {\\n    border-left-width: 1px;\\n}\\n\\n.ace_overwrite-cursors .ace_cursor {\\n    border-left-width: 0;\\n    border-bottom: 1px solid;\\n}\\n\\n.ace_hidden-cursors .ace_cursor {\\n    opacity: 0.2;\\n}\\n\\n.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {\\n    opacity: 0;\\n}\\n\\n.ace_smooth-blinking .ace_cursor {\\n    transition: opacity 0.18s;\\n}\\n\\n.ace_animate-blinking .ace_cursor {\\n    animation-duration: 1000ms;\\n    animation-timing-function: step-end;\\n    animation-name: blink-ace-animate;\\n    animation-iteration-count: infinite;\\n}\\n\\n.ace_animate-blinking.ace_smooth-blinking .ace_cursor {\\n    animation-duration: 1000ms;\\n    animation-timing-function: ease-in-out;\\n    animation-name: blink-ace-animate-smooth;\\n}\\n    \\n@keyframes blink-ace-animate {\\n    from, to { opacity: 1; }\\n    60% { opacity: 0; }\\n}\\n\\n@keyframes blink-ace-animate-smooth {\\n    from, to { opacity: 1; }\\n    45% { opacity: 1; }\\n    60% { opacity: 0; }\\n    85% { opacity: 0; }\\n}\\n\\n.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {\\n    position: absolute;\\n    z-index: 3;\\n}\\n\\n.ace_marker-layer .ace_selection {\\n    position: absolute;\\n    z-index: 5;\\n}\\n\\n.ace_marker-layer .ace_bracket {\\n    position: absolute;\\n    z-index: 6;\\n}\\n\\n.ace_marker-layer .ace_error_bracket {\\n    position: absolute;\\n    border-bottom: 1px solid #DE5555;\\n    border-radius: 0;\\n}\\n\\n.ace_marker-layer .ace_active-line {\\n    position: absolute;\\n    z-index: 2;\\n}\\n\\n.ace_marker-layer .ace_selected-word {\\n    position: absolute;\\n    z-index: 4;\\n    box-sizing: border-box;\\n}\\n\\n.ace_line .ace_fold {\\n    box-sizing: border-box;\\n\\n    display: inline-block;\\n    height: 11px;\\n    margin-top: -2px;\\n    vertical-align: middle;\\n\\n    background-image:\\n        url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII=\\\"),\\n        url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=\\\");\\n    background-repeat: no-repeat, repeat-x;\\n    background-position: center center, top left;\\n    color: transparent;\\n\\n    border: 1px solid black;\\n    border-radius: 2px;\\n\\n    cursor: pointer;\\n    pointer-events: auto;\\n}\\n\\n.ace_dark .ace_fold {\\n}\\n\\n.ace_fold:hover{\\n    background-image:\\n        url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII=\\\"),\\n        url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC\\\");\\n}\\n\\n.ace_tooltip {\\n    background-color: #FFF;\\n    background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));\\n    border: 1px solid gray;\\n    border-radius: 1px;\\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\\n    color: black;\\n    max-width: 100%;\\n    padding: 3px 4px;\\n    position: fixed;\\n    z-index: 999999;\\n    box-sizing: border-box;\\n    cursor: default;\\n    white-space: pre;\\n    word-wrap: break-word;\\n    line-height: normal;\\n    font-style: normal;\\n    font-weight: normal;\\n    letter-spacing: normal;\\n    pointer-events: none;\\n}\\n\\n.ace_folding-enabled > .ace_gutter-cell {\\n    padding-right: 13px;\\n}\\n\\n.ace_fold-widget {\\n    box-sizing: border-box;\\n\\n    margin: 0 -12px 0 1px;\\n    display: none;\\n    width: 11px;\\n    vertical-align: top;\\n\\n    background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==\\\");\\n    background-repeat: no-repeat;\\n    background-position: center;\\n\\n    border-radius: 3px;\\n    \\n    border: 1px solid transparent;\\n    cursor: pointer;\\n}\\n\\n.ace_folding-enabled .ace_fold-widget {\\n    display: inline-block;   \\n}\\n\\n.ace_fold-widget.ace_end {\\n    background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==\\\");\\n}\\n\\n.ace_fold-widget.ace_closed {\\n    background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==\\\");\\n}\\n\\n.ace_fold-widget:hover {\\n    border: 1px solid rgba(0, 0, 0, 0.3);\\n    background-color: rgba(255, 255, 255, 0.2);\\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\\n}\\n\\n.ace_fold-widget:active {\\n    border: 1px solid rgba(0, 0, 0, 0.4);\\n    background-color: rgba(0, 0, 0, 0.05);\\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\\n}\\n/**\\n * Dark version for fold widgets\\n */\\n.ace_dark .ace_fold-widget {\\n    background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC\\\");\\n}\\n.ace_dark .ace_fold-widget.ace_end {\\n    background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==\\\");\\n}\\n.ace_dark .ace_fold-widget.ace_closed {\\n    background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==\\\");\\n}\\n.ace_dark .ace_fold-widget:hover {\\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\\n    background-color: rgba(255, 255, 255, 0.1);\\n}\\n.ace_dark .ace_fold-widget:active {\\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\\n}\\n\\n.ace_inline_button {\\n    border: 1px solid lightgray;\\n    display: inline-block;\\n    margin: -1px 8px;\\n    padding: 0 5px;\\n    pointer-events: auto;\\n    cursor: pointer;\\n}\\n.ace_inline_button:hover {\\n    border-color: gray;\\n    background: rgba(200,200,200,0.2);\\n    display: inline-block;\\n    pointer-events: auto;\\n}\\n\\n.ace_fold-widget.ace_invalid {\\n    background-color: #FFB4B4;\\n    border-color: #DE5555;\\n}\\n\\n.ace_fade-fold-widgets .ace_fold-widget {\\n    transition: opacity 0.4s ease 0.05s;\\n    opacity: 0;\\n}\\n\\n.ace_fade-fold-widgets:hover .ace_fold-widget {\\n    transition: opacity 0.05s ease 0.05s;\\n    opacity:1;\\n}\\n\\n.ace_underline {\\n    text-decoration: underline;\\n}\\n\\n.ace_bold {\\n    font-weight: bold;\\n}\\n\\n.ace_nobold .ace_bold {\\n    font-weight: normal;\\n}\\n\\n.ace_italic {\\n    font-style: italic;\\n}\\n\\n\\n.ace_error-marker {\\n    background-color: rgba(255, 0, 0,0.2);\\n    position: absolute;\\n    z-index: 9;\\n}\\n\\n.ace_highlight-marker {\\n    background-color: rgba(255, 255, 0,0.2);\\n    position: absolute;\\n    z-index: 8;\\n}\\n\\n.ace_mobile-menu {\\n    position: absolute;\\n    line-height: 1.5;\\n    border-radius: 4px;\\n    -ms-user-select: none;\\n    -moz-user-select: none;\\n    -webkit-user-select: none;\\n    user-select: none;\\n    background: white;\\n    box-shadow: 1px 3px 2px grey;\\n    border: 1px solid #dcdcdc;\\n    color: black;\\n}\\n.ace_dark > .ace_mobile-menu {\\n    background: #333;\\n    color: #ccc;\\n    box-shadow: 1px 3px 2px grey;\\n    border: 1px solid #444;\\n\\n}\\n.ace_mobile-button {\\n    padding: 2px;\\n    cursor: pointer;\\n    overflow: hidden;\\n}\\n.ace_mobile-button:hover {\\n    background-color: #eee;\\n    opacity:1;\\n}\\n.ace_mobile-button:active {\\n    background-color: #ddd;\\n}\\n\\n.ace_placeholder {\\n    font-family: arial;\\n    transform: scale(0.9);\\n    transform-origin: left;\\n    white-space: pre;\\n    opacity: 0.7;\\n    margin: 0 10px;\\n}\";\n\n});\n\nace.define(\"ace/layer/decorators\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/oop\",\"ace/lib/event_emitter\"], function(require, exports, module){\"use strict\";\nvar dom = require(\"../lib/dom\");\nvar oop = require(\"../lib/oop\");\nvar EventEmitter = require(\"../lib/event_emitter\").EventEmitter;\nvar Decorator = function (parent, renderer) {\n    this.canvas = dom.createElement(\"canvas\");\n    this.renderer = renderer;\n    this.pixelRatio = 1;\n    this.maxHeight = renderer.layerConfig.maxHeight;\n    this.lineHeight = renderer.layerConfig.lineHeight;\n    this.canvasHeight = parent.parent.scrollHeight;\n    this.heightRatio = this.canvasHeight / this.maxHeight;\n    this.canvasWidth = parent.width;\n    this.minDecorationHeight = (2 * this.pixelRatio) | 0;\n    this.halfMinDecorationHeight = (this.minDecorationHeight / 2) | 0;\n    this.canvas.width = this.canvasWidth;\n    this.canvas.height = this.canvasHeight;\n    this.canvas.style.top = 0 + \"px\";\n    this.canvas.style.right = 0 + \"px\";\n    this.canvas.style.zIndex = 7 + \"px\";\n    this.canvas.style.position = \"absolute\";\n    this.colors = {};\n    this.colors.dark = {\n        \"error\": \"rgba(255, 18, 18, 1)\",\n        \"warning\": \"rgba(18, 136, 18, 1)\",\n        \"info\": \"rgba(18, 18, 136, 1)\"\n    };\n    this.colors.light = {\n        \"error\": \"rgb(255,51,51)\",\n        \"warning\": \"rgb(32,133,72)\",\n        \"info\": \"rgb(35,68,138)\"\n    };\n    parent.element.appendChild(this.canvas);\n};\n(function () {\n    oop.implement(this, EventEmitter);\n    this.$updateDecorators = function (config) {\n        var colors = (this.renderer.theme.isDark === true) ? this.colors.dark : this.colors.light;\n        if (config) {\n            this.maxHeight = config.maxHeight;\n            this.lineHeight = config.lineHeight;\n            this.canvasHeight = config.height;\n            var allLineHeight = (config.lastRow + 1) * this.lineHeight;\n            if (allLineHeight < this.canvasHeight) {\n                this.heightRatio = 1;\n            }\n            else {\n                this.heightRatio = this.canvasHeight / this.maxHeight;\n            }\n        }\n        var ctx = this.canvas.getContext(\"2d\");\n        function compare(a, b) {\n            if (a.priority < b.priority)\n                return -1;\n            if (a.priority > b.priority)\n                return 1;\n            return 0;\n        }\n        var annotations = this.renderer.session.$annotations;\n        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        if (annotations) {\n            var priorities = {\n                \"info\": 1,\n                \"warning\": 2,\n                \"error\": 3\n            };\n            annotations.forEach(function (item) {\n                item.priority = priorities[item.type] || null;\n            });\n            annotations = annotations.sort(compare);\n            var foldData = this.renderer.session.$foldData;\n            for (var i = 0; i < annotations.length; i++) {\n                var row = annotations[i].row;\n                var compensateFold = this.compensateFoldRows(row, foldData);\n                var currentY = Math.round((row - compensateFold) * this.lineHeight * this.heightRatio);\n                var y1 = Math.round(((row - compensateFold) * this.lineHeight * this.heightRatio));\n                var y2 = Math.round((((row - compensateFold) * this.lineHeight + this.lineHeight) * this.heightRatio));\n                var height = y2 - y1;\n                if (height < this.minDecorationHeight) {\n                    var yCenter = ((y1 + y2) / 2) | 0;\n                    if (yCenter < this.halfMinDecorationHeight) {\n                        yCenter = this.halfMinDecorationHeight;\n                    }\n                    else if (yCenter + this.halfMinDecorationHeight > this.canvasHeight) {\n                        yCenter = this.canvasHeight - this.halfMinDecorationHeight;\n                    }\n                    y1 = Math.round(yCenter - this.halfMinDecorationHeight);\n                    y2 = Math.round(yCenter + this.halfMinDecorationHeight);\n                }\n                ctx.fillStyle = colors[annotations[i].type] || null;\n                ctx.fillRect(0, currentY, this.canvasWidth, y2 - y1);\n            }\n        }\n        var cursor = this.renderer.session.selection.getCursor();\n        if (cursor) {\n            var compensateFold = this.compensateFoldRows(cursor.row, foldData);\n            var currentY = Math.round((cursor.row - compensateFold) * this.lineHeight * this.heightRatio);\n            ctx.fillStyle = \"rgba(0, 0, 0, 0.5)\";\n            ctx.fillRect(0, currentY, this.canvasWidth, 2);\n        }\n    };\n    this.compensateFoldRows = function (row, foldData) {\n        var compensateFold = 0;\n        if (foldData && foldData.length > 0) {\n            for (var j = 0; j < foldData.length; j++) {\n                if (row > foldData[j].start.row && row < foldData[j].end.row) {\n                    compensateFold += row - foldData[j].start.row;\n                }\n                else if (row >= foldData[j].end.row) {\n                    compensateFold += foldData[j].end.row - foldData[j].start.row;\n                }\n            }\n        }\n        return compensateFold;\n    };\n}.call(Decorator.prototype));\nexports.Decorator = Decorator;\n\n});\n\nace.define(\"ace/virtual_renderer\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/config\",\"ace/layer/gutter\",\"ace/layer/marker\",\"ace/layer/text\",\"ace/layer/cursor\",\"ace/scrollbar\",\"ace/scrollbar\",\"ace/scrollbar_custom\",\"ace/scrollbar_custom\",\"ace/renderloop\",\"ace/layer/font_metrics\",\"ace/lib/event_emitter\",\"ace/css/editor.css\",\"ace/layer/decorators\",\"ace/lib/useragent\"], function(require, exports, module){\"use strict\";\nvar oop = require(\"./lib/oop\");\nvar dom = require(\"./lib/dom\");\nvar config = require(\"./config\");\nvar GutterLayer = require(\"./layer/gutter\").Gutter;\nvar MarkerLayer = require(\"./layer/marker\").Marker;\nvar TextLayer = require(\"./layer/text\").Text;\nvar CursorLayer = require(\"./layer/cursor\").Cursor;\nvar HScrollBar = require(\"./scrollbar\").HScrollBar;\nvar VScrollBar = require(\"./scrollbar\").VScrollBar;\nvar HScrollBarCustom = require(\"./scrollbar_custom\").HScrollBar;\nvar VScrollBarCustom = require(\"./scrollbar_custom\").VScrollBar;\nvar RenderLoop = require(\"./renderloop\").RenderLoop;\nvar FontMetrics = require(\"./layer/font_metrics\").FontMetrics;\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar editorCss = require(\"./css/editor.css\");\nvar Decorator = require(\"./layer/decorators\").Decorator;\nvar useragent = require(\"./lib/useragent\");\nvar HIDE_TEXTAREA = useragent.isIE;\ndom.importCssString(editorCss, \"ace_editor.css\", false);\nvar VirtualRenderer = function (container, theme) {\n    var _self = this;\n    this.container = container || dom.createElement(\"div\");\n    dom.addCssClass(this.container, \"ace_editor\");\n    if (dom.HI_DPI)\n        dom.addCssClass(this.container, \"ace_hidpi\");\n    this.setTheme(theme);\n    if (config.get(\"useStrictCSP\") == null)\n        config.set(\"useStrictCSP\", false);\n    this.$gutter = dom.createElement(\"div\");\n    this.$gutter.className = \"ace_gutter\";\n    this.container.appendChild(this.$gutter);\n    this.$gutter.setAttribute(\"aria-hidden\", true);\n    this.scroller = dom.createElement(\"div\");\n    this.scroller.className = \"ace_scroller\";\n    this.container.appendChild(this.scroller);\n    this.content = dom.createElement(\"div\");\n    this.content.className = \"ace_content\";\n    this.scroller.appendChild(this.content);\n    this.$gutterLayer = new GutterLayer(this.$gutter);\n    this.$gutterLayer.on(\"changeGutterWidth\", this.onGutterResize.bind(this));\n    this.$markerBack = new MarkerLayer(this.content);\n    var textLayer = this.$textLayer = new TextLayer(this.content);\n    this.canvas = textLayer.element;\n    this.$markerFront = new MarkerLayer(this.content);\n    this.$cursorLayer = new CursorLayer(this.content);\n    this.$horizScroll = false;\n    this.$vScroll = false;\n    this.scrollBar =\n        this.scrollBarV = new VScrollBar(this.container, this);\n    this.scrollBarH = new HScrollBar(this.container, this);\n    this.scrollBarV.on(\"scroll\", function (e) {\n        if (!_self.$scrollAnimation)\n            _self.session.setScrollTop(e.data - _self.scrollMargin.top);\n    });\n    this.scrollBarH.on(\"scroll\", function (e) {\n        if (!_self.$scrollAnimation)\n            _self.session.setScrollLeft(e.data - _self.scrollMargin.left);\n    });\n    this.scrollTop = 0;\n    this.scrollLeft = 0;\n    this.cursorPos = {\n        row: 0,\n        column: 0\n    };\n    this.$fontMetrics = new FontMetrics(this.container, this.$textLayer.MAX_CHUNK_LENGTH);\n    this.$textLayer.$setFontMetrics(this.$fontMetrics);\n    this.$textLayer.on(\"changeCharacterSize\", function (e) {\n        _self.updateCharacterSize();\n        _self.onResize(true, _self.gutterWidth, _self.$size.width, _self.$size.height);\n        _self._signal(\"changeCharacterSize\", e);\n    });\n    this.$size = {\n        width: 0,\n        height: 0,\n        scrollerHeight: 0,\n        scrollerWidth: 0,\n        $dirty: true\n    };\n    this.layerConfig = {\n        width: 1,\n        padding: 0,\n        firstRow: 0,\n        firstRowScreen: 0,\n        lastRow: 0,\n        lineHeight: 0,\n        characterWidth: 0,\n        minHeight: 1,\n        maxHeight: 1,\n        offset: 0,\n        height: 1,\n        gutterOffset: 1\n    };\n    this.scrollMargin = {\n        left: 0,\n        right: 0,\n        top: 0,\n        bottom: 0,\n        v: 0,\n        h: 0\n    };\n    this.margin = {\n        left: 0,\n        right: 0,\n        top: 0,\n        bottom: 0,\n        v: 0,\n        h: 0\n    };\n    this.$keepTextAreaAtCursor = !useragent.isIOS;\n    this.$loop = new RenderLoop(this.$renderChanges.bind(this), this.container.ownerDocument.defaultView);\n    this.$loop.schedule(this.CHANGE_FULL);\n    this.updateCharacterSize();\n    this.setPadding(4);\n    config.resetOptions(this);\n    config._signal(\"renderer\", this);\n};\n(function () {\n    this.CHANGE_CURSOR = 1;\n    this.CHANGE_MARKER = 2;\n    this.CHANGE_GUTTER = 4;\n    this.CHANGE_SCROLL = 8;\n    this.CHANGE_LINES = 16;\n    this.CHANGE_TEXT = 32;\n    this.CHANGE_SIZE = 64;\n    this.CHANGE_MARKER_BACK = 128;\n    this.CHANGE_MARKER_FRONT = 256;\n    this.CHANGE_FULL = 512;\n    this.CHANGE_H_SCROLL = 1024;\n    oop.implement(this, EventEmitter);\n    this.updateCharacterSize = function () {\n        if (this.$textLayer.allowBoldFonts != this.$allowBoldFonts) {\n            this.$allowBoldFonts = this.$textLayer.allowBoldFonts;\n            this.setStyle(\"ace_nobold\", !this.$allowBoldFonts);\n        }\n        this.layerConfig.characterWidth =\n            this.characterWidth = this.$textLayer.getCharacterWidth();\n        this.layerConfig.lineHeight =\n            this.lineHeight = this.$textLayer.getLineHeight();\n        this.$updatePrintMargin();\n        dom.setStyle(this.scroller.style, \"line-height\", this.lineHeight + \"px\");\n    };\n    this.setSession = function (session) {\n        if (this.session)\n            this.session.doc.off(\"changeNewLineMode\", this.onChangeNewLineMode);\n        this.session = session;\n        if (session && this.scrollMargin.top && session.getScrollTop() <= 0)\n            session.setScrollTop(-this.scrollMargin.top);\n        this.$cursorLayer.setSession(session);\n        this.$markerBack.setSession(session);\n        this.$markerFront.setSession(session);\n        this.$gutterLayer.setSession(session);\n        this.$textLayer.setSession(session);\n        if (!session)\n            return;\n        this.$loop.schedule(this.CHANGE_FULL);\n        this.session.$setFontMetrics(this.$fontMetrics);\n        this.scrollBarH.scrollLeft = this.scrollBarV.scrollTop = null;\n        this.onChangeNewLineMode = this.onChangeNewLineMode.bind(this);\n        this.onChangeNewLineMode();\n        this.session.doc.on(\"changeNewLineMode\", this.onChangeNewLineMode);\n    };\n    this.updateLines = function (firstRow, lastRow, force) {\n        if (lastRow === undefined)\n            lastRow = Infinity;\n        if (!this.$changedLines) {\n            this.$changedLines = {\n                firstRow: firstRow,\n                lastRow: lastRow\n            };\n        }\n        else {\n            if (this.$changedLines.firstRow > firstRow)\n                this.$changedLines.firstRow = firstRow;\n            if (this.$changedLines.lastRow < lastRow)\n                this.$changedLines.lastRow = lastRow;\n        }\n        if (this.$changedLines.lastRow < this.layerConfig.firstRow) {\n            if (force)\n                this.$changedLines.lastRow = this.layerConfig.lastRow;\n            else\n                return;\n        }\n        if (this.$changedLines.firstRow > this.layerConfig.lastRow)\n            return;\n        this.$loop.schedule(this.CHANGE_LINES);\n    };\n    this.onChangeNewLineMode = function () {\n        this.$loop.schedule(this.CHANGE_TEXT);\n        this.$textLayer.$updateEolChar();\n        this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR);\n    };\n    this.onChangeTabSize = function () {\n        this.$loop.schedule(this.CHANGE_TEXT | this.CHANGE_MARKER);\n        this.$textLayer.onChangeTabSize();\n    };\n    this.updateText = function () {\n        this.$loop.schedule(this.CHANGE_TEXT);\n    };\n    this.updateFull = function (force) {\n        if (force)\n            this.$renderChanges(this.CHANGE_FULL, true);\n        else\n            this.$loop.schedule(this.CHANGE_FULL);\n    };\n    this.updateFontSize = function () {\n        this.$textLayer.checkForSizeChanges();\n    };\n    this.$changes = 0;\n    this.$updateSizeAsync = function () {\n        if (this.$loop.pending)\n            this.$size.$dirty = true;\n        else\n            this.onResize();\n    };\n    this.onResize = function (force, gutterWidth, width, height) {\n        if (this.resizing > 2)\n            return;\n        else if (this.resizing > 0)\n            this.resizing++;\n        else\n            this.resizing = force ? 1 : 0;\n        var el = this.container;\n        if (!height)\n            height = el.clientHeight || el.scrollHeight;\n        if (!width)\n            width = el.clientWidth || el.scrollWidth;\n        var changes = this.$updateCachedSize(force, gutterWidth, width, height);\n        if (!this.$size.scrollerHeight || (!width && !height))\n            return this.resizing = 0;\n        if (force)\n            this.$gutterLayer.$padding = null;\n        if (force)\n            this.$renderChanges(changes | this.$changes, true);\n        else\n            this.$loop.schedule(changes | this.$changes);\n        if (this.resizing)\n            this.resizing = 0;\n        this.scrollBarH.scrollLeft = this.scrollBarV.scrollTop = null;\n        if (this.$customScrollbar) {\n            this.$updateCustomScrollbar(true);\n        }\n    };\n    this.$updateCachedSize = function (force, gutterWidth, width, height) {\n        height -= (this.$extraHeight || 0);\n        var changes = 0;\n        var size = this.$size;\n        var oldSize = {\n            width: size.width,\n            height: size.height,\n            scrollerHeight: size.scrollerHeight,\n            scrollerWidth: size.scrollerWidth\n        };\n        if (height && (force || size.height != height)) {\n            size.height = height;\n            changes |= this.CHANGE_SIZE;\n            size.scrollerHeight = size.height;\n            if (this.$horizScroll)\n                size.scrollerHeight -= this.scrollBarH.getHeight();\n            this.scrollBarV.setHeight(size.scrollerHeight);\n            this.scrollBarV.element.style.bottom = this.scrollBarH.getHeight() + \"px\";\n            changes = changes | this.CHANGE_SCROLL;\n        }\n        if (width && (force || size.width != width)) {\n            changes |= this.CHANGE_SIZE;\n            size.width = width;\n            if (gutterWidth == null)\n                gutterWidth = this.$showGutter ? this.$gutter.offsetWidth : 0;\n            this.gutterWidth = gutterWidth;\n            dom.setStyle(this.scrollBarH.element.style, \"left\", gutterWidth + \"px\");\n            dom.setStyle(this.scroller.style, \"left\", gutterWidth + this.margin.left + \"px\");\n            size.scrollerWidth = Math.max(0, width - gutterWidth - this.scrollBarV.getWidth() - this.margin.h);\n            dom.setStyle(this.$gutter.style, \"left\", this.margin.left + \"px\");\n            var right = this.scrollBarV.getWidth() + \"px\";\n            dom.setStyle(this.scrollBarH.element.style, \"right\", right);\n            dom.setStyle(this.scroller.style, \"right\", right);\n            dom.setStyle(this.scroller.style, \"bottom\", this.scrollBarH.getHeight());\n            this.scrollBarH.setWidth(size.scrollerWidth);\n            if (this.session && this.session.getUseWrapMode() && this.adjustWrapLimit() || force) {\n                changes |= this.CHANGE_FULL;\n            }\n        }\n        size.$dirty = !width || !height;\n        if (changes)\n            this._signal(\"resize\", oldSize);\n        return changes;\n    };\n    this.onGutterResize = function (width) {\n        var gutterWidth = this.$showGutter ? width : 0;\n        if (gutterWidth != this.gutterWidth)\n            this.$changes |= this.$updateCachedSize(true, gutterWidth, this.$size.width, this.$size.height);\n        if (this.session.getUseWrapMode() && this.adjustWrapLimit()) {\n            this.$loop.schedule(this.CHANGE_FULL);\n        }\n        else if (this.$size.$dirty) {\n            this.$loop.schedule(this.CHANGE_FULL);\n        }\n        else {\n            this.$computeLayerConfig();\n        }\n    };\n    this.adjustWrapLimit = function () {\n        var availableWidth = this.$size.scrollerWidth - this.$padding * 2;\n        var limit = Math.floor(availableWidth / this.characterWidth);\n        return this.session.adjustWrapLimit(limit, this.$showPrintMargin && this.$printMarginColumn);\n    };\n    this.setAnimatedScroll = function (shouldAnimate) {\n        this.setOption(\"animatedScroll\", shouldAnimate);\n    };\n    this.getAnimatedScroll = function () {\n        return this.$animatedScroll;\n    };\n    this.setShowInvisibles = function (showInvisibles) {\n        this.setOption(\"showInvisibles\", showInvisibles);\n        this.session.$bidiHandler.setShowInvisibles(showInvisibles);\n    };\n    this.getShowInvisibles = function () {\n        return this.getOption(\"showInvisibles\");\n    };\n    this.getDisplayIndentGuides = function () {\n        return this.getOption(\"displayIndentGuides\");\n    };\n    this.setDisplayIndentGuides = function (display) {\n        this.setOption(\"displayIndentGuides\", display);\n    };\n    this.getHighlightIndentGuides = function () {\n        return this.getOption(\"highlightIndentGuides\");\n    };\n    this.setHighlightIndentGuides = function (highlight) {\n        this.setOption(\"highlightIndentGuides\", highlight);\n    };\n    this.setShowPrintMargin = function (showPrintMargin) {\n        this.setOption(\"showPrintMargin\", showPrintMargin);\n    };\n    this.getShowPrintMargin = function () {\n        return this.getOption(\"showPrintMargin\");\n    };\n    this.setPrintMarginColumn = function (showPrintMargin) {\n        this.setOption(\"printMarginColumn\", showPrintMargin);\n    };\n    this.getPrintMarginColumn = function () {\n        return this.getOption(\"printMarginColumn\");\n    };\n    this.getShowGutter = function () {\n        return this.getOption(\"showGutter\");\n    };\n    this.setShowGutter = function (show) {\n        return this.setOption(\"showGutter\", show);\n    };\n    this.getFadeFoldWidgets = function () {\n        return this.getOption(\"fadeFoldWidgets\");\n    };\n    this.setFadeFoldWidgets = function (show) {\n        this.setOption(\"fadeFoldWidgets\", show);\n    };\n    this.setHighlightGutterLine = function (shouldHighlight) {\n        this.setOption(\"highlightGutterLine\", shouldHighlight);\n    };\n    this.getHighlightGutterLine = function () {\n        return this.getOption(\"highlightGutterLine\");\n    };\n    this.$updatePrintMargin = function () {\n        if (!this.$showPrintMargin && !this.$printMarginEl)\n            return;\n        if (!this.$printMarginEl) {\n            var containerEl = dom.createElement(\"div\");\n            containerEl.className = \"ace_layer ace_print-margin-layer\";\n            this.$printMarginEl = dom.createElement(\"div\");\n            this.$printMarginEl.className = \"ace_print-margin\";\n            containerEl.appendChild(this.$printMarginEl);\n            this.content.insertBefore(containerEl, this.content.firstChild);\n        }\n        var style = this.$printMarginEl.style;\n        style.left = Math.round(this.characterWidth * this.$printMarginColumn + this.$padding) + \"px\";\n        style.visibility = this.$showPrintMargin ? \"visible\" : \"hidden\";\n        if (this.session && this.session.$wrap == -1)\n            this.adjustWrapLimit();\n    };\n    this.getContainerElement = function () {\n        return this.container;\n    };\n    this.getMouseEventTarget = function () {\n        return this.scroller;\n    };\n    this.getTextAreaContainer = function () {\n        return this.container;\n    };\n    this.$moveTextAreaToCursor = function () {\n        if (this.$isMousePressed)\n            return;\n        var style = this.textarea.style;\n        var composition = this.$composition;\n        if (!this.$keepTextAreaAtCursor && !composition) {\n            dom.translate(this.textarea, -100, 0);\n            return;\n        }\n        var pixelPos = this.$cursorLayer.$pixelPos;\n        if (!pixelPos)\n            return;\n        if (composition && composition.markerRange)\n            pixelPos = this.$cursorLayer.getPixelPosition(composition.markerRange.start, true);\n        var config = this.layerConfig;\n        var posTop = pixelPos.top;\n        var posLeft = pixelPos.left;\n        posTop -= config.offset;\n        var h = composition && composition.useTextareaForIME ? this.lineHeight : HIDE_TEXTAREA ? 0 : 1;\n        if (posTop < 0 || posTop > config.height - h) {\n            dom.translate(this.textarea, 0, 0);\n            return;\n        }\n        var w = 1;\n        var maxTop = this.$size.height - h;\n        if (!composition) {\n            posTop += this.lineHeight;\n        }\n        else {\n            if (composition.useTextareaForIME) {\n                var val = this.textarea.value;\n                w = this.characterWidth * (this.session.$getStringScreenWidth(val)[0]);\n            }\n            else {\n                posTop += this.lineHeight + 2;\n            }\n        }\n        posLeft -= this.scrollLeft;\n        if (posLeft > this.$size.scrollerWidth - w)\n            posLeft = this.$size.scrollerWidth - w;\n        posLeft += this.gutterWidth + this.margin.left;\n        dom.setStyle(style, \"height\", h + \"px\");\n        dom.setStyle(style, \"width\", w + \"px\");\n        dom.translate(this.textarea, Math.min(posLeft, this.$size.scrollerWidth - w), Math.min(posTop, maxTop));\n    };\n    this.getFirstVisibleRow = function () {\n        return this.layerConfig.firstRow;\n    };\n    this.getFirstFullyVisibleRow = function () {\n        return this.layerConfig.firstRow + (this.layerConfig.offset === 0 ? 0 : 1);\n    };\n    this.getLastFullyVisibleRow = function () {\n        var config = this.layerConfig;\n        var lastRow = config.lastRow;\n        var top = this.session.documentToScreenRow(lastRow, 0) * config.lineHeight;\n        if (top - this.session.getScrollTop() > config.height - config.lineHeight)\n            return lastRow - 1;\n        return lastRow;\n    };\n    this.getLastVisibleRow = function () {\n        return this.layerConfig.lastRow;\n    };\n    this.$padding = null;\n    this.setPadding = function (padding) {\n        this.$padding = padding;\n        this.$textLayer.setPadding(padding);\n        this.$cursorLayer.setPadding(padding);\n        this.$markerFront.setPadding(padding);\n        this.$markerBack.setPadding(padding);\n        this.$loop.schedule(this.CHANGE_FULL);\n        this.$updatePrintMargin();\n    };\n    this.setScrollMargin = function (top, bottom, left, right) {\n        var sm = this.scrollMargin;\n        sm.top = top | 0;\n        sm.bottom = bottom | 0;\n        sm.right = right | 0;\n        sm.left = left | 0;\n        sm.v = sm.top + sm.bottom;\n        sm.h = sm.left + sm.right;\n        if (sm.top && this.scrollTop <= 0 && this.session)\n            this.session.setScrollTop(-sm.top);\n        this.updateFull();\n    };\n    this.setMargin = function (top, bottom, left, right) {\n        var sm = this.margin;\n        sm.top = top | 0;\n        sm.bottom = bottom | 0;\n        sm.right = right | 0;\n        sm.left = left | 0;\n        sm.v = sm.top + sm.bottom;\n        sm.h = sm.left + sm.right;\n        this.$updateCachedSize(true, this.gutterWidth, this.$size.width, this.$size.height);\n        this.updateFull();\n    };\n    this.getHScrollBarAlwaysVisible = function () {\n        return this.$hScrollBarAlwaysVisible;\n    };\n    this.setHScrollBarAlwaysVisible = function (alwaysVisible) {\n        this.setOption(\"hScrollBarAlwaysVisible\", alwaysVisible);\n    };\n    this.getVScrollBarAlwaysVisible = function () {\n        return this.$vScrollBarAlwaysVisible;\n    };\n    this.setVScrollBarAlwaysVisible = function (alwaysVisible) {\n        this.setOption(\"vScrollBarAlwaysVisible\", alwaysVisible);\n    };\n    this.$updateScrollBarV = function () {\n        var scrollHeight = this.layerConfig.maxHeight;\n        var scrollerHeight = this.$size.scrollerHeight;\n        if (!this.$maxLines && this.$scrollPastEnd) {\n            scrollHeight -= (scrollerHeight - this.lineHeight) * this.$scrollPastEnd;\n            if (this.scrollTop > scrollHeight - scrollerHeight) {\n                scrollHeight = this.scrollTop + scrollerHeight;\n                this.scrollBarV.scrollTop = null;\n            }\n        }\n        this.scrollBarV.setScrollHeight(scrollHeight + this.scrollMargin.v);\n        this.scrollBarV.setScrollTop(this.scrollTop + this.scrollMargin.top);\n    };\n    this.$updateScrollBarH = function () {\n        this.scrollBarH.setScrollWidth(this.layerConfig.width + 2 * this.$padding + this.scrollMargin.h);\n        this.scrollBarH.setScrollLeft(this.scrollLeft + this.scrollMargin.left);\n    };\n    this.$frozen = false;\n    this.freeze = function () {\n        this.$frozen = true;\n    };\n    this.unfreeze = function () {\n        this.$frozen = false;\n    };\n    this.$renderChanges = function (changes, force) {\n        if (this.$changes) {\n            changes |= this.$changes;\n            this.$changes = 0;\n        }\n        if ((!this.session || !this.container.offsetWidth || this.$frozen) || (!changes && !force)) {\n            this.$changes |= changes;\n            return;\n        }\n        if (this.$size.$dirty) {\n            this.$changes |= changes;\n            return this.onResize(true);\n        }\n        if (!this.lineHeight) {\n            this.$textLayer.checkForSizeChanges();\n        }\n        this._signal(\"beforeRender\", changes);\n        if (this.session && this.session.$bidiHandler)\n            this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);\n        var config = this.layerConfig;\n        if (changes & this.CHANGE_FULL ||\n            changes & this.CHANGE_SIZE ||\n            changes & this.CHANGE_TEXT ||\n            changes & this.CHANGE_LINES ||\n            changes & this.CHANGE_SCROLL ||\n            changes & this.CHANGE_H_SCROLL) {\n            changes |= this.$computeLayerConfig() | this.$loop.clear();\n            if (config.firstRow != this.layerConfig.firstRow && config.firstRowScreen == this.layerConfig.firstRowScreen) {\n                var st = this.scrollTop + (config.firstRow - this.layerConfig.firstRow) * this.lineHeight;\n                if (st > 0) {\n                    this.scrollTop = st;\n                    changes = changes | this.CHANGE_SCROLL;\n                    changes |= this.$computeLayerConfig() | this.$loop.clear();\n                }\n            }\n            config = this.layerConfig;\n            this.$updateScrollBarV();\n            if (changes & this.CHANGE_H_SCROLL)\n                this.$updateScrollBarH();\n            dom.translate(this.content, -this.scrollLeft, -config.offset);\n            var width = config.width + 2 * this.$padding + \"px\";\n            var height = config.minHeight + \"px\";\n            dom.setStyle(this.content.style, \"width\", width);\n            dom.setStyle(this.content.style, \"height\", height);\n        }\n        if (changes & this.CHANGE_H_SCROLL) {\n            dom.translate(this.content, -this.scrollLeft, -config.offset);\n            this.scroller.className = this.scrollLeft <= 0 ? \"ace_scroller\" : \"ace_scroller ace_scroll-left\";\n        }\n        if (changes & this.CHANGE_FULL) {\n            this.$changedLines = null;\n            this.$textLayer.update(config);\n            if (this.$showGutter)\n                this.$gutterLayer.update(config);\n            if (this.$customScrollbar) {\n                this.$scrollDecorator.$updateDecorators(config);\n            }\n            this.$markerBack.update(config);\n            this.$markerFront.update(config);\n            this.$cursorLayer.update(config);\n            this.$moveTextAreaToCursor();\n            this._signal(\"afterRender\", changes);\n            return;\n        }\n        if (changes & this.CHANGE_SCROLL) {\n            this.$changedLines = null;\n            if (changes & this.CHANGE_TEXT || changes & this.CHANGE_LINES)\n                this.$textLayer.update(config);\n            else\n                this.$textLayer.scrollLines(config);\n            if (this.$showGutter) {\n                if (changes & this.CHANGE_GUTTER || changes & this.CHANGE_LINES)\n                    this.$gutterLayer.update(config);\n                else\n                    this.$gutterLayer.scrollLines(config);\n            }\n            if (this.$customScrollbar) {\n                this.$scrollDecorator.$updateDecorators(config);\n            }\n            this.$markerBack.update(config);\n            this.$markerFront.update(config);\n            this.$cursorLayer.update(config);\n            this.$moveTextAreaToCursor();\n            this._signal(\"afterRender\", changes);\n            return;\n        }\n        if (changes & this.CHANGE_TEXT) {\n            this.$changedLines = null;\n            this.$textLayer.update(config);\n            if (this.$showGutter)\n                this.$gutterLayer.update(config);\n            if (this.$customScrollbar) {\n                this.$scrollDecorator.$updateDecorators(config);\n            }\n        }\n        else if (changes & this.CHANGE_LINES) {\n            if (this.$updateLines() || (changes & this.CHANGE_GUTTER) && this.$showGutter)\n                this.$gutterLayer.update(config);\n            if (this.$customScrollbar) {\n                this.$scrollDecorator.$updateDecorators(config);\n            }\n        }\n        else if (changes & this.CHANGE_TEXT || changes & this.CHANGE_GUTTER) {\n            if (this.$showGutter)\n                this.$gutterLayer.update(config);\n            if (this.$customScrollbar) {\n                this.$scrollDecorator.$updateDecorators(config);\n            }\n        }\n        else if (changes & this.CHANGE_CURSOR) {\n            if (this.$highlightGutterLine)\n                this.$gutterLayer.updateLineHighlight(config);\n            if (this.$customScrollbar) {\n                this.$scrollDecorator.$updateDecorators(config);\n            }\n        }\n        if (changes & this.CHANGE_CURSOR) {\n            this.$cursorLayer.update(config);\n            this.$moveTextAreaToCursor();\n        }\n        if (changes & (this.CHANGE_MARKER | this.CHANGE_MARKER_FRONT)) {\n            this.$markerFront.update(config);\n        }\n        if (changes & (this.CHANGE_MARKER | this.CHANGE_MARKER_BACK)) {\n            this.$markerBack.update(config);\n        }\n        this._signal(\"afterRender\", changes);\n    };\n    this.$autosize = function () {\n        var height = this.session.getScreenLength() * this.lineHeight;\n        var maxHeight = this.$maxLines * this.lineHeight;\n        var desiredHeight = Math.min(maxHeight, Math.max((this.$minLines || 1) * this.lineHeight, height)) + this.scrollMargin.v + (this.$extraHeight || 0);\n        if (this.$horizScroll)\n            desiredHeight += this.scrollBarH.getHeight();\n        if (this.$maxPixelHeight && desiredHeight > this.$maxPixelHeight)\n            desiredHeight = this.$maxPixelHeight;\n        var hideScrollbars = desiredHeight <= 2 * this.lineHeight;\n        var vScroll = !hideScrollbars && height > maxHeight;\n        if (desiredHeight != this.desiredHeight ||\n            this.$size.height != this.desiredHeight || vScroll != this.$vScroll) {\n            if (vScroll != this.$vScroll) {\n                this.$vScroll = vScroll;\n                this.scrollBarV.setVisible(vScroll);\n            }\n            var w = this.container.clientWidth;\n            this.container.style.height = desiredHeight + \"px\";\n            this.$updateCachedSize(true, this.$gutterWidth, w, desiredHeight);\n            this.desiredHeight = desiredHeight;\n            this._signal(\"autosize\");\n        }\n    };\n    this.$computeLayerConfig = function () {\n        var session = this.session;\n        var size = this.$size;\n        var hideScrollbars = size.height <= 2 * this.lineHeight;\n        var screenLines = this.session.getScreenLength();\n        var maxHeight = screenLines * this.lineHeight;\n        var longestLine = this.$getLongestLine();\n        var horizScroll = !hideScrollbars && (this.$hScrollBarAlwaysVisible ||\n            size.scrollerWidth - longestLine - 2 * this.$padding < 0);\n        var hScrollChanged = this.$horizScroll !== horizScroll;\n        if (hScrollChanged) {\n            this.$horizScroll = horizScroll;\n            this.scrollBarH.setVisible(horizScroll);\n        }\n        var vScrollBefore = this.$vScroll; // autosize can change vscroll value in which case we need to update longestLine\n        if (this.$maxLines && this.lineHeight > 1)\n            this.$autosize();\n        var minHeight = size.scrollerHeight + this.lineHeight;\n        var scrollPastEnd = !this.$maxLines && this.$scrollPastEnd\n            ? (size.scrollerHeight - this.lineHeight) * this.$scrollPastEnd\n            : 0;\n        maxHeight += scrollPastEnd;\n        var sm = this.scrollMargin;\n        this.session.setScrollTop(Math.max(-sm.top, Math.min(this.scrollTop, maxHeight - size.scrollerHeight + sm.bottom)));\n        this.session.setScrollLeft(Math.max(-sm.left, Math.min(this.scrollLeft, longestLine + 2 * this.$padding - size.scrollerWidth + sm.right)));\n        var vScroll = !hideScrollbars && (this.$vScrollBarAlwaysVisible ||\n            size.scrollerHeight - maxHeight + scrollPastEnd < 0 || this.scrollTop > sm.top);\n        var vScrollChanged = vScrollBefore !== vScroll;\n        if (vScrollChanged) {\n            this.$vScroll = vScroll;\n            this.scrollBarV.setVisible(vScroll);\n        }\n        var offset = this.scrollTop % this.lineHeight;\n        var lineCount = Math.ceil(minHeight / this.lineHeight) - 1;\n        var firstRow = Math.max(0, Math.round((this.scrollTop - offset) / this.lineHeight));\n        var lastRow = firstRow + lineCount;\n        var firstRowScreen, firstRowHeight;\n        var lineHeight = this.lineHeight;\n        firstRow = session.screenToDocumentRow(firstRow, 0);\n        var foldLine = session.getFoldLine(firstRow);\n        if (foldLine) {\n            firstRow = foldLine.start.row;\n        }\n        firstRowScreen = session.documentToScreenRow(firstRow, 0);\n        firstRowHeight = session.getRowLength(firstRow) * lineHeight;\n        lastRow = Math.min(session.screenToDocumentRow(lastRow, 0), session.getLength() - 1);\n        minHeight = size.scrollerHeight + session.getRowLength(lastRow) * lineHeight +\n            firstRowHeight;\n        offset = this.scrollTop - firstRowScreen * lineHeight;\n        var changes = 0;\n        if (this.layerConfig.width != longestLine || hScrollChanged)\n            changes = this.CHANGE_H_SCROLL;\n        if (hScrollChanged || vScrollChanged) {\n            changes |= this.$updateCachedSize(true, this.gutterWidth, size.width, size.height);\n            this._signal(\"scrollbarVisibilityChanged\");\n            if (vScrollChanged)\n                longestLine = this.$getLongestLine();\n        }\n        this.layerConfig = {\n            width: longestLine,\n            padding: this.$padding,\n            firstRow: firstRow,\n            firstRowScreen: firstRowScreen,\n            lastRow: lastRow,\n            lineHeight: lineHeight,\n            characterWidth: this.characterWidth,\n            minHeight: minHeight,\n            maxHeight: maxHeight,\n            offset: offset,\n            gutterOffset: lineHeight ? Math.max(0, Math.ceil((offset + size.height - size.scrollerHeight) / lineHeight)) : 0,\n            height: this.$size.scrollerHeight\n        };\n        if (this.session.$bidiHandler)\n            this.session.$bidiHandler.setContentWidth(longestLine - this.$padding);\n        return changes;\n    };\n    this.$updateLines = function () {\n        if (!this.$changedLines)\n            return;\n        var firstRow = this.$changedLines.firstRow;\n        var lastRow = this.$changedLines.lastRow;\n        this.$changedLines = null;\n        var layerConfig = this.layerConfig;\n        if (firstRow > layerConfig.lastRow + 1) {\n            return;\n        }\n        if (lastRow < layerConfig.firstRow) {\n            return;\n        }\n        if (lastRow === Infinity) {\n            if (this.$showGutter)\n                this.$gutterLayer.update(layerConfig);\n            this.$textLayer.update(layerConfig);\n            return;\n        }\n        this.$textLayer.updateLines(layerConfig, firstRow, lastRow);\n        return true;\n    };\n    this.$getLongestLine = function () {\n        var charCount = this.session.getScreenWidth();\n        if (this.showInvisibles && !this.session.$useWrapMode)\n            charCount += 1;\n        if (this.$textLayer && charCount > this.$textLayer.MAX_LINE_LENGTH)\n            charCount = this.$textLayer.MAX_LINE_LENGTH + 30;\n        return Math.max(this.$size.scrollerWidth - 2 * this.$padding, Math.round(charCount * this.characterWidth));\n    };\n    this.updateFrontMarkers = function () {\n        this.$markerFront.setMarkers(this.session.getMarkers(true));\n        this.$loop.schedule(this.CHANGE_MARKER_FRONT);\n    };\n    this.updateBackMarkers = function () {\n        this.$markerBack.setMarkers(this.session.getMarkers());\n        this.$loop.schedule(this.CHANGE_MARKER_BACK);\n    };\n    this.addGutterDecoration = function (row, className) {\n        this.$gutterLayer.addGutterDecoration(row, className);\n    };\n    this.removeGutterDecoration = function (row, className) {\n        this.$gutterLayer.removeGutterDecoration(row, className);\n    };\n    this.updateBreakpoints = function (rows) {\n        this.$loop.schedule(this.CHANGE_GUTTER);\n    };\n    this.setAnnotations = function (annotations) {\n        this.$gutterLayer.setAnnotations(annotations);\n        this.$loop.schedule(this.CHANGE_GUTTER);\n    };\n    this.updateCursor = function () {\n        this.$loop.schedule(this.CHANGE_CURSOR);\n    };\n    this.hideCursor = function () {\n        this.$cursorLayer.hideCursor();\n    };\n    this.showCursor = function () {\n        this.$cursorLayer.showCursor();\n    };\n    this.scrollSelectionIntoView = function (anchor, lead, offset) {\n        this.scrollCursorIntoView(anchor, offset);\n        this.scrollCursorIntoView(lead, offset);\n    };\n    this.scrollCursorIntoView = function (cursor, offset, $viewMargin) {\n        if (this.$size.scrollerHeight === 0)\n            return;\n        var pos = this.$cursorLayer.getPixelPosition(cursor);\n        var newLeft = pos.left;\n        var newTop = pos.top;\n        var topMargin = $viewMargin && $viewMargin.top || 0;\n        var bottomMargin = $viewMargin && $viewMargin.bottom || 0;\n        if (this.$scrollAnimation) {\n            this.$stopAnimation = true;\n        }\n        var currentTop = this.$scrollAnimation ? this.session.getScrollTop() : this.scrollTop;\n        if (currentTop + topMargin > newTop) {\n            if (offset && currentTop + topMargin > newTop + this.lineHeight)\n                newTop -= offset * this.$size.scrollerHeight;\n            if (newTop === 0)\n                newTop = -this.scrollMargin.top;\n            this.session.setScrollTop(newTop);\n        }\n        else if (currentTop + this.$size.scrollerHeight - bottomMargin < newTop + this.lineHeight) {\n            if (offset && currentTop + this.$size.scrollerHeight - bottomMargin < newTop - this.lineHeight)\n                newTop += offset * this.$size.scrollerHeight;\n            this.session.setScrollTop(newTop + this.lineHeight + bottomMargin - this.$size.scrollerHeight);\n        }\n        var currentLeft = this.scrollLeft;\n        var twoCharsWidth = 2 * this.layerConfig.characterWidth;\n        if (newLeft - twoCharsWidth < currentLeft) {\n            newLeft -= twoCharsWidth;\n            if (newLeft < this.$padding + twoCharsWidth) {\n                newLeft = -this.scrollMargin.left;\n            }\n            this.session.setScrollLeft(newLeft);\n        }\n        else {\n            newLeft += twoCharsWidth;\n            if (currentLeft + this.$size.scrollerWidth < newLeft + this.characterWidth) {\n                this.session.setScrollLeft(Math.round(newLeft + this.characterWidth - this.$size.scrollerWidth));\n            }\n            else if (currentLeft <= this.$padding && newLeft - currentLeft < this.characterWidth) {\n                this.session.setScrollLeft(0);\n            }\n        }\n    };\n    this.getScrollTop = function () {\n        return this.session.getScrollTop();\n    };\n    this.getScrollLeft = function () {\n        return this.session.getScrollLeft();\n    };\n    this.getScrollTopRow = function () {\n        return this.scrollTop / this.lineHeight;\n    };\n    this.getScrollBottomRow = function () {\n        return Math.max(0, Math.floor((this.scrollTop + this.$size.scrollerHeight) / this.lineHeight) - 1);\n    };\n    this.scrollToRow = function (row) {\n        this.session.setScrollTop(row * this.lineHeight);\n    };\n    this.alignCursor = function (cursor, alignment) {\n        if (typeof cursor == \"number\")\n            cursor = { row: cursor, column: 0 };\n        var pos = this.$cursorLayer.getPixelPosition(cursor);\n        var h = this.$size.scrollerHeight - this.lineHeight;\n        var offset = pos.top - h * (alignment || 0);\n        this.session.setScrollTop(offset);\n        return offset;\n    };\n    this.STEPS = 8;\n    this.$calcSteps = function (fromValue, toValue) {\n        var i = 0;\n        var l = this.STEPS;\n        var steps = [];\n        var func = function (t, x_min, dx) {\n            return dx * (Math.pow(t - 1, 3) + 1) + x_min;\n        };\n        for (i = 0; i < l; ++i)\n            steps.push(func(i / this.STEPS, fromValue, toValue - fromValue));\n        return steps;\n    };\n    this.scrollToLine = function (line, center, animate, callback) {\n        var pos = this.$cursorLayer.getPixelPosition({ row: line, column: 0 });\n        var offset = pos.top;\n        if (center)\n            offset -= this.$size.scrollerHeight / 2;\n        var initialScroll = this.scrollTop;\n        this.session.setScrollTop(offset);\n        if (animate !== false)\n            this.animateScrolling(initialScroll, callback);\n    };\n    this.animateScrolling = function (fromValue, callback) {\n        var toValue = this.scrollTop;\n        if (!this.$animatedScroll)\n            return;\n        var _self = this;\n        if (fromValue == toValue)\n            return;\n        if (this.$scrollAnimation) {\n            var oldSteps = this.$scrollAnimation.steps;\n            if (oldSteps.length) {\n                fromValue = oldSteps[0];\n                if (fromValue == toValue)\n                    return;\n            }\n        }\n        var steps = _self.$calcSteps(fromValue, toValue);\n        this.$scrollAnimation = { from: fromValue, to: toValue, steps: steps };\n        clearInterval(this.$timer);\n        _self.session.setScrollTop(steps.shift());\n        _self.session.$scrollTop = toValue;\n        function endAnimation() {\n            _self.$timer = clearInterval(_self.$timer);\n            _self.$scrollAnimation = null;\n            _self.$stopAnimation = false;\n            callback && callback();\n        }\n        this.$timer = setInterval(function () {\n            if (_self.$stopAnimation) {\n                endAnimation();\n                return;\n            }\n            if (!_self.session)\n                return clearInterval(_self.$timer);\n            if (steps.length) {\n                _self.session.setScrollTop(steps.shift());\n                _self.session.$scrollTop = toValue;\n            }\n            else if (toValue != null) {\n                _self.session.$scrollTop = -1;\n                _self.session.setScrollTop(toValue);\n                toValue = null;\n            }\n            else {\n                endAnimation();\n            }\n        }, 10);\n    };\n    this.scrollToY = function (scrollTop) {\n        if (this.scrollTop !== scrollTop) {\n            this.$loop.schedule(this.CHANGE_SCROLL);\n            this.scrollTop = scrollTop;\n        }\n    };\n    this.scrollToX = function (scrollLeft) {\n        if (this.scrollLeft !== scrollLeft)\n            this.scrollLeft = scrollLeft;\n        this.$loop.schedule(this.CHANGE_H_SCROLL);\n    };\n    this.scrollTo = function (x, y) {\n        this.session.setScrollTop(y);\n        this.session.setScrollLeft(x);\n    };\n    this.scrollBy = function (deltaX, deltaY) {\n        deltaY && this.session.setScrollTop(this.session.getScrollTop() + deltaY);\n        deltaX && this.session.setScrollLeft(this.session.getScrollLeft() + deltaX);\n    };\n    this.isScrollableBy = function (deltaX, deltaY) {\n        if (deltaY < 0 && this.session.getScrollTop() >= 1 - this.scrollMargin.top)\n            return true;\n        if (deltaY > 0 && this.session.getScrollTop() + this.$size.scrollerHeight\n            - this.layerConfig.maxHeight < -1 + this.scrollMargin.bottom)\n            return true;\n        if (deltaX < 0 && this.session.getScrollLeft() >= 1 - this.scrollMargin.left)\n            return true;\n        if (deltaX > 0 && this.session.getScrollLeft() + this.$size.scrollerWidth\n            - this.layerConfig.width < -1 + this.scrollMargin.right)\n            return true;\n    };\n    this.pixelToScreenCoordinates = function (x, y) {\n        var canvasPos;\n        if (this.$hasCssTransforms) {\n            canvasPos = { top: 0, left: 0 };\n            var p = this.$fontMetrics.transformCoordinates([x, y]);\n            x = p[1] - this.gutterWidth - this.margin.left;\n            y = p[0];\n        }\n        else {\n            canvasPos = this.scroller.getBoundingClientRect();\n        }\n        var offsetX = x + this.scrollLeft - canvasPos.left - this.$padding;\n        var offset = offsetX / this.characterWidth;\n        var row = Math.floor((y + this.scrollTop - canvasPos.top) / this.lineHeight);\n        var col = this.$blockCursor ? Math.floor(offset) : Math.round(offset);\n        return { row: row, column: col, side: offset - col > 0 ? 1 : -1, offsetX: offsetX };\n    };\n    this.screenToTextCoordinates = function (x, y) {\n        var canvasPos;\n        if (this.$hasCssTransforms) {\n            canvasPos = { top: 0, left: 0 };\n            var p = this.$fontMetrics.transformCoordinates([x, y]);\n            x = p[1] - this.gutterWidth - this.margin.left;\n            y = p[0];\n        }\n        else {\n            canvasPos = this.scroller.getBoundingClientRect();\n        }\n        var offsetX = x + this.scrollLeft - canvasPos.left - this.$padding;\n        var offset = offsetX / this.characterWidth;\n        var col = this.$blockCursor ? Math.floor(offset) : Math.round(offset);\n        var row = Math.floor((y + this.scrollTop - canvasPos.top) / this.lineHeight);\n        return this.session.screenToDocumentPosition(row, Math.max(col, 0), offsetX);\n    };\n    this.textToScreenCoordinates = function (row, column) {\n        var canvasPos = this.scroller.getBoundingClientRect();\n        var pos = this.session.documentToScreenPosition(row, column);\n        var x = this.$padding + (this.session.$bidiHandler.isBidiRow(pos.row, row)\n            ? this.session.$bidiHandler.getPosLeft(pos.column)\n            : Math.round(pos.column * this.characterWidth));\n        var y = pos.row * this.lineHeight;\n        return {\n            pageX: canvasPos.left + x - this.scrollLeft,\n            pageY: canvasPos.top + y - this.scrollTop\n        };\n    };\n    this.visualizeFocus = function () {\n        dom.addCssClass(this.container, \"ace_focus\");\n    };\n    this.visualizeBlur = function () {\n        dom.removeCssClass(this.container, \"ace_focus\");\n    };\n    this.showComposition = function (composition) {\n        this.$composition = composition;\n        if (!composition.cssText) {\n            composition.cssText = this.textarea.style.cssText;\n        }\n        if (composition.useTextareaForIME == undefined)\n            composition.useTextareaForIME = this.$useTextareaForIME;\n        if (this.$useTextareaForIME) {\n            dom.addCssClass(this.textarea, \"ace_composition\");\n            this.textarea.style.cssText = \"\";\n            this.$moveTextAreaToCursor();\n            this.$cursorLayer.element.style.display = \"none\";\n        }\n        else {\n            composition.markerId = this.session.addMarker(composition.markerRange, \"ace_composition_marker\", \"text\");\n        }\n    };\n    this.setCompositionText = function (text) {\n        var cursor = this.session.selection.cursor;\n        this.addToken(text, \"composition_placeholder\", cursor.row, cursor.column);\n        this.$moveTextAreaToCursor();\n    };\n    this.hideComposition = function () {\n        if (!this.$composition)\n            return;\n        if (this.$composition.markerId)\n            this.session.removeMarker(this.$composition.markerId);\n        dom.removeCssClass(this.textarea, \"ace_composition\");\n        this.textarea.style.cssText = this.$composition.cssText;\n        var cursor = this.session.selection.cursor;\n        this.removeExtraToken(cursor.row, cursor.column);\n        this.$composition = null;\n        this.$cursorLayer.element.style.display = \"\";\n    };\n    this.addToken = function (text, type, row, column) {\n        var session = this.session;\n        session.bgTokenizer.lines[row] = null;\n        var newToken = { type: type, value: text };\n        var tokens = session.getTokens(row);\n        if (column == null) {\n            tokens.push(newToken);\n        }\n        else {\n            var l = 0;\n            for (var i = 0; i < tokens.length; i++) {\n                var token = tokens[i];\n                l += token.value.length;\n                if (column <= l) {\n                    var diff = token.value.length - (l - column);\n                    var before = token.value.slice(0, diff);\n                    var after = token.value.slice(diff);\n                    tokens.splice(i, 1, { type: token.type, value: before }, newToken, { type: token.type, value: after });\n                    break;\n                }\n            }\n        }\n        this.updateLines(row, row);\n    };\n    this.removeExtraToken = function (row, column) {\n        this.updateLines(row, row);\n    };\n    this.setTheme = function (theme, cb) {\n        var _self = this;\n        this.$themeId = theme;\n        _self._dispatchEvent('themeChange', { theme: theme });\n        if (!theme || typeof theme == \"string\") {\n            var moduleName = theme || this.$options.theme.initialValue;\n            config.loadModule([\"theme\", moduleName], afterLoad);\n        }\n        else {\n            afterLoad(theme);\n        }\n        function afterLoad(module) {\n            if (_self.$themeId != theme)\n                return cb && cb();\n            if (!module || !module.cssClass)\n                throw new Error(\"couldn't load module \" + theme + \" or it didn't call define\");\n            if (module.$id)\n                _self.$themeId = module.$id;\n            dom.importCssString(module.cssText, module.cssClass, _self.container);\n            if (_self.theme)\n                dom.removeCssClass(_self.container, _self.theme.cssClass);\n            var padding = \"padding\" in module ? module.padding\n                : \"padding\" in (_self.theme || {}) ? 4 : _self.$padding;\n            if (_self.$padding && padding != _self.$padding)\n                _self.setPadding(padding);\n            _self.$theme = module.cssClass;\n            _self.theme = module;\n            dom.addCssClass(_self.container, module.cssClass);\n            dom.setCssClass(_self.container, \"ace_dark\", module.isDark);\n            if (_self.$size) {\n                _self.$size.width = 0;\n                _self.$updateSizeAsync();\n            }\n            _self._dispatchEvent('themeLoaded', { theme: module });\n            cb && cb();\n        }\n    };\n    this.getTheme = function () {\n        return this.$themeId;\n    };\n    this.setStyle = function (style, include) {\n        dom.setCssClass(this.container, style, include !== false);\n    };\n    this.unsetStyle = function (style) {\n        dom.removeCssClass(this.container, style);\n    };\n    this.setCursorStyle = function (style) {\n        dom.setStyle(this.scroller.style, \"cursor\", style);\n    };\n    this.setMouseCursor = function (cursorStyle) {\n        dom.setStyle(this.scroller.style, \"cursor\", cursorStyle);\n    };\n    this.attachToShadowRoot = function () {\n        dom.importCssString(editorCss, \"ace_editor.css\", this.container);\n    };\n    this.destroy = function () {\n        this.freeze();\n        this.$fontMetrics.destroy();\n        this.$cursorLayer.destroy();\n        this.removeAllListeners();\n        this.container.textContent = \"\";\n    };\n    this.$updateCustomScrollbar = function (val) {\n        var _self = this;\n        this.$horizScroll = this.$vScroll = null;\n        this.scrollBarV.element.remove();\n        this.scrollBarH.element.remove();\n        if (this.$scrollDecorator) {\n            delete this.$scrollDecorator;\n        }\n        if (val === true) {\n            this.scrollBarV = new VScrollBarCustom(this.container, this);\n            this.scrollBarH = new HScrollBarCustom(this.container, this);\n            this.scrollBarV.setHeight(this.$size.scrollerHeight);\n            this.scrollBarH.setWidth(this.$size.scrollerWidth);\n            this.scrollBarV.addEventListener(\"scroll\", function (e) {\n                if (!_self.$scrollAnimation)\n                    _self.session.setScrollTop(e.data - _self.scrollMargin.top);\n            });\n            this.scrollBarH.addEventListener(\"scroll\", function (e) {\n                if (!_self.$scrollAnimation)\n                    _self.session.setScrollLeft(e.data - _self.scrollMargin.left);\n            });\n            this.$scrollDecorator = new Decorator(this.scrollBarV, this);\n            this.$scrollDecorator.$updateDecorators();\n        }\n        else {\n            this.scrollBarV = new VScrollBar(this.container, this);\n            this.scrollBarH = new HScrollBar(this.container, this);\n            this.scrollBarV.addEventListener(\"scroll\", function (e) {\n                if (!_self.$scrollAnimation)\n                    _self.session.setScrollTop(e.data - _self.scrollMargin.top);\n            });\n            this.scrollBarH.addEventListener(\"scroll\", function (e) {\n                if (!_self.$scrollAnimation)\n                    _self.session.setScrollLeft(e.data - _self.scrollMargin.left);\n            });\n        }\n    };\n}).call(VirtualRenderer.prototype);\nconfig.defineOptions(VirtualRenderer.prototype, \"renderer\", {\n    animatedScroll: { initialValue: false },\n    showInvisibles: {\n        set: function (value) {\n            if (this.$textLayer.setShowInvisibles(value))\n                this.$loop.schedule(this.CHANGE_TEXT);\n        },\n        initialValue: false\n    },\n    showPrintMargin: {\n        set: function () { this.$updatePrintMargin(); },\n        initialValue: true\n    },\n    printMarginColumn: {\n        set: function () { this.$updatePrintMargin(); },\n        initialValue: 80\n    },\n    printMargin: {\n        set: function (val) {\n            if (typeof val == \"number\")\n                this.$printMarginColumn = val;\n            this.$showPrintMargin = !!val;\n            this.$updatePrintMargin();\n        },\n        get: function () {\n            return this.$showPrintMargin && this.$printMarginColumn;\n        }\n    },\n    showGutter: {\n        set: function (show) {\n            this.$gutter.style.display = show ? \"block\" : \"none\";\n            this.$loop.schedule(this.CHANGE_FULL);\n            this.onGutterResize();\n        },\n        initialValue: true\n    },\n    fadeFoldWidgets: {\n        set: function (show) {\n            dom.setCssClass(this.$gutter, \"ace_fade-fold-widgets\", show);\n        },\n        initialValue: false\n    },\n    showFoldWidgets: {\n        set: function (show) {\n            this.$gutterLayer.setShowFoldWidgets(show);\n            this.$loop.schedule(this.CHANGE_GUTTER);\n        },\n        initialValue: true\n    },\n    displayIndentGuides: {\n        set: function (show) {\n            if (this.$textLayer.setDisplayIndentGuides(show))\n                this.$loop.schedule(this.CHANGE_TEXT);\n        },\n        initialValue: true\n    },\n    highlightIndentGuides: {\n        set: function (show) {\n            if (this.$textLayer.setHighlightIndentGuides(show) == true) {\n                this.$textLayer.$highlightIndentGuide();\n            }\n            else {\n                this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells);\n            }\n        },\n        initialValue: true\n    },\n    highlightGutterLine: {\n        set: function (shouldHighlight) {\n            this.$gutterLayer.setHighlightGutterLine(shouldHighlight);\n            this.$loop.schedule(this.CHANGE_GUTTER);\n        },\n        initialValue: true\n    },\n    hScrollBarAlwaysVisible: {\n        set: function (val) {\n            if (!this.$hScrollBarAlwaysVisible || !this.$horizScroll)\n                this.$loop.schedule(this.CHANGE_SCROLL);\n        },\n        initialValue: false\n    },\n    vScrollBarAlwaysVisible: {\n        set: function (val) {\n            if (!this.$vScrollBarAlwaysVisible || !this.$vScroll)\n                this.$loop.schedule(this.CHANGE_SCROLL);\n        },\n        initialValue: false\n    },\n    fontSize: {\n        set: function (size) {\n            if (typeof size == \"number\")\n                size = size + \"px\";\n            this.container.style.fontSize = size;\n            this.updateFontSize();\n        },\n        initialValue: 12\n    },\n    fontFamily: {\n        set: function (name) {\n            this.container.style.fontFamily = name;\n            this.updateFontSize();\n        }\n    },\n    maxLines: {\n        set: function (val) {\n            this.updateFull();\n        }\n    },\n    minLines: {\n        set: function (val) {\n            if (!(this.$minLines < 0x1ffffffffffff))\n                this.$minLines = 0;\n            this.updateFull();\n        }\n    },\n    maxPixelHeight: {\n        set: function (val) {\n            this.updateFull();\n        },\n        initialValue: 0\n    },\n    scrollPastEnd: {\n        set: function (val) {\n            val = +val || 0;\n            if (this.$scrollPastEnd == val)\n                return;\n            this.$scrollPastEnd = val;\n            this.$loop.schedule(this.CHANGE_SCROLL);\n        },\n        initialValue: 0,\n        handlesSet: true\n    },\n    fixedWidthGutter: {\n        set: function (val) {\n            this.$gutterLayer.$fixedWidth = !!val;\n            this.$loop.schedule(this.CHANGE_GUTTER);\n        }\n    },\n    customScrollbar: {\n        set: function (val) {\n            this.$updateCustomScrollbar(val);\n        },\n        initialValue: false\n    },\n    theme: {\n        set: function (val) { this.setTheme(val); },\n        get: function () { return this.$themeId || this.theme; },\n        initialValue: \"./theme/textmate\",\n        handlesSet: true\n    },\n    hasCssTransforms: {},\n    useTextareaForIME: {\n        initialValue: !useragent.isMobile && !useragent.isIE\n    }\n});\nexports.VirtualRenderer = VirtualRenderer;\n\n});\n\nace.define(\"ace/worker/worker_client\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/net\",\"ace/lib/event_emitter\",\"ace/config\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar net = require(\"../lib/net\");\nvar EventEmitter = require(\"../lib/event_emitter\").EventEmitter;\nvar config = require(\"../config\");\n\nfunction $workerBlob(workerUrl) {\n    var script = \"importScripts('\" + net.qualifyURL(workerUrl) + \"');\";\n    try {\n        return new Blob([script], {\"type\": \"application/javascript\"});\n    } catch (e) { // Backwards-compatibility\n        var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder;\n        var blobBuilder = new BlobBuilder();\n        blobBuilder.append(script);\n        return blobBuilder.getBlob(\"application/javascript\");\n    }\n}\n\nfunction createWorker(workerUrl) {\n    if (typeof Worker == \"undefined\")\n        return { postMessage: function() {}, terminate: function() {} };\n    if (config.get(\"loadWorkerFromBlob\")) {\n        var blob = $workerBlob(workerUrl);\n        var URL = window.URL || window.webkitURL;\n        var blobURL = URL.createObjectURL(blob);\n        return new Worker(blobURL);\n    }\n    return new Worker(workerUrl);\n}\n\nvar WorkerClient = function(worker) {\n    if (!worker.postMessage)\n        worker = this.$createWorkerFromOldConfig.apply(this, arguments);\n\n    this.$worker = worker;\n    this.$sendDeltaQueue = this.$sendDeltaQueue.bind(this);\n    this.changeListener = this.changeListener.bind(this);\n    this.onMessage = this.onMessage.bind(this);\n\n    this.callbackId = 1;\n    this.callbacks = {};\n\n    this.$worker.onmessage = this.onMessage;\n};\n\n(function(){\n\n    oop.implement(this, EventEmitter);\n\n    this.$createWorkerFromOldConfig = function(topLevelNamespaces, mod, classname, workerUrl, importScripts) {\n        if (require.nameToUrl && !require.toUrl)\n            require.toUrl = require.nameToUrl;\n\n        if (config.get(\"packaged\") || !require.toUrl) {\n            workerUrl = workerUrl || config.moduleUrl(mod, \"worker\");\n        } else {\n            var normalizePath = this.$normalizePath;\n            workerUrl = workerUrl || normalizePath(require.toUrl(\"ace/worker/worker.js\", null, \"_\"));\n\n            var tlns = {};\n            topLevelNamespaces.forEach(function(ns) {\n                tlns[ns] = normalizePath(require.toUrl(ns, null, \"_\").replace(/(\\.js)?(\\?.*)?$/, \"\"));\n            });\n        }\n\n        this.$worker = createWorker(workerUrl);\n        if (importScripts) {\n            this.send(\"importScripts\", importScripts);\n        }\n        this.$worker.postMessage({\n            init : true,\n            tlns : tlns,\n            module : mod,\n            classname : classname\n        });\n        return this.$worker;\n    };\n\n    this.onMessage = function(e) {\n        var msg = e.data;\n        switch (msg.type) {\n            case \"event\":\n                this._signal(msg.name, {data: msg.data});\n                break;\n            case \"call\":\n                var callback = this.callbacks[msg.id];\n                if (callback) {\n                    callback(msg.data);\n                    delete this.callbacks[msg.id];\n                }\n                break;\n            case \"error\":\n                this.reportError(msg.data);\n                break;\n            case \"log\":\n                window.console && console.log && console.log.apply(console, msg.data);\n                break;\n        }\n    };\n    \n    this.reportError = function(err) {\n        window.console && console.error && console.error(err);\n    };\n\n    this.$normalizePath = function(path) {\n        return net.qualifyURL(path);\n    };\n\n    this.terminate = function() {\n        this._signal(\"terminate\", {});\n        this.deltaQueue = null;\n        this.$worker.terminate();\n        this.$worker = null;\n        if (this.$doc)\n            this.$doc.off(\"change\", this.changeListener);\n        this.$doc = null;\n    };\n\n    this.send = function(cmd, args) {\n        this.$worker.postMessage({command: cmd, args: args});\n    };\n\n    this.call = function(cmd, args, callback) {\n        if (callback) {\n            var id = this.callbackId++;\n            this.callbacks[id] = callback;\n            args.push(id);\n        }\n        this.send(cmd, args);\n    };\n\n    this.emit = function(event, data) {\n        try {\n            if (data.data && data.data.err)\n                data.data.err = {message: data.data.err.message, stack: data.data.err.stack, code: data.data.err.code};\n                this.$worker && this.$worker.postMessage({event: event, data: {data: data.data}});\n        }\n        catch(ex) {\n            console.error(ex.stack);\n        }\n    };\n\n    this.attachToDocument = function(doc) {\n        if (this.$doc)\n            this.terminate();\n\n        this.$doc = doc;\n        this.call(\"setValue\", [doc.getValue()]);\n        doc.on(\"change\", this.changeListener, true);\n    };\n\n    this.changeListener = function(delta) {\n        if (!this.deltaQueue) {\n            this.deltaQueue = [];\n            setTimeout(this.$sendDeltaQueue, 0);\n        }\n        if (delta.action == \"insert\")\n            this.deltaQueue.push(delta.start, delta.lines);\n        else\n            this.deltaQueue.push(delta.start, delta.end);\n    };\n\n    this.$sendDeltaQueue = function() {\n        var q = this.deltaQueue;\n        if (!q) return;\n        this.deltaQueue = null;\n        if (q.length > 50 && q.length > this.$doc.getLength() >> 1) {\n            this.call(\"setValue\", [this.$doc.getValue()]);\n        } else\n            this.emit(\"change\", {data: q});\n    };\n\n}).call(WorkerClient.prototype);\n\n\nvar UIWorkerClient = function(topLevelNamespaces, mod, classname) {\n    var main = null;\n    var emitSync = false;\n    var sender = Object.create(EventEmitter);\n\n    var messageBuffer = [];\n    var workerClient = new WorkerClient({\n        messageBuffer: messageBuffer,\n        terminate: function() {},\n        postMessage: function(e) {\n            messageBuffer.push(e);\n            if (!main) return;\n            if (emitSync)\n                setTimeout(processNext);\n            else\n                processNext();\n        }\n    });\n\n    workerClient.setEmitSync = function(val) { emitSync = val; };\n\n    var processNext = function() {\n        var msg = messageBuffer.shift();\n        if (msg.command)\n            main[msg.command].apply(main, msg.args);\n        else if (msg.event)\n            sender._signal(msg.event, msg.data);\n    };\n\n    sender.postMessage = function(msg) {\n        workerClient.onMessage({data: msg});\n    };\n    sender.callback = function(data, callbackId) {\n        this.postMessage({type: \"call\", id: callbackId, data: data});\n    };\n    sender.emit = function(name, data) {\n        this.postMessage({type: \"event\", name: name, data: data});\n    };\n\n    config.loadModule([\"worker\", mod], function(Main) {\n        main = new Main[classname](sender);\n        while (messageBuffer.length)\n            processNext();\n    });\n\n    return workerClient;\n};\n\nexports.UIWorkerClient = UIWorkerClient;\nexports.WorkerClient = WorkerClient;\nexports.createWorker = createWorker;\n\n\n});\n\nace.define(\"ace/placeholder\",[\"require\",\"exports\",\"module\",\"ace/range\",\"ace/lib/event_emitter\",\"ace/lib/oop\"], function(require, exports, module){\"use strict\";\nvar Range = require(\"./range\").Range;\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar oop = require(\"./lib/oop\");\nvar PlaceHolder = function (session, length, pos, others, mainClass, othersClass) {\n    var _self = this;\n    this.length = length;\n    this.session = session;\n    this.doc = session.getDocument();\n    this.mainClass = mainClass;\n    this.othersClass = othersClass;\n    this.$onUpdate = this.onUpdate.bind(this);\n    this.doc.on(\"change\", this.$onUpdate, true);\n    this.$others = others;\n    this.$onCursorChange = function () {\n        setTimeout(function () {\n            _self.onCursorChange();\n        });\n    };\n    this.$pos = pos;\n    var undoStack = session.getUndoManager().$undoStack || session.getUndoManager().$undostack || { length: -1 };\n    this.$undoStackDepth = undoStack.length;\n    this.setup();\n    session.selection.on(\"changeCursor\", this.$onCursorChange);\n};\n(function () {\n    oop.implement(this, EventEmitter);\n    this.setup = function () {\n        var _self = this;\n        var doc = this.doc;\n        var session = this.session;\n        this.selectionBefore = session.selection.toJSON();\n        if (session.selection.inMultiSelectMode)\n            session.selection.toSingleRange();\n        this.pos = doc.createAnchor(this.$pos.row, this.$pos.column);\n        var pos = this.pos;\n        pos.$insertRight = true;\n        pos.detach();\n        pos.markerId = session.addMarker(new Range(pos.row, pos.column, pos.row, pos.column + this.length), this.mainClass, null, false);\n        this.others = [];\n        this.$others.forEach(function (other) {\n            var anchor = doc.createAnchor(other.row, other.column);\n            anchor.$insertRight = true;\n            anchor.detach();\n            _self.others.push(anchor);\n        });\n        session.setUndoSelect(false);\n    };\n    this.showOtherMarkers = function () {\n        if (this.othersActive)\n            return;\n        var session = this.session;\n        var _self = this;\n        this.othersActive = true;\n        this.others.forEach(function (anchor) {\n            anchor.markerId = session.addMarker(new Range(anchor.row, anchor.column, anchor.row, anchor.column + _self.length), _self.othersClass, null, false);\n        });\n    };\n    this.hideOtherMarkers = function () {\n        if (!this.othersActive)\n            return;\n        this.othersActive = false;\n        for (var i = 0; i < this.others.length; i++) {\n            this.session.removeMarker(this.others[i].markerId);\n        }\n    };\n    this.onUpdate = function (delta) {\n        if (this.$updating)\n            return this.updateAnchors(delta);\n        var range = delta;\n        if (range.start.row !== range.end.row)\n            return;\n        if (range.start.row !== this.pos.row)\n            return;\n        this.$updating = true;\n        var lengthDiff = delta.action === \"insert\" ? range.end.column - range.start.column : range.start.column - range.end.column;\n        var inMainRange = range.start.column >= this.pos.column && range.start.column <= this.pos.column + this.length + 1;\n        var distanceFromStart = range.start.column - this.pos.column;\n        this.updateAnchors(delta);\n        if (inMainRange)\n            this.length += lengthDiff;\n        if (inMainRange && !this.session.$fromUndo) {\n            if (delta.action === 'insert') {\n                for (var i = this.others.length - 1; i >= 0; i--) {\n                    var otherPos = this.others[i];\n                    var newPos = { row: otherPos.row, column: otherPos.column + distanceFromStart };\n                    this.doc.insertMergedLines(newPos, delta.lines);\n                }\n            }\n            else if (delta.action === 'remove') {\n                for (var i = this.others.length - 1; i >= 0; i--) {\n                    var otherPos = this.others[i];\n                    var newPos = { row: otherPos.row, column: otherPos.column + distanceFromStart };\n                    this.doc.remove(new Range(newPos.row, newPos.column, newPos.row, newPos.column - lengthDiff));\n                }\n            }\n        }\n        this.$updating = false;\n        this.updateMarkers();\n    };\n    this.updateAnchors = function (delta) {\n        this.pos.onChange(delta);\n        for (var i = this.others.length; i--;)\n            this.others[i].onChange(delta);\n        this.updateMarkers();\n    };\n    this.updateMarkers = function () {\n        if (this.$updating)\n            return;\n        var _self = this;\n        var session = this.session;\n        var updateMarker = function (pos, className) {\n            session.removeMarker(pos.markerId);\n            pos.markerId = session.addMarker(new Range(pos.row, pos.column, pos.row, pos.column + _self.length), className, null, false);\n        };\n        updateMarker(this.pos, this.mainClass);\n        for (var i = this.others.length; i--;)\n            updateMarker(this.others[i], this.othersClass);\n    };\n    this.onCursorChange = function (event) {\n        if (this.$updating || !this.session)\n            return;\n        var pos = this.session.selection.getCursor();\n        if (pos.row === this.pos.row && pos.column >= this.pos.column && pos.column <= this.pos.column + this.length) {\n            this.showOtherMarkers();\n            this._emit(\"cursorEnter\", event);\n        }\n        else {\n            this.hideOtherMarkers();\n            this._emit(\"cursorLeave\", event);\n        }\n    };\n    this.detach = function () {\n        this.session.removeMarker(this.pos && this.pos.markerId);\n        this.hideOtherMarkers();\n        this.doc.off(\"change\", this.$onUpdate);\n        this.session.selection.off(\"changeCursor\", this.$onCursorChange);\n        this.session.setUndoSelect(true);\n        this.session = null;\n    };\n    this.cancel = function () {\n        if (this.$undoStackDepth === -1)\n            return;\n        var undoManager = this.session.getUndoManager();\n        var undosRequired = (undoManager.$undoStack || undoManager.$undostack).length - this.$undoStackDepth;\n        for (var i = 0; i < undosRequired; i++) {\n            undoManager.undo(this.session, true);\n        }\n        if (this.selectionBefore)\n            this.session.selection.fromJSON(this.selectionBefore);\n    };\n}).call(PlaceHolder.prototype);\nexports.PlaceHolder = PlaceHolder;\n\n});\n\nace.define(\"ace/mouse/multi_select_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/event\",\"ace/lib/useragent\"], function(require, exports, module){var event = require(\"../lib/event\");\nvar useragent = require(\"../lib/useragent\");\nfunction isSamePoint(p1, p2) {\n    return p1.row == p2.row && p1.column == p2.column;\n}\nfunction onMouseDown(e) {\n    var ev = e.domEvent;\n    var alt = ev.altKey;\n    var shift = ev.shiftKey;\n    var ctrl = ev.ctrlKey;\n    var accel = e.getAccelKey();\n    var button = e.getButton();\n    if (ctrl && useragent.isMac)\n        button = ev.button;\n    if (e.editor.inMultiSelectMode && button == 2) {\n        e.editor.textInput.onContextMenu(e.domEvent);\n        return;\n    }\n    if (!ctrl && !alt && !accel) {\n        if (button === 0 && e.editor.inMultiSelectMode)\n            e.editor.exitMultiSelectMode();\n        return;\n    }\n    if (button !== 0)\n        return;\n    var editor = e.editor;\n    var selection = editor.selection;\n    var isMultiSelect = editor.inMultiSelectMode;\n    var pos = e.getDocumentPosition();\n    var cursor = selection.getCursor();\n    var inSelection = e.inSelection() || (selection.isEmpty() && isSamePoint(pos, cursor));\n    var mouseX = e.x, mouseY = e.y;\n    var onMouseSelection = function (e) {\n        mouseX = e.clientX;\n        mouseY = e.clientY;\n    };\n    var session = editor.session;\n    var screenAnchor = editor.renderer.pixelToScreenCoordinates(mouseX, mouseY);\n    var screenCursor = screenAnchor;\n    var selectionMode;\n    if (editor.$mouseHandler.$enableJumpToDef) {\n        if (ctrl && alt || accel && alt)\n            selectionMode = shift ? \"block\" : \"add\";\n        else if (alt && editor.$blockSelectEnabled)\n            selectionMode = \"block\";\n    }\n    else {\n        if (accel && !alt) {\n            selectionMode = \"add\";\n            if (!isMultiSelect && shift)\n                return;\n        }\n        else if (alt && editor.$blockSelectEnabled) {\n            selectionMode = \"block\";\n        }\n    }\n    if (selectionMode && useragent.isMac && ev.ctrlKey) {\n        editor.$mouseHandler.cancelContextMenu();\n    }\n    if (selectionMode == \"add\") {\n        if (!isMultiSelect && inSelection)\n            return; // dragging\n        if (!isMultiSelect) {\n            var range = selection.toOrientedRange();\n            editor.addSelectionMarker(range);\n        }\n        var oldRange = selection.rangeList.rangeAtPoint(pos);\n        editor.inVirtualSelectionMode = true;\n        if (shift) {\n            oldRange = null;\n            range = selection.ranges[0] || range;\n            editor.removeSelectionMarker(range);\n        }\n        editor.once(\"mouseup\", function () {\n            var tmpSel = selection.toOrientedRange();\n            if (oldRange && tmpSel.isEmpty() && isSamePoint(oldRange.cursor, tmpSel.cursor))\n                selection.substractPoint(tmpSel.cursor);\n            else {\n                if (shift) {\n                    selection.substractPoint(range.cursor);\n                }\n                else if (range) {\n                    editor.removeSelectionMarker(range);\n                    selection.addRange(range);\n                }\n                selection.addRange(tmpSel);\n            }\n            editor.inVirtualSelectionMode = false;\n        });\n    }\n    else if (selectionMode == \"block\") {\n        e.stop();\n        editor.inVirtualSelectionMode = true;\n        var initialRange;\n        var rectSel = [];\n        var blockSelect = function () {\n            var newCursor = editor.renderer.pixelToScreenCoordinates(mouseX, mouseY);\n            var cursor = session.screenToDocumentPosition(newCursor.row, newCursor.column, newCursor.offsetX);\n            if (isSamePoint(screenCursor, newCursor) && isSamePoint(cursor, selection.lead))\n                return;\n            screenCursor = newCursor;\n            editor.selection.moveToPosition(cursor);\n            editor.renderer.scrollCursorIntoView();\n            editor.removeSelectionMarkers(rectSel);\n            rectSel = selection.rectangularRangeBlock(screenCursor, screenAnchor);\n            if (editor.$mouseHandler.$clickSelection && rectSel.length == 1 && rectSel[0].isEmpty())\n                rectSel[0] = editor.$mouseHandler.$clickSelection.clone();\n            rectSel.forEach(editor.addSelectionMarker, editor);\n            editor.updateSelectionMarkers();\n        };\n        if (isMultiSelect && !accel) {\n            selection.toSingleRange();\n        }\n        else if (!isMultiSelect && accel) {\n            initialRange = selection.toOrientedRange();\n            editor.addSelectionMarker(initialRange);\n        }\n        if (shift)\n            screenAnchor = session.documentToScreenPosition(selection.lead);\n        else\n            selection.moveToPosition(pos);\n        screenCursor = { row: -1, column: -1 };\n        var onMouseSelectionEnd = function (e) {\n            blockSelect();\n            clearInterval(timerId);\n            editor.removeSelectionMarkers(rectSel);\n            if (!rectSel.length)\n                rectSel = [selection.toOrientedRange()];\n            if (initialRange) {\n                editor.removeSelectionMarker(initialRange);\n                selection.toSingleRange(initialRange);\n            }\n            for (var i = 0; i < rectSel.length; i++)\n                selection.addRange(rectSel[i]);\n            editor.inVirtualSelectionMode = false;\n            editor.$mouseHandler.$clickSelection = null;\n        };\n        var onSelectionInterval = blockSelect;\n        event.capture(editor.container, onMouseSelection, onMouseSelectionEnd);\n        var timerId = setInterval(function () { onSelectionInterval(); }, 20);\n        return e.preventDefault();\n    }\n}\nexports.onMouseDown = onMouseDown;\n\n});\n\nace.define(\"ace/commands/multi_select_commands\",[\"require\",\"exports\",\"module\",\"ace/keyboard/hash_handler\"], function(require, exports, module){// commands to enter multiselect mode\nexports.defaultCommands = [{\n        name: \"addCursorAbove\",\n        description: \"Add cursor above\",\n        exec: function (editor) { editor.selectMoreLines(-1); },\n        bindKey: { win: \"Ctrl-Alt-Up\", mac: \"Ctrl-Alt-Up\" },\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"addCursorBelow\",\n        description: \"Add cursor below\",\n        exec: function (editor) { editor.selectMoreLines(1); },\n        bindKey: { win: \"Ctrl-Alt-Down\", mac: \"Ctrl-Alt-Down\" },\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"addCursorAboveSkipCurrent\",\n        description: \"Add cursor above (skip current)\",\n        exec: function (editor) { editor.selectMoreLines(-1, true); },\n        bindKey: { win: \"Ctrl-Alt-Shift-Up\", mac: \"Ctrl-Alt-Shift-Up\" },\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"addCursorBelowSkipCurrent\",\n        description: \"Add cursor below (skip current)\",\n        exec: function (editor) { editor.selectMoreLines(1, true); },\n        bindKey: { win: \"Ctrl-Alt-Shift-Down\", mac: \"Ctrl-Alt-Shift-Down\" },\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selectMoreBefore\",\n        description: \"Select more before\",\n        exec: function (editor) { editor.selectMore(-1); },\n        bindKey: { win: \"Ctrl-Alt-Left\", mac: \"Ctrl-Alt-Left\" },\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selectMoreAfter\",\n        description: \"Select more after\",\n        exec: function (editor) { editor.selectMore(1); },\n        bindKey: { win: \"Ctrl-Alt-Right\", mac: \"Ctrl-Alt-Right\" },\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selectNextBefore\",\n        description: \"Select next before\",\n        exec: function (editor) { editor.selectMore(-1, true); },\n        bindKey: { win: \"Ctrl-Alt-Shift-Left\", mac: \"Ctrl-Alt-Shift-Left\" },\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selectNextAfter\",\n        description: \"Select next after\",\n        exec: function (editor) { editor.selectMore(1, true); },\n        bindKey: { win: \"Ctrl-Alt-Shift-Right\", mac: \"Ctrl-Alt-Shift-Right\" },\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"toggleSplitSelectionIntoLines\",\n        description: \"Split into lines\",\n        exec: function (editor) {\n            if (editor.multiSelect.rangeCount > 1)\n                editor.multiSelect.joinSelections();\n            else\n                editor.multiSelect.splitIntoLines();\n        },\n        bindKey: { win: \"Ctrl-Alt-L\", mac: \"Ctrl-Alt-L\" },\n        readOnly: true\n    }, {\n        name: \"splitSelectionIntoLines\",\n        description: \"Split into lines\",\n        exec: function (editor) { editor.multiSelect.splitIntoLines(); },\n        readOnly: true\n    }, {\n        name: \"alignCursors\",\n        description: \"Align cursors\",\n        exec: function (editor) { editor.alignCursors(); },\n        bindKey: { win: \"Ctrl-Alt-A\", mac: \"Ctrl-Alt-A\" },\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"findAll\",\n        description: \"Find all\",\n        exec: function (editor) { editor.findAll(); },\n        bindKey: { win: \"Ctrl-Alt-K\", mac: \"Ctrl-Alt-G\" },\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }];\nexports.multiSelectCommands = [{\n        name: \"singleSelection\",\n        description: \"Single selection\",\n        bindKey: \"esc\",\n        exec: function (editor) { editor.exitMultiSelectMode(); },\n        scrollIntoView: \"cursor\",\n        readOnly: true,\n        isAvailable: function (editor) { return editor && editor.inMultiSelectMode; }\n    }];\nvar HashHandler = require(\"../keyboard/hash_handler\").HashHandler;\nexports.keyboardHandler = new HashHandler(exports.multiSelectCommands);\n\n});\n\nace.define(\"ace/multi_select\",[\"require\",\"exports\",\"module\",\"ace/range_list\",\"ace/range\",\"ace/selection\",\"ace/mouse/multi_select_handler\",\"ace/lib/event\",\"ace/lib/lang\",\"ace/commands/multi_select_commands\",\"ace/search\",\"ace/edit_session\",\"ace/editor\",\"ace/config\"], function(require, exports, module){var RangeList = require(\"./range_list\").RangeList;\nvar Range = require(\"./range\").Range;\nvar Selection = require(\"./selection\").Selection;\nvar onMouseDown = require(\"./mouse/multi_select_handler\").onMouseDown;\nvar event = require(\"./lib/event\");\nvar lang = require(\"./lib/lang\");\nvar commands = require(\"./commands/multi_select_commands\");\nexports.commands = commands.defaultCommands.concat(commands.multiSelectCommands);\nvar Search = require(\"./search\").Search;\nvar search = new Search();\nfunction find(session, needle, dir) {\n    search.$options.wrap = true;\n    search.$options.needle = needle;\n    search.$options.backwards = dir == -1;\n    return search.find(session);\n}\nvar EditSession = require(\"./edit_session\").EditSession;\n(function () {\n    this.getSelectionMarkers = function () {\n        return this.$selectionMarkers;\n    };\n}).call(EditSession.prototype);\n(function () {\n    this.ranges = null;\n    this.rangeList = null;\n    this.addRange = function (range, $blockChangeEvents) {\n        if (!range)\n            return;\n        if (!this.inMultiSelectMode && this.rangeCount === 0) {\n            var oldRange = this.toOrientedRange();\n            this.rangeList.add(oldRange);\n            this.rangeList.add(range);\n            if (this.rangeList.ranges.length != 2) {\n                this.rangeList.removeAll();\n                return $blockChangeEvents || this.fromOrientedRange(range);\n            }\n            this.rangeList.removeAll();\n            this.rangeList.add(oldRange);\n            this.$onAddRange(oldRange);\n        }\n        if (!range.cursor)\n            range.cursor = range.end;\n        var removed = this.rangeList.add(range);\n        this.$onAddRange(range);\n        if (removed.length)\n            this.$onRemoveRange(removed);\n        if (this.rangeCount > 1 && !this.inMultiSelectMode) {\n            this._signal(\"multiSelect\");\n            this.inMultiSelectMode = true;\n            this.session.$undoSelect = false;\n            this.rangeList.attach(this.session);\n        }\n        return $blockChangeEvents || this.fromOrientedRange(range);\n    };\n    this.toSingleRange = function (range) {\n        range = range || this.ranges[0];\n        var removed = this.rangeList.removeAll();\n        if (removed.length)\n            this.$onRemoveRange(removed);\n        range && this.fromOrientedRange(range);\n    };\n    this.substractPoint = function (pos) {\n        var removed = this.rangeList.substractPoint(pos);\n        if (removed) {\n            this.$onRemoveRange(removed);\n            return removed[0];\n        }\n    };\n    this.mergeOverlappingRanges = function () {\n        var removed = this.rangeList.merge();\n        if (removed.length)\n            this.$onRemoveRange(removed);\n    };\n    this.$onAddRange = function (range) {\n        this.rangeCount = this.rangeList.ranges.length;\n        this.ranges.unshift(range);\n        this._signal(\"addRange\", { range: range });\n    };\n    this.$onRemoveRange = function (removed) {\n        this.rangeCount = this.rangeList.ranges.length;\n        if (this.rangeCount == 1 && this.inMultiSelectMode) {\n            var lastRange = this.rangeList.ranges.pop();\n            removed.push(lastRange);\n            this.rangeCount = 0;\n        }\n        for (var i = removed.length; i--;) {\n            var index = this.ranges.indexOf(removed[i]);\n            this.ranges.splice(index, 1);\n        }\n        this._signal(\"removeRange\", { ranges: removed });\n        if (this.rangeCount === 0 && this.inMultiSelectMode) {\n            this.inMultiSelectMode = false;\n            this._signal(\"singleSelect\");\n            this.session.$undoSelect = true;\n            this.rangeList.detach(this.session);\n        }\n        lastRange = lastRange || this.ranges[0];\n        if (lastRange && !lastRange.isEqual(this.getRange()))\n            this.fromOrientedRange(lastRange);\n    };\n    this.$initRangeList = function () {\n        if (this.rangeList)\n            return;\n        this.rangeList = new RangeList();\n        this.ranges = [];\n        this.rangeCount = 0;\n    };\n    this.getAllRanges = function () {\n        return this.rangeCount ? this.rangeList.ranges.concat() : [this.getRange()];\n    };\n    this.splitIntoLines = function () {\n        var ranges = this.ranges.length ? this.ranges : [this.getRange()];\n        var newRanges = [];\n        for (var i = 0; i < ranges.length; i++) {\n            var range = ranges[i];\n            var row = range.start.row;\n            var endRow = range.end.row;\n            if (row === endRow) {\n                newRanges.push(range.clone());\n            }\n            else {\n                newRanges.push(new Range(row, range.start.column, row, this.session.getLine(row).length));\n                while (++row < endRow)\n                    newRanges.push(this.getLineRange(row, true));\n                newRanges.push(new Range(endRow, 0, endRow, range.end.column));\n            }\n            if (i == 0 && !this.isBackwards())\n                newRanges = newRanges.reverse();\n        }\n        this.toSingleRange();\n        for (var i = newRanges.length; i--;)\n            this.addRange(newRanges[i]);\n    };\n    this.joinSelections = function () {\n        var ranges = this.rangeList.ranges;\n        var lastRange = ranges[ranges.length - 1];\n        var range = Range.fromPoints(ranges[0].start, lastRange.end);\n        this.toSingleRange();\n        this.setSelectionRange(range, lastRange.cursor == lastRange.start);\n    };\n    this.toggleBlockSelection = function () {\n        if (this.rangeCount > 1) {\n            var ranges = this.rangeList.ranges;\n            var lastRange = ranges[ranges.length - 1];\n            var range = Range.fromPoints(ranges[0].start, lastRange.end);\n            this.toSingleRange();\n            this.setSelectionRange(range, lastRange.cursor == lastRange.start);\n        }\n        else {\n            var cursor = this.session.documentToScreenPosition(this.cursor);\n            var anchor = this.session.documentToScreenPosition(this.anchor);\n            var rectSel = this.rectangularRangeBlock(cursor, anchor);\n            rectSel.forEach(this.addRange, this);\n        }\n    };\n    this.rectangularRangeBlock = function (screenCursor, screenAnchor, includeEmptyLines) {\n        var rectSel = [];\n        var xBackwards = screenCursor.column < screenAnchor.column;\n        if (xBackwards) {\n            var startColumn = screenCursor.column;\n            var endColumn = screenAnchor.column;\n            var startOffsetX = screenCursor.offsetX;\n            var endOffsetX = screenAnchor.offsetX;\n        }\n        else {\n            var startColumn = screenAnchor.column;\n            var endColumn = screenCursor.column;\n            var startOffsetX = screenAnchor.offsetX;\n            var endOffsetX = screenCursor.offsetX;\n        }\n        var yBackwards = screenCursor.row < screenAnchor.row;\n        if (yBackwards) {\n            var startRow = screenCursor.row;\n            var endRow = screenAnchor.row;\n        }\n        else {\n            var startRow = screenAnchor.row;\n            var endRow = screenCursor.row;\n        }\n        if (startColumn < 0)\n            startColumn = 0;\n        if (startRow < 0)\n            startRow = 0;\n        if (startRow == endRow)\n            includeEmptyLines = true;\n        var docEnd;\n        for (var row = startRow; row <= endRow; row++) {\n            var range = Range.fromPoints(this.session.screenToDocumentPosition(row, startColumn, startOffsetX), this.session.screenToDocumentPosition(row, endColumn, endOffsetX));\n            if (range.isEmpty()) {\n                if (docEnd && isSamePoint(range.end, docEnd))\n                    break;\n                docEnd = range.end;\n            }\n            range.cursor = xBackwards ? range.start : range.end;\n            rectSel.push(range);\n        }\n        if (yBackwards)\n            rectSel.reverse();\n        if (!includeEmptyLines) {\n            var end = rectSel.length - 1;\n            while (rectSel[end].isEmpty() && end > 0)\n                end--;\n            if (end > 0) {\n                var start = 0;\n                while (rectSel[start].isEmpty())\n                    start++;\n            }\n            for (var i = end; i >= start; i--) {\n                if (rectSel[i].isEmpty())\n                    rectSel.splice(i, 1);\n            }\n        }\n        return rectSel;\n    };\n}).call(Selection.prototype);\nvar Editor = require(\"./editor\").Editor;\n(function () {\n    this.updateSelectionMarkers = function () {\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n    };\n    this.addSelectionMarker = function (orientedRange) {\n        if (!orientedRange.cursor)\n            orientedRange.cursor = orientedRange.end;\n        var style = this.getSelectionStyle();\n        orientedRange.marker = this.session.addMarker(orientedRange, \"ace_selection\", style);\n        this.session.$selectionMarkers.push(orientedRange);\n        this.session.selectionMarkerCount = this.session.$selectionMarkers.length;\n        return orientedRange;\n    };\n    this.removeSelectionMarker = function (range) {\n        if (!range.marker)\n            return;\n        this.session.removeMarker(range.marker);\n        var index = this.session.$selectionMarkers.indexOf(range);\n        if (index != -1)\n            this.session.$selectionMarkers.splice(index, 1);\n        this.session.selectionMarkerCount = this.session.$selectionMarkers.length;\n    };\n    this.removeSelectionMarkers = function (ranges) {\n        var markerList = this.session.$selectionMarkers;\n        for (var i = ranges.length; i--;) {\n            var range = ranges[i];\n            if (!range.marker)\n                continue;\n            this.session.removeMarker(range.marker);\n            var index = markerList.indexOf(range);\n            if (index != -1)\n                markerList.splice(index, 1);\n        }\n        this.session.selectionMarkerCount = markerList.length;\n    };\n    this.$onAddRange = function (e) {\n        this.addSelectionMarker(e.range);\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n    };\n    this.$onRemoveRange = function (e) {\n        this.removeSelectionMarkers(e.ranges);\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n    };\n    this.$onMultiSelect = function (e) {\n        if (this.inMultiSelectMode)\n            return;\n        this.inMultiSelectMode = true;\n        this.setStyle(\"ace_multiselect\");\n        this.keyBinding.addKeyboardHandler(commands.keyboardHandler);\n        this.commands.setDefaultHandler(\"exec\", this.$onMultiSelectExec);\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n    };\n    this.$onSingleSelect = function (e) {\n        if (this.session.multiSelect.inVirtualMode)\n            return;\n        this.inMultiSelectMode = false;\n        this.unsetStyle(\"ace_multiselect\");\n        this.keyBinding.removeKeyboardHandler(commands.keyboardHandler);\n        this.commands.removeDefaultHandler(\"exec\", this.$onMultiSelectExec);\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n        this._emit(\"changeSelection\");\n    };\n    this.$onMultiSelectExec = function (e) {\n        var command = e.command;\n        var editor = e.editor;\n        if (!editor.multiSelect)\n            return;\n        if (!command.multiSelectAction) {\n            var result = command.exec(editor, e.args || {});\n            editor.multiSelect.addRange(editor.multiSelect.toOrientedRange());\n            editor.multiSelect.mergeOverlappingRanges();\n        }\n        else if (command.multiSelectAction == \"forEach\") {\n            result = editor.forEachSelection(command, e.args);\n        }\n        else if (command.multiSelectAction == \"forEachLine\") {\n            result = editor.forEachSelection(command, e.args, true);\n        }\n        else if (command.multiSelectAction == \"single\") {\n            editor.exitMultiSelectMode();\n            result = command.exec(editor, e.args || {});\n        }\n        else {\n            result = command.multiSelectAction(editor, e.args || {});\n        }\n        return result;\n    };\n    this.forEachSelection = function (cmd, args, options) {\n        if (this.inVirtualSelectionMode)\n            return;\n        var keepOrder = options && options.keepOrder;\n        var $byLines = options == true || options && options.$byLines;\n        var session = this.session;\n        var selection = this.selection;\n        var rangeList = selection.rangeList;\n        var ranges = (keepOrder ? selection : rangeList).ranges;\n        var result;\n        if (!ranges.length)\n            return cmd.exec ? cmd.exec(this, args || {}) : cmd(this, args || {});\n        var reg = selection._eventRegistry;\n        selection._eventRegistry = {};\n        var tmpSel = new Selection(session);\n        this.inVirtualSelectionMode = true;\n        for (var i = ranges.length; i--;) {\n            if ($byLines) {\n                while (i > 0 && ranges[i].start.row == ranges[i - 1].end.row)\n                    i--;\n            }\n            tmpSel.fromOrientedRange(ranges[i]);\n            tmpSel.index = i;\n            this.selection = session.selection = tmpSel;\n            var cmdResult = cmd.exec ? cmd.exec(this, args || {}) : cmd(this, args || {});\n            if (!result && cmdResult !== undefined)\n                result = cmdResult;\n            tmpSel.toOrientedRange(ranges[i]);\n        }\n        tmpSel.detach();\n        this.selection = session.selection = selection;\n        this.inVirtualSelectionMode = false;\n        selection._eventRegistry = reg;\n        selection.mergeOverlappingRanges();\n        if (selection.ranges[0])\n            selection.fromOrientedRange(selection.ranges[0]);\n        var anim = this.renderer.$scrollAnimation;\n        this.onCursorChange();\n        this.onSelectionChange();\n        if (anim && anim.from == anim.to)\n            this.renderer.animateScrolling(anim.from);\n        return result;\n    };\n    this.exitMultiSelectMode = function () {\n        if (!this.inMultiSelectMode || this.inVirtualSelectionMode)\n            return;\n        this.multiSelect.toSingleRange();\n    };\n    this.getSelectedText = function () {\n        var text = \"\";\n        if (this.inMultiSelectMode && !this.inVirtualSelectionMode) {\n            var ranges = this.multiSelect.rangeList.ranges;\n            var buf = [];\n            for (var i = 0; i < ranges.length; i++) {\n                buf.push(this.session.getTextRange(ranges[i]));\n            }\n            var nl = this.session.getDocument().getNewLineCharacter();\n            text = buf.join(nl);\n            if (text.length == (buf.length - 1) * nl.length)\n                text = \"\";\n        }\n        else if (!this.selection.isEmpty()) {\n            text = this.session.getTextRange(this.getSelectionRange());\n        }\n        return text;\n    };\n    this.$checkMultiselectChange = function (e, anchor) {\n        if (this.inMultiSelectMode && !this.inVirtualSelectionMode) {\n            var range = this.multiSelect.ranges[0];\n            if (this.multiSelect.isEmpty() && anchor == this.multiSelect.anchor)\n                return;\n            var pos = anchor == this.multiSelect.anchor\n                ? range.cursor == range.start ? range.end : range.start\n                : range.cursor;\n            if (pos.row != anchor.row\n                || this.session.$clipPositionToDocument(pos.row, pos.column).column != anchor.column)\n                this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange());\n            else\n                this.multiSelect.mergeOverlappingRanges();\n        }\n    };\n    this.findAll = function (needle, options, additive) {\n        options = options || {};\n        options.needle = needle || options.needle;\n        if (options.needle == undefined) {\n            var range = this.selection.isEmpty()\n                ? this.selection.getWordRange()\n                : this.selection.getRange();\n            options.needle = this.session.getTextRange(range);\n        }\n        this.$search.set(options);\n        var ranges = this.$search.findAll(this.session);\n        if (!ranges.length)\n            return 0;\n        var selection = this.multiSelect;\n        if (!additive)\n            selection.toSingleRange(ranges[0]);\n        for (var i = ranges.length; i--;)\n            selection.addRange(ranges[i], true);\n        if (range && selection.rangeList.rangeAtPoint(range.start))\n            selection.addRange(range, true);\n        return ranges.length;\n    };\n    this.selectMoreLines = function (dir, skip) {\n        var range = this.selection.toOrientedRange();\n        var isBackwards = range.cursor == range.end;\n        var screenLead = this.session.documentToScreenPosition(range.cursor);\n        if (this.selection.$desiredColumn)\n            screenLead.column = this.selection.$desiredColumn;\n        var lead = this.session.screenToDocumentPosition(screenLead.row + dir, screenLead.column);\n        if (!range.isEmpty()) {\n            var screenAnchor = this.session.documentToScreenPosition(isBackwards ? range.end : range.start);\n            var anchor = this.session.screenToDocumentPosition(screenAnchor.row + dir, screenAnchor.column);\n        }\n        else {\n            var anchor = lead;\n        }\n        if (isBackwards) {\n            var newRange = Range.fromPoints(lead, anchor);\n            newRange.cursor = newRange.start;\n        }\n        else {\n            var newRange = Range.fromPoints(anchor, lead);\n            newRange.cursor = newRange.end;\n        }\n        newRange.desiredColumn = screenLead.column;\n        if (!this.selection.inMultiSelectMode) {\n            this.selection.addRange(range);\n        }\n        else {\n            if (skip)\n                var toRemove = range.cursor;\n        }\n        this.selection.addRange(newRange);\n        if (toRemove)\n            this.selection.substractPoint(toRemove);\n    };\n    this.transposeSelections = function (dir) {\n        var session = this.session;\n        var sel = session.multiSelect;\n        var all = sel.ranges;\n        for (var i = all.length; i--;) {\n            var range = all[i];\n            if (range.isEmpty()) {\n                var tmp = session.getWordRange(range.start.row, range.start.column);\n                range.start.row = tmp.start.row;\n                range.start.column = tmp.start.column;\n                range.end.row = tmp.end.row;\n                range.end.column = tmp.end.column;\n            }\n        }\n        sel.mergeOverlappingRanges();\n        var words = [];\n        for (var i = all.length; i--;) {\n            var range = all[i];\n            words.unshift(session.getTextRange(range));\n        }\n        if (dir < 0)\n            words.unshift(words.pop());\n        else\n            words.push(words.shift());\n        for (var i = all.length; i--;) {\n            var range = all[i];\n            var tmp = range.clone();\n            session.replace(range, words[i]);\n            range.start.row = tmp.start.row;\n            range.start.column = tmp.start.column;\n        }\n        sel.fromOrientedRange(sel.ranges[0]);\n    };\n    this.selectMore = function (dir, skip, stopAtFirst) {\n        var session = this.session;\n        var sel = session.multiSelect;\n        var range = sel.toOrientedRange();\n        if (range.isEmpty()) {\n            range = session.getWordRange(range.start.row, range.start.column);\n            range.cursor = dir == -1 ? range.start : range.end;\n            this.multiSelect.addRange(range);\n            if (stopAtFirst)\n                return;\n        }\n        var needle = session.getTextRange(range);\n        var newRange = find(session, needle, dir);\n        if (newRange) {\n            newRange.cursor = dir == -1 ? newRange.start : newRange.end;\n            this.session.unfold(newRange);\n            this.multiSelect.addRange(newRange);\n            this.renderer.scrollCursorIntoView(null, 0.5);\n        }\n        if (skip)\n            this.multiSelect.substractPoint(range.cursor);\n    };\n    this.alignCursors = function () {\n        var session = this.session;\n        var sel = session.multiSelect;\n        var ranges = sel.ranges;\n        var row = -1;\n        var sameRowRanges = ranges.filter(function (r) {\n            if (r.cursor.row == row)\n                return true;\n            row = r.cursor.row;\n        });\n        if (!ranges.length || sameRowRanges.length == ranges.length - 1) {\n            var range = this.selection.getRange();\n            var fr = range.start.row, lr = range.end.row;\n            var guessRange = fr == lr;\n            if (guessRange) {\n                var max = this.session.getLength();\n                var line;\n                do {\n                    line = this.session.getLine(lr);\n                } while (/[=:]/.test(line) && ++lr < max);\n                do {\n                    line = this.session.getLine(fr);\n                } while (/[=:]/.test(line) && --fr > 0);\n                if (fr < 0)\n                    fr = 0;\n                if (lr >= max)\n                    lr = max - 1;\n            }\n            var lines = this.session.removeFullLines(fr, lr);\n            lines = this.$reAlignText(lines, guessRange);\n            this.session.insert({ row: fr, column: 0 }, lines.join(\"\\n\") + \"\\n\");\n            if (!guessRange) {\n                range.start.column = 0;\n                range.end.column = lines[lines.length - 1].length;\n            }\n            this.selection.setRange(range);\n        }\n        else {\n            sameRowRanges.forEach(function (r) {\n                sel.substractPoint(r.cursor);\n            });\n            var maxCol = 0;\n            var minSpace = Infinity;\n            var spaceOffsets = ranges.map(function (r) {\n                var p = r.cursor;\n                var line = session.getLine(p.row);\n                var spaceOffset = line.substr(p.column).search(/\\S/g);\n                if (spaceOffset == -1)\n                    spaceOffset = 0;\n                if (p.column > maxCol)\n                    maxCol = p.column;\n                if (spaceOffset < minSpace)\n                    minSpace = spaceOffset;\n                return spaceOffset;\n            });\n            ranges.forEach(function (r, i) {\n                var p = r.cursor;\n                var l = maxCol - p.column;\n                var d = spaceOffsets[i] - minSpace;\n                if (l > d)\n                    session.insert(p, lang.stringRepeat(\" \", l - d));\n                else\n                    session.remove(new Range(p.row, p.column, p.row, p.column - l + d));\n                r.start.column = r.end.column = maxCol;\n                r.start.row = r.end.row = p.row;\n                r.cursor = r.end;\n            });\n            sel.fromOrientedRange(ranges[0]);\n            this.renderer.updateCursor();\n            this.renderer.updateBackMarkers();\n        }\n    };\n    this.$reAlignText = function (lines, forceLeft) {\n        var isLeftAligned = true, isRightAligned = true;\n        var startW, textW, endW;\n        return lines.map(function (line) {\n            var m = line.match(/(\\s*)(.*?)(\\s*)([=:].*)/);\n            if (!m)\n                return [line];\n            if (startW == null) {\n                startW = m[1].length;\n                textW = m[2].length;\n                endW = m[3].length;\n                return m;\n            }\n            if (startW + textW + endW != m[1].length + m[2].length + m[3].length)\n                isRightAligned = false;\n            if (startW != m[1].length)\n                isLeftAligned = false;\n            if (startW > m[1].length)\n                startW = m[1].length;\n            if (textW < m[2].length)\n                textW = m[2].length;\n            if (endW > m[3].length)\n                endW = m[3].length;\n            return m;\n        }).map(forceLeft ? alignLeft :\n            isLeftAligned ? isRightAligned ? alignRight : alignLeft : unAlign);\n        function spaces(n) {\n            return lang.stringRepeat(\" \", n);\n        }\n        function alignLeft(m) {\n            return !m[2] ? m[0] : spaces(startW) + m[2]\n                + spaces(textW - m[2].length + endW)\n                + m[4].replace(/^([=:])\\s+/, \"$1 \");\n        }\n        function alignRight(m) {\n            return !m[2] ? m[0] : spaces(startW + textW - m[2].length) + m[2]\n                + spaces(endW)\n                + m[4].replace(/^([=:])\\s+/, \"$1 \");\n        }\n        function unAlign(m) {\n            return !m[2] ? m[0] : spaces(startW) + m[2]\n                + spaces(endW)\n                + m[4].replace(/^([=:])\\s+/, \"$1 \");\n        }\n    };\n}).call(Editor.prototype);\nfunction isSamePoint(p1, p2) {\n    return p1.row == p2.row && p1.column == p2.column;\n}\nexports.onSessionChange = function (e) {\n    var session = e.session;\n    if (session && !session.multiSelect) {\n        session.$selectionMarkers = [];\n        session.selection.$initRangeList();\n        session.multiSelect = session.selection;\n    }\n    this.multiSelect = session && session.multiSelect;\n    var oldSession = e.oldSession;\n    if (oldSession) {\n        oldSession.multiSelect.off(\"addRange\", this.$onAddRange);\n        oldSession.multiSelect.off(\"removeRange\", this.$onRemoveRange);\n        oldSession.multiSelect.off(\"multiSelect\", this.$onMultiSelect);\n        oldSession.multiSelect.off(\"singleSelect\", this.$onSingleSelect);\n        oldSession.multiSelect.lead.off(\"change\", this.$checkMultiselectChange);\n        oldSession.multiSelect.anchor.off(\"change\", this.$checkMultiselectChange);\n    }\n    if (session) {\n        session.multiSelect.on(\"addRange\", this.$onAddRange);\n        session.multiSelect.on(\"removeRange\", this.$onRemoveRange);\n        session.multiSelect.on(\"multiSelect\", this.$onMultiSelect);\n        session.multiSelect.on(\"singleSelect\", this.$onSingleSelect);\n        session.multiSelect.lead.on(\"change\", this.$checkMultiselectChange);\n        session.multiSelect.anchor.on(\"change\", this.$checkMultiselectChange);\n    }\n    if (session && this.inMultiSelectMode != session.selection.inMultiSelectMode) {\n        if (session.selection.inMultiSelectMode)\n            this.$onMultiSelect();\n        else\n            this.$onSingleSelect();\n    }\n};\nfunction MultiSelect(editor) {\n    if (editor.$multiselectOnSessionChange)\n        return;\n    editor.$onAddRange = editor.$onAddRange.bind(editor);\n    editor.$onRemoveRange = editor.$onRemoveRange.bind(editor);\n    editor.$onMultiSelect = editor.$onMultiSelect.bind(editor);\n    editor.$onSingleSelect = editor.$onSingleSelect.bind(editor);\n    editor.$multiselectOnSessionChange = exports.onSessionChange.bind(editor);\n    editor.$checkMultiselectChange = editor.$checkMultiselectChange.bind(editor);\n    editor.$multiselectOnSessionChange(editor);\n    editor.on(\"changeSession\", editor.$multiselectOnSessionChange);\n    editor.on(\"mousedown\", onMouseDown);\n    editor.commands.addCommands(commands.defaultCommands);\n    addAltCursorListeners(editor);\n}\nfunction addAltCursorListeners(editor) {\n    if (!editor.textInput)\n        return;\n    var el = editor.textInput.getElement();\n    var altCursor = false;\n    event.addListener(el, \"keydown\", function (e) {\n        var altDown = e.keyCode == 18 && !(e.ctrlKey || e.shiftKey || e.metaKey);\n        if (editor.$blockSelectEnabled && altDown) {\n            if (!altCursor) {\n                editor.renderer.setMouseCursor(\"crosshair\");\n                altCursor = true;\n            }\n        }\n        else if (altCursor) {\n            reset();\n        }\n    }, editor);\n    event.addListener(el, \"keyup\", reset, editor);\n    event.addListener(el, \"blur\", reset, editor);\n    function reset(e) {\n        if (altCursor) {\n            editor.renderer.setMouseCursor(\"\");\n            altCursor = false;\n        }\n    }\n}\nexports.MultiSelect = MultiSelect;\nrequire(\"./config\").defineOptions(Editor.prototype, \"editor\", {\n    enableMultiselect: {\n        set: function (val) {\n            MultiSelect(this);\n            if (val) {\n                this.on(\"changeSession\", this.$multiselectOnSessionChange);\n                this.on(\"mousedown\", onMouseDown);\n            }\n            else {\n                this.off(\"changeSession\", this.$multiselectOnSessionChange);\n                this.off(\"mousedown\", onMouseDown);\n            }\n        },\n        value: true\n    },\n    enableBlockSelect: {\n        set: function (val) {\n            this.$blockSelectEnabled = val;\n        },\n        value: true\n    }\n});\n\n});\n\nace.define(\"ace/mode/folding/fold_mode\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(require, exports, module){\"use strict\";\nvar Range = require(\"../../range\").Range;\nvar FoldMode = exports.FoldMode = function () { };\n(function () {\n    this.foldingStartMarker = null;\n    this.foldingStopMarker = null;\n    this.getFoldWidget = function (session, foldStyle, row) {\n        var line = session.getLine(row);\n        if (this.foldingStartMarker.test(line))\n            return \"start\";\n        if (foldStyle == \"markbeginend\"\n            && this.foldingStopMarker\n            && this.foldingStopMarker.test(line))\n            return \"end\";\n        return \"\";\n    };\n    this.getFoldWidgetRange = function (session, foldStyle, row) {\n        return null;\n    };\n    this.indentationBlock = function (session, row, column) {\n        var re = /\\S/;\n        var line = session.getLine(row);\n        var startLevel = line.search(re);\n        if (startLevel == -1)\n            return;\n        var startColumn = column || line.length;\n        var maxRow = session.getLength();\n        var startRow = row;\n        var endRow = row;\n        while (++row < maxRow) {\n            var level = session.getLine(row).search(re);\n            if (level == -1)\n                continue;\n            if (level <= startLevel) {\n                var token = session.getTokenAt(row, 0);\n                if (!token || token.type !== \"string\")\n                    break;\n            }\n            endRow = row;\n        }\n        if (endRow > startRow) {\n            var endColumn = session.getLine(endRow).length;\n            return new Range(startRow, startColumn, endRow, endColumn);\n        }\n    };\n    this.openingBracketBlock = function (session, bracket, row, column, typeRe) {\n        var start = { row: row, column: column + 1 };\n        var end = session.$findClosingBracket(bracket, start, typeRe);\n        if (!end)\n            return;\n        var fw = session.foldWidgets[end.row];\n        if (fw == null)\n            fw = session.getFoldWidget(end.row);\n        if (fw == \"start\" && end.row > start.row) {\n            end.row--;\n            end.column = session.getLine(end.row).length;\n        }\n        return Range.fromPoints(start, end);\n    };\n    this.closingBracketBlock = function (session, bracket, row, column, typeRe) {\n        var end = { row: row, column: column };\n        var start = session.$findOpeningBracket(bracket, end);\n        if (!start)\n            return;\n        start.column++;\n        end.column--;\n        return Range.fromPoints(start, end);\n    };\n}).call(FoldMode.prototype);\n\n});\n\nace.define(\"ace/line_widgets\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(require, exports, module){\"use strict\";\nvar dom = require(\"./lib/dom\");\nfunction LineWidgets(session) {\n    this.session = session;\n    this.session.widgetManager = this;\n    this.session.getRowLength = this.getRowLength;\n    this.session.$getWidgetScreenLength = this.$getWidgetScreenLength;\n    this.updateOnChange = this.updateOnChange.bind(this);\n    this.renderWidgets = this.renderWidgets.bind(this);\n    this.measureWidgets = this.measureWidgets.bind(this);\n    this.session._changedWidgets = [];\n    this.$onChangeEditor = this.$onChangeEditor.bind(this);\n    this.session.on(\"change\", this.updateOnChange);\n    this.session.on(\"changeFold\", this.updateOnFold);\n    this.session.on(\"changeEditor\", this.$onChangeEditor);\n}\n(function () {\n    this.getRowLength = function (row) {\n        var h;\n        if (this.lineWidgets)\n            h = this.lineWidgets[row] && this.lineWidgets[row].rowCount || 0;\n        else\n            h = 0;\n        if (!this.$useWrapMode || !this.$wrapData[row]) {\n            return 1 + h;\n        }\n        else {\n            return this.$wrapData[row].length + 1 + h;\n        }\n    };\n    this.$getWidgetScreenLength = function () {\n        var screenRows = 0;\n        this.lineWidgets.forEach(function (w) {\n            if (w && w.rowCount && !w.hidden)\n                screenRows += w.rowCount;\n        });\n        return screenRows;\n    };\n    this.$onChangeEditor = function (e) {\n        this.attach(e.editor);\n    };\n    this.attach = function (editor) {\n        if (editor && editor.widgetManager && editor.widgetManager != this)\n            editor.widgetManager.detach();\n        if (this.editor == editor)\n            return;\n        this.detach();\n        this.editor = editor;\n        if (editor) {\n            editor.widgetManager = this;\n            editor.renderer.on(\"beforeRender\", this.measureWidgets);\n            editor.renderer.on(\"afterRender\", this.renderWidgets);\n        }\n    };\n    this.detach = function (e) {\n        var editor = this.editor;\n        if (!editor)\n            return;\n        this.editor = null;\n        editor.widgetManager = null;\n        editor.renderer.off(\"beforeRender\", this.measureWidgets);\n        editor.renderer.off(\"afterRender\", this.renderWidgets);\n        var lineWidgets = this.session.lineWidgets;\n        lineWidgets && lineWidgets.forEach(function (w) {\n            if (w && w.el && w.el.parentNode) {\n                w._inDocument = false;\n                w.el.parentNode.removeChild(w.el);\n            }\n        });\n    };\n    this.updateOnFold = function (e, session) {\n        var lineWidgets = session.lineWidgets;\n        if (!lineWidgets || !e.action)\n            return;\n        var fold = e.data;\n        var start = fold.start.row;\n        var end = fold.end.row;\n        var hide = e.action == \"add\";\n        for (var i = start + 1; i < end; i++) {\n            if (lineWidgets[i])\n                lineWidgets[i].hidden = hide;\n        }\n        if (lineWidgets[end]) {\n            if (hide) {\n                if (!lineWidgets[start])\n                    lineWidgets[start] = lineWidgets[end];\n                else\n                    lineWidgets[end].hidden = hide;\n            }\n            else {\n                if (lineWidgets[start] == lineWidgets[end])\n                    lineWidgets[start] = undefined;\n                lineWidgets[end].hidden = hide;\n            }\n        }\n    };\n    this.updateOnChange = function (delta) {\n        var lineWidgets = this.session.lineWidgets;\n        if (!lineWidgets)\n            return;\n        var startRow = delta.start.row;\n        var len = delta.end.row - startRow;\n        if (len === 0) {\n        }\n        else if (delta.action == \"remove\") {\n            var removed = lineWidgets.splice(startRow + 1, len);\n            if (!lineWidgets[startRow] && removed[removed.length - 1]) {\n                lineWidgets[startRow] = removed.pop();\n            }\n            removed.forEach(function (w) {\n                w && this.removeLineWidget(w);\n            }, this);\n            this.$updateRows();\n        }\n        else {\n            var args = new Array(len);\n            if (lineWidgets[startRow] && lineWidgets[startRow].column != null) {\n                if (delta.start.column > lineWidgets[startRow].column)\n                    startRow++;\n            }\n            args.unshift(startRow, 0);\n            lineWidgets.splice.apply(lineWidgets, args);\n            this.$updateRows();\n        }\n    };\n    this.$updateRows = function () {\n        var lineWidgets = this.session.lineWidgets;\n        if (!lineWidgets)\n            return;\n        var noWidgets = true;\n        lineWidgets.forEach(function (w, i) {\n            if (w) {\n                noWidgets = false;\n                w.row = i;\n                while (w.$oldWidget) {\n                    w.$oldWidget.row = i;\n                    w = w.$oldWidget;\n                }\n            }\n        });\n        if (noWidgets)\n            this.session.lineWidgets = null;\n    };\n    this.$registerLineWidget = function (w) {\n        if (!this.session.lineWidgets)\n            this.session.lineWidgets = new Array(this.session.getLength());\n        var old = this.session.lineWidgets[w.row];\n        if (old) {\n            w.$oldWidget = old;\n            if (old.el && old.el.parentNode) {\n                old.el.parentNode.removeChild(old.el);\n                old._inDocument = false;\n            }\n        }\n        this.session.lineWidgets[w.row] = w;\n        return w;\n    };\n    this.addLineWidget = function (w) {\n        this.$registerLineWidget(w);\n        w.session = this.session;\n        if (!this.editor)\n            return w;\n        var renderer = this.editor.renderer;\n        if (w.html && !w.el) {\n            w.el = dom.createElement(\"div\");\n            w.el.innerHTML = w.html;\n        }\n        if (w.el) {\n            dom.addCssClass(w.el, \"ace_lineWidgetContainer\");\n            w.el.style.position = \"absolute\";\n            w.el.style.zIndex = 5;\n            renderer.container.appendChild(w.el);\n            w._inDocument = true;\n            if (!w.coverGutter) {\n                w.el.style.zIndex = 3;\n            }\n            if (w.pixelHeight == null) {\n                w.pixelHeight = w.el.offsetHeight;\n            }\n        }\n        if (w.rowCount == null) {\n            w.rowCount = w.pixelHeight / renderer.layerConfig.lineHeight;\n        }\n        var fold = this.session.getFoldAt(w.row, 0);\n        w.$fold = fold;\n        if (fold) {\n            var lineWidgets = this.session.lineWidgets;\n            if (w.row == fold.end.row && !lineWidgets[fold.start.row])\n                lineWidgets[fold.start.row] = w;\n            else\n                w.hidden = true;\n        }\n        this.session._emit(\"changeFold\", { data: { start: { row: w.row } } });\n        this.$updateRows();\n        this.renderWidgets(null, renderer);\n        this.onWidgetChanged(w);\n        return w;\n    };\n    this.removeLineWidget = function (w) {\n        w._inDocument = false;\n        w.session = null;\n        if (w.el && w.el.parentNode)\n            w.el.parentNode.removeChild(w.el);\n        if (w.editor && w.editor.destroy)\n            try {\n                w.editor.destroy();\n            }\n            catch (e) { }\n        if (this.session.lineWidgets) {\n            var w1 = this.session.lineWidgets[w.row];\n            if (w1 == w) {\n                this.session.lineWidgets[w.row] = w.$oldWidget;\n                if (w.$oldWidget)\n                    this.onWidgetChanged(w.$oldWidget);\n            }\n            else {\n                while (w1) {\n                    if (w1.$oldWidget == w) {\n                        w1.$oldWidget = w.$oldWidget;\n                        break;\n                    }\n                    w1 = w1.$oldWidget;\n                }\n            }\n        }\n        this.session._emit(\"changeFold\", { data: { start: { row: w.row } } });\n        this.$updateRows();\n    };\n    this.getWidgetsAtRow = function (row) {\n        var lineWidgets = this.session.lineWidgets;\n        var w = lineWidgets && lineWidgets[row];\n        var list = [];\n        while (w) {\n            list.push(w);\n            w = w.$oldWidget;\n        }\n        return list;\n    };\n    this.onWidgetChanged = function (w) {\n        this.session._changedWidgets.push(w);\n        this.editor && this.editor.renderer.updateFull();\n    };\n    this.measureWidgets = function (e, renderer) {\n        var changedWidgets = this.session._changedWidgets;\n        var config = renderer.layerConfig;\n        if (!changedWidgets || !changedWidgets.length)\n            return;\n        var min = Infinity;\n        for (var i = 0; i < changedWidgets.length; i++) {\n            var w = changedWidgets[i];\n            if (!w || !w.el)\n                continue;\n            if (w.session != this.session)\n                continue;\n            if (!w._inDocument) {\n                if (this.session.lineWidgets[w.row] != w)\n                    continue;\n                w._inDocument = true;\n                renderer.container.appendChild(w.el);\n            }\n            w.h = w.el.offsetHeight;\n            if (!w.fixedWidth) {\n                w.w = w.el.offsetWidth;\n                w.screenWidth = Math.ceil(w.w / config.characterWidth);\n            }\n            var rowCount = w.h / config.lineHeight;\n            if (w.coverLine) {\n                rowCount -= this.session.getRowLineCount(w.row);\n                if (rowCount < 0)\n                    rowCount = 0;\n            }\n            if (w.rowCount != rowCount) {\n                w.rowCount = rowCount;\n                if (w.row < min)\n                    min = w.row;\n            }\n        }\n        if (min != Infinity) {\n            this.session._emit(\"changeFold\", { data: { start: { row: min } } });\n            this.session.lineWidgetWidth = null;\n        }\n        this.session._changedWidgets = [];\n    };\n    this.renderWidgets = function (e, renderer) {\n        var config = renderer.layerConfig;\n        var lineWidgets = this.session.lineWidgets;\n        if (!lineWidgets)\n            return;\n        var first = Math.min(this.firstRow, config.firstRow);\n        var last = Math.max(this.lastRow, config.lastRow, lineWidgets.length);\n        while (first > 0 && !lineWidgets[first])\n            first--;\n        this.firstRow = config.firstRow;\n        this.lastRow = config.lastRow;\n        renderer.$cursorLayer.config = config;\n        for (var i = first; i <= last; i++) {\n            var w = lineWidgets[i];\n            if (!w || !w.el)\n                continue;\n            if (w.hidden) {\n                w.el.style.top = -100 - (w.pixelHeight || 0) + \"px\";\n                continue;\n            }\n            if (!w._inDocument) {\n                w._inDocument = true;\n                renderer.container.appendChild(w.el);\n            }\n            var top = renderer.$cursorLayer.getPixelPosition({ row: i, column: 0 }, true).top;\n            if (!w.coverLine)\n                top += config.lineHeight * this.session.getRowLineCount(w.row);\n            w.el.style.top = top - config.offset + \"px\";\n            var left = w.coverGutter ? 0 : renderer.gutterWidth;\n            if (!w.fixedWidth)\n                left -= renderer.scrollLeft;\n            w.el.style.left = left + \"px\";\n            if (w.fullWidth && w.screenWidth) {\n                w.el.style.minWidth = config.width + 2 * config.padding + \"px\";\n            }\n            if (w.fixedWidth) {\n                w.el.style.right = renderer.scrollBar.getWidth() + \"px\";\n            }\n            else {\n                w.el.style.right = \"\";\n            }\n        }\n    };\n}).call(LineWidgets.prototype);\nexports.LineWidgets = LineWidgets;\n\n});\n\nace.define(\"ace/ext/error_marker\",[\"require\",\"exports\",\"module\",\"ace/line_widgets\",\"ace/lib/dom\",\"ace/range\"], function(require, exports, module){\"use strict\";\nvar LineWidgets = require(\"../line_widgets\").LineWidgets;\nvar dom = require(\"../lib/dom\");\nvar Range = require(\"../range\").Range;\nfunction binarySearch(array, needle, comparator) {\n    var first = 0;\n    var last = array.length - 1;\n    while (first <= last) {\n        var mid = (first + last) >> 1;\n        var c = comparator(needle, array[mid]);\n        if (c > 0)\n            first = mid + 1;\n        else if (c < 0)\n            last = mid - 1;\n        else\n            return mid;\n    }\n    return -(first + 1);\n}\nfunction findAnnotations(session, row, dir) {\n    var annotations = session.getAnnotations().sort(Range.comparePoints);\n    if (!annotations.length)\n        return;\n    var i = binarySearch(annotations, { row: row, column: -1 }, Range.comparePoints);\n    if (i < 0)\n        i = -i - 1;\n    if (i >= annotations.length)\n        i = dir > 0 ? 0 : annotations.length - 1;\n    else if (i === 0 && dir < 0)\n        i = annotations.length - 1;\n    var annotation = annotations[i];\n    if (!annotation || !dir)\n        return;\n    if (annotation.row === row) {\n        do {\n            annotation = annotations[i += dir];\n        } while (annotation && annotation.row === row);\n        if (!annotation)\n            return annotations.slice();\n    }\n    var matched = [];\n    row = annotation.row;\n    do {\n        matched[dir < 0 ? \"unshift\" : \"push\"](annotation);\n        annotation = annotations[i += dir];\n    } while (annotation && annotation.row == row);\n    return matched.length && matched;\n}\nexports.showErrorMarker = function (editor, dir) {\n    var session = editor.session;\n    if (!session.widgetManager) {\n        session.widgetManager = new LineWidgets(session);\n        session.widgetManager.attach(editor);\n    }\n    var pos = editor.getCursorPosition();\n    var row = pos.row;\n    var oldWidget = session.widgetManager.getWidgetsAtRow(row).filter(function (w) {\n        return w.type == \"errorMarker\";\n    })[0];\n    if (oldWidget) {\n        oldWidget.destroy();\n    }\n    else {\n        row -= dir;\n    }\n    var annotations = findAnnotations(session, row, dir);\n    var gutterAnno;\n    if (annotations) {\n        var annotation = annotations[0];\n        pos.column = (annotation.pos && typeof annotation.column != \"number\"\n            ? annotation.pos.sc\n            : annotation.column) || 0;\n        pos.row = annotation.row;\n        gutterAnno = editor.renderer.$gutterLayer.$annotations[pos.row];\n    }\n    else if (oldWidget) {\n        return;\n    }\n    else {\n        gutterAnno = {\n            text: [\"Looks good!\"],\n            className: \"ace_ok\"\n        };\n    }\n    editor.session.unfold(pos.row);\n    editor.selection.moveToPosition(pos);\n    var w = {\n        row: pos.row,\n        fixedWidth: true,\n        coverGutter: true,\n        el: dom.createElement(\"div\"),\n        type: \"errorMarker\"\n    };\n    var el = w.el.appendChild(dom.createElement(\"div\"));\n    var arrow = w.el.appendChild(dom.createElement(\"div\"));\n    arrow.className = \"error_widget_arrow \" + gutterAnno.className;\n    var left = editor.renderer.$cursorLayer\n        .getPixelPosition(pos).left;\n    arrow.style.left = left + editor.renderer.gutterWidth - 5 + \"px\";\n    w.el.className = \"error_widget_wrapper\";\n    el.className = \"error_widget \" + gutterAnno.className;\n    el.innerHTML = gutterAnno.text.join(\"<br>\");\n    el.appendChild(dom.createElement(\"div\"));\n    var kb = function (_, hashId, keyString) {\n        if (hashId === 0 && (keyString === \"esc\" || keyString === \"return\")) {\n            w.destroy();\n            return { command: \"null\" };\n        }\n    };\n    w.destroy = function () {\n        if (editor.$mouseHandler.isMousePressed)\n            return;\n        editor.keyBinding.removeKeyboardHandler(kb);\n        session.widgetManager.removeLineWidget(w);\n        editor.off(\"changeSelection\", w.destroy);\n        editor.off(\"changeSession\", w.destroy);\n        editor.off(\"mouseup\", w.destroy);\n        editor.off(\"change\", w.destroy);\n    };\n    editor.keyBinding.addKeyboardHandler(kb);\n    editor.on(\"changeSelection\", w.destroy);\n    editor.on(\"changeSession\", w.destroy);\n    editor.on(\"mouseup\", w.destroy);\n    editor.on(\"change\", w.destroy);\n    editor.session.widgetManager.addLineWidget(w);\n    w.el.onmousedown = editor.focus.bind(editor);\n    editor.renderer.scrollCursorIntoView(null, 0.5, { bottom: w.el.offsetHeight });\n};\ndom.importCssString(\"\\n    .error_widget_wrapper {\\n        background: inherit;\\n        color: inherit;\\n        border:none\\n    }\\n    .error_widget {\\n        border-top: solid 2px;\\n        border-bottom: solid 2px;\\n        margin: 5px 0;\\n        padding: 10px 40px;\\n        white-space: pre-wrap;\\n    }\\n    .error_widget.ace_error, .error_widget_arrow.ace_error{\\n        border-color: #ff5a5a\\n    }\\n    .error_widget.ace_warning, .error_widget_arrow.ace_warning{\\n        border-color: #F1D817\\n    }\\n    .error_widget.ace_info, .error_widget_arrow.ace_info{\\n        border-color: #5a5a5a\\n    }\\n    .error_widget.ace_ok, .error_widget_arrow.ace_ok{\\n        border-color: #5aaa5a\\n    }\\n    .error_widget_arrow {\\n        position: absolute;\\n        border: solid 5px;\\n        border-top-color: transparent!important;\\n        border-right-color: transparent!important;\\n        border-left-color: transparent!important;\\n        top: -5px;\\n    }\\n\", \"error_marker.css\", false);\n\n});\n\nace.define(\"ace/ace\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/event\",\"ace/range\",\"ace/editor\",\"ace/edit_session\",\"ace/undomanager\",\"ace/virtual_renderer\",\"ace/worker/worker_client\",\"ace/keyboard/hash_handler\",\"ace/placeholder\",\"ace/multi_select\",\"ace/mode/folding/fold_mode\",\"ace/theme/textmate\",\"ace/ext/error_marker\",\"ace/config\",\"ace/loader_build\"], function(require, exports, module){/**\n * The main class required to set up an Ace instance in the browser.\n *\n * @class Ace\n **/\n\"use strict\";\nrequire(\"./loader_build\")(exports)\nvar dom = require(\"./lib/dom\");\nvar event = require(\"./lib/event\");\nvar Range = require(\"./range\").Range;\nvar Editor = require(\"./editor\").Editor;\nvar EditSession = require(\"./edit_session\").EditSession;\nvar UndoManager = require(\"./undomanager\").UndoManager;\nvar Renderer = require(\"./virtual_renderer\").VirtualRenderer;\nrequire(\"./worker/worker_client\");\nrequire(\"./keyboard/hash_handler\");\nrequire(\"./placeholder\");\nrequire(\"./multi_select\");\nrequire(\"./mode/folding/fold_mode\");\nrequire(\"./theme/textmate\");\nrequire(\"./ext/error_marker\");\nexports.config = require(\"./config\");\nexports.edit = function (el, options) {\n    if (typeof el == \"string\") {\n        var _id = el;\n        el = document.getElementById(_id);\n        if (!el)\n            throw new Error(\"ace.edit can't find div #\" + _id);\n    }\n    if (el && el.env && el.env.editor instanceof Editor)\n        return el.env.editor;\n    var value = \"\";\n    if (el && /input|textarea/i.test(el.tagName)) {\n        var oldNode = el;\n        value = oldNode.value;\n        el = dom.createElement(\"pre\");\n        oldNode.parentNode.replaceChild(el, oldNode);\n    }\n    else if (el) {\n        value = el.textContent;\n        el.innerHTML = \"\";\n    }\n    var doc = exports.createEditSession(value);\n    var editor = new Editor(new Renderer(el), doc, options);\n    var env = {\n        document: doc,\n        editor: editor,\n        onResize: editor.resize.bind(editor, null)\n    };\n    if (oldNode)\n        env.textarea = oldNode;\n    event.addListener(window, \"resize\", env.onResize);\n    editor.on(\"destroy\", function () {\n        event.removeListener(window, \"resize\", env.onResize);\n        env.editor.container.env = null; // prevent memory leak on old ie\n    });\n    editor.container.env = editor.env = env;\n    return editor;\n};\nexports.createEditSession = function (text, mode) {\n    var doc = new EditSession(text, mode);\n    doc.setUndoManager(new UndoManager());\n    return doc;\n};\nexports.Range = Range;\nexports.Editor = Editor;\nexports.EditSession = EditSession;\nexports.UndoManager = UndoManager;\nexports.VirtualRenderer = Renderer;\nexports.version = exports.config.version;\n\n});            (function() {\n                ace.require([\"ace/ace\"], function(a) {\n                    if (a) {\n                        a.config.init(true);\n                        a.define = ace.define;\n                    }\n                    if (!window.ace)\n                        window.ace = a;\n                    for (var key in a) if (a.hasOwnProperty(key))\n                        window.ace[key] = a[key];\n                    window.ace[\"default\"] = window.ace;\n                    if ( true && module) {\n                        module.exports = window.ace;\n                    }\n                });\n            })();\n        \n\n//# sourceURL=webpack://playground/./node_modules/ace-builds/src-noconflict/ace.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars.js":
/*!***************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./handlebars.runtime */ \"./node_modules/handlebars/lib/handlebars.runtime.js\");\n/* harmony import */ var _handlebars_compiler_ast__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./handlebars/compiler/ast */ \"./node_modules/handlebars/lib/handlebars/compiler/ast.js\");\n/* harmony import */ var _handlebars_compiler_base__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./handlebars/compiler/base */ \"./node_modules/handlebars/lib/handlebars/compiler/base.js\");\n/* harmony import */ var _handlebars_compiler_compiler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./handlebars/compiler/compiler */ \"./node_modules/handlebars/lib/handlebars/compiler/compiler.js\");\n/* harmony import */ var _handlebars_compiler_javascript_compiler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./handlebars/compiler/javascript-compiler */ \"./node_modules/handlebars/lib/handlebars/compiler/javascript-compiler.js\");\n/* harmony import */ var _handlebars_compiler_visitor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./handlebars/compiler/visitor */ \"./node_modules/handlebars/lib/handlebars/compiler/visitor.js\");\n/* harmony import */ var _handlebars_no_conflict__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./handlebars/no-conflict */ \"./node_modules/handlebars/lib/handlebars/no-conflict.js\");\n\n\n// Compiler imports\n\n\n\n\n\n\n\n\nlet _create = _handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create;\nfunction create() {\n  let hb = _create();\n\n  hb.compile = function(input, options) {\n    return (0,_handlebars_compiler_compiler__WEBPACK_IMPORTED_MODULE_3__.compile)(input, options, hb);\n  };\n  hb.precompile = function(input, options) {\n    return (0,_handlebars_compiler_compiler__WEBPACK_IMPORTED_MODULE_3__.precompile)(input, options, hb);\n  };\n\n  hb.AST = _handlebars_compiler_ast__WEBPACK_IMPORTED_MODULE_1__[\"default\"];\n  hb.Compiler = _handlebars_compiler_compiler__WEBPACK_IMPORTED_MODULE_3__.Compiler;\n  hb.JavaScriptCompiler = _handlebars_compiler_javascript_compiler__WEBPACK_IMPORTED_MODULE_4__[\"default\"];\n  hb.Parser = _handlebars_compiler_base__WEBPACK_IMPORTED_MODULE_2__.parser;\n  hb.parse = _handlebars_compiler_base__WEBPACK_IMPORTED_MODULE_2__.parse;\n  hb.parseWithoutProcessing = _handlebars_compiler_base__WEBPACK_IMPORTED_MODULE_2__.parseWithoutProcessing;\n\n  return hb;\n}\n\nlet inst = create();\ninst.create = create;\n\n(0,_handlebars_no_conflict__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(inst);\n\ninst.Visitor = _handlebars_compiler_visitor__WEBPACK_IMPORTED_MODULE_5__[\"default\"];\n\ninst['default'] = inst;\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (inst);\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars.runtime.js":
/*!***********************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars.runtime.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _handlebars_base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./handlebars/base */ \"./node_modules/handlebars/lib/handlebars/base.js\");\n/* harmony import */ var _handlebars_safe_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./handlebars/safe-string */ \"./node_modules/handlebars/lib/handlebars/safe-string.js\");\n/* harmony import */ var _handlebars_exception__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./handlebars/exception */ \"./node_modules/handlebars/lib/handlebars/exception.js\");\n/* harmony import */ var _handlebars_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./handlebars/utils */ \"./node_modules/handlebars/lib/handlebars/utils.js\");\n/* harmony import */ var _handlebars_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./handlebars/runtime */ \"./node_modules/handlebars/lib/handlebars/runtime.js\");\n/* harmony import */ var _handlebars_no_conflict__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./handlebars/no-conflict */ \"./node_modules/handlebars/lib/handlebars/no-conflict.js\");\n\n\n// Each of these augment the Handlebars object. No need to setup here.\n// (This is done to easily share code between commonjs and browse envs)\n\n\n\n\n\n\n\n// For compatibility and usage outside of module systems, make the Handlebars object a namespace\nfunction create() {\n  let hb = new _handlebars_base__WEBPACK_IMPORTED_MODULE_0__.HandlebarsEnvironment();\n\n  _handlebars_utils__WEBPACK_IMPORTED_MODULE_3__.extend(hb, _handlebars_base__WEBPACK_IMPORTED_MODULE_0__);\n  hb.SafeString = _handlebars_safe_string__WEBPACK_IMPORTED_MODULE_1__[\"default\"];\n  hb.Exception = _handlebars_exception__WEBPACK_IMPORTED_MODULE_2__[\"default\"];\n  hb.Utils = _handlebars_utils__WEBPACK_IMPORTED_MODULE_3__;\n  hb.escapeExpression = _handlebars_utils__WEBPACK_IMPORTED_MODULE_3__.escapeExpression;\n\n  hb.VM = _handlebars_runtime__WEBPACK_IMPORTED_MODULE_4__;\n  hb.template = function(spec) {\n    return _handlebars_runtime__WEBPACK_IMPORTED_MODULE_4__.template(spec, hb);\n  };\n\n  return hb;\n}\n\nlet inst = create();\ninst.create = create;\n\n(0,_handlebars_no_conflict__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(inst);\n\ninst['default'] = inst;\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (inst);\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars.runtime.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/base.js":
/*!********************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/base.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"COMPILER_REVISION\": () => (/* binding */ COMPILER_REVISION),\n/* harmony export */   \"HandlebarsEnvironment\": () => (/* binding */ HandlebarsEnvironment),\n/* harmony export */   \"LAST_COMPATIBLE_COMPILER_REVISION\": () => (/* binding */ LAST_COMPATIBLE_COMPILER_REVISION),\n/* harmony export */   \"REVISION_CHANGES\": () => (/* binding */ REVISION_CHANGES),\n/* harmony export */   \"VERSION\": () => (/* binding */ VERSION),\n/* harmony export */   \"createFrame\": () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_0__.createFrame),\n/* harmony export */   \"log\": () => (/* binding */ log),\n/* harmony export */   \"logger\": () => (/* reexport safe */ _logger__WEBPACK_IMPORTED_MODULE_4__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./node_modules/handlebars/lib/handlebars/utils.js\");\n/* harmony import */ var _exception__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./exception */ \"./node_modules/handlebars/lib/handlebars/exception.js\");\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./helpers */ \"./node_modules/handlebars/lib/handlebars/helpers.js\");\n/* harmony import */ var _decorators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./decorators */ \"./node_modules/handlebars/lib/handlebars/decorators.js\");\n/* harmony import */ var _logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./logger */ \"./node_modules/handlebars/lib/handlebars/logger.js\");\n/* harmony import */ var _internal_proto_access__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./internal/proto-access */ \"./node_modules/handlebars/lib/handlebars/internal/proto-access.js\");\n\n\n\n\n\n\n\nconst VERSION = '4.7.7';\nconst COMPILER_REVISION = 8;\nconst LAST_COMPATIBLE_COMPILER_REVISION = 7;\n\nconst REVISION_CHANGES = {\n  1: '<= 1.0.rc.2', // 1.0.rc.2 is actually rev2 but doesn't report it\n  2: '== 1.0.0-rc.3',\n  3: '== 1.0.0-rc.4',\n  4: '== 1.x.x',\n  5: '== 2.0.0-alpha.x',\n  6: '>= 2.0.0-beta.1',\n  7: '>= 4.0.0 <4.3.0',\n  8: '>= 4.3.0'\n};\n\nconst objectType = '[object Object]';\n\nfunction HandlebarsEnvironment(helpers, partials, decorators) {\n  this.helpers = helpers || {};\n  this.partials = partials || {};\n  this.decorators = decorators || {};\n\n  (0,_helpers__WEBPACK_IMPORTED_MODULE_2__.registerDefaultHelpers)(this);\n  (0,_decorators__WEBPACK_IMPORTED_MODULE_3__.registerDefaultDecorators)(this);\n}\n\nHandlebarsEnvironment.prototype = {\n  constructor: HandlebarsEnvironment,\n\n  logger: _logger__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n  log: _logger__WEBPACK_IMPORTED_MODULE_4__[\"default\"].log,\n\n  registerHelper: function(name, fn) {\n    if (_utils__WEBPACK_IMPORTED_MODULE_0__.toString.call(name) === objectType) {\n      if (fn) {\n        throw new _exception__WEBPACK_IMPORTED_MODULE_1__[\"default\"]('Arg not supported with multiple helpers');\n      }\n      (0,_utils__WEBPACK_IMPORTED_MODULE_0__.extend)(this.helpers, name);\n    } else {\n      this.helpers[name] = fn;\n    }\n  },\n  unregisterHelper: function(name) {\n    delete this.helpers[name];\n  },\n\n  registerPartial: function(name, partial) {\n    if (_utils__WEBPACK_IMPORTED_MODULE_0__.toString.call(name) === objectType) {\n      (0,_utils__WEBPACK_IMPORTED_MODULE_0__.extend)(this.partials, name);\n    } else {\n      if (typeof partial === 'undefined') {\n        throw new _exception__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\n          `Attempting to register a partial called \"${name}\" as undefined`\n        );\n      }\n      this.partials[name] = partial;\n    }\n  },\n  unregisterPartial: function(name) {\n    delete this.partials[name];\n  },\n\n  registerDecorator: function(name, fn) {\n    if (_utils__WEBPACK_IMPORTED_MODULE_0__.toString.call(name) === objectType) {\n      if (fn) {\n        throw new _exception__WEBPACK_IMPORTED_MODULE_1__[\"default\"]('Arg not supported with multiple decorators');\n      }\n      (0,_utils__WEBPACK_IMPORTED_MODULE_0__.extend)(this.decorators, name);\n    } else {\n      this.decorators[name] = fn;\n    }\n  },\n  unregisterDecorator: function(name) {\n    delete this.decorators[name];\n  },\n  /**\n   * Reset the memory of illegal property accesses that have already been logged.\n   * @deprecated should only be used in handlebars test-cases\n   */\n  resetLoggedPropertyAccesses() {\n    (0,_internal_proto_access__WEBPACK_IMPORTED_MODULE_5__.resetLoggedProperties)();\n  }\n};\n\nlet log = _logger__WEBPACK_IMPORTED_MODULE_4__[\"default\"].log;\n\n\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/base.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/compiler/ast.js":
/*!****************************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/compiler/ast.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nlet AST = {\n  // Public API used to evaluate derived attributes regarding AST nodes\n  helpers: {\n    // a mustache is definitely a helper if:\n    // * it is an eligible helper, and\n    // * it has at least one parameter or hash segment\n    helperExpression: function(node) {\n      return (\n        node.type === 'SubExpression' ||\n        ((node.type === 'MustacheStatement' ||\n          node.type === 'BlockStatement') &&\n          !!((node.params && node.params.length) || node.hash))\n      );\n    },\n\n    scopedId: function(path) {\n      return /^\\.|this\\b/.test(path.original);\n    },\n\n    // an ID is simple if it only has one part, and that part is not\n    // `..` or `this`.\n    simpleId: function(path) {\n      return (\n        path.parts.length === 1 && !AST.helpers.scopedId(path) && !path.depth\n      );\n    }\n  }\n};\n\n// Must be exported as an object rather than the root of the module as the jison lexer\n// must modify the object to operate properly.\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AST);\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/compiler/ast.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/compiler/base.js":
/*!*****************************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/compiler/base.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"parse\": () => (/* binding */ parse),\n/* harmony export */   \"parseWithoutProcessing\": () => (/* binding */ parseWithoutProcessing),\n/* harmony export */   \"parser\": () => (/* reexport safe */ _parser__WEBPACK_IMPORTED_MODULE_0__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _parser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./parser */ \"./node_modules/handlebars/lib/handlebars/compiler/parser.js\");\n/* harmony import */ var _whitespace_control__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./whitespace-control */ \"./node_modules/handlebars/lib/handlebars/compiler/whitespace-control.js\");\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./helpers */ \"./node_modules/handlebars/lib/handlebars/compiler/helpers.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ \"./node_modules/handlebars/lib/handlebars/utils.js\");\n\n\n\n\n\n\n\nlet yy = {};\n(0,_utils__WEBPACK_IMPORTED_MODULE_3__.extend)(yy, _helpers__WEBPACK_IMPORTED_MODULE_2__);\n\nfunction parseWithoutProcessing(input, options) {\n  // Just return if an already-compiled AST was passed in.\n  if (input.type === 'Program') {\n    return input;\n  }\n\n  _parser__WEBPACK_IMPORTED_MODULE_0__[\"default\"].yy = yy;\n\n  // Altering the shared object here, but this is ok as parser is a sync operation\n  yy.locInfo = function(locInfo) {\n    return new yy.SourceLocation(options && options.srcName, locInfo);\n  };\n\n  let ast = _parser__WEBPACK_IMPORTED_MODULE_0__[\"default\"].parse(input);\n\n  return ast;\n}\n\nfunction parse(input, options) {\n  let ast = parseWithoutProcessing(input, options);\n  let strip = new _whitespace_control__WEBPACK_IMPORTED_MODULE_1__[\"default\"](options);\n\n  return strip.accept(ast);\n}\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/compiler/base.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/compiler/code-gen.js":
/*!*********************************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/compiler/code-gen.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./node_modules/handlebars/lib/handlebars/utils.js\");\n/* global define */\n\n\nlet SourceNode;\n\ntry {\n  /* istanbul ignore next */\n  if (typeof define !== 'function' || !__webpack_require__.amdO) {\n    // We don't support this in AMD environments. For these environments, we asusme that\n    // they are running on the browser and thus have no need for the source-map library.\n    let SourceMap = __webpack_require__(/*! source-map */ \"./node_modules/source-map/source-map.js\");\n    SourceNode = SourceMap.SourceNode;\n  }\n} catch (err) {\n  /* NOP */\n}\n\n/* istanbul ignore if: tested but not covered in istanbul due to dist build  */\nif (!SourceNode) {\n  SourceNode = function(line, column, srcFile, chunks) {\n    this.src = '';\n    if (chunks) {\n      this.add(chunks);\n    }\n  };\n  /* istanbul ignore next */\n  SourceNode.prototype = {\n    add: function(chunks) {\n      if ((0,_utils__WEBPACK_IMPORTED_MODULE_0__.isArray)(chunks)) {\n        chunks = chunks.join('');\n      }\n      this.src += chunks;\n    },\n    prepend: function(chunks) {\n      if ((0,_utils__WEBPACK_IMPORTED_MODULE_0__.isArray)(chunks)) {\n        chunks = chunks.join('');\n      }\n      this.src = chunks + this.src;\n    },\n    toStringWithSourceMap: function() {\n      return { code: this.toString() };\n    },\n    toString: function() {\n      return this.src;\n    }\n  };\n}\n\nfunction castChunk(chunk, codeGen, loc) {\n  if ((0,_utils__WEBPACK_IMPORTED_MODULE_0__.isArray)(chunk)) {\n    let ret = [];\n\n    for (let i = 0, len = chunk.length; i < len; i++) {\n      ret.push(codeGen.wrap(chunk[i], loc));\n    }\n    return ret;\n  } else if (typeof chunk === 'boolean' || typeof chunk === 'number') {\n    // Handle primitives that the SourceNode will throw up on\n    return chunk + '';\n  }\n  return chunk;\n}\n\nfunction CodeGen(srcFile) {\n  this.srcFile = srcFile;\n  this.source = [];\n}\n\nCodeGen.prototype = {\n  isEmpty() {\n    return !this.source.length;\n  },\n  prepend: function(source, loc) {\n    this.source.unshift(this.wrap(source, loc));\n  },\n  push: function(source, loc) {\n    this.source.push(this.wrap(source, loc));\n  },\n\n  merge: function() {\n    let source = this.empty();\n    this.each(function(line) {\n      source.add(['  ', line, '\\n']);\n    });\n    return source;\n  },\n\n  each: function(iter) {\n    for (let i = 0, len = this.source.length; i < len; i++) {\n      iter(this.source[i]);\n    }\n  },\n\n  empty: function() {\n    let loc = this.currentLocation || { start: {} };\n    return new SourceNode(loc.start.line, loc.start.column, this.srcFile);\n  },\n  wrap: function(chunk, loc = this.currentLocation || { start: {} }) {\n    if (chunk instanceof SourceNode) {\n      return chunk;\n    }\n\n    chunk = castChunk(chunk, this, loc);\n\n    return new SourceNode(\n      loc.start.line,\n      loc.start.column,\n      this.srcFile,\n      chunk\n    );\n  },\n\n  functionCall: function(fn, type, params) {\n    params = this.generateList(params);\n    return this.wrap([fn, type ? '.' + type + '(' : '(', params, ')']);\n  },\n\n  quotedString: function(str) {\n    return (\n      '\"' +\n      (str + '')\n        .replace(/\\\\/g, '\\\\\\\\')\n        .replace(/\"/g, '\\\\\"')\n        .replace(/\\n/g, '\\\\n')\n        .replace(/\\r/g, '\\\\r')\n        .replace(/\\u2028/g, '\\\\u2028') // Per Ecma-262 7.3 + 7.8.4\n        .replace(/\\u2029/g, '\\\\u2029') +\n      '\"'\n    );\n  },\n\n  objectLiteral: function(obj) {\n    let pairs = [];\n\n    Object.keys(obj).forEach(key => {\n      let value = castChunk(obj[key], this);\n      if (value !== 'undefined') {\n        pairs.push([this.quotedString(key), ':', value]);\n      }\n    });\n\n    let ret = this.generateList(pairs);\n    ret.prepend('{');\n    ret.add('}');\n    return ret;\n  },\n\n  generateList: function(entries) {\n    let ret = this.empty();\n\n    for (let i = 0, len = entries.length; i < len; i++) {\n      if (i) {\n        ret.add(',');\n      }\n\n      ret.add(castChunk(entries[i], this));\n    }\n\n    return ret;\n  },\n\n  generateArray: function(entries) {\n    let ret = this.generateList(entries);\n    ret.prepend('[');\n    ret.add(']');\n\n    return ret;\n  }\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CodeGen);\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/compiler/code-gen.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/compiler/compiler.js":
/*!*********************************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/compiler/compiler.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Compiler\": () => (/* binding */ Compiler),\n/* harmony export */   \"compile\": () => (/* binding */ compile),\n/* harmony export */   \"precompile\": () => (/* binding */ precompile)\n/* harmony export */ });\n/* harmony import */ var _exception__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../exception */ \"./node_modules/handlebars/lib/handlebars/exception.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils */ \"./node_modules/handlebars/lib/handlebars/utils.js\");\n/* harmony import */ var _ast__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ast */ \"./node_modules/handlebars/lib/handlebars/compiler/ast.js\");\n/* eslint-disable new-cap */\n\n\n\n\n\nconst slice = [].slice;\n\nfunction Compiler() {}\n\n// the foundHelper register will disambiguate helper lookup from finding a\n// function in a context. This is necessary for mustache compatibility, which\n// requires that context functions in blocks are evaluated by blockHelperMissing,\n// and then proceed as if the resulting value was provided to blockHelperMissing.\n\nCompiler.prototype = {\n  compiler: Compiler,\n\n  equals: function(other) {\n    let len = this.opcodes.length;\n    if (other.opcodes.length !== len) {\n      return false;\n    }\n\n    for (let i = 0; i < len; i++) {\n      let opcode = this.opcodes[i],\n        otherOpcode = other.opcodes[i];\n      if (\n        opcode.opcode !== otherOpcode.opcode ||\n        !argEquals(opcode.args, otherOpcode.args)\n      ) {\n        return false;\n      }\n    }\n\n    // We know that length is the same between the two arrays because they are directly tied\n    // to the opcode behavior above.\n    len = this.children.length;\n    for (let i = 0; i < len; i++) {\n      if (!this.children[i].equals(other.children[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  },\n\n  guid: 0,\n\n  compile: function(program, options) {\n    this.sourceNode = [];\n    this.opcodes = [];\n    this.children = [];\n    this.options = options;\n    this.stringParams = options.stringParams;\n    this.trackIds = options.trackIds;\n\n    options.blockParams = options.blockParams || [];\n\n    options.knownHelpers = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.extend)(\n      Object.create(null),\n      {\n        helperMissing: true,\n        blockHelperMissing: true,\n        each: true,\n        if: true,\n        unless: true,\n        with: true,\n        log: true,\n        lookup: true\n      },\n      options.knownHelpers\n    );\n\n    return this.accept(program);\n  },\n\n  compileProgram: function(program) {\n    let childCompiler = new this.compiler(), // eslint-disable-line new-cap\n      result = childCompiler.compile(program, this.options),\n      guid = this.guid++;\n\n    this.usePartial = this.usePartial || result.usePartial;\n\n    this.children[guid] = result;\n    this.useDepths = this.useDepths || result.useDepths;\n\n    return guid;\n  },\n\n  accept: function(node) {\n    /* istanbul ignore next: Sanity code */\n    if (!this[node.type]) {\n      throw new _exception__WEBPACK_IMPORTED_MODULE_0__[\"default\"]('Unknown type: ' + node.type, node);\n    }\n\n    this.sourceNode.unshift(node);\n    let ret = this[node.type](node);\n    this.sourceNode.shift();\n    return ret;\n  },\n\n  Program: function(program) {\n    this.options.blockParams.unshift(program.blockParams);\n\n    let body = program.body,\n      bodyLength = body.length;\n    for (let i = 0; i < bodyLength; i++) {\n      this.accept(body[i]);\n    }\n\n    this.options.blockParams.shift();\n\n    this.isSimple = bodyLength === 1;\n    this.blockParams = program.blockParams ? program.blockParams.length : 0;\n\n    return this;\n  },\n\n  BlockStatement: function(block) {\n    transformLiteralToPath(block);\n\n    let program = block.program,\n      inverse = block.inverse;\n\n    program = program && this.compileProgram(program);\n    inverse = inverse && this.compileProgram(inverse);\n\n    let type = this.classifySexpr(block);\n\n    if (type === 'helper') {\n      this.helperSexpr(block, program, inverse);\n    } else if (type === 'simple') {\n      this.simpleSexpr(block);\n\n      // now that the simple mustache is resolved, we need to\n      // evaluate it by executing `blockHelperMissing`\n      this.opcode('pushProgram', program);\n      this.opcode('pushProgram', inverse);\n      this.opcode('emptyHash');\n      this.opcode('blockValue', block.path.original);\n    } else {\n      this.ambiguousSexpr(block, program, inverse);\n\n      // now that the simple mustache is resolved, we need to\n      // evaluate it by executing `blockHelperMissing`\n      this.opcode('pushProgram', program);\n      this.opcode('pushProgram', inverse);\n      this.opcode('emptyHash');\n      this.opcode('ambiguousBlockValue');\n    }\n\n    this.opcode('append');\n  },\n\n  DecoratorBlock(decorator) {\n    let program = decorator.program && this.compileProgram(decorator.program);\n    let params = this.setupFullMustacheParams(decorator, program, undefined),\n      path = decorator.path;\n\n    this.useDecorators = true;\n    this.opcode('registerDecorator', params.length, path.original);\n  },\n\n  PartialStatement: function(partial) {\n    this.usePartial = true;\n\n    let program = partial.program;\n    if (program) {\n      program = this.compileProgram(partial.program);\n    }\n\n    let params = partial.params;\n    if (params.length > 1) {\n      throw new _exception__WEBPACK_IMPORTED_MODULE_0__[\"default\"](\n        'Unsupported number of partial arguments: ' + params.length,\n        partial\n      );\n    } else if (!params.length) {\n      if (this.options.explicitPartialContext) {\n        this.opcode('pushLiteral', 'undefined');\n      } else {\n        params.push({ type: 'PathExpression', parts: [], depth: 0 });\n      }\n    }\n\n    let partialName = partial.name.original,\n      isDynamic = partial.name.type === 'SubExpression';\n    if (isDynamic) {\n      this.accept(partial.name);\n    }\n\n    this.setupFullMustacheParams(partial, program, undefined, true);\n\n    let indent = partial.indent || '';\n    if (this.options.preventIndent && indent) {\n      this.opcode('appendContent', indent);\n      indent = '';\n    }\n\n    this.opcode('invokePartial', isDynamic, partialName, indent);\n    this.opcode('append');\n  },\n  PartialBlockStatement: function(partialBlock) {\n    this.PartialStatement(partialBlock);\n  },\n\n  MustacheStatement: function(mustache) {\n    this.SubExpression(mustache);\n\n    if (mustache.escaped && !this.options.noEscape) {\n      this.opcode('appendEscaped');\n    } else {\n      this.opcode('append');\n    }\n  },\n  Decorator(decorator) {\n    this.DecoratorBlock(decorator);\n  },\n\n  ContentStatement: function(content) {\n    if (content.value) {\n      this.opcode('appendContent', content.value);\n    }\n  },\n\n  CommentStatement: function() {},\n\n  SubExpression: function(sexpr) {\n    transformLiteralToPath(sexpr);\n    let type = this.classifySexpr(sexpr);\n\n    if (type === 'simple') {\n      this.simpleSexpr(sexpr);\n    } else if (type === 'helper') {\n      this.helperSexpr(sexpr);\n    } else {\n      this.ambiguousSexpr(sexpr);\n    }\n  },\n  ambiguousSexpr: function(sexpr, program, inverse) {\n    let path = sexpr.path,\n      name = path.parts[0],\n      isBlock = program != null || inverse != null;\n\n    this.opcode('getContext', path.depth);\n\n    this.opcode('pushProgram', program);\n    this.opcode('pushProgram', inverse);\n\n    path.strict = true;\n    this.accept(path);\n\n    this.opcode('invokeAmbiguous', name, isBlock);\n  },\n\n  simpleSexpr: function(sexpr) {\n    let path = sexpr.path;\n    path.strict = true;\n    this.accept(path);\n    this.opcode('resolvePossibleLambda');\n  },\n\n  helperSexpr: function(sexpr, program, inverse) {\n    let params = this.setupFullMustacheParams(sexpr, program, inverse),\n      path = sexpr.path,\n      name = path.parts[0];\n\n    if (this.options.knownHelpers[name]) {\n      this.opcode('invokeKnownHelper', params.length, name);\n    } else if (this.options.knownHelpersOnly) {\n      throw new _exception__WEBPACK_IMPORTED_MODULE_0__[\"default\"](\n        'You specified knownHelpersOnly, but used the unknown helper ' + name,\n        sexpr\n      );\n    } else {\n      path.strict = true;\n      path.falsy = true;\n\n      this.accept(path);\n      this.opcode(\n        'invokeHelper',\n        params.length,\n        path.original,\n        _ast__WEBPACK_IMPORTED_MODULE_2__[\"default\"].helpers.simpleId(path)\n      );\n    }\n  },\n\n  PathExpression: function(path) {\n    this.addDepth(path.depth);\n    this.opcode('getContext', path.depth);\n\n    let name = path.parts[0],\n      scoped = _ast__WEBPACK_IMPORTED_MODULE_2__[\"default\"].helpers.scopedId(path),\n      blockParamId = !path.depth && !scoped && this.blockParamIndex(name);\n\n    if (blockParamId) {\n      this.opcode('lookupBlockParam', blockParamId, path.parts);\n    } else if (!name) {\n      // Context reference, i.e. `{{foo .}}` or `{{foo ..}}`\n      this.opcode('pushContext');\n    } else if (path.data) {\n      this.options.data = true;\n      this.opcode('lookupData', path.depth, path.parts, path.strict);\n    } else {\n      this.opcode(\n        'lookupOnContext',\n        path.parts,\n        path.falsy,\n        path.strict,\n        scoped\n      );\n    }\n  },\n\n  StringLiteral: function(string) {\n    this.opcode('pushString', string.value);\n  },\n\n  NumberLiteral: function(number) {\n    this.opcode('pushLiteral', number.value);\n  },\n\n  BooleanLiteral: function(bool) {\n    this.opcode('pushLiteral', bool.value);\n  },\n\n  UndefinedLiteral: function() {\n    this.opcode('pushLiteral', 'undefined');\n  },\n\n  NullLiteral: function() {\n    this.opcode('pushLiteral', 'null');\n  },\n\n  Hash: function(hash) {\n    let pairs = hash.pairs,\n      i = 0,\n      l = pairs.length;\n\n    this.opcode('pushHash');\n\n    for (; i < l; i++) {\n      this.pushParam(pairs[i].value);\n    }\n    while (i--) {\n      this.opcode('assignToHash', pairs[i].key);\n    }\n    this.opcode('popHash');\n  },\n\n  // HELPERS\n  opcode: function(name) {\n    this.opcodes.push({\n      opcode: name,\n      args: slice.call(arguments, 1),\n      loc: this.sourceNode[0].loc\n    });\n  },\n\n  addDepth: function(depth) {\n    if (!depth) {\n      return;\n    }\n\n    this.useDepths = true;\n  },\n\n  classifySexpr: function(sexpr) {\n    let isSimple = _ast__WEBPACK_IMPORTED_MODULE_2__[\"default\"].helpers.simpleId(sexpr.path);\n\n    let isBlockParam = isSimple && !!this.blockParamIndex(sexpr.path.parts[0]);\n\n    // a mustache is an eligible helper if:\n    // * its id is simple (a single part, not `this` or `..`)\n    let isHelper = !isBlockParam && _ast__WEBPACK_IMPORTED_MODULE_2__[\"default\"].helpers.helperExpression(sexpr);\n\n    // if a mustache is an eligible helper but not a definite\n    // helper, it is ambiguous, and will be resolved in a later\n    // pass or at runtime.\n    let isEligible = !isBlockParam && (isHelper || isSimple);\n\n    // if ambiguous, we can possibly resolve the ambiguity now\n    // An eligible helper is one that does not have a complex path, i.e. `this.foo`, `../foo` etc.\n    if (isEligible && !isHelper) {\n      let name = sexpr.path.parts[0],\n        options = this.options;\n      if (options.knownHelpers[name]) {\n        isHelper = true;\n      } else if (options.knownHelpersOnly) {\n        isEligible = false;\n      }\n    }\n\n    if (isHelper) {\n      return 'helper';\n    } else if (isEligible) {\n      return 'ambiguous';\n    } else {\n      return 'simple';\n    }\n  },\n\n  pushParams: function(params) {\n    for (let i = 0, l = params.length; i < l; i++) {\n      this.pushParam(params[i]);\n    }\n  },\n\n  pushParam: function(val) {\n    let value = val.value != null ? val.value : val.original || '';\n\n    if (this.stringParams) {\n      if (value.replace) {\n        value = value.replace(/^(\\.?\\.\\/)*/g, '').replace(/\\//g, '.');\n      }\n\n      if (val.depth) {\n        this.addDepth(val.depth);\n      }\n      this.opcode('getContext', val.depth || 0);\n      this.opcode('pushStringParam', value, val.type);\n\n      if (val.type === 'SubExpression') {\n        // SubExpressions get evaluated and passed in\n        // in string params mode.\n        this.accept(val);\n      }\n    } else {\n      if (this.trackIds) {\n        let blockParamIndex;\n        if (val.parts && !_ast__WEBPACK_IMPORTED_MODULE_2__[\"default\"].helpers.scopedId(val) && !val.depth) {\n          blockParamIndex = this.blockParamIndex(val.parts[0]);\n        }\n        if (blockParamIndex) {\n          let blockParamChild = val.parts.slice(1).join('.');\n          this.opcode('pushId', 'BlockParam', blockParamIndex, blockParamChild);\n        } else {\n          value = val.original || value;\n          if (value.replace) {\n            value = value\n              .replace(/^this(?:\\.|$)/, '')\n              .replace(/^\\.\\//, '')\n              .replace(/^\\.$/, '');\n          }\n\n          this.opcode('pushId', val.type, value);\n        }\n      }\n      this.accept(val);\n    }\n  },\n\n  setupFullMustacheParams: function(sexpr, program, inverse, omitEmpty) {\n    let params = sexpr.params;\n    this.pushParams(params);\n\n    this.opcode('pushProgram', program);\n    this.opcode('pushProgram', inverse);\n\n    if (sexpr.hash) {\n      this.accept(sexpr.hash);\n    } else {\n      this.opcode('emptyHash', omitEmpty);\n    }\n\n    return params;\n  },\n\n  blockParamIndex: function(name) {\n    for (\n      let depth = 0, len = this.options.blockParams.length;\n      depth < len;\n      depth++\n    ) {\n      let blockParams = this.options.blockParams[depth],\n        param = blockParams && (0,_utils__WEBPACK_IMPORTED_MODULE_1__.indexOf)(blockParams, name);\n      if (blockParams && param >= 0) {\n        return [depth, param];\n      }\n    }\n  }\n};\n\nfunction precompile(input, options, env) {\n  if (\n    input == null ||\n    (typeof input !== 'string' && input.type !== 'Program')\n  ) {\n    throw new _exception__WEBPACK_IMPORTED_MODULE_0__[\"default\"](\n      'You must pass a string or Handlebars AST to Handlebars.precompile. You passed ' +\n        input\n    );\n  }\n\n  options = options || {};\n  if (!('data' in options)) {\n    options.data = true;\n  }\n  if (options.compat) {\n    options.useDepths = true;\n  }\n\n  let ast = env.parse(input, options),\n    environment = new env.Compiler().compile(ast, options);\n  return new env.JavaScriptCompiler().compile(environment, options);\n}\n\nfunction compile(input, options = {}, env) {\n  if (\n    input == null ||\n    (typeof input !== 'string' && input.type !== 'Program')\n  ) {\n    throw new _exception__WEBPACK_IMPORTED_MODULE_0__[\"default\"](\n      'You must pass a string or Handlebars AST to Handlebars.compile. You passed ' +\n        input\n    );\n  }\n\n  options = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.extend)({}, options);\n  if (!('data' in options)) {\n    options.data = true;\n  }\n  if (options.compat) {\n    options.useDepths = true;\n  }\n\n  let compiled;\n\n  function compileInput() {\n    let ast = env.parse(input, options),\n      environment = new env.Compiler().compile(ast, options),\n      templateSpec = new env.JavaScriptCompiler().compile(\n        environment,\n        options,\n        undefined,\n        true\n      );\n    return env.template(templateSpec);\n  }\n\n  // Template is only compiled on first use and cached after that point.\n  function ret(context, execOptions) {\n    if (!compiled) {\n      compiled = compileInput();\n    }\n    return compiled.call(this, context, execOptions);\n  }\n  ret._setup = function(setupOptions) {\n    if (!compiled) {\n      compiled = compileInput();\n    }\n    return compiled._setup(setupOptions);\n  };\n  ret._child = function(i, data, blockParams, depths) {\n    if (!compiled) {\n      compiled = compileInput();\n    }\n    return compiled._child(i, data, blockParams, depths);\n  };\n  return ret;\n}\n\nfunction argEquals(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if ((0,_utils__WEBPACK_IMPORTED_MODULE_1__.isArray)(a) && (0,_utils__WEBPACK_IMPORTED_MODULE_1__.isArray)(b) && a.length === b.length) {\n    for (let i = 0; i < a.length; i++) {\n      if (!argEquals(a[i], b[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\n\nfunction transformLiteralToPath(sexpr) {\n  if (!sexpr.path.parts) {\n    let literal = sexpr.path;\n    // Casting to string here to make false and 0 literal values play nicely with the rest\n    // of the system.\n    sexpr.path = {\n      type: 'PathExpression',\n      data: false,\n      depth: 0,\n      parts: [literal.original + ''],\n      original: literal.original + '',\n      loc: literal.loc\n    };\n  }\n}\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/compiler/compiler.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/compiler/helpers.js":
/*!********************************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/compiler/helpers.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SourceLocation\": () => (/* binding */ SourceLocation),\n/* harmony export */   \"id\": () => (/* binding */ id),\n/* harmony export */   \"prepareBlock\": () => (/* binding */ prepareBlock),\n/* harmony export */   \"prepareMustache\": () => (/* binding */ prepareMustache),\n/* harmony export */   \"preparePartialBlock\": () => (/* binding */ preparePartialBlock),\n/* harmony export */   \"preparePath\": () => (/* binding */ preparePath),\n/* harmony export */   \"prepareProgram\": () => (/* binding */ prepareProgram),\n/* harmony export */   \"prepareRawBlock\": () => (/* binding */ prepareRawBlock),\n/* harmony export */   \"stripComment\": () => (/* binding */ stripComment),\n/* harmony export */   \"stripFlags\": () => (/* binding */ stripFlags)\n/* harmony export */ });\n/* harmony import */ var _exception__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../exception */ \"./node_modules/handlebars/lib/handlebars/exception.js\");\n\n\nfunction validateClose(open, close) {\n  close = close.path ? close.path.original : close;\n\n  if (open.path.original !== close) {\n    let errorNode = { loc: open.path.loc };\n\n    throw new _exception__WEBPACK_IMPORTED_MODULE_0__[\"default\"](\n      open.path.original + \" doesn't match \" + close,\n      errorNode\n    );\n  }\n}\n\nfunction SourceLocation(source, locInfo) {\n  this.source = source;\n  this.start = {\n    line: locInfo.first_line,\n    column: locInfo.first_column\n  };\n  this.end = {\n    line: locInfo.last_line,\n    column: locInfo.last_column\n  };\n}\n\nfunction id(token) {\n  if (/^\\[.*\\]$/.test(token)) {\n    return token.substring(1, token.length - 1);\n  } else {\n    return token;\n  }\n}\n\nfunction stripFlags(open, close) {\n  return {\n    open: open.charAt(2) === '~',\n    close: close.charAt(close.length - 3) === '~'\n  };\n}\n\nfunction stripComment(comment) {\n  return comment.replace(/^\\{\\{~?!-?-?/, '').replace(/-?-?~?\\}\\}$/, '');\n}\n\nfunction preparePath(data, parts, loc) {\n  loc = this.locInfo(loc);\n\n  let original = data ? '@' : '',\n    dig = [],\n    depth = 0;\n\n  for (let i = 0, l = parts.length; i < l; i++) {\n    let part = parts[i].part,\n      // If we have [] syntax then we do not treat path references as operators,\n      // i.e. foo.[this] resolves to approximately context.foo['this']\n      isLiteral = parts[i].original !== part;\n    original += (parts[i].separator || '') + part;\n\n    if (!isLiteral && (part === '..' || part === '.' || part === 'this')) {\n      if (dig.length > 0) {\n        throw new _exception__WEBPACK_IMPORTED_MODULE_0__[\"default\"]('Invalid path: ' + original, { loc });\n      } else if (part === '..') {\n        depth++;\n      }\n    } else {\n      dig.push(part);\n    }\n  }\n\n  return {\n    type: 'PathExpression',\n    data,\n    depth,\n    parts: dig,\n    original,\n    loc\n  };\n}\n\nfunction prepareMustache(path, params, hash, open, strip, locInfo) {\n  // Must use charAt to support IE pre-10\n  let escapeFlag = open.charAt(3) || open.charAt(2),\n    escaped = escapeFlag !== '{' && escapeFlag !== '&';\n\n  let decorator = /\\*/.test(open);\n  return {\n    type: decorator ? 'Decorator' : 'MustacheStatement',\n    path,\n    params,\n    hash,\n    escaped,\n    strip,\n    loc: this.locInfo(locInfo)\n  };\n}\n\nfunction prepareRawBlock(openRawBlock, contents, close, locInfo) {\n  validateClose(openRawBlock, close);\n\n  locInfo = this.locInfo(locInfo);\n  let program = {\n    type: 'Program',\n    body: contents,\n    strip: {},\n    loc: locInfo\n  };\n\n  return {\n    type: 'BlockStatement',\n    path: openRawBlock.path,\n    params: openRawBlock.params,\n    hash: openRawBlock.hash,\n    program,\n    openStrip: {},\n    inverseStrip: {},\n    closeStrip: {},\n    loc: locInfo\n  };\n}\n\nfunction prepareBlock(\n  openBlock,\n  program,\n  inverseAndProgram,\n  close,\n  inverted,\n  locInfo\n) {\n  if (close && close.path) {\n    validateClose(openBlock, close);\n  }\n\n  let decorator = /\\*/.test(openBlock.open);\n\n  program.blockParams = openBlock.blockParams;\n\n  let inverse, inverseStrip;\n\n  if (inverseAndProgram) {\n    if (decorator) {\n      throw new _exception__WEBPACK_IMPORTED_MODULE_0__[\"default\"](\n        'Unexpected inverse block on decorator',\n        inverseAndProgram\n      );\n    }\n\n    if (inverseAndProgram.chain) {\n      inverseAndProgram.program.body[0].closeStrip = close.strip;\n    }\n\n    inverseStrip = inverseAndProgram.strip;\n    inverse = inverseAndProgram.program;\n  }\n\n  if (inverted) {\n    inverted = inverse;\n    inverse = program;\n    program = inverted;\n  }\n\n  return {\n    type: decorator ? 'DecoratorBlock' : 'BlockStatement',\n    path: openBlock.path,\n    params: openBlock.params,\n    hash: openBlock.hash,\n    program,\n    inverse,\n    openStrip: openBlock.strip,\n    inverseStrip,\n    closeStrip: close && close.strip,\n    loc: this.locInfo(locInfo)\n  };\n}\n\nfunction prepareProgram(statements, loc) {\n  if (!loc && statements.length) {\n    const firstLoc = statements[0].loc,\n      lastLoc = statements[statements.length - 1].loc;\n\n    /* istanbul ignore else */\n    if (firstLoc && lastLoc) {\n      loc = {\n        source: firstLoc.source,\n        start: {\n          line: firstLoc.start.line,\n          column: firstLoc.start.column\n        },\n        end: {\n          line: lastLoc.end.line,\n          column: lastLoc.end.column\n        }\n      };\n    }\n  }\n\n  return {\n    type: 'Program',\n    body: statements,\n    strip: {},\n    loc: loc\n  };\n}\n\nfunction preparePartialBlock(open, program, close, locInfo) {\n  validateClose(open, close);\n\n  return {\n    type: 'PartialBlockStatement',\n    name: open.path,\n    params: open.params,\n    hash: open.hash,\n    program,\n    openStrip: open.strip,\n    closeStrip: close && close.strip,\n    loc: this.locInfo(locInfo)\n  };\n}\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/compiler/helpers.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/compiler/javascript-compiler.js":
/*!********************************************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/compiler/javascript-compiler.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../base */ \"./node_modules/handlebars/lib/handlebars/base.js\");\n/* harmony import */ var _exception__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../exception */ \"./node_modules/handlebars/lib/handlebars/exception.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ \"./node_modules/handlebars/lib/handlebars/utils.js\");\n/* harmony import */ var _code_gen__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./code-gen */ \"./node_modules/handlebars/lib/handlebars/compiler/code-gen.js\");\n\n\n\n\n\nfunction Literal(value) {\n  this.value = value;\n}\n\nfunction JavaScriptCompiler() {}\n\nJavaScriptCompiler.prototype = {\n  // PUBLIC API: You can override these methods in a subclass to provide\n  // alternative compiled forms for name lookup and buffering semantics\n  nameLookup: function(parent, name /*,  type */) {\n    return this.internalNameLookup(parent, name);\n  },\n  depthedLookup: function(name) {\n    return [\n      this.aliasable('container.lookup'),\n      '(depths, ',\n      JSON.stringify(name),\n      ')'\n    ];\n  },\n\n  compilerInfo: function() {\n    const revision = _base__WEBPACK_IMPORTED_MODULE_0__.COMPILER_REVISION,\n      versions = _base__WEBPACK_IMPORTED_MODULE_0__.REVISION_CHANGES[revision];\n    return [revision, versions];\n  },\n\n  appendToBuffer: function(source, location, explicit) {\n    // Force a source as this simplifies the merge logic.\n    if (!(0,_utils__WEBPACK_IMPORTED_MODULE_2__.isArray)(source)) {\n      source = [source];\n    }\n    source = this.source.wrap(source, location);\n\n    if (this.environment.isSimple) {\n      return ['return ', source, ';'];\n    } else if (explicit) {\n      // This is a case where the buffer operation occurs as a child of another\n      // construct, generally braces. We have to explicitly output these buffer\n      // operations to ensure that the emitted code goes in the correct location.\n      return ['buffer += ', source, ';'];\n    } else {\n      source.appendToBuffer = true;\n      return source;\n    }\n  },\n\n  initializeBuffer: function() {\n    return this.quotedString('');\n  },\n  // END PUBLIC API\n  internalNameLookup: function(parent, name) {\n    this.lookupPropertyFunctionIsUsed = true;\n    return ['lookupProperty(', parent, ',', JSON.stringify(name), ')'];\n  },\n\n  lookupPropertyFunctionIsUsed: false,\n\n  compile: function(environment, options, context, asObject) {\n    this.environment = environment;\n    this.options = options;\n    this.stringParams = this.options.stringParams;\n    this.trackIds = this.options.trackIds;\n    this.precompile = !asObject;\n\n    this.name = this.environment.name;\n    this.isChild = !!context;\n    this.context = context || {\n      decorators: [],\n      programs: [],\n      environments: []\n    };\n\n    this.preamble();\n\n    this.stackSlot = 0;\n    this.stackVars = [];\n    this.aliases = {};\n    this.registers = { list: [] };\n    this.hashes = [];\n    this.compileStack = [];\n    this.inlineStack = [];\n    this.blockParams = [];\n\n    this.compileChildren(environment, options);\n\n    this.useDepths =\n      this.useDepths ||\n      environment.useDepths ||\n      environment.useDecorators ||\n      this.options.compat;\n    this.useBlockParams = this.useBlockParams || environment.useBlockParams;\n\n    let opcodes = environment.opcodes,\n      opcode,\n      firstLoc,\n      i,\n      l;\n\n    for (i = 0, l = opcodes.length; i < l; i++) {\n      opcode = opcodes[i];\n\n      this.source.currentLocation = opcode.loc;\n      firstLoc = firstLoc || opcode.loc;\n      this[opcode.opcode].apply(this, opcode.args);\n    }\n\n    // Flush any trailing content that might be pending.\n    this.source.currentLocation = firstLoc;\n    this.pushSource('');\n\n    /* istanbul ignore next */\n    if (this.stackSlot || this.inlineStack.length || this.compileStack.length) {\n      throw new _exception__WEBPACK_IMPORTED_MODULE_1__[\"default\"]('Compile completed with content left on stack');\n    }\n\n    if (!this.decorators.isEmpty()) {\n      this.useDecorators = true;\n\n      this.decorators.prepend([\n        'var decorators = container.decorators, ',\n        this.lookupPropertyFunctionVarDeclaration(),\n        ';\\n'\n      ]);\n      this.decorators.push('return fn;');\n\n      if (asObject) {\n        this.decorators = Function.apply(this, [\n          'fn',\n          'props',\n          'container',\n          'depth0',\n          'data',\n          'blockParams',\n          'depths',\n          this.decorators.merge()\n        ]);\n      } else {\n        this.decorators.prepend(\n          'function(fn, props, container, depth0, data, blockParams, depths) {\\n'\n        );\n        this.decorators.push('}\\n');\n        this.decorators = this.decorators.merge();\n      }\n    } else {\n      this.decorators = undefined;\n    }\n\n    let fn = this.createFunctionContext(asObject);\n    if (!this.isChild) {\n      let ret = {\n        compiler: this.compilerInfo(),\n        main: fn\n      };\n\n      if (this.decorators) {\n        ret.main_d = this.decorators; // eslint-disable-line camelcase\n        ret.useDecorators = true;\n      }\n\n      let { programs, decorators } = this.context;\n      for (i = 0, l = programs.length; i < l; i++) {\n        if (programs[i]) {\n          ret[i] = programs[i];\n          if (decorators[i]) {\n            ret[i + '_d'] = decorators[i];\n            ret.useDecorators = true;\n          }\n        }\n      }\n\n      if (this.environment.usePartial) {\n        ret.usePartial = true;\n      }\n      if (this.options.data) {\n        ret.useData = true;\n      }\n      if (this.useDepths) {\n        ret.useDepths = true;\n      }\n      if (this.useBlockParams) {\n        ret.useBlockParams = true;\n      }\n      if (this.options.compat) {\n        ret.compat = true;\n      }\n\n      if (!asObject) {\n        ret.compiler = JSON.stringify(ret.compiler);\n\n        this.source.currentLocation = { start: { line: 1, column: 0 } };\n        ret = this.objectLiteral(ret);\n\n        if (options.srcName) {\n          ret = ret.toStringWithSourceMap({ file: options.destName });\n          ret.map = ret.map && ret.map.toString();\n        } else {\n          ret = ret.toString();\n        }\n      } else {\n        ret.compilerOptions = this.options;\n      }\n\n      return ret;\n    } else {\n      return fn;\n    }\n  },\n\n  preamble: function() {\n    // track the last context pushed into place to allow skipping the\n    // getContext opcode when it would be a noop\n    this.lastContext = 0;\n    this.source = new _code_gen__WEBPACK_IMPORTED_MODULE_3__[\"default\"](this.options.srcName);\n    this.decorators = new _code_gen__WEBPACK_IMPORTED_MODULE_3__[\"default\"](this.options.srcName);\n  },\n\n  createFunctionContext: function(asObject) {\n    let varDeclarations = '';\n\n    let locals = this.stackVars.concat(this.registers.list);\n    if (locals.length > 0) {\n      varDeclarations += ', ' + locals.join(', ');\n    }\n\n    // Generate minimizer alias mappings\n    //\n    // When using true SourceNodes, this will update all references to the given alias\n    // as the source nodes are reused in situ. For the non-source node compilation mode,\n    // aliases will not be used, but this case is already being run on the client and\n    // we aren't concern about minimizing the template size.\n    let aliasCount = 0;\n    Object.keys(this.aliases).forEach(alias => {\n      let node = this.aliases[alias];\n      if (node.children && node.referenceCount > 1) {\n        varDeclarations += ', alias' + ++aliasCount + '=' + alias;\n        node.children[0] = 'alias' + aliasCount;\n      }\n    });\n\n    if (this.lookupPropertyFunctionIsUsed) {\n      varDeclarations += ', ' + this.lookupPropertyFunctionVarDeclaration();\n    }\n\n    let params = ['container', 'depth0', 'helpers', 'partials', 'data'];\n\n    if (this.useBlockParams || this.useDepths) {\n      params.push('blockParams');\n    }\n    if (this.useDepths) {\n      params.push('depths');\n    }\n\n    // Perform a second pass over the output to merge content when possible\n    let source = this.mergeSource(varDeclarations);\n\n    if (asObject) {\n      params.push(source);\n\n      return Function.apply(this, params);\n    } else {\n      return this.source.wrap([\n        'function(',\n        params.join(','),\n        ') {\\n  ',\n        source,\n        '}'\n      ]);\n    }\n  },\n  mergeSource: function(varDeclarations) {\n    let isSimple = this.environment.isSimple,\n      appendOnly = !this.forceBuffer,\n      appendFirst,\n      sourceSeen,\n      bufferStart,\n      bufferEnd;\n    this.source.each(line => {\n      if (line.appendToBuffer) {\n        if (bufferStart) {\n          line.prepend('  + ');\n        } else {\n          bufferStart = line;\n        }\n        bufferEnd = line;\n      } else {\n        if (bufferStart) {\n          if (!sourceSeen) {\n            appendFirst = true;\n          } else {\n            bufferStart.prepend('buffer += ');\n          }\n          bufferEnd.add(';');\n          bufferStart = bufferEnd = undefined;\n        }\n\n        sourceSeen = true;\n        if (!isSimple) {\n          appendOnly = false;\n        }\n      }\n    });\n\n    if (appendOnly) {\n      if (bufferStart) {\n        bufferStart.prepend('return ');\n        bufferEnd.add(';');\n      } else if (!sourceSeen) {\n        this.source.push('return \"\";');\n      }\n    } else {\n      varDeclarations +=\n        ', buffer = ' + (appendFirst ? '' : this.initializeBuffer());\n\n      if (bufferStart) {\n        bufferStart.prepend('return buffer + ');\n        bufferEnd.add(';');\n      } else {\n        this.source.push('return buffer;');\n      }\n    }\n\n    if (varDeclarations) {\n      this.source.prepend(\n        'var ' + varDeclarations.substring(2) + (appendFirst ? '' : ';\\n')\n      );\n    }\n\n    return this.source.merge();\n  },\n\n  lookupPropertyFunctionVarDeclaration: function() {\n    return `\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    `.trim();\n  },\n\n  // [blockValue]\n  //\n  // On stack, before: hash, inverse, program, value\n  // On stack, after: return value of blockHelperMissing\n  //\n  // The purpose of this opcode is to take a block of the form\n  // `{{#this.foo}}...{{/this.foo}}`, resolve the value of `foo`, and\n  // replace it on the stack with the result of properly\n  // invoking blockHelperMissing.\n  blockValue: function(name) {\n    let blockHelperMissing = this.aliasable(\n        'container.hooks.blockHelperMissing'\n      ),\n      params = [this.contextName(0)];\n    this.setupHelperArgs(name, 0, params);\n\n    let blockName = this.popStack();\n    params.splice(1, 0, blockName);\n\n    this.push(this.source.functionCall(blockHelperMissing, 'call', params));\n  },\n\n  // [ambiguousBlockValue]\n  //\n  // On stack, before: hash, inverse, program, value\n  // Compiler value, before: lastHelper=value of last found helper, if any\n  // On stack, after, if no lastHelper: same as [blockValue]\n  // On stack, after, if lastHelper: value\n  ambiguousBlockValue: function() {\n    // We're being a bit cheeky and reusing the options value from the prior exec\n    let blockHelperMissing = this.aliasable(\n        'container.hooks.blockHelperMissing'\n      ),\n      params = [this.contextName(0)];\n    this.setupHelperArgs('', 0, params, true);\n\n    this.flushInline();\n\n    let current = this.topStack();\n    params.splice(1, 0, current);\n\n    this.pushSource([\n      'if (!',\n      this.lastHelper,\n      ') { ',\n      current,\n      ' = ',\n      this.source.functionCall(blockHelperMissing, 'call', params),\n      '}'\n    ]);\n  },\n\n  // [appendContent]\n  //\n  // On stack, before: ...\n  // On stack, after: ...\n  //\n  // Appends the string value of `content` to the current buffer\n  appendContent: function(content) {\n    if (this.pendingContent) {\n      content = this.pendingContent + content;\n    } else {\n      this.pendingLocation = this.source.currentLocation;\n    }\n\n    this.pendingContent = content;\n  },\n\n  // [append]\n  //\n  // On stack, before: value, ...\n  // On stack, after: ...\n  //\n  // Coerces `value` to a String and appends it to the current buffer.\n  //\n  // If `value` is truthy, or 0, it is coerced into a string and appended\n  // Otherwise, the empty string is appended\n  append: function() {\n    if (this.isInline()) {\n      this.replaceStack(current => [' != null ? ', current, ' : \"\"']);\n\n      this.pushSource(this.appendToBuffer(this.popStack()));\n    } else {\n      let local = this.popStack();\n      this.pushSource([\n        'if (',\n        local,\n        ' != null) { ',\n        this.appendToBuffer(local, undefined, true),\n        ' }'\n      ]);\n      if (this.environment.isSimple) {\n        this.pushSource([\n          'else { ',\n          this.appendToBuffer(\"''\", undefined, true),\n          ' }'\n        ]);\n      }\n    }\n  },\n\n  // [appendEscaped]\n  //\n  // On stack, before: value, ...\n  // On stack, after: ...\n  //\n  // Escape `value` and append it to the buffer\n  appendEscaped: function() {\n    this.pushSource(\n      this.appendToBuffer([\n        this.aliasable('container.escapeExpression'),\n        '(',\n        this.popStack(),\n        ')'\n      ])\n    );\n  },\n\n  // [getContext]\n  //\n  // On stack, before: ...\n  // On stack, after: ...\n  // Compiler value, after: lastContext=depth\n  //\n  // Set the value of the `lastContext` compiler value to the depth\n  getContext: function(depth) {\n    this.lastContext = depth;\n  },\n\n  // [pushContext]\n  //\n  // On stack, before: ...\n  // On stack, after: currentContext, ...\n  //\n  // Pushes the value of the current context onto the stack.\n  pushContext: function() {\n    this.pushStackLiteral(this.contextName(this.lastContext));\n  },\n\n  // [lookupOnContext]\n  //\n  // On stack, before: ...\n  // On stack, after: currentContext[name], ...\n  //\n  // Looks up the value of `name` on the current context and pushes\n  // it onto the stack.\n  lookupOnContext: function(parts, falsy, strict, scoped) {\n    let i = 0;\n\n    if (!scoped && this.options.compat && !this.lastContext) {\n      // The depthed query is expected to handle the undefined logic for the root level that\n      // is implemented below, so we evaluate that directly in compat mode\n      this.push(this.depthedLookup(parts[i++]));\n    } else {\n      this.pushContext();\n    }\n\n    this.resolvePath('context', parts, i, falsy, strict);\n  },\n\n  // [lookupBlockParam]\n  //\n  // On stack, before: ...\n  // On stack, after: blockParam[name], ...\n  //\n  // Looks up the value of `parts` on the given block param and pushes\n  // it onto the stack.\n  lookupBlockParam: function(blockParamId, parts) {\n    this.useBlockParams = true;\n\n    this.push(['blockParams[', blockParamId[0], '][', blockParamId[1], ']']);\n    this.resolvePath('context', parts, 1);\n  },\n\n  // [lookupData]\n  //\n  // On stack, before: ...\n  // On stack, after: data, ...\n  //\n  // Push the data lookup operator\n  lookupData: function(depth, parts, strict) {\n    if (!depth) {\n      this.pushStackLiteral('data');\n    } else {\n      this.pushStackLiteral('container.data(data, ' + depth + ')');\n    }\n\n    this.resolvePath('data', parts, 0, true, strict);\n  },\n\n  resolvePath: function(type, parts, i, falsy, strict) {\n    if (this.options.strict || this.options.assumeObjects) {\n      this.push(strictLookup(this.options.strict && strict, this, parts, type));\n      return;\n    }\n\n    let len = parts.length;\n    for (; i < len; i++) {\n      /* eslint-disable no-loop-func */\n      this.replaceStack(current => {\n        let lookup = this.nameLookup(current, parts[i], type);\n        // We want to ensure that zero and false are handled properly if the context (falsy flag)\n        // needs to have the special handling for these values.\n        if (!falsy) {\n          return [' != null ? ', lookup, ' : ', current];\n        } else {\n          // Otherwise we can use generic falsy handling\n          return [' && ', lookup];\n        }\n      });\n      /* eslint-enable no-loop-func */\n    }\n  },\n\n  // [resolvePossibleLambda]\n  //\n  // On stack, before: value, ...\n  // On stack, after: resolved value, ...\n  //\n  // If the `value` is a lambda, replace it on the stack by\n  // the return value of the lambda\n  resolvePossibleLambda: function() {\n    this.push([\n      this.aliasable('container.lambda'),\n      '(',\n      this.popStack(),\n      ', ',\n      this.contextName(0),\n      ')'\n    ]);\n  },\n\n  // [pushStringParam]\n  //\n  // On stack, before: ...\n  // On stack, after: string, currentContext, ...\n  //\n  // This opcode is designed for use in string mode, which\n  // provides the string value of a parameter along with its\n  // depth rather than resolving it immediately.\n  pushStringParam: function(string, type) {\n    this.pushContext();\n    this.pushString(type);\n\n    // If it's a subexpression, the string result\n    // will be pushed after this opcode.\n    if (type !== 'SubExpression') {\n      if (typeof string === 'string') {\n        this.pushString(string);\n      } else {\n        this.pushStackLiteral(string);\n      }\n    }\n  },\n\n  emptyHash: function(omitEmpty) {\n    if (this.trackIds) {\n      this.push('{}'); // hashIds\n    }\n    if (this.stringParams) {\n      this.push('{}'); // hashContexts\n      this.push('{}'); // hashTypes\n    }\n    this.pushStackLiteral(omitEmpty ? 'undefined' : '{}');\n  },\n  pushHash: function() {\n    if (this.hash) {\n      this.hashes.push(this.hash);\n    }\n    this.hash = { values: {}, types: [], contexts: [], ids: [] };\n  },\n  popHash: function() {\n    let hash = this.hash;\n    this.hash = this.hashes.pop();\n\n    if (this.trackIds) {\n      this.push(this.objectLiteral(hash.ids));\n    }\n    if (this.stringParams) {\n      this.push(this.objectLiteral(hash.contexts));\n      this.push(this.objectLiteral(hash.types));\n    }\n\n    this.push(this.objectLiteral(hash.values));\n  },\n\n  // [pushString]\n  //\n  // On stack, before: ...\n  // On stack, after: quotedString(string), ...\n  //\n  // Push a quoted version of `string` onto the stack\n  pushString: function(string) {\n    this.pushStackLiteral(this.quotedString(string));\n  },\n\n  // [pushLiteral]\n  //\n  // On stack, before: ...\n  // On stack, after: value, ...\n  //\n  // Pushes a value onto the stack. This operation prevents\n  // the compiler from creating a temporary variable to hold\n  // it.\n  pushLiteral: function(value) {\n    this.pushStackLiteral(value);\n  },\n\n  // [pushProgram]\n  //\n  // On stack, before: ...\n  // On stack, after: program(guid), ...\n  //\n  // Push a program expression onto the stack. This takes\n  // a compile-time guid and converts it into a runtime-accessible\n  // expression.\n  pushProgram: function(guid) {\n    if (guid != null) {\n      this.pushStackLiteral(this.programExpression(guid));\n    } else {\n      this.pushStackLiteral(null);\n    }\n  },\n\n  // [registerDecorator]\n  //\n  // On stack, before: hash, program, params..., ...\n  // On stack, after: ...\n  //\n  // Pops off the decorator's parameters, invokes the decorator,\n  // and inserts the decorator into the decorators list.\n  registerDecorator(paramSize, name) {\n    let foundDecorator = this.nameLookup('decorators', name, 'decorator'),\n      options = this.setupHelperArgs(name, paramSize);\n\n    this.decorators.push([\n      'fn = ',\n      this.decorators.functionCall(foundDecorator, '', [\n        'fn',\n        'props',\n        'container',\n        options\n      ]),\n      ' || fn;'\n    ]);\n  },\n\n  // [invokeHelper]\n  //\n  // On stack, before: hash, inverse, program, params..., ...\n  // On stack, after: result of helper invocation\n  //\n  // Pops off the helper's parameters, invokes the helper,\n  // and pushes the helper's return value onto the stack.\n  //\n  // If the helper is not found, `helperMissing` is called.\n  invokeHelper: function(paramSize, name, isSimple) {\n    let nonHelper = this.popStack(),\n      helper = this.setupHelper(paramSize, name);\n\n    let possibleFunctionCalls = [];\n\n    if (isSimple) {\n      // direct call to helper\n      possibleFunctionCalls.push(helper.name);\n    }\n    // call a function from the input object\n    possibleFunctionCalls.push(nonHelper);\n    if (!this.options.strict) {\n      possibleFunctionCalls.push(\n        this.aliasable('container.hooks.helperMissing')\n      );\n    }\n\n    let functionLookupCode = [\n      '(',\n      this.itemsSeparatedBy(possibleFunctionCalls, '||'),\n      ')'\n    ];\n    let functionCall = this.source.functionCall(\n      functionLookupCode,\n      'call',\n      helper.callParams\n    );\n    this.push(functionCall);\n  },\n\n  itemsSeparatedBy: function(items, separator) {\n    let result = [];\n    result.push(items[0]);\n    for (let i = 1; i < items.length; i++) {\n      result.push(separator, items[i]);\n    }\n    return result;\n  },\n  // [invokeKnownHelper]\n  //\n  // On stack, before: hash, inverse, program, params..., ...\n  // On stack, after: result of helper invocation\n  //\n  // This operation is used when the helper is known to exist,\n  // so a `helperMissing` fallback is not required.\n  invokeKnownHelper: function(paramSize, name) {\n    let helper = this.setupHelper(paramSize, name);\n    this.push(this.source.functionCall(helper.name, 'call', helper.callParams));\n  },\n\n  // [invokeAmbiguous]\n  //\n  // On stack, before: hash, inverse, program, params..., ...\n  // On stack, after: result of disambiguation\n  //\n  // This operation is used when an expression like `{{foo}}`\n  // is provided, but we don't know at compile-time whether it\n  // is a helper or a path.\n  //\n  // This operation emits more code than the other options,\n  // and can be avoided by passing the `knownHelpers` and\n  // `knownHelpersOnly` flags at compile-time.\n  invokeAmbiguous: function(name, helperCall) {\n    this.useRegister('helper');\n\n    let nonHelper = this.popStack();\n\n    this.emptyHash();\n    let helper = this.setupHelper(0, name, helperCall);\n\n    let helperName = (this.lastHelper = this.nameLookup(\n      'helpers',\n      name,\n      'helper'\n    ));\n\n    let lookup = ['(', '(helper = ', helperName, ' || ', nonHelper, ')'];\n    if (!this.options.strict) {\n      lookup[0] = '(helper = ';\n      lookup.push(\n        ' != null ? helper : ',\n        this.aliasable('container.hooks.helperMissing')\n      );\n    }\n\n    this.push([\n      '(',\n      lookup,\n      helper.paramsInit ? ['),(', helper.paramsInit] : [],\n      '),',\n      '(typeof helper === ',\n      this.aliasable('\"function\"'),\n      ' ? ',\n      this.source.functionCall('helper', 'call', helper.callParams),\n      ' : helper))'\n    ]);\n  },\n\n  // [invokePartial]\n  //\n  // On stack, before: context, ...\n  // On stack after: result of partial invocation\n  //\n  // This operation pops off a context, invokes a partial with that context,\n  // and pushes the result of the invocation back.\n  invokePartial: function(isDynamic, name, indent) {\n    let params = [],\n      options = this.setupParams(name, 1, params);\n\n    if (isDynamic) {\n      name = this.popStack();\n      delete options.name;\n    }\n\n    if (indent) {\n      options.indent = JSON.stringify(indent);\n    }\n    options.helpers = 'helpers';\n    options.partials = 'partials';\n    options.decorators = 'container.decorators';\n\n    if (!isDynamic) {\n      params.unshift(this.nameLookup('partials', name, 'partial'));\n    } else {\n      params.unshift(name);\n    }\n\n    if (this.options.compat) {\n      options.depths = 'depths';\n    }\n    options = this.objectLiteral(options);\n    params.push(options);\n\n    this.push(this.source.functionCall('container.invokePartial', '', params));\n  },\n\n  // [assignToHash]\n  //\n  // On stack, before: value, ..., hash, ...\n  // On stack, after: ..., hash, ...\n  //\n  // Pops a value off the stack and assigns it to the current hash\n  assignToHash: function(key) {\n    let value = this.popStack(),\n      context,\n      type,\n      id;\n\n    if (this.trackIds) {\n      id = this.popStack();\n    }\n    if (this.stringParams) {\n      type = this.popStack();\n      context = this.popStack();\n    }\n\n    let hash = this.hash;\n    if (context) {\n      hash.contexts[key] = context;\n    }\n    if (type) {\n      hash.types[key] = type;\n    }\n    if (id) {\n      hash.ids[key] = id;\n    }\n    hash.values[key] = value;\n  },\n\n  pushId: function(type, name, child) {\n    if (type === 'BlockParam') {\n      this.pushStackLiteral(\n        'blockParams[' +\n          name[0] +\n          '].path[' +\n          name[1] +\n          ']' +\n          (child ? ' + ' + JSON.stringify('.' + child) : '')\n      );\n    } else if (type === 'PathExpression') {\n      this.pushString(name);\n    } else if (type === 'SubExpression') {\n      this.pushStackLiteral('true');\n    } else {\n      this.pushStackLiteral('null');\n    }\n  },\n\n  // HELPERS\n\n  compiler: JavaScriptCompiler,\n\n  compileChildren: function(environment, options) {\n    let children = environment.children,\n      child,\n      compiler;\n\n    for (let i = 0, l = children.length; i < l; i++) {\n      child = children[i];\n      compiler = new this.compiler(); // eslint-disable-line new-cap\n\n      let existing = this.matchExistingProgram(child);\n\n      if (existing == null) {\n        this.context.programs.push(''); // Placeholder to prevent name conflicts for nested children\n        let index = this.context.programs.length;\n        child.index = index;\n        child.name = 'program' + index;\n        this.context.programs[index] = compiler.compile(\n          child,\n          options,\n          this.context,\n          !this.precompile\n        );\n        this.context.decorators[index] = compiler.decorators;\n        this.context.environments[index] = child;\n\n        this.useDepths = this.useDepths || compiler.useDepths;\n        this.useBlockParams = this.useBlockParams || compiler.useBlockParams;\n        child.useDepths = this.useDepths;\n        child.useBlockParams = this.useBlockParams;\n      } else {\n        child.index = existing.index;\n        child.name = 'program' + existing.index;\n\n        this.useDepths = this.useDepths || existing.useDepths;\n        this.useBlockParams = this.useBlockParams || existing.useBlockParams;\n      }\n    }\n  },\n  matchExistingProgram: function(child) {\n    for (let i = 0, len = this.context.environments.length; i < len; i++) {\n      let environment = this.context.environments[i];\n      if (environment && environment.equals(child)) {\n        return environment;\n      }\n    }\n  },\n\n  programExpression: function(guid) {\n    let child = this.environment.children[guid],\n      programParams = [child.index, 'data', child.blockParams];\n\n    if (this.useBlockParams || this.useDepths) {\n      programParams.push('blockParams');\n    }\n    if (this.useDepths) {\n      programParams.push('depths');\n    }\n\n    return 'container.program(' + programParams.join(', ') + ')';\n  },\n\n  useRegister: function(name) {\n    if (!this.registers[name]) {\n      this.registers[name] = true;\n      this.registers.list.push(name);\n    }\n  },\n\n  push: function(expr) {\n    if (!(expr instanceof Literal)) {\n      expr = this.source.wrap(expr);\n    }\n\n    this.inlineStack.push(expr);\n    return expr;\n  },\n\n  pushStackLiteral: function(item) {\n    this.push(new Literal(item));\n  },\n\n  pushSource: function(source) {\n    if (this.pendingContent) {\n      this.source.push(\n        this.appendToBuffer(\n          this.source.quotedString(this.pendingContent),\n          this.pendingLocation\n        )\n      );\n      this.pendingContent = undefined;\n    }\n\n    if (source) {\n      this.source.push(source);\n    }\n  },\n\n  replaceStack: function(callback) {\n    let prefix = ['('],\n      stack,\n      createdStack,\n      usedLiteral;\n\n    /* istanbul ignore next */\n    if (!this.isInline()) {\n      throw new _exception__WEBPACK_IMPORTED_MODULE_1__[\"default\"]('replaceStack on non-inline');\n    }\n\n    // We want to merge the inline statement into the replacement statement via ','\n    let top = this.popStack(true);\n\n    if (top instanceof Literal) {\n      // Literals do not need to be inlined\n      stack = [top.value];\n      prefix = ['(', stack];\n      usedLiteral = true;\n    } else {\n      // Get or create the current stack name for use by the inline\n      createdStack = true;\n      let name = this.incrStack();\n\n      prefix = ['((', this.push(name), ' = ', top, ')'];\n      stack = this.topStack();\n    }\n\n    let item = callback.call(this, stack);\n\n    if (!usedLiteral) {\n      this.popStack();\n    }\n    if (createdStack) {\n      this.stackSlot--;\n    }\n    this.push(prefix.concat(item, ')'));\n  },\n\n  incrStack: function() {\n    this.stackSlot++;\n    if (this.stackSlot > this.stackVars.length) {\n      this.stackVars.push('stack' + this.stackSlot);\n    }\n    return this.topStackName();\n  },\n  topStackName: function() {\n    return 'stack' + this.stackSlot;\n  },\n  flushInline: function() {\n    let inlineStack = this.inlineStack;\n    this.inlineStack = [];\n    for (let i = 0, len = inlineStack.length; i < len; i++) {\n      let entry = inlineStack[i];\n      /* istanbul ignore if */\n      if (entry instanceof Literal) {\n        this.compileStack.push(entry);\n      } else {\n        let stack = this.incrStack();\n        this.pushSource([stack, ' = ', entry, ';']);\n        this.compileStack.push(stack);\n      }\n    }\n  },\n  isInline: function() {\n    return this.inlineStack.length;\n  },\n\n  popStack: function(wrapped) {\n    let inline = this.isInline(),\n      item = (inline ? this.inlineStack : this.compileStack).pop();\n\n    if (!wrapped && item instanceof Literal) {\n      return item.value;\n    } else {\n      if (!inline) {\n        /* istanbul ignore next */\n        if (!this.stackSlot) {\n          throw new _exception__WEBPACK_IMPORTED_MODULE_1__[\"default\"]('Invalid stack pop');\n        }\n        this.stackSlot--;\n      }\n      return item;\n    }\n  },\n\n  topStack: function() {\n    let stack = this.isInline() ? this.inlineStack : this.compileStack,\n      item = stack[stack.length - 1];\n\n    /* istanbul ignore if */\n    if (item instanceof Literal) {\n      return item.value;\n    } else {\n      return item;\n    }\n  },\n\n  contextName: function(context) {\n    if (this.useDepths && context) {\n      return 'depths[' + context + ']';\n    } else {\n      return 'depth' + context;\n    }\n  },\n\n  quotedString: function(str) {\n    return this.source.quotedString(str);\n  },\n\n  objectLiteral: function(obj) {\n    return this.source.objectLiteral(obj);\n  },\n\n  aliasable: function(name) {\n    let ret = this.aliases[name];\n    if (ret) {\n      ret.referenceCount++;\n      return ret;\n    }\n\n    ret = this.aliases[name] = this.source.wrap(name);\n    ret.aliasable = true;\n    ret.referenceCount = 1;\n\n    return ret;\n  },\n\n  setupHelper: function(paramSize, name, blockHelper) {\n    let params = [],\n      paramsInit = this.setupHelperArgs(name, paramSize, params, blockHelper);\n    let foundHelper = this.nameLookup('helpers', name, 'helper'),\n      callContext = this.aliasable(\n        `${this.contextName(0)} != null ? ${this.contextName(\n          0\n        )} : (container.nullContext || {})`\n      );\n\n    return {\n      params: params,\n      paramsInit: paramsInit,\n      name: foundHelper,\n      callParams: [callContext].concat(params)\n    };\n  },\n\n  setupParams: function(helper, paramSize, params) {\n    let options = {},\n      contexts = [],\n      types = [],\n      ids = [],\n      objectArgs = !params,\n      param;\n\n    if (objectArgs) {\n      params = [];\n    }\n\n    options.name = this.quotedString(helper);\n    options.hash = this.popStack();\n\n    if (this.trackIds) {\n      options.hashIds = this.popStack();\n    }\n    if (this.stringParams) {\n      options.hashTypes = this.popStack();\n      options.hashContexts = this.popStack();\n    }\n\n    let inverse = this.popStack(),\n      program = this.popStack();\n\n    // Avoid setting fn and inverse if neither are set. This allows\n    // helpers to do a check for `if (options.fn)`\n    if (program || inverse) {\n      options.fn = program || 'container.noop';\n      options.inverse = inverse || 'container.noop';\n    }\n\n    // The parameters go on to the stack in order (making sure that they are evaluated in order)\n    // so we need to pop them off the stack in reverse order\n    let i = paramSize;\n    while (i--) {\n      param = this.popStack();\n      params[i] = param;\n\n      if (this.trackIds) {\n        ids[i] = this.popStack();\n      }\n      if (this.stringParams) {\n        types[i] = this.popStack();\n        contexts[i] = this.popStack();\n      }\n    }\n\n    if (objectArgs) {\n      options.args = this.source.generateArray(params);\n    }\n\n    if (this.trackIds) {\n      options.ids = this.source.generateArray(ids);\n    }\n    if (this.stringParams) {\n      options.types = this.source.generateArray(types);\n      options.contexts = this.source.generateArray(contexts);\n    }\n\n    if (this.options.data) {\n      options.data = 'data';\n    }\n    if (this.useBlockParams) {\n      options.blockParams = 'blockParams';\n    }\n    return options;\n  },\n\n  setupHelperArgs: function(helper, paramSize, params, useRegister) {\n    let options = this.setupParams(helper, paramSize, params);\n    options.loc = JSON.stringify(this.source.currentLocation);\n    options = this.objectLiteral(options);\n    if (useRegister) {\n      this.useRegister('options');\n      params.push('options');\n      return ['options=', options];\n    } else if (params) {\n      params.push(options);\n      return '';\n    } else {\n      return options;\n    }\n  }\n};\n\n(function() {\n  const reservedWords = (\n    'break else new var' +\n    ' case finally return void' +\n    ' catch for switch while' +\n    ' continue function this with' +\n    ' default if throw' +\n    ' delete in try' +\n    ' do instanceof typeof' +\n    ' abstract enum int short' +\n    ' boolean export interface static' +\n    ' byte extends long super' +\n    ' char final native synchronized' +\n    ' class float package throws' +\n    ' const goto private transient' +\n    ' debugger implements protected volatile' +\n    ' double import public let yield await' +\n    ' null true false'\n  ).split(' ');\n\n  const compilerWords = (JavaScriptCompiler.RESERVED_WORDS = {});\n\n  for (let i = 0, l = reservedWords.length; i < l; i++) {\n    compilerWords[reservedWords[i]] = true;\n  }\n})();\n\n/**\n * @deprecated May be removed in the next major version\n */\nJavaScriptCompiler.isValidJavaScriptVariableName = function(name) {\n  return (\n    !JavaScriptCompiler.RESERVED_WORDS[name] &&\n    /^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(name)\n  );\n};\n\nfunction strictLookup(requireTerminal, compiler, parts, type) {\n  let stack = compiler.popStack(),\n    i = 0,\n    len = parts.length;\n  if (requireTerminal) {\n    len--;\n  }\n\n  for (; i < len; i++) {\n    stack = compiler.nameLookup(stack, parts[i], type);\n  }\n\n  if (requireTerminal) {\n    return [\n      compiler.aliasable('container.strict'),\n      '(',\n      stack,\n      ', ',\n      compiler.quotedString(parts[i]),\n      ', ',\n      JSON.stringify(compiler.source.currentLocation),\n      ' )'\n    ];\n  } else {\n    return stack;\n  }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (JavaScriptCompiler);\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/compiler/javascript-compiler.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/compiler/parser.js":
/*!*******************************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/compiler/parser.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// File ignored in coverage tests via setting in .istanbul.yml\n/* Jison generated parser */\nvar handlebars = (function(){\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"root\":3,\"program\":4,\"EOF\":5,\"program_repetition0\":6,\"statement\":7,\"mustache\":8,\"block\":9,\"rawBlock\":10,\"partial\":11,\"partialBlock\":12,\"content\":13,\"COMMENT\":14,\"CONTENT\":15,\"openRawBlock\":16,\"rawBlock_repetition0\":17,\"END_RAW_BLOCK\":18,\"OPEN_RAW_BLOCK\":19,\"helperName\":20,\"openRawBlock_repetition0\":21,\"openRawBlock_option0\":22,\"CLOSE_RAW_BLOCK\":23,\"openBlock\":24,\"block_option0\":25,\"closeBlock\":26,\"openInverse\":27,\"block_option1\":28,\"OPEN_BLOCK\":29,\"openBlock_repetition0\":30,\"openBlock_option0\":31,\"openBlock_option1\":32,\"CLOSE\":33,\"OPEN_INVERSE\":34,\"openInverse_repetition0\":35,\"openInverse_option0\":36,\"openInverse_option1\":37,\"openInverseChain\":38,\"OPEN_INVERSE_CHAIN\":39,\"openInverseChain_repetition0\":40,\"openInverseChain_option0\":41,\"openInverseChain_option1\":42,\"inverseAndProgram\":43,\"INVERSE\":44,\"inverseChain\":45,\"inverseChain_option0\":46,\"OPEN_ENDBLOCK\":47,\"OPEN\":48,\"mustache_repetition0\":49,\"mustache_option0\":50,\"OPEN_UNESCAPED\":51,\"mustache_repetition1\":52,\"mustache_option1\":53,\"CLOSE_UNESCAPED\":54,\"OPEN_PARTIAL\":55,\"partialName\":56,\"partial_repetition0\":57,\"partial_option0\":58,\"openPartialBlock\":59,\"OPEN_PARTIAL_BLOCK\":60,\"openPartialBlock_repetition0\":61,\"openPartialBlock_option0\":62,\"param\":63,\"sexpr\":64,\"OPEN_SEXPR\":65,\"sexpr_repetition0\":66,\"sexpr_option0\":67,\"CLOSE_SEXPR\":68,\"hash\":69,\"hash_repetition_plus0\":70,\"hashSegment\":71,\"ID\":72,\"EQUALS\":73,\"blockParams\":74,\"OPEN_BLOCK_PARAMS\":75,\"blockParams_repetition_plus0\":76,\"CLOSE_BLOCK_PARAMS\":77,\"path\":78,\"dataName\":79,\"STRING\":80,\"NUMBER\":81,\"BOOLEAN\":82,\"UNDEFINED\":83,\"NULL\":84,\"DATA\":85,\"pathSegments\":86,\"SEP\":87,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",5:\"EOF\",14:\"COMMENT\",15:\"CONTENT\",18:\"END_RAW_BLOCK\",19:\"OPEN_RAW_BLOCK\",23:\"CLOSE_RAW_BLOCK\",29:\"OPEN_BLOCK\",33:\"CLOSE\",34:\"OPEN_INVERSE\",39:\"OPEN_INVERSE_CHAIN\",44:\"INVERSE\",47:\"OPEN_ENDBLOCK\",48:\"OPEN\",51:\"OPEN_UNESCAPED\",54:\"CLOSE_UNESCAPED\",55:\"OPEN_PARTIAL\",60:\"OPEN_PARTIAL_BLOCK\",65:\"OPEN_SEXPR\",68:\"CLOSE_SEXPR\",72:\"ID\",73:\"EQUALS\",75:\"OPEN_BLOCK_PARAMS\",77:\"CLOSE_BLOCK_PARAMS\",80:\"STRING\",81:\"NUMBER\",82:\"BOOLEAN\",83:\"UNDEFINED\",84:\"NULL\",85:\"DATA\",87:\"SEP\"},\nproductions_: [0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],\nperformAction: function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$\n) {\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 1: return $$[$0-1]; \nbreak;\ncase 2:this.$ = yy.prepareProgram($$[$0]);\nbreak;\ncase 3:this.$ = $$[$0];\nbreak;\ncase 4:this.$ = $$[$0];\nbreak;\ncase 5:this.$ = $$[$0];\nbreak;\ncase 6:this.$ = $$[$0];\nbreak;\ncase 7:this.$ = $$[$0];\nbreak;\ncase 8:this.$ = $$[$0];\nbreak;\ncase 9:\n    this.$ = {\n      type: 'CommentStatement',\n      value: yy.stripComment($$[$0]),\n      strip: yy.stripFlags($$[$0], $$[$0]),\n      loc: yy.locInfo(this._$)\n    };\n  \nbreak;\ncase 10:\n    this.$ = {\n      type: 'ContentStatement',\n      original: $$[$0],\n      value: $$[$0],\n      loc: yy.locInfo(this._$)\n    };\n  \nbreak;\ncase 11:this.$ = yy.prepareRawBlock($$[$0-2], $$[$0-1], $$[$0], this._$);\nbreak;\ncase 12:this.$ = { path: $$[$0-3], params: $$[$0-2], hash: $$[$0-1] };\nbreak;\ncase 13:this.$ = yy.prepareBlock($$[$0-3], $$[$0-2], $$[$0-1], $$[$0], false, this._$);\nbreak;\ncase 14:this.$ = yy.prepareBlock($$[$0-3], $$[$0-2], $$[$0-1], $$[$0], true, this._$);\nbreak;\ncase 15:this.$ = { open: $$[$0-5], path: $$[$0-4], params: $$[$0-3], hash: $$[$0-2], blockParams: $$[$0-1], strip: yy.stripFlags($$[$0-5], $$[$0]) };\nbreak;\ncase 16:this.$ = { path: $$[$0-4], params: $$[$0-3], hash: $$[$0-2], blockParams: $$[$0-1], strip: yy.stripFlags($$[$0-5], $$[$0]) };\nbreak;\ncase 17:this.$ = { path: $$[$0-4], params: $$[$0-3], hash: $$[$0-2], blockParams: $$[$0-1], strip: yy.stripFlags($$[$0-5], $$[$0]) };\nbreak;\ncase 18:this.$ = { strip: yy.stripFlags($$[$0-1], $$[$0-1]), program: $$[$0] };\nbreak;\ncase 19:\n    var inverse = yy.prepareBlock($$[$0-2], $$[$0-1], $$[$0], $$[$0], false, this._$),\n        program = yy.prepareProgram([inverse], $$[$0-1].loc);\n    program.chained = true;\n\n    this.$ = { strip: $$[$0-2].strip, program: program, chain: true };\n  \nbreak;\ncase 20:this.$ = $$[$0];\nbreak;\ncase 21:this.$ = {path: $$[$0-1], strip: yy.stripFlags($$[$0-2], $$[$0])};\nbreak;\ncase 22:this.$ = yy.prepareMustache($$[$0-3], $$[$0-2], $$[$0-1], $$[$0-4], yy.stripFlags($$[$0-4], $$[$0]), this._$);\nbreak;\ncase 23:this.$ = yy.prepareMustache($$[$0-3], $$[$0-2], $$[$0-1], $$[$0-4], yy.stripFlags($$[$0-4], $$[$0]), this._$);\nbreak;\ncase 24:\n    this.$ = {\n      type: 'PartialStatement',\n      name: $$[$0-3],\n      params: $$[$0-2],\n      hash: $$[$0-1],\n      indent: '',\n      strip: yy.stripFlags($$[$0-4], $$[$0]),\n      loc: yy.locInfo(this._$)\n    };\n  \nbreak;\ncase 25:this.$ = yy.preparePartialBlock($$[$0-2], $$[$0-1], $$[$0], this._$);\nbreak;\ncase 26:this.$ = { path: $$[$0-3], params: $$[$0-2], hash: $$[$0-1], strip: yy.stripFlags($$[$0-4], $$[$0]) };\nbreak;\ncase 27:this.$ = $$[$0];\nbreak;\ncase 28:this.$ = $$[$0];\nbreak;\ncase 29:\n    this.$ = {\n      type: 'SubExpression',\n      path: $$[$0-3],\n      params: $$[$0-2],\n      hash: $$[$0-1],\n      loc: yy.locInfo(this._$)\n    };\n  \nbreak;\ncase 30:this.$ = {type: 'Hash', pairs: $$[$0], loc: yy.locInfo(this._$)};\nbreak;\ncase 31:this.$ = {type: 'HashPair', key: yy.id($$[$0-2]), value: $$[$0], loc: yy.locInfo(this._$)};\nbreak;\ncase 32:this.$ = yy.id($$[$0-1]);\nbreak;\ncase 33:this.$ = $$[$0];\nbreak;\ncase 34:this.$ = $$[$0];\nbreak;\ncase 35:this.$ = {type: 'StringLiteral', value: $$[$0], original: $$[$0], loc: yy.locInfo(this._$)};\nbreak;\ncase 36:this.$ = {type: 'NumberLiteral', value: Number($$[$0]), original: Number($$[$0]), loc: yy.locInfo(this._$)};\nbreak;\ncase 37:this.$ = {type: 'BooleanLiteral', value: $$[$0] === 'true', original: $$[$0] === 'true', loc: yy.locInfo(this._$)};\nbreak;\ncase 38:this.$ = {type: 'UndefinedLiteral', original: undefined, value: undefined, loc: yy.locInfo(this._$)};\nbreak;\ncase 39:this.$ = {type: 'NullLiteral', original: null, value: null, loc: yy.locInfo(this._$)};\nbreak;\ncase 40:this.$ = $$[$0];\nbreak;\ncase 41:this.$ = $$[$0];\nbreak;\ncase 42:this.$ = yy.preparePath(true, $$[$0], this._$);\nbreak;\ncase 43:this.$ = yy.preparePath(false, $$[$0], this._$);\nbreak;\ncase 44: $$[$0-2].push({part: yy.id($$[$0]), original: $$[$0], separator: $$[$0-1]}); this.$ = $$[$0-2]; \nbreak;\ncase 45:this.$ = [{part: yy.id($$[$0]), original: $$[$0]}];\nbreak;\ncase 46:this.$ = [];\nbreak;\ncase 47:$$[$0-1].push($$[$0]);\nbreak;\ncase 48:this.$ = [];\nbreak;\ncase 49:$$[$0-1].push($$[$0]);\nbreak;\ncase 50:this.$ = [];\nbreak;\ncase 51:$$[$0-1].push($$[$0]);\nbreak;\ncase 58:this.$ = [];\nbreak;\ncase 59:$$[$0-1].push($$[$0]);\nbreak;\ncase 64:this.$ = [];\nbreak;\ncase 65:$$[$0-1].push($$[$0]);\nbreak;\ncase 70:this.$ = [];\nbreak;\ncase 71:$$[$0-1].push($$[$0]);\nbreak;\ncase 78:this.$ = [];\nbreak;\ncase 79:$$[$0-1].push($$[$0]);\nbreak;\ncase 82:this.$ = [];\nbreak;\ncase 83:$$[$0-1].push($$[$0]);\nbreak;\ncase 86:this.$ = [];\nbreak;\ncase 87:$$[$0-1].push($$[$0]);\nbreak;\ncase 90:this.$ = [];\nbreak;\ncase 91:$$[$0-1].push($$[$0]);\nbreak;\ncase 94:this.$ = [];\nbreak;\ncase 95:$$[$0-1].push($$[$0]);\nbreak;\ncase 98:this.$ = [$$[$0]];\nbreak;\ncase 99:$$[$0-1].push($$[$0]);\nbreak;\ncase 100:this.$ = [$$[$0]];\nbreak;\ncase 101:$$[$0-1].push($$[$0]);\nbreak;\n}\n},\ntable: [{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],\ndefaultActions: {4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},\nparseError: function parseError (str, hash) {\n    throw new Error(str);\n},\nparse: function parse(input) {\n    var self = this, stack = [0], vstack = [null], lstack = [], table = this.table, yytext = \"\", yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    this.lexer.setInput(input);\n    this.lexer.yy = this.yy;\n    this.yy.lexer = this.lexer;\n    this.yy.parser = this;\n    if (typeof this.lexer.yylloc == \"undefined\")\n        this.lexer.yylloc = {};\n    var yyloc = this.lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = this.lexer.options && this.lexer.options.ranges;\n    if (typeof this.yy.parseError === \"function\")\n        this.parseError = this.yy.parseError;\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n    function lex() {\n        var token;\n        token = self.lexer.lex() || 1;\n        if (typeof token !== \"number\") {\n            token = self.symbols_[token] || token;\n        }\n        return token;\n    }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == \"undefined\") {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === \"undefined\" || !action.length || !action[0]) {\n            var errStr = \"\";\n            if (!recovering) {\n                expected = [];\n                for (p in table[state])\n                    if (this.terminals_[p] && p > 2) {\n                        expected.push(\"'\" + this.terminals_[p] + \"'\");\n                    }\n                if (this.lexer.showPosition) {\n                    errStr = \"Parse error on line \" + (yylineno + 1) + \":\\n\" + this.lexer.showPosition() + \"\\nExpecting \" + expected.join(\", \") + \", got '\" + (this.terminals_[symbol] || symbol) + \"'\";\n                } else {\n                    errStr = \"Parse error on line \" + (yylineno + 1) + \": Unexpected \" + (symbol == 1?\"end of input\":\"'\" + (this.terminals_[symbol] || symbol) + \"'\");\n                }\n                this.parseError(errStr, {text: this.lexer.match, token: this.terminals_[symbol] || symbol, line: this.lexer.yylineno, loc: yyloc, expected: expected});\n            }\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error(\"Parse Error: multiple actions possible at state: \" + state + \", token: \" + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(this.lexer.yytext);\n            lstack.push(this.lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = this.lexer.yyleng;\n                yytext = this.lexer.yytext;\n                yylineno = this.lexer.yylineno;\n                yyloc = this.lexer.yylloc;\n                if (recovering > 0)\n                    recovering--;\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {first_line: lstack[lstack.length - (len || 1)].first_line, last_line: lstack[lstack.length - 1].last_line, first_column: lstack[lstack.length - (len || 1)].first_column, last_column: lstack[lstack.length - 1].last_column};\n            if (ranges) {\n                yyval._$.range = [lstack[lstack.length - (len || 1)].range[0], lstack[lstack.length - 1].range[1]];\n            }\n            r = this.performAction.call(yyval, yytext, yyleng, yylineno, this.yy, action[1], vstack, lstack);\n            if (typeof r !== \"undefined\") {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}\n};\n/* Jison generated lexer */\nvar lexer = (function(){\nvar lexer = ({EOF:1,\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\nsetInput:function (input) {\n        this._input = input;\n        this._more = this._less = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {first_line:1,first_column:0,last_line:1,last_column:0};\n        if (this.options.ranges) this.yylloc.range = [0,0];\n        this.offset = 0;\n        return this;\n    },\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) this.yylloc.range[1]++;\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length-len-1);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length-1);\n        this.matched = this.matched.substr(0, this.matched.length-1);\n\n        if (lines.length-1) this.yylineno -= lines.length-1;\n        var r = this.yylloc.range;\n\n        this.yylloc = {first_line: this.yylloc.first_line,\n          last_line: this.yylineno+1,\n          first_column: this.yylloc.first_column,\n          last_column: lines ?\n              (lines.length === oldLines.length ? this.yylloc.first_column : 0) + oldLines[oldLines.length - lines.length].length - lines[0].length:\n              this.yylloc.first_column - len\n          };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        return this;\n    },\nmore:function () {\n        this._more = true;\n        return this;\n    },\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20)+(next.length > 20 ? '...':'')).replace(/\\n/g, \"\");\n    },\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c+\"^\";\n    },\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) this.done = true;\n\n        var token,\n            match,\n            tempMatch,\n            index,\n            col,\n            lines;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i=0;i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (!this.options.flex) break;\n            }\n        }\n        if (match) {\n            lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n            if (lines) this.yylineno += lines.length;\n            this.yylloc = {first_line: this.yylloc.last_line,\n                           last_line: this.yylineno+1,\n                           first_column: this.yylloc.last_column,\n                           last_column: lines ? lines[lines.length-1].length-lines[lines.length-1].match(/\\r?\\n?/)[0].length : this.yylloc.last_column + match[0].length};\n            this.yytext += match[0];\n            this.match += match[0];\n            this.matches = match;\n            this.yyleng = this.yytext.length;\n            if (this.options.ranges) {\n                this.yylloc.range = [this.offset, this.offset += this.yyleng];\n            }\n            this._more = false;\n            this._input = this._input.slice(match[0].length);\n            this.matched += match[0];\n            token = this.performAction.call(this, this.yy, this, rules[index],this.conditionStack[this.conditionStack.length-1]);\n            if (this.done && this._input) this.done = false;\n            if (token) return token;\n            else return;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line '+(this.yylineno+1)+'. Unrecognized text.\\n'+this.showPosition(),\n                    {text: \"\", token: null, line: this.yylineno});\n        }\n    },\nlex:function lex () {\n        var r = this.next();\n        if (typeof r !== 'undefined') {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\npopState:function popState () {\n        return this.conditionStack.pop();\n    },\n_currentRules:function _currentRules () {\n        return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules;\n    },\ntopState:function () {\n        return this.conditionStack[this.conditionStack.length-2];\n    },\npushState:function begin (condition) {\n        this.begin(condition);\n    }});\nlexer.options = {};\nlexer.performAction = function anonymous(yy,yy_,$avoiding_name_collisions,YY_START\n) {\n\n\nfunction strip(start, end) {\n  return yy_.yytext = yy_.yytext.substring(start, yy_.yyleng - end + start);\n}\n\n\nvar YYSTATE=YY_START\nswitch($avoiding_name_collisions) {\ncase 0:\n                                   if(yy_.yytext.slice(-2) === \"\\\\\\\\\") {\n                                     strip(0,1);\n                                     this.begin(\"mu\");\n                                   } else if(yy_.yytext.slice(-1) === \"\\\\\") {\n                                     strip(0,1);\n                                     this.begin(\"emu\");\n                                   } else {\n                                     this.begin(\"mu\");\n                                   }\n                                   if(yy_.yytext) return 15;\n                                 \nbreak;\ncase 1:return 15;\nbreak;\ncase 2:\n                                   this.popState();\n                                   return 15;\n                                 \nbreak;\ncase 3:this.begin('raw'); return 15;\nbreak;\ncase 4:\n                                  this.popState();\n                                  // Should be using `this.topState()` below, but it currently\n                                  // returns the second top instead of the first top. Opened an\n                                  // issue about it at https://github.com/zaach/jison/issues/291\n                                  if (this.conditionStack[this.conditionStack.length-1] === 'raw') {\n                                    return 15;\n                                  } else {\n                                    strip(5, 9);\n                                    return 'END_RAW_BLOCK';\n                                  }\n                                 \nbreak;\ncase 5: return 15; \nbreak;\ncase 6:\n  this.popState();\n  return 14;\n\nbreak;\ncase 7:return 65;\nbreak;\ncase 8:return 68;\nbreak;\ncase 9: return 19; \nbreak;\ncase 10:\n                                  this.popState();\n                                  this.begin('raw');\n                                  return 23;\n                                 \nbreak;\ncase 11:return 55;\nbreak;\ncase 12:return 60;\nbreak;\ncase 13:return 29;\nbreak;\ncase 14:return 47;\nbreak;\ncase 15:this.popState(); return 44;\nbreak;\ncase 16:this.popState(); return 44;\nbreak;\ncase 17:return 34;\nbreak;\ncase 18:return 39;\nbreak;\ncase 19:return 51;\nbreak;\ncase 20:return 48;\nbreak;\ncase 21:\n  this.unput(yy_.yytext);\n  this.popState();\n  this.begin('com');\n\nbreak;\ncase 22:\n  this.popState();\n  return 14;\n\nbreak;\ncase 23:return 48;\nbreak;\ncase 24:return 73;\nbreak;\ncase 25:return 72;\nbreak;\ncase 26:return 72;\nbreak;\ncase 27:return 87;\nbreak;\ncase 28:// ignore whitespace\nbreak;\ncase 29:this.popState(); return 54;\nbreak;\ncase 30:this.popState(); return 33;\nbreak;\ncase 31:yy_.yytext = strip(1,2).replace(/\\\\\"/g,'\"'); return 80;\nbreak;\ncase 32:yy_.yytext = strip(1,2).replace(/\\\\'/g,\"'\"); return 80;\nbreak;\ncase 33:return 85;\nbreak;\ncase 34:return 82;\nbreak;\ncase 35:return 82;\nbreak;\ncase 36:return 83;\nbreak;\ncase 37:return 84;\nbreak;\ncase 38:return 81;\nbreak;\ncase 39:return 75;\nbreak;\ncase 40:return 77;\nbreak;\ncase 41:return 72;\nbreak;\ncase 42:yy_.yytext = yy_.yytext.replace(/\\\\([\\\\\\]])/g,'$1'); return 72;\nbreak;\ncase 43:return 'INVALID';\nbreak;\ncase 44:return 5;\nbreak;\n}\n};\nlexer.rules = [/^(?:[^\\x00]*?(?=(\\{\\{)))/,/^(?:[^\\x00]+)/,/^(?:[^\\x00]{2,}?(?=(\\{\\{|\\\\\\{\\{|\\\\\\\\\\{\\{|$)))/,/^(?:\\{\\{\\{\\{(?=[^\\/]))/,/^(?:\\{\\{\\{\\{\\/[^\\s!\"#%-,\\.\\/;->@\\[-\\^`\\{-~]+(?=[=}\\s\\/.])\\}\\}\\}\\})/,/^(?:[^\\x00]+?(?=(\\{\\{\\{\\{)))/,/^(?:[\\s\\S]*?--(~)?\\}\\})/,/^(?:\\()/,/^(?:\\))/,/^(?:\\{\\{\\{\\{)/,/^(?:\\}\\}\\}\\})/,/^(?:\\{\\{(~)?>)/,/^(?:\\{\\{(~)?#>)/,/^(?:\\{\\{(~)?#\\*?)/,/^(?:\\{\\{(~)?\\/)/,/^(?:\\{\\{(~)?\\^\\s*(~)?\\}\\})/,/^(?:\\{\\{(~)?\\s*else\\s*(~)?\\}\\})/,/^(?:\\{\\{(~)?\\^)/,/^(?:\\{\\{(~)?\\s*else\\b)/,/^(?:\\{\\{(~)?\\{)/,/^(?:\\{\\{(~)?&)/,/^(?:\\{\\{(~)?!--)/,/^(?:\\{\\{(~)?![\\s\\S]*?\\}\\})/,/^(?:\\{\\{(~)?\\*?)/,/^(?:=)/,/^(?:\\.\\.)/,/^(?:\\.(?=([=~}\\s\\/.)|])))/,/^(?:[\\/.])/,/^(?:\\s+)/,/^(?:\\}(~)?\\}\\})/,/^(?:(~)?\\}\\})/,/^(?:\"(\\\\[\"]|[^\"])*\")/,/^(?:'(\\\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\\s)])))/,/^(?:false(?=([~}\\s)])))/,/^(?:undefined(?=([~}\\s)])))/,/^(?:null(?=([~}\\s)])))/,/^(?:-?[0-9]+(?:\\.[0-9]+)?(?=([~}\\s)])))/,/^(?:as\\s+\\|)/,/^(?:\\|)/,/^(?:([^\\s!\"#%-,\\.\\/;->@\\[-\\^`\\{-~]+(?=([=~}\\s\\/.)|]))))/,/^(?:\\[(\\\\\\]|[^\\]])*\\])/,/^(?:.)/,/^(?:$)/];\nlexer.conditions = {\"mu\":{\"rules\":[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],\"inclusive\":false},\"emu\":{\"rules\":[2],\"inclusive\":false},\"com\":{\"rules\":[6],\"inclusive\":false},\"raw\":{\"rules\":[3,4,5],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,1,44],\"inclusive\":true}};\nreturn lexer;})()\nparser.lexer = lexer;\nfunction Parser () { this.yy = {}; }Parser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (handlebars);\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/compiler/parser.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/compiler/visitor.js":
/*!********************************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/compiler/visitor.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _exception__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../exception */ \"./node_modules/handlebars/lib/handlebars/exception.js\");\n\n\nfunction Visitor() {\n  this.parents = [];\n}\n\nVisitor.prototype = {\n  constructor: Visitor,\n  mutating: false,\n\n  // Visits a given value. If mutating, will replace the value if necessary.\n  acceptKey: function(node, name) {\n    let value = this.accept(node[name]);\n    if (this.mutating) {\n      // Hacky sanity check: This may have a few false positives for type for the helper\n      // methods but will generally do the right thing without a lot of overhead.\n      if (value && !Visitor.prototype[value.type]) {\n        throw new _exception__WEBPACK_IMPORTED_MODULE_0__[\"default\"](\n          'Unexpected node type \"' +\n            value.type +\n            '\" found when accepting ' +\n            name +\n            ' on ' +\n            node.type\n        );\n      }\n      node[name] = value;\n    }\n  },\n\n  // Performs an accept operation with added sanity check to ensure\n  // required keys are not removed.\n  acceptRequired: function(node, name) {\n    this.acceptKey(node, name);\n\n    if (!node[name]) {\n      throw new _exception__WEBPACK_IMPORTED_MODULE_0__[\"default\"](node.type + ' requires ' + name);\n    }\n  },\n\n  // Traverses a given array. If mutating, empty respnses will be removed\n  // for child elements.\n  acceptArray: function(array) {\n    for (let i = 0, l = array.length; i < l; i++) {\n      this.acceptKey(array, i);\n\n      if (!array[i]) {\n        array.splice(i, 1);\n        i--;\n        l--;\n      }\n    }\n  },\n\n  accept: function(object) {\n    if (!object) {\n      return;\n    }\n\n    /* istanbul ignore next: Sanity code */\n    if (!this[object.type]) {\n      throw new _exception__WEBPACK_IMPORTED_MODULE_0__[\"default\"]('Unknown type: ' + object.type, object);\n    }\n\n    if (this.current) {\n      this.parents.unshift(this.current);\n    }\n    this.current = object;\n\n    let ret = this[object.type](object);\n\n    this.current = this.parents.shift();\n\n    if (!this.mutating || ret) {\n      return ret;\n    } else if (ret !== false) {\n      return object;\n    }\n  },\n\n  Program: function(program) {\n    this.acceptArray(program.body);\n  },\n\n  MustacheStatement: visitSubExpression,\n  Decorator: visitSubExpression,\n\n  BlockStatement: visitBlock,\n  DecoratorBlock: visitBlock,\n\n  PartialStatement: visitPartial,\n  PartialBlockStatement: function(partial) {\n    visitPartial.call(this, partial);\n\n    this.acceptKey(partial, 'program');\n  },\n\n  ContentStatement: function(/* content */) {},\n  CommentStatement: function(/* comment */) {},\n\n  SubExpression: visitSubExpression,\n\n  PathExpression: function(/* path */) {},\n\n  StringLiteral: function(/* string */) {},\n  NumberLiteral: function(/* number */) {},\n  BooleanLiteral: function(/* bool */) {},\n  UndefinedLiteral: function(/* literal */) {},\n  NullLiteral: function(/* literal */) {},\n\n  Hash: function(hash) {\n    this.acceptArray(hash.pairs);\n  },\n  HashPair: function(pair) {\n    this.acceptRequired(pair, 'value');\n  }\n};\n\nfunction visitSubExpression(mustache) {\n  this.acceptRequired(mustache, 'path');\n  this.acceptArray(mustache.params);\n  this.acceptKey(mustache, 'hash');\n}\nfunction visitBlock(block) {\n  visitSubExpression.call(this, block);\n\n  this.acceptKey(block, 'program');\n  this.acceptKey(block, 'inverse');\n}\nfunction visitPartial(partial) {\n  this.acceptRequired(partial, 'name');\n  this.acceptArray(partial.params);\n  this.acceptKey(partial, 'hash');\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Visitor);\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/compiler/visitor.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/compiler/whitespace-control.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/compiler/whitespace-control.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _visitor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./visitor */ \"./node_modules/handlebars/lib/handlebars/compiler/visitor.js\");\n\n\nfunction WhitespaceControl(options = {}) {\n  this.options = options;\n}\nWhitespaceControl.prototype = new _visitor__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n\nWhitespaceControl.prototype.Program = function(program) {\n  const doStandalone = !this.options.ignoreStandalone;\n\n  let isRoot = !this.isRootSeen;\n  this.isRootSeen = true;\n\n  let body = program.body;\n  for (let i = 0, l = body.length; i < l; i++) {\n    let current = body[i],\n      strip = this.accept(current);\n\n    if (!strip) {\n      continue;\n    }\n\n    let _isPrevWhitespace = isPrevWhitespace(body, i, isRoot),\n      _isNextWhitespace = isNextWhitespace(body, i, isRoot),\n      openStandalone = strip.openStandalone && _isPrevWhitespace,\n      closeStandalone = strip.closeStandalone && _isNextWhitespace,\n      inlineStandalone =\n        strip.inlineStandalone && _isPrevWhitespace && _isNextWhitespace;\n\n    if (strip.close) {\n      omitRight(body, i, true);\n    }\n    if (strip.open) {\n      omitLeft(body, i, true);\n    }\n\n    if (doStandalone && inlineStandalone) {\n      omitRight(body, i);\n\n      if (omitLeft(body, i)) {\n        // If we are on a standalone node, save the indent info for partials\n        if (current.type === 'PartialStatement') {\n          // Pull out the whitespace from the final line\n          current.indent = /([ \\t]+$)/.exec(body[i - 1].original)[1];\n        }\n      }\n    }\n    if (doStandalone && openStandalone) {\n      omitRight((current.program || current.inverse).body);\n\n      // Strip out the previous content node if it's whitespace only\n      omitLeft(body, i);\n    }\n    if (doStandalone && closeStandalone) {\n      // Always strip the next node\n      omitRight(body, i);\n\n      omitLeft((current.inverse || current.program).body);\n    }\n  }\n\n  return program;\n};\n\nWhitespaceControl.prototype.BlockStatement = WhitespaceControl.prototype.DecoratorBlock = WhitespaceControl.prototype.PartialBlockStatement = function(\n  block\n) {\n  this.accept(block.program);\n  this.accept(block.inverse);\n\n  // Find the inverse program that is involed with whitespace stripping.\n  let program = block.program || block.inverse,\n    inverse = block.program && block.inverse,\n    firstInverse = inverse,\n    lastInverse = inverse;\n\n  if (inverse && inverse.chained) {\n    firstInverse = inverse.body[0].program;\n\n    // Walk the inverse chain to find the last inverse that is actually in the chain.\n    while (lastInverse.chained) {\n      lastInverse = lastInverse.body[lastInverse.body.length - 1].program;\n    }\n  }\n\n  let strip = {\n    open: block.openStrip.open,\n    close: block.closeStrip.close,\n\n    // Determine the standalone candiacy. Basically flag our content as being possibly standalone\n    // so our parent can determine if we actually are standalone\n    openStandalone: isNextWhitespace(program.body),\n    closeStandalone: isPrevWhitespace((firstInverse || program).body)\n  };\n\n  if (block.openStrip.close) {\n    omitRight(program.body, null, true);\n  }\n\n  if (inverse) {\n    let inverseStrip = block.inverseStrip;\n\n    if (inverseStrip.open) {\n      omitLeft(program.body, null, true);\n    }\n\n    if (inverseStrip.close) {\n      omitRight(firstInverse.body, null, true);\n    }\n    if (block.closeStrip.open) {\n      omitLeft(lastInverse.body, null, true);\n    }\n\n    // Find standalone else statments\n    if (\n      !this.options.ignoreStandalone &&\n      isPrevWhitespace(program.body) &&\n      isNextWhitespace(firstInverse.body)\n    ) {\n      omitLeft(program.body);\n      omitRight(firstInverse.body);\n    }\n  } else if (block.closeStrip.open) {\n    omitLeft(program.body, null, true);\n  }\n\n  return strip;\n};\n\nWhitespaceControl.prototype.Decorator = WhitespaceControl.prototype.MustacheStatement = function(\n  mustache\n) {\n  return mustache.strip;\n};\n\nWhitespaceControl.prototype.PartialStatement = WhitespaceControl.prototype.CommentStatement = function(\n  node\n) {\n  /* istanbul ignore next */\n  let strip = node.strip || {};\n  return {\n    inlineStandalone: true,\n    open: strip.open,\n    close: strip.close\n  };\n};\n\nfunction isPrevWhitespace(body, i, isRoot) {\n  if (i === undefined) {\n    i = body.length;\n  }\n\n  // Nodes that end with newlines are considered whitespace (but are special\n  // cased for strip operations)\n  let prev = body[i - 1],\n    sibling = body[i - 2];\n  if (!prev) {\n    return isRoot;\n  }\n\n  if (prev.type === 'ContentStatement') {\n    return (sibling || !isRoot ? /\\r?\\n\\s*?$/ : /(^|\\r?\\n)\\s*?$/).test(\n      prev.original\n    );\n  }\n}\nfunction isNextWhitespace(body, i, isRoot) {\n  if (i === undefined) {\n    i = -1;\n  }\n\n  let next = body[i + 1],\n    sibling = body[i + 2];\n  if (!next) {\n    return isRoot;\n  }\n\n  if (next.type === 'ContentStatement') {\n    return (sibling || !isRoot ? /^\\s*?\\r?\\n/ : /^\\s*?(\\r?\\n|$)/).test(\n      next.original\n    );\n  }\n}\n\n// Marks the node to the right of the position as omitted.\n// I.e. {{foo}}' ' will mark the ' ' node as omitted.\n//\n// If i is undefined, then the first child will be marked as such.\n//\n// If mulitple is truthy then all whitespace will be stripped out until non-whitespace\n// content is met.\nfunction omitRight(body, i, multiple) {\n  let current = body[i == null ? 0 : i + 1];\n  if (\n    !current ||\n    current.type !== 'ContentStatement' ||\n    (!multiple && current.rightStripped)\n  ) {\n    return;\n  }\n\n  let original = current.value;\n  current.value = current.value.replace(\n    multiple ? /^\\s+/ : /^[ \\t]*\\r?\\n?/,\n    ''\n  );\n  current.rightStripped = current.value !== original;\n}\n\n// Marks the node to the left of the position as omitted.\n// I.e. ' '{{foo}} will mark the ' ' node as omitted.\n//\n// If i is undefined then the last child will be marked as such.\n//\n// If mulitple is truthy then all whitespace will be stripped out until non-whitespace\n// content is met.\nfunction omitLeft(body, i, multiple) {\n  let current = body[i == null ? body.length - 1 : i - 1];\n  if (\n    !current ||\n    current.type !== 'ContentStatement' ||\n    (!multiple && current.leftStripped)\n  ) {\n    return;\n  }\n\n  // We omit the last node if it's whitespace only and not preceded by a non-content node.\n  let original = current.value;\n  current.value = current.value.replace(multiple ? /\\s+$/ : /[ \\t]+$/, '');\n  current.leftStripped = current.value !== original;\n  return current.leftStripped;\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (WhitespaceControl);\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/compiler/whitespace-control.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/decorators.js":
/*!**************************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/decorators.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"registerDefaultDecorators\": () => (/* binding */ registerDefaultDecorators)\n/* harmony export */ });\n/* harmony import */ var _decorators_inline__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./decorators/inline */ \"./node_modules/handlebars/lib/handlebars/decorators/inline.js\");\n\n\nfunction registerDefaultDecorators(instance) {\n  (0,_decorators_inline__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(instance);\n}\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/decorators.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/decorators/inline.js":
/*!*********************************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/decorators/inline.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./node_modules/handlebars/lib/handlebars/utils.js\");\n\n\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(instance) {\n  instance.registerDecorator('inline', function(fn, props, container, options) {\n    let ret = fn;\n    if (!props.partials) {\n      props.partials = {};\n      ret = function(context, options) {\n        // Create a new partials stack frame prior to exec.\n        let original = container.partials;\n        container.partials = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.extend)({}, original, props.partials);\n        let ret = fn(context, options);\n        container.partials = original;\n        return ret;\n      };\n    }\n\n    props.partials[options.args[0]] = options.fn;\n\n    return ret;\n  });\n}\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/decorators/inline.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/exception.js":
/*!*************************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/exception.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst errorProps = [\n  'description',\n  'fileName',\n  'lineNumber',\n  'endLineNumber',\n  'message',\n  'name',\n  'number',\n  'stack'\n];\n\nfunction Exception(message, node) {\n  let loc = node && node.loc,\n    line,\n    endLineNumber,\n    column,\n    endColumn;\n\n  if (loc) {\n    line = loc.start.line;\n    endLineNumber = loc.end.line;\n    column = loc.start.column;\n    endColumn = loc.end.column;\n\n    message += ' - ' + line + ':' + column;\n  }\n\n  let tmp = Error.prototype.constructor.call(this, message);\n\n  // Unfortunately errors are not enumerable in Chrome (at least), so `for prop in tmp` doesn't work.\n  for (let idx = 0; idx < errorProps.length; idx++) {\n    this[errorProps[idx]] = tmp[errorProps[idx]];\n  }\n\n  /* istanbul ignore else */\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, Exception);\n  }\n\n  try {\n    if (loc) {\n      this.lineNumber = line;\n      this.endLineNumber = endLineNumber;\n\n      // Work around issue under safari where we can't directly set the column value\n      /* istanbul ignore next */\n      if (Object.defineProperty) {\n        Object.defineProperty(this, 'column', {\n          value: column,\n          enumerable: true\n        });\n        Object.defineProperty(this, 'endColumn', {\n          value: endColumn,\n          enumerable: true\n        });\n      } else {\n        this.column = column;\n        this.endColumn = endColumn;\n      }\n    }\n  } catch (nop) {\n    /* Ignore if the browser is very particular */\n  }\n}\n\nException.prototype = new Error();\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Exception);\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/exception.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/helpers.js":
/*!***********************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/helpers.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"moveHelperToHooks\": () => (/* binding */ moveHelperToHooks),\n/* harmony export */   \"registerDefaultHelpers\": () => (/* binding */ registerDefaultHelpers)\n/* harmony export */ });\n/* harmony import */ var _helpers_block_helper_missing__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers/block-helper-missing */ \"./node_modules/handlebars/lib/handlebars/helpers/block-helper-missing.js\");\n/* harmony import */ var _helpers_each__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helpers/each */ \"./node_modules/handlebars/lib/handlebars/helpers/each.js\");\n/* harmony import */ var _helpers_helper_missing__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./helpers/helper-missing */ \"./node_modules/handlebars/lib/handlebars/helpers/helper-missing.js\");\n/* harmony import */ var _helpers_if__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./helpers/if */ \"./node_modules/handlebars/lib/handlebars/helpers/if.js\");\n/* harmony import */ var _helpers_log__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./helpers/log */ \"./node_modules/handlebars/lib/handlebars/helpers/log.js\");\n/* harmony import */ var _helpers_lookup__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./helpers/lookup */ \"./node_modules/handlebars/lib/handlebars/helpers/lookup.js\");\n/* harmony import */ var _helpers_with__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./helpers/with */ \"./node_modules/handlebars/lib/handlebars/helpers/with.js\");\n\n\n\n\n\n\n\n\nfunction registerDefaultHelpers(instance) {\n  (0,_helpers_block_helper_missing__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(instance);\n  (0,_helpers_each__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(instance);\n  (0,_helpers_helper_missing__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(instance);\n  (0,_helpers_if__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(instance);\n  (0,_helpers_log__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(instance);\n  (0,_helpers_lookup__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(instance);\n  (0,_helpers_with__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(instance);\n}\n\nfunction moveHelperToHooks(instance, helperName, keepHelper) {\n  if (instance.helpers[helperName]) {\n    instance.hooks[helperName] = instance.helpers[helperName];\n    if (!keepHelper) {\n      delete instance.helpers[helperName];\n    }\n  }\n}\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/helpers.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/helpers/block-helper-missing.js":
/*!********************************************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/helpers/block-helper-missing.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./node_modules/handlebars/lib/handlebars/utils.js\");\n\n\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(instance) {\n  instance.registerHelper('blockHelperMissing', function(context, options) {\n    let inverse = options.inverse,\n      fn = options.fn;\n\n    if (context === true) {\n      return fn(this);\n    } else if (context === false || context == null) {\n      return inverse(this);\n    } else if ((0,_utils__WEBPACK_IMPORTED_MODULE_0__.isArray)(context)) {\n      if (context.length > 0) {\n        if (options.ids) {\n          options.ids = [options.name];\n        }\n\n        return instance.helpers.each(context, options);\n      } else {\n        return inverse(this);\n      }\n    } else {\n      if (options.data && options.ids) {\n        let data = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.createFrame)(options.data);\n        data.contextPath = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.appendContextPath)(\n          options.data.contextPath,\n          options.name\n        );\n        options = { data: data };\n      }\n\n      return fn(context, options);\n    }\n  });\n}\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/helpers/block-helper-missing.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/helpers/each.js":
/*!****************************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/helpers/each.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./node_modules/handlebars/lib/handlebars/utils.js\");\n/* harmony import */ var _exception__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../exception */ \"./node_modules/handlebars/lib/handlebars/exception.js\");\n\n\n\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(instance) {\n  instance.registerHelper('each', function(context, options) {\n    if (!options) {\n      throw new _exception__WEBPACK_IMPORTED_MODULE_1__[\"default\"]('Must pass iterator to #each');\n    }\n\n    let fn = options.fn,\n      inverse = options.inverse,\n      i = 0,\n      ret = '',\n      data,\n      contextPath;\n\n    if (options.data && options.ids) {\n      contextPath =\n        (0,_utils__WEBPACK_IMPORTED_MODULE_0__.appendContextPath)(options.data.contextPath, options.ids[0]) + '.';\n    }\n\n    if ((0,_utils__WEBPACK_IMPORTED_MODULE_0__.isFunction)(context)) {\n      context = context.call(this);\n    }\n\n    if (options.data) {\n      data = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.createFrame)(options.data);\n    }\n\n    function execIteration(field, index, last) {\n      if (data) {\n        data.key = field;\n        data.index = index;\n        data.first = index === 0;\n        data.last = !!last;\n\n        if (contextPath) {\n          data.contextPath = contextPath + field;\n        }\n      }\n\n      ret =\n        ret +\n        fn(context[field], {\n          data: data,\n          blockParams: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.blockParams)(\n            [context[field], field],\n            [contextPath + field, null]\n          )\n        });\n    }\n\n    if (context && typeof context === 'object') {\n      if ((0,_utils__WEBPACK_IMPORTED_MODULE_0__.isArray)(context)) {\n        for (let j = context.length; i < j; i++) {\n          if (i in context) {\n            execIteration(i, i, i === context.length - 1);\n          }\n        }\n      } else if (__webpack_require__.g.Symbol && context[__webpack_require__.g.Symbol.iterator]) {\n        const newContext = [];\n        const iterator = context[__webpack_require__.g.Symbol.iterator]();\n        for (let it = iterator.next(); !it.done; it = iterator.next()) {\n          newContext.push(it.value);\n        }\n        context = newContext;\n        for (let j = context.length; i < j; i++) {\n          execIteration(i, i, i === context.length - 1);\n        }\n      } else {\n        let priorKey;\n\n        Object.keys(context).forEach(key => {\n          // We're running the iterations one step out of sync so we can detect\n          // the last iteration without have to scan the object twice and create\n          // an itermediate keys array.\n          if (priorKey !== undefined) {\n            execIteration(priorKey, i - 1);\n          }\n          priorKey = key;\n          i++;\n        });\n        if (priorKey !== undefined) {\n          execIteration(priorKey, i - 1, true);\n        }\n      }\n    }\n\n    if (i === 0) {\n      ret = inverse(this);\n    }\n\n    return ret;\n  });\n}\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/helpers/each.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/helpers/helper-missing.js":
/*!**************************************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/helpers/helper-missing.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _exception__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../exception */ \"./node_modules/handlebars/lib/handlebars/exception.js\");\n\n\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(instance) {\n  instance.registerHelper('helperMissing', function(/* [args, ]options */) {\n    if (arguments.length === 1) {\n      // A missing field in a {{foo}} construct.\n      return undefined;\n    } else {\n      // Someone is actually trying to call something, blow up.\n      throw new _exception__WEBPACK_IMPORTED_MODULE_0__[\"default\"](\n        'Missing helper: \"' + arguments[arguments.length - 1].name + '\"'\n      );\n    }\n  });\n}\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/helpers/helper-missing.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/helpers/if.js":
/*!**************************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/helpers/if.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./node_modules/handlebars/lib/handlebars/utils.js\");\n/* harmony import */ var _exception__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../exception */ \"./node_modules/handlebars/lib/handlebars/exception.js\");\n\n\n\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(instance) {\n  instance.registerHelper('if', function(conditional, options) {\n    if (arguments.length != 2) {\n      throw new _exception__WEBPACK_IMPORTED_MODULE_1__[\"default\"]('#if requires exactly one argument');\n    }\n    if ((0,_utils__WEBPACK_IMPORTED_MODULE_0__.isFunction)(conditional)) {\n      conditional = conditional.call(this);\n    }\n\n    // Default behavior is to render the positive path if the value is truthy and not empty.\n    // The `includeZero` option may be set to treat the condtional as purely not empty based on the\n    // behavior of isEmpty. Effectively this determines if 0 is handled by the positive path or negative.\n    if ((!options.hash.includeZero && !conditional) || (0,_utils__WEBPACK_IMPORTED_MODULE_0__.isEmpty)(conditional)) {\n      return options.inverse(this);\n    } else {\n      return options.fn(this);\n    }\n  });\n\n  instance.registerHelper('unless', function(conditional, options) {\n    if (arguments.length != 2) {\n      throw new _exception__WEBPACK_IMPORTED_MODULE_1__[\"default\"]('#unless requires exactly one argument');\n    }\n    return instance.helpers['if'].call(this, conditional, {\n      fn: options.inverse,\n      inverse: options.fn,\n      hash: options.hash\n    });\n  });\n}\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/helpers/if.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/helpers/log.js":
/*!***************************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/helpers/log.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(instance) {\n  instance.registerHelper('log', function(/* message, options */) {\n    let args = [undefined],\n      options = arguments[arguments.length - 1];\n    for (let i = 0; i < arguments.length - 1; i++) {\n      args.push(arguments[i]);\n    }\n\n    let level = 1;\n    if (options.hash.level != null) {\n      level = options.hash.level;\n    } else if (options.data && options.data.level != null) {\n      level = options.data.level;\n    }\n    args[0] = level;\n\n    instance.log(...args);\n  });\n}\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/helpers/log.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/helpers/lookup.js":
/*!******************************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/helpers/lookup.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(instance) {\n  instance.registerHelper('lookup', function(obj, field, options) {\n    if (!obj) {\n      // Note for 5.0: Change to \"obj == null\" in 5.0\n      return obj;\n    }\n    return options.lookupProperty(obj, field);\n  });\n}\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/helpers/lookup.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/helpers/with.js":
/*!****************************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/helpers/with.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./node_modules/handlebars/lib/handlebars/utils.js\");\n/* harmony import */ var _exception__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../exception */ \"./node_modules/handlebars/lib/handlebars/exception.js\");\n\n\n\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(instance) {\n  instance.registerHelper('with', function(context, options) {\n    if (arguments.length != 2) {\n      throw new _exception__WEBPACK_IMPORTED_MODULE_1__[\"default\"]('#with requires exactly one argument');\n    }\n    if ((0,_utils__WEBPACK_IMPORTED_MODULE_0__.isFunction)(context)) {\n      context = context.call(this);\n    }\n\n    let fn = options.fn;\n\n    if (!(0,_utils__WEBPACK_IMPORTED_MODULE_0__.isEmpty)(context)) {\n      let data = options.data;\n      if (options.data && options.ids) {\n        data = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.createFrame)(options.data);\n        data.contextPath = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.appendContextPath)(\n          options.data.contextPath,\n          options.ids[0]\n        );\n      }\n\n      return fn(context, {\n        data: data,\n        blockParams: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.blockParams)([context], [data && data.contextPath])\n      });\n    } else {\n      return options.inverse(this);\n    }\n  });\n}\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/helpers/with.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/internal/create-new-lookup-object.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/internal/create-new-lookup-object.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createNewLookupObject\": () => (/* binding */ createNewLookupObject)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./node_modules/handlebars/lib/handlebars/utils.js\");\n\n\n/**\n * Create a new object with \"null\"-prototype to avoid truthy results on prototype properties.\n * The resulting object can be used with \"object[property]\" to check if a property exists\n * @param {...object} sources a varargs parameter of source objects that will be merged\n * @returns {object}\n */\nfunction createNewLookupObject(...sources) {\n  return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.extend)(Object.create(null), ...sources);\n}\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/internal/create-new-lookup-object.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/internal/proto-access.js":
/*!*************************************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/internal/proto-access.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createProtoAccessControl\": () => (/* binding */ createProtoAccessControl),\n/* harmony export */   \"resetLoggedProperties\": () => (/* binding */ resetLoggedProperties),\n/* harmony export */   \"resultIsAllowed\": () => (/* binding */ resultIsAllowed)\n/* harmony export */ });\n/* harmony import */ var _create_new_lookup_object__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./create-new-lookup-object */ \"./node_modules/handlebars/lib/handlebars/internal/create-new-lookup-object.js\");\n/* harmony import */ var _logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../logger */ \"./node_modules/handlebars/lib/handlebars/logger.js\");\n\n\n\nconst loggedProperties = Object.create(null);\n\nfunction createProtoAccessControl(runtimeOptions) {\n  let defaultMethodWhiteList = Object.create(null);\n  defaultMethodWhiteList['constructor'] = false;\n  defaultMethodWhiteList['__defineGetter__'] = false;\n  defaultMethodWhiteList['__defineSetter__'] = false;\n  defaultMethodWhiteList['__lookupGetter__'] = false;\n\n  let defaultPropertyWhiteList = Object.create(null);\n  // eslint-disable-next-line no-proto\n  defaultPropertyWhiteList['__proto__'] = false;\n\n  return {\n    properties: {\n      whitelist: (0,_create_new_lookup_object__WEBPACK_IMPORTED_MODULE_0__.createNewLookupObject)(\n        defaultPropertyWhiteList,\n        runtimeOptions.allowedProtoProperties\n      ),\n      defaultValue: runtimeOptions.allowProtoPropertiesByDefault\n    },\n    methods: {\n      whitelist: (0,_create_new_lookup_object__WEBPACK_IMPORTED_MODULE_0__.createNewLookupObject)(\n        defaultMethodWhiteList,\n        runtimeOptions.allowedProtoMethods\n      ),\n      defaultValue: runtimeOptions.allowProtoMethodsByDefault\n    }\n  };\n}\n\nfunction resultIsAllowed(result, protoAccessControl, propertyName) {\n  if (typeof result === 'function') {\n    return checkWhiteList(protoAccessControl.methods, propertyName);\n  } else {\n    return checkWhiteList(protoAccessControl.properties, propertyName);\n  }\n}\n\nfunction checkWhiteList(protoAccessControlForType, propertyName) {\n  if (protoAccessControlForType.whitelist[propertyName] !== undefined) {\n    return protoAccessControlForType.whitelist[propertyName] === true;\n  }\n  if (protoAccessControlForType.defaultValue !== undefined) {\n    return protoAccessControlForType.defaultValue;\n  }\n  logUnexpecedPropertyAccessOnce(propertyName);\n  return false;\n}\n\nfunction logUnexpecedPropertyAccessOnce(propertyName) {\n  if (loggedProperties[propertyName] !== true) {\n    loggedProperties[propertyName] = true;\n    _logger__WEBPACK_IMPORTED_MODULE_1__.log(\n      'error',\n      `Handlebars: Access has been denied to resolve the property \"${propertyName}\" because it is not an \"own property\" of its parent.\\n` +\n        `You can add a runtime option to disable the check or this warning:\\n` +\n        `See https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details`\n    );\n  }\n}\n\nfunction resetLoggedProperties() {\n  Object.keys(loggedProperties).forEach(propertyName => {\n    delete loggedProperties[propertyName];\n  });\n}\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/internal/proto-access.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/internal/wrapHelper.js":
/*!***********************************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/internal/wrapHelper.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"wrapHelper\": () => (/* binding */ wrapHelper)\n/* harmony export */ });\nfunction wrapHelper(helper, transformOptionsFn) {\n  if (typeof helper !== 'function') {\n    // This should not happen, but apparently it does in https://github.com/wycats/handlebars.js/issues/1639\n    // We try to make the wrapper least-invasive by not wrapping it, if the helper is not a function.\n    return helper;\n  }\n  let wrapper = function(/* dynamic arguments */) {\n    const options = arguments[arguments.length - 1];\n    arguments[arguments.length - 1] = transformOptionsFn(options);\n    return helper.apply(this, arguments);\n  };\n  return wrapper;\n}\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/internal/wrapHelper.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/logger.js":
/*!**********************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/logger.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./node_modules/handlebars/lib/handlebars/utils.js\");\n\n\nlet logger = {\n  methodMap: ['debug', 'info', 'warn', 'error'],\n  level: 'info',\n\n  // Maps a given level value to the `methodMap` indexes above.\n  lookupLevel: function(level) {\n    if (typeof level === 'string') {\n      let levelMap = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.indexOf)(logger.methodMap, level.toLowerCase());\n      if (levelMap >= 0) {\n        level = levelMap;\n      } else {\n        level = parseInt(level, 10);\n      }\n    }\n\n    return level;\n  },\n\n  // Can be overridden in the host environment\n  log: function(level, ...message) {\n    level = logger.lookupLevel(level);\n\n    if (\n      typeof console !== 'undefined' &&\n      logger.lookupLevel(logger.level) <= level\n    ) {\n      let method = logger.methodMap[level];\n      // eslint-disable-next-line no-console\n      if (!console[method]) {\n        method = 'log';\n      }\n      console[method](...message); // eslint-disable-line no-console\n    }\n  }\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (logger);\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/logger.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/no-conflict.js":
/*!***************************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/no-conflict.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(Handlebars) {\n  /* istanbul ignore next */\n  let root = typeof __webpack_require__.g !== 'undefined' ? __webpack_require__.g : window,\n    $Handlebars = root.Handlebars;\n  /* istanbul ignore next */\n  Handlebars.noConflict = function() {\n    if (root.Handlebars === Handlebars) {\n      root.Handlebars = $Handlebars;\n    }\n    return Handlebars;\n  };\n}\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/no-conflict.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/runtime.js":
/*!***********************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/runtime.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"checkRevision\": () => (/* binding */ checkRevision),\n/* harmony export */   \"invokePartial\": () => (/* binding */ invokePartial),\n/* harmony export */   \"noop\": () => (/* binding */ noop),\n/* harmony export */   \"resolvePartial\": () => (/* binding */ resolvePartial),\n/* harmony export */   \"template\": () => (/* binding */ template),\n/* harmony export */   \"wrapProgram\": () => (/* binding */ wrapProgram)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./node_modules/handlebars/lib/handlebars/utils.js\");\n/* harmony import */ var _exception__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./exception */ \"./node_modules/handlebars/lib/handlebars/exception.js\");\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base */ \"./node_modules/handlebars/lib/handlebars/base.js\");\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./helpers */ \"./node_modules/handlebars/lib/handlebars/helpers.js\");\n/* harmony import */ var _internal_wrapHelper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./internal/wrapHelper */ \"./node_modules/handlebars/lib/handlebars/internal/wrapHelper.js\");\n/* harmony import */ var _internal_proto_access__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./internal/proto-access */ \"./node_modules/handlebars/lib/handlebars/internal/proto-access.js\");\n\n\n\n\n\n\n\nfunction checkRevision(compilerInfo) {\n  const compilerRevision = (compilerInfo && compilerInfo[0]) || 1,\n    currentRevision = _base__WEBPACK_IMPORTED_MODULE_2__.COMPILER_REVISION;\n\n  if (\n    compilerRevision >= _base__WEBPACK_IMPORTED_MODULE_2__.LAST_COMPATIBLE_COMPILER_REVISION &&\n    compilerRevision <= _base__WEBPACK_IMPORTED_MODULE_2__.COMPILER_REVISION\n  ) {\n    return;\n  }\n\n  if (compilerRevision < _base__WEBPACK_IMPORTED_MODULE_2__.LAST_COMPATIBLE_COMPILER_REVISION) {\n    const runtimeVersions = _base__WEBPACK_IMPORTED_MODULE_2__.REVISION_CHANGES[currentRevision],\n      compilerVersions = _base__WEBPACK_IMPORTED_MODULE_2__.REVISION_CHANGES[compilerRevision];\n    throw new _exception__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\n      'Template was precompiled with an older version of Handlebars than the current runtime. ' +\n        'Please update your precompiler to a newer version (' +\n        runtimeVersions +\n        ') or downgrade your runtime to an older version (' +\n        compilerVersions +\n        ').'\n    );\n  } else {\n    // Use the embedded version info since the runtime doesn't know about this revision yet\n    throw new _exception__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\n      'Template was precompiled with a newer version of Handlebars than the current runtime. ' +\n        'Please update your runtime to a newer version (' +\n        compilerInfo[1] +\n        ').'\n    );\n  }\n}\n\nfunction template(templateSpec, env) {\n  /* istanbul ignore next */\n  if (!env) {\n    throw new _exception__WEBPACK_IMPORTED_MODULE_1__[\"default\"]('No environment passed to template');\n  }\n  if (!templateSpec || !templateSpec.main) {\n    throw new _exception__WEBPACK_IMPORTED_MODULE_1__[\"default\"]('Unknown template object: ' + typeof templateSpec);\n  }\n\n  templateSpec.main.decorator = templateSpec.main_d;\n\n  // Note: Using env.VM references rather than local var references throughout this section to allow\n  // for external users to override these as pseudo-supported APIs.\n  env.VM.checkRevision(templateSpec.compiler);\n\n  // backwards compatibility for precompiled templates with compiler-version 7 (<4.3.0)\n  const templateWasPrecompiledWithCompilerV7 =\n    templateSpec.compiler && templateSpec.compiler[0] === 7;\n\n  function invokePartialWrapper(partial, context, options) {\n    if (options.hash) {\n      context = _utils__WEBPACK_IMPORTED_MODULE_0__.extend({}, context, options.hash);\n      if (options.ids) {\n        options.ids[0] = true;\n      }\n    }\n    partial = env.VM.resolvePartial.call(this, partial, context, options);\n\n    let extendedOptions = _utils__WEBPACK_IMPORTED_MODULE_0__.extend({}, options, {\n      hooks: this.hooks,\n      protoAccessControl: this.protoAccessControl\n    });\n\n    let result = env.VM.invokePartial.call(\n      this,\n      partial,\n      context,\n      extendedOptions\n    );\n\n    if (result == null && env.compile) {\n      options.partials[options.name] = env.compile(\n        partial,\n        templateSpec.compilerOptions,\n        env\n      );\n      result = options.partials[options.name](context, extendedOptions);\n    }\n    if (result != null) {\n      if (options.indent) {\n        let lines = result.split('\\n');\n        for (let i = 0, l = lines.length; i < l; i++) {\n          if (!lines[i] && i + 1 === l) {\n            break;\n          }\n\n          lines[i] = options.indent + lines[i];\n        }\n        result = lines.join('\\n');\n      }\n      return result;\n    } else {\n      throw new _exception__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\n        'The partial ' +\n          options.name +\n          ' could not be compiled when running in runtime-only mode'\n      );\n    }\n  }\n\n  // Just add water\n  let container = {\n    strict: function(obj, name, loc) {\n      if (!obj || !(name in obj)) {\n        throw new _exception__WEBPACK_IMPORTED_MODULE_1__[\"default\"]('\"' + name + '\" not defined in ' + obj, {\n          loc: loc\n        });\n      }\n      return container.lookupProperty(obj, name);\n    },\n    lookupProperty: function(parent, propertyName) {\n      let result = parent[propertyName];\n      if (result == null) {\n        return result;\n      }\n      if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n        return result;\n      }\n\n      if ((0,_internal_proto_access__WEBPACK_IMPORTED_MODULE_5__.resultIsAllowed)(result, container.protoAccessControl, propertyName)) {\n        return result;\n      }\n      return undefined;\n    },\n    lookup: function(depths, name) {\n      const len = depths.length;\n      for (let i = 0; i < len; i++) {\n        let result = depths[i] && container.lookupProperty(depths[i], name);\n        if (result != null) {\n          return depths[i][name];\n        }\n      }\n    },\n    lambda: function(current, context) {\n      return typeof current === 'function' ? current.call(context) : current;\n    },\n\n    escapeExpression: _utils__WEBPACK_IMPORTED_MODULE_0__.escapeExpression,\n    invokePartial: invokePartialWrapper,\n\n    fn: function(i) {\n      let ret = templateSpec[i];\n      ret.decorator = templateSpec[i + '_d'];\n      return ret;\n    },\n\n    programs: [],\n    program: function(i, data, declaredBlockParams, blockParams, depths) {\n      let programWrapper = this.programs[i],\n        fn = this.fn(i);\n      if (data || depths || blockParams || declaredBlockParams) {\n        programWrapper = wrapProgram(\n          this,\n          i,\n          fn,\n          data,\n          declaredBlockParams,\n          blockParams,\n          depths\n        );\n      } else if (!programWrapper) {\n        programWrapper = this.programs[i] = wrapProgram(this, i, fn);\n      }\n      return programWrapper;\n    },\n\n    data: function(value, depth) {\n      while (value && depth--) {\n        value = value._parent;\n      }\n      return value;\n    },\n    mergeIfNeeded: function(param, common) {\n      let obj = param || common;\n\n      if (param && common && param !== common) {\n        obj = _utils__WEBPACK_IMPORTED_MODULE_0__.extend({}, common, param);\n      }\n\n      return obj;\n    },\n    // An empty object to use as replacement for null-contexts\n    nullContext: Object.seal({}),\n\n    noop: env.VM.noop,\n    compilerInfo: templateSpec.compiler\n  };\n\n  function ret(context, options = {}) {\n    let data = options.data;\n\n    ret._setup(options);\n    if (!options.partial && templateSpec.useData) {\n      data = initData(context, data);\n    }\n    let depths,\n      blockParams = templateSpec.useBlockParams ? [] : undefined;\n    if (templateSpec.useDepths) {\n      if (options.depths) {\n        depths =\n          context != options.depths[0]\n            ? [context].concat(options.depths)\n            : options.depths;\n      } else {\n        depths = [context];\n      }\n    }\n\n    function main(context /*, options*/) {\n      return (\n        '' +\n        templateSpec.main(\n          container,\n          context,\n          container.helpers,\n          container.partials,\n          data,\n          blockParams,\n          depths\n        )\n      );\n    }\n\n    main = executeDecorators(\n      templateSpec.main,\n      main,\n      container,\n      options.depths || [],\n      data,\n      blockParams\n    );\n    return main(context, options);\n  }\n\n  ret.isTop = true;\n\n  ret._setup = function(options) {\n    if (!options.partial) {\n      let mergedHelpers = _utils__WEBPACK_IMPORTED_MODULE_0__.extend({}, env.helpers, options.helpers);\n      wrapHelpersToPassLookupProperty(mergedHelpers, container);\n      container.helpers = mergedHelpers;\n\n      if (templateSpec.usePartial) {\n        // Use mergeIfNeeded here to prevent compiling global partials multiple times\n        container.partials = container.mergeIfNeeded(\n          options.partials,\n          env.partials\n        );\n      }\n      if (templateSpec.usePartial || templateSpec.useDecorators) {\n        container.decorators = _utils__WEBPACK_IMPORTED_MODULE_0__.extend(\n          {},\n          env.decorators,\n          options.decorators\n        );\n      }\n\n      container.hooks = {};\n      container.protoAccessControl = (0,_internal_proto_access__WEBPACK_IMPORTED_MODULE_5__.createProtoAccessControl)(options);\n\n      let keepHelperInHelpers =\n        options.allowCallsToHelperMissing ||\n        templateWasPrecompiledWithCompilerV7;\n      (0,_helpers__WEBPACK_IMPORTED_MODULE_3__.moveHelperToHooks)(container, 'helperMissing', keepHelperInHelpers);\n      (0,_helpers__WEBPACK_IMPORTED_MODULE_3__.moveHelperToHooks)(container, 'blockHelperMissing', keepHelperInHelpers);\n    } else {\n      container.protoAccessControl = options.protoAccessControl; // internal option\n      container.helpers = options.helpers;\n      container.partials = options.partials;\n      container.decorators = options.decorators;\n      container.hooks = options.hooks;\n    }\n  };\n\n  ret._child = function(i, data, blockParams, depths) {\n    if (templateSpec.useBlockParams && !blockParams) {\n      throw new _exception__WEBPACK_IMPORTED_MODULE_1__[\"default\"]('must pass block params');\n    }\n    if (templateSpec.useDepths && !depths) {\n      throw new _exception__WEBPACK_IMPORTED_MODULE_1__[\"default\"]('must pass parent depths');\n    }\n\n    return wrapProgram(\n      container,\n      i,\n      templateSpec[i],\n      data,\n      0,\n      blockParams,\n      depths\n    );\n  };\n  return ret;\n}\n\nfunction wrapProgram(\n  container,\n  i,\n  fn,\n  data,\n  declaredBlockParams,\n  blockParams,\n  depths\n) {\n  function prog(context, options = {}) {\n    let currentDepths = depths;\n    if (\n      depths &&\n      context != depths[0] &&\n      !(context === container.nullContext && depths[0] === null)\n    ) {\n      currentDepths = [context].concat(depths);\n    }\n\n    return fn(\n      container,\n      context,\n      container.helpers,\n      container.partials,\n      options.data || data,\n      blockParams && [options.blockParams].concat(blockParams),\n      currentDepths\n    );\n  }\n\n  prog = executeDecorators(fn, prog, container, depths, data, blockParams);\n\n  prog.program = i;\n  prog.depth = depths ? depths.length : 0;\n  prog.blockParams = declaredBlockParams || 0;\n  return prog;\n}\n\n/**\n * This is currently part of the official API, therefore implementation details should not be changed.\n */\nfunction resolvePartial(partial, context, options) {\n  if (!partial) {\n    if (options.name === '@partial-block') {\n      partial = options.data['partial-block'];\n    } else {\n      partial = options.partials[options.name];\n    }\n  } else if (!partial.call && !options.name) {\n    // This is a dynamic partial that returned a string\n    options.name = partial;\n    partial = options.partials[partial];\n  }\n  return partial;\n}\n\nfunction invokePartial(partial, context, options) {\n  // Use the current closure context to save the partial-block if this partial\n  const currentPartialBlock = options.data && options.data['partial-block'];\n  options.partial = true;\n  if (options.ids) {\n    options.data.contextPath = options.ids[0] || options.data.contextPath;\n  }\n\n  let partialBlock;\n  if (options.fn && options.fn !== noop) {\n    options.data = (0,_base__WEBPACK_IMPORTED_MODULE_2__.createFrame)(options.data);\n    // Wrapper function to get access to currentPartialBlock from the closure\n    let fn = options.fn;\n    partialBlock = options.data['partial-block'] = function partialBlockWrapper(\n      context,\n      options = {}\n    ) {\n      // Restore the partial-block from the closure for the execution of the block\n      // i.e. the part inside the block of the partial call.\n      options.data = (0,_base__WEBPACK_IMPORTED_MODULE_2__.createFrame)(options.data);\n      options.data['partial-block'] = currentPartialBlock;\n      return fn(context, options);\n    };\n    if (fn.partials) {\n      options.partials = _utils__WEBPACK_IMPORTED_MODULE_0__.extend({}, options.partials, fn.partials);\n    }\n  }\n\n  if (partial === undefined && partialBlock) {\n    partial = partialBlock;\n  }\n\n  if (partial === undefined) {\n    throw new _exception__WEBPACK_IMPORTED_MODULE_1__[\"default\"]('The partial ' + options.name + ' could not be found');\n  } else if (partial instanceof Function) {\n    return partial(context, options);\n  }\n}\n\nfunction noop() {\n  return '';\n}\n\nfunction initData(context, data) {\n  if (!data || !('root' in data)) {\n    data = data ? (0,_base__WEBPACK_IMPORTED_MODULE_2__.createFrame)(data) : {};\n    data.root = context;\n  }\n  return data;\n}\n\nfunction executeDecorators(fn, prog, container, depths, data, blockParams) {\n  if (fn.decorator) {\n    let props = {};\n    prog = fn.decorator(\n      prog,\n      props,\n      container,\n      depths && depths[0],\n      data,\n      blockParams,\n      depths\n    );\n    _utils__WEBPACK_IMPORTED_MODULE_0__.extend(prog, props);\n  }\n  return prog;\n}\n\nfunction wrapHelpersToPassLookupProperty(mergedHelpers, container) {\n  Object.keys(mergedHelpers).forEach(helperName => {\n    let helper = mergedHelpers[helperName];\n    mergedHelpers[helperName] = passLookupPropertyOption(helper, container);\n  });\n}\n\nfunction passLookupPropertyOption(helper, container) {\n  const lookupProperty = container.lookupProperty;\n  return (0,_internal_wrapHelper__WEBPACK_IMPORTED_MODULE_4__.wrapHelper)(helper, options => {\n    return _utils__WEBPACK_IMPORTED_MODULE_0__.extend({ lookupProperty }, options);\n  });\n}\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/runtime.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/safe-string.js":
/*!***************************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/safe-string.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// Build out our basic SafeString type\nfunction SafeString(string) {\n  this.string = string;\n}\n\nSafeString.prototype.toString = SafeString.prototype.toHTML = function() {\n  return '' + this.string;\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SafeString);\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/safe-string.js?");

/***/ }),

/***/ "./node_modules/handlebars/lib/handlebars/utils.js":
/*!*********************************************************!*\
  !*** ./node_modules/handlebars/lib/handlebars/utils.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"appendContextPath\": () => (/* binding */ appendContextPath),\n/* harmony export */   \"blockParams\": () => (/* binding */ blockParams),\n/* harmony export */   \"createFrame\": () => (/* binding */ createFrame),\n/* harmony export */   \"escapeExpression\": () => (/* binding */ escapeExpression),\n/* harmony export */   \"extend\": () => (/* binding */ extend),\n/* harmony export */   \"indexOf\": () => (/* binding */ indexOf),\n/* harmony export */   \"isArray\": () => (/* binding */ isArray),\n/* harmony export */   \"isEmpty\": () => (/* binding */ isEmpty),\n/* harmony export */   \"isFunction\": () => (/* binding */ isFunction),\n/* harmony export */   \"toString\": () => (/* binding */ toString)\n/* harmony export */ });\nconst escape = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '`': '&#x60;',\n  '=': '&#x3D;'\n};\n\nconst badChars = /[&<>\"'`=]/g,\n  possible = /[&<>\"'`=]/;\n\nfunction escapeChar(chr) {\n  return escape[chr];\n}\n\nfunction extend(obj /* , ...source */) {\n  for (let i = 1; i < arguments.length; i++) {\n    for (let key in arguments[i]) {\n      if (Object.prototype.hasOwnProperty.call(arguments[i], key)) {\n        obj[key] = arguments[i][key];\n      }\n    }\n  }\n\n  return obj;\n}\n\nlet toString = Object.prototype.toString;\n\n// Sourced from lodash\n// https://github.com/bestiejs/lodash/blob/master/LICENSE.txt\n/* eslint-disable func-style */\nlet isFunction = function(value) {\n  return typeof value === 'function';\n};\n// fallback for older versions of Chrome and Safari\n/* istanbul ignore next */\nif (isFunction(/x/)) {\n  isFunction = function(value) {\n    return (\n      typeof value === 'function' &&\n      toString.call(value) === '[object Function]'\n    );\n  };\n}\n\n/* eslint-enable func-style */\n\n/* istanbul ignore next */\nconst isArray =\n  Array.isArray ||\n  function(value) {\n    return value && typeof value === 'object'\n      ? toString.call(value) === '[object Array]'\n      : false;\n  };\n\n// Older IE versions do not directly support indexOf so we must implement our own, sadly.\nfunction indexOf(array, value) {\n  for (let i = 0, len = array.length; i < len; i++) {\n    if (array[i] === value) {\n      return i;\n    }\n  }\n  return -1;\n}\n\nfunction escapeExpression(string) {\n  if (typeof string !== 'string') {\n    // don't escape SafeStrings, since they're already safe\n    if (string && string.toHTML) {\n      return string.toHTML();\n    } else if (string == null) {\n      return '';\n    } else if (!string) {\n      return string + '';\n    }\n\n    // Force a string conversion as this will be done by the append regardless and\n    // the regex test will do this transparently behind the scenes, causing issues if\n    // an object's to string has escaped characters in it.\n    string = '' + string;\n  }\n\n  if (!possible.test(string)) {\n    return string;\n  }\n  return string.replace(badChars, escapeChar);\n}\n\nfunction isEmpty(value) {\n  if (!value && value !== 0) {\n    return true;\n  } else if (isArray(value) && value.length === 0) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction createFrame(object) {\n  let frame = extend({}, object);\n  frame._parent = object;\n  return frame;\n}\n\nfunction blockParams(params, ids) {\n  params.path = ids;\n  return params;\n}\n\nfunction appendContextPath(contextPath, id) {\n  return (contextPath ? contextPath + '.' : '') + id;\n}\n\n\n//# sourceURL=webpack://playground/./node_modules/handlebars/lib/handlebars/utils.js?");

/***/ }),

/***/ "./node_modules/jszip/dist/jszip.min.js":
/*!**********************************************!*\
  !*** ./node_modules/jszip/dist/jszip.min.js ***!
  \**********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/*!\n\nJSZip v3.10.1 - A JavaScript class for generating and reading zip files\n<http://stuartk.com/jszip>\n\n(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>\nDual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.\n\nJSZip uses the library pako released under the MIT license :\nhttps://github.com/nodeca/pako/blob/main/LICENSE\n*/\n\n!function(e){if(true)module.exports=e();else {}}(function(){return function s(a,o,h){function u(r,e){if(!o[r]){if(!a[r]){var t=undefined;if(!e&&t)return require(r,!0);if(l)return l(r,!0);var n=new Error(\"Cannot find module '\"+r+\"'\");throw n.code=\"MODULE_NOT_FOUND\",n}var i=o[r]={exports:{}};a[r][0].call(i.exports,function(e){var t=a[r][1][e];return u(t||e)},i,i.exports,s,a,o,h)}return o[r].exports}for(var l=undefined,e=0;e<h.length;e++)u(h[e]);return u}({1:[function(e,t,r){\"use strict\";var d=e(\"./utils\"),c=e(\"./support\"),p=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";r.encode=function(e){for(var t,r,n,i,s,a,o,h=[],u=0,l=e.length,f=l,c=\"string\"!==d.getTypeOf(e);u<e.length;)f=l-u,n=c?(t=e[u++],r=u<l?e[u++]:0,u<l?e[u++]:0):(t=e.charCodeAt(u++),r=u<l?e.charCodeAt(u++):0,u<l?e.charCodeAt(u++):0),i=t>>2,s=(3&t)<<4|r>>4,a=1<f?(15&r)<<2|n>>6:64,o=2<f?63&n:64,h.push(p.charAt(i)+p.charAt(s)+p.charAt(a)+p.charAt(o));return h.join(\"\")},r.decode=function(e){var t,r,n,i,s,a,o=0,h=0,u=\"data:\";if(e.substr(0,u.length)===u)throw new Error(\"Invalid base64 input, it looks like a data url.\");var l,f=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,\"\")).length/4;if(e.charAt(e.length-1)===p.charAt(64)&&f--,e.charAt(e.length-2)===p.charAt(64)&&f--,f%1!=0)throw new Error(\"Invalid base64 input, bad content length.\");for(l=c.uint8array?new Uint8Array(0|f):new Array(0|f);o<e.length;)t=p.indexOf(e.charAt(o++))<<2|(i=p.indexOf(e.charAt(o++)))>>4,r=(15&i)<<4|(s=p.indexOf(e.charAt(o++)))>>2,n=(3&s)<<6|(a=p.indexOf(e.charAt(o++))),l[h++]=t,64!==s&&(l[h++]=r),64!==a&&(l[h++]=n);return l}},{\"./support\":30,\"./utils\":32}],2:[function(e,t,r){\"use strict\";var n=e(\"./external\"),i=e(\"./stream/DataWorker\"),s=e(\"./stream/Crc32Probe\"),a=e(\"./stream/DataLengthProbe\");function o(e,t,r,n,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=r,this.compression=n,this.compressedContent=i}o.prototype={getContentWorker:function(){var e=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a(\"data_length\")),t=this;return e.on(\"end\",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error(\"Bug : uncompressed data size mismatch\")}),e},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo(\"compressedSize\",this.compressedSize).withStreamInfo(\"uncompressedSize\",this.uncompressedSize).withStreamInfo(\"crc32\",this.crc32).withStreamInfo(\"compression\",this.compression)}},o.createWorkerFrom=function(e,t,r){return e.pipe(new s).pipe(new a(\"uncompressedSize\")).pipe(t.compressWorker(r)).pipe(new a(\"compressedSize\")).withStreamInfo(\"compression\",t)},t.exports=o},{\"./external\":6,\"./stream/Crc32Probe\":25,\"./stream/DataLengthProbe\":26,\"./stream/DataWorker\":27}],3:[function(e,t,r){\"use strict\";var n=e(\"./stream/GenericWorker\");r.STORE={magic:\"\\0\\0\",compressWorker:function(){return new n(\"STORE compression\")},uncompressWorker:function(){return new n(\"STORE decompression\")}},r.DEFLATE=e(\"./flate\")},{\"./flate\":7,\"./stream/GenericWorker\":28}],4:[function(e,t,r){\"use strict\";var n=e(\"./utils\");var o=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?\"string\"!==n.getTypeOf(e)?function(e,t,r,n){var i=o,s=n+r;e^=-1;for(var a=n;a<s;a++)e=e>>>8^i[255&(e^t[a])];return-1^e}(0|t,e,e.length,0):function(e,t,r,n){var i=o,s=n+r;e^=-1;for(var a=n;a<s;a++)e=e>>>8^i[255&(e^t.charCodeAt(a))];return-1^e}(0|t,e,e.length,0):0}},{\"./utils\":32}],5:[function(e,t,r){\"use strict\";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,t,r){\"use strict\";var n=null;n=\"undefined\"!=typeof Promise?Promise:e(\"lie\"),t.exports={Promise:n}},{lie:37}],7:[function(e,t,r){\"use strict\";var n=\"undefined\"!=typeof Uint8Array&&\"undefined\"!=typeof Uint16Array&&\"undefined\"!=typeof Uint32Array,i=e(\"pako\"),s=e(\"./utils\"),a=e(\"./stream/GenericWorker\"),o=n?\"uint8array\":\"array\";function h(e,t){a.call(this,\"FlateWorker/\"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}r.magic=\"\\b\\0\",s.inherits(h,a),h.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(o,e.data),!1)},h.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},r.compressWorker=function(e){return new h(\"Deflate\",e)},r.uncompressWorker=function(){return new h(\"Inflate\",{})}},{\"./stream/GenericWorker\":28,\"./utils\":32,pako:38}],8:[function(e,t,r){\"use strict\";function A(e,t){var r,n=\"\";for(r=0;r<t;r++)n+=String.fromCharCode(255&e),e>>>=8;return n}function n(e,t,r,n,i,s){var a,o,h=e.file,u=e.compression,l=s!==O.utf8encode,f=I.transformTo(\"string\",s(h.name)),c=I.transformTo(\"string\",O.utf8encode(h.name)),d=h.comment,p=I.transformTo(\"string\",s(d)),m=I.transformTo(\"string\",O.utf8encode(d)),_=c.length!==h.name.length,g=m.length!==d.length,b=\"\",v=\"\",y=\"\",w=h.dir,k=h.date,x={crc32:0,compressedSize:0,uncompressedSize:0};t&&!r||(x.crc32=e.crc32,x.compressedSize=e.compressedSize,x.uncompressedSize=e.uncompressedSize);var S=0;t&&(S|=8),l||!_&&!g||(S|=2048);var z=0,C=0;w&&(z|=16),\"UNIX\"===i?(C=798,z|=function(e,t){var r=e;return e||(r=t?16893:33204),(65535&r)<<16}(h.unixPermissions,w)):(C=20,z|=function(e){return 63&(e||0)}(h.dosPermissions)),a=k.getUTCHours(),a<<=6,a|=k.getUTCMinutes(),a<<=5,a|=k.getUTCSeconds()/2,o=k.getUTCFullYear()-1980,o<<=4,o|=k.getUTCMonth()+1,o<<=5,o|=k.getUTCDate(),_&&(v=A(1,1)+A(B(f),4)+c,b+=\"up\"+A(v.length,2)+v),g&&(y=A(1,1)+A(B(p),4)+m,b+=\"uc\"+A(y.length,2)+y);var E=\"\";return E+=\"\\n\\0\",E+=A(S,2),E+=u.magic,E+=A(a,2),E+=A(o,2),E+=A(x.crc32,4),E+=A(x.compressedSize,4),E+=A(x.uncompressedSize,4),E+=A(f.length,2),E+=A(b.length,2),{fileRecord:R.LOCAL_FILE_HEADER+E+f+b,dirRecord:R.CENTRAL_FILE_HEADER+A(C,2)+E+A(p.length,2)+\"\\0\\0\\0\\0\"+A(z,4)+A(n,4)+f+b+p}}var I=e(\"../utils\"),i=e(\"../stream/GenericWorker\"),O=e(\"../utf8\"),B=e(\"../crc32\"),R=e(\"../signature\");function s(e,t,r,n){i.call(this,\"ZipFileWorker\"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}I.inherits(s,i),s.prototype.push=function(e){var t=e.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,i.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:r?(t+100*(r-n-1))/r:100}}))},s.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var r=n(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},s.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,r=n(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),t)this.push({data:function(e){return R.DATA_DESCRIPTOR+A(e.crc32,4)+A(e.compressedSize,4)+A(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},s.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var r=this.bytesWritten-e,n=function(e,t,r,n,i){var s=I.transformTo(\"string\",i(n));return R.CENTRAL_DIRECTORY_END+\"\\0\\0\\0\\0\"+A(e,2)+A(e,2)+A(t,4)+A(r,4)+A(s.length,2)+s}(this.dirRecords.length,r,e,this.zipComment,this.encodeFileName);this.push({data:n,meta:{percent:100}})},s.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},s.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on(\"data\",function(e){t.processChunk(e)}),e.on(\"end\",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on(\"error\",function(e){t.error(e)}),this},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},s.prototype.error=function(e){var t=this._sources;if(!i.prototype.error.call(this,e))return!1;for(var r=0;r<t.length;r++)try{t[r].error(e)}catch(e){}return!0},s.prototype.lock=function(){i.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=s},{\"../crc32\":4,\"../signature\":23,\"../stream/GenericWorker\":28,\"../utf8\":31,\"../utils\":32}],9:[function(e,t,r){\"use strict\";var u=e(\"../compressions\"),n=e(\"./ZipFileWorker\");r.generateWorker=function(e,a,t){var o=new n(a.streamFiles,t,a.platform,a.encodeFileName),h=0;try{e.forEach(function(e,t){h++;var r=function(e,t){var r=e||t,n=u[r];if(!n)throw new Error(r+\" is not a valid compression method !\");return n}(t.options.compression,a.compression),n=t.options.compressionOptions||a.compressionOptions||{},i=t.dir,s=t.date;t._compressWorker(r,n).withStreamInfo(\"file\",{name:e,dir:i,date:s,comment:t.comment||\"\",unixPermissions:t.unixPermissions,dosPermissions:t.dosPermissions}).pipe(o)}),o.entriesCount=h}catch(e){o.error(e)}return o}},{\"../compressions\":3,\"./ZipFileWorker\":8}],10:[function(e,t,r){\"use strict\";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error(\"The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.\");this.files=Object.create(null),this.comment=null,this.root=\"\",this.clone=function(){var e=new n;for(var t in this)\"function\"!=typeof this[t]&&(e[t]=this[t]);return e}}(n.prototype=e(\"./object\")).loadAsync=e(\"./load\"),n.support=e(\"./support\"),n.defaults=e(\"./defaults\"),n.version=\"3.10.1\",n.loadAsync=function(e,t){return(new n).loadAsync(e,t)},n.external=e(\"./external\"),t.exports=n},{\"./defaults\":5,\"./external\":6,\"./load\":11,\"./object\":15,\"./support\":30}],11:[function(e,t,r){\"use strict\";var u=e(\"./utils\"),i=e(\"./external\"),n=e(\"./utf8\"),s=e(\"./zipEntries\"),a=e(\"./stream/Crc32Probe\"),l=e(\"./nodejsUtils\");function f(n){return new i.Promise(function(e,t){var r=n.decompressed.getContentWorker().pipe(new a);r.on(\"error\",function(e){t(e)}).on(\"end\",function(){r.streamInfo.crc32!==n.decompressed.crc32?t(new Error(\"Corrupted zip : CRC32 mismatch\")):e()}).resume()})}t.exports=function(e,o){var h=this;return o=u.extend(o||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:n.utf8decode}),l.isNode&&l.isStream(e)?i.Promise.reject(new Error(\"JSZip can't accept a stream when loading a zip file.\")):u.prepareContent(\"the loaded zip file\",e,!0,o.optimizedBinaryString,o.base64).then(function(e){var t=new s(o);return t.load(e),t}).then(function(e){var t=[i.Promise.resolve(e)],r=e.files;if(o.checkCRC32)for(var n=0;n<r.length;n++)t.push(f(r[n]));return i.Promise.all(t)}).then(function(e){for(var t=e.shift(),r=t.files,n=0;n<r.length;n++){var i=r[n],s=i.fileNameStr,a=u.resolve(i.fileNameStr);h.file(a,i.decompressed,{binary:!0,optimizedBinaryString:!0,date:i.date,dir:i.dir,comment:i.fileCommentStr.length?i.fileCommentStr:null,unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions,createFolders:o.createFolders}),i.dir||(h.file(a).unsafeOriginalName=s)}return t.zipComment.length&&(h.comment=t.zipComment),h})}},{\"./external\":6,\"./nodejsUtils\":14,\"./stream/Crc32Probe\":25,\"./utf8\":31,\"./utils\":32,\"./zipEntries\":33}],12:[function(e,t,r){\"use strict\";var n=e(\"../utils\"),i=e(\"../stream/GenericWorker\");function s(e,t){i.call(this,\"Nodejs stream input adapter for \"+e),this._upstreamEnded=!1,this._bindStream(t)}n.inherits(s,i),s.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on(\"data\",function(e){t.push({data:e,meta:{percent:0}})}).on(\"error\",function(e){t.isPaused?this.generatedError=e:t.error(e)}).on(\"end\",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},s.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=s},{\"../stream/GenericWorker\":28,\"../utils\":32}],13:[function(e,t,r){\"use strict\";var i=e(\"readable-stream\").Readable;function n(e,t,r){i.call(this,t),this._helper=e;var n=this;e.on(\"data\",function(e,t){n.push(e)||n._helper.pause(),r&&r(t)}).on(\"error\",function(e){n.emit(\"error\",e)}).on(\"end\",function(){n.push(null)})}e(\"../utils\").inherits(n,i),n.prototype._read=function(){this._helper.resume()},t.exports=n},{\"../utils\":32,\"readable-stream\":16}],14:[function(e,t,r){\"use strict\";t.exports={isNode:\"undefined\"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if(\"number\"==typeof e)throw new Error('The \"data\" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&\"function\"==typeof e.on&&\"function\"==typeof e.pause&&\"function\"==typeof e.resume}}},{}],15:[function(e,t,r){\"use strict\";function s(e,t,r){var n,i=u.getTypeOf(t),s=u.extend(r||{},f);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),\"string\"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=g(e)),s.createFolders&&(n=_(e))&&b.call(this,n,!0);var a=\"string\"===i&&!1===s.binary&&!1===s.base64;r&&void 0!==r.binary||(s.binary=!a),(t instanceof c&&0===t.uncompressedSize||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t=\"\",s.compression=\"STORE\",i=\"string\");var o=null;o=t instanceof c||t instanceof l?t:p.isNode&&p.isStream(t)?new m(e,t):u.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var h=new d(e,o,s);this.files[e]=h}var i=e(\"./utf8\"),u=e(\"./utils\"),l=e(\"./stream/GenericWorker\"),a=e(\"./stream/StreamHelper\"),f=e(\"./defaults\"),c=e(\"./compressedObject\"),d=e(\"./zipObject\"),o=e(\"./generate\"),p=e(\"./nodejsUtils\"),m=e(\"./nodejs/NodejsStreamInputAdapter\"),_=function(e){\"/\"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf(\"/\");return 0<t?e.substring(0,t):\"\"},g=function(e){return\"/\"!==e.slice(-1)&&(e+=\"/\"),e},b=function(e,t){return t=void 0!==t?t:f.createFolders,e=g(e),this.files[e]||s.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function h(e){return\"[object RegExp]\"===Object.prototype.toString.call(e)}var n={load:function(){throw new Error(\"This method has been removed in JSZip 3.0, please check the upgrade guide.\")},forEach:function(e){var t,r,n;for(t in this.files)n=this.files[t],(r=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(r,n)},filter:function(r){var n=[];return this.forEach(function(e,t){r(e,t)&&n.push(t)}),n},file:function(e,t,r){if(1!==arguments.length)return e=this.root+e,s.call(this,e,t,r),this;if(h(e)){var n=e;return this.filter(function(e,t){return!t.dir&&n.test(e)})}var i=this.files[this.root+e];return i&&!i.dir?i:null},folder:function(r){if(!r)return this;if(h(r))return this.filter(function(e,t){return t.dir&&r.test(e)});var e=this.root+r,t=b.call(this,e),n=this.clone();return n.root=t.name,n},remove:function(r){r=this.root+r;var e=this.files[r];if(e||(\"/\"!==r.slice(-1)&&(r+=\"/\"),e=this.files[r]),e&&!e.dir)delete this.files[r];else for(var t=this.filter(function(e,t){return t.name.slice(0,r.length)===r}),n=0;n<t.length;n++)delete this.files[t[n].name];return this},generate:function(){throw new Error(\"This method has been removed in JSZip 3.0, please check the upgrade guide.\")},generateInternalStream:function(e){var t,r={};try{if((r=u.extend(e||{},{streamFiles:!1,compression:\"STORE\",compressionOptions:null,type:\"\",platform:\"DOS\",comment:null,mimeType:\"application/zip\",encodeFileName:i.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),\"binarystring\"===r.type&&(r.type=\"string\"),!r.type)throw new Error(\"No output type specified.\");u.checkSupport(r.type),\"darwin\"!==r.platform&&\"freebsd\"!==r.platform&&\"linux\"!==r.platform&&\"sunos\"!==r.platform||(r.platform=\"UNIX\"),\"win32\"===r.platform&&(r.platform=\"DOS\");var n=r.comment||this.comment||\"\";t=o.generateWorker(this,r,n)}catch(e){(t=new l(\"error\")).error(e)}return new a(t,r.type||\"string\",r.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type=\"nodebuffer\"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=n},{\"./compressedObject\":2,\"./defaults\":5,\"./generate\":9,\"./nodejs/NodejsStreamInputAdapter\":12,\"./nodejsUtils\":14,\"./stream/GenericWorker\":28,\"./stream/StreamHelper\":29,\"./utf8\":31,\"./utils\":32,\"./zipObject\":35}],16:[function(e,t,r){\"use strict\";t.exports=e(\"stream\")},{stream:void 0}],17:[function(e,t,r){\"use strict\";var n=e(\"./DataReader\");function i(e){n.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e(\"../utils\").inherits(i,n),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===t&&this.data[s+1]===r&&this.data[s+2]===n&&this.data[s+3]===i)return s-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),s=this.readData(4);return t===s[0]&&r===s[1]&&n===s[2]&&i===s[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{\"../utils\":32,\"./DataReader\":18}],18:[function(e,t,r){\"use strict\";var n=e(\"../utils\");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error(\"End of data reached (data length = \"+this.length+\", asked index = \"+e+\"). Corrupted zip ?\")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return n.transformTo(\"string\",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{\"../utils\":32}],19:[function(e,t,r){\"use strict\";var n=e(\"./Uint8ArrayReader\");function i(e){n.call(this,e)}e(\"../utils\").inherits(i,n),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{\"../utils\":32,\"./Uint8ArrayReader\":21}],20:[function(e,t,r){\"use strict\";var n=e(\"./DataReader\");function i(e){n.call(this,e)}e(\"../utils\").inherits(i,n),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{\"../utils\":32,\"./DataReader\":18}],21:[function(e,t,r){\"use strict\";var n=e(\"./ArrayReader\");function i(e){n.call(this,e)}e(\"../utils\").inherits(i,n),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{\"../utils\":32,\"./ArrayReader\":17}],22:[function(e,t,r){\"use strict\";var n=e(\"../utils\"),i=e(\"../support\"),s=e(\"./ArrayReader\"),a=e(\"./StringReader\"),o=e(\"./NodeBufferReader\"),h=e(\"./Uint8ArrayReader\");t.exports=function(e){var t=n.getTypeOf(e);return n.checkSupport(t),\"string\"!==t||i.uint8array?\"nodebuffer\"===t?new o(e):i.uint8array?new h(n.transformTo(\"uint8array\",e)):new s(n.transformTo(\"array\",e)):new a(e)}},{\"../support\":30,\"../utils\":32,\"./ArrayReader\":17,\"./NodeBufferReader\":19,\"./StringReader\":20,\"./Uint8ArrayReader\":21}],23:[function(e,t,r){\"use strict\";r.LOCAL_FILE_HEADER=\"PK\u0003\u0004\",r.CENTRAL_FILE_HEADER=\"PK\u0001\u0002\",r.CENTRAL_DIRECTORY_END=\"PK\u0005\u0006\",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR=\"PK\u0006\u0007\",r.ZIP64_CENTRAL_DIRECTORY_END=\"PK\u0006\u0006\",r.DATA_DESCRIPTOR=\"PK\u0007\\b\"},{}],24:[function(e,t,r){\"use strict\";var n=e(\"./GenericWorker\"),i=e(\"../utils\");function s(e){n.call(this,\"ConvertWorker to \"+e),this.destType=e}i.inherits(s,n),s.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=s},{\"../utils\":32,\"./GenericWorker\":28}],25:[function(e,t,r){\"use strict\";var n=e(\"./GenericWorker\"),i=e(\"../crc32\");function s(){n.call(this,\"Crc32Probe\"),this.withStreamInfo(\"crc32\",0)}e(\"../utils\").inherits(s,n),s.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=s},{\"../crc32\":4,\"../utils\":32,\"./GenericWorker\":28}],26:[function(e,t,r){\"use strict\";var n=e(\"../utils\"),i=e(\"./GenericWorker\");function s(e){i.call(this,\"DataLengthProbe for \"+e),this.propName=e,this.withStreamInfo(e,0)}n.inherits(s,i),s.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=s},{\"../utils\":32,\"./GenericWorker\":28}],27:[function(e,t,r){\"use strict\";var n=e(\"../utils\"),i=e(\"./GenericWorker\");function s(e){i.call(this,\"DataWorker\");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type=\"\",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=n.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}n.inherits(s,i),s.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case\"string\":e=this.data.substring(this.index,t);break;case\"uint8array\":e=this.data.subarray(this.index,t);break;case\"array\":case\"nodebuffer\":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=s},{\"../utils\":32,\"./GenericWorker\":28}],28:[function(e,t,r){\"use strict\";function n(e){this.name=e||\"default\",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(e){this.emit(\"data\",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit(\"end\"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit(\"error\",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit(\"error\",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var r=0;r<this._listeners[e].length;r++)this._listeners[e][r].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error(\"The stream '\"+this+\"' has already been used.\");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on(\"data\",function(e){t.processChunk(e)}),e.on(\"end\",function(){t.end()}),e.on(\"error\",function(e){t.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error(\"The stream '\"+this+\"' has already been used.\");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e=\"Worker \"+this.name;return this.previous?this.previous+\" -> \"+e:e}},t.exports=n},{}],29:[function(e,t,r){\"use strict\";var h=e(\"../utils\"),i=e(\"./ConvertWorker\"),s=e(\"./GenericWorker\"),u=e(\"../base64\"),n=e(\"../support\"),a=e(\"../external\"),o=null;if(n.nodestream)try{o=e(\"../nodejs/NodejsStreamOutputAdapter\")}catch(e){}function l(e,o){return new a.Promise(function(t,r){var n=[],i=e._internalType,s=e._outputType,a=e._mimeType;e.on(\"data\",function(e,t){n.push(e),o&&o(t)}).on(\"error\",function(e){n=[],r(e)}).on(\"end\",function(){try{var e=function(e,t,r){switch(e){case\"blob\":return h.newBlob(h.transformTo(\"arraybuffer\",t),r);case\"base64\":return u.encode(t);default:return h.transformTo(e,t)}}(s,function(e,t){var r,n=0,i=null,s=0;for(r=0;r<t.length;r++)s+=t[r].length;switch(e){case\"string\":return t.join(\"\");case\"array\":return Array.prototype.concat.apply([],t);case\"uint8array\":for(i=new Uint8Array(s),r=0;r<t.length;r++)i.set(t[r],n),n+=t[r].length;return i;case\"nodebuffer\":return Buffer.concat(t);default:throw new Error(\"concat : unsupported type '\"+e+\"'\")}}(i,n),a);t(e)}catch(e){r(e)}n=[]}).resume()})}function f(e,t,r){var n=t;switch(t){case\"blob\":case\"arraybuffer\":n=\"uint8array\";break;case\"base64\":n=\"string\"}try{this._internalType=n,this._outputType=t,this._mimeType=r,h.checkSupport(n),this._worker=e.pipe(new i(n)),e.lock()}catch(e){this._worker=new s(\"error\"),this._worker.error(e)}}f.prototype={accumulate:function(e){return l(this,e)},on:function(e,t){var r=this;return\"data\"===e?this._worker.on(e,function(e){t.call(r,e.data,e.meta)}):this._worker.on(e,function(){h.delay(t,arguments,r)}),this},resume:function(){return h.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(h.checkSupport(\"nodestream\"),\"nodebuffer\"!==this._outputType)throw new Error(this._outputType+\" is not supported by this method\");return new o(this,{objectMode:\"nodebuffer\"!==this._outputType},e)}},t.exports=f},{\"../base64\":1,\"../external\":6,\"../nodejs/NodejsStreamOutputAdapter\":13,\"../support\":30,\"../utils\":32,\"./ConvertWorker\":24,\"./GenericWorker\":28}],30:[function(e,t,r){\"use strict\";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=\"undefined\"!=typeof ArrayBuffer&&\"undefined\"!=typeof Uint8Array,r.nodebuffer=\"undefined\"!=typeof Buffer,r.uint8array=\"undefined\"!=typeof Uint8Array,\"undefined\"==typeof ArrayBuffer)r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=0===new Blob([n],{type:\"application/zip\"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),r.blob=0===i.getBlob(\"application/zip\").size}catch(e){r.blob=!1}}}try{r.nodestream=!!e(\"readable-stream\").Readable}catch(e){r.nodestream=!1}},{\"readable-stream\":16}],31:[function(e,t,s){\"use strict\";for(var o=e(\"./utils\"),h=e(\"./support\"),r=e(\"./nodejsUtils\"),n=e(\"./stream/GenericWorker\"),u=new Array(256),i=0;i<256;i++)u[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;u[254]=u[254]=1;function a(){n.call(this,\"utf-8 decode\"),this.leftOver=null}function l(){n.call(this,\"utf-8 encode\")}s.utf8encode=function(e){return h.nodebuffer?r.newBufferFrom(e,\"utf-8\"):function(e){var t,r,n,i,s,a=e.length,o=0;for(i=0;i<a;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=h.uint8array?new Uint8Array(o):new Array(o),i=s=0;s<o;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),r<128?t[s++]=r:(r<2048?t[s++]=192|r>>>6:(r<65536?t[s++]=224|r>>>12:(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63),t[s++]=128|r>>>6&63),t[s++]=128|63&r);return t}(e)},s.utf8decode=function(e){return h.nodebuffer?o.transformTo(\"nodebuffer\",e).toString(\"utf-8\"):function(e){var t,r,n,i,s=e.length,a=new Array(2*s);for(t=r=0;t<s;)if((n=e[t++])<128)a[r++]=n;else if(4<(i=u[n]))a[r++]=65533,t+=i-1;else{for(n&=2===i?31:3===i?15:7;1<i&&t<s;)n=n<<6|63&e[t++],i--;1<i?a[r++]=65533:n<65536?a[r++]=n:(n-=65536,a[r++]=55296|n>>10&1023,a[r++]=56320|1023&n)}return a.length!==r&&(a.subarray?a=a.subarray(0,r):a.length=r),o.applyFromCharCode(a)}(e=o.transformTo(h.uint8array?\"uint8array\":\"array\",e))},o.inherits(a,n),a.prototype.processChunk=function(e){var t=o.transformTo(h.uint8array?\"uint8array\":\"array\",e.data);if(this.leftOver&&this.leftOver.length){if(h.uint8array){var r=t;(t=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),t.set(r,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var n=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0?t:0===r?t:r+u[e[r]]>t?r:t}(t),i=t;n!==t.length&&(h.uint8array?(i=t.subarray(0,n),this.leftOver=t.subarray(n,t.length)):(i=t.slice(0,n),this.leftOver=t.slice(n,t.length))),this.push({data:s.utf8decode(i),meta:e.meta})},a.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=a,o.inherits(l,n),l.prototype.processChunk=function(e){this.push({data:s.utf8encode(e.data),meta:e.meta})},s.Utf8EncodeWorker=l},{\"./nodejsUtils\":14,\"./stream/GenericWorker\":28,\"./support\":30,\"./utils\":32}],32:[function(e,t,a){\"use strict\";var o=e(\"./support\"),h=e(\"./base64\"),r=e(\"./nodejsUtils\"),u=e(\"./external\");function n(e){return e}function l(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}e(\"setimmediate\"),a.newBlob=function(t,r){a.checkSupport(\"blob\");try{return new Blob([t],{type:r})}catch(e){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(t),n.getBlob(r)}catch(e){throw new Error(\"Bug : can't construct the Blob.\")}}};var i={stringifyByChunk:function(e,t,r){var n=[],i=0,s=e.length;if(s<=r)return String.fromCharCode.apply(null,e);for(;i<s;)\"array\"===t||\"nodebuffer\"===t?n.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+r,s)))):n.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+r,s)))),i+=r;return n.join(\"\")},stringifyByChar:function(e){for(var t=\"\",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&1===String.fromCharCode.apply(null,r.allocBuffer(1)).length}catch(e){return!1}}()}};function s(e){var t=65536,r=a.getTypeOf(e),n=!0;if(\"uint8array\"===r?n=i.applyCanBeUsed.uint8array:\"nodebuffer\"===r&&(n=i.applyCanBeUsed.nodebuffer),n)for(;1<t;)try{return i.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return i.stringifyByChar(e)}function f(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}a.applyFromCharCode=s;var c={};c.string={string:n,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return c.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,r.allocBuffer(e.length))}},c.array={string:s,array:n,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return r.newBufferFrom(e)}},c.arraybuffer={string:function(e){return s(new Uint8Array(e))},array:function(e){return f(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:n,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return r.newBufferFrom(new Uint8Array(e))}},c.uint8array={string:s,array:function(e){return f(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:n,nodebuffer:function(e){return r.newBufferFrom(e)}},c.nodebuffer={string:s,array:function(e){return f(e,new Array(e.length))},arraybuffer:function(e){return c.nodebuffer.uint8array(e).buffer},uint8array:function(e){return f(e,new Uint8Array(e.length))},nodebuffer:n},a.transformTo=function(e,t){if(t=t||\"\",!e)return t;a.checkSupport(e);var r=a.getTypeOf(t);return c[r][e](t)},a.resolve=function(e){for(var t=e.split(\"/\"),r=[],n=0;n<t.length;n++){var i=t[n];\".\"===i||\"\"===i&&0!==n&&n!==t.length-1||(\"..\"===i?r.pop():r.push(i))}return r.join(\"/\")},a.getTypeOf=function(e){return\"string\"==typeof e?\"string\":\"[object Array]\"===Object.prototype.toString.call(e)?\"array\":o.nodebuffer&&r.isBuffer(e)?\"nodebuffer\":o.uint8array&&e instanceof Uint8Array?\"uint8array\":o.arraybuffer&&e instanceof ArrayBuffer?\"arraybuffer\":void 0},a.checkSupport=function(e){if(!o[e.toLowerCase()])throw new Error(e+\" is not supported by this platform\")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(e){var t,r,n=\"\";for(r=0;r<(e||\"\").length;r++)n+=\"\\\\x\"+((t=e.charCodeAt(r))<16?\"0\":\"\")+t.toString(16).toUpperCase();return n},a.delay=function(e,t,r){setImmediate(function(){e.apply(r||null,t||[])})},a.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.prototype=new r},a.extend=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===r[t]&&(r[t]=arguments[e][t]);return r},a.prepareContent=function(r,e,n,i,s){return u.Promise.resolve(e).then(function(n){return o.blob&&(n instanceof Blob||-1!==[\"[object File]\",\"[object Blob]\"].indexOf(Object.prototype.toString.call(n)))&&\"undefined\"!=typeof FileReader?new u.Promise(function(t,r){var e=new FileReader;e.onload=function(e){t(e.target.result)},e.onerror=function(e){r(e.target.error)},e.readAsArrayBuffer(n)}):n}).then(function(e){var t=a.getTypeOf(e);return t?(\"arraybuffer\"===t?e=a.transformTo(\"uint8array\",e):\"string\"===t&&(s?e=h.decode(e):n&&!0!==i&&(e=function(e){return l(e,o.uint8array?new Uint8Array(e.length):new Array(e.length))}(e))),e):u.Promise.reject(new Error(\"Can't read the data of '\"+r+\"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?\"))})}},{\"./base64\":1,\"./external\":6,\"./nodejsUtils\":14,\"./support\":30,setimmediate:54}],33:[function(e,t,r){\"use strict\";var n=e(\"./reader/readerFor\"),i=e(\"./utils\"),s=e(\"./signature\"),a=e(\"./zipEntry\"),o=e(\"./support\");function h(e){this.files=[],this.loadOptions=e}h.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error(\"Corrupted zip or bug: unexpected signature (\"+i.pretty(t)+\", expected \"+i.pretty(e)+\")\")}},isSignature:function(e,t){var r=this.reader.index;this.reader.setIndex(e);var n=this.reader.readString(4)===t;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=o.uint8array?\"uint8array\":\"array\",r=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,n=this.zip64EndOfCentralSize-44;0<n;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error(\"Multi-volumes zip are not supported\")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(e=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error(\"Corrupted zip or bug: expected \"+this.centralDirRecords+\" records in central dir, got \"+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(e<0)throw!this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error(\"Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html\"):new Error(\"Corrupted zip: can't find end of central directory\");this.reader.setIndex(e);var t=e;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error(\"Corrupted zip: can't find the ZIP64 end of central directory locator\");if(this.reader.setIndex(e),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error(\"Corrupted zip: can't find the ZIP64 end of central directory\");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=t-r;if(0<n)this.isSignature(t,s.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error(\"Corrupted zip: missing \"+Math.abs(n)+\" bytes.\")},prepareReader:function(e){this.reader=n(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=h},{\"./reader/readerFor\":22,\"./signature\":23,\"./support\":30,\"./utils\":32,\"./zipEntry\":34}],34:[function(e,t,r){\"use strict\";var n=e(\"./reader/readerFor\"),s=e(\"./utils\"),i=e(\"./compressedObject\"),a=e(\"./crc32\"),o=e(\"./utf8\"),h=e(\"./compressions\"),u=e(\"./support\");function l(e,t){this.options=e,this.loadOptions=t}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error(\"Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)\");if(null===(t=function(e){for(var t in h)if(Object.prototype.hasOwnProperty.call(h,t)&&h[t].magic===e)return h[t];return null}(this.compressionMethod)))throw new Error(\"Corrupted zip : compression \"+s.pretty(this.compressionMethod)+\" unknown (inner file : \"+s.transformTo(\"string\",this.fileName)+\")\");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error(\"Encrypted zip are not supported\");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||\"/\"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=n(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,r,n,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),r=e.readInt(2),n=e.readData(r),this.extraFields[t]={id:t,length:r,value:n};e.setIndex(i)},handleUTF8:function(){var e=u.uint8array?\"uint8array\":\"array\";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var r=s.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var i=s.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=n(e.value);return 1!==t.readInt(1)?null:a(this.fileName)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=n(e.value);return 1!==t.readInt(1)?null:a(this.fileComment)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null}},t.exports=l},{\"./compressedObject\":2,\"./compressions\":3,\"./crc32\":4,\"./reader/readerFor\":22,\"./support\":30,\"./utf8\":31,\"./utils\":32}],35:[function(e,t,r){\"use strict\";function n(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var s=e(\"./stream/StreamHelper\"),i=e(\"./stream/DataWorker\"),a=e(\"./utf8\"),o=e(\"./compressedObject\"),h=e(\"./stream/GenericWorker\");n.prototype={internalStream:function(e){var t=null,r=\"string\";try{if(!e)throw new Error(\"No output type specified.\");var n=\"string\"===(r=e.toLowerCase())||\"text\"===r;\"binarystring\"!==r&&\"text\"!==r||(r=\"string\"),t=this._decompressWorker();var i=!this._dataBinary;i&&!n&&(t=t.pipe(new a.Utf8EncodeWorker)),!i&&n&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(e){(t=new h(\"error\")).error(e)}return new s(t,r,\"\")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||\"nodebuffer\").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof o&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new a.Utf8EncodeWorker)),o.createWorkerFrom(r,e,t)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof h?this._data:new i(this._data)}};for(var u=[\"asText\",\"asBinary\",\"asNodeBuffer\",\"asUint8Array\",\"asArrayBuffer\"],l=function(){throw new Error(\"This method has been removed in JSZip 3.0, please check the upgrade guide.\")},f=0;f<u.length;f++)n.prototype[u[f]]=l;t.exports=n},{\"./compressedObject\":2,\"./stream/DataWorker\":27,\"./stream/GenericWorker\":28,\"./stream/StreamHelper\":29,\"./utf8\":31}],36:[function(e,l,t){(function(t){\"use strict\";var r,n,e=t.MutationObserver||t.WebKitMutationObserver;if(e){var i=0,s=new e(u),a=t.document.createTextNode(\"\");s.observe(a,{characterData:!0}),r=function(){a.data=i=++i%2}}else if(t.setImmediate||void 0===t.MessageChannel)r=\"document\"in t&&\"onreadystatechange\"in t.document.createElement(\"script\")?function(){var e=t.document.createElement(\"script\");e.onreadystatechange=function(){u(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(u,0)};else{var o=new t.MessageChannel;o.port1.onmessage=u,r=function(){o.port2.postMessage(0)}}var h=[];function u(){var e,t;n=!0;for(var r=h.length;r;){for(t=h,h=[],e=-1;++e<r;)t[e]();r=h.length}n=!1}l.exports=function(e){1!==h.push(e)||n||r()}}).call(this,\"undefined\"!=typeof __webpack_require__.g?__webpack_require__.g:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{}],37:[function(e,t,r){\"use strict\";var i=e(\"immediate\");function u(){}var l={},s=[\"REJECTED\"],a=[\"FULFILLED\"],n=[\"PENDING\"];function o(e){if(\"function\"!=typeof e)throw new TypeError(\"resolver must be a function\");this.state=n,this.queue=[],this.outcome=void 0,e!==u&&d(this,e)}function h(e,t,r){this.promise=e,\"function\"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),\"function\"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(t,r,n){i(function(){var e;try{e=r(n)}catch(e){return l.reject(t,e)}e===t?l.reject(t,new TypeError(\"Cannot resolve promise with itself\")):l.resolve(t,e)})}function c(e){var t=e&&e.then;if(e&&(\"object\"==typeof e||\"function\"==typeof e)&&\"function\"==typeof t)return function(){t.apply(e,arguments)}}function d(t,e){var r=!1;function n(e){r||(r=!0,l.reject(t,e))}function i(e){r||(r=!0,l.resolve(t,e))}var s=p(function(){e(i,n)});\"error\"===s.status&&n(s.value)}function p(e,t){var r={};try{r.value=e(t),r.status=\"success\"}catch(e){r.status=\"error\",r.value=e}return r}(t.exports=o).prototype.finally=function(t){if(\"function\"!=typeof t)return this;var r=this.constructor;return this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})})},o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){if(\"function\"!=typeof e&&this.state===a||\"function\"!=typeof t&&this.state===s)return this;var r=new this.constructor(u);this.state!==n?f(r,this.state===a?e:t,this.outcome):this.queue.push(new h(r,e,t));return r},h.prototype.callFulfilled=function(e){l.resolve(this.promise,e)},h.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},h.prototype.callRejected=function(e){l.reject(this.promise,e)},h.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},l.resolve=function(e,t){var r=p(c,t);if(\"error\"===r.status)return l.reject(e,r.value);var n=r.value;if(n)d(e,n);else{e.state=a,e.outcome=t;for(var i=-1,s=e.queue.length;++i<s;)e.queue[i].callFulfilled(t)}return e},l.reject=function(e,t){e.state=s,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},o.resolve=function(e){if(e instanceof this)return e;return l.resolve(new this(u),e)},o.reject=function(e){var t=new this(u);return l.reject(t,e)},o.all=function(e){var r=this;if(\"[object Array]\"!==Object.prototype.toString.call(e))return this.reject(new TypeError(\"must be an array\"));var n=e.length,i=!1;if(!n)return this.resolve([]);var s=new Array(n),a=0,t=-1,o=new this(u);for(;++t<n;)h(e[t],t);return o;function h(e,t){r.resolve(e).then(function(e){s[t]=e,++a!==n||i||(i=!0,l.resolve(o,s))},function(e){i||(i=!0,l.reject(o,e))})}},o.race=function(e){var t=this;if(\"[object Array]\"!==Object.prototype.toString.call(e))return this.reject(new TypeError(\"must be an array\"));var r=e.length,n=!1;if(!r)return this.resolve([]);var i=-1,s=new this(u);for(;++i<r;)a=e[i],t.resolve(a).then(function(e){n||(n=!0,l.resolve(s,e))},function(e){n||(n=!0,l.reject(s,e))});var a;return s}},{immediate:36}],38:[function(e,t,r){\"use strict\";var n={};(0,e(\"./lib/utils/common\").assign)(n,e(\"./lib/deflate\"),e(\"./lib/inflate\"),e(\"./lib/zlib/constants\")),t.exports=n},{\"./lib/deflate\":39,\"./lib/inflate\":40,\"./lib/utils/common\":41,\"./lib/zlib/constants\":44}],39:[function(e,t,r){\"use strict\";var a=e(\"./zlib/deflate\"),o=e(\"./utils/common\"),h=e(\"./utils/strings\"),i=e(\"./zlib/messages\"),s=e(\"./zlib/zstream\"),u=Object.prototype.toString,l=0,f=-1,c=0,d=8;function p(e){if(!(this instanceof p))return new p(e);this.options=o.assign({level:f,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:\"\"},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=a.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==l)throw new Error(i[r]);if(t.header&&a.deflateSetHeader(this.strm,t.header),t.dictionary){var n;if(n=\"string\"==typeof t.dictionary?h.string2buf(t.dictionary):\"[object ArrayBuffer]\"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=a.deflateSetDictionary(this.strm,n))!==l)throw new Error(i[r]);this._dict_set=!0}}function n(e,t){var r=new p(t);if(r.push(e,!0),r.err)throw r.msg||i[r.err];return r.result}p.prototype.push=function(e,t){var r,n,i=this.strm,s=this.options.chunkSize;if(this.ended)return!1;n=t===~~t?t:!0===t?4:0,\"string\"==typeof e?i.input=h.string2buf(e):\"[object ArrayBuffer]\"===u.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new o.Buf8(s),i.next_out=0,i.avail_out=s),1!==(r=a.deflate(i,n))&&r!==l)return this.onEnd(r),!(this.ended=!0);0!==i.avail_out&&(0!==i.avail_in||4!==n&&2!==n)||(\"string\"===this.options.to?this.onData(h.buf2binstring(o.shrinkBuf(i.output,i.next_out))):this.onData(o.shrinkBuf(i.output,i.next_out)))}while((0<i.avail_in||0===i.avail_out)&&1!==r);return 4===n?(r=a.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===l):2!==n||(this.onEnd(l),!(i.avail_out=0))},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===l&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=p,r.deflate=n,r.deflateRaw=function(e,t){return(t=t||{}).raw=!0,n(e,t)},r.gzip=function(e,t){return(t=t||{}).gzip=!0,n(e,t)}},{\"./utils/common\":41,\"./utils/strings\":42,\"./zlib/deflate\":46,\"./zlib/messages\":51,\"./zlib/zstream\":53}],40:[function(e,t,r){\"use strict\";var c=e(\"./zlib/inflate\"),d=e(\"./utils/common\"),p=e(\"./utils/strings\"),m=e(\"./zlib/constants\"),n=e(\"./zlib/messages\"),i=e(\"./zlib/zstream\"),s=e(\"./zlib/gzheader\"),_=Object.prototype.toString;function a(e){if(!(this instanceof a))return new a(e);this.options=d.assign({chunkSize:16384,windowBits:0,to:\"\"},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var r=c.inflateInit2(this.strm,t.windowBits);if(r!==m.Z_OK)throw new Error(n[r]);this.header=new s,c.inflateGetHeader(this.strm,this.header)}function o(e,t){var r=new a(t);if(r.push(e,!0),r.err)throw r.msg||n[r.err];return r.result}a.prototype.push=function(e,t){var r,n,i,s,a,o,h=this.strm,u=this.options.chunkSize,l=this.options.dictionary,f=!1;if(this.ended)return!1;n=t===~~t?t:!0===t?m.Z_FINISH:m.Z_NO_FLUSH,\"string\"==typeof e?h.input=p.binstring2buf(e):\"[object ArrayBuffer]\"===_.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new d.Buf8(u),h.next_out=0,h.avail_out=u),(r=c.inflate(h,m.Z_NO_FLUSH))===m.Z_NEED_DICT&&l&&(o=\"string\"==typeof l?p.string2buf(l):\"[object ArrayBuffer]\"===_.call(l)?new Uint8Array(l):l,r=c.inflateSetDictionary(this.strm,o)),r===m.Z_BUF_ERROR&&!0===f&&(r=m.Z_OK,f=!1),r!==m.Z_STREAM_END&&r!==m.Z_OK)return this.onEnd(r),!(this.ended=!0);h.next_out&&(0!==h.avail_out&&r!==m.Z_STREAM_END&&(0!==h.avail_in||n!==m.Z_FINISH&&n!==m.Z_SYNC_FLUSH)||(\"string\"===this.options.to?(i=p.utf8border(h.output,h.next_out),s=h.next_out-i,a=p.buf2string(h.output,i),h.next_out=s,h.avail_out=u-s,s&&d.arraySet(h.output,h.output,i,s,0),this.onData(a)):this.onData(d.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(f=!0)}while((0<h.avail_in||0===h.avail_out)&&r!==m.Z_STREAM_END);return r===m.Z_STREAM_END&&(n=m.Z_FINISH),n===m.Z_FINISH?(r=c.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===m.Z_OK):n!==m.Z_SYNC_FLUSH||(this.onEnd(m.Z_OK),!(h.avail_out=0))},a.prototype.onData=function(e){this.chunks.push(e)},a.prototype.onEnd=function(e){e===m.Z_OK&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=d.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=a,r.inflate=o,r.inflateRaw=function(e,t){return(t=t||{}).raw=!0,o(e,t)},r.ungzip=o},{\"./utils/common\":41,\"./utils/strings\":42,\"./zlib/constants\":44,\"./zlib/gzheader\":47,\"./zlib/inflate\":49,\"./zlib/messages\":51,\"./zlib/zstream\":53}],41:[function(e,t,r){\"use strict\";var n=\"undefined\"!=typeof Uint8Array&&\"undefined\"!=typeof Uint16Array&&\"undefined\"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if(\"object\"!=typeof r)throw new TypeError(r+\"must be non-object\");for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var s=0;s<n;s++)e[i+s]=t[r+s]},flattenChunks:function(e){var t,r,n,i,s,a;for(t=n=0,r=e.length;t<r;t++)n+=e[t].length;for(a=new Uint8Array(n),t=i=0,r=e.length;t<r;t++)s=e[t],a.set(s,i),i+=s.length;return a}},s={arraySet:function(e,t,r,n,i){for(var s=0;s<n;s++)e[i+s]=t[r+s]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(n)},{}],42:[function(e,t,r){\"use strict\";var h=e(\"./common\"),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){s=!1}for(var u=new h.Buf8(256),n=0;n<256;n++)u[n]=252<=n?6:248<=n?5:240<=n?4:224<=n?3:192<=n?2:1;function l(e,t){if(t<65537&&(e.subarray&&s||!e.subarray&&i))return String.fromCharCode.apply(null,h.shrinkBuf(e,t));for(var r=\"\",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}u[254]=u[254]=1,r.string2buf=function(e){var t,r,n,i,s,a=e.length,o=0;for(i=0;i<a;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=new h.Buf8(o),i=s=0;s<o;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),r<128?t[s++]=r:(r<2048?t[s++]=192|r>>>6:(r<65536?t[s++]=224|r>>>12:(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63),t[s++]=128|r>>>6&63),t[s++]=128|63&r);return t},r.buf2binstring=function(e){return l(e,e.length)},r.binstring2buf=function(e){for(var t=new h.Buf8(e.length),r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){var r,n,i,s,a=t||e.length,o=new Array(2*a);for(r=n=0;r<a;)if((i=e[r++])<128)o[n++]=i;else if(4<(s=u[i]))o[n++]=65533,r+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&r<a;)i=i<<6|63&e[r++],s--;1<s?o[n++]=65533:i<65536?o[n++]=i:(i-=65536,o[n++]=55296|i>>10&1023,o[n++]=56320|1023&i)}return l(o,n)},r.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0?t:0===r?t:r+u[e[r]]>t?r:t}},{\"./common\":41}],43:[function(e,t,r){\"use strict\";t.exports=function(e,t,r,n){for(var i=65535&e|0,s=e>>>16&65535|0,a=0;0!==r;){for(r-=a=2e3<r?2e3:r;s=s+(i=i+t[n++]|0)|0,--a;);i%=65521,s%=65521}return i|s<<16|0}},{}],44:[function(e,t,r){\"use strict\";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,r){\"use strict\";var o=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t,r,n){var i=o,s=n+r;e^=-1;for(var a=n;a<s;a++)e=e>>>8^i[255&(e^t[a])];return-1^e}},{}],46:[function(e,t,r){\"use strict\";var h,c=e(\"../utils/common\"),u=e(\"./trees\"),d=e(\"./adler32\"),p=e(\"./crc32\"),n=e(\"./messages\"),l=0,f=4,m=0,_=-2,g=-1,b=4,i=2,v=8,y=9,s=286,a=30,o=19,w=2*s+1,k=15,x=3,S=258,z=S+x+1,C=42,E=113,A=1,I=2,O=3,B=4;function R(e,t){return e.msg=n[t],t}function T(e){return(e<<1)-(4<e?9:0)}function D(e){for(var t=e.length;0<=--t;)e[t]=0}function F(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(c.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function N(e,t){u._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,F(e.strm)}function U(e,t){e.pending_buf[e.pending++]=t}function P(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function L(e,t){var r,n,i=e.max_chain_length,s=e.strstart,a=e.prev_length,o=e.nice_match,h=e.strstart>e.w_size-z?e.strstart-(e.w_size-z):0,u=e.window,l=e.w_mask,f=e.prev,c=e.strstart+S,d=u[s+a-1],p=u[s+a];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do{if(u[(r=t)+a]===p&&u[r+a-1]===d&&u[r]===u[s]&&u[++r]===u[s+1]){s+=2,r++;do{}while(u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&s<c);if(n=S-(c-s),s=c-S,a<n){if(e.match_start=t,o<=(a=n))break;d=u[s+a-1],p=u[s+a]}}}while((t=f[t&l])>h&&0!=--i);return a<=e.lookahead?a:e.lookahead}function j(e){var t,r,n,i,s,a,o,h,u,l,f=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=f+(f-z)){for(c.arraySet(e.window,e.window,f,f,0),e.match_start-=f,e.strstart-=f,e.block_start-=f,t=r=e.hash_size;n=e.head[--t],e.head[t]=f<=n?n-f:0,--r;);for(t=r=f;n=e.prev[--t],e.prev[t]=f<=n?n-f:0,--r;);i+=f}if(0===e.strm.avail_in)break;if(a=e.strm,o=e.window,h=e.strstart+e.lookahead,u=i,l=void 0,l=a.avail_in,u<l&&(l=u),r=0===l?0:(a.avail_in-=l,c.arraySet(o,a.input,a.next_in,l,h),1===a.state.wrap?a.adler=d(a.adler,o,l,h):2===a.state.wrap&&(a.adler=p(a.adler,o,l,h)),a.next_in+=l,a.total_in+=l,l),e.lookahead+=r,e.lookahead+e.insert>=x)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+x-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<x)););}while(e.lookahead<z&&0!==e.strm.avail_in)}function Z(e,t){for(var r,n;;){if(e.lookahead<z){if(j(e),e.lookahead<z&&t===l)return A;if(0===e.lookahead)break}if(r=0,e.lookahead>=x&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-z&&(e.match_length=L(e,r)),e.match_length>=x)if(n=u._tr_tally(e,e.strstart-e.match_start,e.match_length-x),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=x){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=u._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(N(e,!1),0===e.strm.avail_out))return A}return e.insert=e.strstart<x-1?e.strstart:x-1,t===f?(N(e,!0),0===e.strm.avail_out?O:B):e.last_lit&&(N(e,!1),0===e.strm.avail_out)?A:I}function W(e,t){for(var r,n,i;;){if(e.lookahead<z){if(j(e),e.lookahead<z&&t===l)return A;if(0===e.lookahead)break}if(r=0,e.lookahead>=x&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=x-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-z&&(e.match_length=L(e,r),e.match_length<=5&&(1===e.strategy||e.match_length===x&&4096<e.strstart-e.match_start)&&(e.match_length=x-1)),e.prev_length>=x&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-x,n=u._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-x),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=x-1,e.strstart++,n&&(N(e,!1),0===e.strm.avail_out))return A}else if(e.match_available){if((n=u._tr_tally(e,0,e.window[e.strstart-1]))&&N(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return A}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=u._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<x-1?e.strstart:x-1,t===f?(N(e,!0),0===e.strm.avail_out?O:B):e.last_lit&&(N(e,!1),0===e.strm.avail_out)?A:I}function M(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function H(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(2*w),this.dyn_dtree=new c.Buf16(2*(2*a+1)),this.bl_tree=new c.Buf16(2*(2*o+1)),D(this.dyn_ltree),D(this.dyn_dtree),D(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(k+1),this.heap=new c.Buf16(2*s+1),D(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(2*s+1),D(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function G(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=i,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?C:E,e.adler=2===t.wrap?0:1,t.last_flush=l,u._tr_init(t),m):R(e,_)}function K(e){var t=G(e);return t===m&&function(e){e.window_size=2*e.w_size,D(e.head),e.max_lazy_match=h[e.level].max_lazy,e.good_match=h[e.level].good_length,e.nice_match=h[e.level].nice_length,e.max_chain_length=h[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=x-1,e.match_available=0,e.ins_h=0}(e.state),t}function Y(e,t,r,n,i,s){if(!e)return _;var a=1;if(t===g&&(t=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),i<1||y<i||r!==v||n<8||15<n||t<0||9<t||s<0||b<s)return R(e,_);8===n&&(n=9);var o=new H;return(e.state=o).strm=e,o.wrap=a,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+x-1)/x),o.window=new c.Buf8(2*o.w_size),o.head=new c.Buf16(o.hash_size),o.prev=new c.Buf16(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new c.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=t,o.strategy=s,o.method=r,K(e)}h=[new M(0,0,0,0,function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(j(e),0===e.lookahead&&t===l)return A;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,N(e,!1),0===e.strm.avail_out))return A;if(e.strstart-e.block_start>=e.w_size-z&&(N(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===f?(N(e,!0),0===e.strm.avail_out?O:B):(e.strstart>e.block_start&&(N(e,!1),e.strm.avail_out),A)}),new M(4,4,8,4,Z),new M(4,5,16,8,Z),new M(4,6,32,32,Z),new M(4,4,16,16,W),new M(8,16,32,32,W),new M(8,16,128,128,W),new M(8,32,128,256,W),new M(32,128,258,1024,W),new M(32,258,258,4096,W)],r.deflateInit=function(e,t){return Y(e,t,v,15,8,0)},r.deflateInit2=Y,r.deflateReset=K,r.deflateResetKeep=G,r.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?_:(e.state.gzhead=t,m):_},r.deflate=function(e,t){var r,n,i,s;if(!e||!e.state||5<t||t<0)return e?R(e,_):_;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||666===n.status&&t!==f)return R(e,0===e.avail_out?-5:_);if(n.strm=e,r=n.last_flush,n.last_flush=t,n.status===C)if(2===n.wrap)e.adler=0,U(n,31),U(n,139),U(n,8),n.gzhead?(U(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),U(n,255&n.gzhead.time),U(n,n.gzhead.time>>8&255),U(n,n.gzhead.time>>16&255),U(n,n.gzhead.time>>24&255),U(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),U(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(U(n,255&n.gzhead.extra.length),U(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=p(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(U(n,0),U(n,0),U(n,0),U(n,0),U(n,0),U(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),U(n,3),n.status=E);else{var a=v+(n.w_bits-8<<4)<<8;a|=(2<=n.strategy||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(a|=32),a+=31-a%31,n.status=E,P(n,a),0!==n.strstart&&(P(n,e.adler>>>16),P(n,65535&e.adler)),e.adler=1}if(69===n.status)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>i&&(e.adler=p(e.adler,n.pending_buf,n.pending-i,i)),F(e),i=n.pending,n.pending!==n.pending_buf_size));)U(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(e.adler=p(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=p(e.adler,n.pending_buf,n.pending-i,i)),F(e),i=n.pending,n.pending===n.pending_buf_size)){s=1;break}s=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,U(n,s)}while(0!==s);n.gzhead.hcrc&&n.pending>i&&(e.adler=p(e.adler,n.pending_buf,n.pending-i,i)),0===s&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=p(e.adler,n.pending_buf,n.pending-i,i)),F(e),i=n.pending,n.pending===n.pending_buf_size)){s=1;break}s=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,U(n,s)}while(0!==s);n.gzhead.hcrc&&n.pending>i&&(e.adler=p(e.adler,n.pending_buf,n.pending-i,i)),0===s&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&F(e),n.pending+2<=n.pending_buf_size&&(U(n,255&e.adler),U(n,e.adler>>8&255),e.adler=0,n.status=E)):n.status=E),0!==n.pending){if(F(e),0===e.avail_out)return n.last_flush=-1,m}else if(0===e.avail_in&&T(t)<=T(r)&&t!==f)return R(e,-5);if(666===n.status&&0!==e.avail_in)return R(e,-5);if(0!==e.avail_in||0!==n.lookahead||t!==l&&666!==n.status){var o=2===n.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(j(e),0===e.lookahead)){if(t===l)return A;break}if(e.match_length=0,r=u._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(N(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===f?(N(e,!0),0===e.strm.avail_out?O:B):e.last_lit&&(N(e,!1),0===e.strm.avail_out)?A:I}(n,t):3===n.strategy?function(e,t){for(var r,n,i,s,a=e.window;;){if(e.lookahead<=S){if(j(e),e.lookahead<=S&&t===l)return A;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=x&&0<e.strstart&&(n=a[i=e.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i]){s=e.strstart+S;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<s);e.match_length=S-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=x?(r=u._tr_tally(e,1,e.match_length-x),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=u._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(N(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===f?(N(e,!0),0===e.strm.avail_out?O:B):e.last_lit&&(N(e,!1),0===e.strm.avail_out)?A:I}(n,t):h[n.level].func(n,t);if(o!==O&&o!==B||(n.status=666),o===A||o===O)return 0===e.avail_out&&(n.last_flush=-1),m;if(o===I&&(1===t?u._tr_align(n):5!==t&&(u._tr_stored_block(n,0,0,!1),3===t&&(D(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),F(e),0===e.avail_out))return n.last_flush=-1,m}return t!==f?m:n.wrap<=0?1:(2===n.wrap?(U(n,255&e.adler),U(n,e.adler>>8&255),U(n,e.adler>>16&255),U(n,e.adler>>24&255),U(n,255&e.total_in),U(n,e.total_in>>8&255),U(n,e.total_in>>16&255),U(n,e.total_in>>24&255)):(P(n,e.adler>>>16),P(n,65535&e.adler)),F(e),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending?m:1)},r.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==C&&69!==t&&73!==t&&91!==t&&103!==t&&t!==E&&666!==t?R(e,_):(e.state=null,t===E?R(e,-3):m):_},r.deflateSetDictionary=function(e,t){var r,n,i,s,a,o,h,u,l=t.length;if(!e||!e.state)return _;if(2===(s=(r=e.state).wrap)||1===s&&r.status!==C||r.lookahead)return _;for(1===s&&(e.adler=d(e.adler,t,l,0)),r.wrap=0,l>=r.w_size&&(0===s&&(D(r.head),r.strstart=0,r.block_start=0,r.insert=0),u=new c.Buf8(r.w_size),c.arraySet(u,t,l-r.w_size,r.w_size,0),t=u,l=r.w_size),a=e.avail_in,o=e.next_in,h=e.input,e.avail_in=l,e.next_in=0,e.input=t,j(r);r.lookahead>=x;){for(n=r.strstart,i=r.lookahead-(x-1);r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+x-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--i;);r.strstart=n,r.lookahead=x-1,j(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=x-1,r.match_available=0,e.next_in=o,e.input=h,e.avail_in=a,r.wrap=s,m},r.deflateInfo=\"pako deflate (from Nodeca project)\"},{\"../utils/common\":41,\"./adler32\":43,\"./crc32\":45,\"./messages\":51,\"./trees\":52}],47:[function(e,t,r){\"use strict\";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\"\",this.comment=\"\",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,r){\"use strict\";t.exports=function(e,t){var r,n,i,s,a,o,h,u,l,f,c,d,p,m,_,g,b,v,y,w,k,x,S,z,C;r=e.state,n=e.next_in,z=e.input,i=n+(e.avail_in-5),s=e.next_out,C=e.output,a=s-(t-e.avail_out),o=s+(e.avail_out-257),h=r.dmax,u=r.wsize,l=r.whave,f=r.wnext,c=r.window,d=r.hold,p=r.bits,m=r.lencode,_=r.distcode,g=(1<<r.lenbits)-1,b=(1<<r.distbits)-1;e:do{p<15&&(d+=z[n++]<<p,p+=8,d+=z[n++]<<p,p+=8),v=m[d&g];t:for(;;){if(d>>>=y=v>>>24,p-=y,0===(y=v>>>16&255))C[s++]=65535&v;else{if(!(16&y)){if(0==(64&y)){v=m[(65535&v)+(d&(1<<y)-1)];continue t}if(32&y){r.mode=12;break e}e.msg=\"invalid literal/length code\",r.mode=30;break e}w=65535&v,(y&=15)&&(p<y&&(d+=z[n++]<<p,p+=8),w+=d&(1<<y)-1,d>>>=y,p-=y),p<15&&(d+=z[n++]<<p,p+=8,d+=z[n++]<<p,p+=8),v=_[d&b];r:for(;;){if(d>>>=y=v>>>24,p-=y,!(16&(y=v>>>16&255))){if(0==(64&y)){v=_[(65535&v)+(d&(1<<y)-1)];continue r}e.msg=\"invalid distance code\",r.mode=30;break e}if(k=65535&v,p<(y&=15)&&(d+=z[n++]<<p,(p+=8)<y&&(d+=z[n++]<<p,p+=8)),h<(k+=d&(1<<y)-1)){e.msg=\"invalid distance too far back\",r.mode=30;break e}if(d>>>=y,p-=y,(y=s-a)<k){if(l<(y=k-y)&&r.sane){e.msg=\"invalid distance too far back\",r.mode=30;break e}if(S=c,(x=0)===f){if(x+=u-y,y<w){for(w-=y;C[s++]=c[x++],--y;);x=s-k,S=C}}else if(f<y){if(x+=u+f-y,(y-=f)<w){for(w-=y;C[s++]=c[x++],--y;);if(x=0,f<w){for(w-=y=f;C[s++]=c[x++],--y;);x=s-k,S=C}}}else if(x+=f-y,y<w){for(w-=y;C[s++]=c[x++],--y;);x=s-k,S=C}for(;2<w;)C[s++]=S[x++],C[s++]=S[x++],C[s++]=S[x++],w-=3;w&&(C[s++]=S[x++],1<w&&(C[s++]=S[x++]))}else{for(x=s-k;C[s++]=C[x++],C[s++]=C[x++],C[s++]=C[x++],2<(w-=3););w&&(C[s++]=C[x++],1<w&&(C[s++]=C[x++]))}break}}break}}while(n<i&&s<o);n-=w=p>>3,d&=(1<<(p-=w<<3))-1,e.next_in=n,e.next_out=s,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=s<o?o-s+257:257-(s-o),r.hold=d,r.bits=p}},{}],49:[function(e,t,r){\"use strict\";var I=e(\"../utils/common\"),O=e(\"./adler32\"),B=e(\"./crc32\"),R=e(\"./inffast\"),T=e(\"./inftrees\"),D=1,F=2,N=0,U=-2,P=1,n=852,i=592;function L(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function s(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new I.Buf16(320),this.work=new I.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg=\"\",t.wrap&&(e.adler=1&t.wrap),t.mode=P,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new I.Buf32(n),t.distcode=t.distdyn=new I.Buf32(i),t.sane=1,t.back=-1,N):U}function o(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,a(e)):U}function h(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?U:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,o(e))):U}function u(e,t){var r,n;return e?(n=new s,(e.state=n).window=null,(r=h(e,t))!==N&&(e.state=null),r):U}var l,f,c=!0;function j(e){if(c){var t;for(l=new I.Buf32(512),f=new I.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(T(D,e.lens,0,288,l,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;T(F,e.lens,0,32,f,0,e.work,{bits:5}),c=!1}e.lencode=l,e.lenbits=9,e.distcode=f,e.distbits=5}function Z(e,t,r,n){var i,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new I.Buf8(s.wsize)),n>=s.wsize?(I.arraySet(s.window,t,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(n<(i=s.wsize-s.wnext)&&(i=n),I.arraySet(s.window,t,r-n,i,s.wnext),(n-=i)?(I.arraySet(s.window,t,r-n,n,0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}r.inflateReset=o,r.inflateReset2=h,r.inflateResetKeep=a,r.inflateInit=function(e){return u(e,15)},r.inflateInit2=u,r.inflate=function(e,t){var r,n,i,s,a,o,h,u,l,f,c,d,p,m,_,g,b,v,y,w,k,x,S,z,C=0,E=new I.Buf8(4),A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return U;12===(r=e.state).mode&&(r.mode=13),a=e.next_out,i=e.output,h=e.avail_out,s=e.next_in,n=e.input,o=e.avail_in,u=r.hold,l=r.bits,f=o,c=h,x=N;e:for(;;)switch(r.mode){case P:if(0===r.wrap){r.mode=13;break}for(;l<16;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}if(2&r.wrap&&35615===u){E[r.check=0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0),l=u=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg=\"incorrect header check\",r.mode=30;break}if(8!=(15&u)){e.msg=\"unknown compression method\",r.mode=30;break}if(l-=4,k=8+(15&(u>>>=4)),0===r.wbits)r.wbits=k;else if(k>r.wbits){e.msg=\"invalid window size\",r.mode=30;break}r.dmax=1<<k,e.adler=r.check=1,r.mode=512&u?10:12,l=u=0;break;case 2:for(;l<16;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}if(r.flags=u,8!=(255&r.flags)){e.msg=\"unknown compression method\",r.mode=30;break}if(57344&r.flags){e.msg=\"unknown header flags set\",r.mode=30;break}r.head&&(r.head.text=u>>8&1),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0)),l=u=0,r.mode=3;case 3:for(;l<32;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}r.head&&(r.head.time=u),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,E[2]=u>>>16&255,E[3]=u>>>24&255,r.check=B(r.check,E,4,0)),l=u=0,r.mode=4;case 4:for(;l<16;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}r.head&&(r.head.xflags=255&u,r.head.os=u>>8),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0)),l=u=0,r.mode=5;case 5:if(1024&r.flags){for(;l<16;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}r.length=u,r.head&&(r.head.extra_len=u),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0)),l=u=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(o<(d=r.length)&&(d=o),d&&(r.head&&(k=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),I.arraySet(r.head.extra,n,s,d,k)),512&r.flags&&(r.check=B(r.check,n,d,s)),o-=d,s+=d,r.length-=d),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===o)break e;for(d=0;k=n[s+d++],r.head&&k&&r.length<65536&&(r.head.name+=String.fromCharCode(k)),k&&d<o;);if(512&r.flags&&(r.check=B(r.check,n,d,s)),o-=d,s+=d,k)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===o)break e;for(d=0;k=n[s+d++],r.head&&k&&r.length<65536&&(r.head.comment+=String.fromCharCode(k)),k&&d<o;);if(512&r.flags&&(r.check=B(r.check,n,d,s)),o-=d,s+=d,k)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;l<16;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}if(u!==(65535&r.check)){e.msg=\"header crc mismatch\",r.mode=30;break}l=u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;l<32;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}e.adler=r.check=L(u),l=u=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=a,e.avail_out=h,e.next_in=s,e.avail_in=o,r.hold=u,r.bits=l,2;e.adler=r.check=1,r.mode=12;case 12:if(5===t||6===t)break e;case 13:if(r.last){u>>>=7&l,l-=7&l,r.mode=27;break}for(;l<3;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}switch(r.last=1&u,l-=1,3&(u>>>=1)){case 0:r.mode=14;break;case 1:if(j(r),r.mode=20,6!==t)break;u>>>=2,l-=2;break e;case 2:r.mode=17;break;case 3:e.msg=\"invalid block type\",r.mode=30}u>>>=2,l-=2;break;case 14:for(u>>>=7&l,l-=7&l;l<32;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}if((65535&u)!=(u>>>16^65535)){e.msg=\"invalid stored block lengths\",r.mode=30;break}if(r.length=65535&u,l=u=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(d=r.length){if(o<d&&(d=o),h<d&&(d=h),0===d)break e;I.arraySet(i,n,s,d,a),o-=d,s+=d,h-=d,a+=d,r.length-=d;break}r.mode=12;break;case 17:for(;l<14;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}if(r.nlen=257+(31&u),u>>>=5,l-=5,r.ndist=1+(31&u),u>>>=5,l-=5,r.ncode=4+(15&u),u>>>=4,l-=4,286<r.nlen||30<r.ndist){e.msg=\"too many length or distance symbols\",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;l<3;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}r.lens[A[r.have++]]=7&u,u>>>=3,l-=3}for(;r.have<19;)r.lens[A[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,S={bits:r.lenbits},x=T(0,r.lens,0,19,r.lencode,0,r.work,S),r.lenbits=S.bits,x){e.msg=\"invalid code lengths set\",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;g=(C=r.lencode[u&(1<<r.lenbits)-1])>>>16&255,b=65535&C,!((_=C>>>24)<=l);){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}if(b<16)u>>>=_,l-=_,r.lens[r.have++]=b;else{if(16===b){for(z=_+2;l<z;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}if(u>>>=_,l-=_,0===r.have){e.msg=\"invalid bit length repeat\",r.mode=30;break}k=r.lens[r.have-1],d=3+(3&u),u>>>=2,l-=2}else if(17===b){for(z=_+3;l<z;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}l-=_,k=0,d=3+(7&(u>>>=_)),u>>>=3,l-=3}else{for(z=_+7;l<z;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}l-=_,k=0,d=11+(127&(u>>>=_)),u>>>=7,l-=7}if(r.have+d>r.nlen+r.ndist){e.msg=\"invalid bit length repeat\",r.mode=30;break}for(;d--;)r.lens[r.have++]=k}}if(30===r.mode)break;if(0===r.lens[256]){e.msg=\"invalid code -- missing end-of-block\",r.mode=30;break}if(r.lenbits=9,S={bits:r.lenbits},x=T(D,r.lens,0,r.nlen,r.lencode,0,r.work,S),r.lenbits=S.bits,x){e.msg=\"invalid literal/lengths set\",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,S={bits:r.distbits},x=T(F,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,S),r.distbits=S.bits,x){e.msg=\"invalid distances set\",r.mode=30;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(6<=o&&258<=h){e.next_out=a,e.avail_out=h,e.next_in=s,e.avail_in=o,r.hold=u,r.bits=l,R(e,c),a=e.next_out,i=e.output,h=e.avail_out,s=e.next_in,n=e.input,o=e.avail_in,u=r.hold,l=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;g=(C=r.lencode[u&(1<<r.lenbits)-1])>>>16&255,b=65535&C,!((_=C>>>24)<=l);){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}if(g&&0==(240&g)){for(v=_,y=g,w=b;g=(C=r.lencode[w+((u&(1<<v+y)-1)>>v)])>>>16&255,b=65535&C,!(v+(_=C>>>24)<=l);){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}u>>>=v,l-=v,r.back+=v}if(u>>>=_,l-=_,r.back+=_,r.length=b,0===g){r.mode=26;break}if(32&g){r.back=-1,r.mode=12;break}if(64&g){e.msg=\"invalid literal/length code\",r.mode=30;break}r.extra=15&g,r.mode=22;case 22:if(r.extra){for(z=r.extra;l<z;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;g=(C=r.distcode[u&(1<<r.distbits)-1])>>>16&255,b=65535&C,!((_=C>>>24)<=l);){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}if(0==(240&g)){for(v=_,y=g,w=b;g=(C=r.distcode[w+((u&(1<<v+y)-1)>>v)])>>>16&255,b=65535&C,!(v+(_=C>>>24)<=l);){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}u>>>=v,l-=v,r.back+=v}if(u>>>=_,l-=_,r.back+=_,64&g){e.msg=\"invalid distance code\",r.mode=30;break}r.offset=b,r.extra=15&g,r.mode=24;case 24:if(r.extra){for(z=r.extra;l<z;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg=\"invalid distance too far back\",r.mode=30;break}r.mode=25;case 25:if(0===h)break e;if(d=c-h,r.offset>d){if((d=r.offset-d)>r.whave&&r.sane){e.msg=\"invalid distance too far back\",r.mode=30;break}p=d>r.wnext?(d-=r.wnext,r.wsize-d):r.wnext-d,d>r.length&&(d=r.length),m=r.window}else m=i,p=a-r.offset,d=r.length;for(h<d&&(d=h),h-=d,r.length-=d;i[a++]=m[p++],--d;);0===r.length&&(r.mode=21);break;case 26:if(0===h)break e;i[a++]=r.length,h--,r.mode=21;break;case 27:if(r.wrap){for(;l<32;){if(0===o)break e;o--,u|=n[s++]<<l,l+=8}if(c-=h,e.total_out+=c,r.total+=c,c&&(e.adler=r.check=r.flags?B(r.check,i,c,a-c):O(r.check,i,c,a-c)),c=h,(r.flags?u:L(u))!==r.check){e.msg=\"incorrect data check\",r.mode=30;break}l=u=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;l<32;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}if(u!==(4294967295&r.total)){e.msg=\"incorrect length check\",r.mode=30;break}l=u=0}r.mode=29;case 29:x=1;break e;case 30:x=-3;break e;case 31:return-4;case 32:default:return U}return e.next_out=a,e.avail_out=h,e.next_in=s,e.avail_in=o,r.hold=u,r.bits=l,(r.wsize||c!==e.avail_out&&r.mode<30&&(r.mode<27||4!==t))&&Z(e,e.output,e.next_out,c-e.avail_out)?(r.mode=31,-4):(f-=e.avail_in,c-=e.avail_out,e.total_in+=f,e.total_out+=c,r.total+=c,r.wrap&&c&&(e.adler=r.check=r.flags?B(r.check,i,c,e.next_out-c):O(r.check,i,c,e.next_out-c)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==f&&0===c||4===t)&&x===N&&(x=-5),x)},r.inflateEnd=function(e){if(!e||!e.state)return U;var t=e.state;return t.window&&(t.window=null),e.state=null,N},r.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?U:((r.head=t).done=!1,N):U},r.inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?U:11===r.mode&&O(1,t,n,0)!==r.check?-3:Z(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,N):U},r.inflateInfo=\"pako inflate (from Nodeca project)\"},{\"../utils/common\":41,\"./adler32\":43,\"./crc32\":45,\"./inffast\":48,\"./inftrees\":50}],50:[function(e,t,r){\"use strict\";var D=e(\"../utils/common\"),F=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],N=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],U=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],P=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,n,i,s,a,o){var h,u,l,f,c,d,p,m,_,g=o.bits,b=0,v=0,y=0,w=0,k=0,x=0,S=0,z=0,C=0,E=0,A=null,I=0,O=new D.Buf16(16),B=new D.Buf16(16),R=null,T=0;for(b=0;b<=15;b++)O[b]=0;for(v=0;v<n;v++)O[t[r+v]]++;for(k=g,w=15;1<=w&&0===O[w];w--);if(w<k&&(k=w),0===w)return i[s++]=20971520,i[s++]=20971520,o.bits=1,0;for(y=1;y<w&&0===O[y];y++);for(k<y&&(k=y),b=z=1;b<=15;b++)if(z<<=1,(z-=O[b])<0)return-1;if(0<z&&(0===e||1!==w))return-1;for(B[1]=0,b=1;b<15;b++)B[b+1]=B[b]+O[b];for(v=0;v<n;v++)0!==t[r+v]&&(a[B[t[r+v]]++]=v);if(d=0===e?(A=R=a,19):1===e?(A=F,I-=257,R=N,T-=257,256):(A=U,R=P,-1),b=y,c=s,S=v=E=0,l=-1,f=(C=1<<(x=k))-1,1===e&&852<C||2===e&&592<C)return 1;for(;;){for(p=b-S,_=a[v]<d?(m=0,a[v]):a[v]>d?(m=R[T+a[v]],A[I+a[v]]):(m=96,0),h=1<<b-S,y=u=1<<x;i[c+(E>>S)+(u-=h)]=p<<24|m<<16|_|0,0!==u;);for(h=1<<b-1;E&h;)h>>=1;if(0!==h?(E&=h-1,E+=h):E=0,v++,0==--O[b]){if(b===w)break;b=t[r+a[v]]}if(k<b&&(E&f)!==l){for(0===S&&(S=k),c+=y,z=1<<(x=b-S);x+S<w&&!((z-=O[x+S])<=0);)x++,z<<=1;if(C+=1<<x,1===e&&852<C||2===e&&592<C)return 1;i[l=E&f]=k<<24|x<<16|c-s|0}}return 0!==E&&(i[c+E]=b-S<<24|64<<16|0),o.bits=k,0}},{\"../utils/common\":41}],51:[function(e,t,r){\"use strict\";t.exports={2:\"need dictionary\",1:\"stream end\",0:\"\",\"-1\":\"file error\",\"-2\":\"stream error\",\"-3\":\"data error\",\"-4\":\"insufficient memory\",\"-5\":\"buffer error\",\"-6\":\"incompatible version\"}},{}],52:[function(e,t,r){\"use strict\";var i=e(\"../utils/common\"),o=0,h=1;function n(e){for(var t=e.length;0<=--t;)e[t]=0}var s=0,a=29,u=256,l=u+1+a,f=30,c=19,_=2*l+1,g=15,d=16,p=7,m=256,b=16,v=17,y=18,w=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],k=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=new Array(2*(l+2));n(z);var C=new Array(2*f);n(C);var E=new Array(512);n(E);var A=new Array(256);n(A);var I=new Array(a);n(I);var O,B,R,T=new Array(f);function D(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function F(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function N(e){return e<256?E[e]:E[256+(e>>>7)]}function U(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function P(e,t,r){e.bi_valid>d-r?(e.bi_buf|=t<<e.bi_valid&65535,U(e,e.bi_buf),e.bi_buf=t>>d-e.bi_valid,e.bi_valid+=r-d):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function L(e,t,r){P(e,r[2*t],r[2*t+1])}function j(e,t){for(var r=0;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1}function Z(e,t,r){var n,i,s=new Array(g+1),a=0;for(n=1;n<=g;n++)s[n]=a=a+r[n-1]<<1;for(i=0;i<=t;i++){var o=e[2*i+1];0!==o&&(e[2*i]=j(s[o]++,o))}}function W(e){var t;for(t=0;t<l;t++)e.dyn_ltree[2*t]=0;for(t=0;t<f;t++)e.dyn_dtree[2*t]=0;for(t=0;t<c;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*m]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function M(e){8<e.bi_valid?U(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function H(e,t,r,n){var i=2*t,s=2*r;return e[i]<e[s]||e[i]===e[s]&&n[t]<=n[r]}function G(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&H(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!H(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function K(e,t,r){var n,i,s,a,o=0;if(0!==e.last_lit)for(;n=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],i=e.pending_buf[e.l_buf+o],o++,0===n?L(e,i,t):(L(e,(s=A[i])+u+1,t),0!==(a=w[s])&&P(e,i-=I[s],a),L(e,s=N(--n),r),0!==(a=k[s])&&P(e,n-=T[s],a)),o<e.last_lit;);L(e,m,t)}function Y(e,t){var r,n,i,s=t.dyn_tree,a=t.stat_desc.static_tree,o=t.stat_desc.has_stree,h=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=_,r=0;r<h;r++)0!==s[2*r]?(e.heap[++e.heap_len]=u=r,e.depth[r]=0):s[2*r+1]=0;for(;e.heap_len<2;)s[2*(i=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[i]=0,e.opt_len--,o&&(e.static_len-=a[2*i+1]);for(t.max_code=u,r=e.heap_len>>1;1<=r;r--)G(e,s,r);for(i=h;r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],G(e,s,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,s[2*i]=s[2*r]+s[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,s[2*r+1]=s[2*n+1]=i,e.heap[1]=i++,G(e,s,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,i,s,a,o,h=t.dyn_tree,u=t.max_code,l=t.stat_desc.static_tree,f=t.stat_desc.has_stree,c=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(s=0;s<=g;s++)e.bl_count[s]=0;for(h[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<_;r++)p<(s=h[2*h[2*(n=e.heap[r])+1]+1]+1)&&(s=p,m++),h[2*n+1]=s,u<n||(e.bl_count[s]++,a=0,d<=n&&(a=c[n-d]),o=h[2*n],e.opt_len+=o*(s+a),f&&(e.static_len+=o*(l[2*n+1]+a)));if(0!==m){do{for(s=p-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[p]--,m-=2}while(0<m);for(s=p;0!==s;s--)for(n=e.bl_count[s];0!==n;)u<(i=e.heap[--r])||(h[2*i+1]!==s&&(e.opt_len+=(s-h[2*i+1])*h[2*i],h[2*i+1]=s),n--)}}(e,t),Z(s,u,e.bl_count)}function X(e,t,r){var n,i,s=-1,a=t[1],o=0,h=7,u=4;for(0===a&&(h=138,u=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=t[2*(n+1)+1],++o<h&&i===a||(o<u?e.bl_tree[2*i]+=o:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[2*b]++):o<=10?e.bl_tree[2*v]++:e.bl_tree[2*y]++,s=i,u=(o=0)===a?(h=138,3):i===a?(h=6,3):(h=7,4))}function V(e,t,r){var n,i,s=-1,a=t[1],o=0,h=7,u=4;for(0===a&&(h=138,u=3),n=0;n<=r;n++)if(i=a,a=t[2*(n+1)+1],!(++o<h&&i===a)){if(o<u)for(;L(e,i,e.bl_tree),0!=--o;);else 0!==i?(i!==s&&(L(e,i,e.bl_tree),o--),L(e,b,e.bl_tree),P(e,o-3,2)):o<=10?(L(e,v,e.bl_tree),P(e,o-3,3)):(L(e,y,e.bl_tree),P(e,o-11,7));s=i,u=(o=0)===a?(h=138,3):i===a?(h=6,3):(h=7,4)}}n(T);var q=!1;function J(e,t,r,n){P(e,(s<<1)+(n?1:0),3),function(e,t,r,n){M(e),n&&(U(e,r),U(e,~r)),i.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r,!0)}r._tr_init=function(e){q||(function(){var e,t,r,n,i,s=new Array(g+1);for(n=r=0;n<a-1;n++)for(I[n]=r,e=0;e<1<<w[n];e++)A[r++]=n;for(A[r-1]=n,n=i=0;n<16;n++)for(T[n]=i,e=0;e<1<<k[n];e++)E[i++]=n;for(i>>=7;n<f;n++)for(T[n]=i<<7,e=0;e<1<<k[n]-7;e++)E[256+i++]=n;for(t=0;t<=g;t++)s[t]=0;for(e=0;e<=143;)z[2*e+1]=8,e++,s[8]++;for(;e<=255;)z[2*e+1]=9,e++,s[9]++;for(;e<=279;)z[2*e+1]=7,e++,s[7]++;for(;e<=287;)z[2*e+1]=8,e++,s[8]++;for(Z(z,l+1,s),e=0;e<f;e++)C[2*e+1]=5,C[2*e]=j(e,5);O=new D(z,w,u+1,l,g),B=new D(C,k,0,f,g),R=new D(new Array(0),x,0,c,p)}(),q=!0),e.l_desc=new F(e.dyn_ltree,O),e.d_desc=new F(e.dyn_dtree,B),e.bl_desc=new F(e.bl_tree,R),e.bi_buf=0,e.bi_valid=0,W(e)},r._tr_stored_block=J,r._tr_flush_block=function(e,t,r,n){var i,s,a=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return o;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return h;for(t=32;t<u;t++)if(0!==e.dyn_ltree[2*t])return h;return o}(e)),Y(e,e.l_desc),Y(e,e.d_desc),a=function(e){var t;for(X(e,e.dyn_ltree,e.l_desc.max_code),X(e,e.dyn_dtree,e.d_desc.max_code),Y(e,e.bl_desc),t=c-1;3<=t&&0===e.bl_tree[2*S[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=i&&(i=s)):i=s=r+5,r+4<=i&&-1!==t?J(e,t,r,n):4===e.strategy||s===i?(P(e,2+(n?1:0),3),K(e,z,C)):(P(e,4+(n?1:0),3),function(e,t,r,n){var i;for(P(e,t-257,5),P(e,r-1,5),P(e,n-4,4),i=0;i<n;i++)P(e,e.bl_tree[2*S[i]+1],3);V(e,e.dyn_ltree,t-1),V(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),K(e,e.dyn_ltree,e.dyn_dtree)),W(e),n&&M(e)},r._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(A[r]+u+1)]++,e.dyn_dtree[2*N(t)]++),e.last_lit===e.lit_bufsize-1},r._tr_align=function(e){P(e,2,3),L(e,m,z),function(e){16===e.bi_valid?(U(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{\"../utils/common\":41}],53:[function(e,t,r){\"use strict\";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\"\",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){(function(e){!function(r,n){\"use strict\";if(!r.setImmediate){var i,s,t,a,o=1,h={},u=!1,l=r.document,e=Object.getPrototypeOf&&Object.getPrototypeOf(r);e=e&&e.setTimeout?e:r,i=\"[object process]\"==={}.toString.call(r.process)?function(e){process.nextTick(function(){c(e)})}:function(){if(r.postMessage&&!r.importScripts){var e=!0,t=r.onmessage;return r.onmessage=function(){e=!1},r.postMessage(\"\",\"*\"),r.onmessage=t,e}}()?(a=\"setImmediate$\"+Math.random()+\"$\",r.addEventListener?r.addEventListener(\"message\",d,!1):r.attachEvent(\"onmessage\",d),function(e){r.postMessage(a+e,\"*\")}):r.MessageChannel?((t=new MessageChannel).port1.onmessage=function(e){c(e.data)},function(e){t.port2.postMessage(e)}):l&&\"onreadystatechange\"in l.createElement(\"script\")?(s=l.documentElement,function(e){var t=l.createElement(\"script\");t.onreadystatechange=function(){c(e),t.onreadystatechange=null,s.removeChild(t),t=null},s.appendChild(t)}):function(e){setTimeout(c,0,e)},e.setImmediate=function(e){\"function\"!=typeof e&&(e=new Function(\"\"+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return h[o]=n,i(o),o++},e.clearImmediate=f}function f(e){delete h[e]}function c(e){if(u)setTimeout(c,0,e);else{var t=h[e];if(t){u=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{f(e),u=!1}}}}function d(e){e.source===r&&\"string\"==typeof e.data&&0===e.data.indexOf(a)&&c(+e.data.slice(a.length))}}(\"undefined\"==typeof self?void 0===e?this:e:self)}).call(this,\"undefined\"!=typeof __webpack_require__.g?__webpack_require__.g:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{}]},{},[10])(10)});\n\n//# sourceURL=webpack://playground/./node_modules/jszip/dist/jszip.min.js?");

/***/ }),

/***/ "./node_modules/metro4/build/js/metro.js":
/*!***********************************************!*\
  !*** ./node_modules/metro4/build/js/metro.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("/*\r\n * Metro 4 Components Library v4.5.1  (https://metroui.org.ua)\r\n * Copyright 2012-2022 Sergey Pimenov\r\n * Built at 23/06/2022 09:21:11\r\n * Licensed under MIT\r\n */\r\n/*!\n * Datetime v1.0.0, (https://github.com/olton/DatetimeJS.git)\n * Copyright 2021 by Serhii Pimenov (https://pimenov.com.ua)\n * Datetime.js is a minimalist JavaScript library that parses, validates, manipulates, and displays dates and times for modern browsers with comfortable modern API.\n * Build at 11/01/2021 21:09:55\n * Licensed under MIT\n !*/\n(function(global) {\n    'use strict';\n\n    var DEFAULT_FORMAT = \"YYYY-MM-DDTHH:mm:ss.sss\";\n    var INVALID_DATE = \"Invalid date\";\n    var REGEX_FORMAT = /\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|m{1,2}|s{1,3}/g;\n\n    global['DATETIME_LOCALES'] = {\n        \"en\": {\n            months: \"January February March April May June July August September October November December\".split(\" \"),\n            monthsShort: \"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec\".split(\" \"),\n            weekdays: \"Sunday Monday Tuesday Wednesday Thursday Friday Saturday\".split(\" \"),\n            weekdaysShort: \"Sun Mon Tue Wed Thu Fri Sat\".split(\" \"),\n            weekdaysMin: \"Su Mo Tu We Th Fr Sa\".split(\" \"),\n            weekStart: 0\n        }\n    }\n\n    var M = {\n        ms: \"Milliseconds\",\n        s: \"Seconds\",\n        m: \"Minutes\",\n        h: \"Hours\",\n        D: \"Date\",\n        d: \"Day\",\n        M: \"Month\",\n        Y: \"FullYear\",\n        y: \"Year\",\n        t: \"Time\"\n    }\n\n    var C = {\n        ms: \"ms\",\n        s: \"second\",\n        m: \"minute\",\n        h: \"hour\",\n        D: \"day\",\n        W: \"week\",\n        d: \"weekDay\",\n        M: \"month\",\n        Y: \"year\",\n        Y2: \"year2\",\n        t: \"time\",\n        c: \"century\",\n        q: \"quarter\"\n    }\n\n    var lpad = function(str, pad, length){\n        var _str = \"\"+str;\n        if (length && _str.length >= length) {\n            return _str;\n        }\n        return Array((length + 1) - _str.length).join(pad) + _str;\n    }\n\n    var not = function(v){\n        return typeof v === \"undefined\" || v === null;\n    }\n    var datetime = function(){\n        var args;\n\n        if (arguments[0] instanceof Datetime) {\n            return datetime(arguments[0].value);\n        }\n\n        args = [].slice.call(Array.isArray(arguments[0]) ? arguments[0] : arguments);\n\n        return new (Function.prototype.bind.apply(Datetime,  [this].concat(args) ) );\n    }\n    var Datetime = function(){\n        var args = [].slice.call(arguments);\n        this.value = new (Function.prototype.bind.apply(Date,  [this].concat(args) ) );\n        this.locale = \"en\";\n        this.weekStart = global['DATETIME_LOCALES'][\"en\"].weekStart;\n        this.utcMode = false;\n        this.mutable = true;\n\n        if (isNaN(this.value.getTime())) {\n            throw new Error(INVALID_DATE);\n        }\n    }\n    Datetime.DEFAULT_FORMAT = DEFAULT_FORMAT;\n    Datetime.REGEX_FORMAT = REGEX_FORMAT;\n    Datetime.INVALID_DATE = INVALID_DATE;\n\n    Datetime.lpad = lpad;\n    Datetime.not = not;\n\n    Datetime.isDatetime = function(val){\n        return val instanceof Datetime;\n    }\n\n    Datetime.now = function(asDate){\n        return datetime()[asDate ? \"val\" : \"time\"]();\n    }\n\n    Datetime.locale = function(name, locale){\n        global['DATETIME_LOCALES'][name] = locale;\n    }\n\n    Datetime.getLocale = function(locale){\n        return global['DATETIME_LOCALES'][locale || \"en\"] || global['DATETIME_LOCALES'][\"en\"];\n    }\n\n    Datetime.parse = function(str){\n        return datetime(Date.parse(str));\n    }\n\n    Datetime.align = function(d, align){\n        var date = d instanceof Datetime ? d : datetime(d),\n            result, temp;\n\n        switch (align) {\n            case C.s:  result = date.ms(0); break; //second\n            case C.m:  result = Datetime.align(date, C.s)[C.s](0); break; //minute\n            case C.h:  result = Datetime.align(date, C.m)[C.m](0); break; //hour\n            case C.D:  result = Datetime.align(date, C.h)[C.h](0); break; //day\n            case C.M:  result = Datetime.align(date, C.D)[C.D](1); break; //month\n            case C.Y:  result = Datetime.align(date, C.M)[C.M](0); break; //year\n            case C.W:  {\n                temp = date.weekDay();\n                result = Datetime.align(date, C.D).addDay(-temp);\n                break; // week\n            }\n            default:   result = date;\n        }\n        return result;\n    }\n\n    Datetime.alignEnd = function(d, align){\n        var date = d instanceof Datetime ? d : datetime(d),\n            result, temp;\n\n        switch (align) {\n            case C.ms: result = date.ms(999); break; //second\n            case C.s:  result = Datetime.alignEnd(date, C.ms); break; //second\n            case C.m:  result = Datetime.alignEnd(date, C.s)[C.s](59); break; //minute\n            case C.h:  result = Datetime.alignEnd(date, C.m)[C.m](59); break; //hour\n            case C.D:  result = Datetime.alignEnd(date, C.h)[C.h](23); break; //day\n            case C.M:  result = Datetime.alignEnd(date, C.D)[C.D](1).add(1, C.M).add(-1, C.D); break; //month\n            case C.Y:  result = Datetime.alignEnd(date, C.D)[C.M](11)[C.D](31); break; //year\n            case C.W:  {\n                temp = date.weekDay();\n                result = Datetime.alignEnd(date, 'day').addDay(6 - temp);\n                break; // week\n            }\n\n            default:   result = date;\n        }\n\n        return result;\n    }\n    Datetime.extend = function(where){\n        var options, name,\n            length = arguments.length;\n\n        for (var i = 1; i < length; i++ ) {\n            if ( ( options = arguments[ i ] ) != null ) {\n                for ( name in options ) {\n                    if (Object.prototype.hasOwnProperty.call(options, name))\n                        where[ name ] = options[ name ];\n                }\n            }\n        }\n\n        return where;\n    };\n\n    Datetime.use = function(obj){\n        Datetime.extend(Datetime.prototype, obj);\n    }\n\n    Datetime.useStatic = function(obj){\n        Datetime.extend(Datetime, obj);\n    }\n\n    Datetime.prototype = {\n        immutable: function(v){\n            this.mutable = !(not(v) ? true : v);\n            return this;\n        },\n\n        utc: function(){\n            this.utcMode = true;\n            return this;\n        },\n\n        local: function(){\n            this.utcMode = false\n            return this;\n        },\n\n        useLocale: function(val){\n            if (!Datetime.getLocale(val)) {\n                console.warn(\"Locale \" + val + \" is not defined!\");\n                return this;\n            }\n            this.locale = val;\n            this.weekStart = Datetime.getLocale(val).weekStart;\n            return this;\n        },\n\n        clone: function(){\n            var c = datetime(this.value);\n            c.locale = this.locale;\n            c.weekStart = this.weekStart;\n            c.mutable = this.mutable;\n            return c;\n        },\n\n        align: function(to){\n            if (this.mutable) {\n                this.value = Datetime.align(this, to).val();\n                return this;\n            }\n\n            return this.clone().immutable(false).align(to).immutable(!this.mutable);\n        },\n\n        alignEnd: function(to){\n            if (this.mutable) {\n                this.value = Datetime.alignEnd(this, to).val();\n                return this;\n            }\n\n            return this.clone().immutable(false).alignEnd(to).immutable(!this.mutable);\n        },\n\n        val: function(val){\n            if ( !(val instanceof Date) )\n                return this.value;\n\n            if (this.mutable) {\n                this.value = val;\n                return this;\n            }\n\n            return datetime(val);\n        },\n\n        year2: function(){\n            return +(\"\"+this.year()).substr(-2);\n        },\n\n        _set: function(m, v){\n            var fn = \"set\" + (this.utcMode && m !== \"t\" ? \"UTC\" : \"\") + M[m];\n            if (this.mutable) {\n                this.value[fn](v);\n                return this;\n            }\n            var clone = this.clone();\n            clone.value[fn](v);\n            return clone;\n        },\n\n        _get: function(m){\n            var fn = \"get\" + (this.utcMode && m !== \"t\" ? \"UTC\" : \"\") + M[m];\n            return this.value[fn]();\n        },\n\n        _work: function(part, val){\n            if (!arguments.length || (typeof val === \"undefined\" || val === null)) {\n                return this._get(part);\n            }\n            return this._set(part, val);\n        },\n\n        ms: function(val){ return this._work(\"ms\", val);},\n        second: function(val){return this._work(\"s\", val);},\n        minute: function(val){return this._work(\"m\", val); },\n        hour: function(val){return this._work(\"h\", val);},\n        day: function(val){return this._work(\"D\", val);},\n        month: function(val){return this._work(\"M\", val);},\n        year: function(val){return this._work(\"Y\", val);},\n        time: function(val){return this._work(\"t\", val);},\n\n        weekDay: function(val){\n            if (!arguments.length || (not(val))) {\n                return this.utcMode ? this.value.getUTCDay() : this.value.getDay();\n            }\n\n            var curr = this.weekDay();\n            var diff = val - curr;\n\n            this.day(this.day() + diff);\n\n            return this;\n        },\n\n        get: function(unit){\n            return typeof this[unit] !== \"function\" ? this : this[unit]();\n        },\n\n        set: function(unit, val){\n            return typeof this[unit] !== \"function\" ? this : this[unit](val);\n        },\n\n        add: function(val, to){\n            switch (to) {\n                case C.h: return this.time(this.time() + (val * 60 * 60 * 1000));\n                case C.m: return this.time(this.time() + (val * 60 * 1000));\n                case C.s: return this.time(this.time() + (val * 1000));\n                case C.ms: return this.time(this.time() + (val));\n                case C.D: return this.day(this.day() + val);\n                case C.W: return this.day(this.day() + val * 7);\n                case C.M: return this.month(this.month() + val);\n                case C.Y: return this.year(this.year() + val);\n            }\n        },\n\n        addHour: function(v){return this.add(v,C.h);},\n        addMinute: function(v){return this.add(v,C.m);},\n        addSecond: function(v){return this.add(v, C.s);},\n        addMs: function(v){return this.add(v, C.ms);},\n        addDay: function(v){return this.add(v,C.D);},\n        addWeek: function(v){return this.add(v,C.W);},\n        addMonth: function(v){return this.add(v, C.M);},\n        addYear: function(v){return this.add(v, C.Y);},\n\n        format: function(fmt, locale){\n            var format = fmt || DEFAULT_FORMAT;\n            var names = Datetime.getLocale(locale || this.locale);\n            var year = this.year(), year2 = this.year2(), month = this.month(), day = this.day(), weekDay = this.weekDay();\n            var hour = this.hour(), minute = this.minute(), second = this.second(), ms = this.ms();\n            var matches = {\n                YY: year2,\n                YYYY: year,\n                M: month + 1,\n                MM: lpad(month + 1, \"0\", 2),\n                MMM: names.monthsShort[month],\n                MMMM: names.months[month],\n                D: day,\n                DD: lpad(day, \"0\", 2),\n                d: weekDay,\n                dd: names.weekdaysMin[weekDay],\n                ddd: names.weekdaysShort[weekDay],\n                dddd: names.weekdays[weekDay],\n                H: hour,\n                HH: lpad(hour, \"0\", 2),\n                m: minute,\n                mm: lpad(minute,\"0\", 2),\n                s: second,\n                ss: lpad(second,\"0\", 2),\n                sss: lpad(ms,\"0\", 3)\n            };\n\n            return format.replace(REGEX_FORMAT, function(match, $1){\n                return $1 || matches[match];\n            });\n        },\n\n        valueOf: function(){\n            return this.value.valueOf();\n        },\n\n        toString: function(){\n            return this.value.toString();\n        }\n    }\n\n    global.Datetime = Datetime;\n    global.datetime = datetime;\n\n}(typeof self === \"undefined\" ? typeof __webpack_require__.g === \"undefined\" ? window : __webpack_require__.g : self));\n(function() {\n    'use strict';\n\n    var fnFormat = Datetime.prototype.format;\n\n    Datetime.use({\n        buddhist: function(){\n            return this.year() + 543;\n        },\n\n        format: function(format, locale){\n            format = format || Datetime.DEFAULT_FORMAT;\n            var matches = {\n                BB: (this.buddhist()+\"\").slice(-2),\n                BBBB: this.buddhist()\n            }\n            var result = format.replace(/(\\[[^\\]]+])|B{4}|B{2}/g, function(match, $1){\n                return $1 || matches[match];\n            })\n            return fnFormat.bind(this)(result, locale)\n        }\n    });\n}());\n(function() {\n    'use strict';\n\n    Datetime.use({\n        calendar: function(iso){\n            return Datetime.calendar(this, iso);\n        }\n    });\n\n    Datetime.useStatic({\n        calendar: function(d, iso){\n            var date = d instanceof Datetime ? d.clone().align(\"month\") : datetime(d);\n            var ws = iso === 0 || iso ? iso : date.weekStart;\n            var wd = ws ? date.isoWeekDay() : date.weekDay();\n            var names = Datetime.getLocale(date.locale);\n            var now = datetime(), i;\n\n            var getWeekDays = function (wd, ws){\n                if (ws === 0) {\n                    return wd;\n                }\n                var su = wd[0];\n                return wd.slice(1).concat([su]);\n            }\n\n            var result = {\n                month: names.months[date.month()],\n                days: [],\n                weekstart: iso ? 1 : 0,\n                weekdays: getWeekDays(names.weekdaysMin,ws),\n                today: now.format(\"YYYY-MM-DD\"),\n                weekends: [],\n                week: []\n            };\n\n            date.addDay(ws ? -wd+1 : -wd);\n\n            for(i = 0; i < 42; i++) {\n                result.days.push(date.format(\"YYYY-MM-DD\"));\n                date.add(1, 'day');\n            }\n\n            result.weekends = result.days.filter(function(v, i){\n                var def = [0,6,7,13,14,20,21,27,28,34,35,41];\n                var iso = [5,6,12,13,19,20,26,27,33,34,40,41];\n\n                return ws === 0 ? def.indexOf(i) > -1 : iso.indexOf(i) > -1;\n            });\n\n            date = now.clone();\n            wd = ws ? date.isoWeekDay() : date.weekDay();\n            date.addDay(ws ? -wd+1 : -wd);\n            for (i = 0; i < 7; i++) {\n                result.week.push(date.format(\"YYYY-MM-DD\"));\n                date.add(1, 'day');\n            }\n\n            return result;\n        }\n    });\n}());\n\n(function() {\n    'use strict';\n\n    var oldFormat = Datetime.prototype.format;\n\n    Datetime.use({\n        century: function(){\n            return parseInt(this.year() / 100);\n        },\n\n        format: function(format, locale){\n            format = format || Datetime.DEFAULT_FORMAT;\n            var matches = {\n                C: this.century()\n            }\n            var result = format.replace(/(\\[[^\\]]+])|C/g, function(match, $1){\n                return $1 || matches[match];\n            })\n            return oldFormat.bind(this)(result, locale)\n        }\n    })\n}());\n(function() {\n    'use strict';\n\n    Datetime.use({\n        same: function(d){\n            return this.time() === datetime(d).time();\n        },\n        compare: function(d, align, operator){\n            var date = datetime(d);\n            var curr = datetime(this.value);\n            var t1, t2;\n\n            operator = operator || \"=\";\n\n            if ([\"<\", \">\", \">=\", \"<=\", \"=\", \"!=\"].indexOf(operator) === -1) {\n                operator = \"=\";\n            }\n\n            align = (align || \"ms\").toLowerCase();\n\n            t1 = curr.align(align).time();\n            t2 = date.align(align).time();\n\n            switch (operator) {\n                case \"<\":\n                    return t1 < t2;\n                case \">\":\n                    return t1 > t2;\n                case \"<=\":\n                    return t1 <= t2;\n                case \">=\":\n                    return t1 >= t2;\n                case \"=\":\n                    return t1 === t2;\n                case \"!=\":\n                    return t1 !== t2;\n            }\n        },\n\n        between: function(d1, d2){\n            return this.younger(d1) && this.older(d2);\n        },\n\n        older: function(date, align){\n            return this.compare(date, align, \"<\");\n        },\n\n        olderOrEqual: function(date, align){\n            return this.compare(date, align, \"<=\");\n        },\n\n        younger: function(date, align){\n            return this.compare(date, align, \">\");\n        },\n\n        youngerOrEqual: function(date, align){\n            return this.compare(date, align, \">=\");\n        },\n\n        equal: function(date, align){\n            return this.compare(date, align, \"=\");\n        },\n\n        notEqual: function(date, align){\n            return this.compare(date, align, \"!=\");\n        },\n\n        diff: function(d){\n            var date = datetime(d);\n            var diff = Math.abs(this.time() - date.time());\n            var diffMonth = Math.abs(this.month() - date.month() + (12 * (this.year() - date.year())));\n\n            return {\n                \"ms\": diff,\n                \"second\": Math.ceil(diff / 1000),\n                \"minute\": Math.ceil(diff / (1000 * 60)),\n                \"hour\": Math.ceil(diff / (1000 * 60 * 60)),\n                \"day\": Math.ceil(diff / (1000 * 60 * 60 * 24)),\n                \"month\": diffMonth,\n                \"year\": Math.floor(diffMonth / 12)\n            }\n        },\n\n        distance: function(d, align){\n            return this.diff(d)[align];\n        }\n    })\n}());\n(function() {\n    'use strict';\n\n    Datetime.use({\n        dayOfYear: function(){\n            var dayCount = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n            var month = this.month();\n            var day = this.day();\n            return dayCount[month] + day + ((month > 1 && this.isLeapYear()) ? 1 : 0);\n        }\n    })\n}());\n(function() {\n    'use strict';\n\n    Datetime.use({\n        daysInMonth: function(){\n            var curr = datetime(this.value);\n            return curr.add(1, 'month').day(1).add(-1, 'day').day();\n        },\n\n        daysInYear: function(){\n            return this.isLeapYear() ? 366 : 365;\n        },\n\n        daysInYearMap: function(){\n            var result = [];\n            var curr = datetime(this.value);\n\n            curr.month(0).day(1);\n\n            for(var i = 0; i < 12; i++) {\n                curr.add(1, 'month').add(-1, 'day');\n                result.push(curr.day());\n                curr.day(1).add(1, 'month');\n            }\n            return result;\n        },\n\n        daysInYearObj: function(locale, shortName){\n            var map = this.daysInYearMap();\n            var result = {};\n            var names = Datetime.getLocale(locale || this.locale);\n\n            map.forEach(function(v, i){\n                result[names[shortName ? 'monthsShort' : 'months'][i]] = v;\n            });\n\n            return result;\n        }\n    })\n}());\n(function() {\n    'use strict';\n\n    Datetime.use({\n        decade: function(){\n            return Math.floor(this.year()/10) * 10;\n        },\n\n        decadeStart: function(){\n            var decade = this.decade();\n            var result = this.mutable ? this : this.clone();\n\n            return result.year(decade).month(0).day(1);\n        },\n\n        decadeEnd: function(){\n            var decade = this.decade() + 9;\n            var result = this.mutable ? this : this.clone();\n\n            return result.year(decade).month(11).day(31);\n        },\n\n        decadeOfMonth: function(){\n            var part = this.clone().add(1, \"month\").day(1).add(-1, 'day').day() / 3;\n            var day = this.day();\n\n            if (day <= part) return 1;\n            if (day <= part * 2) return 2;\n            return 3;\n        }\n    })\n}());\n(function() {\n    'use strict';\n\n    Datetime.useStatic({\n        from: function(str, format, locale){\n            var norm, normFormat, fItems, dItems;\n            var iMonth, iDay, iYear, iHour, iMinute, iSecond, iMs;\n            var year, month, day, hour, minute, second, ms;\n            var parsedMonth;\n\n            var getIndex = function(where, what){\n                return where.map(function(el){\n                    return el.toLowerCase();\n                }).indexOf(what.toLowerCase());\n            }\n\n            var monthNameToNumber = function(month){\n                var i = -1;\n                var names = Datetime.getLocale(locale || 'en');\n\n                if (Datetime.not(month)) return -1;\n\n                i = getIndex(names.months, month);\n\n                if (i === -1 && typeof names[\"monthsParental\"] !== \"undefined\") {\n                    i = getIndex(names.monthsParental, month);\n                }\n\n                if (i === -1) {\n                    month = month.substr(0, 3);\n                    i = getIndex(names.monthsShort, month);\n                }\n\n                return i === -1 ? -1 : i + 1;\n            };\n\n            var getPartIndex = function(part){\n                var parts = {\n                    \"month\": [\"M\", \"mm\", \"%m\"],\n                    \"day\": [\"D\", \"dd\", \"%d\"],\n                    \"year\": [\"YY\", \"YYYY\", \"yy\", \"yyyy\", \"%y\"],\n                    \"hour\": [\"h\", \"hh\", \"%h\"],\n                    \"minute\": [\"m\", \"mi\", \"i\", \"ii\", \"%i\"],\n                    \"second\": [\"s\", \"ss\", \"%s\"],\n                    \"ms\": [\"sss\"]\n                }\n\n                var result = -1, key, index;\n\n                for(var i = 0; i < parts[part].length; i++) {\n                    key = parts[part][i];\n                    index = fItems.indexOf(key);\n                    if (index !== -1) {\n                        result = index;\n                        break;\n                    }\n                }\n\n                return result;\n            }\n\n            if (Datetime.not(format) || (\"\"+format).trim() === \"\") {\n                return datetime();\n            }\n            norm = str.replace(/[\\/,.:\\s]/g, '-');\n            normFormat = format.toLowerCase().replace(/[^a-zA-Z0-9%]/g, '-');\n            fItems = normFormat.split('-');\n            dItems = norm.split('-');\n\n            if (norm.replace(/-/g,\"\").trim() === \"\") {\n                throw new Error(Datetime.INVALID_DATE);\n            }\n\n            iMonth = getPartIndex(\"month\");\n            iDay = getPartIndex(\"day\");\n            iYear = getPartIndex(\"year\");\n            iHour = getPartIndex(\"hour\");\n            iMinute = getPartIndex(\"minute\");\n            iSecond = getPartIndex(\"second\");\n            iMs = getPartIndex(\"ms\");\n\n            if (iMonth > -1 && dItems[iMonth]) {\n                if (isNaN(parseInt(dItems[iMonth]))) {\n                    dItems[iMonth] = monthNameToNumber(dItems[iMonth]);\n                    if (dItems[iMonth] === -1) {\n                        iMonth = -1;\n                    }\n                } else {\n                    parsedMonth = parseInt(dItems[iMonth]);\n                    if (parsedMonth < 1 || parsedMonth > 12) {\n                        iMonth = -1;\n                    }\n                }\n            } else {\n                iMonth = -1;\n            }\n\n            year  = iYear > -1 && dItems[iYear] ? dItems[iYear] : 0;\n            month = iMonth > -1 && dItems[iMonth] ? dItems[iMonth] : 1;\n            day   = iDay > -1 && dItems[iDay] ? dItems[iDay] : 1;\n\n            hour    = iHour > -1 && dItems[iHour] ? dItems[iHour] : 0;\n            minute  = iMinute > -1 && dItems[iMinute] ? dItems[iMinute] : 0;\n            second  = iSecond > -1 && dItems[iSecond] ? dItems[iSecond] : 0;\n            ms  = iMs > -1 && dItems[iMs] ? dItems[iMs] : 0;\n\n            return datetime(year, month-1, day, hour, minute, second, ms);\n        }\n    })\n}());\n(function() {\n    'use strict';\n\n    var fnFormat = Datetime.prototype.format;\n    var lpad = Datetime.lpad;\n\n    Datetime.use({\n        ampm: function(isLowerCase){\n            var val = this.hour() < 12 ? \"AM\" : \"PM\";\n            return isLowerCase ? val.toLowerCase() : val;\n        },\n\n        hour12: function(h, p){\n            var hour = h;\n\n            if (arguments.length === 0) {\n                return this.hour() % 12;\n            }\n\n            p = p || 'am';\n\n            if (p.toLowerCase() === \"pm\") {\n                hour += 12;\n            }\n\n            return this.hour(hour);\n        },\n\n        format: function(format, locale){\n            var matches, result, h12 = this.hour12();\n\n            format = format || Datetime.DEFAULT_FORMAT;\n\n            matches = {\n                a: \"[\"+this.ampm(true)+\"]\",\n                A: \"[\"+this.ampm(false)+\"]\",\n                h: h12,\n                hh: lpad(h12, \"0\", 2)\n            };\n\n            result = format.replace(/(\\[[^\\]]+])|a|A|h{1,2}/g, function(match, $1){\n                return $1 || matches[match];\n            });\n\n            return fnFormat.bind(this)(result, locale)\n        }\n    })\n}());\n(function() {\n    'use strict';\n\n    Datetime.use({\n        isLeapYear: function(){\n            var year = this.year();\n            return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;\n        }\n    })\n}());\n(function() {\n    'use strict';\n\n    var fnFormat = Datetime.prototype.format;\n    var fnAlign = Datetime.align;\n    var fnAlignEnd = Datetime.alignEnd;\n\n    Datetime.useStatic({\n        align: function(d, align){\n            var date = d instanceof Datetime ? d : datetime(d),\n                result, temp;\n\n            switch(align) {\n                case \"isoWeek\":\n                    temp = date.isoWeekDay();\n                    result = fnAlign(date, 'day').addDay(-temp + 1);\n                    break; // isoWeek\n\n                default: result = fnAlign.apply(this, [date, align]);\n            }\n\n            return result;\n        },\n\n        alignEnd: function(d, align){\n            var date = d instanceof Datetime ? d : datetime(d),\n                result, temp;\n\n            switch(align) {\n                case \"isoWeek\":\n                    temp = date.isoWeekDay();\n                    result = fnAlignEnd(date, 'day').addDay(7 - temp);\n                    break; // isoWeek\n\n                default: result = fnAlignEnd.apply(this, [date, align]);\n            }\n\n            return result;\n        }\n    })\n\n    Datetime.use({\n        isoWeekDay: function(val){\n            var wd = (this.weekDay() + 6) % 7 + 1;\n\n            if (!arguments.length || (Datetime.not(val))) {\n                return wd;\n            }\n\n            return this.addDay(val - wd);\n        },\n\n        format: function(format, locale){\n            format = format || Datetime.DEFAULT_FORMAT;\n            var matches = {\n                I: this.isoWeekDay()\n            }\n            var result = format.replace(/(\\[[^\\]]+])|I{1,2}/g, function(match, $1){\n                return $1 || matches[match];\n            })\n            return fnFormat.bind(this)(result, locale)\n        }\n    })\n}());\n(function() {\n    'use strict';\n\n    Datetime.useStatic({\n        max: function(){\n            var arr = [].slice.call(arguments);\n\n            return arr.map(function(el){\n                return datetime(el);\n            }).sort(function(a, b){\n                return b.time() - a.time()\n            })[0];\n        }\n    });\n\n    Datetime.use({\n        max: function(){\n            return Datetime.max.apply(this, [this].concat([].slice.call(arguments)));\n        }\n    });\n}());\n(function() {\n    'use strict';\n\n    Datetime.useStatic({\n        min: function(){\n            var arr = [].slice.call(arguments);\n\n            return arr.map(function(el){\n                return datetime(el);\n            }).sort(function(a, b){\n                return a.time() - b.time()\n            })[0];\n        }\n    });\n\n    Datetime.use({\n        min: function(){\n            return Datetime.min.apply(this, [this].concat([].slice.call(arguments)));\n        }\n    })\n}());\n(function() {\n    'use strict';\n\n    var fnAlign = Datetime.align;\n    var fnAlignEnd = Datetime.alignEnd;\n    var fnAdd = Datetime.prototype.add;\n\n    Datetime.useStatic({\n        align: function(d, align){\n            var date = d instanceof Datetime ? d : datetime(d),\n                result;\n\n            switch(align) {\n                case \"quarter\":  result = Datetime.align(date, 'day').day(1).month(date.quarter() * 3 - 3); break; //quarter\n                default: result = fnAlign.apply(this, [date, align]);\n            }\n\n            return result;\n        },\n\n        alignEnd: function(d, align){\n            var date = d instanceof Datetime ? d : datetime(d),\n                result;\n\n            switch(align) {\n                case \"quarter\":  result = Datetime.align(date, 'quarter').add(3, 'month').add(-1, 'ms'); break; //quarter\n                default: result = fnAlignEnd.apply(this, [date, align]);\n            }\n\n            return result;\n        }\n    })\n\n    Datetime.use({\n        quarter: function(){\n            var month = this.month();\n\n            if (month <= 2) return 1;\n            if (month <= 5) return 2;\n            if (month <= 8) return 3;\n            return 4;\n        },\n\n        add: function(val, to){\n            if (to === \"quarter\") {\n                return this.month(this.month() + val * 3);\n            }\n            return fnAdd.bind(this)(val, to);\n        },\n\n        addQuarter: function(v){\n            return this.add(v, \"quarter\");\n        }\n    })\n}());\n(function() {\n    'use strict';\n\n    Datetime.useStatic({\n        sort: function(arr, opt){\n            var result, _arr;\n            var o = {};\n\n            if (typeof opt === \"string\" || typeof opt !== \"object\" || Datetime.not(opt)) {\n                o.format = Datetime.DEFAULT_FORMAT;\n                o.dir = opt && opt.toUpperCase() === \"DESC\" ? \"DESC\" : \"ASC\";\n                o.returnAs = \"datetime\";\n            } else {\n                o.format = opt.format || Datetime.DEFAULT_FORMAT;\n                o.dir = (opt.dir || \"ASC\").toUpperCase();\n                o.returnAs = opt.format ? \"string\" : opt.returnAs || \"datetime\";\n            }\n\n            _arr =  arr.map(function(el){\n                return datetime(el);\n            }).sort(function(a, b){\n                return a.valueOf() - b.valueOf();\n            });\n\n            if (o.dir === \"DESC\") {\n                _arr.reverse();\n            }\n\n            switch (o.returnAs) {\n                case \"string\":\n                    result = _arr.map(function(el){\n                        return el.format(o.format)\n                    });\n                    break;\n                case \"date\":\n                    result = _arr.map(function(el){\n                        return el.val();\n                    });\n                    break;\n\n                default: result = _arr;\n            }\n\n            return result;\n        }\n    })\n}());\n(function() {\n    'use strict';\n\n    var REGEX_FORMAT_STRFTIME = /(%[a-z])/gi;\n    var DEFAULT_FORMAT_STRFTIME = \"%Y-%m-%dT%H:%M:%S.%Q%t\";\n\n    var lpad = Datetime.lpad;\n\n    Datetime.use({\n        strftime: function(fmt, locale){\n            var format = fmt || DEFAULT_FORMAT_STRFTIME;\n            var names = Datetime.getLocale(locale || this.locale);\n            var year = this.year(), year2 = this.year2(), month = this.month(), day = this.day(), weekDay = this.weekDay();\n            var hour = this.hour(), hour12 = this.hour12(), minute = this.minute(), second = this.second(), ms = this.ms(), time = this.time();\n            var aDay = lpad(day, \"0\", 2),\n                aMonth = lpad(month + 1, \"0\", 2),\n                aHour = lpad(hour, \"0\", 2),\n                aHour12 = lpad(hour12, \"0\", 2),\n                aMinute = lpad(minute, \"0\", 2),\n                aSecond = lpad(second, \"0\", 2),\n                aMs = lpad(ms, \"0\", 3);\n\n            var that = this;\n\n            var thursday = function(){\n                var target = datetime(that.value);\n                target.day(that.day() - ((that.weekDay() + 6) % 7) + 3);\n                return target;\n            };\n\n            var matches = {\n                '%a': names.weekdaysShort[weekDay],\n                '%A': names.weekdays[weekDay],\n                '%b': names.monthsShort[month],\n                '%h': names.monthsShort[month],\n                '%B': names.months[month],\n                '%c': this.toString().substring(0, this.toString().indexOf(\" (\")),\n                '%C': this.century(),\n                '%d': aDay,\n                '%D': [aDay, aMonth, year].join(\"/\"),\n                '%e': day,\n                '%F': [year, aMonth, aDay].join(\"-\"),\n                '%G': thursday().year(),\n                '%g': (\"\"+thursday().year()).slice(2),\n                '%H': aHour,\n                '%I': aHour12,\n                '%j': lpad(this.dayOfYear(), \"0\", 3),\n                '%k': aHour,\n                '%l': aHour12,\n                '%m': aMonth,\n                '%n': month + 1,\n                '%M': aMinute,\n                '%p': this.ampm(),\n                '%P': this.ampm(true),\n                '%s': Math.round(time / 1000),\n                '%S': aSecond,\n                '%u': this.isoWeekDay(),\n                '%V': this.isoWeekNumber(),\n                '%w': weekDay,\n                '%x': this.toLocaleDateString(),\n                '%X': this.toLocaleTimeString(),\n                '%y': year2,\n                '%Y': year,\n                '%z': this.timezone().replace(\":\", \"\"),\n                '%Z': this.timezoneName(),\n                '%r': [aHour12, aMinute, aSecond].join(\":\") + \" \" + this.ampm(),\n                '%R': [aHour, aMinute].join(\":\"),\n                \"%T\": [aHour, aMinute, aSecond].join(\":\"),\n                \"%Q\": aMs,\n                \"%q\": ms,\n                \"%t\": this.timezone()\n            };\n\n            return format.replace(REGEX_FORMAT_STRFTIME, function(match){\n                return (matches[match] === 0 || matches[match] ? matches[match] : match);\n            });\n        }\n    });\n}());\n(function() {\n    'use strict';\n\n    var fnFormat = Datetime.prototype.format;\n\n    Datetime.use({\n        utcOffset: function(){\n            return this.value.getTimezoneOffset();\n        },\n\n        timezone: function(){\n            return this.toTimeString().replace(/.+GMT([+-])(\\d{2})(\\d{2}).+/, '$1$2:$3');\n        },\n\n        timezoneName: function(){\n            return this.toTimeString().replace(/.+\\((.+?)\\)$/, '$1');\n        },\n\n        format: function(format, locale){\n            format = format || Datetime.DEFAULT_FORMAT;\n\n            var matches = {\n                Z: this.utcMode ? \"Z\" : this.timezone(),\n                ZZ: this.timezone().replace(\":\", \"\"),\n                ZZZ: \"[GMT]\"+this.timezone(),\n                z: this.timezoneName()\n            }\n            var result = format.replace(/(\\[[^\\]]+])|Z{1,3}|z/g, function(match, $1){\n                return $1 || matches[match];\n            })\n\n            return fnFormat.bind(this)(result, locale)\n        }\n    })\n}());\n(function() {\n    'use strict';\n\n    Datetime.useStatic({\n        isToday: function(date){\n            var d = datetime(date).align(\"day\");\n            var c = datetime().align('day');\n\n            return d.time() === c.time();\n        }\n    })\n\n    Datetime.use({\n        isToday: function(){\n            return Datetime.isToday(this);\n        },\n\n        today: function(){\n            var now = datetime();\n            if (!this.mutable) {\n                return now;\n            }\n            return this.val(now.val());\n        }\n    })\n}());\n(function() {\n    'use strict';\n\n    Datetime.useStatic({\n        isTomorrow: function(date){\n            var d = datetime(date).align(\"day\");\n            var c = datetime().align('day').add(1, 'day');\n\n            return d.time() === c.time();\n        }\n    });\n\n    Datetime.use({\n        isTomorrow: function(){\n            return Datetime.isTomorrow(this);\n        },\n\n        tomorrow: function(){\n            if (!this.mutable) {\n                return this.clone().add(1, 'day');\n            }\n            return this.add(1, 'day');\n        }\n    });\n}());\n(function() {\n    'use strict';\n\n    Datetime.use({\n        toDateString: function(){\n            return this.value.toDateString();\n        },\n\n        toISOString: function(){\n            return this.value.toISOString();\n        },\n\n        toJSON: function(){\n            return this.value.toJSON();\n        },\n\n        toGMTString: function(){\n            return this.value.toGMTString();\n        },\n\n        toLocaleDateString: function(){\n            return this.value.toLocaleDateString();\n        },\n\n        toLocaleString: function(){\n            return this.value.toLocaleString();\n        },\n\n        toLocaleTimeString: function(){\n            return this.value.toLocaleTimeString();\n        },\n\n        toTimeString: function(){\n            return this.value.toTimeString();\n        },\n\n        toUTCString: function(){\n            return this.value.toUTCString();\n        },\n\n        toDate: function(){\n            return new Date(this.value);\n        }\n    });\n}());\n(function() {\n    'use strict';\n\n    Datetime.useStatic({\n        timestamp: function(){\n            return new Date().getTime() / 1000;\n        }\n    })\n\n    Datetime.use({\n        unix: function(val) {\n            var _val;\n\n            if (!arguments.length || (Datetime.not(val))) {\n                return Math.floor(this.valueOf() / 1000)\n            }\n\n            _val = val * 1000;\n\n            if (this.mutable) {\n                return this.time(_val);\n            }\n\n            return datetime(this.value).time(_val);\n        },\n\n        timestamp: function(){\n            return this.unix();\n        }\n    });\n}());\n(function() {\n    'use strict';\n\n    var fnFormat = Datetime.prototype.format;\n    var lpad = Datetime.lpad;\n\n    Datetime.use({\n        weekNumber: function (weekStart) {\n            var nYear, nday, newYear, day, daynum, weeknum;\n\n            weekStart = +weekStart || 0;\n            newYear = datetime(this.year(), 0, 1);\n            day = newYear.weekDay() - weekStart;\n            day = (day >= 0 ? day : day + 7);\n            daynum = Math.floor(\n                (this.time() - newYear.time() - (this.utcOffset() - newYear.utcOffset()) * 60000) / 86400000\n            ) + 1;\n\n            if(day < 4) {\n                weeknum = Math.floor((daynum + day - 1) / 7) + 1;\n                if(weeknum > 52) {\n                    nYear = datetime(this.year() + 1, 0, 1);\n                    nday = nYear.weekDay() - weekStart;\n                    nday = nday >= 0 ? nday : nday + 7;\n                    weeknum = nday < 4 ? 1 : 53;\n                }\n            }\n            else {\n                weeknum = Math.floor((daynum + day - 1) / 7);\n            }\n            return weeknum;\n        },\n\n        isoWeekNumber: function(){\n            return this.weekNumber(1);\n        },\n\n        weeksInYear: function(weekStart){\n            var curr = datetime(this.value);\n            return curr.month(11).day(31).weekNumber(weekStart);\n        },\n\n        format: function(format, locale){\n            var matches, result, wn = this.weekNumber(), wni = this.isoWeekNumber();\n\n            format = format || Datetime.DEFAULT_FORMAT;\n\n            matches = {\n                W: wn,\n                WW: lpad(wn, \"0\", 2),\n                WWW: wni,\n                WWWW: lpad(wni, \"0\", 2)\n            };\n\n            result = format.replace(/(\\[[^\\]]+])|W{1,4}/g, function(match, $1){\n                return $1 || matches[match];\n            });\n\n            return fnFormat.bind(this)(result, locale)\n        }\n    })\n}());\n(function() {\n    'use strict';\n\n    Datetime.useStatic({\n        isYesterday: function(date){\n            var d = datetime(date).align(\"day\");\n            var c = datetime().align('day').add(-1, 'day');\n\n            return d.time() === c.time();\n        }\n    });\n\n    Datetime.use({\n        isYesterday: function(){\n            return Datetime.isYesterday(this);\n        },\n\n        yesterday: function(){\n            if (!this.mutable) {\n                return this.clone().add(-1, 'day');\n            }\n            return this.add(-1, 'day');\n        }\n    })\n}());\n(function() {\n    'use strict';\n\n    function getResult (val) {\n        var res\n        var seconds = Math.floor(val / 1000),\n            minutes = Math.floor(seconds / 60),\n            hours = Math.floor(minutes / 60),\n            days = Math.floor(hours / 24),\n            months = Math.floor(days / 30),\n            years = Math.floor(months / 12)\n\n        if (years >= 1) res = years+\" year\";\n        if (months >= 1 && years < 1) res = months+\" mon\";\n        if (days >= 1 && days <= 30) res = days+\" days\";\n        if (hours && hours < 24) res = hours+\" hour\";\n        if (minutes && (minutes >= 40 && minutes < 60)) res = \"less a hour\";\n        if (minutes && minutes < 40) res = minutes+\" min\";\n        if (seconds && seconds >= 30 && seconds < 60) res = seconds+\" sec\";\n        if (seconds < 30) res = \"few sec\";\n\n        return res\n    }\n\n    Datetime.useStatic({\n        timeLapse: function(date){\n            var old = datetime(date),\n                now = datetime(),\n                val = now - old\n\n            return getResult(val)\n        }\n    });\n\n    Datetime.use({\n        timeLapse: function() {\n            var val = datetime() - +this\n            return getResult(val)\n        }\n    })\n}());\n\r\n\r\n(function() {\n    'use strict';\n\n    var getLocale = Datetime.getLocale;\n\n    Datetime.getLocale = function(locale){\n        var data;\n\n        if (!Metro) {\n            locale = 'en';\n            return getLocale.call(this, locale);\n        }\n\n        if (!Metro.locales[locale]) {\n            locale = \"en-US\";\n        }\n\n        data = Metro.locales[locale]['calendar'];\n\n        return {\n            months: data.months.filter( function(el, i){ return i < 12} ),\n            monthsShort: data.months.filter( function(el, i){ return i > 11} ),\n            weekdays: data.days.filter( function(el, i){ return i < 7} ),\n            weekdaysShort: data.days.filter( function(el, i){ return i > 13} ),\n            weekdaysMin: data.days.filter( function(el, i){ return i > 6 && i < 14} ),\n            weekStart: data.weekStart\n        }\n    }\n}());\r\n\r\n/*! \n * Cake string library 1.0.0\n * https://github.com/olton/cake\n *\n * Copyright 2020-2021 Serhii Pimenov\n * Released under the MIT license\n */\n\n(function () {\n    'use strict';\n\n    var isNull = function isNull(val) {\n      return val === undefined || val === null;\n    };\n\n    /**\n     * A regular expression string matching digits\n     */\n    var digit = '\\\\d';\n    /**\n     * A regular expression string matching whitespace\n     */\n\n    var whitespace = \"\\\\s\\\\uFEFF\\\\xA0\";\n    /**\n     * A regular expression string matching diacritical mark\n     */\n\n    var diacriticalMark = \"\\\\u0300-\\\\u036F\\\\u1AB0-\\\\u1AFF\\\\u1DC0-\\\\u1DFF\\\\u20D0-\\\\u20FF\\\\uFE20-\\\\uFE2F\";\n    /**\n     * A regular expression to match the General Punctuation Unicode block\n     */\n\n    var generalPunctuationBlock = \"\\\\u2000-\\\\u206F\";\n    /**\n     * A regular expression to match non characters from from Basic Latin and Latin-1 Supplement Unicode blocks\n     */\n\n    var nonCharacter = '\\\\x00-\\\\x2F\\\\x3A-\\\\x40\\\\x5B-\\\\x60\\\\x7b-\\\\xBF\\\\xD7\\\\xF7';\n    /**\n     * A regular expression to match the dingbat Unicode block\n     */\n\n    var dingbatBlock = \"\\\\u2700-\\\\u27BF\";\n    /**\n     * A regular expression string that matches lower case letters: LATIN\n     */\n\n    var lowerCaseLetter = \"a-z\\\\xB5\\\\xDF-\\\\xF6\\\\xF8-\\\\xFF\\\\u0101\\\\u0103\\\\u0105\\\\u0107\\\\u0109\\\\u010B\\\\u010D\\\\u010F\\\\u0111\\\\u0113\\\\u0115\\\\u0117\\\\u0119\\\\u011B\\\\u011D\\\\u011F\\\\u0121\\\\u0123\\\\u0125\\\\u0127\\\\u0129\\\\u012B\\\\u012D\\\\u012F\\\\u0131\\\\u0133\\\\u0135\\\\u0137\\\\u0138\\\\u013A\\\\u013C\\\\u013E\\\\u0140\\\\u0142\\\\u0144\\\\u0146\\\\u0148\\\\u0149\\\\u014B\\\\u014D\\\\u014F\\\\u0151\\\\u0153\\\\u0155\\\\u0157\\\\u0159\\\\u015B\\\\u015D\\\\u015F\\\\u0161\\\\u0163\\\\u0165\\\\u0167\\\\u0169\\\\u016B\\\\u016D\\\\u016F\\\\u0171\\\\u0173\\\\u0175\\\\u0177\\\\u017A\\\\u017C\\\\u017E-\\\\u0180\\\\u0183\\\\u0185\\\\u0188\\\\u018C\\\\u018D\\\\u0192\\\\u0195\\\\u0199-\\\\u019B\\\\u019E\\\\u01A1\\\\u01A3\\\\u01A5\\\\u01A8\\\\u01AA\\\\u01AB\\\\u01AD\\\\u01B0\\\\u01B4\\\\u01B6\\\\u01B9\\\\u01BA\\\\u01BD-\\\\u01BF\\\\u01C6\\\\u01C9\\\\u01CC\\\\u01CE\\\\u01D0\\\\u01D2\\\\u01D4\\\\u01D6\\\\u01D8\\\\u01DA\\\\u01DC\\\\u01DD\\\\u01DF\\\\u01E1\\\\u01E3\\\\u01E5\\\\u01E7\\\\u01E9\\\\u01EB\\\\u01ED\\\\u01EF\\\\u01F0\\\\u01F3\\\\u01F5\\\\u01F9\\\\u01FB\\\\u01FD\\\\u01FF\\\\u0201\\\\u0203\\\\u0205\\\\u0207\\\\u0209\\\\u020B\\\\u020D\\\\u020F\\\\u0211\\\\u0213\\\\u0215\\\\u0217\\\\u0219\\\\u021B\\\\u021D\\\\u021F\\\\u0221\\\\u0223\\\\u0225\\\\u0227\\\\u0229\\\\u022B\\\\u022D\\\\u022F\\\\u0231\\\\u0233-\\\\u0239\\\\u023C\\\\u023F\\\\u0240\\\\u0242\\\\u0247\\\\u0249\\\\u024B\\\\u024D\\\\u024F\";\n    /**\n     * A regular expression string that matches upper case letters: LATIN\n     */\n\n    var upperCaseLetter = \"\\\\x41-\\\\x5a\\\\xc0-\\\\xd6\\\\xd8-\\\\xde\\\\u0100\\\\u0102\\\\u0104\\\\u0106\\\\u0108\\\\u010a\\\\u010c\\\\u010e\\\\u0110\\\\u0112\\\\u0114\\\\u0116\\\\u0118\\\\u011a\\\\u011c\\\\u011e\\\\u0120\\\\u0122\\\\u0124\\\\u0126\\\\u0128\\\\u012a\\\\u012c\\\\u012e\\\\u0130\\\\u0132\\\\u0134\\\\u0136\\\\u0139\\\\u013b\\\\u013d\\\\u013f\\\\u0141\\\\u0143\\\\u0145\\\\u0147\\\\u014a\\\\u014c\\\\u014e\\\\u0150\\\\u0152\\\\u0154\\\\u0156\\\\u0158\\\\u015a\\\\u015c\\\\u015e\\\\u0160\\\\u0162\\\\u0164\\\\u0166\\\\u0168\\\\u016a\\\\u016c\\\\u016e\\\\u0170\\\\u0172\\\\u0174\\\\u0176\\\\u0178\\\\u0179\\\\u017b\\\\u017d\\\\u0181\\\\u0182\\\\u0184\\\\u0186\\\\u0187\\\\u0189-\\\\u018b\\\\u018e-\\\\u0191\\\\u0193\\\\u0194\\\\u0196-\\\\u0198\\\\u019c\\\\u019d\\\\u019f\\\\u01a0\\\\u01a2\\\\u01a4\\\\u01a6\\\\u01a7\\\\u01a9\\\\u01ac\\\\u01ae\\\\u01af\\\\u01b1-\\\\u01b3\\\\u01b5\\\\u01b7\\\\u01b8\\\\u01bc\\\\u01c4\\\\u01c5\\\\u01c7\\\\u01c8\\\\u01ca\\\\u01cb\\\\u01cd\\\\u01cf\\\\u01d1\\\\u01d3\\\\u01d5\\\\u01d7\\\\u01d9\\\\u01db\\\\u01de\\\\u01e0\\\\u01e2\\\\u01e4\\\\u01e6\\\\u01e8\\\\u01ea\\\\u01ec\\\\u01ee\\\\u01f1\\\\u01f2\\\\u01f4\\\\u01f6-\\\\u01f8\\\\u01fa\\\\u01fc\\\\u01fe\\\\u0200\\\\u0202\\\\u0204\\\\u0206\\\\u0208\\\\u020a\\\\u020c\\\\u020e\\\\u0210\\\\u0212\\\\u0214\\\\u0216\\\\u0218\\\\u021a\\\\u021c\\\\u021e\\\\u0220\\\\u0222\\\\u0224\\\\u0226\\\\u0228\\\\u022a\\\\u022c\\\\u022e\\\\u0230\\\\u0232\\\\u023a\\\\u023b\\\\u023d\\\\u023e\\\\u0241\\\\u0243-\\\\u0246\\\\u0248\\\\u024a\\\\u024c\\\\u024e\";\n\n    /**\n     * Regular expression to match whitespaces from the left side\n     */\n\n    var REGEXP_TRIM_LEFT = new RegExp('^[' + whitespace + ']+');\n    /**\n     * Regular expression to match whitespaces from the right side\n     */\n\n    var REGEXP_TRIM_RIGHT = new RegExp('[' + whitespace + ']+$');\n    /**\n     * Regular expression to match digit characters\n     */\n\n    var REGEXP_DIGIT = new RegExp('^' + digit + '+$');\n    /**\n     * Regular expression to match HTML special characters.\n     */\n\n    var REGEXP_HTML_SPECIAL_CHARACTERS = /[<>&\"'`]/g;\n    var REGEXP_TAGS = /(<([^>]+)>)/ig;\n    /**\n     * Regular expression to match Unicode words\n     */\n\n    var REGEXP_WORD = new RegExp('(?:[' + upperCaseLetter + '][' + diacriticalMark + ']*)?(?:[' + lowerCaseLetter + '][' + diacriticalMark + ']*)+|\\\n(?:[' + upperCaseLetter + '][' + diacriticalMark + ']*)+(?![' + lowerCaseLetter + '])|\\\n[' + digit + ']+|\\\n[' + dingbatBlock + ']|\\\n[^' + nonCharacter + generalPunctuationBlock + whitespace + ']+', 'g');\n    /**\n     * Regular expression to match words from Basic Latin and Latin-1 Supplement blocks\n     */\n\n    var REGEXP_LATIN_WORD = /[A-Z\\xC0-\\xD6\\xD8-\\xDE]?[a-z\\xDF-\\xF6\\xF8-\\xFF]+|[A-Z\\xC0-\\xD6\\xD8-\\xDE]+(?![a-z\\xDF-\\xF6\\xF8-\\xFF])|\\d+/g;\n    /**\n     * Regular expression to match alpha characters\n     */\n\n    var REGEXP_ALPHA = new RegExp('^(?:[' + lowerCaseLetter + upperCaseLetter + '][' + diacriticalMark + ']*)+$');\n    /**\n     * Regular expression to match alpha and digit characters\n     */\n\n    var REGEXP_ALPHA_DIGIT = new RegExp('^((?:[' + lowerCaseLetter + upperCaseLetter + '][' + diacriticalMark + ']*)|[' + digit + '])+$');\n    /**\n     * Regular expression to match Extended ASCII characters, i.e. the first 255\n     */\n\n    var REGEXP_EXTENDED_ASCII = /^[\\x01-\\xFF]*$/;\n\n    function nvl(val, def) {\n      return isNull(val) ? def : val;\n    }\n\n    function toStr(val) {\n      var def = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n      if (isNull(val)) return def;\n      if (typeof val === \"string\") return val;\n      if (Array.isArray(val)) return val.join(\"\");\n      return JSON.stringify(val);\n    }\n\n    /*\n    * Split string to words. You can set specified patter to split\n    * */\n\n    function words(s, pattern, flags) {\n      var regexp;\n\n      if (isNull(pattern)) {\n        regexp = REGEXP_EXTENDED_ASCII.test(s) ? REGEXP_LATIN_WORD : REGEXP_WORD;\n      } else if (pattern instanceof RegExp) {\n        regexp = pattern;\n      } else {\n        regexp = new RegExp(pattern, nvl(flags, ''));\n      }\n\n      return nvl(toStr(s).match(regexp), []);\n    }\n\n    function capitalize(s, strong) {\n      var _s = toStr(s);\n\n      var last = _s.substr(1);\n\n      return _s.substr(0, 1).toUpperCase() + (strong ? last.toLowerCase() : last);\n    }\n\n    function camelCase(s) {\n      return words(toStr(s)).map(function (el, i) {\n        return i === 0 ? el.toLowerCase() : capitalize(el);\n      }).join(\"\");\n    }\n\n    function dashedName(s) {\n      return words(toStr(s)).map(function (el) {\n        return el.toLowerCase();\n      }).join(\"-\");\n    }\n\n    function decapitalize(s) {\n      var _s = toStr(s);\n\n      return _s.substr(0, 1).toLowerCase() + _s.substr(1);\n    }\n\n    function kebab(s) {\n      return words(toStr(s)).map(function (el) {\n        return el.toLowerCase();\n      }).join(\"-\");\n    }\n\n    function lower(s) {\n      return toStr(s).toLowerCase();\n    }\n\n    /*\n    * Split string to chars array with ignores\n    * */\n\n    function chars(s) {\n      var ignore = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      return toStr(s).split(\"\").filter(function (el) {\n        return !ignore.includes(el);\n      });\n    }\n\n    function reverse(s, ignore) {\n      return chars(toStr(s), ignore).reverse().join(\"\");\n    }\n\n    function _typeof(obj) {\n      \"@babel/helpers - typeof\";\n\n      if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n        _typeof = function (obj) {\n          return typeof obj;\n        };\n      } else {\n        _typeof = function (obj) {\n          return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n        };\n      }\n\n      return _typeof(obj);\n    }\n\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n\n    function _defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    function _createClass(Constructor, protoProps, staticProps) {\n      if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) _defineProperties(Constructor, staticProps);\n      return Constructor;\n    }\n\n    function _defineProperty(obj, key, value) {\n      if (key in obj) {\n        Object.defineProperty(obj, key, {\n          value: value,\n          enumerable: true,\n          configurable: true,\n          writable: true\n        });\n      } else {\n        obj[key] = value;\n      }\n\n      return obj;\n    }\n\n    function _toConsumableArray(arr) {\n      return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n    }\n\n    function _arrayWithoutHoles(arr) {\n      if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n    }\n\n    function _iterableToArray(iter) {\n      if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n    }\n\n    function _unsupportedIterableToArray(o, minLen) {\n      if (!o) return;\n      if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n      var n = Object.prototype.toString.call(o).slice(8, -1);\n      if (n === \"Object\" && o.constructor) n = o.constructor.name;\n      if (n === \"Map\" || n === \"Set\") return Array.from(o);\n      if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n    }\n\n    function _arrayLikeToArray(arr, len) {\n      if (len == null || len > arr.length) len = arr.length;\n\n      for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n      return arr2;\n    }\n\n    function _nonIterableSpread() {\n      throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    }\n\n    function shuffleArray (a) {\n      var _a = _toConsumableArray(a);\n\n      var i = _a.length,\n          t,\n          r;\n\n      while (0 !== i) {\n        r = Math.floor(Math.random() * i);\n        i -= 1;\n        t = _a[i];\n        _a[i] = _a[r];\n        _a[r] = t;\n      }\n\n      return _a;\n    }\n\n    function shuffle(s) {\n      var _s = toStr(s);\n\n      return shuffleArray(_s.split(\"\")).join(\"\");\n    }\n\n    function snake(s) {\n      return words(toStr(s)).map(function (el) {\n        return el.toLowerCase();\n      }).join(\"_\");\n    }\n\n    var _swap = function _swap(swapped, _char) {\n      var lc = _char.toLowerCase();\n\n      var uc = _char.toUpperCase();\n\n      return swapped + (_char === lc ? uc : lc);\n    };\n\n    function swap(s) {\n      return toStr(s).split(\"\").reduce(_swap, '');\n    }\n\n    function title(s, noSplit) {\n      var _s = toStr(s);\n\n      var regexp = REGEXP_EXTENDED_ASCII.test(_s) ? REGEXP_LATIN_WORD : REGEXP_WORD;\n      var noSplitArray = Array.isArray(noSplit) ? noSplit : isNull(noSplit) ? [] : noSplit.split();\n      return s.replace(regexp, function (w, i) {\n        var isNoSplit = i && noSplitArray.includes(_s[i - 1]);\n        return isNoSplit ? lower(w) : capitalize(w);\n      });\n    }\n\n    function upper(s) {\n      return toStr(s).toUpperCase();\n    }\n\n    function wrapTag(s) {\n      var tag = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"div\";\n      return \"<\".concat(tag, \">\").concat(toStr(s), \"</\").concat(tag, \">\");\n    }\n\n    function wrap(s) {\n      var before = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n      var after = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"\";\n      return before + toStr(s) + after;\n    }\n\n    /*\n    * Get string length\n    * */\n\n    function count(s) {\n      return toStr(s).length;\n    }\n\n    function un (a) {\n      var _a = _toConsumableArray(a);\n\n      for (var i = 0; i < _a.length; ++i) {\n        for (var j = i + 1; j < _a.length; ++j) {\n          if (_a[i] === _a[j]) _a.splice(j--, 1);\n        }\n      }\n\n      return _a;\n    }\n\n    function countChars(s, ignore) {\n      return chars(s, ignore).length;\n    }\n    function countUniqueChars(s, ignore) {\n      return un(chars(s, ignore)).length;\n    }\n\n    function countSubstr(s, sub) {\n      var _s = toStr(s);\n\n      var _sub = toStr(sub);\n\n      return _s === '' || _sub === '' ? 0 : _s.split(_sub).length - 1;\n    }\n\n    function countWords(s, pattern, flags) {\n      return words(s, pattern, flags).length;\n    }\n    function countUniqueWords(s, pattern, flags) {\n      return un(words(s, pattern, flags)).length;\n    }\n\n    var escapeCharactersMap = {\n      '<': '&lt;',\n      '>': '&gt;',\n      '&': '&amp;',\n      '\"': '&quot;',\n      \"'\": '&#x27;',\n      '`': '&#x60;'\n    };\n\n    function replaceSpecialCharacter(character) {\n      return escapeCharactersMap[character];\n    }\n\n    function escapeHtml(s) {\n      return toStr(s).replace(REGEXP_HTML_SPECIAL_CHARACTERS, replaceSpecialCharacter);\n    }\n\n    var unescapeCharsMap = {\n      '<': /(&lt;)|(&#x0*3c;)|(&#0*60;)/gi,\n      '>': /(&gt;)|(&#x0*3e;)|(&#0*62;)/gi,\n      '&': /(&amp;)|(&#x0*26;)|(&#0*38;)/gi,\n      '\"': /(&quot;)|(&#x0*22;)|(&#0*34;)/gi,\n      \"'\": /(&#x0*27;)|(&#0*39;)/gi,\n      '`': /(&#x0*60;)|(&#0*96;)/gi\n    };\n    var chars$1 = Object.keys(unescapeCharsMap);\n\n    function reduceUnescapedString(string, key) {\n      return string.replace(unescapeCharsMap[key], key);\n    }\n\n    function unescapeHtml(s) {\n      return chars$1.reduce(reduceUnescapedString, toStr(s));\n    }\n\n    function unique(s, ignore) {\n      return un(chars(s, ignore)).join(\"\");\n    }\n\n    function uniqueWords(s, pattern, flags) {\n      return un(words(s, pattern, flags)).join(\"\");\n    }\n\n    /*\n    * Get substring from string.\n    * */\n\n    function substr(s, start, len) {\n      var _s = toStr(s);\n\n      return _s.substr(start, len);\n    }\n\n    /*\n    * Get N first chars from string.\n    * */\n\n    function first(s, len) {\n      var _s = toStr(s);\n\n      return _s ? substr(_s, 0, len) : '';\n    }\n\n    /*\n    * Get N last chars from string.\n    * */\n\n    function last(s, len) {\n      var _s = toStr(s);\n\n      return _s ? substr(_s, _s.length - len) : '';\n    }\n\n    var MAX_SAFE_INTEGER = 0x1fffffffffffff;\n\n    function clip(val, min) {\n      var max = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : MAX_SAFE_INTEGER;\n      if (val < min) return min;\n      if (val > max) return max;\n      return val;\n    }\n\n    function toInt(val) {\n      if (val === Infinity) return MAX_SAFE_INTEGER;\n      if (val === -Infinity) return -MAX_SAFE_INTEGER;\n      return ~~val;\n    }\n\n    /*\n    * Truncates `subject` to a new `length` with specified ending.\n    * */\n\n    function truncate(s, len) {\n      var end = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '...';\n\n      var _s = toStr(s);\n\n      var _len = isNull(len) || isNaN(len) ? _s.length : clip(toInt(len), 0, MAX_SAFE_INTEGER);\n\n      return substr(_s, 0, _len) + (_s.length === _len ? '' : end);\n    }\n\n    /*\n    * Slice string to N parts.\n    * */\n\n    function slice(s) {\n      var parts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n      var _s = toStr(s);\n\n      var res = [];\n      var len = Math.round(_s.length / parts);\n\n      for (var i = 0; i < parts; i++) {\n        res.push(substr(_s, i * len, len));\n      }\n\n      return res;\n    }\n\n    /*\n    * Truncates `subject` to a new `length` and does not break the words with specified ending.\n    * */\n\n    function prune(s, len) {\n      var end = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"\";\n\n      var _s = toStr(s);\n\n      var _len = isNull(len) || isNaN(len) ? _s.length : clip(toInt(len), 0, MAX_SAFE_INTEGER);\n\n      var _truncatedLen = 0;\n      var pattern = REGEXP_EXTENDED_ASCII.test(_s) ? REGEXP_LATIN_WORD : REGEXP_WORD;\n\n      _s.replace(pattern, function (word, offset) {\n        var wordLength = offset + word.length;\n\n        if (wordLength <= _len - end.length) {\n          _truncatedLen = wordLength;\n        }\n      });\n\n      return _s.substr(0, _truncatedLen) + end;\n    }\n\n    function repeat(s, times) {\n      var _s = toStr(s);\n\n      var _times = isNull(times) || isNaN(times) ? _s.length : clip(toInt(times), 0, MAX_SAFE_INTEGER);\n\n      var _origin = _s;\n\n      if (times === 0) {\n        return \"\";\n      }\n\n      for (var i = 0; i < _times - 1; i++) {\n        _s += _origin;\n      }\n\n      return _s;\n    }\n\n    function padBuilder(pad, len) {\n      var padLength = pad.length;\n      var length = len - padLength;\n      return repeat(pad, length + 1).substr(0, len);\n    }\n\n    function pad(s, len) {\n      var pad = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : ' ';\n\n      var _s = toStr(s);\n\n      var _len = isNull(len) || isNaN(len) ? _s.length : clip(toInt(len), 0, MAX_SAFE_INTEGER);\n\n      var _padLen = pad.length;\n\n      var _paddingLen = _len - _s.length;\n\n      var _sideLen = toInt(_paddingLen / 2); //?\n\n\n      var _remainingLen = _paddingLen % 2; //?\n\n\n      if (_paddingLen <= 0 || _padLen === 0) {\n        return _s;\n      }\n\n      return padBuilder(pad, _sideLen) + _s + padBuilder(pad, _sideLen + _remainingLen); //?\n    }\n\n    var _pad = function _pad(s, len, pad, left) {\n      var _s = toStr(s);\n\n      var _len = isNull(len) || isNaN(len) ? _s.length : clip(toInt(len), 0, MAX_SAFE_INTEGER);\n\n      var _padLen = pad.length;\n\n      var _paddingLen = _len - _s.length;\n\n      var _sideLen = _paddingLen;\n\n      if (_paddingLen <= 0 || _padLen === 0) {\n        return _s;\n      }\n\n      var pads = padBuilder(pad, _sideLen);\n      return left ? pads + _s : _s + pads;\n    };\n\n    function lpad(s, len) {\n      var pad = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : ' ';\n      return _pad(s, len, pad, true);\n    }\n    function rpad(s, len) {\n      var pad = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : ' ';\n      return _pad(s, len, pad, false);\n    }\n\n    function insert(s) {\n      var sbj = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      var pos = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n      var _s = toStr(s);\n\n      return _s.substr(0, pos) + sbj + _s.substr(pos);\n    }\n\n    var reduce = Array.prototype.reduce;\n    var reduceRight = Array.prototype.reduceRight;\n    function trim(s, ws) {\n      return ltrim(rtrim(s, ws), ws);\n    }\n    function ltrim(s, ws) {\n      var _s = toStr(s);\n\n      if (isNull(ws)) {\n        return _s.replace(REGEXP_TRIM_LEFT, '');\n      }\n\n      if (ws === '' || _s === '') {\n        return _s;\n      }\n\n      if (typeof ws !== \"string\") {\n        ws = '';\n      }\n\n      var match = true;\n      return reduce.call(_s, function (trimmed, _char) {\n        if (match && ws.includes(_char)) {\n          return trimmed;\n        }\n\n        match = false;\n        return trimmed + _char;\n      }, '');\n    }\n    function rtrim(s, ws) {\n      var _s = toStr(s);\n\n      if (isNull(ws)) {\n        return _s.replace(REGEXP_TRIM_RIGHT, '');\n      }\n\n      if (ws === '' || _s === '') {\n        return _s;\n      }\n\n      if (typeof ws !== \"string\") {\n        ws = '';\n      }\n\n      var match = true;\n      return reduceRight.call(_s, function (trimmed, _char2) {\n        if (match && ws.includes(_char2)) {\n          return trimmed;\n        }\n\n        match = false;\n        return _char2 + trimmed;\n      }, '');\n    }\n\n    function endsWith(s, end, pos) {\n      var _s = toStr(s);\n\n      return _s.endsWith(end, pos);\n    }\n\n    function isAlpha(s) {\n      return REGEXP_ALPHA.test(toStr(s));\n    }\n\n    function isAlphaDigit(s) {\n      return REGEXP_ALPHA_DIGIT.test(toStr(s));\n    }\n\n    function isAlphaDigit$1(s) {\n      return REGEXP_DIGIT.test(toStr(s));\n    }\n\n    function isBlank(s) {\n      return trim(s).length === 0;\n    }\n\n    function isEmpty(s) {\n      return toStr(s).length === 0;\n    }\n\n    function isLower(s) {\n      var _s = toStr(s);\n\n      return _s.toLowerCase() === _s;\n    }\n\n    function isUpper(s) {\n      var _s = toStr(s);\n\n      return _s.toUpperCase() === _s;\n    }\n\n    function startWith(s, start, pos) {\n      var _s = toStr(s);\n\n      return _s.startsWith(start, pos);\n    }\n\n    function stripTagsAll(s) {\n      var _s = toStr(s);\n\n      return _s.replace(REGEXP_TAGS, '');\n    }\n    function stripTags(s) {\n      var allowed = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n      var _s = toStr(s);\n\n      var tags = /<\\/?([a-z][a-z0-9]*)\\b[^>]*>/gi;\n      return _s.replace(tags, function ($0, $1) {\n\n        return allowed.includes($1) ? $0 : '';\n      });\n    }\n\n    /*\n    * Original code\n    * copyright (c) 2007-present by Alexandru Mrteanu <hello@alexei.ro>\n    * Source: https://github.com/alexei/sprintf.js\n    * License: BSD-3-Clause License\n    * */\n    var re = {\n      not_string: /[^s]/,\n      not_bool: /[^t]/,\n      not_type: /[^T]/,\n      not_primitive: /[^v]/,\n      number: /[diefg]/,\n      numeric_arg: /[bcdiefguxX]/,\n      json: /[j]/,\n      not_json: /[^j]/,\n      text: /^[^\\x25]+/,\n      modulo: /^\\x25{2}/,\n      placeholder: /^\\x25(?:([1-9]\\d*)\\$|\\(([^)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-gijostTuvxX])/,\n      key: /^([a-z_][a-z_\\d]*)/i,\n      key_access: /^\\.([a-z_][a-z_\\d]*)/i,\n      index_access: /^\\[(\\d+)\\]/,\n      sign: /^[+-]/\n    };\n\n    function sprintf_format(parse_tree, argv) {\n      var cursor = 1,\n          tree_length = parse_tree.length,\n          arg,\n          output = '',\n          ph,\n          pad,\n          pad_character,\n          pad_length,\n          is_positive,\n          sign;\n\n      for (var i = 0; i < tree_length; i++) {\n        if (typeof parse_tree[i] === 'string') {\n          output += parse_tree[i];\n        } else if (_typeof(parse_tree[i]) === 'object') {\n          ph = parse_tree[i]; // convenience purposes only\n\n          if (ph.keys) {\n            // keyword argument\n            arg = argv[cursor];\n\n            for (var k = 0; k < ph.keys.length; k++) {\n              if (typeof arg === \"undefined\") {\n                throw new Error(sprintf('[sprintf] Cannot access property \"%s\" of undefined value \"%s\"', ph.keys[k], ph.keys[k - 1]));\n              }\n\n              arg = arg[ph.keys[k]];\n            }\n          } else if (ph.param_no) {\n            // positional argument (explicit)\n            arg = argv[ph.param_no];\n          } else {\n            // positional argument (implicit)\n            arg = argv[cursor++];\n          }\n\n          if (re.not_type.test(ph.type) && re.not_primitive.test(ph.type) && arg instanceof Function) {\n            arg = arg();\n          }\n\n          if (re.numeric_arg.test(ph.type) && typeof arg !== 'number' && isNaN(arg)) {\n            throw new TypeError(sprintf('[sprintf] expecting number but found %T', arg));\n          }\n\n          if (re.number.test(ph.type)) {\n            is_positive = arg >= 0;\n          }\n\n          switch (ph.type) {\n            case 'b':\n              arg = parseInt(arg, 10).toString(2);\n              break;\n\n            case 'c':\n              arg = String.fromCharCode(parseInt(arg, 10));\n              break;\n\n            case 'd':\n            case 'i':\n              arg = parseInt(arg, 10);\n              break;\n\n            case 'j':\n              arg = JSON.stringify(arg, null, ph.width ? parseInt(ph.width) : 0);\n              break;\n\n            case 'e':\n              arg = ph.precision ? parseFloat(arg).toExponential(ph.precision) : parseFloat(arg).toExponential();\n              break;\n\n            case 'f':\n              arg = ph.precision ? parseFloat(arg).toFixed(ph.precision) : parseFloat(arg);\n              break;\n\n            case 'g':\n              arg = ph.precision ? String(Number(arg.toPrecision(ph.precision))) : parseFloat(arg);\n              break;\n\n            case 'o':\n              arg = (parseInt(arg, 10) >>> 0).toString(8);\n              break;\n\n            case 's':\n              arg = String(arg);\n              arg = ph.precision ? arg.substring(0, ph.precision) : arg;\n              break;\n\n            case 't':\n              arg = String(!!arg);\n              arg = ph.precision ? arg.substring(0, ph.precision) : arg;\n              break;\n\n            case 'T':\n              arg = Object.prototype.toString.call(arg).slice(8, -1).toLowerCase();\n              arg = ph.precision ? arg.substring(0, ph.precision) : arg;\n              break;\n\n            case 'u':\n              arg = parseInt(arg, 10) >>> 0;\n              break;\n\n            case 'v':\n              arg = arg.valueOf();\n              arg = ph.precision ? arg.substring(0, ph.precision) : arg;\n              break;\n\n            case 'x':\n              arg = (parseInt(arg, 10) >>> 0).toString(16);\n              break;\n\n            case 'X':\n              arg = (parseInt(arg, 10) >>> 0).toString(16).toUpperCase();\n              break;\n          }\n\n          if (re.json.test(ph.type)) {\n            output += arg;\n          } else {\n            if (re.number.test(ph.type) && (!is_positive || ph.sign)) {\n              sign = is_positive ? '+' : '-';\n              arg = arg.toString().replace(re.sign, '');\n            } else {\n              sign = '';\n            }\n\n            pad_character = ph.pad_char ? ph.pad_char === '0' ? '0' : ph.pad_char.charAt(1) : ' ';\n            pad_length = ph.width - (sign + arg).length;\n            pad = ph.width ? pad_length > 0 ? pad_character.repeat(pad_length) : '' : '';\n            output += ph.align ? sign + arg + pad : pad_character === '0' ? sign + pad + arg : pad + sign + arg;\n          }\n        }\n      }\n\n      return output;\n    }\n\n    var sprintf_cache = Object.create(null);\n\n    function sprintf_parse(fmt) {\n      if (sprintf_cache[fmt]) {\n        return sprintf_cache[fmt];\n      }\n\n      var _fmt = fmt,\n          match,\n          parse_tree = [],\n          arg_names = 0;\n\n      while (_fmt) {\n        if ((match = re.text.exec(_fmt)) !== null) {\n          parse_tree.push(match[0]);\n        } else if ((match = re.modulo.exec(_fmt)) !== null) {\n          parse_tree.push('%');\n        } else if ((match = re.placeholder.exec(_fmt)) !== null) {\n          if (match[2]) {\n            arg_names |= 1;\n            var field_list = [],\n                replacement_field = match[2],\n                field_match = [];\n\n            if ((field_match = re.key.exec(replacement_field)) !== null) {\n              field_list.push(field_match[1]);\n\n              while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {\n                if ((field_match = re.key_access.exec(replacement_field)) !== null) {\n                  field_list.push(field_match[1]);\n                } else if ((field_match = re.index_access.exec(replacement_field)) !== null) {\n                  field_list.push(field_match[1]);\n                } else {\n                  throw new SyntaxError('[sprintf] failed to parse named argument key');\n                }\n              }\n            } else {\n              throw new SyntaxError('[sprintf] failed to parse named argument key');\n            }\n\n            match[2] = field_list;\n          } else {\n            arg_names |= 2;\n          }\n\n          if (arg_names === 3) {\n            throw new Error('[sprintf] mixing positional and named placeholders is not (yet) supported');\n          }\n\n          parse_tree.push({\n            placeholder: match[0],\n            param_no: match[1],\n            keys: match[2],\n            sign: match[3],\n            pad_char: match[4],\n            align: match[5],\n            width: match[6],\n            precision: match[7],\n            type: match[8]\n          });\n        } else {\n          throw new SyntaxError('[sprintf] unexpected placeholder');\n        }\n\n        _fmt = _fmt.substring(match[0].length);\n      }\n\n      return sprintf_cache[fmt] = parse_tree;\n    }\n\n    function sprintf(key) {\n      return sprintf_format(sprintf_parse(key), arguments);\n    }\n    function vsprintf(fmt, argv) {\n      return sprintf.apply(null, [fmt].concat(argv || []));\n    }\n\n    function includes(s, sub, pos) {\n      var _s = toStr(s);\n\n      return _s.includes(sub, pos);\n    }\n\n    var functions = {\n      camelCase: camelCase,\n      capitalize: capitalize,\n      chars: chars,\n      count: count,\n      countChars: countChars,\n      countUniqueChars: countUniqueChars,\n      countSubstr: countSubstr,\n      countWords: countWords,\n      countUniqueWords: countUniqueWords,\n      dashedName: dashedName,\n      decapitalize: decapitalize,\n      kebab: kebab,\n      lower: lower,\n      reverse: reverse,\n      shuffle: shuffle,\n      snake: snake,\n      swap: swap,\n      title: title,\n      upper: upper,\n      words: words,\n      wrap: wrap,\n      wrapTag: wrapTag,\n      escapeHtml: escapeHtml,\n      unescapeHtml: unescapeHtml,\n      unique: unique,\n      uniqueWords: uniqueWords,\n      substr: substr,\n      first: first,\n      last: last,\n      truncate: truncate,\n      slice: slice,\n      prune: prune,\n      repeat: repeat,\n      pad: pad,\n      lpad: lpad,\n      rpad: rpad,\n      insert: insert,\n      trim: trim,\n      ltrim: ltrim,\n      rtrim: rtrim,\n      endsWith: endsWith,\n      isAlpha: isAlpha,\n      isAlphaDigit: isAlphaDigit,\n      isDigit: isAlphaDigit$1,\n      isBlank: isBlank,\n      isEmpty: isEmpty,\n      isLower: isLower,\n      isUpper: isUpper,\n      startWith: startWith,\n      stripTags: stripTags,\n      stripTagsAll: stripTagsAll,\n      sprintf: sprintf,\n      vsprintf: vsprintf,\n      includes: includes\n    };\n\n    var __global = null;\n\n    function getGlobalObject() {\n      if (__global !== null) {\n        return __global;\n      }\n\n      if ((typeof __webpack_require__.g === \"undefined\" ? \"undefined\" : _typeof(__webpack_require__.g)) === 'object' && __webpack_require__.g.Object === Object) {\n        __global = __webpack_require__.g;\n      } else if ((typeof self === \"undefined\" ? \"undefined\" : _typeof(self)) === 'object' && self.Object === Object) {\n        __global = self;\n      } else {\n        __global = new Function('return this')();\n      }\n\n      return __global;\n    }\n\n    var _Symbol$toPrimitive, _Symbol$toStringTag;\n    _Symbol$toPrimitive = Symbol.toPrimitive;\n    _Symbol$toStringTag = Symbol.toStringTag;\n\n    var Cake = /*#__PURE__*/function () {\n      function Cake() {\n        var s = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n\n        _classCallCheck(this, Cake);\n\n        _defineProperty(this, \"_value\", void 0);\n\n        this._value = \"\" + s;\n      }\n\n      _createClass(Cake, [{\n        key: _Symbol$toPrimitive,\n        value: function value(hint) {\n          if (hint === \"number\") {\n            return +this.value;\n          }\n\n          return this.value;\n        }\n      }, {\n        key: \"toString\",\n        value: function toString() {\n          return this.value;\n        }\n        /* escape */\n\n      }, {\n        key: \"escapeHtml\",\n        value: function escapeHtml() {\n          this.value = functions.escapeHtml(this.value);\n          return this;\n        }\n      }, {\n        key: \"unescapeHtml\",\n        value: function unescapeHtml() {\n          this.value = functions.unescapeHtml(this.value);\n          return this;\n        }\n        /* end of escape */\n\n      }, {\n        key: \"camelCase\",\n        value: function camelCase() {\n          this.value = functions.camelCase(this.value);\n          return this;\n        }\n      }, {\n        key: \"capitalize\",\n        value: function capitalize(strong) {\n          this.value = functions.capitalize(this.value, strong);\n          return this;\n        }\n      }, {\n        key: \"chars\",\n        value: function chars() {\n          return functions.chars(this.value);\n        }\n      }, {\n        key: \"count\",\n        value: function count() {\n          return functions.count(this.value);\n        }\n      }, {\n        key: \"countChars\",\n        value: function countChars(ignore) {\n          return functions.countChars(this.value, ignore);\n        }\n      }, {\n        key: \"countUniqueChars\",\n        value: function countUniqueChars(ignore) {\n          return functions.countUniqueChars(this.value, ignore);\n        }\n      }, {\n        key: \"countSubstr\",\n        value: function countSubstr(sub) {\n          return functions.countSubstr(this.value, sub);\n        }\n      }, {\n        key: \"countWords\",\n        value: function countWords(pattern, flags) {\n          return functions.countWords(this.value, pattern, flags);\n        }\n      }, {\n        key: \"countUniqueWords\",\n        value: function countUniqueWords(pattern, flags) {\n          return functions.countUniqueWords(this.value, pattern, flags);\n        }\n      }, {\n        key: \"dashedName\",\n        value: function dashedName() {\n          this.value = functions.dashedName(this.value);\n          return this;\n        }\n      }, {\n        key: \"decapitalize\",\n        value: function decapitalize() {\n          this.value = functions.decapitalize(this.value);\n          return this;\n        }\n      }, {\n        key: \"kebab\",\n        value: function kebab() {\n          this.value = functions.kebab(this.value);\n          return this;\n        }\n      }, {\n        key: \"lower\",\n        value: function lower() {\n          this.value = functions.lower(this.value);\n          return this;\n        }\n      }, {\n        key: \"reverse\",\n        value: function reverse() {\n          this.value = functions.reverse(this.value);\n          return this;\n        }\n      }, {\n        key: \"shuffle\",\n        value: function shuffle() {\n          this.value = functions.shuffle(this.value);\n          return this;\n        }\n      }, {\n        key: \"snake\",\n        value: function snake() {\n          this.value = functions.snake(this.value);\n          return this;\n        }\n      }, {\n        key: \"swap\",\n        value: function swap() {\n          this.value = functions.swap(this.value);\n          return this;\n        }\n      }, {\n        key: \"title\",\n        value: function title() {\n          this.value = functions.title(this.value);\n          return this;\n        }\n      }, {\n        key: \"upper\",\n        value: function upper() {\n          this.value = functions.upper(this.value);\n          return this;\n        }\n      }, {\n        key: \"words\",\n        value: function words(pattern, flags) {\n          return functions.words(this.value, pattern, flags);\n        }\n      }, {\n        key: \"wrap\",\n        value: function wrap(a, b) {\n          this.value = functions.wrap(this.value, a, b);\n          return this;\n        }\n      }, {\n        key: \"wrapTag\",\n        value: function wrapTag(t) {\n          this.value = functions.wrapTag(this.value, t);\n          return this;\n        }\n      }, {\n        key: \"pad\",\n        value: function pad(len, _pad) {\n          this.value = functions.pad(this.value, len, _pad);\n          return this;\n        }\n      }, {\n        key: \"lpad\",\n        value: function lpad(len, pad) {\n          this.value = functions.lpad(this.value, len, pad);\n          return this;\n        }\n      }, {\n        key: \"rpad\",\n        value: function rpad(len, pad) {\n          this.value = functions.rpad(this.value, len, pad);\n          return this;\n        }\n      }, {\n        key: \"repeat\",\n        value: function repeat(times) {\n          this.value = functions.repeat(this.value, times);\n          return this;\n        }\n      }, {\n        key: \"prune\",\n        value: function prune(len, end) {\n          this.value = functions.prune(this.value, len, end);\n          return this;\n        }\n      }, {\n        key: \"slice\",\n        value: function slice(parts) {\n          return functions.slice(this.value, parts);\n        }\n      }, {\n        key: \"truncate\",\n        value: function truncate(len, end) {\n          this.value = functions.truncate(this.value, len, end);\n          return this;\n        }\n      }, {\n        key: \"last\",\n        value: function last(len) {\n          this.value = functions.last(this.value, len);\n          return this;\n        }\n      }, {\n        key: \"first\",\n        value: function first(len) {\n          this.value = functions.first(this.value, len);\n          return this;\n        }\n      }, {\n        key: \"substr\",\n        value: function substr(start, len) {\n          this.value = functions.substr(this.value, start, len);\n          return this;\n        }\n      }, {\n        key: \"unique\",\n        value: function unique(ignore) {\n          return functions.unique(this.value, ignore);\n        }\n      }, {\n        key: \"uniqueWords\",\n        value: function uniqueWords(pattern, flags) {\n          return functions.uniqueWords(this.value, pattern, flags);\n        }\n      }, {\n        key: \"insert\",\n        value: function insert(sbj, pos) {\n          this.value = functions.insert(this.value, sbj, pos);\n          return this;\n        }\n      }, {\n        key: \"trim\",\n        value: function trim(ws) {\n          this.value = functions.trim(this.value, ws);\n          return this;\n        }\n      }, {\n        key: \"ltrim\",\n        value: function ltrim(ws) {\n          this.value = functions.ltrim(this.value, ws);\n          return this;\n        }\n      }, {\n        key: \"rtrim\",\n        value: function rtrim(ws) {\n          this.value = functions.rtrim(this.value, ws);\n          return this;\n        }\n      }, {\n        key: \"endsWith\",\n        value: function endsWith(end, pos) {\n          return functions.endsWith(this.value, end, pos);\n        }\n      }, {\n        key: \"startWith\",\n        value: function startWith(start, pos) {\n          return functions.startWith(this.value, start, pos);\n        }\n      }, {\n        key: \"isAlpha\",\n        value: function isAlpha() {\n          return functions.isAlpha(this.value);\n        }\n      }, {\n        key: \"isAlphaDigit\",\n        value: function isAlphaDigit() {\n          return functions.isAlphaDigit(this.value);\n        }\n      }, {\n        key: \"isDigit\",\n        value: function isDigit() {\n          return functions.isDigit(this.value);\n        }\n      }, {\n        key: \"isBlank\",\n        value: function isBlank() {\n          return functions.isBlank(this.value);\n        }\n      }, {\n        key: \"isEmpty\",\n        value: function isEmpty() {\n          return functions.isEmpty(this.value);\n        }\n      }, {\n        key: \"isLower\",\n        value: function isLower() {\n          return functions.isLower(this.value);\n        }\n      }, {\n        key: \"isUpper\",\n        value: function isUpper() {\n          return functions.isUpper(this.value);\n        }\n      }, {\n        key: \"stripTagsAll\",\n        value: function stripTagsAll() {\n          this.value = functions.stripTagsAll(this.value);\n          return this;\n        }\n      }, {\n        key: \"stripTags\",\n        value: function stripTags(allowed) {\n          this.value = functions.stripTags(this.value, allowed);\n          return this;\n        }\n      }, {\n        key: \"sprintf\",\n        value: function sprintf(args) {\n          return functions.sprintf(this.value, args);\n        }\n      }, {\n        key: \"vsprintf\",\n        value: function vsprintf(args) {\n          return functions.vsprintf(this.value, args);\n        }\n      }, {\n        key: \"includes\",\n        value: function includes(sub, pos) {\n          return functions.includes(this.value, sub, pos);\n        }\n      }, {\n        key: _Symbol$toStringTag,\n        get: function get() {\n          return \"Cake\";\n        }\n      }, {\n        key: \"value\",\n        get: function get() {\n          return this._value;\n        },\n        set: function set(s) {\n          this._value = s;\n        }\n      }, {\n        key: \"length\",\n        get: function get() {\n          return this._value.length;\n        }\n      }]);\n\n      return Cake;\n    }();\n\n    var cake = function cake(s) {\n      return new Cake(s);\n    };\n\n    var Cake$1 = Object.assign({}, functions);\n    var global$1 = getGlobalObject();\n    global$1.Cake = Cake$1;\n    global$1.cake = cake;\n\n}());\n\r\n\r\n(function (global, undefined) {\n\n// Source: src/mode.js\n\n/* jshint -W097 */\n'use strict';\n\n// Source: src/func.js\n\n/* global dataSet */\n/* exported isDark, isTouch, isSimple, isHidden, isPlainObject, isEmptyObject, isArrayLike, str2arr, parseUnit, getUnit, setStyleProp, acceptData, dataAttr, normName, strip, dashedName, isLocalhost */\n\nvar numProps = ['opacity', 'zIndex', \"order\", \"zoom\"];\n\nfunction isSimple(v){\n    return typeof v === \"string\" || typeof v === \"boolean\" || typeof v === \"number\";\n}\n\nfunction isVisible(elem) {\n    return !!( elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length );\n}\n\nfunction isHidden(elem) {\n    var s = getComputedStyle(elem);\n    return !isVisible(elem) || +s.opacity === 0 || elem.hidden || s.visibility === \"hidden\";\n}\n\nfunction not(value){\n    return value === undefined || value === null;\n}\n\nfunction camelCase(string){\n    return string.replace( /-([a-z])/g, function(all, letter){\n        return letter.toUpperCase();\n    });\n}\n\nfunction dashedName(str){\n    return str.replace(/([A-Z])/g, function(u) { return \"-\" + u.toLowerCase(); });\n}\n\nfunction isPlainObject( obj ) {\n    var proto;\n    if ( !obj || Object.prototype.toString.call( obj ) !== \"[object Object]\" ) {\n        return false;\n    }\n    proto = obj.prototype !== undefined;\n    if ( !proto ) {\n        return true;\n    }\n    return proto.constructor && typeof proto.constructor === \"function\";\n}\n\nfunction isEmptyObject( obj ) {\n    for (var name in obj ) {\n        if (hasProp(obj, name)) return false;\n    }\n    return true;\n}\n\nfunction isArrayLike (o){\n    return o instanceof Object && 'length' in o;\n}\n\nfunction str2arr (str, sep) {\n    sep = sep || \" \";\n    return str.split(sep).map(function(el){\n        return  (\"\"+el).trim();\n    }).filter(function(el){\n        return el !== \"\";\n    });\n}\n\nfunction parseUnit(str, out) {\n    if (!out) out = [ 0, '' ];\n    str = String(str);\n    out[0] = parseFloat(str);\n    out[1] = str.match(/[\\d.\\-+]*\\s*(.*)/)[1] || '';\n    return out;\n}\n\nfunction getUnit(val, und){\n    var split = /[+-]?\\d*\\.?\\d+(?:\\.\\d+)?(?:[eE][+-]?\\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(val);\n    return typeof split[1] !== \"undefined\" ? split[1] : und;\n}\n\nfunction setStyleProp(el, key, val){\n    key = camelCase(key);\n\n    if ([\"scrollLeft\", \"scrollTop\"].indexOf(key) > -1) {\n        el[key] = (parseInt(val));\n    } else {\n        el.style[key] = isNaN(val) || numProps.indexOf(\"\"+key) > -1 ? val : val + 'px';\n    }\n}\n\nfunction acceptData(owner){\n    return owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );\n}\n\nfunction getData(data){\n    try {\n        return JSON.parse(data);\n    } catch (e) {\n        return data;\n    }\n}\n\nfunction dataAttr(elem, key, data){\n    var name;\n\n    if ( not(data) && elem.nodeType === 1 ) {\n        name = \"data-\" + key.replace( /[A-Z]/g, \"-$&\" ).toLowerCase();\n        data = elem.getAttribute( name );\n\n        if ( typeof data === \"string\" ) {\n            data = getData( data );\n            dataSet.set( elem, key, data );\n        } else {\n            data = undefined;\n        }\n    }\n    return data;\n}\n\nfunction normName(name) {\n    return typeof name !== \"string\" ? undefined : name.replace(/-/g, \"\").toLowerCase();\n}\n\nfunction strip(name, what) {\n    return typeof name !== \"string\" ? undefined : name.replace(what, \"\");\n}\n\nfunction hasProp(obj, prop){\n    return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nfunction isLocalhost(host){\n    var hostname = host || window.location.hostname;\n    return (\n        hostname === \"localhost\" ||\n        hostname === \"127.0.0.1\" ||\n        hostname === \"[::1]\" ||\n        hostname === \"\" ||\n        hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/) !== null\n    );\n}\n\nfunction isTouch() {\n    return (('ontouchstart' in window)\n        || (navigator.maxTouchPoints > 0)\n        || (navigator.msMaxTouchPoints > 0));\n}\n\nfunction isDark(){\n    var prefersDarkScheme = window.matchMedia(\"(prefers-color-scheme: dark)\")\n    return prefersDarkScheme.matches\n}\n\n// Source: src/setimmediate.js\n\n/* global global */\n/*\n * setImmediate polyfill\n * Version 1.0.5\n * Url: https://github.com/YuzuJS/setImmediate\n * Copyright (c) 2016 Yuzu (https://github.com/YuzuJS)\n * Licensed under MIT\n */\n(function (global) {\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1;\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n        if (typeof callback !== \"function\") {\n            /* jshint -W054 */\n            callback = new Function(\"\" + callback);\n        }\n        var args = new Array(arguments.length - 1);\n        for (var i = 0; i < args.length; i++) {\n            args[i] = arguments[i + 1];\n        }\n        tasksByHandle[nextHandle] = { callback: callback, args: args };\n        registerImmediate(nextHandle);\n        return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n            case 0:\n                callback();\n                break;\n            case 1:\n                callback(args[0]);\n                break;\n            case 2:\n                callback(args[0], args[1]);\n                break;\n            case 3:\n                callback(args[0], args[1], args[2]);\n                break;\n            default:\n                callback.apply(undefined, args);\n                break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        if (currentlyRunningATask) {\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    // global.process\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            global.process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    // web workers\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    // Browsers\n    function installPostMessageImplementation() {\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        global.addEventListener(\"message\", onGlobalMessage, false);\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    if ({}.toString.call(global.process) === \"[object process]\") {\n\n        installNextTickImplementation();\n\n    } else if (global.MessageChannel) {\n\n        installMessageChannelImplementation();\n\n    } else {\n\n        installPostMessageImplementation();\n\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? window : global : self));\n\n// Source: src/core.js\n\n/* global hasProp */\n\nvar m4qVersion = \"v1.1.0. Built at 05/05/2021 22:47:56\";\n\n/* eslint-disable-next-line */\nvar matches = Element.prototype.matches\n    || Element.prototype.matchesSelector\n    || Element.prototype.webkitMatchesSelector\n    || Element.prototype.mozMatchesSelector\n    || Element.prototype.msMatchesSelector\n    || Element.prototype.oMatchesSelector;\n\nvar $ = function(selector, context){\n    return new $.init(selector, context);\n};\n\n$.version = m4qVersion;\n\n$.fn = $.prototype = {\n    version: m4qVersion,\n    constructor: $,\n    length: 0,\n    uid: \"\",\n\n    push: [].push,\n    sort: [].sort,\n    splice: [].splice,\n    indexOf: [].indexOf,\n    reverse: [].reverse\n};\n\n$.extend = $.fn.extend = function(){\n    var options, name,\n        target = arguments[ 0 ] || {},\n        i = 1,\n        length = arguments.length;\n\n    if ( typeof target !== \"object\" && typeof target !== \"function\" ) {\n        target = {};\n    }\n\n    if ( i === length ) {\n        target = this;\n        i--;\n    }\n\n    for ( ; i < length; i++ ) {\n        if ( ( options = arguments[ i ] ) != null ) {\n            for ( name in options ) {\n                if (hasProp(options, name))\n                    target[ name ] = options[ name ];\n            }\n        }\n    }\n\n    return target;\n};\n\n$.assign = function(){\n    var options, name,\n        target = arguments[ 0 ] || {},\n        i = 1,\n        length = arguments.length;\n\n    if ( typeof target !== \"object\" && typeof target !== \"function\" ) {\n        target = {};\n    }\n\n    if ( i === length ) {\n        target = this;\n        i--;\n    }\n\n    for ( ; i < length; i++ ) {\n        if ( ( options = arguments[ i ] ) != null ) {\n            for ( name in options ) {\n                if (hasProp(options, name) && options[name] !== undefined)\n                    target[ name ] = options[ name ];\n            }\n        }\n    }\n\n    return target;\n};\n\n// if (typeof window[\"hideM4QVersion\"] === \"undefined\") console.info(\"m4q \" + $.version);\n\n// Source: src/interval.js\n\n/* global $ */\n\nvar now = function(){\n    return Date.now();\n};\n\n$.extend({\n\n    intervalId: -1,\n    intervalQueue: [],\n    intervalTicking: false,\n    intervalTickId: null,\n\n    setInterval: function(fn, int){\n        var that = this;\n\n        this.intervalId++;\n\n        this.intervalQueue.push({\n            id: this.intervalId,\n            fn: fn,\n            interval: int,\n            lastTime: now()\n        });\n\n        if (!this.intervalTicking) {\n            var tick = function(){\n                that.intervalTickId = requestAnimationFrame(tick);\n                $.each(that.intervalQueue, function(){\n                    var item = this;\n                    if (item.interval < 17 || now() - item.lastTime >= item.interval) {\n                        item.fn();\n                        item.lastTime = now();\n                    }\n                });\n            };\n            this.intervalTicking = true;\n            tick();\n        }\n\n        return this.intervalId;\n    },\n\n    clearInterval: function(id){\n        for(var i = 0; i < this.intervalQueue.length; i++){\n            if (id === this.intervalQueue[i].id) {\n                this.intervalQueue.splice(i, 1);\n                break;\n            }\n        }\n        if (this.intervalQueue.length === 0) {\n            cancelAnimationFrame(this.intervalTickId);\n            this.intervalTicking = false;\n        }\n    },\n\n    setTimeout: function(fn, interval){\n        var that = this, id = this.setInterval(function(){\n            that.clearInterval(id);\n            fn();\n        }, interval);\n\n        return id;\n    },\n\n    clearTimeout: function(id){\n        return this.clearInterval(id);\n    }\n});\n\n// Source: src/contains.js\n\n/* global $, not, matches, isArrayLike, isVisible */\n\n$.fn.extend({\n    index: function(sel){\n        var el, _index = -1;\n\n        if (this.length === 0) {\n            return _index;\n        }\n\n        if (not(sel)) {\n            el = this[0];\n        } else if (sel instanceof $ && sel.length > 0) {\n            el = sel[0];\n        } else if (typeof sel === \"string\") {\n            el = $(sel)[0];\n        } else {\n            el = undefined;\n        }\n\n        if (not(el)) {\n            return _index;\n        }\n\n        if (el && el.parentNode) $.each(el.parentNode.children, function(i){\n            if (this === el) {\n                _index = i;\n            }\n        });\n        return _index;\n    },\n\n    get: function(i){\n        if (i === undefined) {\n            return this.items();\n        }\n        return i < 0 ? this[ i + this.length ] : this[ i ];\n    },\n\n    eq: function(i){\n        return !not(i) && this.length > 0 ? $.extend($(this.get(i)), {_prevObj: this}) : this;\n    },\n\n    is: function(s){\n        var result = false;\n\n        if (this.length === 0) {\n            return false;\n        }\n\n        if (s instanceof $) {\n            return this.same(s);\n        }\n\n        if (s === \":selected\") {\n            this.each(function(){\n                if (this.selected) result = true;\n            });\n        } else\n\n        if (s === \":checked\") {\n            this.each(function(){\n                if (this.checked) result = true;\n            });\n        } else\n\n        if (s === \":visible\") {\n            this.each(function(){\n                if (isVisible(this)) result = true;\n            });\n        } else\n\n        if (s === \":hidden\") {\n            this.each(function(){\n                var styles = getComputedStyle(this);\n                if (\n                    this.getAttribute('type') === 'hidden'\n                        || this.hidden\n                        || styles.display === 'none'\n                        || styles.visibility === 'hidden'\n                        || parseInt(styles.opacity) === 0\n                ) result = true;\n            });\n        } else\n\n        if (typeof  s === \"string\" && [':selected'].indexOf(s) === -1) {\n            this.each(function(){\n                if (matches.call(this, s)) {\n                    result = true;\n                }\n            });\n        } else\n\n        if (isArrayLike(s)) {\n            this.each(function(){\n                var el = this;\n                $.each(s, function(){\n                    var sel = this;\n                    if (el === sel) {\n                        result = true;\n                    }\n                });\n            });\n        } else\n\n        if (typeof s === \"object\" && s.nodeType === 1) {\n            this.each(function(){\n                if  (this === s) {\n                    result = true;\n                }\n            });\n        }\n\n        return result;\n    },\n\n    same: function(o){\n        var result = true;\n\n        if (!(o instanceof $)) {\n            o = $(o);\n        }\n\n        if (this.length !== o.length) return false;\n\n        this.each(function(){\n            if (o.items().indexOf(this) === -1) {\n                result = false;\n            }\n        });\n\n        return result;\n    },\n\n    last: function(){\n        return this.eq(this.length - 1);\n    },\n\n    first: function(){\n        return this.eq(0);\n    },\n\n    odd: function(){\n        var result = this.filter(function(el, i){\n            return i % 2 === 0;\n        });\n        return $.extend(result, {_prevObj: this});\n    },\n\n    even: function(){\n        var result = this.filter(function(el, i){\n            return i % 2 !== 0;\n        });\n        return $.extend(result, {_prevObj: this});\n    },\n\n    filter: function(fn){\n        if (typeof fn === \"string\") {\n            var sel = fn;\n            fn = function(el){\n                return matches.call(el, sel);\n            };\n        }\n\n        return $.extend($.merge($(), [].filter.call(this, fn)), {_prevObj: this});\n    },\n\n    find: function(s){\n        var res = [], result;\n\n        if (s instanceof $) return s;\n\n        if (this.length === 0) {\n            result = this;\n        } else {\n            this.each(function () {\n                var el = this;\n                if (typeof el.querySelectorAll === \"undefined\") {\n                    return ;\n                }\n                res = res.concat([].slice.call(el.querySelectorAll(s)));\n            });\n            result = $.merge($(), res);\n        }\n\n        return $.extend(result, {_prevObj: this});\n    },\n\n    contains: function(s){\n        return this.find(s).length > 0;\n    },\n\n    children: function(s){\n        var i, res = [];\n\n        if (s instanceof $) return s;\n\n        this.each(function(){\n            var el = this;\n            for(i = 0; i < el.children.length; i++) {\n                if (el.children[i].nodeType === 1)\n                    res.push(el.children[i]);\n            }\n        });\n        res = s ? res.filter(function(el){\n            return matches.call(el, s);\n        }) : res;\n\n        return $.extend($.merge($(), res), {_prevObj: this});\n    },\n\n    parent: function(s){\n        var res = [];\n        if (this.length === 0) {\n            return ;\n        }\n\n        if (s instanceof $) return s;\n\n        this.each(function(){\n            if (this.parentNode) {\n                if (res.indexOf(this.parentNode) === -1) res.push(this.parentNode);\n            }\n        });\n        res = s ? res.filter(function(el){\n            return matches.call(el, s);\n        }) : res;\n\n        return $.extend($.merge($(), res), {_prevObj: this});\n    },\n\n    parents: function(s){\n        var res = [];\n\n        if (this.length === 0) {\n            return ;\n        }\n\n        if (s instanceof $) return s;\n\n        this.each(function(){\n            var par = this.parentNode;\n            while (par) {\n                if (par.nodeType === 1 && res.indexOf(par) === -1) {\n                    if (!not(s)) {\n                        if (matches.call(par, s)) {\n                            res.push(par);\n                        }\n                    } else {\n                        res.push(par);\n                    }\n                }\n                par = par.parentNode;\n            }\n        });\n\n        return $.extend($.merge($(), res), {_prevObj: this});\n    },\n\n    siblings: function(s){\n        var res = [];\n\n        if (this.length === 0) {\n            return ;\n        }\n\n        if (s instanceof $) return s;\n\n        this.each(function(){\n            var el = this;\n            if (el.parentNode) {\n                $.each(el.parentNode.children, function(){\n                    if (el !== this) res.push(this);\n                });\n            }\n        });\n\n        if (s) {\n            res = res.filter(function(el){\n                return matches.call(el, s);\n            });\n        }\n\n        return $.extend($.merge($(), res), {_prevObj: this});\n    },\n\n    _siblingAll: function(dir, s){\n        var res = [];\n\n        if (this.length === 0) {\n            return ;\n        }\n\n        if (s instanceof $) return s;\n\n        this.each(function(){\n            var el = this;\n            while (el) {\n                el = el[dir];\n                if (!el) break;\n                res.push(el);\n            }\n        });\n\n        if (s) {\n            res = res.filter(function(el){\n                return matches.call(el, s);\n            });\n        }\n\n        return $.extend($.merge($(), res), {_prevObj: this});\n    },\n\n    _sibling: function(dir, s){\n        var res = [];\n\n        if (this.length === 0) {\n            return ;\n        }\n\n        if (s instanceof $) return s;\n\n        this.each(function(){\n            var el = this[dir];\n            if (el && el.nodeType === 1) {\n                res.push(el);\n            }\n        });\n\n        if (s) {\n            res = res.filter(function(el){\n                return matches.call(el, s);\n            });\n        }\n\n        return $.extend($.merge($(), res), {_prevObj: this});\n    },\n\n    prev: function(s){\n        return this._sibling('previousElementSibling', s);\n    },\n\n    next: function(s){\n        return this._sibling('nextElementSibling', s);\n    },\n\n    prevAll: function(s){\n        return this._siblingAll('previousElementSibling', s);\n    },\n\n    nextAll: function(s){\n        return this._siblingAll('nextElementSibling', s);\n    },\n\n    closest: function(s){\n        var res = [];\n\n        if (this.length === 0) {\n            return ;\n        }\n\n        if (s instanceof $) return s;\n\n        if (!s) {\n            return this.parent(s);\n        }\n\n        this.each(function(){\n            var el = this;\n            while (el) {\n                if (!el) break;\n                if (matches.call(el, s)) {\n                    res.push(el);\n                    return ;\n                }\n                el = el.parentElement;\n            }\n        });\n\n        return $.extend($.merge($(), res.reverse()), {_prevObj: this});\n    },\n\n    has: function(selector){\n        var res = [];\n\n        if (this.length === 0) {\n            return ;\n        }\n\n        this.each(function(){\n            var el = $(this);\n            var child = el.children(selector);\n            if (child.length > 0) {\n                res.push(this);\n            }\n        });\n\n        return $.extend($.merge($(), res), {_prevObj: this});\n    },\n\n    back: function(to_start){\n        var ret;\n        if (to_start === true) {\n            ret = this._prevObj;\n            while (ret) {\n                if (!ret._prevObj) break;\n                ret = ret._prevObj;\n            }\n        } else {\n            ret = this._prevObj ? this._prevObj : this;\n        }\n        return ret;\n    }\n});\n\n// Source: src/script.js\n\n/* global $, not */\n\nfunction createScript(script){\n    var s = document.createElement('script');\n    s.type = 'text/javascript';\n\n    if (not(script)) return $(s);\n\n    var _script = $(script)[0];\n\n    if (_script.src) {\n        s.src = _script.src;\n    } else {\n        s.textContent = _script.innerText;\n    }\n\n    document.body.appendChild(s);\n\n    if (_script.parentNode) _script.parentNode.removeChild(_script);\n\n    return s;\n}\n\n$.extend({\n    script: function(el){\n\n        if (not(el)) {\n            return createScript();\n        }\n\n        var _el = $(el)[0];\n\n        if (_el.tagName && _el.tagName === \"SCRIPT\") {\n            createScript(_el);\n        } else $.each($(_el).find(\"script\"), function(){\n            createScript(this);\n        });\n    }\n});\n\n$.fn.extend({\n    script: function(){\n        return this.each(function(){\n            $.script(this);\n        });\n    }\n});\n\n// Source: src/prop.js\n\n/* global $, not */\n\n$.fn.extend({\n    _prop: function(prop, value){\n        if (arguments.length === 1) {\n            return this.length === 0 ? undefined : this[0][prop];\n        }\n\n        if (not(value)) {\n            value = '';\n        }\n\n        return this.each(function(){\n            var el = this;\n\n            el[prop] = value;\n\n            if (prop === \"innerHTML\") {\n                $.script(el);\n            }\n        });\n    },\n\n    prop: function(prop, value){\n        return arguments.length === 1 ? this._prop(prop) : this._prop(prop, typeof value === \"undefined\" ? \"\" : value);\n    },\n\n    val: function(value){\n        if (not(value)) {\n            return this.length === 0 ? undefined : this[0].value;\n        }\n\n        return this.each(function(){\n            var el = $(this);\n            if (typeof this.value !== \"undefined\") {\n                this.value = value;\n            } else {\n                el.html(value);\n            }\n        });\n    },\n\n    html: function(value){\n        var that = this, v = [];\n\n        if (arguments.length === 0) {\n            return this._prop('innerHTML');\n        }\n\n        if (value instanceof $) {\n            value.each(function(){\n                v.push($(this).outerHTML());\n            });\n        } else {\n            v.push(value);\n        }\n\n        that._prop('innerHTML', v.length === 1 && not(v[0]) ? \"\" : v.join(\"\\n\"));\n\n        return this;\n    },\n\n    outerHTML: function(){\n        return this._prop('outerHTML');\n    },\n\n    text: function(value){\n        return arguments.length === 0 ? this._prop('textContent') : this._prop('textContent', typeof value === \"undefined\" ? \"\" : value);\n    },\n\n    innerText: function(value){\n        return arguments.length === 0 ? this._prop('innerText') : this._prop('innerText', typeof value === \"undefined\" ? \"\" : value);\n    },\n\n    empty: function(){\n        return this.each(function(){\n            if (typeof this.innerHTML !== \"undefined\") this.innerHTML = \"\";\n        });\n    },\n\n    clear: function(){\n        return this.empty();\n    }\n});\n\n// Source: src/each.js\n\n/* global $, isArrayLike, hasProp */\n\n$.each = function(ctx, cb){\n    var index = 0;\n    if (isArrayLike(ctx)) {\n        [].forEach.call(ctx, function(val, key) {\n            cb.apply(val, [key, val]);\n        });\n    } else {\n        for(var key in ctx) {\n            if (hasProp(ctx, key))\n                cb.apply(ctx[key], [key, ctx[key],  index++]);\n        }\n    }\n\n    return ctx;\n};\n\n$.fn.extend({\n    each: function(cb){\n        return $.each(this, cb);\n    }\n});\n\n\n// Source: src/data.js\n\n/* global acceptData, camelCase, $, not, dataAttr, isEmptyObject, hasProp */\n\n/*\n * Data routines\n * Url: https://jquery.com\n * Copyright (c) Copyright JS Foundation and other contributors, https://js.foundation/\n * Licensed under MIT\n */\nvar Data = function(ns){\n    this.expando = \"DATASET:UID:\" + ns.toUpperCase();\n    Data.uid++;\n};\n\nData.uid = -1;\n\nData.prototype = {\n    cache: function(owner){\n        var value = owner[this.expando];\n        if (!value) {\n            value = {};\n            if (acceptData(owner)) {\n                if (owner.nodeType) {\n                    owner[this.expando] = value;\n                } else {\n                    Object.defineProperty(owner, this.expando, {\n                        value: value,\n                        configurable: true\n                    });\n                }\n            }\n        }\n        return value;\n    },\n\n    set: function(owner, data, value){\n        var prop, cache = this.cache(owner);\n\n        if (typeof data === \"string\") {\n            cache[camelCase(data)] = value;\n        } else {\n            for (prop in data) {\n                if (hasProp(data, prop))\n                    cache[camelCase(prop)] = data[prop];\n            }\n        }\n        return cache;\n    },\n\n    get: function(owner, key){\n        return key === undefined ? this.cache(owner) : owner[ this.expando ] && owner[ this.expando ][ camelCase( key ) ];\n    },\n\n    access: function(owner, key, value){\n        if (key === undefined || ((key && typeof key === \"string\") && value === undefined) ) {\n            return this.get(owner, key);\n        }\n        this.set(owner, key, value);\n        return value !== undefined ? value : key;\n    },\n\n    remove: function(owner, key){\n        var i, cache = owner[this.expando];\n        if (cache === undefined) {\n            return ;\n        }\n        if (key !== undefined) {\n            if ( Array.isArray( key ) ) {\n                key = key.map( camelCase );\n            } else {\n                key = camelCase( key );\n\n                key = key in cache ? [ key ] : ( key.match( /[^\\x20\\t\\r\\n\\f]+/g ) || [] ); // ???\n            }\n\n            i = key.length;\n\n            while ( i-- ) {\n                delete cache[ key[ i ] ];\n            }\n        }\n        if ( key === undefined || isEmptyObject( cache ) ) {\n            if ( owner.nodeType ) {\n                owner[ this.expando ] = undefined;\n            } else {\n                delete owner[ this.expando ];\n            }\n        }\n        return true;\n    },\n\n    hasData: function(owner){\n        var cache = owner[ this.expando ];\n        return cache !== undefined && !isEmptyObject( cache );\n    }\n};\n\nvar dataSet = new Data('m4q');\n\n$.extend({\n    hasData: function(elem){\n        return dataSet.hasData(elem);\n    },\n\n    data: function(elem, key, val){\n        return dataSet.access(elem, key, val);\n    },\n\n    removeData: function(elem, key){\n        return dataSet.remove(elem, key);\n    },\n\n    dataSet: function(ns){\n        if (not(ns)) return dataSet;\n        if (['INTERNAL', 'M4Q'].indexOf(ns.toUpperCase()) > -1) {\n            throw Error(\"You can not use reserved name for your dataset\");\n        }\n        return new Data(ns);\n    }\n});\n\n$.fn.extend({\n    data: function(key, val){\n        var res, elem, data, attrs, name, i;\n\n        if (this.length === 0) {\n            return ;\n        }\n\n        elem = this[0];\n\n        if ( arguments.length === 0 ) {\n            if ( this.length ) {\n                data = dataSet.get( elem );\n\n                if ( elem.nodeType === 1) {\n                    attrs = elem.attributes;\n                    i = attrs.length;\n                    while ( i-- ) {\n                        if ( attrs[ i ] ) {\n                            name = attrs[ i ].name;\n                            if ( name.indexOf( \"data-\" ) === 0 ) {\n                                name = camelCase( name.slice( 5 ) );\n                                dataAttr( elem, name, data[ name ] );\n                            }\n                        }\n                    }\n                }\n            }\n\n            return data;\n        }\n\n        if ( arguments.length === 1 ) {\n            res = dataSet.get(elem, key);\n            if (res === undefined) {\n                if ( elem.nodeType === 1) {\n                    if (elem.hasAttribute(\"data-\"+key)) {\n                        res = elem.getAttribute(\"data-\"+key);\n                    }\n                }\n            }\n            return res;\n        }\n\n        return this.each( function() {\n            dataSet.set( this, key, val );\n        } );\n    },\n\n    removeData: function( key ) {\n        return this.each( function() {\n            dataSet.remove( this, key );\n        } );\n    },\n\n    origin: function(name, value, def){\n\n        if (this.length === 0) {\n            return this;\n        }\n\n        if (not(name) && not(value)) {\n            return $.data(this[0]);\n        }\n\n        if (not(value)) {\n            var res = $.data(this[0], \"origin-\"+name);\n            return !not(res) ? res : def;\n        }\n\n        this.data(\"origin-\"+name, value);\n\n        return this;\n    }\n});\n\n// Source: src/utils.js\n\n/* global $, not, isDark, camelCase, dashedName, isPlainObject, isEmptyObject, isArrayLike, acceptData, parseUnit, getUnit, isVisible, isHidden, matches, strip, normName, hasProp, isLocalhost, isTouch */\n\n$.extend({\n\n    device: (/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase())),\n    localhost: isLocalhost(),\n    isLocalhost: isLocalhost,\n    touchable: isTouch(),\n    dark: isDark(),\n\n    uniqueId: function (prefix) {\n        var d = new Date().getTime();\n        if (not(prefix)) {\n            prefix = 'm4q';\n        }\n        return (prefix !== '' ? prefix + '-' : '') + 'xxxx-xxxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            var r = (d + Math.random() * 16) % 16 | 0;\n            d = Math.floor(d / 16);\n            return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n        });\n    },\n\n    toArray: function(n){\n        var i, out = [];\n\n        for (i = 0 ; i < n.length; i++ ) {\n            out.push(n[i]);\n        }\n\n        return out;\n    },\n\n    import: function(ctx){\n        var res = [];\n        this.each(ctx, function(){\n            res.push(this);\n        });\n        return this.merge($(), res);\n    },\n\n    merge: function( first, second ) {\n        var len = +second.length,\n            j = 0,\n            i = first.length;\n\n        for ( ; j < len; j++ ) {\n            first[ i++ ] = second[ j ];\n        }\n\n        first.length = i;\n\n        return first;\n    },\n\n    type: function(obj){\n        return Object.prototype.toString.call(obj).replace(/^\\[object (.+)]$/, '$1').toLowerCase();\n    },\n\n    sleep: function(ms) {\n        ms += new Date().getTime();\n        /* eslint-disable-next-line */\n        while (new Date() < ms){}\n    },\n\n    isSelector: function(selector){\n        if (typeof selector !== 'string') {\n            return false;\n        }\n        try {\n            document.querySelector(selector);\n        } catch(error) {\n            return false;\n        }\n        return true;\n    },\n\n    remove: function(s){\n        return $(s).remove();\n    },\n\n    camelCase: camelCase,\n    dashedName: dashedName,\n    isPlainObject: isPlainObject,\n    isEmptyObject: isEmptyObject,\n    isArrayLike: isArrayLike,\n    acceptData: acceptData,\n    not: not,\n    parseUnit: parseUnit,\n    getUnit: getUnit,\n    unit: parseUnit,\n    isVisible: isVisible,\n    isHidden: isHidden,\n    matches: function(el, s) {return matches.call(el, s);},\n    random: function(from, to) {\n        if (arguments.length === 1 && isArrayLike(from)) {\n            return from[Math.floor(Math.random()*(from.length))];\n        }\n        return Math.floor(Math.random()*(to-from+1)+from);\n    },\n    strip: strip,\n    normName: normName,\n    hasProp: hasProp,\n\n    serializeToArray: function(form){\n        var _form = $(form)[0];\n        if (!_form || _form.nodeName !== \"FORM\") {\n            console.warn(\"Element is not a HTMLFromElement\");\n            return;\n        }\n        var i, j, q = [];\n        for (i = _form.elements.length - 1; i >= 0; i = i - 1) {\n            if (_form.elements[i].name === \"\") {\n                continue;\n            }\n            switch (_form.elements[i].nodeName) {\n                case 'INPUT':\n                    switch (_form.elements[i].type) {\n                        case 'checkbox':\n                        case 'radio':\n                            if (_form.elements[i].checked) {\n                                q.push(_form.elements[i].name + \"=\" + encodeURIComponent(_form.elements[i].value));\n                            }\n                            break;\n                        case 'file':\n                            break;\n                        default: q.push(_form.elements[i].name + \"=\" + encodeURIComponent(_form.elements[i].value));\n                    }\n                    break;\n                case 'TEXTAREA':\n                    q.push(_form.elements[i].name + \"=\" + encodeURIComponent(_form.elements[i].value));\n                    break;\n                case 'SELECT':\n                    switch (_form.elements[i].type) {\n                        case 'select-one':\n                            q.push(_form.elements[i].name + \"=\" + encodeURIComponent(_form.elements[i].value));\n                            break;\n                        case 'select-multiple':\n                            for (j = _form.elements[i].options.length - 1; j >= 0; j = j - 1) {\n                                if (_form.elements[i].options[j].selected) {\n                                    q.push(_form.elements[i].name + \"=\" + encodeURIComponent(_form.elements[i].options[j].value));\n                                }\n                            }\n                            break;\n                    }\n                    break;\n                case 'BUTTON':\n                    switch (_form.elements[i].type) {\n                        case 'reset':\n                        case 'submit':\n                        case 'button':\n                            q.push(_form.elements[i].name + \"=\" + encodeURIComponent(_form.elements[i].value));\n                            break;\n                    }\n                    break;\n            }\n        }\n        return q;\n    },\n    serialize: function(form){\n        return $.serializeToArray(form).join(\"&\");\n    }\n});\n\n$.fn.extend({\n    items: function(){\n        return $.toArray(this);\n    }\n});\n\n// Source: src/events.js\n\n/* global $, not, camelCase, str2arr, normName, matches, isEmptyObject, isPlainObject */\n\n// (function () {\n//     if ( typeof window.CustomEvent === \"function\" ) return false;\n//\n//     function CustomEvent ( event, params ) {\n//         params = params || { bubbles: false, cancelable: false, detail: null };\n//         var evt = document.createEvent( 'CustomEvent' );\n//         evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\n//         return evt;\n//     }\n//\n//     CustomEvent.prototype = window.Event.prototype;\n//\n//     window.CustomEvent = CustomEvent;\n// })();\n\nvar overriddenStop =  Event.prototype.stopPropagation;\nvar overriddenPrevent =  Event.prototype.preventDefault;\n\nEvent.prototype.stopPropagation = function(){\n    this.isPropagationStopped = true;\n    overriddenStop.apply(this, arguments);\n};\nEvent.prototype.preventDefault = function(){\n    this.isPreventedDefault = true;\n    overriddenPrevent.apply(this, arguments);\n};\n\nEvent.prototype.stop = function(immediate){\n    return immediate ? this.stopImmediatePropagation() : this.stopPropagation();\n};\n\n$.extend({\n    events: [],\n    eventHooks: {},\n\n    eventUID: -1,\n\n    /*\n    * el, eventName, handler, selector, ns, id, options\n    * */\n    setEventHandler: function(obj){\n        var i, freeIndex = -1, eventObj, resultIndex;\n        if (this.events.length > 0) {\n            for(i = 0; i < this.events.length; i++) {\n                if (this.events[i].handler === null) {\n                    freeIndex = i;\n                    break;\n                }\n            }\n        }\n\n        eventObj = {\n            element: obj.el,\n            event: obj.event,\n            handler: obj.handler,\n            selector: obj.selector,\n            ns: obj.ns,\n            id: obj.id,\n            options: obj.options\n        };\n\n        if (freeIndex === -1) {\n            this.events.push(eventObj);\n            resultIndex = this.events.length - 1;\n        } else {\n            this.events[freeIndex] = eventObj;\n            resultIndex = freeIndex;\n        }\n\n        return resultIndex;\n    },\n\n    getEventHandler: function(index){\n        if (this.events[index] !== undefined && this.events[index] !== null) {\n            this.events[index] = null;\n            return this.events[index].handler;\n        }\n        return undefined;\n    },\n\n    off: function(){\n        $.each(this.events, function(){\n            this.element.removeEventListener(this.event, this.handler, true);\n        });\n        this.events = [];\n        return this;\n    },\n\n    getEvents: function(){\n        return this.events;\n    },\n\n    getEventHooks: function(){\n        return this.eventHooks;\n    },\n\n    addEventHook: function(event, handler, type){\n        if (not(type)) {\n            type = \"before\";\n        }\n        $.each(str2arr(event), function(){\n            this.eventHooks[camelCase(type+\"-\"+this)] = handler;\n        });\n        return this;\n    },\n\n    removeEventHook: function(event, type){\n        if (not(type)) {\n            type = \"before\";\n        }\n        $.each(str2arr(event), function(){\n            delete this.eventHooks[camelCase(type+\"-\"+this)];\n        });\n        return this;\n    },\n\n    removeEventHooks: function(event){\n        var that = this;\n        if (not(event)) {\n            this.eventHooks = {};\n        } else {\n            $.each(str2arr(event), function(){\n                delete that.eventHooks[camelCase(\"before-\"+this)];\n                delete that.eventHooks[camelCase(\"after-\"+this)];\n            });\n        }\n        return this;\n    }\n});\n\n$.fn.extend({\n    on: function(eventsList, sel, handler, options){\n        if (this.length === 0) {\n            return ;\n        }\n\n        if (typeof sel === 'function') {\n            options = handler;\n            handler = sel;\n            sel = undefined;\n        }\n\n        if (!isPlainObject(options)) {\n            options = {};\n        }\n\n        return this.each(function(){\n            var el = this;\n            $.each(str2arr(eventsList), function(){\n                var h, ev = this,\n                    event = ev.split(\".\"),\n                    name = normName(event[0]),\n                    ns = options.ns ? options.ns : event[1],\n                    index, originEvent;\n\n                $.eventUID++;\n\n                h = function(e){\n                    var target = e.target;\n                    var beforeHook = $.eventHooks[camelCase(\"before-\"+name)];\n                    var afterHook = $.eventHooks[camelCase(\"after-\"+name)];\n\n                    if (typeof beforeHook === \"function\") {\n                        beforeHook.call(target, e);\n                    }\n\n                    if (!sel) {\n                        handler.call(el, e);\n                    } else {\n                        while (target && target !== el) {\n                            if (matches.call(target, sel)) {\n                                handler.call(target, e);\n                                if (e.isPropagationStopped) {\n                                    e.stopImmediatePropagation();\n                                    break;\n                                }\n                            }\n                            target = target.parentNode;\n                        }\n                    }\n\n                    if (typeof afterHook === \"function\") {\n                        afterHook.call(target, e);\n                    }\n\n                    if (options.once) {\n                        index = +$(el).origin( \"event-\"+e.type+(sel ? \":\"+sel:\"\")+(ns ? \":\"+ns:\"\") );\n                        if (!isNaN(index)) $.events.splice(index, 1);\n                    }\n                };\n\n                Object.defineProperty(h, \"name\", {\n                    value: handler.name && handler.name !== \"\" ? handler.name : \"func_event_\"+name+\"_\"+$.eventUID\n                });\n\n                originEvent = name+(sel ? \":\"+sel:\"\")+(ns ? \":\"+ns:\"\");\n\n                el.addEventListener(name, h, !isEmptyObject(options) ? options : false);\n\n                index = $.setEventHandler({\n                    el: el,\n                    event: name,\n                    handler: h,\n                    selector: sel,\n                    ns: ns,\n                    id: $.eventUID,\n                    options: !isEmptyObject(options) ? options : false\n                });\n                $(el).origin('event-'+originEvent, index);\n            });\n        });\n    },\n\n    one: function(events, sel, handler, options){\n        if (!isPlainObject(options)) {\n            options = {};\n        }\n\n        options.once = true;\n\n        return this.on.apply(this, [events, sel, handler, options]);\n    },\n\n    off: function(eventsList, sel, options){\n\n        if (isPlainObject(sel)) {\n            options = sel;\n            sel = null;\n        }\n\n        if (!isPlainObject(options)) {\n            options = {};\n        }\n\n        if (not(eventsList) || eventsList.toLowerCase() === 'all') {\n            return this.each(function(){\n                var el = this;\n                $.each($.events, function(){\n                    var e = this;\n                    if (e.element === el) {\n                        el.removeEventListener(e.event, e.handler, e.options);\n                        e.handler = null;\n                        $(el).origin(\"event-\"+name+(e.selector ? \":\"+e.selector:\"\")+(e.ns ? \":\"+e.ns:\"\"), null);\n                    }\n                });\n            });\n        }\n\n        return this.each(function(){\n            var el = this;\n            $.each(str2arr(eventsList), function(){\n                var evMap = this.split(\".\"),\n                    name = normName(evMap[0]),\n                    ns = options.ns ? options.ns : evMap[1],\n                    originEvent, index;\n\n                originEvent = \"event-\"+name+(sel ? \":\"+sel:\"\")+(ns ? \":\"+ns:\"\");\n                index = $(el).origin(originEvent);\n\n                if (index !== undefined && $.events[index].handler) {\n                    el.removeEventListener(name, $.events[index].handler, $.events[index].options);\n                    $.events[index].handler = null;\n                }\n\n                $(el).origin(originEvent, null);\n            });\n        });\n    },\n\n    trigger: function(name, data){\n        return this.fire(name, data);\n    },\n\n    fire: function(name, data){\n        var _name, e;\n\n        if (this.length === 0) {\n            return ;\n        }\n\n        _name = normName(name);\n\n        if (['focus', 'blur'].indexOf(_name) > -1) {\n            this[0][_name]();\n            return this;\n        }\n\n        if (typeof CustomEvent !== \"undefined\") {\n            e = new CustomEvent(_name, {\n                bubbles: true,\n                cancelable: true,\n                detail: data\n            });\n        } else {\n            e = document.createEvent('Events');\n            e.detail = data;\n            e.initEvent(_name, true, true);\n        }\n\n        return this.each(function(){\n            this.dispatchEvent(e);\n        });\n    }\n});\n\n( \"blur focus resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu touchstart touchend touchmove touchcancel\" )\n    .split( \" \" )\n    .forEach(\n    function( name ) {\n        $.fn[ name ] = function( sel, fn, opt ) {\n            return arguments.length > 0 ?\n                this.on( name, sel, fn, opt ) :\n                this.fire( name );\n        };\n});\n\n$.fn.extend( {\n    hover: function( fnOver, fnOut ) {\n        return this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );\n    }\n});\n\n$.ready = function(fn, options){\n    document.addEventListener('DOMContentLoaded', fn, (options || false));\n};\n\n$.load = function(fn){\n    return $(window).on(\"load\", fn);\n};\n\n$.unload = function(fn){\n    return $(window).on(\"unload\", fn);\n};\n\n$.fn.extend({\n    unload: function(fn){\n        return (this.length === 0 || this[0].self !== window) ? undefined : $.unload(fn);\n    }\n});\n\n$.beforeunload = function(fn){\n    if (typeof fn === \"string\") {\n        return $(window).on(\"beforeunload\", function(e){\n            e.returnValue = fn;\n            return fn;\n        });\n    } else {\n        return $(window).on(\"beforeunload\", fn);\n    }\n};\n\n$.fn.extend({\n    beforeunload: function(fn){\n        return (this.length === 0 || this[0].self !== window) ? undefined : $.beforeunload(fn);\n    }\n});\n\n$.fn.extend({\n    ready: function(fn){\n        if (this.length && this[0] === document && typeof fn === 'function') {\n            return $.ready(fn);\n        }\n    }\n});\n\n// Source: src/ajax.js\n\n/* global $, Promise, not, isSimple, isPlainObject, isEmptyObject, camelCase */\n/* can be changed to fetch */\n$.ajax = function(p){\n    return new Promise(function(resolve, reject){\n        var xhr = new XMLHttpRequest(), data;\n        var method = (p.method || \"GET\").toUpperCase();\n        var headers = [];\n        var async = not(p.async) ? true : p.async;\n        var url = p.url;\n        var urlWithParams = url.indexOf(\"?\") > -1;\n        var joinParamsSymbol = urlWithParams ? \"&\" : \"?\";\n\n        var exec = function(fn, params){\n            if (typeof fn === \"function\") {\n                fn.apply(null, params);\n            }\n        };\n\n        var isGet = function(method){\n            return [\"GET\", \"JSON\"].indexOf(method) !== -1;\n        };\n\n        var plainObjectToData = function(obj){\n            var _data = [];\n            $.each(obj, function(k, v){\n                var _v = isSimple(v) ? v : JSON.stringify(v);\n                _data.push(k+\"=\" + _v);\n            });\n            return _data.join(\"&\");\n        };\n\n        if (p.data instanceof HTMLFormElement) {\n            var _action = p.data.getAttribute(\"action\");\n            var _method = p.data.getAttribute(\"method\");\n\n            if (not(url) && _action && _action.trim() !== \"\") {url = _action;}\n            if (_method && _method.trim() !== \"\") {method = _method.toUpperCase();}\n        }\n\n\n        if (p.timeout) {\n            xhr.timeout = p.timeout;\n        }\n\n        if (p.withCredentials) {\n            xhr.withCredentials = p.withCredentials;\n        }\n\n        if (p.data instanceof HTMLFormElement) {\n            data = $.serialize(p.data);\n        } else if (p.data instanceof HTMLElement && p.data.getAttribute(\"type\") && p.data.getAttribute(\"type\").toLowerCase() === \"file\") {\n            var _name = p.data.getAttribute(\"name\");\n            data = new FormData();\n            for (var i = 0; i < p.data.files.length; i++) {\n                data.append(_name, p.data.files[i]);\n            }\n        } else if (isPlainObject(p.data)) {\n            data = plainObjectToData(p.data);\n        } else if (p.data instanceof FormData) {\n            data = p.data;\n        } else if (typeof p.data === \"string\") {\n            data = p.data;\n        } else {\n            data = new FormData();\n            data.append(\"_data\", JSON.stringify(p.data));\n        }\n\n        if (isGet(method)) {\n            url += (typeof data === \"string\" ? joinParamsSymbol + data : isEmptyObject(data) ? \"\" : joinParamsSymbol + JSON.stringify(data));\n        }\n\n        xhr.open(method, url, async, p.user, p.password);\n        if (p.headers) {\n            $.each(p.headers, function(k, v){\n                xhr.setRequestHeader(k, v);\n                headers.push(k);\n            });\n        }\n        if (!isGet(method)) {\n            if (headers.indexOf(\"Content-type\") === -1 && p.contentType !== false) {\n                xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n            }\n        }\n        xhr.send(data);\n\n        xhr.addEventListener(\"load\", function(e){\n            if (xhr.readyState === 4 && xhr.status < 300) {\n                var _return = p.returnValue && p.returnValue === 'xhr' ? xhr : xhr.response;\n                if (p.parseJson) {\n                    try {\n                        _return = JSON.parse(_return);\n                    } catch (ex) {\n                        _return = {};\n                    }\n                }\n                exec(resolve, [_return]);\n                exec(p.onSuccess, [e, xhr]);\n            } else {\n                exec(reject, [xhr]);\n                exec(p.onFail, [e, xhr]);\n            }\n            exec(p.onLoad, [e, xhr]);\n        });\n\n        $.each([\"readystatechange\", \"error\", \"timeout\", \"progress\", \"loadstart\", \"loadend\", \"abort\"], function(){\n            var ev = camelCase(\"on-\"+(this === 'readystatechange' ? 'state' : this));\n            xhr.addEventListener(ev, function(e){\n                exec(p[ev], [e, xhr]);\n            });\n        });\n    });\n};\n\n['get', 'post', 'put', 'patch', 'delete', 'json'].forEach(function(method){\n    $[method] = function(url, data, options){\n        var _method = method.toUpperCase();\n        var _options = {\n            method: _method === 'JSON' ? 'GET' : _method,\n            url: url,\n            data: data,\n            parseJson: _method === 'JSON'\n        };\n        return $.ajax($.extend({}, _options, options));\n    };\n});\n\n$.fn.extend({\n    load: function(url, data, options){\n        var that = this;\n\n        if (this.length && this[0].self === window ) {\n            return $.load(url);\n        }\n\n        return $.get(url, data, options).then(function(data){\n            that.each(function(){\n                this.innerHTML = data;\n            });\n        });\n    }\n});\n\n// Source: src/css.js\n\n/* global $, not, setStyleProp */\n\n$.fn.extend({\n\n    style: function(name, pseudo){\n        var el;\n\n        function _getStyle(el, prop, pseudo){\n            return [\"scrollLeft\", \"scrollTop\"].indexOf(prop) > -1 ? $(el)[prop]() : getComputedStyle(el, pseudo)[prop];\n        }\n\n        if (typeof name === 'string' && this.length === 0) {\n            return undefined;\n        }\n\n        if (this.length === 0) {\n            return this;\n        }\n\n        el = this[0];\n\n        if (not(name) || name === \"all\") {\n            return getComputedStyle(el, pseudo);\n        } else {\n            var result = {}, names = name.split(\", \").map(function(el){\n                return (\"\"+el).trim();\n            });\n            if (names.length === 1)  {\n                return _getStyle(el, names[0], pseudo);\n            } else {\n                $.each(names, function () {\n                    var prop = this;\n                    result[this] = _getStyle(el, prop, pseudo);\n                });\n                return result;\n            }\n        }\n    },\n\n    removeStyleProperty: function(name){\n        if (not(name) || this.length === 0) return this;\n        var names = name.split(\", \").map(function(el){\n            return (\"\"+el).trim();\n        });\n\n        return this.each(function(){\n            var el = this;\n            $.each(names, function(){\n                el.style.removeProperty(this);\n            });\n        });\n    },\n\n    css: function(key, val){\n        key = key || 'all';\n\n        if (typeof key === \"string\" && not(val)) {\n            return  this.style(key);\n        }\n\n        return this.each(function(){\n            var el = this;\n            if (typeof key === \"object\") {\n                $.each(key, function(key, val){\n                    setStyleProp(el, key, val);\n                });\n            } else if (typeof key === \"string\") {\n                setStyleProp(el, key, val);\n            }\n        });\n    },\n\n    scrollTop: function(val){\n        if (not(val)) {\n            return this.length === 0 ? undefined : this[0] === window ? pageYOffset : this[0].scrollTop;\n        }\n        return this.each(function(){\n            this.scrollTop = val;\n        });\n    },\n\n    scrollLeft: function(val){\n        if (not(val)) {\n            return this.length === 0 ? undefined : this[0] === window ? pageXOffset : this[0].scrollLeft;\n        }\n        return this.each(function(){\n            this.scrollLeft = val;\n        });\n    }\n});\n\n\n\n// Source: src/classes.js\n\n/* global $, not */\n\n$.fn.extend({\n    addClass: function(){},\n    removeClass: function(){},\n    toggleClass: function(){},\n\n    containsClass: function(cls){\n        return this.hasClass(cls);\n    },\n\n    hasClass: function(cls){\n        var result = false;\n        var classes = cls.split(\" \").filter(function(v){\n            return (\"\"+v).trim() !== \"\";\n        });\n\n        if (not(cls)) {\n            return false;\n        }\n\n        this.each(function(){\n            var el = this;\n\n            $.each(classes, function(){\n                if (!result && el.classList && el.classList.contains(this)) {\n                    result = true;\n                }\n            });\n        });\n\n        return result;\n    },\n\n    clearClasses: function(){\n        return this.each(function(){\n            this.className = \"\";\n        });\n    },\n\n    cls: function(array){\n        return this.length === 0 ? undefined : array ? this[0].className.split(\" \") : this[0].className;\n    },\n\n    removeClassBy: function(mask){\n        return this.each(function(){\n            var el = $(this);\n            var classes = el.cls(true);\n            $.each(classes, function(){\n                var elClass = this;\n                if (elClass.indexOf(mask) > -1) {\n                    el.removeClass(elClass);\n                }\n            });\n        });\n    }\n});\n\n['add', 'remove', 'toggle'].forEach(function (method) {\n    $.fn[method + \"Class\"] = function(cls){\n        if (not(cls) || (\"\"+cls).trim() === \"\") return this;\n        return this.each(function(){\n            var el = this;\n            var hasClassList = typeof el.classList !== \"undefined\";\n            $.each(cls.split(\" \").filter(function(v){\n                return (\"\"+v).trim() !== \"\";\n            }), function(){\n                if (hasClassList) el.classList[method](this);\n            });\n        });\n    };\n});\n\n\n// Source: src/parser.js\n\n/* global $ */\n\n$.parseHTML = function(data){\n    var base, singleTag, result = [], ctx, _context;\n    var regexpSingleTag = /^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i; // eslint-disable-line\n\n    if (typeof data !== \"string\") {\n        return [];\n    }\n\n    data = data.trim();\n\n    ctx = document.implementation.createHTMLDocument(\"\");\n    base = ctx.createElement( \"base\" );\n    base.href = document.location.href;\n    ctx.head.appendChild( base );\n    _context = ctx.body;\n\n    singleTag = regexpSingleTag.exec(data);\n\n    if (singleTag) {\n        result.push(document.createElement(singleTag[1]));\n    } else {\n        _context.innerHTML = data;\n        for(var i = 0; i < _context.childNodes.length; i++) {\n            result.push(_context.childNodes[i]);\n        }\n    }\n\n    return result;\n};\n\n\n// Source: src/size.js\n\n/* global $, not */\n\n$.fn.extend({\n    _size: function(prop, val){\n        if (this.length === 0) return ;\n\n        if (not(val)) {\n\n            var el = this[0];\n\n            if (prop === 'height') {\n                return el === window ? window.innerHeight : el === document ? el.body.clientHeight : parseInt(getComputedStyle(el).height);\n            }\n            if (prop === 'width') {\n                return el === window ? window.innerWidth : el === document ? el.body.clientWidth : parseInt(getComputedStyle(el).width);\n            }\n        }\n\n        return this.each(function(){\n            var el = this;\n            if (el === window || el === document) {return ;}\n            el.style[prop] = isNaN(val) ? val : val + 'px';\n        });\n    },\n\n    height: function(val){\n        return this._size('height', val);\n    },\n\n    width: function(val){\n        return this._size('width', val);\n    },\n\n    _sizeOut: function(prop, val){\n        var el, size, style, result;\n\n        if (this.length === 0) {\n            return ;\n        }\n\n        if (!not(val) && typeof val !== \"boolean\") {\n            return this.each(function(){\n                var el = this;\n                if (el === window || el === document) {return ;}\n                var h, style = getComputedStyle(el),\n                    bs = prop === 'width' ? parseInt(style['border-left-width']) + parseInt(style['border-right-width']) : parseInt(style['border-top-width']) + parseInt(style['border-bottom-width']),\n                    pa = prop === 'width' ? parseInt(style['padding-left']) + parseInt(style['padding-right']) : parseInt(style['padding-top']) + parseInt(style['padding-bottom']);\n\n                h = $(this)[prop](val)[prop]() - bs - pa;\n                el.style[prop] = h + 'px';\n            });\n        }\n\n        el = this[0];\n        size = el[prop === 'width' ? 'offsetWidth' : 'offsetHeight'];\n        style = getComputedStyle(el);\n        result = size + parseInt(style[prop === 'width' ? 'margin-left' : 'margin-top']) + parseInt(style[prop === 'width' ? 'margin-right' : 'margin-bottom']);\n        return val === true ? result : size;\n    },\n\n    outerWidth: function(val){\n        return this._sizeOut('width', val);\n    },\n\n    outerHeight: function(val){\n        return this._sizeOut('height', val);\n    },\n\n    padding: function(p){\n        if (this.length === 0) return;\n        var s = getComputedStyle(this[0], p);\n\n        return {\n            top: parseInt(s[\"padding-top\"]),\n            right: parseInt(s[\"padding-right\"]),\n            bottom: parseInt(s[\"padding-bottom\"]),\n            left: parseInt(s[\"padding-left\"])\n        };\n    },\n\n    margin: function(p){\n        if (this.length === 0) return;\n        var s = getComputedStyle(this[0], p);\n\n        return {\n            top: parseInt(s[\"margin-top\"]),\n            right: parseInt(s[\"margin-right\"]),\n            bottom: parseInt(s[\"margin-bottom\"]),\n            left: parseInt(s[\"margin-left\"])\n        };\n    },\n\n    border: function(p){\n        if (this.length === 0) return;\n        var s = getComputedStyle(this[0], p);\n\n        return {\n            top: parseInt(s[\"border-top-width\"]),\n            right: parseInt(s[\"border-right-width\"]),\n            bottom: parseInt(s[\"border-bottom-width\"]),\n            left: parseInt(s[\"border-left-width\"])\n        };\n    }\n});\n\n// Source: src/position.js\n\n/* global $, not */\n\n$.fn.extend({\n    offset: function(val){\n        var rect;\n\n        if (not(val)) {\n            if (this.length === 0) return undefined;\n            rect = this[0].getBoundingClientRect();\n            return {\n                top: rect.top + pageYOffset,\n                left: rect.left + pageXOffset\n            };\n        }\n\n        return this.each(function(){ //?\n            var el = $(this),\n                top = val.top,\n                left = val.left,\n                position = getComputedStyle(this).position,\n                offset = el.offset();\n\n            if (position === \"static\") {\n                el.css(\"position\", \"relative\");\n            }\n\n            if ([\"absolute\", \"fixed\"].indexOf(position) === -1) {\n                top = top - offset.top;\n                left = left - offset.left;\n            }\n\n            el.css({\n                top: top,\n                left: left\n            });\n        });\n    },\n\n    position: function(margin){\n        var ml = 0, mt = 0, el, style;\n\n        if (not(margin) || typeof margin !== \"boolean\") {\n            margin = false;\n        }\n\n        if (this.length === 0) {\n            return undefined;\n        }\n\n        el = this[0];\n        style = getComputedStyle(el);\n\n        if (margin) {\n            ml = parseInt(style['margin-left']);\n            mt = parseInt(style['margin-top']);\n        }\n\n        return {\n            left: el.offsetLeft - ml,\n            top: el.offsetTop - mt\n        };\n    },\n\n    left: function(val, margin){\n        if (this.length === 0) return ;\n        if (not(val)) {\n            return this.position(margin).left;\n        }\n        if (typeof val === \"boolean\") {\n            margin = val;\n            return this.position(margin).left;\n        }\n        return this.each(function(){\n            $(this).css({\n                left: val\n            });\n        });\n    },\n\n    top: function(val, margin){\n        if (this.length === 0) return ;\n        if (not(val)) {\n            return this.position(margin).top;\n        }\n        if (typeof val === \"boolean\") {\n            margin = val;\n            return this.position(margin).top;\n        }\n        return this.each(function(){\n            $(this).css({\n                top: val\n            });\n        });\n    },\n\n    coord: function(){\n        return this.length === 0 ? undefined : this[0].getBoundingClientRect();\n    },\n\n    pos: function(){\n        if (this.length === 0) return ;\n        return {\n            top: parseInt($(this[0]).style(\"top\")),\n            left: parseInt($(this[0]).style(\"left\"))\n        };\n    }\n});\n\n// Source: src/attr.js\n\n/* global $, not, isPlainObject */\n\n$.fn.extend({\n    attr: function(name, val){\n        var attributes = {};\n\n        if (this.length === 0 && arguments.length === 0) {\n            return undefined;\n        }\n\n        if (this.length && arguments.length === 0) {\n            $.each(this[0].attributes, function(){\n                attributes[this.nodeName] = this.nodeValue;\n            });\n            return attributes;\n        }\n\n        if (arguments.length === 1 && typeof name === \"string\") {\n            return this.length && this[0].nodeType === 1 && this[0].hasAttribute(name) ? this[0].getAttribute(name) : undefined;\n        }\n\n        return this.each(function(){\n            var el = this;\n            if (isPlainObject(name)) {\n                $.each(name, function(k, v){\n                    el.setAttribute(k, v);\n                });\n            } else {\n                el.setAttribute(name, val);\n                // \n            }\n        });\n    },\n\n    removeAttr: function(name){\n        var attributes;\n\n        if (not(name)) {\n            return this.each(function(){\n                var el = this;\n                $.each(this.attributes, function(){\n                    el.removeAttribute(this);\n                });\n            });\n        }\n\n        attributes = typeof name === \"string\" ? name.split(\",\").map(function(el){\n            return el.trim();\n        }) : name;\n\n        return this.each(function(){\n            var el = this;\n            $.each(attributes, function(){\n                if (el.hasAttribute(this)) el.removeAttribute(this);\n            });\n        });\n    },\n\n    toggleAttr: function(name, val){\n        return this.each(function(){\n            var el = this;\n\n            if (not(val)) {\n                el.removeAttribute(name);\n            } else {\n                el.setAttribute(name, val);\n            }\n\n        });\n    },\n\n    id: function(val){\n        return this.length ? $(this[0]).attr(\"id\", val) : undefined;\n    }\n});\n\n$.extend({\n    meta: function(name){\n        return not(name) ? $(\"meta\") : $(\"meta[name='$name']\".replace(\"$name\", name));\n    },\n\n    metaBy: function(name){\n        return not(name) ? $(\"meta\") : $(\"meta[$name]\".replace(\"$name\", name));\n    },\n\n    doctype: function(){\n        return $(\"doctype\");\n    },\n\n    html: function(){\n        return $(\"html\");\n    },\n\n    head: function(){\n        return $(\"html\").find(\"head\");\n    },\n\n    body: function(){\n        return $(\"body\");\n    },\n\n    document: function(){\n        return $(document);\n    },\n\n    window: function(){\n        return $(window);\n    },\n\n    charset: function(val){\n        var meta = $(\"meta[charset]\");\n        if (val) {\n            meta.attr(\"charset\", val);\n        }\n        return meta.attr(\"charset\");\n    }\n});\n\n// Source: src/proxy.js\n\n/* global $ */\n\n$.extend({\n    proxy: function(fn, ctx){\n        return typeof fn !== \"function\" ? undefined : fn.bind(ctx);\n    },\n\n    bind: function(fn, ctx){\n        return this.proxy(fn, ctx);\n    }\n});\n\n\n// Source: src/manipulation.js\n\n/* global $, isArrayLike, not, matches, hasProp */\n\n(function (arr) {\n    arr.forEach(function (item) {\n        ['append', 'prepend'].forEach(function(where){\n            if (hasProp(item, where)) {\n                return;\n            }\n\n            Object.defineProperty(item, where, {\n                configurable: true,\n                enumerable: true,\n                writable: true,\n                value: function () {\n                    var argArr = Array.prototype.slice.call(arguments),\n                        docFrag = document.createDocumentFragment();\n\n                    argArr.forEach(function (argItem) {\n                        var isNode = argItem instanceof Node;\n                        docFrag.appendChild(isNode ? argItem : document.createTextNode(String(argItem)));\n                    });\n\n                    if (where === 'prepend')\n                        this.insertBefore(docFrag, this.firstChild);\n                    else\n                        this.appendChild(docFrag);\n                }\n            });\n        });\n    });\n})([Element.prototype, Document.prototype, DocumentFragment.prototype]);\n\nvar normalizeElements = function(s){\n    var result;\n\n    if (typeof s === \"string\") result = $.isSelector(s) ? $(s) : $.parseHTML(s);\n    else if (s instanceof HTMLElement) result = [s];\n    else if (isArrayLike(s)) result = s;\n    return result;\n};\n\n$.fn.extend({\n\n    appendText: function(text){\n        return this.each(function(elIndex, el){\n            el.innerHTML += text;\n        });\n    },\n\n    prependText: function(text){\n        return this.each(function(elIndex, el){\n            el.innerHTML = text + el.innerHTML;\n        });\n    },\n\n    append: function(elements){\n        var _elements = normalizeElements(elements);\n\n        return this.each(function(elIndex, el){\n            $.each(_elements, function(){\n                if (el === this) return ;\n                var child = elIndex === 0 ? this : this.cloneNode(true);\n                $.script(child);\n                if (child.tagName && child.tagName !== \"SCRIPT\") el.append(child);\n            });\n        });\n    },\n\n    appendTo: function(elements){\n        var _elements = normalizeElements(elements);\n\n        return this.each(function(){\n            var el = this;\n            $.each(_elements, function(parIndex, parent){\n                if (el === this) return ;\n                parent.append(parIndex === 0 ? el : el.cloneNode(true));\n            });\n        });\n    },\n\n    prepend: function(elements){\n        var _elements = normalizeElements(elements);\n\n        return this.each(function (elIndex, el) {\n            $.each(_elements, function(){\n                if (el === this) return ;\n                var child = elIndex === 0 ? this : this.cloneNode(true);\n                $.script(child);\n                if (child.tagName && child.tagName !== \"SCRIPT\") el.prepend(child);\n            });\n        });\n    },\n\n    prependTo: function(elements){\n        var _elements = normalizeElements(elements);\n\n        return this.each(function(){\n            var el = this;\n            $.each(_elements, function(parIndex, parent){\n                if (el === this) return ;\n                $(parent).prepend(parIndex === 0 ? el : el.cloneNode(true));\n            });\n        });\n    },\n\n    insertBefore: function(elements){\n        var _elements = normalizeElements(elements);\n\n        return this.each(function(){\n            var el = this;\n            $.each(_elements, function(elIndex){\n                if (el === this) return ;\n                var parent = this.parentNode;\n                if (parent) {\n                    parent.insertBefore(elIndex === 0 ? el : el.cloneNode(true), this);\n                }\n            });\n        });\n    },\n\n    insertAfter: function(elements){\n        var _elements = normalizeElements(elements);\n\n        return this.each(function(){\n            var el = this;\n            $.each(_elements, function(elIndex, element){\n                if (el === this) return ;\n                var parent = this.parentNode;\n                if (parent) {\n                    parent.insertBefore(elIndex === 0 ? el : el.cloneNode(true), element.nextSibling);\n                }\n            });\n        });\n    },\n\n    after: function(html){\n        return this.each(function(){\n            var el = this;\n            if (typeof html === \"string\") {\n                el.insertAdjacentHTML('afterend', html);\n            } else {\n                $(html).insertAfter(el);\n            }\n        });\n    },\n\n    before: function(html){\n        return this.each(function(){\n            var el = this;\n            if (typeof html === \"string\") {\n                el.insertAdjacentHTML('beforebegin', html);\n            } else {\n                $(html).insertBefore(el);\n            }\n        });\n    },\n\n    clone: function(deep, withData){\n        var res = [];\n        if (not(deep)) {\n            deep = false;\n        }\n        if (not(withData)) {\n            withData = false;\n        }\n        this.each(function(){\n            var el = this.cloneNode(deep);\n            var $el = $(el);\n            var data;\n            if (withData && $.hasData(this)) {\n                data = $(this).data();\n                $.each(data, function(k, v){\n                    $el.data(k, v);\n                });\n            }\n            res.push(el);\n        });\n        return $.merge($(), res);\n    },\n\n    import: function(deep){\n        var res = [];\n        if (not(deep)) {\n            deep = false;\n        }\n        this.each(function(){\n            res.push(document.importNode(this, deep));\n        });\n        return $.merge($(), res);\n    },\n\n    adopt: function(){\n        var res = [];\n        this.each(function(){\n            res.push(document.adoptNode(this));\n        });\n        return $.merge($(), res);\n    },\n\n    remove: function(selector){\n        var i = 0, node, out, res = [];\n\n        if (this.length === 0) {\n            return ;\n        }\n\n        out = selector ? this.filter(function(el){\n            return matches.call(el, selector);\n        }) : this.items();\n\n        for ( ; ( node = out[ i ] ) != null; i++ ) {\n            if (node.parentNode) {\n                res.push(node.parentNode.removeChild(node));\n                $.removeData(node);\n            }\n        }\n\n        return $.merge($(), res);\n    },\n\n    wrap: function( el ){\n        if (this.length === 0) {\n            return ;\n        }\n\n        var wrapper = $(normalizeElements(el));\n\n        if (!wrapper.length) {\n            return ;\n        }\n\n        var res = [];\n\n        this.each(function(){\n            var _target, _wrapper;\n\n            _wrapper = wrapper.clone(true, true);\n            _wrapper.insertBefore(this);\n\n            _target = _wrapper;\n            while (_target.children().length) {\n                _target = _target.children().eq(0);\n            }\n            _target.append(this);\n\n            res.push(_wrapper);\n        });\n\n        return $(res);\n    },\n\n    wrapAll: function( el ){\n        var wrapper, _wrapper, _target;\n\n        if (this.length === 0) {\n            return ;\n        }\n\n        wrapper = $(normalizeElements(el));\n\n        if (!wrapper.length) {\n            return ;\n        }\n\n        _wrapper = wrapper.clone(true, true);\n        _wrapper.insertBefore(this[0]);\n\n        _target = _wrapper;\n        while (_target.children().length) {\n            _target = _target.children().eq(0);\n        }\n\n        this.each(function(){\n            _target.append(this);\n        })\n\n        return _wrapper;\n    },\n\n    wrapInner: function( el ){\n        if (this.length === 0) {\n            return ;\n        }\n\n        var wrapper = $(normalizeElements(el));\n\n        if (!wrapper.length) {\n            return ;\n        }\n\n        var res = [];\n\n        this.each(function(){\n            var elem = $(this);\n            var html = elem.html();\n            var wrp = wrapper.clone(true, true);\n            elem.html(wrp.html(html));\n            res.push(wrp);\n        });\n\n        return $(res);\n    }\n});\n\n// Source: src/animation.js\n\n/* global $, not, camelCase, parseUnit, Promise, getUnit, matches */\n\n$.extend({\n    animation: {\n        duration: 1000,\n        ease: \"linear\",\n        elements: {}\n    }\n});\n\nif (typeof window[\"setupAnimation\"] === 'object') {\n    $.each(window[\"setupAnimation\"], function(key, val){\n        if (typeof $.animation[key] !== \"undefined\" && !not(val))\n            $.animation[key] = val;\n    });\n}\n\nvar transformProps = ['translateX', 'translateY', 'translateZ', 'rotate', 'rotateX', 'rotateY', 'rotateZ', 'scale', 'scaleX', 'scaleY', 'scaleZ', 'skew', 'skewX', 'skewY'];\nvar numberProps = ['opacity', 'zIndex'];\nvar floatProps = ['opacity', 'volume'];\nvar scrollProps = [\"scrollLeft\", \"scrollTop\"];\nvar reverseProps = [\"opacity\", \"volume\"];\n\nfunction _validElement(el) {\n    return el instanceof HTMLElement || el instanceof SVGElement;\n}\n\n/**\n *\n * @param to\n * @param from\n * @returns {*}\n * @private\n */\nfunction _getRelativeValue (to, from) {\n    var operator = /^(\\*=|\\+=|-=)/.exec(to);\n    if (!operator) return to;\n    var u = getUnit(to) || 0;\n    var x = parseFloat(from);\n    var y = parseFloat(to.replace(operator[0], ''));\n    switch (operator[0][0]) {\n        case '+':\n            return x + y + u;\n        case '-':\n            return x - y + u;\n        case '*':\n            return x * y + u;\n        case '/':\n            return x / y + u;\n    }\n}\n\n/**\n *\n * @param el\n * @param prop\n * @param pseudo\n * @returns {*|number|string}\n * @private\n */\nfunction _getStyle (el, prop, pseudo){\n    if (typeof el[prop] !== \"undefined\") {\n        if (scrollProps.indexOf(prop) > -1) {\n            return prop === \"scrollLeft\" ? el === window ? pageXOffset : el.scrollLeft : el === window ? pageYOffset : el.scrollTop;\n        } else {\n            return el[prop] || 0;\n        }\n    }\n\n    return el.style[prop] || getComputedStyle(el, pseudo)[prop];\n}\n\n/**\n *\n * @param el\n * @param key\n * @param val\n * @param unit\n * @param toInt\n * @private\n */\nfunction _setStyle (el, key, val, unit, toInt) {\n\n    if (not(toInt)) {\n        toInt = false;\n    }\n\n    key = camelCase(key);\n\n    if (toInt) {\n        val  = parseInt(val);\n    }\n\n    if (_validElement(el)) {\n        if (typeof el[key] !== \"undefined\") {\n            el[key] = val;\n        } else {\n            el.style[key] = key === \"transform\" || key.toLowerCase().indexOf('color') > -1 ? val : val + unit;\n        }\n    } else {\n        el[key] = val;\n    }\n}\n\n/**\n *\n * @param el\n * @param mapProps\n * @param p\n * @private\n */\nfunction _applyStyles (el, mapProps, p) {\n    $.each(mapProps, function (key, val) {\n        _setStyle(el, key, val[0] + (val[2] * p), val[3], val[4]);\n    });\n}\n\n/**\n *\n * @param el\n * @returns {{}}\n * @private\n */\nfunction _getElementTransforms (el) {\n    if (!_validElement(el)) return {};\n    var str = el.style.transform || '';\n    var reg = /(\\w+)\\(([^)]*)\\)/g;\n    var transforms = {};\n    var m;\n\n    /* jshint ignore:start */\n    // eslint-disable-next-line\n    while (m = reg.exec(str))\n        transforms[m[1]] = m[2];\n    /* jshint ignore:end */\n\n    return transforms;\n}\n\n/**\n *\n * @param val\n * @returns {number[]}\n * @private\n */\nfunction _getColorArrayFromHex (val){\n    var a = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(val ? val : \"#000000\");\n    return a.slice(1).map(function(v) {\n            return parseInt(v, 16);\n    });\n}\n\n/**\n *\n * @param el\n * @param key\n * @returns {number[]}\n * @private\n */\nfunction _getColorArrayFromElement (el, key) {\n    return getComputedStyle(el)[key].replace(/[^\\d.,]/g, '').split(',').map(function(v) {\n        return parseInt(v);\n    });\n}\n\n/**\n *\n * @param el\n * @param mapProps\n * @param p\n * @private\n */\nfunction _applyTransform (el, mapProps, p) {\n    var t = [];\n    var elTransforms = _getElementTransforms(el);\n\n    $.each(mapProps, function(key, val) {\n        var from = val[0], to = val[1], delta = val[2], unit = val[3];\n        key = \"\" + key;\n\n        if ( key.indexOf(\"rotate\") > -1 || key.indexOf(\"skew\") > -1) {\n            if (unit === \"\") unit = \"deg\";\n        }\n\n        if (key.indexOf('scale') > -1) {\n            unit = '';\n        }\n\n        if (key.indexOf('translate') > -1 && unit === '') {\n            unit = 'px';\n        }\n\n        if (unit === \"turn\") {\n            t.push(key+\"(\" + (to * p) + unit + \")\");\n        } else {\n            t.push(key +\"(\" + (from + (delta * p)) + unit+\")\");\n        }\n    });\n\n    $.each(elTransforms, function(key, val) {\n        if (mapProps[key] === undefined) {\n            t.push(key+\"(\"+val+\")\");\n        }\n    });\n\n    el.style.transform = t.join(\" \");\n}\n\n/**\n *\n * @param el\n * @param mapProps\n * @param p\n * @private\n */\nfunction _applyColors (el, mapProps, p) {\n    $.each(mapProps, function (key, val) {\n        var i, result = [0, 0, 0], v;\n        for (i = 0; i < 3; i++) {\n            result[i] = Math.floor(val[0][i] + (val[2][i] * p));\n        }\n        v = \"rgb(\"+(result.join(\",\"))+\")\";\n        el.style[key] = v;\n    });\n}\n\n/**\n *\n * @param val\n * @returns {string|*}\n * @private\n */\nfunction _expandColorValue (val) {\n    var regExp = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    if (val[0] === \"#\" && val.length === 4) {\n        return \"#\" + val.replace(regExp, function(m, r, g, b) {\n            return r + r + g + g + b + b;\n        });\n    }\n    return val[0] === \"#\" ? val : \"#\"+val;\n}\n\n/**\n *\n * @param el\n * @param map\n * @param p\n */\nfunction applyProps (el, map, p) {\n    _applyStyles(el, map.props, p);\n    _applyTransform(el, map.transform, p);\n    _applyColors(el, map.color, p);\n}\n\n/**\n *\n * @param el\n * @param draw\n * @param dir\n * @returns {{transform: {}, color: {}, props: {}}}\n */\nfunction createAnimationMap (el, draw, dir) {\n    var map = {\n        props: {},\n        transform: {},\n        color: {}\n    };\n    var i, from, to, delta, unit, temp;\n    var elTransforms = _getElementTransforms(el);\n\n    if (not(dir)) {\n        dir = \"normal\";\n    }\n\n    $.each(draw, function(key, val) {\n\n        var isTransformProp = transformProps.indexOf(\"\"+key) > -1;\n        var isNumProp = numberProps.indexOf(\"\"+key) > -1;\n        var isColorProp = (\"\"+key).toLowerCase().indexOf(\"color\") > -1;\n\n        if (Array.isArray(val) && val.length === 1) {\n            val = val[0];\n        }\n\n        if (!Array.isArray(val)) {\n            if (isTransformProp) {\n                from = elTransforms[key] || 0;\n            } else if (isColorProp) {\n                from = _getColorArrayFromElement(el, key);\n            } else {\n                from = _getStyle(el, key);\n            }\n            from = !isColorProp ? parseUnit(from) : from;\n            to = !isColorProp ? parseUnit(_getRelativeValue(val, Array.isArray(from) ? from[0] : from)) : _getColorArrayFromHex(val);\n        } else {\n            from = !isColorProp ? parseUnit(val[0]) : _getColorArrayFromHex(_expandColorValue(val[0]));\n            to = !isColorProp ? parseUnit(val[1]) : _getColorArrayFromHex(_expandColorValue(val[1]));\n        }\n\n        if (reverseProps.indexOf(\"\"+key) > -1 && from[0] === to[0]) {\n            from[0] = to[0] > 0 ? 0 : 1;\n        }\n\n        if (dir === \"reverse\") {\n            temp = from;\n            from = to;\n            to = temp;\n        }\n\n        unit = el instanceof HTMLElement && to[1] === '' && !isNumProp && !isTransformProp ? 'px' : to[1];\n\n        if (isColorProp) {\n            delta = [0, 0, 0];\n            for (i = 0; i < 3; i++) {\n                delta[i] = to[i] - from[i];\n            }\n        } else {\n            delta = to[0] - from[0];\n        }\n\n        if (isTransformProp) {\n            map.transform[key] = [from[0], to[0], delta, unit];\n        } else if (isColorProp) {\n            map.color[key] = [from, to, delta, unit];\n        } else {\n            map.props[key] = [from[0], to[0], delta, unit, floatProps.indexOf(\"\"+key) === -1];\n        }\n    });\n\n    return map;\n}\n\nfunction minMax(val, min, max) {\n    return Math.min(Math.max(val, min), max);\n}\n\nvar Easing = {\n    linear: function(){return function(t) {return t;};}\n};\n\nEasing.default = Easing.linear;\n\nvar eases = {\n    Sine: function(){\n        return function(t){\n            return 1 - Math.cos(t * Math.PI / 2);\n        };\n    },\n    Circ: function(){\n        return function(t){\n            return 1 - Math.sqrt(1 - t * t);\n        };\n    },\n    Back: function(){\n        return function(t){\n            return t * t * (3 * t - 2);\n        };\n    },\n    Bounce: function(){\n        return function(t){\n            var pow2, b = 4;\n            // eslint-disable-next-line\n            while (t < (( pow2 = Math.pow(2, --b)) - 1) / 11) {}\n            return 1 / Math.pow(4, 3 - b) - 7.5625 * Math.pow(( pow2 * 3 - 2 ) / 22 - t, 2);\n        };\n    },\n    Elastic: function(amplitude, period){\n        if (not(amplitude)) {\n            amplitude = 1;\n        }\n\n        if (not(period)) {\n            period = 0.5;\n        }\n        var a = minMax(amplitude, 1, 10);\n        var p = minMax(period, 0.1, 2);\n        return function(t){\n            return (t === 0 || t === 1) ? t :\n                -a * Math.pow(2, 10 * (t - 1)) * Math.sin((((t - 1) - (p / (Math.PI * 2) * Math.asin(1 / a))) * (Math.PI * 2)) / p);\n        };\n    }\n};\n\n['Quad', 'Cubic', 'Quart', 'Quint', 'Expo'].forEach(function(name, i) {\n    eases[name] = function(){\n        return function(t){\n            return Math.pow(t, i + 2);\n        };\n    };\n});\n\nObject.keys(eases).forEach(function(name) {\n    var easeIn = eases[name];\n    Easing['easeIn' + name] = easeIn;\n    Easing['easeOut' + name] = function(a, b){\n        return function(t){\n            return 1 - easeIn(a, b)(1 - t);\n        };\n    };\n    Easing['easeInOut' + name] = function(a, b){\n        return function(t){\n            return t < 0.5 ? easeIn(a, b)(t * 2) / 2 : 1 - easeIn(a, b)(t * -2 + 2) / 2;\n        };\n    };\n});\n\nvar defaultAnimationProps = {\n    id: null,\n    el: null,\n    draw: {},\n    dur: $.animation.duration,\n    ease: $.animation.ease,\n    loop: 0,\n    pause: 0,\n    dir: \"normal\",\n    defer: 0,\n    onStart: function(){},\n    onStop: function(){},\n    onStopAll: function(){},\n    onPause: function(){},\n    onPauseAll: function(){},\n    onResume: function(){},\n    onResumeAll: function(){},\n    onFrame: function(){},\n    onDone: function(){}\n};\n\nfunction animate(args){\n    return new Promise(function(resolve){\n        var that = this;\n        var props = $.assign({}, defaultAnimationProps, {dur: $.animation.duration, ease: $.animation.ease}, args);\n        var id = props.id, el = props.el, draw = props.draw, dur = props.dur, ease = props.ease, loop = props.loop,\n            onStart = props.onStart, onFrame = props.onFrame, onDone = props.onDone,\n            pauseStart = props.pause, dir = props.dir, defer = props.defer;\n        var map = {};\n        var easeName = \"linear\", easeArgs = [], easeFn = Easing.linear, matchArgs;\n        var direction = dir === \"alternate\" ? \"normal\" : dir;\n        var replay = false;\n        var animationID = id ? id : +(performance.now() * Math.pow(10, 14));\n\n        if (not(el)) {\n            throw new Error(\"Unknown element!\");\n        }\n\n        if (typeof el === \"string\") {\n            el = document.querySelector(el);\n        }\n\n        if (typeof draw !== \"function\" && typeof draw !== \"object\") {\n            throw new Error(\"Unknown draw object. Must be a function or object!\");\n        }\n\n        if (dur === 0) {\n            dur = 1;\n        }\n\n        if (dir === \"alternate\" && typeof loop === \"number\") {\n            loop *= 2;\n        }\n\n        if (typeof ease === \"string\") {\n            matchArgs = /\\(([^)]+)\\)/.exec(ease);\n            easeName = ease.split(\"(\")[0];\n            easeArgs = matchArgs ? matchArgs[1].split(',').map(function(p){return parseFloat(p);}) : [];\n            easeFn = Easing[easeName] || Easing.linear;\n        } else if (typeof ease === \"function\") {\n            easeFn = ease;\n        } else {\n            easeFn = Easing.linear;\n        }\n\n        $.animation.elements[animationID] = {\n            element: el,\n            id: null,\n            stop: 0,\n            pause: 0,\n            loop: 0,\n            t: -1,\n            started: 0,\n            paused: 0\n        };\n\n        var play = function() {\n            if (typeof draw === \"object\") {\n                map = createAnimationMap(el, draw, direction);\n            }\n\n            if (typeof onStart === \"function\") {\n                onStart.apply(el);\n            }\n\n            // start = performance.now();\n            $.animation.elements[animationID].loop += 1;\n            $.animation.elements[animationID].started = performance.now();\n            $.animation.elements[animationID].duration = dur;\n            $.animation.elements[animationID].id = requestAnimationFrame(animate);\n        };\n\n        var done = function() {\n            cancelAnimationFrame($.animation.elements[animationID].id);\n            delete $.animation.elements[id];\n\n            if (typeof onDone === \"function\") {\n                onDone.apply(el);\n            }\n\n            resolve(that);\n        };\n\n        var animate = function(time) {\n            var p, t;\n            var stop = $.animation.elements[animationID].stop;\n            var pause = $.animation.elements[animationID].pause;\n            var start = $.animation.elements[animationID].started;\n\n            if ($.animation.elements[animationID].paused) {\n                start = time - $.animation.elements[animationID].t * dur;\n                $.animation.elements[animationID].started = start;\n            }\n\n            t = ((time - start) / dur).toFixed(4);\n\n            if (t > 1) t = 1;\n            if (t < 0) t = 0;\n\n            p = easeFn.apply(null, easeArgs)(t);\n\n            $.animation.elements[animationID].t = t;\n            $.animation.elements[animationID].p = p;\n\n            if (pause) {\n                $.animation.elements[animationID].id = requestAnimationFrame(animate);\n                // $.animation.elements[animationID].started = performance.now();\n                return;\n            }\n\n            if ( stop > 0) {\n                if (stop === 2) {\n                    if (typeof draw === \"function\") {\n                        draw.bind(el)(1, 1);\n                    } else {\n                        applyProps(el, map, 1);\n                    }\n                }\n                done();\n                return;\n            }\n\n            if (typeof draw === \"function\") {\n                draw.bind(el)(t, p);\n            } else {\n                applyProps(el, map, p);\n            }\n\n            if (typeof onFrame === 'function') {\n                onFrame.apply(el, [t, p]);\n            }\n\n            if (t < 1) {\n                $.animation.elements[animationID].id = requestAnimationFrame(animate);\n            }\n\n            if (parseInt(t) === 1) {\n                if (loop) {\n                    if (dir === \"alternate\") {\n                        direction = direction === \"normal\" ? \"reverse\" : \"normal\";\n                    }\n\n                    if (typeof loop === \"boolean\") {\n                        setTimeout(function () {\n                            play();\n                        }, pauseStart);\n                    } else {\n                        if (loop > $.animation.elements[animationID].loop) {\n                            setTimeout(function () {\n                                play();\n                            }, pauseStart);\n                        } else {\n                            done();\n                        }\n                    }\n                } else {\n                    if (dir === \"alternate\" && !replay) {\n                        direction = direction === \"normal\" ? \"reverse\" : \"normal\";\n                        replay = true;\n                        play();\n                    } else {\n                        done();\n                    }\n                }\n            }\n        };\n        if (defer > 0) {\n            setTimeout(function() {\n                play();\n            }, defer);\n        } else {\n            play();\n        }\n    });\n}\n\n// Stop animation\nfunction stopAnimation(id, done){\n    var an = $.animation.elements[id];\n\n    if (typeof an === \"undefined\") {\n        return ;\n    }\n\n    if (not(done)) {\n        done = true;\n    }\n\n    an.stop = done === true ? 2 : 1;\n\n    if (typeof an.onStop === \"function\") {\n        an.onStop.apply(an.element);\n    }\n}\n\nfunction stopAnimationAll(done, filter){\n    $.each($.animation.elements, function(k, v){\n        if (filter) {\n            if (typeof filter === \"string\") {\n                if (matches.call(v.element, filter)) stopAnimation(k, done);\n            } else if (filter.length) {\n                $.each(filter, function(){\n                    if (v.element === this) stopAnimation(k, done);\n                });\n            } else if (filter instanceof Element) {\n                if (v.element === filter) stopAnimation(k, done);\n            }\n        } else {\n            stopAnimation(k, done);\n        }\n    });\n}\n// end of stop\n\n// Pause and resume animation\nfunction pauseAnimation(id){\n    var an = $.animation.elements[id];\n\n    if (typeof an === \"undefined\") {\n        return ;\n    }\n\n    an.pause = 1;\n    an.paused = performance.now();\n\n    if (typeof an.onPause === \"function\") {\n        an.onPause.apply(an.element);\n    }\n}\n\nfunction pauseAnimationAll(filter){\n    $.each($.animation.elements, function(k, v){\n        if (filter) {\n            if (typeof filter === \"string\") {\n                if (matches.call(v.element, filter)) pauseAnimation(k);\n            } else if (filter.length) {\n                $.each(filter, function(){\n                    if (v.element === this) pauseAnimation(k);\n                });\n            } else if (filter instanceof Element) {\n                if (v.element === filter) pauseAnimation(k);\n            }\n        } else {\n            pauseAnimation(k);\n        }\n    });\n}\n// end of pause\n\nfunction resumeAnimation(id){\n    var an = $.animation.elements[id];\n\n    if (typeof an === \"undefined\") {\n        return ;\n    }\n\n    an.pause = 0;\n    an.paused = 0;\n\n    if (typeof an.onResume === \"function\") {\n        an.onResume.apply(an.element);\n    }\n}\n\nfunction resumeAnimationAll(filter){\n    $.each($.animation.elements, function(k, v){\n        if (filter) {\n            if (typeof filter === \"string\") {\n                if (matches.call(v.element, filter)) resumeAnimation(k);\n            } else if (filter.length) {\n                $.each(filter, function(){\n                    if (v.element === this) resumeAnimation(k);\n                });\n            } else if (filter instanceof Element) {\n                if (v.element === filter) resumeAnimation(k);\n            }\n        } else {\n            resumeAnimation(k);\n        }\n    });\n}\n\n/* eslint-enable */\n\nvar defaultChainOptions = {\n    loop: false,\n    onChainItem: null,\n    onChainItemComplete: null,\n    onChainComplete: null\n}\n\nfunction chain(arr, opt){\n    var o = $.extend({}, defaultChainOptions, opt);\n\n    if (typeof o.loop !== \"boolean\") {\n        o.loop--;\n    }\n\n    if (!Array.isArray(arr)) {\n        console.warn(\"Chain array is not defined!\");\n        return false;\n    }\n\n    var reducer = function(acc, item){\n        return acc.then(function(){\n            if (typeof o[\"onChainItem\"] === \"function\") {\n                o[\"onChainItem\"](item);\n            }\n            return animate(item).then(function(){\n                if (typeof o[\"onChainItemComplete\"] === \"function\") {\n                    o[\"onChainItemComplete\"](item);\n                }\n            });\n        });\n    };\n\n    arr.reduce(reducer, Promise.resolve()).then(function(){\n        if (typeof o[\"onChainComplete\"] === \"function\") {\n            o[\"onChainComplete\"]();\n        }\n\n        if (o.loop) {\n            chain(arr, o);\n        }\n    });\n}\n\n$.easing = {};\n\n$.extend($.easing, Easing);\n\n$.extend({\n    animate: function(args){\n        var el, draw, dur, ease, cb;\n\n        if (arguments.length > 1) {\n            el = $(arguments[0])[0];\n            draw = arguments[1];\n            dur = arguments[2] || $.animation.duration;\n            ease = arguments[3] || $.animation.ease;\n            cb = arguments[4];\n\n            if (typeof dur === 'function') {\n                cb = dur;\n                ease = $.animation.ease;\n                dur = $.animation.duration;\n            }\n\n            if (typeof ease === 'function') {\n                cb = ease;\n                ease = $.animation.ease;\n            }\n\n            return animate({\n                el: el,\n                draw: draw,\n                dur: dur,\n                ease: ease,\n                onDone: cb\n            });\n        }\n\n        return animate(args);\n    },\n    chain: chain,\n    stop: stopAnimation,\n    stopAll: stopAnimationAll,\n    resume: resumeAnimation,\n    resumeAll: resumeAnimationAll,\n    pause: pauseAnimation,\n    pauseAll: pauseAnimationAll\n});\n\n$.fn.extend({\n    /**\n     *\n\n     args = {\n         draw: {} | function,\n         dur: 1000,\n         ease: \"linear\",\n         loop: 0,\n         pause: 0,\n         dir: \"normal\",\n         defer: 0,\n         onFrame: function,\n         onDone: function\n     }\n\n     * @returns {this}\n     */\n    animate: function(args){\n        var that = this;\n        var draw, dur, easing, cb;\n        var a = args;\n        var compatibilityMode;\n\n        compatibilityMode = !Array.isArray(args) && (arguments.length > 1 || (arguments.length === 1 && typeof arguments[0].draw === 'undefined'));\n\n        if ( compatibilityMode ) {\n            draw = arguments[0];\n            dur = arguments[1] || $.animation.duration;\n            easing = arguments[2] || $.animation.ease;\n            cb = arguments[3];\n\n            if (typeof dur === 'function') {\n                cb = dur;\n                dur = $.animation.duration;\n                easing = $.animation.ease;\n            }\n\n            if (typeof easing === 'function') {\n                cb = easing;\n                easing = $.animation.ease;\n            }\n\n            return this.each(function(){\n                return $.animate({\n                    el: this,\n                    draw: draw,\n                    dur: dur,\n                    ease: easing,\n                    onDone: cb\n                });\n            });\n        }\n\n        if (Array.isArray(args)) {\n            $.each(args, function(){\n                var a = this;\n                that.each(function(){\n                    a.el = this;\n                    $.animate(a);\n                });\n            });\n            return this;\n        }\n\n        return this.each(function(){\n            a.el = this;\n            $.animate(a);\n        });\n    },\n\n    chain: function(arr, loop){\n        return this.each(function(){\n            var el = this;\n            $.each(arr, function(){\n                this.el = el;\n            });\n            $.chain(arr, loop);\n        });\n    },\n\n    /**\n     *\n     * @param done\n     * @returns {this}\n     */\n    stop: function(done){\n        return this.each(function(){\n            var el = this;\n            $.each($.animation.elements, function(k, o){\n                if (o.element === el) {\n                    stopAnimation(k, done);\n                }\n            });\n        });\n    },\n\n    pause: function(){\n        return this.each(function(){\n            var el = this;\n            $.each($.animation.elements, function(k, o){\n                if (o.element === el) {\n                    pauseAnimation(k);\n                }\n            });\n        });\n    },\n\n    resume: function(){\n        return this.each(function(){\n            var el = this;\n            $.each($.animation.elements, function(k, o){\n                if (o.element === el) {\n                    resumeAnimation(k);\n                }\n            });\n        });\n    }\n});\n\n\n// Source: src/visibility.js\n\n/* global $ */\n\n$.extend({\n    hidden: function(el, val, cb){\n        el = $(el)[0];\n\n        if (typeof val === \"string\") {\n            val = val.toLowerCase() === \"true\";\n        }\n\n        if (typeof val === \"function\") {\n            cb = val;\n            val = !el.hidden;\n        }\n\n        el.hidden = val;\n\n        if (typeof cb === \"function\") {\n            $.bind(cb, el);\n            cb.call(el, arguments);\n        }\n\n        return this;\n    },\n\n    hide: function(el, cb){\n        var $el = $(el);\n\n        $el.origin('display', (el.style.display ? el.style.display : getComputedStyle(el, null).display));\n        el.style.display = 'none';\n\n        if (typeof cb === \"function\") {\n            $.bind(cb, el);\n            cb.call(el, arguments);\n        }\n\n        return this;\n    },\n\n    show: function(el, cb){\n        var display = $(el).origin('display', undefined, \"block\");\n        el.style.display = display ? display === 'none' ? 'block' : display : '';\n        if (parseInt(el.style.opacity) === 0) {\n            el.style.opacity = \"1\";\n        }\n        if (typeof cb === \"function\") {\n            $.bind(cb, el);\n            cb.call(el, arguments);\n        }\n        return this;\n    },\n\n    visible: function(el, mode, cb){\n        if (mode === undefined) {\n            mode = true;\n        }\n        el.style.visibility = mode ? 'visible' : 'hidden';\n        if (typeof cb === \"function\") {\n            $.bind(cb, el);\n            cb.call(el, arguments);\n        }\n        return this;\n    },\n\n    toggle: function(el, cb){\n        var func = getComputedStyle(el, null).display !== 'none' ? 'hide' : 'show';\n        return $[func](el, cb);\n    }\n});\n\n$.fn.extend({\n    hide: function(){\n        var callback;\n\n        $.each(arguments, function(){\n            if (typeof this === 'function') {\n                callback = this;\n            }\n        });\n\n        return this.each(function(){\n            $.hide(this, callback);\n        });\n    },\n\n    show: function(){\n        var callback;\n\n        $.each(arguments, function(){\n            if (typeof this === 'function') {\n                callback = this;\n            }\n        });\n\n        return this.each(function(){\n            $.show(this, callback);\n        });\n    },\n\n    visible: function(mode, cb){\n        return this.each(function(){\n            $.visible(this, mode, cb);\n        });\n    },\n\n    toggle: function(cb){\n        return this.each(function(){\n            $.toggle(this, cb);\n        });\n    },\n\n    hidden: function(val, cb){\n        return this.each(function(){\n            $.hidden(this, val, cb);\n        });\n    }\n});\n\n\n\n// Source: src/effects.js\n\n/* global $, not, isVisible */\n\n$.extend({\n    fx: {\n        off: false\n    }\n});\n\n$.fn.extend({\n    fadeIn: function(dur, easing, cb){\n        return this.each(function(){\n            var el = this;\n            var $el = $(el);\n            var visible = !(!isVisible(el) || (isVisible(el) && +($el.style('opacity')) === 0));\n\n            if (visible) {\n                return this;\n            }\n\n            if (not(dur) && not(easing) && not(cb)) {\n                cb = null;\n                dur = $.animation.duration;\n            } else if (typeof dur === \"function\") {\n                cb = dur;\n                dur = $.animation.duration;\n            }\n\n            if (typeof easing === \"function\") {\n                cb = easing;\n                easing = $.animation.ease;\n            }\n\n            if ($.fx.off) {\n                dur = 0;\n            }\n\n            var originDisplay = $el.origin(\"display\", undefined, 'block');\n\n            el.style.opacity = \"0\";\n            el.style.display = originDisplay;\n\n            return $.animate({\n                el: el,\n                draw: {\n                    opacity: 1\n                },\n                dur: dur,\n                ease: easing,\n                onDone: function(){\n                    if (typeof cb === 'function') {\n                        $.proxy(cb, this)();\n                    }\n                }\n            });\n        });\n    },\n\n    fadeOut: function(dur, easing, cb){\n        return this.each(function(){\n            var el = this;\n            var $el = $(el);\n\n            if ( !isVisible(el) ) return ;\n\n            if (not(dur) && not(easing) && not(cb)) {\n                cb = null;\n                dur = $.animation.duration;\n            } else\n            if (typeof dur === \"function\") {\n                cb = dur;\n                dur = $.animation.duration;\n            }\n            if (typeof easing === \"function\") {\n                cb = easing;\n                easing = $.animation.ease;\n            }\n\n            $el.origin(\"display\", $el.style('display'));\n\n            return $.animate({\n                el: el,\n                draw: {\n                    opacity: 0\n                },\n                dur: dur,\n                ease: easing,\n                onDone: function(){\n                    this.style.display = 'none';\n\n                    if (typeof cb === 'function') {\n                        $.proxy(cb, this)();\n                    }\n                }\n            });\n        });\n    },\n\n    slideUp: function(dur, easing, cb){\n        return this.each(function(){\n            var el = this;\n            var $el = $(el);\n            var currHeight;\n\n            if ($el.height() === 0) return ;\n\n            if (not(dur) && not(easing) && not(cb)) {\n                cb = null;\n                dur = $.animation.duration;\n            } else\n            if (typeof dur === \"function\") {\n                cb = dur;\n                dur = $.animation.duration;\n            }\n            if (typeof easing === \"function\") {\n                cb = easing;\n                easing = $.animation.ease;\n            }\n\n            currHeight = $el.height();\n            $el.origin(\"height\", currHeight);\n            $el.origin(\"display\", $(el).style('display'));\n\n            $el.css({\n                overflow: \"hidden\"\n            });\n\n            return $.animate({\n                el: el,\n                draw: {\n                    height: 0\n                },\n                dur: dur,\n                ease: easing,\n                onDone: function(){\n                    $el.hide().removeStyleProperty(\"overflow, height\");\n                    if (typeof cb === 'function') {\n                        $.proxy(cb, this)();\n                    }\n                }\n            });\n        });\n    },\n\n    slideDown: function(dur, easing, cb){\n        return this.each(function(){\n            var el = this;\n            var $el = $(el);\n            var targetHeight, originDisplay;\n\n            if (not(dur) && not(easing) && not(cb)) {\n                cb = null;\n                dur = $.animation.duration;\n            } else\n            if (typeof dur === \"function\") {\n                cb = dur;\n                dur = $.animation.duration;\n            }\n            if (typeof easing === \"function\") {\n                cb = easing;\n                easing = $.animation.ease;\n            }\n\n            $el.show().visible(false);\n            targetHeight = +$el.origin(\"height\", undefined, $el.height());\n            if (parseInt(targetHeight) === 0) {\n                targetHeight = el.scrollHeight;\n            }\n            originDisplay = $el.origin(\"display\", $el.style('display'), \"block\");\n            $el.height(0).visible(true);\n\n            $el.css({\n                overflow: \"hidden\",\n                display: originDisplay === \"none\" ? \"block\" : originDisplay\n            });\n\n            return $.animate({\n                el: el,\n                draw: {\n                    height: targetHeight\n                },\n                dur: dur,\n                ease: easing,\n                onDone: function(){\n                    $(el).removeStyleProperty(\"overflow, height, visibility\");\n                    if (typeof cb === 'function') {\n                        $.proxy(cb, this)();\n                    }\n                }\n            });\n        });\n    },\n\n    moveTo: function(x, y, dur, easing, cb){\n        var draw = {\n            top: y,\n            left: x\n        };\n\n        if (typeof dur === \"function\") {\n            cb = dur;\n            dur = $.animation.duration;\n            easing = $.animation.ease;\n        }\n\n        if (typeof easing === \"function\") {\n            cb = easing;\n            easing = $.animation.ease;\n        }\n\n        return this.each(function(){\n            $.animate({\n                el: this,\n                draw: draw,\n                dur: dur,\n                ease: easing,\n                onDone: cb\n            });\n        });\n    },\n\n    centerTo: function(x, y, dur, easing, cb){\n        if (typeof dur === \"function\") {\n            cb = dur;\n            dur = $.animation.duration;\n            easing = $.animation.ease;\n        }\n\n        if (typeof easing === \"function\") {\n            cb = easing;\n            easing = $.animation.ease;\n        }\n\n        return this.each(function(){\n            var draw = {\n                left: x - this.clientWidth / 2,\n                top: y - this.clientHeight / 2\n            };\n            $.animate({\n                el: this,\n                draw: draw,\n                dur: dur,\n                ease: easing,\n                onDone: cb\n            });\n        });\n    },\n\n    colorTo: function(color, dur, easing, cb){\n        var draw = {\n            color: color\n        };\n\n        if (typeof dur === \"function\") {\n            cb = dur;\n            dur = $.animation.duration;\n            easing = $.animation.ease;\n        }\n\n        if (typeof easing === \"function\") {\n            cb = easing;\n            easing = $.animation.ease;\n        }\n\n        return this.each(function(){\n            $.animate({\n                el: this,\n                draw: draw,\n                dur: dur,\n                ease: easing,\n                onDone: cb\n            });\n        });\n    },\n\n    backgroundTo: function(color, dur, easing, cb){\n        var draw = {\n            backgroundColor: color\n        };\n\n        if (typeof dur === \"function\") {\n            cb = dur;\n            dur = $.animation.duration;\n            easing = $.animation.ease;\n        }\n\n        if (typeof easing === \"function\") {\n            cb = easing;\n            easing = $.animation.ease;\n        }\n\n        return this.each(function(){\n            $.animate({\n                el: this,\n                draw: draw,\n                dur: dur,\n                ease: easing,\n                onDone: cb\n            });\n        });\n    }\n});\n\n// Source: src/init.js\n\n/* global $, isArrayLike, isPlainObject, hasProp, str2arr */\n\n$.init = function(sel, ctx){\n    var parsed;\n    var that = this;\n\n    if (typeof sel === \"string\") {\n        sel = sel.trim();\n    }\n\n    this.uid = $.uniqueId();\n\n    if (!sel) {\n        return this;\n    }\n\n    if (typeof sel === \"function\") {\n        return $.ready(sel);\n    }\n\n    if (sel instanceof Element) {\n        this.push(sel);\n        return this;\n    }\n\n    if (sel instanceof $) {\n        $.each(sel, function(){\n            that.push(this);\n        });\n        return this;\n    }\n\n    if (sel === \"window\") sel = window;\n    if (sel === \"document\") sel = document;\n    if (sel === \"body\") sel = document.body;\n    if (sel === \"html\") sel = document.documentElement;\n    if (sel === \"doctype\") sel = document.doctype;\n    if (sel && (sel.nodeType || sel.self === window)) {\n        this.push(sel);\n        return this;\n    }\n\n    if (isArrayLike(sel)) {\n        $.each(sel, function(){\n            $(this).each(function(){\n                that.push(this);\n            });\n        });\n        return this;\n    }\n\n    if (typeof sel !== \"string\" && (sel.self && sel.self !== window)) {\n        return this;\n    }\n\n    if (sel === \"#\" || sel === \".\") {\n        console.error(\"Selector can't be # or .\") ;\n        return this;\n    }\n\n    if (sel[0] === \"@\") {\n\n        $(\"[data-role]\").each(function(){\n            var roles = str2arr($(this).attr(\"data-role\"), \",\");\n            if (roles.indexOf(sel.slice(1)) > -1) {\n                that.push(this);\n            }\n        });\n\n    } else {\n\n        parsed = $.parseHTML(sel);\n\n        if (parsed.length === 1 && parsed[0].nodeType === 3) { // Must be a text node -> css sel\n            try {\n                [].push.apply(this, document.querySelectorAll(sel));\n            } catch (e) {\n                //console.error(sel + \" is not a valid selector\");\n            }\n        } else {\n            $.merge(this, parsed);\n        }\n    }\n\n    if (ctx !== undefined) {\n        if (ctx instanceof $) {\n            this.each(function () {\n                $(ctx).append(that);\n            });\n        } else if (ctx instanceof HTMLElement) {\n            $(ctx).append(that);\n        } else {\n            if (isPlainObject(ctx)) {\n                $.each(this,function(){\n                    for(var name in ctx) {\n                        if (hasProp(ctx, name))\n                            this.setAttribute(name, ctx[name]);\n                    }\n                });\n            }\n        }\n    }\n\n    return this;\n};\n\n$.init.prototype = $.fn;\n\n\n// Source: src/populate.js\n\n/* global Promise, $ */\n\nvar _$ = window.$;\n\n$.Promise = Promise;\n\nwindow.m4q = $;\n\nif (typeof window.$ === \"undefined\") {\n    window.$ = $;\n}\n\n$.global = function(){\n    _$ = window.$;\n    window.$ = $;\n};\n\n$.noConflict = function() {\n    if ( window.$ === $ ) {\n        window.$ = _$;\n    }\n\n    return $;\n};\n\n}(window));\n\r\n\r\n(function($) {\n    'use strict';\n\n    var meta_init = $.meta('metro4:init').attr(\"content\");\n    var meta_locale = $.meta('metro4:locale').attr(\"content\");\n    var meta_week_start = $.meta('metro4:week_start').attr(\"content\");\n    var meta_date_format = $.meta('metro4:date_format').attr(\"content\");\n    var meta_date_format_input = $.meta('metro4:date_format_input').attr(\"content\");\n    var meta_animation_duration = $.meta('metro4:animation_duration').attr(\"content\");\n    var meta_callback_timeout = $.meta('metro4:callback_timeout').attr(\"content\");\n    var meta_timeout = $.meta('metro4:timeout').attr(\"content\");\n    var meta_scroll_multiple = $.meta('metro4:scroll_multiple').attr(\"content\");\n    var meta_cloak = $.meta('metro4:cloak').attr(\"content\");\n    var meta_cloak_duration = $.meta('metro4:cloak_duration').attr(\"content\");\n    var meta_global_common = $.meta('metro4:global_common').attr(\"content\");\n    var meta_blur_image = $.meta('metro4:blur_image').attr(\"content\");\n\n    if (window.METRO_BLUR_IMAGE === undefined) {\n        window.METRO_BLUR_IMAGE = meta_blur_image !== undefined ? JSON.parse(meta_global_common) : false;\n    }\n\n    if (window.METRO_GLOBAL_COMMON === undefined) {\n        window.METRO_GLOBAL_COMMON = meta_global_common !== undefined ? JSON.parse(meta_global_common) : false;\n    }\n\n    var meta_jquery = $.meta('metro4:jquery').attr(\"content\"); //undefined\n    window.jquery_present = typeof jQuery !== \"undefined\";\n    if (window.METRO_JQUERY === undefined) {\n        window.METRO_JQUERY = meta_jquery !== undefined ? JSON.parse(meta_jquery) : true;\n    }\n    window.useJQuery = window.jquery_present && window.METRO_JQUERY;\n\n\n    /* Added by Ken Kitay https://github.com/kens-code*/\n    var meta_about = $.meta('metro4:about').attr(\"content\");\n    if (window.METRO_SHOW_ABOUT === undefined) {\n        window.METRO_SHOW_ABOUT = meta_about !== undefined ? JSON.parse(meta_about) : true;\n    }\n    /* --- end ---*/\n\n    var meta_compile = $.meta('metro4:compile').attr(\"content\");\n    if (window.METRO_SHOW_COMPILE_TIME === undefined) {\n        window.METRO_SHOW_COMPILE_TIME = meta_compile !== undefined ? JSON.parse(meta_compile) : true;\n    }\n\n    if (window.METRO_INIT === undefined) {\n        window.METRO_INIT = meta_init !== undefined ? JSON.parse(meta_init) : true;\n    }\n\n    if (window.METRO_DEBUG === undefined) {window.METRO_DEBUG = true;}\n\n    if (window.METRO_WEEK_START === undefined) {\n        window.METRO_WEEK_START = meta_week_start !== undefined ? parseInt(meta_week_start) : 0;\n    }\n    if (window.METRO_DATE_FORMAT === undefined) {\n        window.METRO_DATE_FORMAT = meta_date_format !== undefined ? meta_date_format : \"YYYY-MM-DD\";\n    }\n    if (window.METRO_DATE_FORMAT_INPUT === undefined) {\n        window.METRO_DATE_FORMAT_INPUT = meta_date_format_input !== undefined ? meta_date_format_input : \"YYYY-MM-DD\";\n    }\n    if (window.METRO_LOCALE === undefined) {\n        window.METRO_LOCALE = meta_locale !== undefined ? meta_locale : 'en-US';\n    }\n    if (window.METRO_ANIMATION_DURATION === undefined) {\n        window.METRO_ANIMATION_DURATION = meta_animation_duration !== undefined ? parseInt(meta_animation_duration) : 100;\n    }\n    if (window.METRO_CALLBACK_TIMEOUT === undefined) {\n        window.METRO_CALLBACK_TIMEOUT = meta_callback_timeout !== undefined ? parseInt(meta_callback_timeout) : 500;\n    }\n    if (window.METRO_TIMEOUT === undefined) {\n        window.METRO_TIMEOUT = meta_timeout !== undefined ? parseInt(meta_timeout) : 2000;\n    }\n    if (window.METRO_SCROLL_MULTIPLE === undefined) {\n        window.METRO_SCROLL_MULTIPLE = meta_scroll_multiple !== undefined ? parseInt(meta_scroll_multiple) : 20;\n    }\n    if (window.METRO_CLOAK_REMOVE === undefined) {\n        window.METRO_CLOAK_REMOVE = meta_cloak !== undefined ? (\"\"+meta_cloak).toLowerCase() : \"fade\";\n    }\n    if (window.METRO_CLOAK_DURATION === undefined) {\n        window.METRO_CLOAK_DURATION = meta_cloak_duration !== undefined ? parseInt(meta_cloak_duration) : 300;\n    }\n\n    if (window.METRO_HOTKEYS_FILTER_CONTENT_EDITABLE === undefined) {window.METRO_HOTKEYS_FILTER_CONTENT_EDITABLE = true;}\n    if (window.METRO_HOTKEYS_FILTER_INPUT_ACCEPTING_ELEMENTS === undefined) {window.METRO_HOTKEYS_FILTER_INPUT_ACCEPTING_ELEMENTS = true;}\n    if (window.METRO_HOTKEYS_FILTER_TEXT_INPUTS === undefined) {window.METRO_HOTKEYS_FILTER_TEXT_INPUTS = true;}\n    if (window.METRO_HOTKEYS_BUBBLE_UP === undefined) {window.METRO_HOTKEYS_BUBBLE_UP = false;}\n    if (window.METRO_THROWS === undefined) {window.METRO_THROWS = true;}\n\n    window.METRO_MEDIA = [];\n\n}(m4q));\r\n\r\n/* Metro 4 Core */\n(function() {\n    'use strict';\n\n    var $ = m4q;\n\n    if (typeof m4q === 'undefined') {\n        throw new Error('Metro 4 requires m4q helper!');\n    }\n\n    if (!('MutationObserver' in window)) {\n        throw new Error('Metro 4 requires MutationObserver!');\n    }\n\n    var isTouch = (('ontouchstart' in window) || (navigator[\"MaxTouchPoints\"] > 0) || (navigator[\"msMaxTouchPoints\"] > 0));\n\n    var normalizeComponentName = function(name){\n        return typeof name !== \"string\" ? undefined : name.replace(/-/g, \"\").toLowerCase();\n    };\n\n    var Metro = {\n\n        version: \"4.5.1\",\n        compileTime: \"23/06/2022 09:21:11\",\n        buildNumber: \"756\",\n        isTouchable: isTouch,\n        fullScreenEnabled: document.fullscreenEnabled,\n        sheet: null,\n\n\n        controlsPosition: {\n            INSIDE: \"inside\",\n            OUTSIDE: \"outside\"\n        },\n\n        groupMode: {\n            ONE: \"one\",\n            MULTI: \"multi\"\n        },\n\n        aspectRatio: {\n            HD: \"hd\",\n            SD: \"sd\",\n            CINEMA: \"cinema\"\n        },\n\n        fullScreenMode: {\n            WINDOW: \"window\",\n            DESKTOP: \"desktop\"\n        },\n\n        position: {\n            TOP: \"top\",\n            BOTTOM: \"bottom\",\n            LEFT: \"left\",\n            RIGHT: \"right\",\n            TOP_RIGHT: \"top-right\",\n            TOP_LEFT: \"top-left\",\n            BOTTOM_LEFT: \"bottom-left\",\n            BOTTOM_RIGHT: \"bottom-right\",\n            LEFT_BOTTOM: \"left-bottom\",\n            LEFT_TOP: \"left-top\",\n            RIGHT_TOP: \"right-top\",\n            RIGHT_BOTTOM: \"right-bottom\"\n        },\n\n        popoverEvents: {\n            CLICK: \"click\",\n            HOVER: \"hover\",\n            FOCUS: \"focus\"\n        },\n\n        stepperView: {\n            SQUARE: \"square\",\n            CYCLE: \"cycle\",\n            DIAMOND: \"diamond\"\n        },\n\n        listView: {\n            LIST: \"list\",\n            CONTENT: \"content\",\n            ICONS: \"icons\",\n            ICONS_MEDIUM: \"icons-medium\",\n            ICONS_LARGE: \"icons-large\",\n            TILES: \"tiles\",\n            TABLE: \"table\"\n        },\n\n        events: {\n            click: 'click',\n            start: isTouch ? 'touchstart' : 'mousedown',\n            stop: isTouch ? 'touchend' : 'mouseup',\n            move: isTouch ? 'touchmove' : 'mousemove',\n            enter: isTouch ? 'touchstart' : 'mouseenter',\n\n            startAll: 'mousedown touchstart',\n            stopAll: 'mouseup touchend',\n            moveAll: 'mousemove touchmove',\n\n            leave: 'mouseleave',\n            focus: 'focus',\n            blur: 'blur',\n            resize: 'resize',\n            keyup: 'keyup',\n            keydown: 'keydown',\n            keypress: 'keypress',\n            dblclick: 'dblclick',\n            input: 'input',\n            change: 'change',\n            cut: 'cut',\n            paste: 'paste',\n            scroll: 'scroll',\n            mousewheel: 'mousewheel',\n            inputchange: \"change input propertychange cut paste copy drop\",\n            dragstart: \"dragstart\",\n            dragend: \"dragend\",\n            dragenter: \"dragenter\",\n            dragover: \"dragover\",\n            dragleave: \"dragleave\",\n            drop: 'drop',\n            drag: 'drag'\n        },\n\n        keyCode: {\n            BACKSPACE: 8,\n            TAB: 9,\n            ENTER: 13,\n            SHIFT: 16,\n            CTRL: 17,\n            ALT: 18,\n            BREAK: 19,\n            CAPS: 20,\n            ESCAPE: 27,\n            SPACE: 32,\n            PAGEUP: 33,\n            PAGEDOWN: 34,\n            END: 35,\n            HOME: 36,\n            LEFT_ARROW: 37,\n            UP_ARROW: 38,\n            RIGHT_ARROW: 39,\n            DOWN_ARROW: 40,\n            COMMA: 188\n        },\n\n        media_queries: {\n            FS: \"(min-width: 0px)\",\n            XS: \"(min-width: 360px)\",\n            SM: \"(min-width: 576px)\",\n            MD: \"(min-width: 768px)\",\n            LG: \"(min-width: 992px)\",\n            XL: \"(min-width: 1200px)\",\n            XXL: \"(min-width: 1452px)\"\n        },\n\n        media_sizes: {\n            FS: 0,\n            XS: 360,\n            SM: 576,\n            LD: 640,\n            MD: 768,\n            LG: 992,\n            XL: 1200,\n            XXL: 1452\n        },\n\n        media_mode: {\n            FS: \"fs\",\n            XS: \"xs\",\n            SM: \"sm\",\n            MD: \"md\",\n            LG: \"lg\",\n            XL: \"xl\",\n            XXL: \"xxl\"\n        },\n\n        media_modes: [\"fs\",\"xs\",\"sm\",\"md\",\"lg\",\"xl\",\"xxl\"],\n\n        actions: {\n            REMOVE: 1,\n            HIDE: 2\n        },\n\n        hotkeys: {},\n        locales: {},\n        utils: {},\n        colors: {},\n        dialog: null,\n        pagination: null,\n        md5: null,\n        storage: null,\n        export: null,\n        animations: null,\n        cookie: null,\n        template: null,\n        defaults: {},\n\n        about: function(){\n            var content =\n                \"<h3>About</h3>\" +\n                \"<hr>\" +\n                \"<div><b>Metro 4</b> - v\" + Metro.version +\". \"+ Metro.showCompileTime() + \"</div>\" +\n                \"<div><b>M4Q</b> - \" + m4q.version + \"</div>\";\n            Metro.infobox.create(content)\n        },\n\n        info: function(){\n            console.info(\"Metro 4 - v\" + Metro.version +\". \"+ Metro.showCompileTime());\n            console.info(\"m4q - \" + m4q.version);\n        },\n\n        showCompileTime: function(){\n            return \"Built at: \" + Metro.compileTime;\n        },\n\n        aboutDlg: function(){\n            alert(\"Metro 4 - v\" + Metro.version +\". \"+ Metro.showCompileTime());\n        },\n\n        ver: function(){\n            return Metro.version;\n        },\n\n        build: function(){\n            return Metro.build;\n        },\n\n        compile: function(){\n            return Metro.compileTime;\n        },\n\n        observe: function(){\n            var observer, observerCallback;\n            var observerConfig = {\n                childList: true,\n                attributes: true,\n                subtree: true\n            };\n            observerCallback = function(mutations){\n                mutations.map(function(mutation){\n                    if (mutation.type === 'attributes' && mutation.attributeName !== \"data-role\") {\n                        if (mutation.attributeName === 'data-hotkey') {\n                            Metro.initHotkeys([mutation.target], true);\n                        } else {\n                            var element = $(mutation.target);\n                            var mc = element.data('metroComponent');\n                            var attr = mutation.attributeName, newValue = element.attr(attr), oldValue = mutation.oldValue;\n\n                            if (mc !== undefined) {\n                                element.fire(\"attr-change\", {\n                                    attr: attr,\n                                    newValue: newValue,\n                                    oldValue: oldValue,\n                                    __this: element[0]\n                                });\n\n                                $.each(mc, function(){\n                                    var plug = Metro.getPlugin(element, this);\n                                    if (plug && typeof plug.changeAttribute === \"function\") {\n                                        plug.changeAttribute(attr, newValue, oldValue);\n                                    }\n                                });\n                            }\n                        }\n                    } else\n\n                    if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {\n                        var i, widgets = [];\n                        var $node, node, nodes = mutation.addedNodes;\n\n                        if (nodes.length) {\n                            for(i = 0; i < nodes.length; i++) {\n                                node = nodes[i];\n                                $node = $(node);\n\n                                if ($node.attr(\"data-role\") !== undefined) {\n                                    widgets.push(node);\n                                }\n\n                                $.each($node.find(\"[data-role]\"), function(){\n                                    var o = this;\n                                    if (widgets.indexOf(o) !== -1) {\n                                        return;\n                                    }\n                                    widgets.push(o);\n                                });\n                            }\n\n                            if (widgets.length) Metro.initWidgets(widgets, \"observe\");\n                        }\n\n                    } else  {\n                        //\n                    }\n                });\n            };\n            observer = new MutationObserver(observerCallback);\n            observer.observe($(\"html\")[0], observerConfig);\n        },\n\n        init: function(){\n            var widgets = $(\"[data-role]\");\n            var hotkeys = $(\"[data-hotkey]\");\n            var html = $(\"html\");\n            var that = this;\n\n            if (window.METRO_BLUR_IMAGE) {\n                html.addClass(\"use-blur-image\");\n            }\n\n            if (window.METRO_SHOW_ABOUT) Metro.info(true);\n\n            if (isTouch === true) {\n                html.addClass(\"metro-touch-device\");\n            } else {\n                html.addClass(\"metro-no-touch-device\");\n            }\n\n            Metro.sheet = this.utils.newCssSheet();\n\n            this.utils.addCssRule(Metro.sheet, \"*, *::before, *::after\", \"box-sizing: border-box;\");\n\n            window.METRO_MEDIA = [];\n            $.each(Metro.media_queries, function(key, query){\n                if (that.utils.media(query)) {\n                    window.METRO_MEDIA.push(Metro.media_mode[key]);\n                }\n            });\n\n            Metro.observe();\n\n            Metro.initHotkeys(hotkeys);\n            Metro.initWidgets(widgets, \"init\");\n\n            if (window.METRO_CLOAK_REMOVE !== \"fade\") {\n                $(\".m4-cloak\").removeClass(\"m4-cloak\");\n                $(window).fire(\"metro-initiated\");\n            } else {\n                $(\".m4-cloak\").animate({\n                    draw: {\n                        opacity: 1\n                    },\n                    dur: 300,\n                    onDone: function(){\n                        $(\".m4-cloak\").removeClass(\"m4-cloak\");\n                        $(window).fire(\"metro-initiated\");\n                    }\n                });\n            }\n        },\n\n        initHotkeys: function(hotkeys, redefine){\n            $.each(hotkeys, function(){\n                var element = $(this);\n                var hotkey = element.attr('data-hotkey') ? element.attr('data-hotkey').toLowerCase() : false;\n                var fn = element.attr('data-hotkey-func') ? element.attr('data-hotkey-func') : false;\n\n                if (hotkey === false) {\n                    return;\n                }\n\n                if (element.data('hotKeyBonded') === true && redefine !== true) {\n                    return;\n                }\n\n                Metro.hotkeys[hotkey] = [this, fn];\n                element.data('hotKeyBonded', true);\n                element.fire(\"hot-key-bonded\", {\n                    __this: element[0],\n                    hotkey: hotkey,\n                    fn: fn\n                });\n            });\n        },\n\n        initWidgets: function(widgets) {\n            var that = this;\n\n            $.each(widgets, function () {\n                var $this = $(this), roles;\n\n                if (!this.hasAttribute(\"data-role\")) {\n                    return ;\n                }\n\n                roles = $this.attr('data-role').split(/\\s*,\\s*/);\n\n                roles.map(function (func) {\n\n                    var $$ = that.utils.$();\n                    var _func = normalizeComponentName(func);\n\n                    if ($$.fn[_func] !== undefined && $this.attr(\"data-role-\"+_func) === undefined) {\n                        try {\n                            $$.fn[_func].call($this);\n                            $this.attr(\"data-role-\"+_func, true);\n\n                            var mc = $this.data('metroComponent');\n\n                            if (mc === undefined) {\n                                mc = [_func];\n                            } else {\n                                mc.push(_func);\n                            }\n                            $this.data('metroComponent', mc);\n\n                            $this.fire(\"create\", {\n                                __this: $this[0],\n                                name: _func\n                            });\n                            $(document).fire(\"component-create\", {\n                                element: $this[0],\n                                name: _func\n                            });\n                        } catch (e) {\n                            console.error(\"Error creating component \" + func + \" for \", $this[0]);\n                            throw e;\n                        }\n                    }\n                });\n            });\n        },\n\n        plugin: function(name, object){\n            var _name = normalizeComponentName(name);\n\n            var register = function($){\n                $.fn[_name] = function( options ) {\n                    return this.each(function() {\n                        $.data( this, _name, Object.create(object).init(options, this ));\n                    });\n                };\n            }\n\n            register(m4q);\n\n            if (window.useJQuery) {\n                register(jQuery);\n            }\n        },\n\n        pluginExists: function(name){\n            var $ = window.useJQuery ? jQuery : m4q;\n            return typeof $.fn[normalizeComponentName(name)] === \"function\";\n        },\n\n        destroyPlugin: function(element, name){\n            var p, mc;\n            var el = $(element);\n            var _name = normalizeComponentName(name);\n\n            p = Metro.getPlugin(el, _name);\n\n            if (typeof p === 'undefined') {\n                console.warn(\"Component \"+name+\" can not be destroyed: the element is not a Metro 4 component.\");\n                return ;\n            }\n\n            if (typeof p['destroy'] !== 'function') {\n                console.warn(\"Component \"+name+\" can not be destroyed: method destroy not found.\");\n                return ;\n            }\n\n            p['destroy']();\n            mc = el.data(\"metroComponent\");\n            this.utils.arrayDelete(mc, _name);\n            el.data(\"metroComponent\", mc);\n            $.removeData(el[0], _name);\n            el.removeAttr(\"data-role-\"+_name);\n        },\n\n        destroyPluginAll: function(element){\n            var el = $(element);\n            var mc = el.data(\"metroComponent\");\n\n            if (mc !== undefined && mc.length > 0) $.each(mc, function(){\n                Metro.destroyPlugin(el[0], this);\n            });\n        },\n\n        noop: function(){},\n        noop_true: function(){return true;},\n        noop_false: function(){return false;},\n\n        requestFullScreen: function(element){\n            if (element[\"mozRequestFullScreen\"]) {\n                element[\"mozRequestFullScreen\"]();\n            } else if (element[\"webkitRequestFullScreen\"]) {\n                element[\"webkitRequestFullScreen\"]();\n            } else if (element[\"msRequestFullscreen\"]) {\n                element[\"msRequestFullscreen\"]();\n            } else {\n                element.requestFullscreen().catch( function(err){\n                    console.warn(\"Error attempting to enable full-screen mode: \"+err.message+\" \"+err.name);\n                });\n            }\n        },\n\n        exitFullScreen: function(){\n            if (document[\"mozCancelFullScreen\"]) {\n                document[\"mozCancelFullScreen\"]();\n            }\n            else if (document[\"webkitCancelFullScreen\"]) {\n                document[\"webkitCancelFullScreen\"]();\n            }\n            else if (document[\"msExitFullscreen\"]) {\n                document[\"msExitFullscreen\"]();\n            } else {\n                document.exitFullscreen().catch( function(err){\n                    console.warn(\"Error attempting to disable full-screen mode: \"+err.message+\" \"+err.name);\n                });\n            }\n        },\n\n        inFullScreen: function(){\n            var fsm = (document.fullscreenElement || document[\"webkitFullscreenElement\"] || document[\"mozFullScreenElement\"] || document[\"msFullscreenElement\"]);\n            return fsm !== undefined;\n        },\n\n        $: function(){\n            return window.useJQuery ? jQuery : m4q;\n        },\n\n        get$el: function(el){\n            return Metro.$()($(el)[0]);\n        },\n\n        get$elements: function(el){\n            return Metro.$()($(el));\n        },\n\n        // TODO add if name is not defined, return one or array of plugins\n        getPlugin: function(el, name){\n            var _name = normalizeComponentName(name);\n            var $el = Metro.get$el(el);\n            return $el.length ? $el.data(_name) : undefined;\n        },\n\n        makePlugin: function(el, name, options){\n            var _name = normalizeComponentName(name);\n            var $el = Metro.get$elements(el);\n            return $el.length && typeof $el[_name] === \"function\" ? $el[_name](options) : undefined;\n        },\n\n        Component: function(nameName, compObj){\n            var name = normalizeComponentName(nameName);\n            var Utils = Metro.utils;\n            var component = $.extend({name: name}, {\n                _super: function(el, options, defaults, setup){\n                    var self = this;\n\n                    this.elem = el;\n                    this.element = $(el);\n                    this.options = $.extend( {}, defaults, options );\n                    this.component = this.elem;\n\n                    this._setOptionsFromDOM();\n                    this._runtime();\n\n                    if (setup && typeof setup === 'object') {\n                        $.each(setup, function(key, val){\n                            self[key] = val;\n                        })\n                    }\n\n                    this._createExec();\n                },\n\n                _setOptionsFromDOM: function(){\n                    var element = this.element, o = this.options;\n\n                    $.each(element.data(), function(key, value){\n                        if (key in o) {\n                            try {\n                                o[key] = JSON.parse(value);\n                            } catch (e) {\n                                o[key] = value;\n                            }\n                        }\n                    });\n                },\n\n                _runtime: function(){\n                    var element = this.element, mc;\n                    var roles = (element.attr(\"data-role\") || \"\").toArray(\",\").map(function(v){\n                        return normalizeComponentName(v);\n                    }).filter(function(v){\n                        return v.trim() !== \"\";\n                    });\n\n                    if (!element.attr('data-role-'+this.name)) {\n                        element.attr(\"data-role-\"+this.name, true);\n                        if (roles.indexOf(this.name) === -1) {\n                            roles.push(this.name);\n                            element.attr(\"data-role\", roles.join(\",\"));\n                        }\n\n                        mc = element.data('metroComponent');\n                        if (mc === undefined) {\n                            mc = [this.name];\n                        } else {\n                            mc.push(this.name);\n                        }\n                        element.data('metroComponent', mc);\n                    }\n                },\n\n                _createExec: function(){\n                    var that = this, timeout = this.options[this.name+'Deferred'];\n\n                    if (timeout) {\n                        setTimeout(function(){\n                            that._create();\n                        }, timeout)\n                    } else {\n                        that._create();\n                    }\n                },\n\n                _fireEvent: function(eventName, data, log, noFire){\n                    var element = this.element, o = this.options;\n                    var _data;\n                    var event = $.camelCase(eventName).capitalize();\n\n                    data = $.extend({}, data, {__this: element[0]});\n\n                    _data = data ? Object.values(data) : {};\n\n                    if (log) {\n                        console.warn(log);\n                        console.warn(\"Event: \" + \"on\"+event);\n                        console.warn(\"Data: \", data);\n                        console.warn(\"Element: \", element[0]);\n                    }\n\n                    if (noFire !== true)\n                        element.fire(event.toLowerCase(), data);\n\n                    return Utils.exec(o[\"on\"+event], _data, element[0]);\n                },\n\n                _fireEvents: function(events, data, log, noFire){\n                    var that = this, _events;\n\n                    if (arguments.length === 0) {\n                        return ;\n                    }\n\n                    if (arguments.length === 1) {\n\n                        $.each(events, function () {\n                            var ev = this;\n                            that._fireEvent(ev.name, ev.data, ev.log, ev.noFire);\n                        });\n\n                        return Utils.objectLength(events);\n                    }\n\n                    if (!Array.isArray(events) && typeof events !== \"string\") {\n                        return ;\n                    }\n\n                    _events = Array.isArray(events) ? events : events.toArray(\",\");\n\n                    $.each(_events, function(){\n                        that._fireEvent(this, data, log, noFire);\n                    });\n                },\n\n                getComponent: function(){\n                    return this.component;\n                },\n\n                getComponentName: function(){\n                    return this.name;\n                }\n            }, compObj);\n\n            Metro.plugin(name, component);\n\n            return component;\n        },\n\n        fetch: {\n            status: function(response){\n                return response.ok ? Promise.resolve(response) : Promise.reject(new Error(response.statusText));\n            },\n\n            json: function(response){\n                return response.json();\n            },\n\n            text: function(response){\n                return response.text();\n            },\n\n            form: function(response){\n                return response.formData();\n            },\n\n            blob: function(response){\n                return response.blob();\n            },\n\n            buffer: function(response){\n                return response.arrayBuffer();\n            }\n        }\n    };\n\n    $(window).on(Metro.events.resize, function(){\n        window.METRO_MEDIA = [];\n        $.each(Metro.media_queries, function(key, query){\n            if (Metro.utils.media(query)) {\n                window.METRO_MEDIA.push(Metro.media_mode[key]);\n            }\n        });\n    });\n\n    window.Metro = Metro;\n\n    if (window.METRO_INIT ===  true) {\n        $(function(){\n            Metro.init()\n        });\n    }\n\n    return Metro;\n}());\n\r\n\r\n(function(Metro, $) {\n    $.extend(Metro['locales'], {\n        'da-DK': {\n            \"calendar\": {\n                \"months\": [\n                    \"Januar\", \"Februar\", \"Marts\", \"April\", \"Maj\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"December\",\n                    \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Maj\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"\n                ],\n                \"days\": [\n                    \"Sndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lrdag\",\n                    \"S\", \"Ma\", \"Ti\", \"On\", \"To\", \"Fr\", \"L\",\n                    \"Sn\", \"Man\", \"Tir\", \"Ons\", \"Tor\", \"Fre\", \"Lr\"\n                ],\n                \"time\": {\n                    \"days\": \"DAGE\",\n                    \"hours\": \"TIMER\",\n                    \"minutes\": \"MIN\",\n                    \"seconds\": \"SEK\",\n                    \"month\": \"MON\",\n                    \"day\": \"DAG\",\n                    \"year\": \"R\"\n                },\n                \"weekStart\": 1\n            },\n            \"buttons\": {\n                \"ok\": \"OK\",\n                \"cancel\": \"Annuller\",\n                \"done\": \"Frdig\",\n                \"today\": \"Idag\",\n                \"now\": \"Nu\",\n                \"clear\": \"Ryd\",\n                \"help\": \"Hjlp\",\n                \"yes\": \"Ja\",\n                \"no\": \"Nej\",\n                \"random\": \"Tilfldig\",\n                \"save\": \"Gem\",\n                \"reset\": \"Nulstil\"\n            },\n            \"table\": {\n                \"rowsCount\": \"Show entries:\",\n                \"search\": \"Search:\",\n                \"info\": \"Showing $1 to $2 of $3 entries\",\n                \"prev\": \"Prev\",\n                \"next\": \"Next\",\n                \"all\": \"All\",\n                \"inspector\": \"Inspector\",\n                \"skip\": \"Goto page\",\n                \"empty\": \"Nothing to show\"\n            },\n            \"colorSelector\": {\n                addUserColorButton: \"ADD TO SWATCHES\",\n                userColorsTitle: \"USER COLORS\"\n            },\n            \"switch\": {\n                on: \"on\",\n                off: \"off\"\n            }\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    $.extend(Metro.locales, {\n        'de-DE': {\n            \"calendar\": {\n                \"months\": [\n                    \"Januar\", \"Februar\", \"Mrz\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Dezember\",\n                    \"Jan\", \"Feb\", \"Mr\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dez\"\n                ],\n                \"days\": [\n                    \"Sonntag\", \"Montag\", \"Dienstag\", \"Mittwoch\", \"Donnerstag\", \"Freitag\", \"Samstag\",\n                    \"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\",\n                    \"Son\", \"Mon\", \"Die\", \"Mit\", \"Don\", \"Fre\", \"Sam\"\n                ],\n                \"time\": {\n                    \"days\": \"TAGE\",\n                    \"hours\": \"STD\",\n                    \"minutes\": \"MIN\",\n                    \"seconds\": \"SEK\"\n                },\n                \"weekStart\": 2\n            },\n            \"buttons\": {\n                \"ok\": \"OK\",\n                \"cancel\": \"Abbrechen\",\n                \"done\": \"Fertig\",\n                \"today\": \"Heute\",\n                \"now\": \"Jetzt\",\n                \"clear\": \"Lschen\",\n                \"help\": \"Hilfe\",\n                \"yes\": \"Ja\",\n                \"no\": \"Nein\",\n                \"random\": \"Zufllig\",\n                \"save\": \"Speichern\",\n                \"reset\": \"Zurcksetzen\"\n            },\n            \"table\": {\n                \"rowsCount\": \"Show entries:\",\n                \"search\": \"Search:\",\n                \"info\": \"Showing $1 to $2 of $3 entries\",\n                \"prev\": \"Prev\",\n                \"next\": \"Next\",\n                \"all\": \"All\",\n                \"inspector\": \"Inspector\",\n                \"skip\": \"Goto page\",\n                \"empty\": \"Nothing to show\"\n            },\n            \"colorSelector\": {\n                addUserColorButton: \"ADD TO SWATCHES\",\n                userColorsTitle: \"USER COLORS\"\n            },\n            \"switch\": {\n                on: \"on\",\n                off: \"off\"\n            }\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    $.extend(Metro.locales, {\n        'en-US': {\n            \"calendar\": {\n                \"months\": [\n                    \"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\",\n                    \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"\n                ],\n                \"days\": [\n                    \"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\",\n                    \"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\",\n                    \"Sun\", \"Mon\", \"Tus\", \"Wen\", \"Thu\", \"Fri\", \"Sat\"\n                ],\n                \"time\": {\n                    \"days\": \"DAYS\",\n                    \"hours\": \"HOURS\",\n                    \"minutes\": \"MINS\",\n                    \"seconds\": \"SECS\",\n                    \"month\": \"MON\",\n                    \"day\": \"DAY\",\n                    \"year\": \"YEAR\"\n                },\n                \"weekStart\": 0\n            },\n            \"buttons\": {\n                \"ok\": \"OK\",\n                \"cancel\": \"Cancel\",\n                \"done\": \"Done\",\n                \"today\": \"Today\",\n                \"now\": \"Now\",\n                \"clear\": \"Clear\",\n                \"help\": \"Help\",\n                \"yes\": \"Yes\",\n                \"no\": \"No\",\n                \"random\": \"Random\",\n                \"save\": \"Save\",\n                \"reset\": \"Reset\"\n            },\n            \"table\": {\n                \"rowsCount\": \"Show entries:\",\n                \"search\": \"Search:\",\n                \"info\": \"Showing $1 to $2 of $3 entries\",\n                \"prev\": \"Prev\",\n                \"next\": \"Next\",\n                \"all\": \"All\",\n                \"inspector\": \"Inspector\",\n                \"skip\": \"Goto page\",\n                \"empty\": \"Nothing to show\"\n            },\n            \"colorSelector\": {\n                addUserColorButton: \"ADD TO SWATCHES\",\n                userColorsTitle: \"USER COLORS\"\n            },\n            \"switch\": {\n                on: \"on\",\n                off: \"off\"\n            }\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    $.extend(Metro.locales, {\n        'es-MX': {\n            \"calendar\": {\n                \"months\": [\n                    \"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\", \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\",\n                    \"Ene\", \"Feb\", \"Mar\", \"Abr\", \"May\", \"Jun\", \"Jul\", \"Ago\", \"Sep\", \"Oct\", \"Nov\", \"Dic\"\n                ],\n                \"days\": [\n                    \"Domingo\", \"Lunes\", \"Martes\", \"Mircoles\", \"Jueves\", \"Viernes\", \"Sbado\",\n                    \"Do\", \"Lu\", \"Ma\", \"Mi\", \"Ju\", \"Vi\", \"Sa\",\n                    \"Dom\", \"Lun\", \"Mar\", \"Mi\", \"Jue\", \"Vie\", \"Sb\"\n                ],\n                \"time\": {\n                    \"days\": \"DAS\",\n                    \"hours\": \"HORAS\",\n                    \"minutes\": \"MINS\",\n                    \"seconds\": \"SEGS\",\n                    \"month\": \"MES\",\n                    \"day\": \"DA\",\n                    \"year\": \"AO\"\n                },\n                \"weekStart\": 1\n            },\n            \"buttons\": {\n                \"ok\": \"Aceptar\",\n                \"cancel\": \"Cancelar\",\n                \"done\": \"Hecho\",\n                \"today\": \"Hoy\",\n                \"now\": \"Ahora\",\n                \"clear\": \"Limpiar\",\n                \"help\": \"Ayuda\",\n                \"yes\": \"Si\",\n                \"no\": \"No\",\n                \"random\": \"Aleatorio\",\n                \"save\": \"Salvar\",\n                \"reset\": \"Reiniciar\"\n            },\n            \"table\": {\n                \"rowsCount\": \"Show entries:\",\n                \"search\": \"Search:\",\n                \"info\": \"Showing $1 to $2 of $3 entries\",\n                \"prev\": \"Prev\",\n                \"next\": \"Next\",\n                \"all\": \"All\",\n                \"inspector\": \"Inspector\",\n                \"skip\": \"Goto page\",\n                \"empty\": \"Nothing to show\"\n            },\n            \"colorSelector\": {\n                addUserColorButton: \"ADD TO SWATCHES\",\n                userColorsTitle: \"USER COLORS\"\n            },\n            \"switch\": {\n                on: \"on\",\n                off: \"off\"\n            }\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    $.extend(Metro.locales, {\n        'fr-FR': {\n            \"calendar\": {\n                \"months\": [\n                    \"Janvier\", \"Fvrier\", \"Mars\", \"Avril\", \"Mai\", \"Juin\", \"Juillet\", \"Aot\", \"Septembre\", \"Octobre\", \"Novembre\", \"Dcembre\",\n                    \"Janv\", \"Fvr\", \"Mars\", \"Avr\", \"Mai\", \"Juin\", \"Juil\", \"Aot\", \"Sept\", \"Oct\", \"Nov\", \"Dc\"\n                ],\n                \"days\": [\n                    \"Dimanche\", \"Lundi\", \"Mardi\", \"Mercredi\", \"Jeudi\", \"Vendredi\", \"Samedi\",\n                    \"Di\", \"Lu\", \"Ma\", \"Me\", \"Je\", \"Ve\", \"Sa\",\n                    \"Dim\", \"Lun\", \"Mar\", \"Mer\", \"Jeu\", \"Ven\", \"Sam\"\n                ],\n                \"time\": {\n                    \"days\": \"JOURS\",\n                    \"hours\": \"HEURES\",\n                    \"minutes\": \"MINS\",\n                    \"seconds\": \"SECS\",\n                    \"month\": \"MOIS\",\n                    \"day\": \"JOUR\",\n                    \"year\": \"ANNEE\"\n                },\n                \"weekStart\": 1\n            },\n            \"buttons\": {\n                \"ok\": \"OK\",\n                \"cancel\": \"Annul\",\n                \"done\": \"Fait\",\n                \"today\": \"Aujourd'hui\",\n                \"now\": \"Maintenant\",\n                \"clear\": \"Effac\",\n                \"help\": \"Aide\",\n                \"yes\": \"Oui\",\n                \"no\": \"Non\",\n                \"random\": \"Alatoire\",\n                \"save\": \"Sauvegarder\",\n                \"reset\": \"Rinitialiser\"\n            },\n            \"table\": {\n                \"rowsCount\": \"Show entries:\",\n                \"search\": \"Search:\",\n                \"info\": \"Showing $1 to $2 of $3 entries\",\n                \"prev\": \"Prev\",\n                \"next\": \"Next\",\n                \"all\": \"All\",\n                \"inspector\": \"Inspector\",\n                \"skip\": \"Goto page\",\n                \"empty\": \"Nothing to show\"\n            },\n            \"colorSelector\": {\n                addUserColorButton: \"ADD TO SWATCHES\",\n                userColorsTitle: \"USER COLORS\"\n            },\n            \"switch\": {\n                on: \"on\",\n                off: \"off\"\n            }\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    $.extend(Metro.locales, {\n        'hr-HR': {\n            \"calendar\": {\n                \"months\": [\n                    \"Sijeanj\", \"Veljaa\", \"Oujak\", \"Travanj\", \"Svibanj\", \"Lipanj\", \"Srpanj\", \"Kolovoz\", \"Rujan\", \"Listopad\", \"Studeni\", \"Prosinac\",\n                    \"Sij\", \"Velj\", \"Ou\", \"Tra\", \"Svi\", \"Lip\", \"Srp\", \"Kol\", \"Ruj\", \"Lis\", \"Stu\", \"Pro\"\n                ],\n                \"days\": [\n                    \"Nedjelja\",\"Ponedjeljak\",\"Utorak\", \"Srijeda\", \"etvrtak\", \"Petak\", \"Subota\",  \n                    \"Ne\",\"Po\", \"Ut\", \"Sr\", \"e\", \"Pe\", \"Su\", \n                    \"Ned\", \"Pon\", \"Uto\", \"Sri\", \"et\", \"Pet\", \"Sub\" \n                ],\n                \"time\": {\n                    \"days\": \"DANI\",\n                    \"hours\": \"SATI\",\n                    \"minutes\": \"MINUTE\",\n                    \"seconds\": \"SEKUNDE\",\n                    \"month\": \"MJESEC\",\n                    \"day\": \"DAN\",\n                    \"year\": \"GODINA\"\n                },\n                \"weekStart\": 1\n            },\n            \"buttons\": {\n                \"ok\": \"OK\",\n                \"cancel\": \"Otkai\",\n                \"done\": \"Gotovo\",\n                \"today\": \"Danas\",\n                \"now\": \"Sada\",\n                \"clear\": \"Izbrii\",\n                \"help\": \"Pomo\",\n                \"yes\": \"Da\",\n                \"no\": \"Ne\",\n                \"random\": \"Nasumino\",\n                \"save\": \"Spremi\",\n                \"reset\": \"Reset\"\n            },\n            \"table\": {\n                \"rowsCount\": \"Broj redaka:\",\n                \"search\": \"Pretraga:\",\n                \"info\": \"Prikazujem $1 do $2 od $3\",\n                \"prev\": \"Nazad\",\n                \"next\": \"Naprijed\",\n                \"all\": \"Sve\",\n                \"inspector\": \"Inspektor\",\n                \"skip\": \"Idi na stranicu\",\n                \"empty\": \"Prazno\"\n            },\n            \"colorSelector\": {\n                addUserColorButton: \"Dodaj uzorcima\",\n                userColorsTitle: \"Korisnike boje\"\n            },\n            \"switch\": {\n                on: \"on\",\n                off: \"off\"\n            }\n        }\n    });\n}(Metro, m4q));\n\r\n\r\n(function(Metro, $) {\n    $.extend(Metro.locales, {\n        'hu-HU': {\n            \"calendar\": {\n                \"months\": [\n                    'Janur', 'Februr', 'Mrcius', 'prilis', 'Mjus', 'Jnius', 'Jlius', 'Augusztus', 'Szeptember', 'Oktber', 'November', 'December',\n                    'Jan', 'Feb', 'Mr', 'pr', 'Mj', 'Jn', 'Jl', 'Aug', 'Szep', 'Okt', 'Nov', 'Dec'\n                ],\n                \"days\": [\n                    'Vasrnap', 'Htf', 'Kedd', 'Szerda', 'Cstrtk', 'Pntek', 'Szombat',\n                    'V', 'H', 'K', 'Sz', 'Cs', 'P', 'Sz',\n                    'Vas', 'Ht', 'Ke', 'Sze', 'Cs', 'Pn', 'Szom'\n                ],\n                \"time\": {\n                    \"days\": \"NAP\",\n                    \"hours\": \"RA\",\n                    \"minutes\": \"PERC\",\n                    \"seconds\": \"MP\"\n                },\n                \"weekStart\": 1\n            },\n            \"buttons\": {\n                \"ok\": \"OK\",\n                \"cancel\": \"Mgse\",\n                \"done\": \"Ksz\",\n                \"today\": \"Ma\",\n                \"now\": \"Most\",\n                \"clear\": \"Trls\",\n                \"help\": \"Segtsg\",\n                \"yes\": \"Igen\",\n                \"no\": \"Nem\",\n                \"random\": \"Vletlen\",\n                \"save\": \"Ments\",\n                \"reset\": \"Visszallts\"\n            },\n            \"table\": {\n                \"rowsCount\": \"Show entries:\",\n                \"search\": \"Search:\",\n                \"info\": \"Showing $1 to $2 of $3 entries\",\n                \"prev\": \"Prev\",\n                \"next\": \"Next\",\n                \"all\": \"All\",\n                \"inspector\": \"Inspector\",\n                \"skip\": \"Goto page\",\n                \"empty\": \"Nothing to show\"\n            },\n            \"colorSelector\": {\n                addUserColorButton: \"ADD TO SWATCHES\",\n                userColorsTitle: \"USER COLORS\"\n            },\n            \"switch\": {\n                on: \"on\",\n                off: \"off\"\n            }\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    $.extend(Metro.locales, {\n        'it-IT': {\n            \"calendar\": {\n                \"months\": [\n                    \"Gennaio\", \"Febbraio\", \"Marzo\", \"Aprile\", \"Maggio\", \"Giugno\", \"Luglio\", \"Agosto\", \"Settembre\", \"Ottobre\", \"Novembre\", \"Dicembre\",\n                    \"Gen\", \"Feb\", \"Mar\", \"Apr\", \"Mag\", \"Giu\", \"Lug\", \"Ago\", \"Set\", \"Ott\", \"Nov\", \"Dic\"\n                ],\n                \"days\": [\n                    \"Domenica\", \"Luned\", \"Marted\", \"Mercoled\", \"Gioved\", \"Venerd\", \"Sabato\",\n                    \"Do\", \"Lu\", \"Ma\", \"Me\", \"Gi\", \"Ve\", \"Sa\",\n                    \"Dom\", \"Lun\", \"Mar\", \"Mer\", \"Gio\", \"Ven\", \"Sab\"\n                ],\n                \"time\": {\n                    \"days\": \"GIORNI\",\n                    \"hours\": \"ORE\",\n                    \"minutes\": \"MIN\",\n                    \"seconds\": \"SEC\",\n                    \"month\": \"MESE\",\n                    \"day\": \"GIORNO\",\n                    \"year\": \"ANNO\"\n                },\n                \"weekStart\": 1\n            },\n            \"buttons\": {\n                \"ok\": \"OK\",\n                \"cancel\": \"Annulla\",\n                \"done\": \"Fatto\",\n                \"today\": \"Oggi\",\n                \"now\": \"Adesso\",\n                \"clear\": \"Cancella\",\n                \"help\": \"Aiuto\",\n                \"yes\": \"S\",\n                \"no\": \"No\",\n                \"random\": \"Random\",\n                \"save\": \"Salvare\",\n                \"reset\": \"Reset\"\n            },\n            \"table\": {\n                \"rowsCount\": \"Show entries:\",\n                \"search\": \"Search:\",\n                \"info\": \"Showing $1 to $2 of $3 entries\",\n                \"prev\": \"Prev\",\n                \"next\": \"Next\",\n                \"all\": \"All\",\n                \"inspector\": \"Inspector\",\n                \"skip\": \"Goto page\",\n                \"empty\": \"Nothing to show\"\n            },\n            \"colorSelector\": {\n                addUserColorButton: \"ADD TO SWATCHES\",\n                userColorsTitle: \"USER COLORS\"\n            },\n            \"switch\": {\n                on: \"on\",\n                off: \"off\"\n            }\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    $.extend(Metro.locales, {\n        'pt-BR': {\n            \"calendar\": {\n                \"months\": [\n                    \"Janeiro\", \"Fevereiro\", \"Maro\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\",\n                    \"Jan\", \"Fev\", \"Mar\", \"Abr\", \"Maio\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Out\", \"Nov\", \"Dez\"\n                ],\n                \"days\": [\n                    \"Domingo\", \"Segunda\", \"Tera\", \"Quarta\", \"Quinta\", \"Sexta\", \"Sbado\",\n                    \"Do\", \"Se\", \"Te\", \"Qa\", \"Qi\", \"Se\", \"Sa\",\n                    \"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sab\"\n                ],\n                \"time\": {\n                    \"days\": \"DIAS\",\n                    \"hours\": \"HORAS\",\n                    \"minutes\": \"MINUTOS\",\n                    \"seconds\": \"SEGUNDOS\",\n                    \"month\": \"MS\",\n                    \"day\": \"DIA\",\n                    \"year\": \"ANO\"\n                },\n                \"weekStart\": 1\n            },\n            \"buttons\": {\n                \"ok\": \"OK\",\n                \"cancel\": \"Cancelar\",\n                \"done\": \"Feito\",\n                \"today\": \"Hoje\",\n                \"now\": \"Agora\",\n                \"clear\": \"Limpar\",\n                \"help\": \"Ajuda\",\n                \"yes\": \"Sim\",\n                \"no\": \"No\",\n                \"random\": \"Aleatrio\",\n                \"save\": \"Salvar\",\n                \"reset\": \"Restaurar\"\n            },\n            \"table\": {\n                \"rowsCount\": \"Show entries:\",\n                \"search\": \"Search:\",\n                \"info\": \"Showing $1 to $2 of $3 entries\",\n                \"prev\": \"Prev\",\n                \"next\": \"Next\",\n                \"all\": \"All\",\n                \"inspector\": \"Inspector\",\n                \"skip\": \"Goto page\",\n                \"empty\": \"Nothing to show\"\n            },\n            \"colorSelector\": {\n                addUserColorButton: \"ADD TO SWATCHES\",\n                userColorsTitle: \"USER COLORS\"\n            },\n            \"switch\": {\n                on: \"on\",\n                off: \"off\"\n            }\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    $.extend(Metro.locales, {\n        'ru-RU': {\n            \"calendar\": {\n                \"months\": [\n                    \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\",\n                    \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"\n                ],\n                \"days\": [\n                    \"\", \"\", \"\", \"\", \"\", \"\", \"\",\n                    \"\", \"\", \"\", \"\", \"\", \"\", \"\",\n                    \"\", \"\", \"\", \"\", \"\", \"\", \"\"\n                ],\n                \"time\": {\n                    \"days\": \"\",\n                    \"hours\": \"\",\n                    \"minutes\": \"\",\n                    \"seconds\": \"\",\n                    \"month\": \"\",\n                    \"day\": \"\",\n                    \"year\": \"\"\n                },\n                \"weekStart\": 1\n            },\n            \"buttons\": {\n                \"ok\": \"\",\n                \"cancel\": \"\",\n                \"done\": \"\",\n                \"today\": \"\",\n                \"now\": \"\",\n                \"clear\": \"\",\n                \"help\": \"\",\n                \"yes\": \"\",\n                \"no\": \"\",\n                \"random\": \"\",\n                \"save\": \"\",\n                \"reset\": \"\"\n            },\n            \"table\": {\n                \"rowsCount\": \" :\",\n                \"search\": \":\",\n                \"info\": \" $1  $2  $3 \",\n                \"prev\": \"\",\n                \"next\": \"\",\n                \"all\": \"\",\n                \"inspector\": \"\",\n                \"skip\": \"  \",\n                \"empty\": \" \"\n            },\n            \"colorSelector\": {\n                addUserColorButton: \"  \",\n                userColorsTitle: \" \"\n            },\n            \"switch\": {\n                on: \"\",\n                off: \"\"\n            }\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    $.extend(Metro.locales, {\n        'tr-TR': {\n            \"calendar\": {\n                \"months\": [\n                    \"Ocak\", \"ubat\", \"Mart\", \"Nisan\", \"Mays\", \"Haziran\", \"Temmuz\", \"Austos\", \"Eyll\", \"Ekim\", \"Kasm\", \"Aralk\",\n                    \"Oca\", \"ub\", \"Mar\", \"Nis\", \"May\", \"Haz\", \"Tem\", \"Au\", \"Eyl\", \"Eki\", \"Kas\", \"Ara\"\n                ],\n                \"days\": [\n                    \"Pazar\", \"Pazartesi\", \"Sal\", \"aramba\", \"Perembe\", \"Cuma\", \"Cumartesi\",\n                    \"Pa\", \"Pz\", \"Sa\", \"a\", \"Pe\", \"Cu\", \"Ct\",\n                    \"Paz\", \"Pzt\", \"Sal\", \"ar\", \"Per\", \"Cum\", \"Cmt\"\n                ],\n                \"time\": {\n                    \"days\": \"GN\",\n                    \"hours\": \"SAAT\",\n                    \"minutes\": \"DAK\",\n                    \"seconds\": \"SAN\",\n                    \"month\": \"AY\",\n                    \"day\": \"GN\",\n                    \"year\": \"YIL\"\n                },\n                \"weekStart\": 1\n            },\n            \"buttons\": {\n                \"ok\": \"Tamam\",\n                \"cancel\": \"Vazge\",\n                \"done\": \"Bitti\",\n                \"today\": \"Bugn\",\n                \"now\": \"imdi\",\n                \"clear\": \"Temizle\",\n                \"help\": \"Yardm\",\n                \"yes\": \"Evet\",\n                \"no\": \"Hayr\",\n                \"random\": \"Rasgele\",\n                \"save\": \"Kurtarmak\",\n                \"reset\": \"Sfrla\"\n            },\n            \"table\": {\n                \"rowsCount\": \"Show entries:\",\n                \"search\": \"Search:\",\n                \"info\": \"Showing $1 to $2 of $3 entries\",\n                \"prev\": \"Prev\",\n                \"next\": \"Next\",\n                \"all\": \"All\",\n                \"inspector\": \"Inspector\",\n                \"skip\": \"Goto page\",\n                \"empty\": \"Nothing to show\"\n            },\n            \"colorSelector\": {\n                addUserColorButton: \"ADD TO SWATCHES\",\n                userColorsTitle: \"USER COLORS\"\n            },\n            \"switch\": {\n                on: \"on\",\n                off: \"off\"\n            }\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    $.extend(Metro.locales, {\n        'uk-UA': {\n            \"calendar\": {\n                \"months\": [\n                    \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\",\n                    \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"\n                ],\n                \"days\": [\n                    \"\", \"\", \"\", \"\", \"\", \"\", \"\",\n                    \"\", \"\", \"\", \"\", \"\", \"\", \"\",\n                    \"\", \"\", \"i\", \"\", \"\", \"\", \"\"\n                ],\n                \"time\": {\n                    \"days\": \"\",\n                    \"hours\": \"\",\n                    \"minutes\": \"\",\n                    \"seconds\": \"\",\n                    \"month\": \"\",\n                    \"day\": \"\",\n                    \"year\": \"\"\n                },\n                \"weekStart\": 1\n            },\n            \"buttons\": {\n                \"ok\": \"\",\n                \"cancel\": \"\",\n                \"done\": \"\",\n                \"today\": \"\",\n                \"now\": \"\",\n                \"clear\": \"\",\n                \"help\": \"\",\n                \"yes\": \"\",\n                \"no\": \"\",\n                \"random\": \"\",\n                \"save\": \"\",\n                \"reset\": \"\"\n            },\n            \"table\": {\n                \"rowsCount\": \" :\",\n                \"search\": \":\",\n                \"info\": \" $1  $2  $3 \",\n                \"prev\": \"\",\n                \"next\": \"\",\n                \"all\": \"\",\n                \"inspector\": \"\",\n                \"skip\": \"  \",\n                \"empty\": \" \"\n            },\n            \"colorSelector\": {\n                addUserColorButton: \"  \",\n                userColorsTitle: \" \"\n            },\n            \"switch\": {\n                on: \"\",\n                off: \"\"\n            }\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    $.extend(Metro.locales, {\n        'zh-CN': {\n            \"calendar\": {\n                \"months\": [\n                    \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\",\n                    \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"\n                ],\n                \"days\": [\n                    \"\", \"\", \"\", \"\", \"\", \"\", \"\",\n                    \"\", \"\", \"\", \"\", \"\", \"\", \"\",\n                    \"\", \"\", \"\", \"\", \"\", \"\", \"\"\n                ],\n                \"time\": {\n                    \"days\": \"\",\n                    \"hours\": \"\",\n                    \"minutes\": \"\",\n                    \"seconds\": \"\",\n                    \"month\": \"\",\n                    \"day\": \"\",\n                    \"year\": \"\"\n                },\n                \"weekStart\": 1\n            },\n            \"buttons\": {\n                \"ok\": \"\",\n                \"cancel\": \"\",\n                \"done\": \"\",\n                \"today\": \"\",\n                \"now\": \"\",\n                \"clear\": \"\",\n                \"help\": \"\",\n                \"yes\": \"\",\n                \"no\": \"\",\n                \"random\": \"\",\n                \"save\": \"\",\n                \"reset\": \"\"\n            },\n            \"table\": {\n                \"rowsCount\": \"Show entries:\",\n                \"search\": \"Search:\",\n                \"info\": \"Showing $1 to $2 of $3 entries\",\n                \"prev\": \"Prev\",\n                \"next\": \"Next\",\n                \"all\": \"All\",\n                \"inspector\": \"Inspector\",\n                \"skip\": \"Goto page\",\n                \"empty\": \"Nothing to show\"\n            },\n            \"colorSelector\": {\n                addUserColorButton: \"ADD TO SWATCHES\",\n                userColorsTitle: \"USER COLORS\"\n            },\n            \"switch\": {\n                on: \"on\",\n                off: \"off\"\n            }\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    $.extend(Metro.locales, {\n        'zh-TW': {\n            \"calendar\": {\n                \"months\": [\n                    \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\",\n                    \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"\n                ],\n                \"days\": [\n                    \"\", \"\", \"\", \"\", \"\", \"\", \"\",\n                    \"\", \"\", \"\", \"\", \"\", \"\", \"\",\n                    \"\", \"\", \"\", \"\", \"\", \"\", \"\"\n                ],\n                \"time\": {\n                    \"days\": \"\",\n                    \"hours\": \"\",\n                    \"minutes\": \"\",\n                    \"seconds\": \"\",\n                    \"month\": \"\",\n                    \"day\": \"\",\n                    \"year\": \"\"\n                },\n                \"weekStart\": 1\n            },\n            \"buttons\": {\n                \"ok\": \"\",\n                \"cancel\": \"\",\n                \"done\": \"\",\n                \"today\": \"\",\n                \"now\": \"\",\n                \"clear\": \"\",\n                \"help\": \"\",\n                \"yes\": \"\",\n                \"no\": \"\",\n                \"random\": \"\",\n                \"save\": \"\",\n                \"reset\": \"\"\n            },\n            \"table\": {\n                \"rowsCount\": \"Show entries:\",\n                \"search\": \"Search:\",\n                \"info\": \"Showing $1 to $2 of $3 entries\",\n                \"prev\": \"Prev\",\n                \"next\": \"Next\",\n                \"all\": \"All\",\n                \"inspector\": \"Inspector\",\n                \"skip\": \"Goto page\",\n                \"empty\": \"Nothing to show\"\n            },\n            \"colorSelector\": {\n                addUserColorButton: \"ADD TO SWATCHES\",\n                userColorsTitle: \"USER COLORS\"\n            },\n            \"switch\": {\n                on: \"on\",\n                off: \"off\"\n            }\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function() {\n    'use strict';\n\n    if (typeof Array.prototype.shuffle !== \"function\") {\n        Array.prototype.shuffle = function () {\n            var currentIndex = this.length, temporaryValue, randomIndex;\n\n            while (0 !== currentIndex) {\n\n                randomIndex = Math.floor(Math.random() * currentIndex);\n                currentIndex -= 1;\n\n                temporaryValue = this[currentIndex];\n                this[currentIndex] = this[randomIndex];\n                this[randomIndex] = temporaryValue;\n            }\n\n            return this;\n        };\n    }\n\n    if (typeof Array.prototype.clone !== \"function\") {\n        Array.prototype.clone = function () {\n            return this.slice(0);\n        };\n    }\n\n    if (typeof Array.prototype.unique !== \"function\") {\n        Array.prototype.unique = function () {\n            var a = this.concat();\n            for (var i = 0; i < a.length; ++i) {\n                for (var j = i + 1; j < a.length; ++j) {\n                    if (a[i] === a[j])\n                        a.splice(j--, 1);\n                }\n            }\n\n            return a;\n        };\n    }\n\n}());\r\n\r\n(function() {\n    'use strict';\n\n    /**\n     * Number.prototype.format(n, x, s, c)\n     *\n     * @param  n: length of decimal\n     * @param  x: length of whole part\n     * @param  s: sections delimiter\n     * @param  c: decimal delimiter\n     */\n    Number.prototype.format = function(n, x, s, c) {\n        var re = '\\\\d(?=(\\\\d{' + (x || 3) + '})+' + (n > 0 ? '\\\\D' : '$') + ')',\n            num = this.toFixed(Math.max(0, ~~n));\n\n        return (c ? num.replace('.', c) : num).replace(new RegExp(re, 'g'), '$&' + (s || ','));\n    };\n}());\r\n\r\n(function() {\n    'use strict';\n\n    String.prototype.toArray = function(delimiter, type, format, locale){\n        var str = this;\n        var a;\n\n        type = type || \"string\";\n        delimiter = delimiter || \",\";\n        format = format === undefined || format === null ? false : format;\n\n        a = (\"\"+str).split(delimiter);\n\n        return a.map(function(s){\n            var result;\n\n            switch (type) {\n                case \"int\":\n                case \"integer\": result = isNaN(s) ? s.trim() : parseInt(s); break;\n                case \"number\":\n                case \"float\": result = isNaN(s) ? s : parseFloat(s); break;\n                case \"date\": result = !format ? datetime(s) : Datetime.from(s, format, locale || 'en-US'); break;\n                default: result = s.trim();\n            }\n\n            return result;\n        });\n    };\n\n    String.prototype.capitalize = function(){\n        var str = this;\n        return str.substr(0, 1).toUpperCase() + str.substr(1)\n    }\n}());\r\n\r\n(function(Metro, $) {\n    'use strict';\n    Metro.utils = {\n        isVisible: function(element){\n            var el = $(element)[0];\n            return this.getStyleOne(el, \"display\") !== \"none\"\n                && this.getStyleOne(el, \"visibility\") !== \"hidden\"\n                && el.offsetParent !== null;\n        },\n\n        isUrl: function (val) {\n            /* eslint-disable-next-line */\n            return /^(\\.\\/|\\.\\.\\/|ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@\\-\\/]))?/.test(val);\n        },\n\n        isTag: function(val){\n            /* eslint-disable-next-line */\n            return /^<\\/?[\\w\\s=\"/.':;#-\\/\\?]+>/gi.test(val);\n        },\n\n        isEmbedObject: function(val){\n            var embed = [\"iframe\", \"object\", \"embed\", \"video\"];\n            var result = false;\n            $.each(embed, function(){\n                if (typeof val === \"string\" && val.toLowerCase() === this) {\n                    result = true;\n                } else if (val.nodeType !== undefined && val.tagName.toLowerCase() === this) {\n                    result = true;\n                }\n            });\n            return result;\n        },\n\n        isVideoUrl: function(val){\n            return /youtu\\.be|youtube|twitch|vimeo/gi.test(val);\n        },\n\n        isDate: function(val, format, locale){\n            var result;\n\n            if (this.isDateObject(val)) {\n                return true;\n            }\n\n            try {\n                result = format ? Datetime.from(val, format, locale || \"en-US\") : datetime(val)\n                return Datetime.isDatetime(result);\n            } catch (e) {\n                return false;\n            }\n        },\n\n        isDateObject: function(v){\n            return typeof v === 'object' && v.getMonth !== undefined;\n        },\n\n        isInt: function(n){\n            return !isNaN(n) && +n % 1 === 0;\n        },\n\n        isFloat: function(n){\n            return (!isNaN(n) && +n % 1 !== 0) || /^\\d*\\.\\d+$/.test(n);\n        },\n\n        isFunc: function(f){\n            return this.isType(f, 'function');\n        },\n\n        isObject: function(o){\n            return this.isType(o, 'object');\n        },\n\n        isObject2: function(o){\n            return typeof o === \"object\" && !Array.isArray(o);\n        },\n\n        isType: function(o, t){\n            if (!this.isValue(o)) {\n                return false;\n            }\n\n            if (typeof o === t) {\n                return o;\n            }\n\n            if ((\"\"+t).toLowerCase() === 'tag' && this.isTag(o)) {\n                return o;\n            }\n\n            if ((\"\"+t).toLowerCase() === 'url' && this.isUrl(o)) {\n                return o;\n            }\n\n            if ((\"\"+t).toLowerCase() === 'array' && Array.isArray(o)) {\n                return o;\n            }\n\n            if (this.isTag(o) || this.isUrl(o)) {\n                return false;\n            }\n\n            if (typeof window[o] === t) {\n                return window[o];\n            }\n\n            if (typeof o === 'string' && o.indexOf(\".\") === -1) {\n                return false;\n            }\n\n            if (typeof o === 'string' && /[/\\s([]+/gm.test(o)) {\n                return false;\n            }\n\n            if (typeof o === \"number\" && t.toLowerCase() !== \"number\") {\n                return false;\n            }\n\n            var ns = o.split(\".\");\n            var i, context = window;\n\n            for(i = 0; i < ns.length; i++) {\n                context = context[ns[i]];\n            }\n\n            return typeof context === t ? context : false;\n        },\n\n        $: function(){\n            return window.useJQuery ? jQuery : m4q;\n        },\n\n        isMetroObject: function(el, type){\n            var $el = $(el), el_obj = Metro.getPlugin(el, type);\n\n            if ($el.length === 0) {\n                console.warn(type + ' ' + el + ' not found!');\n                return false;\n            }\n\n            if (el_obj === undefined) {\n                console.warn('Element not contain role '+ type +'! Please add attribute data-role=\"'+type+'\" to element ' + el);\n                return false;\n            }\n\n            return true;\n        },\n\n        isJQuery: function(el){\n            return (typeof jQuery !== \"undefined\" && el instanceof jQuery);\n        },\n\n        isM4Q: function(el){\n            return (typeof m4q !== \"undefined\" && el instanceof m4q);\n        },\n\n        isQ: function(el){\n            return this.isJQuery(el) || this.isM4Q(el);\n        },\n\n        embedUrl: function(val){\n            if (val.indexOf(\"youtu.be\") !== -1) {\n                val = \"https://www.youtube.com/embed/\" + val.split(\"/\").pop();\n            }\n            return \"<div class='embed-container'><iframe src='\"+val+\"'></iframe></div>\";\n        },\n\n        elementId: function(prefix){\n            return prefix+\"-\"+(new Date()).getTime()+$.random(1, 1000);\n        },\n\n        secondsToTime: function(s) {\n            var days = Math.floor((s % 31536000) / 86400);\n            var hours = Math.floor(((s % 31536000) % 86400) / 3600);\n            var minutes = Math.floor((((s % 31536000) % 86400) % 3600) / 60);\n            var seconds = Math.round((((s % 31536000) % 86400) % 3600) % 60);\n\n            return {\n                \"d\": days,\n                \"h\": hours,\n                \"m\": minutes,\n                \"s\": seconds\n            };\n        },\n\n        secondsToFormattedString: function(time){\n            var sec_num = parseInt(time, 10);\n            var hours   = Math.floor(sec_num / 3600);\n            var minutes = Math.floor((sec_num - (hours * 3600)) / 60);\n            var seconds = sec_num - (hours * 3600) - (minutes * 60);\n\n            return [\n                Cake.lpad(hours, 2, \"0\"),\n                Cake.lpad(minutes, 2, \"0\"),\n                Cake.lpad(seconds, 2, \"0\")\n            ].join(\":\");\n        },\n\n        func: function(f){\n            /* jshint -W054 */\n            return new Function(\"a\", f);\n        },\n\n        exec: function(f, args, context){\n            var result;\n            if (f === undefined || f === null) {return false;}\n            var func = this.isFunc(f);\n\n            if (func === false) {\n                func = this.func(f);\n            }\n\n            try {\n                result = func.apply(context, args);\n            } catch (err) {\n                result = null;\n                if (window.METRO_THROWS === true) {\n                    throw err;\n                }\n            }\n            return result;\n        },\n\n        isOutsider: function(element) {\n            var el = $(element);\n            var inViewport;\n            var clone = el.clone();\n\n            clone.removeAttr(\"data-role\").css({\n                visibility: \"hidden\",\n                position: \"absolute\",\n                display: \"block\"\n            });\n            el.parent().append(clone);\n\n            inViewport = this.inViewport(clone[0]);\n\n            clone.remove();\n\n            return !inViewport;\n        },\n\n        inViewport: function(el){\n            var rect = this.rect(el);\n\n            return (\n                rect.top >= 0 &&\n                rect.left >= 0 &&\n                rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n                rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n            );\n        },\n\n        rect: function(el){\n            return el.getBoundingClientRect();\n        },\n\n        getCursorPosition: function(el, e){\n            var a = this.rect(el);\n            return {\n                x: this.pageXY(e).x - a.left - window.pageXOffset,\n                y: this.pageXY(e).y - a.top - window.pageYOffset\n            };\n        },\n\n        getCursorPositionX: function(el, e){\n            return this.getCursorPosition(el, e).x;\n        },\n\n        getCursorPositionY: function(el, e){\n            return this.getCursorPosition(el, e).y;\n        },\n\n        objectLength: function(obj){\n            return Object.keys(obj).length;\n        },\n\n        percent: function(total, part, round_value){\n            if (total === 0) {\n                return 0;\n            }\n            var result = part * 100 / total;\n            return round_value === true ? Math.round(result) : Math.round(result * 100) / 100;\n        },\n\n        objectShift: function(obj){\n            var min = 0;\n            $.each(obj, function(i){\n                if (min === 0) {\n                    min = i;\n                } else {\n                    if (min > i) {\n                        min = i;\n                    }\n                }\n            });\n            delete obj[min];\n\n            return obj;\n        },\n\n        objectDelete: function(obj, key){\n            if (obj[key] !== undefined) delete obj[key];\n        },\n\n        arrayDeleteByMultipleKeys: function(arr, keys){\n            keys.forEach(function(ind){\n                delete arr[ind];\n            });\n            return arr.filter(function(item){\n                return item !== undefined;\n            });\n        },\n\n        arrayDelete: function(arr, val){\n            var i = arr.indexOf(val);\n            if (i > -1) arr.splice(i, 1);\n        },\n\n        arrayDeleteByKey: function(arr, key){\n            arr.splice(key, 1);\n        },\n\n        nvl: function(data, other){\n            return data === undefined || data === null ? other : data;\n        },\n\n        objectClone: function(obj){\n            var copy = {};\n            for(var key in obj) {\n                if ($.hasProp(obj, key)) {\n                    copy[key] = obj[key];\n                }\n            }\n            return copy;\n        },\n\n        github: function(repo, callback){\n            var that = this;\n            $.json('https://api.github.com/repos/' + repo).then(function(data){\n                that.exec(callback, [data]);\n            });\n        },\n\n        detectIE: function() {\n            var ua = window.navigator.userAgent;\n            var msie = ua.indexOf('MSIE ');\n            if (msie > 0) {\n                // IE 10 or older => return version number\n                return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\n            }\n\n            var trident = ua.indexOf('Trident/');\n            if (trident > 0) {\n                // IE 11 => return version number\n                var rv = ua.indexOf('rv:');\n                return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\n            }\n\n            var edge = ua.indexOf('Edge/');\n            if (edge > 0) {\n                // Edge (IE 12+) => return version number\n                return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\n            }\n\n            // other browser\n            return false;\n        },\n\n        detectChrome: function(){\n            return /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n        },\n\n        pageHeight: function(){\n            var body = document.body,\n                html = document.documentElement;\n\n            return Math.max( body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight );\n        },\n\n        cleanPreCode: function(selector){\n            var els = Array.prototype.slice.call(document.querySelectorAll(selector), 0);\n\n            els.forEach(function(el){\n                var txt = el.textContent\n                    .replace(/^[\\r\\n]+/, \"\")\t// strip leading newline\n                    .replace(/\\s+$/g, \"\");\n\n                if (/^\\S/gm.test(txt)) {\n                    el.textContent = txt;\n                    return;\n                }\n\n                var mat, str, re = /^[\\t ]+/gm, len, min = 1e3;\n\n                /* jshint -W084 */\n                /* eslint-disable-next-line */\n                while (mat = re.exec(txt)) {\n                    len = mat[0].length;\n\n                    if (len < min) {\n                        min = len;\n                        str = mat[0];\n                    }\n                }\n\n                if (min === 1e3)\n                    return;\n\n                el.textContent = txt.replace(new RegExp(\"^\" + str, 'gm'), \"\").trim();\n            });\n        },\n\n        coords: function(element){\n            var el = $(element)[0];\n            var box = el.getBoundingClientRect();\n\n            return {\n                top: box.top + window.pageYOffset,\n                left: box.left + window.pageXOffset\n            };\n        },\n\n        positionXY: function(e, t){\n            switch (t) {\n                case 'client': return this.clientXY(e);\n                case 'screen': return this.screenXY(e);\n                case 'page': return this.pageXY(e);\n                default: return {x: 0, y: 0};\n            }\n        },\n\n        /**\n         *\n         * @param {TouchEvent|Event|MouseEvent} e\n         * @returns {{x: (*), y: (*)}}\n         */\n        clientXY: function(e){\n            return {\n                x: e.changedTouches ? e.changedTouches[0].clientX : e.clientX,\n                y: e.changedTouches ? e.changedTouches[0].clientY : e.clientY\n            };\n        },\n\n        /**\n         *\n         * @param {TouchEvent|Event|MouseEvent} e\n         * @returns {{x: (*), y: (*)}}\n         */\n        screenXY: function(e){\n            return {\n                x: e.changedTouches ? e.changedTouches[0].screenX : e.screenX,\n                y: e.changedTouches ? e.changedTouches[0].screenY : e.screenY\n            };\n        },\n\n        /**\n         *\n         * @param {TouchEvent|Event|MouseEvent} e\n         * @returns {{x: (*), y: (*)}}\n         */\n        pageXY: function(e){\n            return {\n                x: e.changedTouches ? e.changedTouches[0].pageX : e.pageX,\n                y: e.changedTouches ? e.changedTouches[0].pageY : e.pageY\n            };\n        },\n\n        isRightMouse: function(e){\n            return \"which\" in e ? e.which === 3 : \"button\" in e ? e.button === 2 : undefined;\n        },\n\n        hiddenElementSize: function(el, includeMargin){\n            var width, height, clone = $(el).clone(true);\n\n            clone.removeAttr(\"data-role\").css({\n                visibility: \"hidden\",\n                position: \"absolute\",\n                display: \"block\"\n            });\n            $(\"body\").append(clone);\n\n            if (!this.isValue(includeMargin)) {\n                includeMargin = false;\n            }\n\n            width = clone.outerWidth(includeMargin);\n            height = clone.outerHeight(includeMargin);\n            clone.remove();\n            return {\n                width: width,\n                height: height\n            };\n        },\n\n        getStyle: function(element, pseudo){\n            var el = $(element)[0];\n            return window.getComputedStyle(el, pseudo);\n        },\n\n        getStyleOne: function(el, property){\n            return this.getStyle(el).getPropertyValue(property);\n        },\n\n        getInlineStyles: function(element){\n            var i, l, styles = {}, el = $(element)[0];\n            for (i = 0, l = el.style.length; i < l; i++) {\n                var s = el.style[i];\n                styles[s] = el.style[s];\n            }\n\n            return styles;\n        },\n\n        encodeURI: function(str){\n            return encodeURI(str).replace(/%5B/g, '[').replace(/%5D/g, ']');\n        },\n\n        updateURIParameter: function(uri, key, value) {\n            var re = new RegExp(\"([?&])\" + key + \"=.*?(&|$)\", \"i\");\n            var separator = uri.indexOf('?') !== -1 ? \"&\" : \"?\";\n            if (uri.match(re)) {\n                return uri.replace(re, '$1' + key + \"=\" + value + '$2');\n            }\n            else {\n                return uri + separator + key + \"=\" + value;\n            }\n        },\n\n        getURIParameter: function(url, name){\n            if (!url) url = window.location.href;\n            /* eslint-disable-next-line */\n            name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n            var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n                results = regex.exec(url);\n            if (!results) return null;\n            if (!results[2]) return '';\n            return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n        },\n\n        getLocales: function(){\n            return Object.keys(Metro.locales);\n        },\n\n        addLocale: function(locale){\n            Metro.locales = $.extend( {}, Metro.locales, locale );\n        },\n\n        aspectRatioH: function(width, a){\n            if (a === \"16/9\") return width * 9 / 16;\n            if (a === \"21/9\") return width * 9 / 21;\n            if (a === \"4/3\") return width * 3 / 4;\n        },\n\n        aspectRatioW: function(height, a){\n            if (a === \"16/9\") return height * 16 / 9;\n            if (a === \"21/9\") return height * 21 / 9;\n            if (a === \"4/3\") return height * 4 / 3;\n        },\n\n        valueInObject: function(obj, value){\n            return Object.values(obj).indexOf(value) > -1;\n        },\n\n        keyInObject: function(obj, key){\n            return Object.keys(obj).indexOf(key) > -1;\n        },\n\n        inObject: function(obj, key, val){\n            return obj[key] !== undefined && obj[key] === val;\n        },\n\n        newCssSheet: function(media){\n            var style = document.createElement(\"style\");\n\n            if (media !== undefined) {\n                style.setAttribute(\"media\", media);\n            }\n\n            style.appendChild(document.createTextNode(\"\"));\n\n            document.head.appendChild(style);\n\n            return style.sheet;\n        },\n\n        addCssRule: function(sheet, selector, rules, index){\n            sheet.insertRule(selector + \"{\" + rules + \"}\", index);\n        },\n\n        media: function(query){\n            return window.matchMedia(query).matches;\n        },\n\n        mediaModes: function(){\n            return window.METRO_MEDIA;\n        },\n\n        mediaExist: function(media){\n            return window.METRO_MEDIA.indexOf(media) > -1;\n        },\n\n        inMedia: function(media){\n            return window.METRO_MEDIA.indexOf(media) > -1 && window.METRO_MEDIA.indexOf(media) === window.METRO_MEDIA.length - 1;\n        },\n\n        isValue: function(val){\n            return val !== undefined && val !== null && val !== \"\";\n        },\n\n        isNull: function(val){\n            return val === undefined || val === null;\n        },\n\n        isNegative: function(val){\n            return parseFloat(val) < 0;\n        },\n\n        isPositive: function(val){\n            return parseFloat(val) > 0;\n        },\n\n        isZero: function(val){\n            return (parseFloat(val.toFixed(2))) === 0.00;\n        },\n\n        between: function(val, bottom, top, equals){\n            return equals === true ? val >= bottom && val <= top : val > bottom && val < top;\n        },\n\n        parseMoney: function(val){\n            return Number(parseFloat(val.replace(/[^0-9-.]/g, '')));\n        },\n\n        parseCard: function(val){\n            return val.replace(/[^0-9]/g, '');\n        },\n\n        parsePhone: function(val){\n            return this.parseCard(val);\n        },\n\n        parseNumber: function(val, thousand, decimal){\n            return val.replace(new RegExp('\\\\'+thousand, \"g\"), \"\").replace(new RegExp('\\\\'+decimal, 'g'), \".\");\n        },\n\n        nearest: function(val, precision, down){\n            val /= precision;\n            val = Math[down === true ? 'floor' : 'ceil'](val) * precision;\n            return val;\n        },\n\n        bool: function(value){\n            switch(value){\n                case true:\n                case \"true\":\n                case 1:\n                case \"1\":\n                case \"on\":\n                case \"yes\":\n                    return true;\n                default:\n                    return false;\n            }\n        },\n\n        copy: function(element){\n            var body = document.body, range, sel;\n            var el = $(element)[0];\n\n            if (document.createRange && window.getSelection) {\n                range = document.createRange();\n                sel = window.getSelection();\n                sel.removeAllRanges();\n                try {\n                    range.selectNodeContents(el);\n                    sel.addRange(range);\n                } catch (e) {\n                    range.selectNode(el);\n                    sel.addRange(range);\n                }\n            } else if (body[\"createTextRange\"]) {\n                range = body[\"createTextRange\"]();\n                range[\"moveToElementText\"](el);\n                range.select();\n            }\n\n            document.execCommand(\"Copy\");\n\n            if (window.getSelection) {\n                if (window.getSelection().empty) {  // Chrome\n                    window.getSelection().empty();\n                } else if (window.getSelection().removeAllRanges) {  // Firefox\n                    window.getSelection().removeAllRanges();\n                }\n            } else if (document[\"selection\"]) {  // IE?\n                document[\"selection\"].empty();\n            }\n        },\n\n        decCount: function(v){\n            return v % 1 === 0 ? 0 : v.toString().split(\".\")[1].length;\n        }\n    };\n\n    if (window.METRO_GLOBAL_COMMON === true) {\n        window.Utils = Metro.utils;\n    }\n}(Metro, m4q));\r\n\r\n(function(Metro, $){\n    'use strict';\n    var Utils = Metro.utils;\n    var AccordionDefaultConfig = {\n        accordionDeferred: 0,\n        showMarker: true,\n        material: false,\n        duration: METRO_ANIMATION_DURATION,\n        oneFrame: true,\n        showActive: true,\n        activeFrameClass: \"\",\n        activeHeadingClass: \"\",\n        activeContentClass: \"\",\n        clsFrame: \"\",\n        clsHeading: \"\",\n        clsContent: \"\",\n        clsAccordion: \"\",\n        clsActiveFrame: \"\",\n        clsActiveFrameHeading: \"\",\n        clsActiveFrameContent: \"\",\n        onFrameOpen: Metro.noop,\n        onFrameBeforeOpen: Metro.noop_true,\n        onFrameClose: Metro.noop,\n        onFrameBeforeClose: Metro.noop_true,\n        onAccordionCreate: Metro.noop\n    };\n\n    Metro.accordionSetup = function(options){\n        AccordionDefaultConfig = $.extend({}, AccordionDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroAccordionSetup\"] !== undefined) {\n        Metro.accordionSetup(window[\"metroAccordionSetup\"]);\n    }\n\n    Metro.Component('accordion', {\n        init: function( options, elem ) {\n            this._super(elem, options, AccordionDefaultConfig);\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent('accordionCreate', {\n                element: element\n            });\n        },\n\n        _createStructure: function(){\n            var that = this, element = this.element, o = this.options;\n            var frames = element.children(\".frame\");\n            var active = element.children(\".frame.active\");\n            var frame_to_open;\n\n            element\n                .addClass(\"accordion\")\n                .addClass(o.clsAccordion)\n            ;\n\n            frames\n                .addClass(o.clsFrame)\n                .each(function(){\n                    var $el = $(this);\n                    $el.children(\".heading\").addClass(o.clsHeading);\n                    $el.children(\".content\").addClass(o.clsContent);\n                })\n            ;\n\n            if (o.showMarker === true) {\n                element.addClass(\"marker-on\");\n            }\n\n            if (o.material === true) {\n                element.addClass(\"material\");\n            }\n\n            if (active.length === 0) {\n                frame_to_open = frames[0];\n            } else {\n                frame_to_open = active[0];\n            }\n\n            this._hideAll();\n\n            if (o.showActive === true) {\n                if (o.oneFrame === true) {\n                    this._openFrame(frame_to_open);\n                } else {\n                    $.each(active, function(){\n                        that._openFrame(this);\n                    });\n                }\n            }\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var active = element.children(\".frame.active\");\n\n            element.on(Metro.events.click, \".heading\", function(){\n                var heading = $(this);\n                var frame = heading.parent();\n\n                if (heading.closest(\".accordion\")[0] !== element[0]) {\n                    return false;\n                }\n\n                if (frame.hasClass(\"active\")) {\n                    if (active.length === 1 && o.oneFrame) {\n                        /* eslint-disable-next-line */\n\n                    } else {\n                        that._closeFrame(frame);\n                    }\n                } else {\n                    that._openFrame(frame);\n                }\n            });\n        },\n\n        _openFrame: function(f){\n            var element = this.element, o = this.options;\n            var frame = $(f);\n\n            if (Utils.exec(o.onFrameBeforeOpen, [frame[0]], element[0]) === false) {\n                return false;\n            }\n\n            if (o.oneFrame === true) {\n                this._closeAll(frame[0]);\n            }\n\n            frame.addClass(\"active \" + o.activeFrameClass).addClass(o.clsActiveFrame);\n            frame.children(\".heading\").addClass(o.activeHeadingClass).addClass(o.clsActiveFrameHeading);\n            frame.children(\".content\").addClass(o.activeContentClass).addClass(o.clsActiveFrameContent).slideDown(o.duration);\n\n            this._fireEvent(\"frameOpen\", {\n                frame: frame[0]\n            });\n        },\n\n        _closeFrame: function(f){\n            var element = this.element, o = this.options;\n            var frame = $(f);\n\n            if (!frame.hasClass(\"active\")) {\n                return ;\n            }\n\n            if (Utils.exec(o.onFrameBeforeClose, [frame[0]], element[0]) === false) {\n                return ;\n            }\n\n            frame.removeClass(\"active \" + o.activeFrameClass).removeClass(o.clsActiveFrame);\n            frame.children(\".heading\").removeClass(o.activeHeadingClass).removeClass(o.clsActiveFrameHeading);\n            frame.children(\".content\").removeClass(o.activeContentClass).removeClass(o.clsActiveFrameContent).slideUp(o.duration);\n\n            this._fireEvent(\"frameClose\", {\n                frame: frame[0]\n            });\n        },\n\n        _closeAll: function(skip){\n            var that = this, element = this.element;\n            var frames = element.children(\".frame\");\n\n            $.each(frames, function(){\n                if (skip === this) return;\n                that._closeFrame(this);\n            });\n        },\n\n        _hideAll: function(){\n            var element = this.element;\n            var frames = element.children(\".frame\");\n\n            $.each(frames, function(){\n                $(this).children(\".content\").hide();\n            });\n        },\n\n        _openAll: function(){\n            var that = this, element = this.element;\n            var frames = element.children(\".frame\");\n\n            $.each(frames, function(){\n                that._openFrame(this);\n            });\n        },\n\n        open: function(i){\n            var frame = this.element.children(\".frame\").eq(i);\n            this._openFrame(frame);\n        },\n\n        /* eslint-disable-next-line */\n        changeAttribute: function(attr, newVal){\n        },\n\n        destroy: function(){\n            var element = this.element;\n            element.off(Metro.events.click, \".heading\");\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var ActivityDefaultConfig = {\n        activityDeferred: 0,\n        type: \"ring\",\n        style: \"color\",\n        size: 64,\n        radius: 20,\n        onActivityCreate: Metro.noop\n    };\n\n    Metro.activitySetup = function(options){\n        ActivityDefaultConfig = $.extend({}, ActivityDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroActivitySetup\"] !== undefined) {\n        Metro.activitySetup(window[\"metroActivitySetup\"]);\n    }\n\n    Metro.Component('activity', {\n        init: function( options, elem ) {\n            this._super(elem, options, ActivityDefaultConfig);\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n            var i, wrap;\n\n            element\n                .html('')\n                .addClass(o.style + \"-style\")\n                .addClass(\"activity-\" + o.type);\n\n            function _metro(){\n                for(i = 0; i < 5 ; i++) {\n                    $(\"<div/>\").addClass('circle').appendTo(element);\n                }\n            }\n\n            function _square(){\n                for(i = 0; i < 4 ; i++) {\n                    $(\"<div/>\").addClass('square').appendTo(element);\n                }\n            }\n\n            function _cycle(){\n                $(\"<div/>\").addClass('cycle').appendTo(element);\n            }\n\n            function _ring(){\n                for(i = 0; i < 5 ; i++) {\n                    wrap = $(\"<div/>\").addClass('wrap').appendTo(element);\n                    $(\"<div/>\").addClass('circle').appendTo(wrap);\n                }\n            }\n\n            function _simple(){\n                $('<svg class=\"circular\"><circle class=\"path\" cx=\"'+o.size/2+'\" cy=\"'+o.size/2+'\" r=\"'+o.radius+'\" fill=\"none\" stroke-width=\"2\" stroke-miterlimit=\"10\"/></svg>').appendTo(element);\n            }\n\n            function _atom(){\n                for(i = 0; i < 3 ; i++) {\n                    $(\"<span/>\").addClass('electron').appendTo(element);\n                }\n            }\n\n            function _bars(){\n                for(i = 0; i < 6 ; i++) {\n                    $(\"<span/>\").addClass('bar').appendTo(element);\n                }\n            }\n\n            switch (o.type) {\n                case 'metro': _metro(); break;\n                case 'square': _square(); break;\n                case 'cycle': _cycle(); break;\n                case 'simple': _simple(); break;\n                case 'atom': _atom(); break;\n                case 'bars': _bars(); break;\n                default: _ring();\n            }\n\n            this._fireEvent(\"activity-create\", {\n                element: element\n            })\n        },\n\n        /*eslint-disable-next-line*/\n        changeAttribute: function(attributeName){\n        },\n\n        destroy: function(){\n            return this.element;\n        }\n    });\n\n    Metro.activity = {\n        open: function(options){\n            var o = options || {};\n            var activity = '<div data-role=\"activity\" data-type=\"'+( o.type ? o.type : 'cycle' )+'\" data-style=\"'+( o.style ? o.style : 'color' )+'\"></div>';\n            var text = o.text ? '<div class=\"text-center\">'+o.text+'</div>' : '';\n\n            return Metro.dialog.create({\n                content: activity + text,\n                defaultAction: false,\n                clsContent: \"d-flex flex-column flex-justify-center flex-align-center bg-transparent no-shadow w-auto\",\n                clsDialog: \"no-border no-shadow bg-transparent global-dialog\",\n                autoHide: o.autoHide ? o.autoHide : 0,\n                overlayClickClose: o.overlayClickClose === true,\n                overlayColor: o.overlayColor ? o.overlayColor : '#000000',\n                overlayAlpha: o.overlayAlpha ? o.overlayAlpha : 0.5,\n                clsOverlay: \"global-overlay\"\n            });\n        },\n\n        close: function(a){\n            Metro.dialog.close(a);\n        }\n    };\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var AdblockDefaultConfig = {\n        adblockDeferred: 0,\n        checkInterval: 1000,\n        fireOnce: true,\n        checkStop: 10,\n        localhost: false,\n        onAlert: Metro.noop,\n        onFishingStart: Metro.noop,\n        onFishingDone: Metro.noop\n    };\n\n    Metro.adblockSetup = function(options){\n        AdblockDefaultConfig = $.extend({}, AdblockDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroAdblockSetup\"] !== undefined) {\n        Metro.adblockSetup(window[\"metroAdblockSetup\"]);\n    }\n\n    var Adblock = {\n        bite: function(){\n            var classes = \"adblock-bite adsense google-adsense dblclick advert topad top_ads topAds textads sponsoredtextlink_container show_ads right-banner rekl mpu module-ad mid_ad mediaget horizontal_ad headerAd contentAd brand-link bottombanner bottom_ad_block block_ad bannertop banner-right banner-body b-banner b-article-aside__banner b-advert adwrapper adverts advertisment advertisement:not(body) advertise advert_list adtable adsense adpic adlist adleft adinfo adi adholder adframe addiv ad_text ad_space ad_right ad_links ad_body ad_block ad_Right adTitle adText\";\n            $(\"<div>\")\n                .addClass(classes.split(\" \").shuffle().join(\" \"))\n                .css({\n                    position: \"fixed\",\n                    height: 1,\n                    width: 1,\n                    overflow: \"hidden\",\n                    visibility: \"visible\",\n                    top: 0,\n                    left: 0\n                })\n                .append($(\"<a href='https://dblclick.net'>\").html('dblclick.net'))\n                .appendTo('body');\n\n            if (Adblock.options.adblockDeferred) {\n                setTimeout(function () {\n                    Adblock.fishing();\n                }, Adblock.options.adblockDeferred);\n            } else this.fishing();\n        },\n\n        fishing: function(){\n            var o = Adblock.options;\n            var checks = typeof o.fireOnce === \"number\" ? o.fireOnce : 0;\n            var checkStop = o.checkStop;\n            var interval = false;\n            var run = function(){\n                var a = $(\".adsense.google-adsense.dblclick.advert.adblock-bite\");\n                var b = a.find(\"a\");\n                var done = function(){\n                    clearInterval(interval);\n\n                    Utils.exec(o.onFishingDone);\n                    $(window).fire(\"fishing-done\");\n\n                    a.remove();\n                };\n\n                if (!o.localhost && $.localhost) {\n                    done();\n                    return ;\n                }\n\n                if (   !a.length\n                    || !b.length\n                    || a.css(\"display\").indexOf('none') > -1\n                    || b.css(\"display\").indexOf('none') > -1\n                ) {\n\n                    Utils.exec(Adblock.options.onAlert);\n                    $(window).fire(\"adblock-alert\");\n\n                    if (Adblock.options.fireOnce === true) {\n                        done();\n                    } else {\n                        checks--;\n                        if (checks === 0) {\n                            done();\n                        }\n                    }\n                } else {\n                    if (checkStop !== false) {\n                        checkStop--;\n                        if (checkStop === 0) {\n                            done();\n                        }\n                    }\n                }\n            };\n\n            Utils.exec(o.onFishingStart);\n            $(window).fire(\"fishing-start\");\n\n            interval = setInterval(function(){\n                run();\n            }, Adblock.options.checkInterval);\n\n            run();\n        }\n    };\n\n    Metro.Adblock = Adblock;\n\n    $(function(){\n        Adblock.options = $.extend({}, AdblockDefaultConfig);\n        $(window).on(\"metro-initiated\", function(){\n            Adblock.bite();\n        });\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var AnimationDefaultConfig = {\n        duration: METRO_ANIMATION_DURATION,\n        ease: \"linear\"\n    }\n\n    Metro.animations = {\n\n        switchIn: function(el){\n            $(el)\n                .hide()\n                .css({\n                    left: 0,\n                    top: 0\n                })\n                .show();\n        },\n\n        switchOut: function(el){\n            $(el).hide();\n        },\n\n        switch: function(current, next){\n            this.switchOut(current);\n            this.switchIn(next);\n        },\n\n        slideUpIn: function(el, o){\n            var op, $el = $(el);\n            var h = $el.parent().outerHeight(true);\n\n            op = $.extend({}, AnimationDefaultConfig, o);\n\n            $el\n                .css({\n                    top: h,\n                    left: 0,\n                    zIndex: 2\n                })\n                .animate({\n                    draw: {\n                        top: 0,\n                        opacity: 1\n                    },\n                    dur: op.duration,\n                    ease: op.ease\n                });\n        },\n\n        slideUpOut: function(el, o){\n            var op, $el = $(el);\n            var h = $el.parent().outerHeight(true);\n\n            op = $.extend({}, AnimationDefaultConfig, o);\n\n            $el\n                .css({\n                    zIndex: 1\n                })\n                .animate({\n                    draw: {\n                        top: -h,\n                        opacity: 0\n                    },\n                    dur: op.duration,\n                    ease: op.ease\n                });\n        },\n\n        slideUp: function(current, next, o){\n            this.slideUpOut(current, o);\n            this.slideUpIn(next, o);\n        },\n\n        slideDownIn: function(el, o){\n            var op, $el = $(el);\n            var h = $el.parent().outerHeight(true);\n\n            op = $.extend({}, AnimationDefaultConfig, o);\n\n            $el\n                .css({\n                    left: 0,\n                    top: -h,\n                    zIndex: 2\n                })\n                .animate({\n                    draw: {\n                        top: 0,\n                        opacity: 1\n                    },\n                    dur: op.duration,\n                    ease: op.ease\n                });\n        },\n\n        slideDownOut: function(el, o){\n            var op, $el = $(el);\n            var h = $el.parent().outerHeight(true);\n\n            op = $.extend({}, AnimationDefaultConfig, o);\n\n            $el\n                .css({\n                    zIndex: 1\n                })\n                .animate({\n                    draw: {\n                        top: h,\n                        opacity: 0\n                    },\n                    dur: op.duration,\n                    ease: op.ease\n                });\n        },\n\n        slideDown: function(current, next, o){\n            this.slideDownOut(current, o);\n            this.slideDownIn(next, o);\n        },\n\n        slideLeftIn: function(el, o){\n            var op, $el = $(el);\n            var w = $el.parent().outerWidth(true);\n\n            op = $.extend({}, AnimationDefaultConfig, o);\n\n            $el\n                .css({\n                    left: w,\n                    zIndex: 2\n                })\n                .animate({\n                    draw: {\n                        left: 0,\n                        opacity: 1\n                    },\n                    dur: op.duration,\n                    ease: op.ease\n                });\n        },\n\n        slideLeftOut: function(el, o){\n            var op, $el = $(el);\n            var w = $el.parent().outerWidth(true);\n\n            op = $.extend({}, AnimationDefaultConfig, o);\n\n            $el\n                .css({\n                    zIndex: 1\n                })\n                .animate({\n                    draw: {\n                        left: -w,\n                        opacity: 0\n                    },\n                    dur: op.duration,\n                    ease: op.ease\n                });\n        },\n\n        slideLeft: function(current, next, o){\n            this.slideLeftOut(current, o);\n            this.slideLeftIn(next, o);\n        },\n\n        slideRightIn: function(el, o){\n            var op, $el = $(el);\n            var w = $el.parent().outerWidth(true);\n\n            op = $.extend({}, AnimationDefaultConfig, o);\n\n            $el\n                .css({\n                    left: -w,\n                    zIndex: 2\n                })\n                .animate({\n                    draw: {\n                        left: 0,\n                        opacity: 1\n                    },\n                    dur: op.duration,\n                    ease: op.ease\n                });\n        },\n\n        slideRightOut: function(el, o){\n            var op, $el = $(el);\n            var w = $el.parent().outerWidth(true);\n\n            op = $.extend({}, AnimationDefaultConfig, o);\n\n            $el\n                .css({\n                    zIndex: 1\n                })\n                .animate({\n                    draw: {\n                        left:  w,\n                        opacity: 0\n                    },\n                    dur: op.duration,\n                    ease: op.ease\n                });\n        },\n\n        slideRight: function(current, next, o){\n            this.slideRightOut(current, o);\n            this.slideRightIn(next, o);\n        },\n\n        fadeIn: function(el, o){\n            var op = $.extend({}, AnimationDefaultConfig, o);\n            var $el = $(el);\n\n            $el\n                .css({\n                    top: 0,\n                    left: 0,\n                    opacity: 0\n                })\n                .animate({\n                    draw: {\n                        opacity: 1\n                    },\n                    dur: op.duration,\n                    ease: op.ease\n                });\n        },\n\n        fadeOut: function(el, o){\n            var op = $.extend({}, AnimationDefaultConfig, o);\n            var $el = $(el);\n\n            $el\n                .animate({\n                    draw: {\n                        opacity: 0\n                    },\n                    dur: op.duration,\n                    ease: op.ease\n                });\n        },\n\n        fade: function(current, next, o){\n            this.fadeOut(current, o);\n            this.fadeIn(next, o);\n        },\n\n        zoomIn: function(el, o){\n            var op = $.extend({}, AnimationDefaultConfig, o);\n            var $el = $(el);\n\n            $el\n                .css({\n                    top: 0,\n                    left: 0,\n                    opacity: 0,\n                    transform: \"scale(3)\",\n                    zIndex: 2\n                })\n                .animate({\n                    draw: {\n                        scale: 1,\n                        opacity: 1\n                    },\n                    dur: op.duration,\n                    ease: op.ease\n                });\n        },\n\n        zoomOut: function(el, o){\n            var op = $.extend({}, AnimationDefaultConfig, o);\n            var $el = $(el);\n\n            $el\n                .css({\n                    zIndex: 1\n                })\n                .animate({\n                    draw: {\n                        scale: 3,\n                        opacity: 0\n                    },\n                    dur: op.duration,\n                    ease: op.ease\n                });\n        },\n\n        zoom: function(current, next, o){\n            this.zoomOut(current, o);\n            this.zoomIn(next, o);\n        },\n\n        swirlIn: function(el, o){\n            var op = $.extend({}, AnimationDefaultConfig, o);\n            var $el = $(el);\n\n            $el\n                .css({\n                    top: 0,\n                    left: 0,\n                    opacity: 0,\n                    transform: \"scale(3) rotate(180deg)\",\n                    zIndex: 2\n                })\n                .animate({\n                    draw: {\n                        scale: 1,\n                        rotate: 0,\n                        opacity: 1\n                    },\n                    dur: op.duration,\n                    ease: op.ease\n                });\n        },\n\n        swirlOut: function(el, o){\n            var op = $.extend({}, AnimationDefaultConfig, o);\n            var $el = $(el);\n\n            $el\n                .css({\n                    zIndex: 1\n                })\n                .animate({\n                    draw: {\n                        scale: 3,\n                        rotate: \"180deg\",\n                        opacity: 0\n                    },\n                    dur: op.duration,\n                    ease: op.ease\n                });\n        },\n\n        swirl: function(current, next, o){\n            this.swirlOut(current, o);\n            this.swirlIn(next, o);\n        }\n    };\n\n    if (window.METRO_GLOBAL_COMMON === true) {\n        window.Animations = Metro.animations;\n    }\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n\n    var Utils = Metro.utils;\n    var AppBarDefaultConfig = {\n        appbarDeferred: 0,\n        expand: false,\n        expandPoint: null,\n        duration: 100,\n        onMenuOpen: Metro.noop,\n        onMenuClose: Metro.noop,\n        onBeforeMenuOpen: Metro.noop,\n        onBeforeMenuClose: Metro.noop,\n        onMenuCollapse: Metro.noop,\n        onMenuExpand: Metro.noop,\n        onAppBarCreate: Metro.noop\n    };\n\n    Metro.appBarSetup = function (options) {\n        AppBarDefaultConfig = $.extend({}, AppBarDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroAppBarSetup\"] !== undefined) {\n        Metro.appBarSetup(window[\"metroAppBarSetup\"]);\n    }\n\n    Metro.Component('app-bar', {\n        init: function (options, elem) {\n            this._super(elem, options, AppBarDefaultConfig, {\n                id: Utils.elementId('app-bar')\n            });\n\n            return this;\n        },\n\n        _create: function () {\n            var element = this.element;\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"app-bar-create\", {\n                element: element\n            })\n        },\n\n        _createStructure: function () {\n            var element = this.element, o = this.options;\n            var hamburger, menu, elementColor = Utils.getStyleOne(element, \"background-color\");\n\n            element.addClass(\"app-bar\");\n\n            hamburger = element.find(\".hamburger\");\n            if (hamburger.length === 0) {\n                hamburger = $(\"<button>\").attr(\"type\", \"button\").addClass(\"hamburger menu-down\");\n                for (var i = 0; i < 3; i++) {\n                    $(\"<span>\").addClass(\"line\").appendTo(hamburger);\n                }\n\n                if (elementColor === \"rgba(0, 0, 0, 0)\" || Metro.colors.isLight(elementColor) === true) {\n                    hamburger.addClass(\"dark\");\n                }\n            }\n\n            element.prepend(hamburger);\n            menu = element.find(\".app-bar-menu\");\n\n            if (menu.length === 0) {\n                hamburger.css(\"display\", \"none\");\n            } else {\n                Utils.addCssRule(Metro.sheet, \".app-bar-menu li\", \"list-style: none!important;\"); // This special for IE11 and Edge\n            }\n\n            if (hamburger.css('display') === 'block') {\n                menu.hide().addClass(\"collapsed\");\n                hamburger.removeClass(\"hidden\");\n            } else {\n                hamburger.addClass(\"hidden\");\n            }\n\n            if (o.expand === true) {\n                element.addClass(\"app-bar-expand\");\n                hamburger.addClass(\"hidden\");\n            } else {\n                if (Utils.isValue(o.expandPoint) && Utils.mediaExist(o.expandPoint)) {\n                    element.addClass(\"app-bar-expand\");\n                    hamburger.addClass(\"hidden\");\n                }\n            }\n        },\n\n        _createEvents: function () {\n            var that = this, element = this.element, o = this.options;\n            var menu = element.find(\".app-bar-menu\");\n            var hamburger = element.find(\".hamburger\");\n\n            element.on(Metro.events.click, \".hamburger\", function () {\n                if (menu.length === 0) return;\n                var collapsed = menu.hasClass(\"collapsed\");\n                if (collapsed) {\n                    that.open();\n                } else {\n                    that.close();\n                }\n            });\n\n            $(window).on(Metro.events.resize, function () {\n\n                if (o.expand !== true) {\n                    if (Utils.isValue(o.expandPoint) && Utils.mediaExist(o.expandPoint)) {\n                        element.addClass(\"app-bar-expand\");\n                        that._fireEvent(\"menu-expand\");\n                    } else {\n                        element.removeClass(\"app-bar-expand\");\n                        that._fireEvent(\"menu-collapse\");\n                    }\n                }\n\n                if (menu.length === 0) return;\n\n                if (hamburger.css('display') !== 'block') {\n                    menu.show(function () {\n                        $(this).removeStyleProperty(\"display\");\n                    });\n                    hamburger.addClass(\"hidden\");\n                } else {\n                    hamburger.removeClass(\"hidden\");\n                    if (hamburger.hasClass(\"active\")) {\n                        menu.show().removeClass(\"collapsed\");\n                    } else {\n                        menu.hide().addClass(\"collapsed\");\n                    }\n                }\n            }, {ns: this.id});\n        },\n\n        close: function () {\n            var that = this, element = this.element, o = this.options;\n            var menu = element.find(\".app-bar-menu\");\n            var hamburger = element.find(\".hamburger\");\n\n            that._fireEvent(\"before-menu-close\", {\n                menu: menu[0]\n            });\n\n            menu.slideUp(o.duration, function () {\n                menu.addClass(\"collapsed\").removeClass(\"opened\");\n                hamburger.removeClass(\"active\");\n\n                that._fireEvent(\"menu-close\", {\n                    menu: menu[0]\n                });\n            });\n        },\n\n        open: function () {\n            var that = this, element = this.element, o = this.options;\n            var menu = element.find(\".app-bar-menu\");\n            var hamburger = element.find(\".hamburger\");\n\n            that._fireEvent(\"before-menu-open\", {\n                menu: menu[0]\n            });\n\n            menu.slideDown(o.duration, function () {\n                menu.removeClass(\"collapsed\").addClass(\"opened\");\n                hamburger.addClass(\"active\");\n\n                that._fireEvent(\"menu-open\", {\n                    menu: menu[0]\n                });\n            });\n        },\n\n        /* eslint-disable-next-line */\n        changeAttribute: function (attributeName) {\n        },\n\n        destroy: function () {\n            var element = this.element;\n            element.off(Metro.events.click, \".hamburger\");\n            $(window).off(Metro.events.resize, {ns: this.id});\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var AudioButtonDefaultConfig = {\n        audioVolume: 0.5,\n        audioSrc: \"\",\n        onAudioStart: Metro.noop,\n        onAudioEnd: Metro.noop,\n        onAudioButtonCreate: Metro.noop\n    };\n\n    Metro.audioButtonSetup = function (options) {\n        AudioButtonDefaultConfig = $.extend({}, AudioButtonDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroAudioButtonSetup\"] !== undefined) {\n        Metro.audioButtonSetup(window[\"metroAudioButtonSetup\"]);\n    }\n\n    Metro.Component('audio-button', {\n        init: function( options, elem ) {\n\n            this._super(elem, options, AudioButtonDefaultConfig, {\n                audio: null,\n                canPlay: null,\n                id: Utils.elementId(\"audioButton\")\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent('audioButtonCreate', {\n                element: element\n            });\n        },\n\n        _createStructure: function(){\n            var o = this.options;\n            this.audio = new Audio(o.audioSrc);\n            this.audio.volume = o.audioVolume;\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var audio = this.audio;\n\n            audio.addEventListener('loadeddata', function(){\n                that.canPlay = true;\n            });\n\n            audio.addEventListener('ended', function(){\n                that._fireEvent(\"audioEnd\", {\n                    src: o.audioSrc,\n                    audio: audio\n                });\n            })\n\n            element.on(Metro.events.click, function(){\n                that.play();\n            }, {ns: this.id});\n        },\n\n        play: function(cb){\n            var element = this.element, o = this.options;\n            var audio = this.audio;\n\n            if (o.audioSrc !== \"\" && this.audio.duration && this.canPlay) {\n\n                this._fireEvent(\"audioStart\", {\n                    src: o.audioSrc,\n                    audio: audio\n                });\n\n                audio.pause();\n                audio.currentTime = 0;\n                audio.play();\n\n                Utils.exec(cb, [audio], element[0]);\n            }\n        },\n\n        stop: function(cb){\n            var element = this.element, o = this.options;\n            var audio = this.audio;\n\n            audio.pause();\n            audio.currentTime = 0;\n\n            this._fireEvent(\"audioEnd\", {\n                src: o.audioSrc,\n                audio: audio\n            });\n\n            Utils.exec(cb, [audio], element[0]);\n        },\n\n        changeAttribute: function(attributeName){\n            var element = this.element, o = this.options;\n            var audio = this.audio;\n\n            var changeSrc = function(){\n                var src = element.attr('data-audio-src');\n                if (src && src.trim() !== \"\") {\n                    o.audioSrc = src;\n                    audio.src = src;\n                }\n            }\n\n            var changeVolume = function(){\n                var volume = parseFloat(element.attr('data-audio-volume'));\n                if (isNaN(volume)) {\n                    return ;\n                }\n                o.audioVolume = volume;\n                audio.volume = volume;\n            }\n\n            if (attributeName === 'data-audio-src') {\n                changeSrc();\n            }\n\n            if (attributeName === 'data-audio-volume') {\n                changeVolume();\n            }\n        },\n\n        destroy: function(){\n            var element = this.element;\n\n            element.off(Metro.events.click, {ns: this.id});\n        }\n    });\n\n    Metro[\"playSound\"] = function(data){\n        var audio;\n        var src = typeof data === \"string\" ? data : data.audioSrc;\n        var volume = data && data.audioVolume ? data.audioVolume : 0.5;\n\n        if (!src) {\n            return;\n        }\n\n        audio = new Audio(src);\n        audio.volume = parseFloat(volume);\n\n        audio.addEventListener('loadeddata', function(){\n            if (data && data.onAudioStart)\n                Utils.exec(data.onAudioStart, [src], this);\n            this.play();\n        });\n\n        audio.addEventListener('ended', function(){\n            if (data && data.onAudioEnd)\n                Utils.exec(data.onAudioEnd, [null], this);\n        });\n    };\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var AudioPlayerDefaultConfig = {\n        audioDeferred: 0,\n        playlist: null,\n        src: null,\n\n        volume: .5,\n        loop: false,\n        autoplay: false,\n\n        showLoop: true,\n        showPlay: true,\n        showStop: true,\n        showMute: true,\n        showFull: true,\n        showStream: true,\n        showVolume: true,\n        showInfo: true,\n\n        showPlaylist: true,\n        showNext: true,\n        showPrev: true,\n        showFirst: true,\n        showLast: true,\n        showForward: true,\n        showBackward: true,\n        showShuffle: true,\n        showRandom: true,\n\n        loopIcon: \"<span class='default-icon-loop'></span>\",\n        stopIcon: \"<span class='default-icon-stop'></span>\",\n        playIcon: \"<span class='default-icon-play'></span>\",\n        pauseIcon: \"<span class='default-icon-pause'></span>\",\n        muteIcon: \"<span class='default-icon-mute'></span>\",\n        volumeLowIcon: \"<span class='default-icon-low-volume'></span>\",\n        volumeMediumIcon: \"<span class='default-icon-medium-volume'></span>\",\n        volumeHighIcon: \"<span class='default-icon-high-volume'></span>\",\n\n        playlistIcon: \"<span class='default-icon-playlist'></span>\",\n        nextIcon: \"<span class='default-icon-next'></span>\",\n        prevIcon: \"<span class='default-icon-prev'></span>\",\n        firstIcon: \"<span class='default-icon-first'></span>\",\n        lastIcon: \"<span class='default-icon-last'></span>\",\n        forwardIcon: \"<span class='default-icon-forward'></span>\",\n        backwardIcon: \"<span class='default-icon-backward'></span>\",\n        shuffleIcon: \"<span class='default-icon-shuffle'></span>\",\n        randomIcon: \"<span class='default-icon-random'></span>\",\n\n        onPlay: Metro.noop,\n        onPause: Metro.noop,\n        onStop: Metro.noop,\n        onEnd: Metro.noop,\n        onMetadata: Metro.noop,\n        onTime: Metro.noop,\n        onAudioPlayerCreate: Metro.noop\n    };\n\n    Metro.audioPlayerSetup = function(options){\n        AudioPlayerDefaultConfig = $.extend({}, AudioPlayerDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroAudioPlayerSetup\"] !== undefined) {\n        Metro.audioPlayerSetup(window[\"metroAudioPlayerSetup\"]);\n    }\n\n    Metro.Component('audio-player', {\n        init: function( options, elem ) {\n            this._super(elem, options, AudioPlayerDefaultConfig, {\n                preloader: null,\n                player: null,\n                audio: elem,\n                stream: null,\n                volume: null,\n                volumeBackup: 0,\n                muted: false\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n\n            this._createPlayer();\n            this._createControls();\n            this._createEvents();\n\n            if (o.autoplay === true) {\n                this.play();\n            }\n\n            this._fireEvent(\"audio-player-create\", {\n                element: element,\n                player: this.player\n            })\n        },\n\n        _createPlayer: function(){\n            var element = this.element, o = this.options, audio = this.audio;\n\n            var prev = element.prev();\n            var parent = element.parent();\n            var player = $(\"<div>\").addClass(\"media-player audio-player \" + element[0].className);\n\n            if (prev.length === 0) {\n                parent.prepend(player);\n            } else {\n                player.insertAfter(prev);\n            }\n\n            element.appendTo(player);\n\n            $.each(['muted', 'autoplay', 'controls', 'height', 'width', 'loop', 'poster', 'preload'], function(){\n                element.removeAttr(this);\n            });\n\n            element.attr(\"preload\", \"auto\");\n\n            audio.volume = o.volume;\n\n            if (o.src !== null) {\n                this._setSource(o.src);\n            }\n\n            element[0].className = \"\";\n\n            this.player = player;\n        },\n\n        _setSource: function(src){\n            var element = this.element;\n\n            element.find(\"source\").remove();\n            element.removeAttr(\"src\");\n            if (Array.isArray(src)) {\n                $.each(src, function(){\n                    var item = this;\n                    if (item.src === undefined) return ;\n                    $(\"<source>\").attr('src', item.src).attr('type', item.type !== undefined ? item.type : '').appendTo(element);\n                });\n            } else {\n                element.attr(\"src\", src);\n            }\n        },\n\n        _createControls: function(){\n            var that = this, element = this.element, o = this.options, audio = this.elem;\n\n            var controls = $(\"<div>\").addClass(\"controls\").addClass(o.clsControls).insertAfter(element);\n\n\n            var stream = $(\"<div>\").addClass(\"stream\").appendTo(controls);\n            var streamSlider = $(\"<input>\").addClass(\"stream-slider ultra-thin cycle-marker\").appendTo(stream);\n            var preloader = $(\"<div>\").addClass(\"load-audio\").appendTo(stream);\n\n            var volume = $(\"<div>\").addClass(\"volume\").appendTo(controls);\n            var volumeSlider = $(\"<input>\").addClass(\"volume-slider ultra-thin cycle-marker\").appendTo(volume);\n\n            var infoBox = $(\"<div>\").addClass(\"info-box\").appendTo(controls);\n\n            if (o.showInfo !== true) {\n                infoBox.hide();\n            }\n\n            preloader.activity({\n                type: \"metro\",\n                style: \"color\"\n            });\n\n            preloader.hide(0);\n\n            this.preloader = preloader;\n\n            Metro.makePlugin(streamSlider, \"slider\", {\n                clsMarker: \"bg-red\",\n                clsHint: \"bg-cyan fg-white\",\n                clsComplete: \"bg-cyan\",\n                hint: true,\n                onStart: function(){\n                    if (!audio.paused) audio.pause();\n                },\n                onStop: function(val){\n                    if (audio.seekable.length > 0) {\n                        audio.currentTime = (that.duration * val / 100).toFixed(0);\n                    }\n                    if (audio.paused && audio.currentTime > 0) {\n                        audio.play();\n                    }\n                }\n            });\n\n            this.stream = streamSlider;\n\n            if (o.showStream !== true) {\n                stream.hide();\n            }\n\n            Metro.makePlugin(volumeSlider, \"slider\", {\n                clsMarker: \"bg-red\",\n                clsHint: \"bg-cyan fg-white\",\n                hint: true,\n                value: o.volume * 100,\n                onChangeValue: function(val){\n                    audio.volume = val / 100;\n                }\n            });\n\n            this.volume = volumeSlider;\n\n            if (o.showVolume !== true) {\n                volume.hide();\n            }\n\n            var loop;\n\n            if (o.showLoop === true) loop = $(\"<button>\").attr(\"type\", \"button\").addClass(\"button square loop\").html(o.loopIcon).appendTo(controls);\n            if (o.showPlay === true) $(\"<button>\").attr(\"type\", \"button\").addClass(\"button square play\").html(o.playIcon).appendTo(controls);\n            if (o.showStop === true) $(\"<button>\").attr(\"type\", \"button\").addClass(\"button square stop\").html(o.stopIcon).appendTo(controls);\n            if (o.showMute === true) $(\"<button>\").attr(\"type\", \"button\").addClass(\"button square mute\").html(o.muteIcon).appendTo(controls);\n\n            if (o.loop === true) {\n                loop.addClass(\"active\");\n                element.attr(\"loop\", \"loop\");\n            }\n\n            this._setVolume();\n\n            if (o.muted) {\n                that.volumeBackup = audio.volume;\n                Metro.getPlugin(that.volume, 'slider').val(0);\n                audio.volume = 0;\n            }\n\n            infoBox.html(\"00:00 / 00:00\");\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options, audio = this.elem, player = this.player;\n\n            element.on(\"loadstart\", function(){\n                that.preloader.fadeIn();\n            });\n\n            element.on(\"loadedmetadata\", function(){\n                that.duration = audio.duration.toFixed(0);\n                that._setInfo(0, that.duration);\n                Utils.exec(o.onMetadata, [audio, player], element[0]);\n            });\n\n            element.on(\"canplay\", function(){\n                that._setBuffer();\n                that.preloader.fadeOut();\n            });\n\n            element.on(\"progress\", function(){\n                that._setBuffer();\n            });\n\n            element.on(\"timeupdate\", function(){\n                var position = Math.round(audio.currentTime * 100 / that.duration);\n                that._setInfo(audio.currentTime, that.duration);\n                Metro.getPlugin(that.stream, 'slider').val(position);\n                Utils.exec(o.onTime, [audio.currentTime, that.duration, audio, player], element[0]);\n            });\n\n            element.on(\"waiting\", function(){\n                that.preloader.fadeIn();\n            });\n\n            element.on(\"loadeddata\", function(){\n\n            });\n\n            element.on(\"play\", function(){\n                player.find(\".play\").html(o.pauseIcon);\n                Utils.exec(o.onPlay, [audio, player], element[0]);\n            });\n\n            element.on(\"pause\", function(){\n                player.find(\".play\").html(o.playIcon);\n                Utils.exec(o.onPause, [audio, player], element[0]);\n            });\n\n            element.on(\"stop\", function(){\n                Metro.getPlugin(that.stream, 'slider').val(0);\n                Utils.exec(o.onStop, [audio, player], element[0]);\n            });\n\n            element.on(\"ended\", function(){\n                Metro.getPlugin(that.stream, 'slider').val(0);\n                Utils.exec(o.onEnd, [audio, player], element[0]);\n            });\n\n            element.on(\"volumechange\", function(){\n                that._setVolume();\n            });\n\n            player.on(Metro.events.click, \".play\", function(){\n                if (audio.paused) {\n                    that.play();\n                } else {\n                    that.pause();\n                }\n            });\n\n            player.on(Metro.events.click, \".stop\", function(){\n                that.stop();\n            });\n\n            player.on(Metro.events.click, \".mute\", function(){\n                that._toggleMute();\n            });\n\n            player.on(Metro.events.click, \".loop\", function(){\n                that._toggleLoop();\n            });\n        },\n\n        _toggleLoop: function(){\n            var loop = this.player.find(\".loop\");\n            if (loop.length === 0) return ;\n            loop.toggleClass(\"active\");\n            if (loop.hasClass(\"active\")) {\n                this.element.attr(\"loop\", \"loop\");\n            } else {\n                this.element.removeAttr(\"loop\");\n            }\n        },\n\n        _toggleMute: function(){\n            this.muted = !this.muted;\n            if (this.muted === false) {\n                this.audio.volume = this.volumeBackup;\n            } else {\n                this.volumeBackup = this.audio.volume;\n                this.audio.volume = 0;\n            }\n            Metro.getPlugin(this.volume, 'slider').val(this.muted === false ? this.volumeBackup * 100 : 0);\n        },\n\n        _setInfo: function(a, b){\n            this.player.find(\".info-box\").html(Utils.secondsToFormattedString(Math.round(a)) + \" / \" + Utils.secondsToFormattedString(Math.round(b)));\n        },\n\n        _setBuffer: function(){\n            var buffer = this.audio.buffered.length ? Math.round(Math.floor(this.audio.buffered.end(0)) / Math.floor(this.audio.duration) * 100) : 0;\n            Metro.getPlugin(this.stream, 'slider').buff(buffer);\n        },\n\n        _setVolume: function(){\n            var audio = this.audio, player = this.player, o = this.options;\n\n            var volumeButton = player.find(\".mute\");\n            var volume = audio.volume * 100;\n            if (volume > 1 && volume < 30) {\n                volumeButton.html(o.volumeLowIcon);\n            } else if (volume >= 30 && volume < 60) {\n                volumeButton.html(o.volumeMediumIcon);\n            } else if (volume >= 60 && volume <= 100) {\n                volumeButton.html(o.volumeHighIcon);\n            } else {\n                volumeButton.html(o.muteIcon);\n            }\n        },\n\n        play: function(src){\n            if (src !== undefined) {\n                this._setSource(src);\n            }\n\n            if (this.element.attr(\"src\") === undefined && this.element.find(\"source\").length === 0) {\n                return ;\n            }\n\n            this.audio.play();\n        },\n\n        pause: function(){\n            this.audio.pause();\n        },\n\n        resume: function(){\n            if (this.audio.paused) {\n                this.play();\n            }\n        },\n\n        stop: function(){\n            this.audio.pause();\n            this.audio.currentTime = 0;\n            Metro.getPlugin(this.stream, 'slider').val(0);\n        },\n\n        setVolume: function(v){\n            if (v === undefined) {\n                return this.audio.volume;\n            }\n\n            if (v > 1) {\n                v /= 100;\n            }\n\n            this.audio.volume = v;\n            Metro.getPlugin(this.volume, 'slider').val(v*100);\n        },\n\n        loop: function(){\n            this._toggleLoop();\n        },\n\n        mute: function(){\n            this._toggleMute();\n        },\n\n        changeSource: function(){\n            var src = JSON.parse(this.element.attr('data-src'));\n            this.play(src);\n        },\n\n        changeVolume: function(){\n            var volume = this.element.attr(\"data-volume\");\n            this.setVolume(volume);\n        },\n\n        changeAttribute: function(attributeName){\n            switch (attributeName) {\n                case \"data-src\": this.changeSource(); break;\n                case \"data-volume\": this.changeVolume(); break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element, player = this.player;\n\n            element.off(\"all\");\n            player.off(\"all\");\n\n            Metro.getPlugin(this.stream, \"slider\").destroy();\n            Metro.getPlugin(this.volume, \"slider\").destroy();\n\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var BottomSheetDefaultConfig = {\n        bottomsheetDeferred: 0,\n        mode: \"list\",\n        toggle: null,\n        onOpen: Metro.noop,\n        onClose: Metro.noop,\n        onBottomSheetCreate: Metro.noop\n    };\n\n    Metro.bottomSheetSetup = function(options){\n        BottomSheetDefaultConfig = $.extend({}, BottomSheetDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroBottomSheetSetup\"] !== undefined) {\n        Metro.bottomSheetSetup(window[\"metroBottomSheetSetup\"]);\n    }\n\n    Metro.Component('bottom-sheet', {\n        init: function( options, elem ) {\n            this._super(elem, options, BottomSheetDefaultConfig, {\n                toggle: null\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"bottom-sheet-create\", {\n                element: element\n            })\n        },\n\n        _createStructure: function(){\n            var element = this.element, o = this.options;\n\n            element\n                .addClass(\"bottom-sheet\")\n                .addClass(o.mode+\"-list\");\n\n            if (Utils.isValue(o.toggle) && $(o.toggle).length > 0) {\n                this.toggle = $(o.toggle);\n            }\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element;\n\n            if (Utils.isValue(this.toggle)) {\n                this.toggle.on(Metro.events.click, function(){\n                    that.toggle();\n                });\n            }\n\n            element.on(Metro.events.click, \"li\", function(){\n                that.close();\n            });\n        },\n\n        isOpen: function(){\n            return this.element.hasClass(\"opened\");\n        },\n\n        open: function(mode){\n            var element = this.element;\n\n            if (Utils.isValue(mode)) {\n                element.removeClass(\"list-style grid-style\").addClass(mode+\"-style\");\n            }\n\n            this.element.addClass(\"opened\");\n\n            this._fireEvent(\"open\", {\n                element: element\n            })\n        },\n\n        close: function(){\n            var element = this.element;\n\n            element.removeClass(\"opened\");\n\n            this._fireEvent(\"close\", {\n                element: element\n            })\n        },\n\n        toggle: function(mode){\n            if (this.isOpen()) {\n                this.close();\n            } else {\n                this.open(mode);\n            }\n        },\n\n        /* eslint-disable-next-line */\n        changeAttribute: function(attributeName){\n        },\n\n        destroy: function(){\n            var element = this.element;\n\n            if (Utils.isValue(this.toggle)) {\n                this.toggle.off(Metro.events.click);\n            }\n\n            element.off(Metro.events.click, \"li\");\n            return element;\n        }\n    });\n\n    Metro['bottomsheet'] = {\n        isBottomSheet: function(el){\n            return Utils.isMetroObject(el, \"bottom-sheet\");\n        },\n\n        open: function(el, as){\n            if (!this.isBottomSheet(el)) {\n                return false;\n            }\n            Metro.getPlugin(el, \"bottom-sheet\").open(as);\n        },\n\n        close: function(el){\n            if (!this.isBottomSheet(el)) {\n                return false;\n            }\n            Metro.getPlugin(el, \"bottom-sheet\").close();\n        },\n\n        toggle: function(el, as){\n            if (!this.isBottomSheet(el)) {\n                return false;\n            }\n            if (this.isOpen(el)) {\n                this.close(el);\n            } else {\n                this.open(el, as);\n            }\n        },\n\n        isOpen: function(el){\n            if (!this.isBottomSheet(el)) {\n                return false;\n            }\n            return Metro.getPlugin(el, \"bottom-sheet\").isOpen();\n        }\n    };\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var ButtonGroupDefaultConfig = {\n        buttongroupDeferred: 0,\n        targets: \"button\",\n        clsActive: \"\",\n        requiredButton: false,\n        mode: Metro.groupMode.ONE,\n        onButtonClick: Metro.noop,\n        onButtonGroupCreate: Metro.noop\n    };\n\n    Metro.buttonGroupSetup = function(options){\n        ButtonGroupDefaultConfig = $.extend({}, ButtonGroupDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroButtonGroupSetup\"] !== undefined) {\n        Metro.buttonGroupSetup(window[\"metroButtonGroupSetup\"]);\n    }\n\n    Metro.Component('button-group', {\n        init: function( options, elem ) {\n            this._super(elem, options, ButtonGroupDefaultConfig, {\n                active: null,\n                id: Utils.elementId(\"button-group\")\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this._createGroup();\n            this._createEvents();\n\n            this._fireEvent(\"button-group-create\", {\n                element: element\n            })\n        },\n\n        _createGroup: function(){\n            var element = this.element, o = this.options;\n            var buttons, buttons_active;\n\n            element.addClass(\"button-group\");\n\n            buttons = element.find( o.targets );\n            buttons_active = element.find( \".active\" );\n\n            if (o.mode === Metro.groupMode.ONE && buttons_active.length === 0 && o.requiredButton === true) {\n                $(buttons[0]).addClass(\"active\");\n            }\n\n            if (o.mode === Metro.groupMode.ONE && buttons_active.length > 1) {\n                buttons.removeClass(\"active\").removeClass(o.clsActive);\n                $(buttons[0]).addClass(\"active\");\n            }\n\n            element\n                .find( \".active\" )\n                .addClass(\"js-active\")\n                .addClass(o.clsActive);\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n\n            element.on(Metro.events.click, o.targets, function(){\n                var el = $(this);\n\n                that._fireEvent(\"button-click\", {\n                    button: this\n                })\n\n                if (o.mode === Metro.groupMode.ONE && el.hasClass(\"active\")) {\n                    return ;\n                }\n\n                if (o.mode === Metro.groupMode.ONE) {\n                    element.find(o.targets).removeClass(o.clsActive).removeClass(\"active js-active\");\n                    el.addClass(\"active\").addClass(o.clsActive).addClass(\"js-active\");\n                } else {\n                    el.toggleClass(\"active\").toggleClass(o.clsActive).toggleClass(\"js-active\");\n                }\n\n            });\n        },\n\n        /* eslint-disable-next-line */\n        changeAttribute: function(attributeName){\n        },\n\n        destroy: function(){\n            var element = this.element, o = this.options;\n            element.off(Metro.events.click, o.targets);\n            return element;\n        }\n\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var CalendarDefaultConfig = {\n        showGhost: false,\n        events: null,\n        startContent: \"days\",\n        showTime: false,\n        initialTime: null,\n        initialHours: null,\n        initialMinutes: null,\n        labelTimeHours: null,\n        labelTimeMinutes: null,\n\n        animationContent: true,\n        animationSpeed: 10,\n\n        calendarDeferred: 0,\n        dayBorder: false,\n        excludeDay: null,\n        prevMonthIcon: \"<span class='default-icon-chevron-left'></span>\",\n        nextMonthIcon: \"<span class='default-icon-chevron-right'></span>\",\n        prevYearIcon: \"<span class='default-icon-chevron-left'></span>\",\n        nextYearIcon: \"<span class='default-icon-chevron-right'></span>\",\n        compact: false,\n        wide: false,\n        widePoint: null,\n        pickerMode: false,\n        show: null,\n        locale: METRO_LOCALE,\n        weekStart: METRO_WEEK_START,\n        outside: true,\n        buttons: 'cancel, today, clear, done',\n        yearsBefore: 100,\n        yearsAfter: 100,\n        headerFormat: \"dddd, MMM DD\",\n        showHeader: true,\n        showFooter: true,\n        showWeekNumber: false,\n\n        isDialog: false,\n        ripple: false,\n        rippleColor: \"#cccccc\",\n        exclude: null,\n        preset: null,\n        minDate: null,\n        maxDate: null,\n        weekDayClick: false,\n        weekNumberClick: false,\n        multiSelect: false,\n        special: null,\n        format: METRO_DATE_FORMAT,\n        inputFormat: null,\n\n        clsCalendar: \"\",\n        clsCalendarHeader: \"\",\n        clsCalendarContent: \"\",\n        clsCalendarFooter: \"\",\n        clsCalendarMonths: \"\",\n        clsCalendarYears: \"\",\n        clsToday: \"\",\n        clsSelected: \"\",\n        clsExcluded: \"\",\n        clsCancelButton: \"\",\n        clsTodayButton: \"\",\n        clsClearButton: \"\",\n        clsDoneButton: \"\",\n        clsEventCounter: \"\",\n        clsWeekend: \"\",\n        clsCurrentWeek: \"\",\n        clsCalendarTime: \"\",\n        clsTime: \"\",\n        clsTimeHours: \"\",\n        clsTimeMinutes: \"\",\n        clsTimeButton: \"\",\n        clsTimeButtonPlus: \"\",\n        clsTimeButtonMinus: \"\",\n        clsSpecial: \"\",\n        clsEvents: \"\",\n        clsEvent: \"\",\n\n        onCancel: Metro.noop,\n        onToday: Metro.noop,\n        onClear: Metro.noop,\n        onDone: Metro.noop,\n        onDayClick: Metro.noop,\n        onDrawDay: Metro.noop,\n        onDrawMonth: Metro.noop,\n        onDrawYear: Metro.noop,\n        onWeekDayClick: Metro.noop,\n        onWeekNumberClick: Metro.noop,\n        onMonthChange: Metro.noop,\n        onYearChange: Metro.noop,\n        onTimeChange: Metro.noop,\n        onHoursChange: Metro.noop,\n        onMinutesChange: Metro.noop,\n        onCalendarCreate: Metro.noop\n    };\n\n    Metro.calendarSetup = function (options) {\n        CalendarDefaultConfig = $.extend({}, CalendarDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroCalendarSetup\"] !== undefined) {\n        Metro.calendarSetup(window[\"metroCalendarSetup\"]);\n    }\n\n    Metro.Component('calendar', {\n        init: function( options, elem ) {\n\n            var now = datetime().align(\"day\");\n\n            this._super(elem, options, CalendarDefaultConfig, {\n                today: now,\n                show: now,\n                current: {\n                    year: now.year(),\n                    month: now.month(),\n                    day: now.day()\n                },\n                preset: [],\n                selected: [],\n                exclude: [],\n                special: [],\n                excludeDay: [],\n                events: [],\n                min: null,\n                max: null,\n                locale: null,\n                minYear: null,\n                maxYear: null,\n                id: Utils.elementId(\"calendar\"),\n                time: [datetime().hour(), datetime().minute()],\n                content: \"days\",\n                yearDistance: 11,\n                yearGroupStart: now.year()\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n\n            this.content = o.startContent;\n            this.minYear = this.current.year - this.options.yearsBefore;\n            this.maxYear = this.current.year + this.options.yearsAfter;\n\n            element.html(\"\").addClass(\"calendar \" + (o.compact === true ? \"compact\" : \"\")).addClass(o.clsCalendar);\n\n            if (Utils.isValue(o.initialTime)) {\n                this.time = o.initialTime.split(\":\");\n            }\n\n            if (Utils.isValue(o.initialHours) && Utils.between(o.initialHours, 0, 23, true)) {\n                this.time[0] = parseInt(o.initialHours);\n            }\n\n            if (Utils.isValue(o.initialMinutes) && Utils.between(o.initialMinutes, 0, 59, true)) {\n                this.time[1] = parseInt(o.initialMinutes);\n            }\n\n            if (o.dayBorder === true) {\n                element.addClass(\"day-border\");\n            }\n\n            if (Utils.isValue(o.excludeDay)) {\n                this.excludeDay = (\"\"+o.excludeDay).toArray(\",\", \"int\");\n            }\n\n            if (Utils.isValue(o.preset)) {\n                this._dates2array(o.preset, 'selected');\n            }\n\n            if (Utils.isValue(o.exclude)) {\n                this._dates2array(o.exclude, 'exclude');\n            }\n\n            if (Utils.isValue(o.special)) {\n                this._dates2array(o.special, 'special');\n            }\n\n            if (Utils.isValue(o.events)) {\n                this._dates2array(o.events, 'events');\n            }\n\n            if (o.buttons !== false) {\n                if (Array.isArray(o.buttons) === false) {\n                    o.buttons = o.buttons.split(\",\").map(function(item){\n                        return item.trim();\n                    });\n                }\n            }\n\n            this.min = o.minDate ? (o.inputFormat ? Datetime.from(o.minDate, o.inputFormat) : datetime(o.minDate)).align(\"day\") : null;\n            this.max = o.maxDate ? (o.inputFormat ? Datetime.from(o.maxDate, o.inputFormat) : datetime(o.maxDate)).align(\"day\") : null;\n\n            if (o.show) {\n                this.show = (!o.show ? datetime() : o.inputFormat ? Datetime.from(o.show, o.inputFormat) : datetime(o.show)).align(\"day\");\n                this.current = {\n                    year: this.show.year(),\n                    month: this.show.month(),\n                    day: this.show.day()\n                }\n            }\n\n            this.locale = Metro.locales[o.locale] !== undefined ? Metro.locales[o.locale] : Metro.locales[\"en-US\"];\n\n            this._drawCalendar();\n            this._createEvents();\n\n            if (o.wide === true) {\n                element.addClass(\"calendar-wide\");\n            } else {\n                if (!Utils.isNull(o.widePoint) && Utils.mediaExist(o.widePoint)) {\n                    element.addClass(\"calendar-wide\");\n                }\n            }\n\n\n            if (o.ripple === true && Utils.isFunc(element.ripple) !== false) {\n                element.ripple({\n                    rippleTarget: \".button, .prev-month, .next-month, .prev-year, .next-year, .day\",\n                    rippleColor: this.options.rippleColor\n                });\n            }\n\n            this._fireEvent(\"calendar-create\");\n        },\n\n        _dates2array: function(val, category){\n            var that = this, o = this.options;\n            var dates;\n\n            if (Utils.isNull(val)) {\n                return ;\n            }\n\n            dates = typeof val === 'string' ? val.toArray() : Array.isArray(val) ? val : [];\n\n            $.each(dates, function(){\n                var _d, date = this;\n\n                try {\n                    _d = (o.inputFormat ? Datetime.from(date, o.inputFormat) : datetime(date)).align('day').format('YYYY-MM-DD');\n                } catch (e) {\n                    return;\n                }\n\n                that[category].push(_d);\n            });\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n\n            $(window).on(Metro.events.resize, function(){\n                if (o.wide !== true) {\n                    if (!Utils.isNull(o.widePoint) && Utils.mediaExist(o.widePoint)) {\n                        element.addClass(\"calendar-wide\");\n                    } else {\n                        element.removeClass(\"calendar-wide\");\n                    }\n                }\n            }, {ns: this.id});\n\n            element.on(Metro.events.click, \".prev-year-group, .next-year-group\", function(){\n                if ($(this).hasClass(\"prev-year-group\")) {\n                    that.yearGroupStart -= that.yearDistance;\n                } else {\n                    that.yearGroupStart += that.yearDistance;\n                }\n                that._drawContent();\n            });\n\n            element.on(Metro.events.click, \".prev-month, .next-month, .prev-year, .next-year\", function(){\n                var new_date, el = $(this);\n\n                if (el.hasClass(\"prev-month\")) {\n                    new_date = datetime(that.current.year, that.current.month - 1, 1);\n                    if (new_date.year() < that.minYear) {\n                        return ;\n                    }\n                }\n                if (el.hasClass(\"next-month\")) {\n                    new_date = datetime(that.current.year, that.current.month + 1, 1);\n                    if (new_date.year() > that.maxYear) {\n                        return ;\n                    }\n                }\n                if (el.hasClass(\"prev-year\")) {\n                    new_date = datetime(that.current.year - 1, that.current.month, 1);\n                    if (new_date.year() < that.minYear) {\n                        return ;\n                    }\n                }\n                if (el.hasClass(\"next-year\")) {\n                    new_date = datetime(that.current.year + 1, that.current.month, 1);\n                    if (new_date.year() > that.maxYear) {\n                        return ;\n                    }\n                }\n\n                that.current = {\n                    year: new_date.year(),\n                    month: new_date.month(),\n                    day: new_date.day()\n                };\n\n                setTimeout(function(){\n                    that._drawContent();\n                    if (el.hasClass(\"prev-month\") || el.hasClass(\"next-month\")) {\n                        that._fireEvent(\"month-change\", {\n                            current: that.current\n                        });\n                    }\n                    if (el.hasClass(\"prev-year\") || el.hasClass(\"next-year\")) {\n                        that._fireEvent(\"year-change\", {\n                            current: that.current\n                        });\n                    }\n                }, o.ripple ? 300 : 1);\n            });\n\n            element.on(Metro.events.click, \".button.today\", function(){\n                that.toDay();\n                that._fireEvent(\"today\", {\n                    today: that.today.val(),\n                    time: that.time\n                });\n            });\n\n            element.on(Metro.events.click, \".button.clear\", function(){\n                var date = datetime();\n\n                that.selected = [];\n                that.time = [date.hour(), date.minute()];\n                that.yearGroupStart = date.year();\n                that._drawContent();\n                that._fireEvent(\"clear\");\n            });\n\n            element.on(Metro.events.click, \".button.cancel\", function(){\n                that._drawContent();\n                that._fireEvent(\"cancel\");\n            });\n\n            element.on(Metro.events.click, \".button.done\", function(){\n                that._drawContent();\n                that._fireEvent(\"done\", {\n                    selected: that.selected,\n                    time: that.time\n                });\n            });\n\n            if (o.weekDayClick === true) {\n                element.on(Metro.events.click, \".week-days .week-day\", function (e) {\n                    var day, index, days, ii = [];\n\n                    day = $(this);\n                    index = day.index();\n\n                    for (var i = 0; i < 7; i++) {\n                        ii.push(index);\n                        index += o.showWeekNumber ? 8 : 7;\n                    }\n\n                    if (o.multiSelect === true) {\n                        days = element.find(\".day\").filter(function(el){\n                            var $el = $(el);\n                            return ii.indexOf($el.index()) > -1 && !$el.hasClass(\"outside disabled excluded\");\n                        })\n\n                        $.each(days, function () {\n                            var $el = $(this);\n                            var day = $el.data('day');\n\n                            if (that.selected.indexOf(day) === -1) {\n                                that.selected.push(day);\n                                $el.addClass(\"selected\").addClass(o.clsSelected);\n                            } else {\n                                $el.removeClass(\"selected\").removeClass(o.clsSelected);\n                                Utils.arrayDelete(that.selected, day);\n                            }\n                        });\n                    }\n\n                    that._fireEvent(\"week-day-click\", {\n                        selected: that.selected,\n                        day: day[0]\n                    });\n\n                    e.preventDefault();\n                    e.stopPropagation();\n                });\n            }\n\n            if (o.weekNumberClick) {\n                element.on(Metro.events.click, \".week-number\", function (e) {\n                    var $el, wn, index, days;\n\n                    $el = $(this);\n                    wn = $el.text();\n                    index = $el.index();\n\n                    if (wn === \"#\") {\n                        return ;\n                    }\n\n                    if (o.multiSelect === true) {\n                        days = element.find(\".day\").filter(function(el){\n                            var $el = $(el);\n                            var elIndex = $el.index();\n                            return Utils.between(elIndex, index, index + 8, false) && !$el.hasClass(\"outside disabled excluded\");\n                        })\n\n                        $.each(days, function () {\n                            var $el = $(this);\n                            var day = $el.data('day');\n\n                            if (that.selected.indexOf(day) === -1) {\n                                that.selected.push(day);\n                                $el.addClass(\"selected\").addClass(o.clsSelected);\n                            } else {\n                                $el.removeClass(\"selected\").removeClass(o.clsSelected);\n                                Utils.arrayDelete(that.selected, day);\n                            }\n                        });\n                    }\n\n                    that._fireEvent(\"week-number-click\", {\n                        selected: that.selected,\n                        num: wn,\n                        numElement: $el[0]\n                    });\n\n                    e.preventDefault();\n                    e.stopPropagation();\n                });\n            }\n\n            element.on(Metro.events.click, \".day\", function(e){\n                var day = $(this);\n                var index, date;\n\n                date = day.data('day');\n                index = that.selected.indexOf(date);\n\n                if (day.hasClass(\"outside\")) {\n                    date = datetime(date);\n                    that.current = {\n                        year: date.year(),\n                        month: date.month(),\n                        day: date.day()\n                    };\n                    that._drawContent();\n\n                    that._fireEvent(\"month-change\", {\n                        current: that.current\n                    });\n\n                    return ;\n                }\n\n                if (!day.hasClass(\"disabled\")) {\n\n                    if (o.pickerMode === true) {\n                        that.selected = [date];\n                        that.today = datetime(date);\n                        that.current.year = that.today.year();\n                        that.current.month = that.today.month();\n                        that.current.day = that.today.day();\n                        that._drawHeader();\n                        that._drawContent();\n                    } else {\n                        if (index === -1) {\n                            if (o.multiSelect === false) {\n                                element.find(\".day\").removeClass(\"selected\").removeClass(o.clsSelected);\n                                that.selected = [];\n                            }\n                            that.selected.push(date);\n                            day.addClass(\"selected\").addClass(o.clsSelected);\n                        } else {\n                            day.removeClass(\"selected\").removeClass(o.clsSelected);\n                            Utils.arrayDelete(that.selected, date);\n                        }\n                    }\n\n                }\n\n                that._fireEvent(\"day-click\", {\n                    selected: that.selected,\n                    day: day[0],\n                    time: that.time\n                });\n\n                e.preventDefault();\n                e.stopPropagation();\n            });\n\n            element.on(Metro.events.click, \".curr-month\", function(e){\n                that.content = \"months\";\n                that._drawContent();\n\n                e.preventDefault();\n                e.stopPropagation();\n            });\n\n            element.on(Metro.events.click, \".month\", function(e){\n                that.current.month = parseInt($(this).attr(\"data-month\"));\n                that.content = \"days\";\n                that._drawContent();\n\n                that._fireEvent(\"month-change\", {\n                    current: that.current\n                });\n\n                e.preventDefault();\n                e.stopPropagation();\n            });\n\n            element.on(Metro.events.click, \".curr-year\", function(e){\n                if (that.content === \"years\") {\n                    return ;\n                }\n                that.content = \"years\";\n                that._drawContent();\n\n                e.preventDefault();\n                e.stopPropagation();\n            });\n\n            element.on(Metro.events.click, \".year\", function(e){\n                that.current.year = parseInt($(this).attr(\"data-year\"));\n                that.yearGroupStart = that.current.year;\n                that.content = \"months\";\n                that._drawContent();\n\n                that._fireEvent(\"year-change\", {\n                    current: that.current\n                });\n\n                e.preventDefault();\n                e.stopPropagation();\n            });\n        },\n\n        _drawHeader: function(){\n            var element = this.element, o = this.options;\n            var header = element.find(\".calendar-header\");\n\n            if (header.length === 0) {\n                header = $(\"<div>\").addClass(\"calendar-header\").addClass(o.clsCalendarHeader).appendTo(element);\n            }\n\n            header.html(\"\");\n\n            $(\"<div>\").addClass(\"header-year\").html(this.today.year()).appendTo(header);\n            $(\"<div>\").addClass(\"header-day\").html(this.today.format(o.headerFormat, o.locale)).appendTo(header);\n\n            if (o.showHeader === false) {\n                header.hide();\n            }\n        },\n\n        _drawFooter: function(){\n            var element = this.element, o = this.options;\n            var buttons_locale = this.locale['buttons'];\n            var footer = element.find(\".calendar-footer\");\n\n            if (o.buttons === false) {\n                return ;\n            }\n\n            if (footer.length === 0) {\n                footer = $(\"<div>\").addClass(\"calendar-footer\").addClass(o.clsCalendarFooter).appendTo(element);\n            }\n\n            footer.html(\"\");\n\n            $.each(o.buttons, function(){\n                var button = $(\"<button>\").attr(\"type\", \"button\").addClass(\"button \" + this + \" \" + o['cls'+Cake.capitalize(this)+'Button']).html(buttons_locale[this]).appendTo(footer);\n                if (this === 'cancel' || this === 'done') {\n                    button.addClass(\"js-dialog-close\");\n                }\n            });\n\n            if (o.showFooter === false) {\n                footer.hide();\n            }\n        },\n\n        _drawTime: function(){\n            var that = this, element = this.element, o = this.options;\n            var calendarContent = element.find(\".calendar-content\");\n            var time = $(\"<div>\").addClass(\"calendar-time\").addClass(o.clsCalendarTime).appendTo(calendarContent);\n            var inner, hours, minutes, row;\n            var h = \"\"+this.time[0];\n            var m = \"\"+this.time[1];\n            var locale = this.locale['calendar']['time'];\n\n            var onChange = function(val){\n                var value = parseInt(val);\n                if ($(this).attr(\"data-time-part\") === \"hours\") {\n                    that.time[0] = value;\n                    that._fireEvent(\"hours-change\", {\n                        time: that.time,\n                        hours: value\n                    });\n                } else {\n                    that.time[1] = value;\n                    that._fireEvent(\"minutes-change\", {\n                        time: that.time,\n                        minutes: value\n                    });\n                }\n\n                that._fireEvent(\"time-change\", {\n                    time: that.time\n                });\n            }\n\n            time.append( inner = $(\"<div>\").addClass(\"calendar-time__inner\") );\n\n            inner.append( row = $(\"<div>\").addClass(\"calendar-time__inner-row\") );\n            row.append( $(\"<div>\").addClass(\"calendar-time__inner-cell\").append( $(\"<span>\").html(o.labelTimeHours || locale['hours']) ));\n            row.append( $(\"<div>\").addClass(\"calendar-time__inner-cell\").append( $(\"<span>\").html(o.labelTimeMinutes || locale['minutes']) ));\n\n            time.append( inner = $(\"<div>\").addClass(\"calendar-time__inner spinners\").addClass(o.clsTime) );\n            inner.append( hours = $(\"<input type='text' data-cls-spinner-input='\"+o.clsTimeHours+\"' data-time-part='hours' data-buttons-position='right' data-min-value='0' data-max-value='23'>\").addClass(\"hours\").addClass(o.compact ? \"input-small\" : \"input-normal\") );\n            inner.append( minutes = $(\"<input type='text' data-cls-spinner-input='\"+o.clsTimeMinutes+\"' data-time-part='minutes' data-buttons-position='right' data-min-value='0' data-max-value='59'>\").addClass(\"minutes\").addClass(o.compact ? \"input-small\" : \"input-normal\") );\n\n            h = Cake.lpad(h, 2, \"0\");\n            m = Cake.lpad(m, 2, \"0\");\n\n            hours.val(h);\n            minutes.val(m);\n\n            Metro.makePlugin(inner.find(\"input[type=text]\"), \"spinner\", {\n                onChange: onChange,\n                clsSpinnerButton: o.clsTimeButton,\n                clsSpinnerButtonPlus: o.clsTimeButtonPlus,\n                clsSpinnerButtonMinus: o.clsTimeButtonMinus\n            });\n\n            if (o.showTime === false) {\n                time.hide();\n            }\n        },\n\n        _drawContentDays: function(){\n            var that = this, element = this.element, o = this.options;\n            var content = element.find(\".calendar-content\"), toolbar, weekDays, calendarDays;\n            var calendar = datetime(this.current.year, this.current.month, this.current.day).useLocale(o.locale).calendar(o.weekStart);\n            var locale = Datetime.getLocale(o.locale);\n            var showDay = this.show.format(\"YYYY-MM-DD\");\n            var now = datetime();\n\n            if (content.length === 0) {\n                content = $(\"<div>\").addClass(\"calendar-content\").addClass(o.clsCalendarContent).appendTo(element);\n            }\n\n            if (o.showWeekNumber) {\n                content.addClass(\"-week-numbers\");\n            }\n\n            content.empty();\n\n            toolbar = $(\"<div>\").addClass(\"calendar-toolbar\").appendTo(content);\n\n            $(\"<span>\").addClass(\"prev-month\").html(o.prevMonthIcon).appendTo(toolbar);\n            $(\"<span>\").addClass(\"curr-month\").html(locale['months'][this.current.month]).appendTo(toolbar);\n            $(\"<span>\").addClass(\"next-month\").html(o.nextMonthIcon).appendTo(toolbar);\n\n            $(\"<span>\").addClass(\"prev-year\").html(o.prevYearIcon).appendTo(toolbar);\n            $(\"<span>\").addClass(\"curr-year\").html(this.current.year).appendTo(toolbar);\n            $(\"<span>\").addClass(\"next-year\").html(o.nextYearIcon).appendTo(toolbar);\n\n            weekDays = $(\"<div>\").addClass(\"week-days\").appendTo(content);\n            if (o.showWeekNumber) {\n                $(\"<span>\").addClass(\"week-number\").html(\"#\").appendTo(weekDays);\n            }\n            $.each(calendar['weekdays'], function(){\n                $(\"<span>\").addClass(\"week-day\").html(this).appendTo(weekDays);\n            });\n\n            calendarDays = $(\"<div>\").addClass(\"days\").appendTo(content);\n\n            $.each(calendar['days'], function(i){\n                var day = this;\n                var date = datetime(day).align('day');\n                var outsideDate = date.month() !== that.current.month;\n\n                if (o.showWeekNumber && i % 7 === 0) {\n                    $(\"<span>\").addClass(\"week-number\").html(date.weekNumber(o.weekStart)).appendTo(calendarDays);\n                }\n\n                var cell = $(\"<span>\").addClass(\"day\").html(date.day()).appendTo(calendarDays);\n\n                cell.data('day', day);\n\n                if (day === showDay) {\n                    cell.addClass(\"showed\");\n                }\n\n                if (outsideDate) {\n                    cell.addClass(\"outside\");\n                    if (!o.outside) {\n                        cell.empty();\n                    }\n                }\n\n                if (day === calendar['today']) {\n                    cell.addClass(\"today\")\n                }\n\n                if (o.showGhost && date.day() === now.day()) {\n                    cell.addClass(\"coincidental\");\n                }\n\n                if (that.special.length) {\n                    if (that.special.indexOf(day) === -1) {\n                        cell.addClass(\"disabled excluded\").addClass(o.clsExcluded);\n                    } else {\n                        cell.addClass(o.clsSpecial);\n                    }\n                } else {\n                    if (that.selected.indexOf(day) > -1) {\n                        cell.addClass(\"selected\").addClass(o.clsSelected);\n                    }\n                    if (that.exclude.indexOf(day) > -1) {\n                        cell.addClass(\"disabled excluded\").addClass(o.clsExcluded);\n                    }\n                    if (that.min && date.older(that.min)) {\n                        cell.addClass(\"disabled excluded\").addClass(o.clsExcluded);\n                    }\n                    if (that.max && date.younger(that.max)) {\n                        cell.addClass(\"disabled excluded\").addClass(o.clsExcluded);\n                    }\n                }\n\n                if (calendar['weekends'].indexOf(day) !== -1) {\n                    cell.addClass(o.clsWeekend);\n                }\n\n                if (calendar['week'].indexOf(day) !== -1) {\n                    cell.addClass(o.clsCurrentWeek);\n                }\n\n                if (that.events.length) {\n                    var events = $(\"<div>\").addClass(\"events\").addClass(o.clsEvents).appendTo(cell);\n                    $.each(that.events, function(){\n                        if (this === day) {\n                            var event = $(\"<div>\").addClass(\"event\").addClass(o.clsEvent).appendTo(events);\n                            if (!o.clsEvent) {\n                                event.css({\n                                    backgroundColor: Metro.colors.random()\n                                })\n                            }\n                        }\n                    })\n                }\n\n                if (o.animationContent) {\n                    cell.addClass(\"to-animate\");\n                }\n\n                that._fireEvent(\"draw-day\", {\n                    date: date.val(),\n                    day: date.day(),\n                    month: date.month(),\n                    year: date.year(),\n                    cell: cell[0]\n                });\n            });\n\n            this._drawTime();\n            this._animateContent(\".day\");\n        },\n\n        _drawContentMonths: function(){\n            var element = this.element, o = this.options;\n            var content = element.find(\".calendar-content\");\n            var locale = this.locale['calendar']['months'];\n            var toolbar, months, month, yearToday = datetime().year(), monthToday = datetime().month();\n\n            if (content.length === 0) {\n                content = $(\"<div>\").addClass(\"calendar-content\").addClass(o.clsCalendarContent).appendTo(element);\n            }\n\n            content.clear();\n\n            toolbar = $(\"<div>\").addClass(\"calendar-toolbar\").appendTo(content);\n\n            /**\n             * Calendar toolbar\n             */\n\n            $(\"<span>\").addClass(\"prev-year\").html(o.prevYearIcon).appendTo(toolbar);\n            $(\"<span>\").addClass(\"curr-year\").html(this.current.year).appendTo(toolbar);\n            $(\"<span>\").addClass(\"next-year\").html(o.nextYearIcon).appendTo(toolbar);\n\n            content.append( months = $(\"<div>\").addClass(\"months\") );\n\n            for(var i = 12; i < 24; i++) {\n                months.append(\n                    month = $(\"<div>\")\n                        .attr(\"data-month\", i - 12)\n                        .addClass(\"month\")\n                        .addClass(i - 12 === monthToday && this.current.year === yearToday ? \"today\" : \"\")\n                        .html(locale[i])\n                );\n\n                if (o.animationContent) {\n                    month.addClass(\"to-animate\");\n                }\n\n                this._fireEvent(\"draw-month\", {\n                    month: i - 12,\n                    year: this.current.year,\n                    cell: month[0]\n                });\n            }\n\n            this._animateContent(\".months .month\");\n        },\n\n        _drawContentYears: function(){\n            var element = this.element, o = this.options;\n            var content = element.find(\".calendar-content\");\n            var toolbar, years, year;\n\n            if (content.length === 0) {\n                content = $(\"<div>\").addClass(\"calendar-content\").addClass(o.clsCalendarContent).appendTo(element);\n            }\n\n            content.clear();\n\n            toolbar = $(\"<div>\").addClass(\"calendar-toolbar\").appendTo(content);\n\n            /**\n             * Calendar toolbar\n             */\n\n            $(\"<span>\").addClass(\"prev-year-group\").html(o.prevYearIcon).appendTo(toolbar);\n            $(\"<span>\").addClass(\"curr-year\").html(this.yearGroupStart + \" - \" + (this.yearGroupStart + this.yearDistance)).appendTo(toolbar);\n            $(\"<span>\").addClass(\"next-year-group\").html(o.nextYearIcon).appendTo(toolbar);\n\n            content.append( years = $(\"<div>\").addClass(\"years\") );\n\n            for(var i = this.yearGroupStart; i <= this.yearGroupStart + this.yearDistance; i++) {\n                years.append(\n                    year = $(\"<div>\")\n                        .attr(\"data-year\", i)\n                        .addClass(\"year\")\n                        .addClass(i === this.current.year ? \"today\" : \"\")\n                        .html(i)\n                );\n\n                if (o.animationContent) {\n                    year.addClass(\"to-animate\");\n                }\n\n                if (i < o.minYear || i > o.maxYear) {\n                    year.addClass(\"disabled\");\n                }\n\n                this._fireEvent(\"draw-year\", {\n                    year: i,\n                    cell: year[0]\n                });\n            }\n\n            this._animateContent(\".years .year\");\n        },\n\n        _drawContent: function(){\n            switch (this.content) {\n                case \"years\": this._drawContentYears(); break;\n                case \"months\": this._drawContentMonths(); break;\n                default: this._drawContentDays();\n            }\n        },\n\n        _drawCalendar: function(){\n            var that = this;\n            setTimeout(function(){\n                that.element.html(\"\");\n                that._drawHeader();\n                that._drawContent();\n                that._drawFooter();\n            }, 0);\n        },\n\n        _animateContent: function(target, cls){\n            var element = this.element, o = this.options;\n            var content = element.find(\".calendar-content\");\n\n            cls = cls || \"to-animate\";\n\n            content.find(target).each(function(k){\n                var day = $(this);\n                setTimeout(function(){\n                    day.removeClass(cls);\n                }, o.animationSpeed * k);\n            });\n        },\n\n        getTime: function(asString){\n            var h, m;\n\n            asString = asString || false;\n\n            h = Cake.lpad(this.time[0], 2, \"0\");\n            m = Cake.lpad(this.time[1], 2, \"0\");\n\n            return asString ? h +\":\"+ m : this.time;\n        },\n\n        setTime: function(time){\n            if (Array.isArray(time)) {\n                this.time = time;\n            } else {\n                this.time = time.split(\":\");\n            }\n            this._drawCalendar();\n        },\n\n        getPreset: function(){\n            return this.preset;\n        },\n\n        getSelected: function(){\n            return this.selected;\n        },\n\n        getExcluded: function(){\n            return this.exclude;\n        },\n\n        getToday: function(){\n            return this.today;\n        },\n\n        getCurrent: function(){\n            return this.current;\n        },\n\n        clearSelected: function(){\n            this.selected = [];\n            this._drawContent();\n        },\n\n        toDay: function(){\n            this.today = datetime().align(\"day\");\n            this.current = {\n                year: this.today.year(),\n                month: this.today.month(),\n                day: this.today.day()\n            };\n            this.time = [datetime().hour(), datetime().minute()];\n            this.yearGroupStart = datetime().year();\n            this.content = \"days\";\n            this._drawHeader();\n            this._drawContent();\n        },\n\n        setExclude: function(exclude){\n            var element = this.element, o = this.options;\n            if (Utils.isNull(exclude) && Utils.isNull(element.attr(\"data-exclude\"))) {\n                return ;\n            }\n            o.exclude = !Utils.isNull(exclude) ? exclude : element.attr(\"data-exclude\");\n            this._dates2array(o.exclude, 'exclude');\n            this._drawContent();\n        },\n\n        setPreset: function(preset){\n            var element = this.element, o = this.options;\n            if (Utils.isNull(preset) && Utils.isNull(element.attr(\"data-preset\"))) {\n                return ;\n            }\n\n            o.preset = !Utils.isNull(preset) ? preset : element.attr(\"data-preset\");\n\n            this._dates2array(o.preset, 'selected');\n            this._drawContent();\n        },\n\n        setSpecial: function(special){\n            var element = this.element, o = this.options;\n            if (Utils.isNull(special) && Utils.isNull(element.attr(\"data-special\"))) {\n                return ;\n            }\n            o.special = !Utils.isNull(special) ? special : element.attr(\"data-special\");\n            this._dates2array(o.exclude, 'special');\n            this._drawContent();\n        },\n\n        showDate: function(date){\n            return this.setShow(date);\n        },\n\n        setShow: function(show){\n            var element = this.element, o = this.options;\n            var attr = element.attr(\"data-show\");\n\n            if (!show && !attr) {\n                return ;\n            }\n\n            o.show = show ? show : attr;\n\n            if (!o.show) {\n                this.show = datetime();\n            } else {\n                if (typeof o.show === \"string\" && o.inputFormat) {\n                    this.show = Datetime.from(o.show, o.inputFormat);\n                } else {\n                    this.show = datetime(o.show);\n                }\n            }\n\n            this.show = this.show.align(\"day\");\n\n            this.current = {\n                year: this.show.year(),\n                month: this.show.month(),\n                day: this.show.day()\n            }\n\n            this._drawContent();\n        },\n\n        setMinDate: function(date){\n            var element = this.element, o = this.options;\n            var attr = element.attr(\"data-min-date\");\n\n            if (!date && !attr) {\n                return ;\n            }\n\n            o.minDate = date ? date : attr;\n\n            this.min = o.minDate ? (o.inputFormat ? Datetime.from(o.minDate, o.inputFormat) : datetime(o.minDate)).align(\"day\") : null;\n\n            this._drawContent();\n        },\n\n        setMaxDate: function(date){\n            var element = this.element, o = this.options;\n            var attr = element.attr(\"data-max-date\");\n\n            o.maxDate = date ? date : attr;\n\n            this.max = o.maxDate ? (o.inputFormat ? Datetime.from(o.maxDate, o.inputFormat) : datetime(o.maxDate)).align(\"day\") : null;\n\n            this._drawContent();\n        },\n\n        i18n: function(val){\n            var o = this.options;\n            if (val === undefined) {\n                return o.locale;\n            }\n            if (Metro.locales[val] === undefined) {\n                return false;\n            }\n            o.locale = val;\n            this.locale = Metro.locales[o.locale];\n            this._drawCalendar();\n        },\n\n        changeAttrLocale: function(){\n            var element = this.element;\n            this.i18n(element.attr(\"data-locale\"));\n        },\n\n        changeAttribute: function(attributeName){\n            switch (attributeName) {\n                case 'data-exclude': this.setExclude(); break;\n                case 'data-preset': this.setPreset(); break;\n                case 'data-special': this.setSpecial(); break;\n                case 'data-show': this.setShow(); break;\n                case 'data-min-date': this.setMinDate(); break;\n                case 'data-max-date': this.setMaxDate(); break;\n                case 'data-locale': this.changeAttrLocale(); break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element, o = this.options;\n\n            element.off(Metro.events.click, \".prev-month, .next-month, .prev-year, .next-year\");\n            element.off(Metro.events.click, \".button.today\");\n            element.off(Metro.events.click, \".button.clear\");\n            element.off(Metro.events.click, \".button.cancel\");\n            element.off(Metro.events.click, \".button.done\");\n            element.off(Metro.events.click, \".week-days .day\");\n            element.off(Metro.events.click, \".days-row .day\");\n            element.off(Metro.events.click, \".curr-month\");\n            element.off(Metro.events.click, \".calendar-months li\");\n            element.off(Metro.events.click, \".curr-year\");\n            element.off(Metro.events.click, \".calendar-years li\");\n            element.off(Metro.events.click);\n\n            if (o.ripple === true) {\n                element.data(\"ripple\").destroy();\n            }\n\n            $(window).off(Metro.events.resize, {ns: this.id});\n\n            return element;\n        }\n    });\n\n    $(document).on(Metro.events.click, function(){\n        $('.calendar .calendar-years').each(function(){\n            $(this).removeClass(\"open\");\n        });\n        $('.calendar .calendar-months').each(function(){\n            $(this).removeClass(\"open\");\n        });\n    });\n\n    Metro.defaults.Calendar = CalendarDefaultConfig;\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var CalendarPickerDefaultConfig = {\n        label: \"\",\n        value: '',\n        calendarpickerDeferred: 0,\n        nullValue: true,\n        useNow: false,\n        prepend: \"\",\n        dialogMode: false,\n        dialogPoint: 640,\n        dialogOverlay: true,\n        overlayColor: '#000000',\n        overlayAlpha: .5,\n        locale: METRO_LOCALE,\n        size: \"100%\",\n        format: METRO_DATE_FORMAT,\n        inputFormat: null,\n        clearButton: false,\n        calendarButtonIcon: \"<span class='default-icon-calendar'></span>\",\n        clearButtonIcon: \"<span class='default-icon-cross'></span>\",\n        copyInlineStyles: false,\n        clsPicker: \"\",\n        clsInput: \"\",\n        clsPrepend: \"\",\n        clsLabel: \"\",\n        onDayClick: Metro.noop,\n        onCalendarPickerCreate: Metro.noop,\n        onCalendarShow: Metro.noop,\n        onCalendarHide: Metro.noop,\n        onChange: Metro.noop,\n        onPickerChange: Metro.noop,\n        onMonthChange: Metro.noop,\n        onYearChange: Metro.noop\n    };\n\n    Metro.calendarPickerSetup = function (options) {\n        CalendarPickerDefaultConfig = $.extend({}, CalendarPickerDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroCalendarPickerSetup\"] !== undefined) {\n        Metro.calendarPickerSetup(window[\"metroCalendarPickerSetup\"]);\n    }\n\n    Metro.Component('calendar-picker', {\n        init: function( options, elem ) {\n            this._super(elem, options, $.extend({}, Metro.defaults.Calendar, {\n            }, CalendarPickerDefaultConfig), {\n                value: null,\n                value_date: null,\n                calendar: null,\n                overlay: null,\n                id: Utils.elementId(\"calendar-picker\"),\n                time: [datetime().hour(), datetime().minute()]\n            });\n\n            return this;\n        },\n\n        _create: function(){\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"calendar-picker-create\", {\n                element: this.element\n            });\n        },\n\n        _createStructure: function(){\n            var that = this, element = this.element, o = this.options;\n            var container = $(\"<div>\").addClass(\"input \" + element[0].className + \" calendar-picker\");\n            var buttons = $(\"<div>\").addClass(\"button-group\");\n            var calendarButton, clearButton, cal = $(\"<div>\").addClass(\"drop-shadow\");\n            var curr, _curr, initTime, initHours, initMinutes, elementValue, h, m;\n            var body = $(\"body\");\n\n            element.attr(\"type\", \"text\");\n            element.attr(\"autocomplete\", \"off\");\n            element.attr(\"readonly\", true);\n\n            if (Utils.isValue(o.initialTime)) {\n                this.time = o.initialTime.trim().split(\":\");\n            }\n\n            if (Utils.isValue(o.initialHours)) {\n                this.time[0] = parseInt(o.initialHours);\n            }\n\n            if (Utils.isValue(o.initialHours)) {\n                this.time[1] = parseInt(o.initialMinutes);\n            }\n\n            curr = (\"\"+o.value).trim() !== '' ? o.value : element.val().trim();\n\n            if (!Utils.isValue(curr)) {\n                if (o.useNow) {\n                    this.value = datetime();\n                    this.time = [this.value.hour(), this.value.minute()];\n                }\n            } else {\n                _curr = curr.split(\" \");\n                this.value = (!o.inputFormat ? datetime(_curr[0]) : Datetime.from(_curr[0], o.inputFormat, o.locale)).align(\"day\");\n                if (_curr[1]) {\n                    this.time = _curr[1].trim().split(\":\");\n                }\n            }\n\n            elementValue = !curr && o.nullValue === true ? \"\" : datetime(that.value).format(o.format, o.locale);\n\n            if (o.showTime && this.time && elementValue) {\n                h = Cake.lpad(this.time[0], 2, \"0\");\n                m = Cake.lpad(this.time[1], 2, \"0\");\n                elementValue += \" \" + h + \":\" + m;\n            }\n\n            element.val(elementValue);\n\n            container.insertBefore(element);\n            element.appendTo(container);\n            buttons.appendTo(container);\n            cal.appendTo(o.dialogMode ? body : container);\n\n            if (this.time && this.time.length) {\n                initHours = this.time[0];\n                if (typeof this.time[1] !== \"undefined\")\n                    initMinutes = this.time[1];\n            }\n\n            initTime = o.initialTime;\n\n            if (o.initialHours) {\n                initHours = o.initialHours;\n            }\n\n            if (o.initialHours) {\n                initMinutes = o.initialMinutes;\n            }\n\n            Metro.makePlugin(cal, \"calendar\", {\n                showTime: o.showTime,\n                initialTime: initTime,\n                initialHours: initHours,\n                initialMinutes: initMinutes,\n                clsCalendarTime: o.clsCalendarTime,\n                clsTime: o.clsTime,\n                clsTimeHours: o.clsTimeHours,\n                clsTimeMinutes: o.clsTimeMinutes,\n                clsTimeButton: o.clsTimeButton,\n                clsTimeButtonPlus: o.clsTimeButtonPlus,\n                clsTimeButtonMinus: o.clsTimeButtonMinus,\n\n                wide: o.wide,\n                widePoint: o.widePoint,\n\n                format: o.format,\n                inputFormat: o.inputFormat,\n                pickerMode: true,\n                show: o.value,\n                locale: o.locale,\n                weekStart: o.weekStart,\n                outside: o.outside,\n                buttons: false,\n                headerFormat: o.headerFormat,\n\n                clsCalendar: [o.clsCalendar, \"calendar-for-picker\", (o.dialogMode ? \"dialog-mode\":\"\")].join(\" \"),\n                clsCalendarHeader: o.clsCalendarHeader,\n                clsCalendarContent: o.clsCalendarContent,\n                clsCalendarFooter: \"d-none\",\n                clsCalendarMonths: o.clsCalendarMonths,\n                clsCalendarYears: o.clsCalendarYears,\n                clsToday: o.clsToday,\n                clsSelected: o.clsSelected,\n                clsExcluded: o.clsExcluded,\n\n                ripple: o.ripple,\n                rippleColor: o.rippleColor,\n                exclude: o.exclude,\n                minDate: o.minDate,\n                maxDate: o.maxDate,\n                yearsBefore: o.yearsBefore,\n                yearsAfter: o.yearsAfter,\n                special: o.special,\n                events: o.events,\n                showHeader: false,\n                showFooter: false,\n                multiSelect: false,\n                showWeekNumber: o.showWeekNumber,\n                onDayClick: function(sel, day, time, el){\n                    var date = datetime(sel[0]).align(\"day\");\n                    var elementValue, h, m;\n\n                    that._removeOverlay();\n\n                    that.value = date;\n                    that.time = time;\n\n                    elementValue = date.format(o.format, o.locale);\n\n                    if (o.showTime) {\n                        h = Cake.lpad(time[0], 2, \"0\");\n                        m = Cake.lpad(time[1], 2, \"0\");\n                        elementValue += \" \" + h + \":\" + m;\n                    }\n\n                    element.val(elementValue);\n                    element.trigger(\"change\");\n                    cal.removeClass(\"open open-up\");\n                    cal.hide();\n\n                    that._fireEvent(\"change\", {\n                        val: that.value.val(),\n                        time: that.time\n                    });\n\n                    that._fireEvent(\"day-click\", {\n                        sel: sel,\n                        day: day,\n                        time: time,\n                        el: el\n                    });\n\n                    that._fireEvent(\"picker-change\", {\n                        val: that.value.val(),\n                        time: that.time\n                    });\n                },\n                onTimeChange: function(time){\n                    var elementValue, h, m;\n\n                    that.time = time;\n\n                    if (!that.value) {\n                        that.value = datetime();\n                    }\n                    elementValue = that.value.format(o.format, o.locale);\n\n                    if (o.showTime) {\n                        h = Cake.lpad(time[0], 2, \"0\");\n                        m = Cake.lpad(time[1], 2, \"0\");\n                        elementValue += \" \" + h + \":\" + m;\n                    }\n\n                    element.val(elementValue);\n\n                    that._fireEvent(\"change\", {\n                        val: that.value.val(),\n                        time: that.time\n                    });\n\n                    that._fireEvent(\"picker-change\", {\n                        val: that.value.val(),\n                        time: that.time\n                    });\n                },\n                onMonthChange: o.onMonthChange,\n                onYearChange: o.onYearChange\n            });\n\n            this.calendar = cal;\n\n            if (o.clearButton === true) {\n                clearButton = $(\"<button>\").addClass(\"button input-clear-button\").attr(\"tabindex\", -1).attr(\"type\", \"button\").html(o.clearButtonIcon);\n                clearButton.appendTo(buttons);\n            }\n\n            calendarButton = $(\"<button>\").addClass(\"button\").attr(\"tabindex\", -1).attr(\"type\", \"button\").html(o.calendarButtonIcon);\n            calendarButton.appendTo(buttons);\n\n            if (o.prepend !== \"\") {\n                var prepend = $(\"<div>\").html(o.prepend);\n                prepend.addClass(\"prepend\").addClass(o.clsPrepend).appendTo(container);\n            }\n\n            if (element.attr('dir') === 'rtl' ) {\n                container.addClass(\"rtl\");\n            }\n\n            if (String(o.size).indexOf(\"%\") > -1) {\n                container.css({\n                    width: o.size\n                });\n            } else {\n                container.css({\n                    width: parseInt(o.size) + \"px\"\n                });\n            }\n\n            element[0].className = '';\n\n            if (o.copyInlineStyles === true) {\n                $.each(Utils.getInlineStyles(element), function(key, value){\n                    container.css(key, value);\n                });\n            }\n\n            container.addClass(o.clsPicker);\n            element.addClass(o.clsInput);\n\n            if (o.dialogOverlay === true) {\n                this.overlay = that._overlay();\n            }\n\n            if (o.dialogMode === true) {\n                container.addClass(\"dialog-mode\");\n            } else {\n                if (Utils.media(\"(max-width: \"+o.dialogPoint+\"px)\")) {\n                    container.addClass(\"dialog-mode\");\n                    this.calendar.addClass(\"dialog-mode\");\n                }\n            }\n\n            if (o.label) {\n                var label = $(\"<label>\").addClass(\"label-for-input\").addClass(o.clsLabel).html(o.label).insertBefore(container);\n                if (element.attr(\"id\")) {\n                    label.attr(\"for\", element.attr(\"id\"));\n                }\n                if (element.attr(\"dir\") === \"rtl\") {\n                    label.addClass(\"rtl\");\n                }\n            }\n\n            if (element.is(\":disabled\")) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var container = element.parent();\n            var clear = container.find(\".input-clear-button\");\n            var cal = this.calendar;\n            var cal_plugin = Metro.getPlugin(cal[0], 'calendar');\n            var calendar = this.calendar;\n\n            $(window).on(Metro.events.resize, function(){\n                if (o.dialogMode !== true) {\n                    if (Utils.media(\"(max-width: \" + o.dialogPoint + \"px)\")) {\n                        container.addClass(\"dialog-mode\");\n                        calendar.appendTo(\"body\").addClass(\"dialog-mode\");\n                    } else {\n                        container.removeClass(\"dialog-mode\");\n                        calendar.appendTo(container).removeClass(\"dialog-mode\");\n                    }\n                }\n            }, {ns: this.id});\n\n            if (clear.length > 0) clear.on(Metro.events.click, function(e){\n                element.val(\"\").trigger('change').blur(); // TODO change blur\n                that.value = null;\n                e.preventDefault();\n                e.stopPropagation();\n            });\n\n            container.on(Metro.events.click, \"button, input\", function(e){\n\n                var value = that.value ? that.value : datetime();\n                var presetValue = o.inputFormat ? value.format(o.inputFormat) : value.format(\"YYYY-MM-DD\");\n\n                value.align(\"day\");\n\n                if (cal.hasClass(\"open\") === false && cal.hasClass(\"open-up\") === false) {\n\n                    $(\".calendar-picker .calendar\").removeClass(\"open open-up\").hide();\n\n                    cal_plugin.setPreset([presetValue]);\n                    cal_plugin.setShow(value);\n\n                    if (container.hasClass(\"dialog-mode\")) {\n                        that.overlay.appendTo($('body'));\n                    }\n                    cal.addClass(\"open\");\n                    if (!Utils.inViewport(cal[0])) {\n                        cal.addClass(\"open-up\");\n                    }\n\n                    that._fireEvent(\"calendar-show\", {\n                        calendar: cal\n                    });\n\n                } else {\n\n                    that._removeOverlay();\n                    cal.removeClass(\"open open-up\");\n\n                    that._fireEvent(\"calendar-hide\", {\n                        calendar: cal\n                    });\n\n                }\n                e.preventDefault();\n                e.stopPropagation();\n            });\n\n            element.on(Metro.events.blur, function(){container.removeClass(\"focused\");});\n            element.on(Metro.events.focus, function(){container.addClass(\"focused\");});\n            element.on(Metro.events.change, function(){\n                Utils.exec(o.onChange, [that.value.val()], element[0]);\n            });\n\n            container.on(Metro.events.click, function(e){\n                e.preventDefault();\n                e.stopPropagation();\n            })\n        },\n\n        _overlay: function(){\n            var o = this.options;\n\n            var overlay = $(\"<div>\");\n            overlay.addClass(\"overlay for-calendar-picker\").addClass(o.clsOverlay);\n\n            if (o.overlayColor === 'transparent') {\n                overlay.addClass(\"transparent\");\n            } else {\n                overlay.css({\n                    background: Metro.colors.toRGBA(o.overlayColor, o.overlayAlpha)\n                });\n            }\n\n            return overlay;\n        },\n\n        _removeOverlay: function(){\n            $('body').find('.overlay.for-calendar-picker').remove();\n        },\n\n        clear: function(){\n            this.value = datetime();\n            this.time = [datetime().hour(), datetime().minute()];\n            this.element.val(\"\")\n        },\n\n        val: function(v, f){\n            var element = this.element, o = this.options;\n            var elementValue, h, m;\n\n            if (arguments.length === 0 || Utils.isNull(v))  {\n                return {\n                    date: this.value.val(),\n                    time: this.time\n                };\n            }\n\n            if (v === \"\") {\n                return this.clear();\n            }\n\n            if (f) {\n                o.inputFormat = f;\n            }\n\n            var _curr = v.split(\" \");\n            this.value = !o.inputFormat ? datetime(_curr[0]) : Datetime.from(_curr[0], o.inputFormat, o.locale);\n            if (_curr[1]) {\n                this.time = _curr[1].trim().split(\":\");\n            }\n\n            this.value.align(\"day\");\n            Metro.getPlugin(this.calendar, \"calendar\").setTime(this.time);\n\n            elementValue = this.value.format(o.format);\n\n            if (o.showTime && this.time && elementValue) {\n                h = Cake.lpad(this.time[0], 2, \"0\");\n                m = Cake.lpad(this.time[1], 2, \"0\");\n                elementValue += \" \" + h + \":\" + m;\n            }\n\n            element.val(elementValue);\n            element.trigger(\"change\");\n        },\n\n        disable: function(){\n            this.element.data(\"disabled\", true);\n            this.element.parent().addClass(\"disabled\");\n        },\n\n        enable: function(){\n            this.element.data(\"disabled\", false);\n            this.element.parent().removeClass(\"disabled\");\n        },\n\n        toggleState: function(){\n            if (this.elem.disabled) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        },\n\n        i18n: function(val){\n            var o = this.options;\n            var hidden;\n            var cal = this.calendar;\n            if (val === undefined) {\n                return o.locale;\n            }\n            if (Metro.locales[val] === undefined) {\n                return false;\n            }\n\n            hidden = cal[0].hidden;\n            if (hidden) {\n                cal.css({\n                    visibility: \"hidden\",\n                    display: \"block\"\n                });\n            }\n            Metro.getPlugin(cal[0], 'calendar').i18n(val);\n            if (hidden) {\n                cal.css({\n                    visibility: \"visible\",\n                    display: \"none\"\n                });\n            }\n        },\n\n        getTime: function(asString){\n            var h, m;\n\n            asString = asString || false;\n\n            h = Cake.lpad(this.time[0], 2, \"0\");\n            m = Cake.lpad(this.time[1], 2, \"0\");\n\n            return asString ? h +\":\"+ m : this.time;\n        },\n\n        changeAttribute: function(attributeName, newValue){\n            var that = this;\n            var cal = Metro.getPlugin(this.calendar[0], \"calendar\");\n\n            switch (attributeName) {\n                case \"value\": that.val(newValue); break;\n                case 'disabled': this.toggleState(); break;\n                case 'data-locale': that.i18n(newValue); break;\n                case 'data-special': cal.setSpecial(newValue); break;\n                case 'data-exclude': cal.setExclude(newValue); break;\n                case 'data-min-date': cal.setMinDate(newValue); break;\n                case 'data-max-date': cal.setMaxDate(newValue); break;\n                case 'data-value': that.val(newValue); break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element;\n            var container = element.parent();\n            var clear = container.find(\".input-clear-button\");\n\n            $(window).off(Metro.events.resize, {ns: this.id});\n            clear.off(Metro.events.click);\n            container.off(Metro.events.click, \"button, input\");\n            element.off(Metro.events.blur);\n            element.off(Metro.events.focus);\n            element.off(Metro.events.change);\n\n            Metro.getPlugin(this.calendar, \"calendar\").destroy();\n\n            return element;\n        }\n    });\n\n    $(document).on(Metro.events.click, \".overlay.for-calendar-picker\",function(){\n        $(this).remove();\n        $(\".calendar-for-picker.open\").removeClass(\"open open-up\");\n    });\n\n    $(document).on(Metro.events.click, function(){\n        $(\".calendar-picker .calendar\").removeClass(\"open open-up\");\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var effects = [\n        \"slide\", \"slide-v\", \"fade\", \"switch\", \"zoom\", \"swirl\"\n    ];\n    var CarouselDefaultConfig = {\n        carouselDeferred: 0,\n        autoStart: false,\n        width: \"100%\",\n        height: \"16/9\", // 3/4, 21/9\n        effect: effects[0],\n        effectFunc: \"linear\",\n        direction: \"left\", //left, right\n        duration: METRO_ANIMATION_DURATION,\n        period: 5000,\n        stopOnMouse: true,\n\n        controls: true,\n        bullets: true,\n        bulletsStyle: \"square\", // square, circle, rect, diamond\n        bulletsSize: \"default\", // default, mini, small, large\n\n        controlsOnMouse: false,\n        controlsOutside: false,\n        bulletsPosition: \"default\", // default, left, right\n\n        controlPrev: '&#x23F4',\n        controlNext: '&#x23F5',\n        clsCarousel: \"\",\n        clsSlides: \"\",\n        clsSlide: \"\",\n        clsControls: \"\",\n        clsControlNext: \"\",\n        clsControlPrev: \"\",\n        clsBullets: \"\",\n        clsBullet: \"\",\n        clsBulletOn: \"\",\n        clsThumbOn: \"\",\n\n        onStop: Metro.noop,\n        onStart: Metro.noop,\n        onPlay: Metro.noop,\n        onSlideClick: Metro.noop,\n        onBulletClick: Metro.noop,\n        onThumbClick: Metro.noop,\n        onMouseEnter: Metro.noop,\n        onMouseLeave: Metro.noop,\n        onNextClick: Metro.noop,\n        onPrevClick: Metro.noop,\n        onSlideShow: Metro.noop,\n        onSlideHide: Metro.noop,\n        onCarouselCreate: Metro.noop\n    };\n\n    Metro.carouselSetup = function (options) {\n        CarouselDefaultConfig = $.extend({}, CarouselDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroCarouselSetup\"] !== undefined) {\n        Metro.carouselSetup(window[\"metroCarouselSetup\"]);\n    }\n\n    Metro.Component('carousel', {\n        init: function( options, elem ) {\n            this._super(elem, options, CarouselDefaultConfig, {\n                height: 0,\n                width: 0,\n                slides: [],\n                current: null,\n                currentIndex: null,\n                dir: \"left\",\n                interval: false,\n                isAnimate: false,\n                id: Utils.elementId(\"carousel\")\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n            var slides = element.find(\".slide\");\n            var slides_container = element.find(\".slides\");\n\n            this.dir = this.options.direction;\n\n            element.addClass(\"carousel\").addClass(o.clsCarousel);\n\n            element.css({\n                maxWidth: o.width\n            });\n\n\n            if (o.controlsOutside === true) {\n                element.addClass(\"controls-outside\");\n            }\n\n            if (slides_container.length === 0) {\n                slides_container = $(\"<div>\").addClass(\"slides\").appendTo(element);\n                slides.appendTo(slides_container);\n            }\n\n            slides.addClass(o.clsSlides);\n\n            if (slides.length > 0) {\n\n                this._createSlides();\n                this._createControls();\n                this._createBullets();\n                this._createEvents();\n                this._resize();\n\n                if (o.controlsOnMouse === true) {\n                    element.find(\"[class*=carousel-switch]\").fadeOut(0);\n                    element.find(\".carousel-bullets\").fadeOut(0);\n                }\n\n                if (o.autoStart === true) {\n                    this._start();\n                } else {\n                    this._fireEvent(\"slide-show\", {\n                        current: this.slides[this.currentIndex][0],\n                        prev: undefined\n                    });\n                }\n\n            }\n\n            this._fireEvent(\"carousel-create\", {\n                element: element\n            });\n        },\n\n        _start: function(){\n            var that = this, element = this.element, o = this.options;\n            var period = o.period;\n            var current = this.slides[this.currentIndex];\n\n            if (current.data(\"period\") !== undefined) {\n                period = current.data(\"period\");\n            }\n\n            if (this.slides.length <= 1) {\n                return ;\n            }\n\n            if (this.interval === false) this.interval = setTimeout(function run() {\n                var t = o.direction === 'left' ? 'next' : 'prior';\n                that._slideTo(t, true);\n            }, period);\n\n            this._fireEvent(\"start\", {\n                element: element\n            });\n        },\n\n        _stop: function(){\n            clearInterval(this.interval);\n            this.interval = false;\n        },\n\n        _resize: function(){\n            var element = this.element, o = this.options;\n            var width = element.outerWidth();\n            var height;\n            var medias = [];\n\n            if ([\"16/9\", \"21/9\", \"4/3\"].indexOf(o.height) > -1) {\n                height = Utils.aspectRatioH(width, o.height);\n            } else {\n                if (String(o.height).indexOf(\"@\") > -1) {\n                    medias = o.height.substr(1).toArray(\"|\");\n                    $.each(medias, function(){\n                        var media = this.toArray(\",\");\n                        if (window.matchMedia(media[0]).matches) {\n                            if ([\"16/9\", \"21/9\", \"4/3\"].indexOf(media[1]) > -1) {\n                                height = Utils.aspectRatioH(width, media[1]);\n                            } else {\n                                height = parseInt(media[1]);\n                            }\n                        }\n                    });\n                } else {\n                    height = parseInt(o.height);\n                }\n            }\n\n            element.css({\n                height: height\n            });\n        },\n\n        _createSlides: function(){\n            var that = this, element = this.element, o = this.options;\n            var slides = element.find(\".slide\");\n\n            $.each(slides, function(i){\n                var slide = $(this);\n                if (slide.data(\"cover\") !== undefined) {\n                    slide.css({\n                        backgroundImage: \"url(\"+slide.data('cover')+\")\"\n                    });\n                }\n\n                if (i !== 0) {\n                    switch (o.effect) {\n                        case \"switch\":\n                        case \"slide\":\n                            slide.css(\"left\", \"100%\");\n                            break;\n                        case \"slide-v\":\n                            slide.css(\"top\", \"100%\");\n                            break;\n                        case \"fade\":\n                        case \"zoom\":\n                        case \"swirl\":\n                            slide.css(\"opacity\", \"0\");\n                            break;\n                    }\n                } else {\n                    slide.addClass(\"active-slide\");\n                }\n\n                slide.addClass(o.clsSlide);\n\n                that.slides.push(slide);\n            });\n\n            this.currentIndex = 0;\n            this.current = this.slides[this.currentIndex];\n        },\n\n        _createControls: function(){\n            var element = this.element, o = this.options;\n            var next, prev;\n\n            if (o.controls === false) {\n                return ;\n            }\n\n            next = $('<span/>').addClass('carousel-switch-next').addClass(o.clsControls).addClass(o.clsControlNext).html(\">\");\n            prev = $('<span/>').addClass('carousel-switch-prev').addClass(o.clsControls).addClass(o.clsControlPrev).html(\"<\");\n\n            if (o.controlNext) {\n                next.html(o.controlNext);\n            }\n\n            if (o.controlPrev) {\n                prev.html(o.controlPrev);\n            }\n\n            next.appendTo(element);\n            prev.appendTo(element);\n        },\n\n        _createBullets: function(){\n            var element = this.element, o = this.options;\n            var bullets, i;\n\n            if (o.bullets === false) {\n                return ;\n            }\n\n            bullets = $('<div>').addClass(\"carousel-bullets\").addClass(o.bulletsSize+\"-size\").addClass(\"bullet-style-\"+o.bulletsStyle).addClass(o.clsBullets);\n            if (o.bulletsPosition === 'default' || o.bulletsPosition === 'center') {\n                bullets.addClass(\"flex-justify-center\");\n            } else if (o.bulletsPosition === 'left') {\n                bullets.addClass(\"flex-justify-start\");\n            } else {\n                bullets.addClass(\"flex-justify-end\");\n            }\n\n            for (i = 0; i < this.slides.length; i++) {\n                var bullet = $('<span>').addClass(\"carousel-bullet\").addClass(o.clsBullet).data(\"slide\", i);\n                if (i === 0) {\n                    bullet.addClass('bullet-on').addClass(o.clsBulletOn);\n                }\n                bullet.appendTo(bullets);\n            }\n\n            bullets.appendTo(element);\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n\n            element.on(Metro.events.click, \".carousel-bullet\", function(){\n                var bullet = $(this);\n                if (that.isAnimate === false) {\n                    that._slideToSlide(bullet.data('slide'));\n                    that._fireEvent(\"bullet-click\", {\n                        bullet: bullet\n                    });\n                }\n            });\n\n            element.on(Metro.events.click, \".carousel-switch-next\", function(){\n                if (that.isAnimate === false) {\n                    that._slideTo(\"next\", false);\n                    that._fireEvent(\"next-click\", {\n                        button: this\n                    });\n                }\n            });\n\n            element.on(Metro.events.click, \".carousel-switch-prev\", function(){\n                if (that.isAnimate === false) {\n                    that._slideTo(\"prev\", false);\n                    that._fireEvent(\"prev-click\", {\n                        button: this\n                    });\n                }\n            });\n\n            if (o.stopOnMouse === true && o.autoStart === true) {\n                element.on(Metro.events.enter, function () {\n                    that._stop();\n                    that._fireEvent(\"mouse-enter\", {\n                        element: element\n                    }, false, true);\n                });\n                element.on(Metro.events.leave, function () {\n                    that._start();\n                    that._fireEvent(\"mouse-leave\", {\n                        element: element\n                    }, false, true);\n                });\n            }\n\n            if (o.controlsOnMouse === true) {\n                element.on(Metro.events.enter, function () {\n                    element.find(\"[class*=carousel-switch]\").fadeIn();\n                    element.find(\".carousel-bullets\").fadeIn();\n                });\n                element.on(Metro.events.leave, function () {\n                    element.find(\"[class*=carousel-switch]\").fadeOut();\n                    element.find(\".carousel-bullets\").fadeOut();\n                });\n            }\n\n            element.on(Metro.events.click, \".slide\", function(){\n                var slide = $(this);\n                that._fireEvent(\"slide-click\", {\n                    slide: slide\n                });\n            });\n\n            $(window).on(Metro.events.resize, function(){\n                that._resize();\n            }, {ns: this.id});\n        },\n\n        _slideToSlide: function(index){\n            var element = this.element, o = this.options;\n            var current, next, to;\n\n            if (this.slides[index] === undefined) {\n                return ;\n            }\n\n            if (this.currentIndex === index) {\n                return ;\n            }\n\n            to = index > this.currentIndex ? \"next\" : \"prev\";\n            current = this.slides[this.currentIndex];\n            next = this.slides[index];\n\n            this.currentIndex = index;\n\n            this._effect(current, next, o.effect, to);\n\n            element.find(\".carousel-bullet\").removeClass(\"bullet-on\").removeClass(o.clsBulletOn);\n            element.find(\".carousel-bullet:nth-child(\"+(this.currentIndex+1)+\")\").addClass(\"bullet-on\").addClass(o.clsBulletOn);\n        },\n\n        _slideTo: function(to, interval){\n            var element = this.element, o = this.options;\n            var current, next;\n\n            if (to === undefined) {\n                to = \"next\";\n            }\n\n            current = this.slides[this.currentIndex];\n\n            if (to === \"next\") {\n                this.currentIndex++;\n                if (this.currentIndex >= this.slides.length) {\n                    this.currentIndex = 0;\n                }\n            } else {\n                this.currentIndex--;\n                if (this.currentIndex < 0) {\n                    this.currentIndex = this.slides.length - 1;\n                }\n            }\n\n            next = this.slides[this.currentIndex];\n\n            this._effect(current, next, o.effect, to, interval);\n\n            element.find(\".carousel-bullet\").removeClass(\"bullet-on\").removeClass(o.clsBulletOn);\n            element.find(\".carousel-bullet:nth-child(\"+(this.currentIndex+1)+\")\").addClass(\"bullet-on\").addClass(o.clsBulletOn);\n        },\n\n        _effect: function(current, next, effect, to, interval){\n            var that = this, o = this.options;\n            var duration = o.duration;\n            var func, effectFunc = o.effectFunc;\n            var period = o.period;\n\n            var run = function(f, c, n, o){\n                Metro.animations[f](c, n, o);\n            }\n\n            if (next.data('duration') !== undefined) {\n                duration = next.data('duration');\n            }\n\n            if (next.data('effectFunc') !== undefined) {\n                effectFunc = next.data('effectFunc');\n            }\n\n            if (effect === 'switch') {\n                duration = 0;\n            }\n\n            current.stop(true);\n            next.stop(true);\n            this.isAnimate = true;\n\n            setTimeout(function(){that.isAnimate = false;}, duration + 100);\n\n            if (effect === 'slide') {\n                func = to === 'next' ? 'slideLeft': 'slideRight';\n            } else\n            if (effect === 'slide-v') {\n                func = to === 'next' ? 'slideUp': 'slideDown';\n            } else {\n                func = effect;\n            }\n\n            if (!effects.includes(effect)) {\n                func = \"switch\";\n            }\n\n            run(func, current, next, {duration: duration, ease: effectFunc});\n\n            current.removeClass(\"active-slide\");\n            next.addClass(\"active-slide\");\n\n            setTimeout(function(){\n                that._fireEvent(\"slide-show\", {\n                    current: next[0],\n                    prev: current[0]\n                })\n            }, duration);\n\n            setTimeout(function(){\n                that._fireEvent(\"slide-hide\", {\n                    current: current[0],\n                    next: next[0]\n                })\n            }, duration);\n\n            if (interval === true) {\n\n                if (next.data('period') !== undefined) {\n                    period = next.data('period');\n                }\n\n                this.interval = setTimeout(function run() {\n                    var t = o.direction === 'left' ? 'next' : 'prior';\n                    that._slideTo(t, true);\n                }, period);\n            }\n        },\n\n        toSlide: function(index){\n            this._slideToSlide(index);\n        },\n\n        next: function(){\n            this._slideTo(\"next\");\n        },\n\n        prev: function(){\n            this._slideTo(\"prev\");\n        },\n\n        stop: function () {\n            clearInterval(this.interval);\n            this._fireEvent(\"stop\");\n        },\n\n        play: function(){\n            this._start();\n            this._fireEvent(\"play\");\n        },\n\n        setEffect: function(effect){\n            var element = this.element, o = this.options;\n            var slides = element.find(\".slide\");\n\n            if (!effects.includes(effect)) return ;\n\n            o.effect = effect;\n\n            slides.removeStyleProperty(\"transform\").css({\n                top: 0,\n                left: 0\n            });\n        },\n\n        /* eslint-disable-next-line */\n        changeAttribute: function(attributeName, newValue){\n            if (attributeName === 'data-effect') {\n                this.setEffect(newValue);\n            }\n        },\n\n        destroy: function(){\n            var element = this.element, o = this.options;\n\n            element.off(Metro.events.click, \".carousel-bullet\");\n            element.off(Metro.events.click, \".carousel-switch-next\");\n            element.off(Metro.events.click, \".carousel-switch-prev\");\n\n            if (o.stopOnMouse === true && o.autoStart === true) {\n                element.off(Metro.events.enter);\n                element.off(Metro.events.leave);\n            }\n\n            if (o.controlsOnMouse === true) {\n                element.off(Metro.events.enter);\n                element.off(Metro.events.leave);\n            }\n\n            element.off(Metro.events.click, \".slide\");\n            $(window).off(Metro.events.resize, {ns: this.id});\n\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var CharmsDefaultConfig = {\n        charmsDeferred: 0,\n        position: \"right\",\n        opacity: 1,\n        clsCharms: \"\",\n        onCharmCreate: Metro.noop,\n        onOpen: Metro.noop,\n        onClose: Metro.noop,\n        onToggle: Metro.noop\n    };\n\n    Metro.charmsSetup = function (options) {\n        CharmsDefaultConfig = $.extend({}, CharmsDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroCharmsSetup\"] !== undefined) {\n        Metro.charmsSetup(window[\"metroCharmsSetup\"]);\n    }\n\n    Metro.Component('charms', {\n        init: function( options, elem ) {\n            this._super(elem, options, CharmsDefaultConfig, {\n                origin: {\n                    background: \"\"\n                }\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"charm-create\", {\n                element: element\n            });\n        },\n\n        _createStructure: function(){\n            var element = this.element, o = this.options;\n\n            element\n                .addClass(\"charms\")\n                .addClass(o.position + \"-side\")\n                .addClass(o.clsCharms);\n\n            this.origin.background = element.css(\"background-color\");\n\n            element.css({\n                backgroundColor: Metro.colors.toRGBA(Utils.getStyleOne(element, \"background-color\"), o.opacity)\n            });\n        },\n\n        _createEvents: function(){\n        },\n\n        open: function(){\n            var element = this.element;\n\n            element.addClass(\"open\");\n\n            this._fireEvent(\"open\");\n        },\n\n        close: function(){\n            var element = this.element;\n\n            element.removeClass(\"open\");\n\n            this._fireEvent(\"close\");\n        },\n\n        toggle: function(){\n            var element = this.element;\n\n            if (element.hasClass(\"open\") === true) {\n                this.close();\n            } else {\n                this.open();\n            }\n\n            this._fireEvent(\"toggle\");\n        },\n\n        opacity: function(v){\n            var element = this.element, o = this.options;\n\n            if (v === undefined) {\n                return o.opacity;\n            }\n\n            var opacity = Math.abs(parseFloat(v));\n            if (opacity < 0 || opacity > 1) {\n                return ;\n            }\n            o.opacity = opacity;\n\n            element.css({\n                backgroundColor: Metro.colors.toRGBA(Utils.getStyleOne(element, \"background-color\"), opacity)\n            });\n        },\n\n        changeOpacity: function(){\n            var element = this.element;\n            this.opacity(element.attr(\"data-opacity\"));\n        },\n\n        changeAttribute: function(attributeName){\n            switch (attributeName) {\n                case \"data-opacity\": this.changeOpacity(); break;\n            }\n        },\n\n        destroy: function(){\n            return this.element;\n        }\n    });\n\n    Metro['charms'] = {\n        check: function(el){\n            if (Utils.isMetroObject(el, \"charms\") === false) {\n                console.warn(\"Element is not a charms component\");\n                return false;\n            }\n            return true;\n        },\n\n        isOpen: function(el){\n            if (this.check(el) === false) return ;\n            return $(el).hasClass(\"open\");\n        },\n\n        open: function(el){\n            if (this.check(el) === false) return ;\n            Metro.getPlugin(el, \"charms\").open();\n        },\n\n        close: function(el){\n            if (this.check(el) === false) return ;\n            Metro.getPlugin(el, \"charms\").close();\n        },\n\n        toggle: function(el){\n            if (this.check(el) === false) return ;\n            Metro.getPlugin(el, \"charms\").toggle();\n        },\n\n        closeAll: function(){\n            $('[data-role*=charms]').each(function() {\n                Metro.getPlugin(this, 'charms').close();\n            });\n        },\n\n        opacity: function(el, opacity){\n            if (this.check(el) === false) return ;\n            Metro.getPlugin(el, \"charms\").opacity(opacity);\n        }\n    };\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var defaultAvatar = \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD//gA7Q1JFQVRPUjogZ2QtanBlZyB2MS4wICh1c2luZyBJSkcgSlBFRyB2NjIpLCBxdWFsaXR5ID0gOTAK/9sAQwADAgIDAgIDAwMDBAMDBAUIBQUEBAUKBwcGCAwKDAwLCgsLDQ4SEA0OEQ4LCxAWEBETFBUVFQwPFxgWFBgSFBUU/9sAQwEDBAQFBAUJBQUJFA0LDRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU/8AAEQgAUABQAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A+t+KKPxo/GgA70Yo/Gj8aADFH4VesdC1HUl3WtjcXCf344yV/PGKW+0HUtNXddWNzbp/fkjIX88YoAofhR+FH40fjQAfhR+FH40fjQAUUUUAFepeAPh5D9li1LVYhK8g3Q27j5VXszDuT6f5HA+FtOXVvEWn2rjMcko3j1UckfkDX0MBgYHAoARVCKFUBVHAA6ClZQwKkZBGCDS0UAec+Pvh3BJay6lpUQimjBeW3QYVx3Kjsfbv/PyqvpuvnvxfpqaT4l1C1QbY0lJUDsrfMB+RoAyKKKKACiiigDa8GXq6f4p02eQgIJQpJ7Bvlz+tfQP4V8yDg17P4A8cw65ZxWV5IE1KMbfmP+uA7j39R+NAHaUfhSUUAL+FeA+OL1NQ8WalNGQU83YCO+0Bf6V6b498cQ6BZyWlrIJNSkXaApz5QP8AEff0FeKk5OTyTQAUUUUAH40fjRU1naTX93DbQIXmlYIijuTQBc0Dw/eeI74W1mm49XkbhUHqTXsHhz4eaXoCpI8YvbscmaYZAP8Asr0H8/etHwv4cg8M6XHaxANIfmllxy7dz9PStigA/Gk/GlooA5bxJ8PdL19XkWMWd43PnwjGT/tL0P8AP3rx/X/D954cvjbXibT1SReVceoNfRFZHijw5B4m0uS1lAWQfNFLjlG7H6etAHz5+NH41NeWk1hdzW06FJonKMp7EGoaACvQfhBowudTudRkXK2y7I8j+Nup/Afzrz6vafhRaCDwmkgHM8zufwO3/wBloA7Kiij8KACkpaSgBaSj8KKAPJvi/owttTttRjXC3K7JMf3l6H8R/KvPq9p+K1qJ/CbyEcwTI4P1O3/2avFqAP/Z\";\n    var ChatDefaultConfig = {\n        chatDeferred: 0,\n        inputTimeFormat: null,\n        timeFormat: \"D MMM hh:mm A\",\n        name: \"John Doe\",\n        avatar: defaultAvatar,\n        welcome: null,\n        welcomeAvatar: defaultAvatar,\n        title: null,\n        width: \"100%\",\n        height: \"auto\",\n        messages: null,\n        sendButtonTitle: \"Send\",\n        readonly: false,\n        locale: METRO_LOCALE,\n\n        clsChat: \"\",\n        clsName: \"\",\n        clsTime: \"\",\n        clsInput: \"\",\n        clsSendButton: \"\",\n        clsMessageLeft: \"default\",\n        clsMessageRight: \"default\",\n\n        onMessage: Metro.noop,\n        onSend: Metro.noop,\n        onSendButtonClick: Metro.noop,\n        onChatCreate: Metro.noop\n    };\n\n    Metro.chatSetup = function (options) {\n        ChatDefaultConfig = $.extend({}, ChatDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroChatSetup\"] !== undefined) {\n        Metro.chatSetup(window[\"metroChatSetup\"]);\n    }\n\n    Metro.Component('chat', {\n        init: function( options, elem ) {\n            this._super(elem, options, ChatDefaultConfig, {\n                input: null,\n                classes: \"primary secondary success alert warning yellow info dark light\".split(\" \"),\n                lastMessage: null\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"chat-create\", {\n                element: element\n            });\n        },\n\n        _createStructure: function(){\n            var that = this, element = this.element, o = this.options;\n            var messages, messageInput, input;\n            var customButtons = [\n                {\n                    html: o.sendButtonTitle,\n                    cls: o.clsSendButton+\" js-chat-send-button\",\n                    onclick: o.onSendButtonClick\n                }\n            ];\n\n            element.addClass(\"chat\").addClass(o.clsChat);\n\n            element.css({\n                width: o.width,\n                height: o.height\n            });\n\n            if (Utils.isValue(o.title)) {\n                $(\"<div>\").addClass(\"title\").html(o.title).appendTo(element);\n            }\n\n            messages = $(\"<div>\").addClass(\"messages\");\n            messages.appendTo(element);\n            messageInput = $(\"<div>\").addClass(\"message-input\").appendTo(element);\n            input = $(\"<input type='text'>\");\n            input.appendTo(messageInput);\n            input.input({\n                customButtons: customButtons,\n                clsInput: o.clsInput\n            });\n\n            if (o.welcome) {\n                this.add({\n                    text: o.welcome,\n                    time: datetime(),\n                    position: \"left\",\n                    name: \"Chat Bot\",\n                    avatar: o.welcomeAvatar\n                })\n            }\n\n            if (Utils.isValue(o.messages) && typeof o.messages === \"string\") {\n                o.messages = Utils.isObject(o.messages);\n            }\n\n            if (!Utils.isNull(o.messages) && typeof o.messages === \"object\" && Utils.objectLength(o.messages) > 0) {\n                $.each(o.messages, function(){\n                    that.add(this);\n                });\n            }\n\n            element.find(\".message-input\")[o.readonly ? 'addClass':'removeClass'](\"disabled\");\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var sendButton = element.find(\".js-chat-send-button\");\n            var input = element.find(\"input[type=text]\");\n\n            var send = function(){\n                var msg = \"\"+input.val(), m;\n                if (msg.trim() === \"\") {return false;}\n                m = {\n                    id: Utils.elementId(\"chat-message\"),\n                    name: o.name,\n                    avatar: o.avatar,\n                    text: msg,\n                    position: \"right\",\n                    time: datetime()\n                };\n                that.add(m);\n                input.val(\"\");\n                that._fireEvent(\"send\", {\n                    msg: m\n                });\n                input.focus();\n            };\n\n            sendButton.on(Metro.events.click, function () {\n                send();\n            });\n\n            input.on(Metro.events.keyup, function(e){\n                if (e.keyCode === Metro.keyCode.ENTER) {\n                    send();\n                }\n            })\n        },\n\n        add: function(msg){\n            var that = this, element = this.element, o = this.options;\n            var message, sender, time, item, avatar, text;\n            var messages = element.find(\".messages\");\n            var messageDate;\n\n            messageDate = o.inputTimeFormat ? Datetime.from(msg.time, o.inputTimeFormat, o.locale) : datetime(msg.time);\n\n            message = $(\"<div>\").addClass(\"message\").addClass(msg.position).appendTo(messages);\n            item = $(\"<div>\").addClass(\"message-item\").appendTo(message);\n            avatar = $(\"<img>\").attr(\"src\", msg.avatar).addClass(\"message-avatar\").appendTo(item);\n            text = $(\"<div>\").addClass(\"message-text\").append($(\"<div>\").addClass(\"message-text-inner\").html(Cake.escapeHtml(msg.text))).appendTo(item);\n            time = $(\"<div>\").addClass(\"message-time\").addClass(o.clsTime).text(messageDate.format(o.timeFormat)).appendTo(text);\n            sender = $(\"<div>\").addClass(\"message-sender\").addClass(o.clsName).text(msg.name).appendTo(text);\n\n            if (Utils.isValue(msg.id)) {\n                message.attr(\"id\", msg.id);\n            }\n\n            if (msg.position === 'left' && Utils.isValue(o.clsMessageLeft)) {\n                text.addClass(o.clsMessageLeft);\n            }\n            if (msg.position === 'right' && Utils.isValue(o.clsMessageRight)) {\n                text.addClass(o.clsMessageRight);\n            }\n\n            if (this.lastMessage && this.lastMessage.position === msg.position) {\n                text.addClass(\"--next\");\n                avatar.visible(false);\n                sender.hide();\n            }\n\n            that._fireEvent(\"message\", {\n                msg: msg,\n                el: {\n                    message: message,\n                    sender: sender,\n                    time: time,\n                    item: item,\n                    avatar: avatar,\n                    text: text\n                }\n            });\n\n            messages.animate({\n                draw: {\n                    scrollTop: messages[0].scrollHeight\n                },\n                dur: 1000\n            });\n\n            this.lastMessage = msg;\n\n            return this;\n        },\n\n        addMessages: function(messages){\n            var that = this;\n\n            if (Utils.isValue(messages) && typeof messages === \"string\") {\n                messages = Utils.isObject(messages);\n            }\n\n            if (typeof messages === \"object\" && Utils.objectLength(messages) > 0) {\n                $.each(messages, function(){\n                    that.add(this);\n                });\n            }\n\n            return this;\n        },\n\n        delMessage: function(id){\n            var element = this.element;\n\n            element.find(\".messages\").find(\"#\"+id).remove();\n\n            return this;\n        },\n\n        updMessage: function(msg){\n            var element = this.element;\n            var message = element.find(\".messages\").find(\"#\"+msg.id);\n\n            if (message.length === 0) return this;\n\n            message.find(\".message-text\").html(msg.text);\n            message.find(\".message-time\").html(msg.time);\n\n            return this;\n        },\n\n        clear: function(){\n            var element = this.element;\n            var messages = element.find(\".messages\");\n            messages.html(\"\");\n            this.lastMessage = null;\n        },\n\n        toggleReadonly: function(readonly){\n            var element = this.element, o = this.options;\n            o.readonly = typeof readonly === \"undefined\" ? !o.readonly : readonly;\n            element.find(\".message-input\")[o.readonly ? 'addClass':'removeClass'](\"disabled\");\n        },\n\n        changeAttribute: function(attributeName){\n            switch (attributeName) {\n                case \"data-readonly\": this.toggleReadonly(); break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element;\n            var sendButton = element.find(\".js-chat-send-button\");\n            var input = element.find(\"input[type=text]\");\n\n            sendButton.off(Metro.events.click);\n            input.off(Metro.events.keyup);\n\n            return element;\n        }\n    });\n\n    Metro.defaults.Chat = ChatDefaultConfig;\n    Metro.defaults.ChatAvatar = defaultAvatar;\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var CHECKBOX_STATE_CHECKED = 1\n    var CHECKBOX_STATE_UNCHECKED = -1\n    var CHECKBOX_STATE_INDETERMINATE = 0\n    var CheckboxThreeStateDefaultConfig = {\n        checkboxDeferred: 0,\n        state: CHECKBOX_STATE_UNCHECKED,\n        transition: true,\n        style: 1,\n        caption: \"\",\n        captionPosition: \"right\",\n        clsCheckbox: \"\",\n        clsCheck: \"\",\n        clsCaption: \"\",\n        onCheckboxCreate: Metro.noop\n    };\n\n    Metro.metroCheckboxThreeStateSetup = function (options) {\n        CheckboxThreeStateDefaultConfig = $.extend({}, CheckboxThreeStateDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroCheckboxThreeStateSetup\"] !== undefined) {\n        Metro.metroCheckboxThreeStateSetup(window[\"metroCheckboxThreeStateSetup\"]);\n    }\n\n    Metro.Component('checkbox-three-state', {\n        init: function( options, elem ) {\n            this._super(elem, options, CheckboxThreeStateDefaultConfig, {\n                origin: {\n                    className: \"\"\n                },\n                state: CHECKBOX_STATE_UNCHECKED\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var o = this.options;\n\n            if (this.elem.checked) {\n                o.state = 1;\n            }\n            this.elem.checked = false;\n\n            if (o.state === -1 || o.state === \"unchecked\") {\n                this.state = CHECKBOX_STATE_UNCHECKED\n            } else if (o.state === 0 || o.state === \"indeterminate\") {\n                this.state = CHECKBOX_STATE_INDETERMINATE\n            } else {\n                this.state = CHECKBOX_STATE_CHECKED\n            }\n\n            this._createStructure();\n            this._createEvents();\n            this._fireEvent(\"checkbox-create\");\n        },\n\n        _indeterminate: function(v){\n            var element = this.element;\n\n            v = Utils.isNull(v) ? true : Utils.bool(v);\n\n            element[0].indeterminate = v;\n            element.attr(\"data-indeterminate\", v);\n        },\n\n        _createStructure: function(){\n            var element = this.element, o = this.options;\n            var checkbox;\n            var check = $(\"<span>\").addClass(\"check\");\n            var caption = $(\"<span>\").addClass(\"caption\").html(o.caption);\n\n            element.attr(\"type\", \"checkbox\");\n\n            if (element.attr(\"readonly\") !== undefined) {\n                element.on(\"click\", function(e){\n                    e.preventDefault();\n                })\n            }\n\n            checkbox = element\n                .wrap(\"<label>\")\n                .addClass(\"checkbox \" + element[0].className)\n                .addClass(o.style === 2 ? \"style2\" : \"\");\n\n            check.appendTo(checkbox);\n            caption.appendTo(checkbox);\n\n            if (o.transition === true) {\n                checkbox.addClass(\"transition-on\");\n            }\n\n            if (o.captionPosition === 'left') {\n                checkbox.addClass(\"caption-left\");\n            }\n\n            this.origin.className = element[0].className;\n            element[0].className = '';\n\n            checkbox.addClass(o.clsCheckbox);\n            caption.addClass(o.clsCaption);\n            check.addClass(o.clsCheck);\n\n            this._drawState()\n\n            if (element.is(':disabled')) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        },\n\n        _drawState: function(){\n            var element = this.element;\n\n            element[0].checked = false;\n            this._indeterminate(false)\n\n            if (this.state === CHECKBOX_STATE_INDETERMINATE) {\n                element[0].checked = true;\n                this._indeterminate(true)\n            } else if (this.state === CHECKBOX_STATE_CHECKED) {\n                element[0].checked = true;\n            }\n        },\n\n        _createEvents: function(){\n            var element = this.element,\n                check = element.siblings(\".check\");\n            var that = this\n\n            element.on(\"click\", function(){\n                that.state++\n                if (that.state === 2) {\n                    that.state = -1\n                }\n                that._drawState()\n            })\n\n            element.on(\"focus\", function(){\n                check.addClass(\"focused\");\n            });\n\n            element.on(\"blur\", function(){\n                check.removeClass(\"focused\");\n            });\n        },\n\n        check: function(){\n            this.setCheckState(CHECKBOX_STATE_CHECKED)\n        },\n\n        uncheck: function(){\n            this.setCheckState(CHECKBOX_STATE_UNCHECKED)\n        },\n\n        indeterminate: function(){\n            this.setCheckState(CHECKBOX_STATE_INDETERMINATE)\n        },\n\n        setCheckState: function(state){\n            if (state === -1 || state === \"unchecked\") {\n                this.state = CHECKBOX_STATE_UNCHECKED\n            } else if (state === 0 || state === \"indeterminate\") {\n                this.state = CHECKBOX_STATE_INDETERMINATE\n            } else {\n                this.state = CHECKBOX_STATE_CHECKED\n            }\n\n            this._drawState();\n\n            return this;\n        },\n\n        getCheckState: function(asString){\n            if (!asString) {\n                return this.state;\n            }\n\n            switch (this.state) {\n                case -1: return \"unchecked\";\n                case 0: return \"indeterminate\";\n                case 1: return \"checked\";\n            }\n        },\n\n        disable: function(){\n            this.element.data(\"disabled\", true);\n            this.element.parent().addClass(\"disabled\");\n        },\n\n        enable: function(){\n            this.element.data(\"disabled\", false);\n            this.element.parent().removeClass(\"disabled\");\n        },\n\n        toggle: function(){\n            this.state++\n            if (this.state === 2) {\n                this.state = -1\n            }\n            this._drawState()\n        },\n\n        changeAttribute: function(attr, newVal){\n            var element = this.element, o = this.options;\n            var parent = element.parent();\n\n            var changeStyle = function(){\n                var new_style = parseInt(element.attr(\"data-style\"));\n\n                if (!Utils.isInt(new_style)) return;\n\n                o.style = new_style;\n                parent.removeClass(\"style1 style2\").addClass(\"style\"+new_style);\n            };\n\n            var toggleElementAccessible = function(){\n                if (this.elem.disabled) {\n                    this.disable();\n                } else {\n                    this.enable();\n                }\n            };\n\n            var changeState = function(val){\n                this.toggle(val);\n            };\n\n            switch (attr) {\n                case 'disabled': toggleElementAccessible(); break;\n                case 'data-style': changeStyle(); break;\n                case 'data-state': changeState(newVal); break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element;\n            element.off(\"focus\");\n            element.off(\"blur\");\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var CheckboxDefaultConfig = {\n        checkboxDeferred: 0,\n        transition: true,\n        style: 1,\n        caption: \"\",\n        captionPosition: \"right\",\n        indeterminate: false,\n        clsCheckbox: \"\",\n        clsCheck: \"\",\n        clsCaption: \"\",\n        onCheckboxCreate: Metro.noop\n    };\n\n    Metro.checkboxSetup = function (options) {\n        CheckboxDefaultConfig = $.extend({}, CheckboxDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroCheckboxSetup\"] !== undefined) {\n        Metro.checkboxSetup(window[\"metroCheckboxSetup\"]);\n    }\n\n    Metro.Component('checkbox', {\n        init: function( options, elem ) {\n            this._super(elem, options, CheckboxDefaultConfig, {\n                origin: {\n                    className: \"\"\n                }\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            this._createStructure();\n            this._createEvents();\n            this._fireEvent(\"checkbox-create\");\n        },\n\n        _createStructure: function(){\n            var element = this.element, o = this.options;\n            var checkbox;\n            var check = $(\"<span>\").addClass(\"check\");\n            var caption = $(\"<span>\").addClass(\"caption\").html(o.caption);\n\n            element.attr(\"type\", \"checkbox\");\n\n            if (element.attr(\"readonly\") !== undefined) {\n                element.on(\"click\", function(e){\n                    e.preventDefault();\n                })\n            }\n\n            checkbox = element\n                .wrap(\"<label>\")\n                .addClass(\"checkbox \" + element[0].className)\n                .addClass(o.style === 2 ? \"style2\" : \"\");\n\n            check.appendTo(checkbox);\n            caption.appendTo(checkbox);\n\n            if (o.transition === true) {\n                checkbox.addClass(\"transition-on\");\n            }\n\n            if (o.captionPosition === 'left') {\n                checkbox.addClass(\"caption-left\");\n            }\n\n            this.origin.className = element[0].className;\n            element[0].className = '';\n\n            checkbox.addClass(o.clsCheckbox);\n            caption.addClass(o.clsCaption);\n            check.addClass(o.clsCheck);\n\n            if (o.indeterminate) {\n                element[0].indeterminate = true;\n            }\n\n            if (element.is(':disabled')) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        },\n\n        _createEvents: function(){\n            var element = this.element, check = element.siblings(\".check\");\n\n            element.on(\"focus\", function(){\n                check.addClass(\"focused\");\n            });\n\n            element.on(\"blur\", function(){\n                check.removeClass(\"focused\");\n            });\n        },\n\n        indeterminate: function(v){\n            var element = this.element;\n\n            v = Utils.isNull(v) ? true : Utils.bool(v);\n\n            element[0].indeterminate = v;\n            element.attr(\"data-indeterminate\", v);\n        },\n\n        disable: function(){\n            this.element.data(\"disabled\", true);\n            this.element.parent().addClass(\"disabled\");\n        },\n\n        enable: function(){\n            this.element.data(\"disabled\", false);\n            this.element.parent().removeClass(\"disabled\");\n        },\n\n        toggleState: function(){\n            if (this.elem.disabled) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        },\n\n        toggle: function(v){\n            var element = this.element;\n\n            this.indeterminate(false);\n\n            if (!Utils.isValue(v)) {\n                element.prop(\"checked\", !Utils.bool(element.prop(\"checked\")));\n            } else {\n                if (v === -1) {\n                    this.indeterminate(true);\n                } else {\n                    element.prop(\"checked\", v === 1);\n                }\n            }\n            return this;\n        },\n\n        changeAttribute: function(attributeName){\n            var element = this.element, o = this.options;\n            var parent = element.parent();\n\n            var changeStyle = function(){\n                var new_style = parseInt(element.attr(\"data-style\"));\n\n                if (!Utils.isInt(new_style)) return;\n\n                o.style = new_style;\n                parent.removeClass(\"style1 style2\").addClass(\"style\"+new_style);\n            };\n\n            var indeterminateState = function(){\n                element[0].indeterminate = JSON.parse(element.attr(\"data-indeterminate\")) === true;\n            };\n\n            switch (attributeName) {\n                case 'disabled': this.toggleState(); break;\n                case 'data-indeterminate': indeterminateState(); break;\n                case 'data-style': changeStyle(); break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element;\n            element.off(\"focus\");\n            element.off(\"blur\");\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var ClockDefaultConfig = {\n        clockDeferred: 0,\n        showTime: true,\n        showDate: true,\n        timeFormat: '24',\n        dateFormat: 'american',\n        divider: \"&nbsp;&nbsp;\",\n        leadingZero: true,\n        dateDivider: '-',\n        timeDivider: \":\",\n        onTick: Metro.noop,\n        onSecond: Metro.noop,\n        onClockCreate: Metro.noop\n    };\n\n    Metro.clockSetup = function (options) {\n        ClockDefaultConfig = $.extend({}, ClockDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroClockSetup\"] !== undefined) {\n        Metro.clockSetup(window[\"metroClockSetup\"]);\n    }\n\n    Metro.Component('clock', {\n        init: function( options, elem ) {\n            this._super(elem, options, ClockDefaultConfig, {\n                _clockInterval: null\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var that = this, element = this.element;\n\n            this._fireEvent('clock-create', {\n                element: element\n            });\n\n            this._tick();\n\n            this._clockInterval = setInterval(function(){\n                that._tick();\n            }, 500);\n            this._secondInterval = setInterval(function(){\n                that._second();\n            }, 1000);\n        },\n\n        _addLeadingZero: function(i){\n            if (i<10){i=\"0\" + i;}\n            return i;\n        },\n\n        _second: function(){\n            var timestamp = new Date();\n\n            this._fireEvent('second', {\n                timestamp: timestamp\n            })\n        },\n\n        _tick: function(){\n            var element = this.element, o = this.options;\n            var timestamp = new Date();\n            var result = \"\";\n            var h = timestamp.getHours(),\n                i = timestamp.getMinutes(),\n                s = timestamp.getSeconds(),\n                d = timestamp.getDate(),\n                m = timestamp.getMonth() + 1,\n                y = timestamp.getFullYear(),\n                a = '';\n\n            if (parseInt(o.timeFormat) === 12) {\n                a = \" AM\";\n                if (h > 11) { a = \" PM\"; }\n                if (h > 12) { h = h - 12; }\n                if (h === 0) { h = 12; }\n            }\n\n            i = this._addLeadingZero(i);\n            s = this._addLeadingZero(s);\n\n            if (o.leadingZero) {\n                h = this._addLeadingZero(h);\n                m = this._addLeadingZero(m);\n                d = this._addLeadingZero(d);\n            }\n\n            if (o.showDate) {\n                if (o.dateFormat === 'american') {\n                    result += \"<span class='date-month'>\" + m + \"</span>\";\n                    result += \"<span class='date-divider'>\" + o.dateDivider + \"</span>\";\n                    result += \"<span class='date-day'>\" + d + \"</span>\";\n                    result += \"<span class='date-divider'>\" + o.dateDivider + \"</span>\";\n                    result += \"<span class='date-year'>\" + y + \"</span>\";\n                } else {\n                    result += \"<span class='date-day'>\" + d + \"</span>\";\n                    result += \"<span class='date-divider'>\" + o.dateDivider + \"</span>\";\n                    result += \"<span class='date-month'>\" + m + \"</span>\";\n                    result += \"<span class='date-divider'>\" + o.dateDivider + \"</span>\";\n                    result += \"<span class='date-year'>\" + y + \"</span>\";\n                }\n                result += o.divider;\n            }\n\n            if (o.showTime) {\n                result += \"<span class='clock-hour'>\" + h + \"</span>\";\n                result += \"<span class='clock-divider'>\" + o.timeDivider + \"</span>\";\n                result += \"<span class='clock-minute'>\" + i + \"</span>\";\n                result += \"<span class='clock-divider'>\" + o.timeDivider + \"</span>\";\n                result += \"<span class='clock-second'>\" + s + \"</span>\";\n                result += \"<span class='clock-suffix'>\" + a + \"</span>\";\n            }\n\n            element.html(result);\n\n            this._fireEvent('tick', {\n                timestamp: timestamp\n            })\n        },\n\n        /* eslint-disable-next-line */\n        changeAttribute: function(attributeName){\n        },\n\n        destroy: function(){\n            clearInterval(this._clockInterval);\n            this._clockInterval = null;\n            return this.element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var CollapseDefaultConfig = {\n        collapseDeferred: 0,\n        collapsed: false,\n        toggleElement: false,\n        duration: 100,\n        onExpand: Metro.noop,\n        onCollapse: Metro.noop,\n        onCollapseCreate: Metro.noop\n    };\n\n    Metro.collapseSetup = function (options) {\n        CollapseDefaultConfig = $.extend({}, CollapseDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroCollapseSetup\"] !== undefined) {\n        Metro.collapseSetup(window[\"metroCollapseSetup\"]);\n    }\n\n    Metro.Component('collapse', {\n        init: function( options, elem ) {\n            this._super(elem, options, CollapseDefaultConfig, {\n                toggle: null\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var that = this, element = this.element, o = this.options;\n            var toggle;\n\n            toggle = o.toggleElement !== false ? $(o.toggleElement) : element.siblings('.collapse-toggle').length > 0 ? element.siblings('.collapse-toggle') : element.siblings('a:nth-child(1)');\n\n            if (o.collapsed === true || element.attr(\"collapsed\") === true) {\n                element.hide(0);\n            }\n\n            toggle.on(Metro.events.click, function(e){\n                if (element.css('display') === 'block' && !element.hasClass('keep-open')) {\n                    that._close(element);\n                } else {\n                    that._open(element);\n                }\n\n                if ([\"INPUT\"].indexOf(e.target.tagName) === -1) {\n                    e.preventDefault();\n                }\n                e.stopPropagation();\n            });\n\n            this.toggle = toggle;\n\n            this._fireEvent(\"collapse-create\", {\n                element: element\n            });\n        },\n\n        _close: function(el, immediate){\n            var elem = $(el);\n            var dropdown  = Metro.getPlugin(elem[0], \"collapse\");\n            var options = dropdown.options;\n            var func = immediate ? 'show' : 'slideUp';\n            var dur = immediate ? 0 : options.duration;\n\n            this.toggle.removeClass(\"active-toggle\");\n\n            elem[func](dur, function(){\n                el.trigger(\"onCollapse\", null, el);\n                el.data(\"collapsed\", true);\n                el.addClass(\"collapsed\");\n\n                dropdown._fireEvent(\"collapse\");\n            });\n        },\n\n        _open: function(el, immediate){\n            var elem = $(el);\n            var dropdown  = Metro.getPlugin(elem[0], \"collapse\");\n            var options = dropdown.options;\n            var func = immediate ? 'show' : 'slideDown';\n            var dur = immediate ? 0 : options.duration;\n\n            this.toggle.addClass(\"active-toggle\");\n\n            elem[func](dur, function(){\n                el.trigger(\"onExpand\", null, el);\n                el.data(\"collapsed\", false);\n                el.removeClass(\"collapsed\");\n\n                dropdown._fireEvent(\"expand\");\n            });\n        },\n\n        collapse: function(immediate){\n            this._close(this.element, immediate);\n        },\n\n        expand: function(immediate){\n            this._open(this.element, immediate);\n        },\n\n        close: function(immediate){\n            this._close(this.element, immediate);\n        },\n\n        open: function(immediate){\n            this._open(this.element, immediate);\n        },\n\n        isCollapsed: function(){\n            return this.element.data(\"collapsed\");\n        },\n\n        toggleState: function(){\n            var element = this.element;\n            if (element.attr(\"collapsed\") === true || element.data(\"collapsed\") === true) {\n                this.collapse();\n            } else {\n                this.expand();\n            }\n        },\n\n        changeAttribute: function(attributeName){\n            switch (attributeName) {\n                case \"collapsed\":\n                case \"data-collapsed\": this.toggleState(); break;\n            }\n        },\n\n        destroy: function(){\n            this.toggle.off(Metro.events.click);\n            return this.element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n\n    var Utils = Metro.utils;\n    var ColorPickerDefaultConfig = {\n        duration: 100,\n        prepend: \"\",\n        append: \"\",\n        clearButton: false,\n        clearButtonIcon: \"<span class='default-icon-cross'></span>\",\n        pickerButtonIcon: \"<span class='default-icon-equalizer'></span>\",\n        defaultValue: \"rgba(0, 0, 0, 0)\",\n        copyInlineStyles: false,\n        clsPickerButton: \"\",\n        clsClearButton: \"\",\n        onColorSelected: Metro.noop,\n        onColorPickerCreate: Metro.noop\n    };\n\n    Metro.colorPickerSetup = function (options) {\n        ColorPickerDefaultConfig = $.extend({}, ColorPickerDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroColorPickerSetup\"] !== undefined) {\n        Metro.colorPickerSetup(window[\"metroColorPickerSetup\"]);\n    }\n\n    Metro.Component('color-picker', {\n        init: function( options, elem ) {\n            this._super(elem, options, $.extend({}, Metro.defaults.ColorSelector, {\n                showUserColors: false,\n                showValues: \"\"\n            }, ColorPickerDefaultConfig), {\n                value: null,\n                picker: null,\n                colorSelector: null,\n                colorSelectorBox: null,\n                colorExample: null,\n                inputInterval: null,\n                isOpen: false\n            });\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n            var current = element.val();\n\n            if (!Metro.pluginExists(\"color-selector\")) {\n                throw new Error(\"Color selector component required!\");\n            }\n\n            this.value = Metro.colors.isColor(current) ? current : Metro.colors.isColor(o.defaultValue) ? o.defaultValue : \"rgba(0,0,0,0)\";\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent('color-picker-create');\n        },\n\n        _createStructure: function(){\n            var that = this, element = this.element, o = this.options;\n            var picker = element.wrap( $(\"<div>\").addClass(\"color-picker\").addClass(element[0].className) );\n            var buttons, colorExample, colorSelector, colorSelectorBox;\n\n            colorExample = $(\"<div>\").addClass(\"color-example-box\").insertBefore(element);\n\n            buttons = $(\"<div>\").addClass(\"buttons\").appendTo(picker);\n\n            buttons.append(\n                $(\"<button>\")\n                    .addClass(\"button color-picker-button\")\n                    .addClass(o.clsPickerButton)\n                    .attr(\"tabindex\", -1)\n                    .attr(\"type\", \"button\")\n                    .html(o.pickerButtonIcon)\n            );\n\n            if (o.clearButton === true && !element[0].readOnly) {\n                buttons.append(\n                    $(\"<button>\")\n                        .addClass(\"button input-clear-button\")\n                        .addClass(o.clsClearButton)\n                        .attr(\"tabindex\", -1)\n                        .attr(\"type\", \"button\")\n                        .html(o.clearButtonIcon)\n                );\n            }\n\n            if (Utils.isValue(o.prepend)) {\n                picker.prepend($(\"<div>\").addClass(\"prepend\").addClass(o.clsPrepend).html(o.prepend));\n            }\n\n            if (Utils.isValue(o.append)) {\n                picker.append($(\"<div>\").html(o.append).addClass(\"append\").addClass(o.clsAppend));\n            }\n\n            colorSelectorBox = $(\"<div>\").addClass(\"color-selector-box\").appendTo(picker);\n            colorSelector = $(\"<div>\").appendTo(colorSelectorBox);\n\n            this.picker = picker;\n            this.colorExample = colorExample;\n            this.colorSelector = colorSelector;\n            this.colorSelectorBox = colorSelectorBox;\n\n            Metro.makePlugin(colorSelector, 'color-selector', {\n                defaultSwatches: o.defaultSwatches,\n                userColors: o.userColors,\n                returnValueType: o.returnValueType,\n                returnAsString: o.returnAsString,\n                showValues: o.showValues,\n                showAsString: o.showAsString,\n                showUserColors: o.showUserColors,\n                target: o.target,\n                controller: element,\n                locale: o.locale,\n                addUserColorTitle: o.addUserColorTitle,\n                userColorsTitle: o.userColorsTitle,\n                hslMode: o.hslMode,\n                showAlphaChannel: o.showAlphaChannel,\n                inputThreshold: o.inputThreshold,\n                initColor: this.value,\n                readonlyInput: o.readonlyInput,\n                clsSelector: o.clsSelector,\n                clsSwatches: o.clsSwatches,\n                clsSwatch: o.clsSwatch,\n                clsValue: o.clsValue,\n                clsLabel: o.clsLabel,\n                clsInput: o.clsInput,\n                clsUserColorButton: o.clsUserColorButton,\n                clsUserColors: o.clsUserColors,\n                clsUserColorsTitle: o.clsUserColorsTitle,\n                clsUserColor: o.clsUserColor,\n                onColor: o.onColor,\n                onColorSelectorCreate: o.onColorSelectorCreate\n            });\n\n            Metro.makePlugin(colorSelectorBox, 'dropdown', {\n                dropFilter: \".color-picker\",\n                duration: o.duration,\n                toggleElement: [picker],\n                checkDropUp: true,\n                onDrop: function(){\n                    Metro.getPlugin(colorSelector, 'color-selector').val(that.value);\n                }\n            });\n\n            element[0].className = '';\n\n            if (o.copyInlineStyles === true) {\n                $.each(Utils.getInlineStyles(element), function(key, value){\n                    picker.css(key, value);\n                });\n            }\n\n            this._setColor();\n        },\n\n        _clearInputInterval: function(){\n            clearInterval(this.inputInterval);\n            this.inputInterval = false;\n        },\n\n        _setColor: function(){\n            var colorExample = this.colorExample;\n            var color = this.value;\n\n            if (this.value.indexOf(\"cmyk\") !== -1 || this.value.indexOf(\"hsv\") !== -1) {\n                color = Metro.colors.toHEX(this.value);\n            }\n\n            colorExample.css({\n                backgroundColor: color\n            });\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var picker = this.picker,\n                colorSelector = this.colorSelector,\n                colorSelectorBox = this.colorSelector;\n\n            picker.on(Metro.events.click, \".input-clear-button\", function(e){\n                e.preventDefault();\n                e.stopPropagation();\n                element.val(o.defaultValue).trigger(\"change\");\n                Metro.getPlugin(colorSelector, 'color-selector').val(o.defaultValue);\n            });\n\n            element.on(Metro.events.inputchange, function(){\n                that.value = this.value;\n                that._setColor();\n            });\n\n            colorSelectorBox.on(Metro.events.click, function(e){\n                e.stopPropagation();\n            })\n        },\n\n        val: function(v){\n            if (arguments.length === 0 || !Utils.isValue(v)) {\n                return this.value;\n            }\n\n            if (!Metro.colors.isColor(v)) {\n                return ;\n            }\n\n            this.value = v;\n            this.element.val(v).trigger(\"change\");\n            this._setColor();\n        },\n\n        // changeAttribute: function(attr, newValue){\n        // },\n\n        destroy: function(){\n            this.element.remove();\n        }\n    });\n\n    $(document).on(Metro.events.click, function(){\n        $(\".color-picker\").removeClass(\"open\");\n    });\n\n}(Metro, m4q));\n\r\n\r\n(function(Metro, $) {\n    'use strict';\n\n    var supportedColorTypes = \"hex, rgb, rgba, hsl, hsla, hsv, cmyk\";\n    var Utils = Metro.utils;\n    var ColorSelectorDefaultConfig = {\n        defaultSwatches: \"#FFFFFF,#000000,#FFFB0D,#0532FF,#FF9300,#00F91A,#FF2700,#686868,#EE5464,#D27AEE,#5BA8C4,#E64AA9,#1ba1e2,#6a00ff,#bebebe,#f8f8f8\",\n        userColors: null,\n        returnValueType: \"hex\",\n        returnAsString: true,\n        showValues: supportedColorTypes,\n        showAsString: null,\n        showUserColors: true,\n        controller: null,\n        locale: \"en-US\",\n        addUserColorTitle: null,\n        userColorsTitle: null,\n        hslMode: \"percent\",\n        showAlphaChannel: true,\n        inputThreshold: 300,\n        initColor: null,\n        readonlyInput: false,\n        clsSelector: \"\",\n        clsSwatches: \"\",\n        clsSwatch: \"\",\n        clsValue: \"\",\n        clsLabel: \"\",\n        clsInput: \"\",\n        clsUserColorButton: \"\",\n        clsUserColors: \"\",\n        clsUserColorsTitle: \"\",\n        clsUserColor: \"\",\n        onSelectColor: Metro.noop,\n        onColorSelectorCreate: Metro.noop\n    };\n\n    Metro.colorSelectorSetup = function (options) {\n        ColorSelectorDefaultConfig = $.extend({}, ColorSelectorDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroColorSelectorSetup\"] !== undefined) {\n        Metro.colorSelectorSetup(window[\"metroColorSelectorSetup\"]);\n    }\n\n    Metro.Component('color-selector', {\n        init: function( options, elem ) {\n            this._super(elem, options, ColorSelectorDefaultConfig, {\n                // define instance vars here\n                id: Utils.elementId(\"color-selector\"),\n                defaultSwatches: [],\n                showValues: [],\n                userColors: [],\n                showAsString: [],\n                hue: 0,\n                saturation: 0,\n                lightness: 1,\n                alpha: 1,\n                hsl: null,\n                hsla: null,\n                hsv: null,\n                rgb: null,\n                rgba: null,\n                cmyk: null,\n                hex: null,\n                inputInterval: null,\n                locale: null\n            });\n            return this;\n        },\n\n        _create: function(){\n            var o = this.options;\n\n            if (Utils.isValue(o.defaultSwatches)) this.defaultSwatches = o.defaultSwatches.toArray(\",\").map(function (el){return el.toUpperCase();});\n            if (Utils.isValue(o.showValues)) this.showValues = o.showValues.toArray(\",\");\n            if (Utils.isValue(o.userColors)) this.userColors = o.userColors.toArray(\",\").map(function (el){return el.toUpperCase();});\n            if (Utils.isValue(o.showAsString)) this.showAsString = o.showAsString.toArray(\",\");\n\n            this.locale = Metro.locales[o.locale]['colorSelector'];\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent('color-selector-create');\n        },\n\n        _createStructure: function(){\n            var that = this, element = this.element, o = this.options, locale = this.locale;\n            var colorBox, row, swatches, map, value, inputs, radios,\n                userColorsActions, hueCanvas, shadeCanvas, hueCursor, shadeCursor,\n                colorBlock, alphaCanvas, alphaCursor;\n\n            element.addClass(\"color-selector\").addClass(o.clsSelector);\n\n            element.append( colorBox = $(\"<div>\").addClass(\"color-box\") );\n\n            colorBox.append( row = $(\"<div>\").addClass(\"row\") );\n\n            row.append( swatches = $(\"<div>\").addClass(\"default-swatches\").addClass(o.clsSwatches) );\n            $.each(this.defaultSwatches, function(){\n                swatches.append(\n                    $(\"<button>\")\n                        .attr(\"data-color\", this)\n                        .attr(\"type\", \"button\")\n                        .addClass(\"swatch\")\n                        .addClass(o.clsSwatch)\n                        .css(\"background-color\", this)\n                );\n            });\n\n            colorBox.append( row = $(\"<div>\").addClass(\"row\") );\n\n            row.append( map = $(\"<div>\").addClass(\"color-map\") );\n            map.append( shadeCursor = $(\"<button>\").attr(\"type\", \"button\").addClass(\"cursor color-cursor\") )\n            map.append( shadeCanvas = $(\"<canvas>\").addClass(\"color-canvas\") )\n\n            row.append( map = $(\"<div>\").addClass(\"hue-map\") );\n            map.append( hueCursor = $(\"<button>\").attr(\"type\", \"button\").addClass(\"cursor hue-cursor\") )\n            map.append( hueCanvas = $(\"<canvas>\").addClass(\"hue-canvas\") )\n\n            row.append( map = $(\"<div>\").addClass(\"alpha-map\") );\n            map.append( alphaCursor = $(\"<button>\").attr(\"type\", \"button\").addClass(\"cursor alpha-cursor\") )\n            map.append( alphaCanvas = $(\"<canvas>\").addClass(\"alpha-canvas\") )\n\n            colorBox.append( row = $(\"<div>\").addClass(\"row color-values-block\") );\n\n            row.append( value = $(\"<div>\").addClass(\"color-value-hex\") );\n            value.append( $(\"<input type='radio' name='returnType' value='hex' checked>\").addClass(\"check-color-value-hex\") );\n            value.append( colorBlock = $(\"<div>\").addClass(\"color-block as-string color-hex\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='HEX:'>\").addClass(\"input-small value-hex\") );\n\n            row.append( value = $(\"<div>\").addClass(\"color-value-rgb\") );\n            value.append( $(\"<input type='radio' name='returnType' value='rgb'>\").addClass(\"check-color-value-rgb\") );\n            value.append( colorBlock = $(\"<div>\").addClass(\"color-block color-rgb\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='R:'>\").addClass(\"input-small value-r\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='G:'>\").addClass(\"input-small value-g\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='B:'>\").addClass(\"input-small value-b\") );\n            value.append( colorBlock = $(\"<div>\").addClass(\"color-block as-string color-rgb\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='RGB:'>\").addClass(\"input-small value-rgb\") );\n\n            if (this.showAsString.indexOf(\"rgb\") > -1) {\n                value.find(\".value-r,.value-g,.value-b\").parent().hide();\n            } else {\n                value.find(\".value-rgb\").parent().hide();\n            }\n\n            row.append( value = $(\"<div>\").addClass(\"color-value-rgba\") );\n            value.append( $(\"<input type='radio' name='returnType' value='rgba'>\").addClass(\"check-color-value-rgba\") );\n            value.append( colorBlock = $(\"<div>\").addClass(\"color-block color-rgba\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='R:'>\").addClass(\"input-small value-r\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='G:'>\").addClass(\"input-small value-g\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='B:'>\").addClass(\"input-small value-b\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='A:'>\").addClass(\"input-small value-a\") );\n            value.append( colorBlock = $(\"<div>\").addClass(\"color-block as-string color-rgba\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='RGBA:'>\").addClass(\"input-small value-rgba\") );\n\n            if (this.showAsString.indexOf(\"rgba\") > -1) {\n                value.find(\".value-r,.value-g,.value-b,.value-a\").parent().hide();\n            } else {\n                value.find(\".value-rgba\").parent().hide();\n            }\n\n            row.append( value = $(\"<div>\").addClass(\"color-value-hsl\") );\n            value.append( $(\"<input type='radio' name='returnType' value='hsl'>\").addClass(\"check-color-value-hsl\") );\n            value.append( colorBlock = $(\"<div>\").addClass(\"color-block color-hsl\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='H:'>\").addClass(\"input-small value-h\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='S:'>\").addClass(\"input-small value-s\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='L:'>\").addClass(\"input-small value-l\") );\n            value.append( colorBlock = $(\"<div>\").addClass(\"color-block as-string color-hsl\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='HSL:'>\").addClass(\"input-small value-hsl\") );\n\n            if (this.showAsString.indexOf(\"hsl\") > -1) {\n                value.find(\".value-h,.value-s,.value-l\").parent().hide();\n            } else {\n                value.find(\".value-hsl\").parent().hide();\n            }\n\n            row.append( value = $(\"<div>\").addClass(\"color-value-hsla\") );\n            value.append( $(\"<input type='radio' name='returnType' value='hsla'>\").addClass(\"check-color-value-hsla\") );\n            value.append( colorBlock = $(\"<div>\").addClass(\"color-block color-hsla\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='H:'>\").addClass(\"input-small value-h\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='S:'>\").addClass(\"input-small value-s\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='L:'>\").addClass(\"input-small value-l\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='A:'>\").addClass(\"input-small value-a\") );\n            value.append( colorBlock = $(\"<div>\").addClass(\"color-block as-string color-hsla\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='HSLA:'>\").addClass(\"input-small value-hsla\") );\n\n            if (this.showAsString.indexOf(\"hsla\") > -1) {\n                value.find(\".value-h,.value-s,.value-l,.value-a\").parent().hide();\n            } else {\n                value.find(\".value-hsla\").parent().hide();\n            }\n\n            row.append( value = $(\"<div>\").addClass(\"color-value-hsv\") );\n            value.append( $(\"<input type='radio' name='returnType' value='hsv'>\").addClass(\"check-color-value-hsl\") );\n            value.append( colorBlock = $(\"<div>\").addClass(\"color-block color-hsv\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='H:'>\").addClass(\"input-small value-h\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='S:'>\").addClass(\"input-small value-s\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='V:'>\").addClass(\"input-small value-v\") );\n            value.append( colorBlock = $(\"<div>\").addClass(\"color-block as-string color-hsv\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='HSV:'>\").addClass(\"input-small value-hsv\") );\n\n            if (this.showAsString.indexOf(\"hsv\") > -1) {\n                value.find(\".value-h,.value-s,.value-v\").parent().hide();\n            } else {\n                value.find(\".value-hsv\").parent().hide();\n            }\n\n            row.append( value = $(\"<div>\").addClass(\"color-value-cmyk\") );\n            value.append( $(\"<input type='radio' name='returnType' value='cmyk'>\").addClass(\"check-color-value-cmyk\") );\n            value.append( colorBlock = $(\"<div>\").addClass(\"color-block color-cmyk\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='C:'>\").addClass(\"input-small value-c\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='M:'>\").addClass(\"input-small value-m\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='Y:'>\").addClass(\"input-small value-y\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='K:'>\").addClass(\"input-small value-k\") );\n            value.append( colorBlock = $(\"<div>\").addClass(\"color-block as-string color-cmyk\") );\n            colorBlock.append( $(\"<input type='text' data-prepend='CMYK:'>\").addClass(\"input-small value-cmyk\") );\n\n            if (this.showAsString.indexOf(\"cmyk\") > -1) {\n                value.find(\".value-s,.value-m,.value-y,.value-k\").parent().hide();\n            } else {\n                value.find(\".value-cmyk\").parent().hide();\n            }\n\n            colorBox.append( row = $(\"<div>\").addClass(\"row user-colors-container\") );\n            row.append( $(\"<div>\").addClass(\"user-colors-title\").addClass(o.clsUserColorsTitle).html(o.userColorsTitle || locale['userColorsTitle']) );\n            row.append( $(\"<div>\").addClass(\"user-colors\").addClass(o.clsUserColors) );\n            row.append( userColorsActions = $(\"<div>\").addClass(\"user-colors-actions\") );\n            userColorsActions.append(\n                $(\"<button>\")\n                    .addClass(\"button add-button\")\n                    .addClass(o.clsUserColorButton)\n                    .html(\"<span class='user-swatch'></span><span>\"+(o.addUserColorTitle || locale['addUserColorButton'])+\"</span>\")\n            );\n\n            inputs = colorBox.find(\"input[type=text]\");\n            Metro.makePlugin(inputs, 'input', {\n                clearButton: false,\n                clsPrepend: o.clsLabel,\n                clsComponent: o.clsInput\n            });\n            inputs.addClass(o.clsValue);\n\n            if (o.readonlyInput) {\n                inputs.attr(\"readonly\", true);\n            }\n\n            radios = colorBox.find(\"input[type=radio]\").each(function(){\n                $(this).attr(\"name\", that.id + \"-returnType\");\n            });\n            radios.each(function(){\n                if ($(this).val() === o.returnValueType) {\n                    this.checked = true;\n                }\n            });\n            Metro.makePlugin(radios, 'radio', {\n                style: 2\n            });\n\n            $.each(supportedColorTypes.toArray(\",\"), function(){\n                if (that.showValues.indexOf(this) === -1) element.find(\".color-value-\"+this).hide();\n            });\n\n            if (!o.showUserColors) {\n                element.find(\".user-colors-container\").hide();\n            }\n\n            if (!o.showAlphaChannel) {\n                element.addClass(\"no-alpha-channel\");\n                $.each([\"rgba\", \"hsla\"], function(){\n                    element.find(\".color-value-\"+this).hide();\n                });\n            }\n\n            this._fillUserColors();\n\n            this.hueCanvas = hueCanvas;\n            this.hueCursor = hueCursor;\n            this.shadeCanvas = shadeCanvas;\n            this.shadeCursor = shadeCursor;\n            this.alphaCanvas = alphaCanvas;\n            this.alphaCursor = alphaCursor;\n\n            this._createShadeCanvas();\n            this._createHueCanvas();\n            this._createAlphaCanvas();\n            this._setColorValues();\n            this._updateCursorsColor();\n\n            if (o.initColor && Metro.colors.isColor(o.initColor)) {\n                this._colorToPos(typeof o.initColor === \"string\" ? Metro.colors.parse(o.initColor) : o.initColor);\n            }\n        },\n\n        _createShadeCanvas: function(color){\n            var canvas = this.shadeCanvas[0];\n            var ctx = canvas.getContext('2d');\n\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n            if(!color) color = '#f00';\n\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n            ctx.fillStyle = color;\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n            var whiteGradient = ctx.createLinearGradient(0, 0, canvas.width, 0);\n            whiteGradient.addColorStop(0, \"#fff\");\n            whiteGradient.addColorStop(1, \"transparent\");\n            ctx.fillStyle = whiteGradient;\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n            var blackGradient = ctx.createLinearGradient(0, 0, 0, canvas.height);\n            blackGradient.addColorStop(0, \"transparent\");\n            blackGradient.addColorStop(1, \"#000\");\n            ctx.fillStyle = blackGradient;\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n        },\n\n        _createHueCanvas: function(){\n            var canvas = this.hueCanvas[0];\n            var ctx = canvas.getContext('2d');\n            var hueGradient = ctx.createLinearGradient(0, 0, 0, canvas.height);\n\n            hueGradient.addColorStop(0.00, \"hsl(0,100%,50%)\");\n            hueGradient.addColorStop(0.17, \"hsl(298.8, 100%, 50%)\");\n            hueGradient.addColorStop(0.33, \"hsl(241.2, 100%, 50%)\");\n            hueGradient.addColorStop(0.50, \"hsl(180, 100%, 50%)\");\n            hueGradient.addColorStop(0.67, \"hsl(118.8, 100%, 50%)\");\n            hueGradient.addColorStop(0.83, \"hsl(61.2,100%,50%)\");\n            hueGradient.addColorStop(1.00, \"hsl(360,100%,50%)\");\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n            ctx.fillStyle = hueGradient;\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n        },\n\n        _createAlphaCanvas: function(){\n            var canvas = this.alphaCanvas[0];\n            var ctx = canvas.getContext('2d');\n            var alphaGradient = ctx.createLinearGradient(0, 0, 0, canvas.height);\n            var startColor = new Metro.colorPrimitive.HSLA(this.hue, 1, .5, 1).toString(), endColor = \"rgba(0,0,0,0)\";\n\n            alphaGradient.addColorStop(0.00, startColor);\n            alphaGradient.addColorStop(1.00, endColor);\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n            ctx.fillStyle = alphaGradient;\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n        },\n\n        _updateHueCursor: function(y){\n            this.hueCursor.css({\n                \"top\": y\n            });\n        },\n\n        _updateAlphaCursor: function(y){\n            this.alphaCursor.css({\n                \"top\": y\n            });\n        },\n\n        _getHueColor: function(pageY){\n            var canvas = this.hueCanvas;\n            var offset = canvas.offset();\n            var height = canvas.height();\n            var y, percent, color, hue;\n\n            y = pageY - offset.top;\n\n            if ( y > height ) y = height;\n            if ( y < 0 ) y = 0;\n\n            percent = y / height;\n            hue = 360 - (360 * percent);\n            if (hue === 360) hue = 0;\n            color = \"hsl(\"+ hue +\", 100%, 50%)\";\n            this.hue = hue;\n\n            this._createShadeCanvas(color);\n            this._createAlphaCanvas();\n            this._updateHueCursor(y);\n            this._updateCursorsColor();\n            this._setColorValues();\n        },\n\n        _getAlphaValue: function(pageY){\n            var canvas = this.alphaCanvas;\n            var offset = canvas.offset();\n            var height = canvas.height();\n            var y, percent;\n\n            y = pageY - offset.top;\n\n            if ( y > height ) y = height;\n            if ( y < 0 ) y = 0;\n\n            percent = 1 - y / height;\n            this.alpha = percent.toFixed(2);\n\n            this._updateAlphaCursor(y);\n            this._updateCursorsColor();\n            this._setColorValues();\n        },\n\n        _getShadeColor: function(pageX, pageY){\n            var canvas = this.shadeCanvas;\n            var offset = canvas.offset();\n            var width = canvas.width();\n            var height = canvas.height();\n            var x = pageX - offset.left;\n            var y = pageY - offset.top;\n\n            if(x > width) x = width;\n            if(x < 0) x = 0;\n            if(y > height) y = height;\n            if(y < 0) y = .1;\n\n            var xRatio = x / width * 100;\n            var yRatio = y / height * 100;\n            var hsvValue = 1 - (yRatio / 100);\n            var hsvSaturation = xRatio / 100;\n            var lightness = (hsvValue / 2) * (2 - hsvSaturation);\n            var saturation = (hsvValue * hsvSaturation) / (1 - Math.abs(2 * lightness - 1));\n\n            if (isNaN(lightness)) {\n                lightness = 0;\n            }\n\n            if (isNaN(saturation)) {\n                saturation = 0;\n            }\n\n            this.lightness = lightness;\n            this.saturation = saturation;\n\n            this._updateShadeCursor(x, y);\n            this._updateCursorsColor();\n            this._setColorValues();\n        },\n\n        _updateCursorsColor: function(){\n            this.shadeCursor.css({backgroundColor: Metro.colors.toHEX(new Metro.colorPrimitive.HSL(this.hue, this.saturation, this.lightness))});\n            this.hueCursor.css({backgroundColor: Metro.colors.toHEX(new Metro.colorPrimitive.HSL(this.hue, 1, .5))});\n            this.alphaCursor.css({backgroundColor: Metro.colors.toRGBA(new Metro.colorPrimitive.HSL(this.hue, 1, .5), this.alpha).toString()});\n        },\n\n        _updateShadeCursor: function(x, y){\n            this.shadeCursor.css({\n                top: y,\n                left: x\n            })\n        },\n\n        _colorToPos: function (color){\n            var shadeCanvasRect = this.shadeCanvas[0].getBoundingClientRect();\n            var hueCanvasRect = this.hueCanvas[0].getBoundingClientRect();\n            var alphaCanvasRect = this.alphaCanvas[0].getBoundingClientRect();\n            var hsl = Metro.colors.toHSL(color);\n            var hsla = Metro.colors.toHSLA(color, color.a);\n            var hsv = Metro.colors.toHSV(color);\n            var x = shadeCanvasRect.width * hsv.s;\n            var y = shadeCanvasRect.height * (1 - hsv.v);\n            var hueY = hueCanvasRect.height - ((hsl.h / 360) * hueCanvasRect.height);\n            var alphaY = (1 - hsla.a) * alphaCanvasRect.height;\n\n            this.hue = hsl.h;\n            this.saturation = hsl.s;\n            this.lightness = hsl.l;\n            this.alpha = hsla.a;\n\n            this._updateHueCursor(hueY);\n            this._updateShadeCursor(x, y);\n            this._updateAlphaCursor(alphaY);\n            this._updateCursorsColor();\n            this._createShadeCanvas(\"hsl(\"+ this.hue +\", 100%, 50%)\");\n            this._createAlphaCanvas();\n            this._setColorValues();\n        },\n\n        _setColorValues: function(){\n            var element = this.element, o = this.options;\n            var hsl = Metro.colors.toHSL(new Metro.colorPrimitive.HSL(this.hue, this.saturation, this.lightness));\n            var hsla = Metro.colors.toHSLA(new Metro.colorPrimitive.HSLA(this.hue, this.saturation, this.lightness, this.alpha));\n            var rgb = Metro.colors.toRGB(hsl);\n            var rgba = Metro.colors.toRGBA(rgb, this.alpha);\n            var hsv = Metro.colors.toHSV(hsl);\n            var cmyk = Metro.colors.toCMYK(hsl);\n            var hex = Metro.colors.toHEX(hsl);\n            var controller = $(o.controller);\n            var percent = o.hslMode === \"percent\";\n\n            this.hsl = hsl;\n            this.hsla = hsla;\n            this.hsv = hsv;\n            this.rgb = rgb;\n            this.rgba = rgba;\n            this.hex = hex;\n            this.cmyk = cmyk;\n\n            element.find(\".color-value-hex .value-hex input\").val(hex);\n\n            element.find(\".color-value-rgb .value-r input\").val(rgb.r);\n            element.find(\".color-value-rgb .value-g input\").val(rgb.g);\n            element.find(\".color-value-rgb .value-b input\").val(rgb.b);\n            element.find(\".color-value-rgb .value-rgb input\").val(rgb.toString());\n\n            element.find(\".color-value-rgba .value-r input\").val(rgba.r);\n            element.find(\".color-value-rgba .value-g input\").val(rgba.g);\n            element.find(\".color-value-rgba .value-b input\").val(rgba.b);\n            element.find(\".color-value-rgba .value-a input\").val(rgba.a);\n            element.find(\".color-value-rgba .value-rgba input\").val(rgba.toString());\n\n            element.find(\".color-value-hsl .value-h input\").val(hsl.h.toFixed(0));\n            element.find(\".color-value-hsl .value-s input\").val(percent ? Math.round(hsl.s*100)+\"%\" : hsl.s.toFixed(4));\n            element.find(\".color-value-hsl .value-l input\").val(percent ? Math.round(hsl.l*100)+\"%\" : hsl.l.toFixed(4));\n            element.find(\".color-value-hsl .value-hsl input\").val(hsl.toString());\n\n            element.find(\".color-value-hsla .value-h input\").val(hsla.h.toFixed(0));\n            element.find(\".color-value-hsla .value-s input\").val(percent ? Math.round(hsla.s*100)+\"%\" : hsl.s.toFixed(4));\n            element.find(\".color-value-hsla .value-l input\").val(percent ? Math.round(hsla.l*100)+\"%\" : hsl.l.toFixed(4));\n            element.find(\".color-value-hsla .value-a input\").val(hsla.a);\n            element.find(\".color-value-hsla .value-hsla input\").val(hsla.toString());\n\n            element.find(\".color-value-hsv .value-h input\").val(hsv.h.toFixed(0));\n            element.find(\".color-value-hsv .value-s input\").val(percent ? Math.round(hsv.s*100)+\"%\" : hsv.s.toFixed(4));\n            element.find(\".color-value-hsv .value-v input\").val(percent ? Math.round(hsv.v*100)+\"%\" : hsv.v.toFixed(4));\n            element.find(\".color-value-hsv .value-hsv input\").val(hsv.toString());\n\n            element.find(\".color-value-cmyk .value-c input\").val(cmyk.c.toFixed(0));\n            element.find(\".color-value-cmyk .value-m input\").val(cmyk.m.toFixed(0));\n            element.find(\".color-value-cmyk .value-y input\").val(cmyk.y.toFixed(0));\n            element.find(\".color-value-cmyk .value-k input\").val(cmyk.k.toFixed(0));\n            element.find(\".color-value-cmyk .value-cmyk input\").val(cmyk.toString());\n\n            element.find(\".user-colors-actions .user-swatch\").css({\n                backgroundColor: hex\n            });\n\n            if (controller && controller.length) {\n                controller.val(this.val()).trigger(\"change\");\n            }\n\n            this._fireEvent(\"select-color\", {\n                color: this.val(),\n                primitive: {\n                    hsl: this.hsl,\n                    hsla: this.hsla,\n                    rgb: this.rgb,\n                    rgba: this.rgba,\n                    hsv: this.hsv,\n                    cmyk: this.cmyk,\n                    hex: this.hex\n                }\n            });\n        },\n\n        _clearInputInterval: function(){\n            clearInterval(this.inputInterval);\n            this.inputInterval = false;\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var hueMap = element.find(\".hue-map\");\n            var alphaMap = element.find(\".alpha-map\");\n            var shadeMap = element.find(\".color-map\");\n            var controller = $(o.controller);\n            var colorValues = element.find(\".color-values-block input[type=text]\");\n\n            colorValues.on(Metro.events.inputchange, function(){\n                var input = $(this);\n\n                that._clearInputInterval();\n\n                if (!that.inputInterval) that.inputInterval = setTimeout(function(){\n                    var colorGroup = input.closest(\".color-block\");\n                    var colorType;\n                    var color, parts;\n\n                    if (colorGroup.hasClass(\"color-hex\")) {\n                        colorType = \"hex\";\n                    } else if (colorGroup.hasClass(\"color-rgb\")) {\n                        colorType = \"rgb\";\n                    } else if (colorGroup.hasClass(\"color-rgba\")) {\n                        colorType = \"rgba\";\n                    } else if (colorGroup.hasClass(\"color-hsl\")) {\n                        colorType = \"hsl\";\n                    } else if (colorGroup.hasClass(\"color-hsla\")) {\n                        colorType = \"hsla\";\n                    } else if (colorGroup.hasClass(\"color-hsv\")) {\n                        colorType = \"hsv\";\n                    } else if (colorGroup.hasClass(\"color-cmyk\")) {\n                        colorType = \"cmyk\";\n                    }\n\n                    if (colorGroup.hasClass(\"as-string\")) {\n                        color = input.val();\n                    } else {\n                        parts = [];\n                        $.each(colorGroup.find(\"input\"), function(){\n                            parts.push(this.value);\n                        });\n                        color = colorType + \"(\" +parts.join(\", \")+ \")\";\n                    }\n                    if (color && Metro.colors.isColor(color)) {\n                        that.val(color);\n                    }\n\n                    that._clearInputInterval();\n                }, o.inputThreshold);\n            });\n\n            if (controller && controller.length) {\n                controller.on(Metro.events.inputchange, function(){\n                    that._clearInputInterval();\n                    if (!that.inputInterval) that.inputInterval = setTimeout(function(){\n                        var val = controller.val();\n                        if (val && Metro.colors.isColor(val)) {\n                            that.val(val);\n                        }\n                        that._clearInputInterval();\n                    }, o.inputThreshold);\n                });\n            }\n\n            alphaMap.on(Metro.events.startAll, function(e){\n\n                that._getAlphaValue(Utils.pageXY(e).y);\n                that.alphaCursor.addClass(\"dragging\");\n\n                $(document).on(Metro.events.moveAll, function(e){\n                    e.preventDefault();\n                    that._getAlphaValue(Utils.pageXY(e).y);\n                }, {ns: that.id, passive: false});\n\n                $(document).on(Metro.events.stopAll, function(){\n                    that.alphaCursor.removeClass(\"dragging\");\n                    $(document).off(Metro.events.moveAll, {ns: that.id});\n                    $(document).off(Metro.events.stopAll, {ns: that.id});\n                }, {ns: that.id});\n            });\n\n            hueMap.on(Metro.events.startAll, function(e){\n\n                that._getHueColor(Utils.pageXY(e).y);\n                that.hueCursor.addClass(\"dragging\");\n\n                $(document).on(Metro.events.moveAll, function(e){\n                    e.preventDefault();\n                    that._getHueColor(Utils.pageXY(e).y);\n                }, {ns: that.id, passive: false});\n\n                $(document).on(Metro.events.stopAll, function(){\n                    that.hueCursor.removeClass(\"dragging\");\n                    $(document).off(Metro.events.moveAll, {ns: that.id});\n                    $(document).off(Metro.events.stopAll, {ns: that.id});\n                }, {ns: that.id});\n            });\n\n            shadeMap.on(Metro.events.startAll, function(e){\n\n                that._getShadeColor(Utils.pageXY(e).x, Utils.pageXY(e).y);\n                that.shadeCursor.addClass(\"dragging\");\n\n                $(document).on(Metro.events.moveAll, function(e){\n                    e.preventDefault();\n                    that._getShadeColor(Utils.pageXY(e).x, Utils.pageXY(e).y);\n                }, {ns: that.id, passive: false});\n\n                $(document).on(Metro.events.stopAll, function(){\n                    that.shadeCursor.removeClass(\"dragging\");\n                    $(document).off(Metro.events.moveAll, {ns: that.id});\n                    $(document).off(Metro.events.stopAll, {ns: that.id});\n                }, {ns: that.id})\n            });\n\n            element.on(\"click\", \".swatch\", function(){\n                that._colorToPos($(this).attr(\"data-color\"));\n            });\n\n            element.on(\"click\", \".add-button\", function(){\n                var color = Metro.colors.toHEX(new Metro.colorPrimitive.HSL(that.hue, that.saturation, that.lightness)).toUpperCase();\n\n                if (that.userColors.indexOf(color) > -1) {\n                    return ;\n                }\n\n                that.userColors.push(color);\n\n                element.find(\".user-colors\").append(\n                    $(\"<button>\")\n                        .attr(\"data-color\", color)\n                        .attr(\"type\", \"button\")\n                        .addClass(\"swatch user-swatch\")\n                        .css({\n                            backgroundColor: color\n                        })\n                );\n            });\n\n            element.find(\"input[type=radio]\").on(\"click\", function(){\n                o.returnValueType = $(this).val();\n                that._setColorValues();\n            });\n        },\n\n        val: function(v){\n            var o = this.options;\n\n            if (!Utils.isValue(v) || !Metro.colors.isColor(v)) {\n                var res;\n                switch (o.returnValueType.toLowerCase()) {\n                    case \"rgb\":\n                        res = this.rgb;\n                        break;\n                    case \"rgba\":\n                        res = this.rgba;\n                        break;\n                    case \"hsl\":\n                        res = this.hsl;\n                        break;\n                    case \"hsla\":\n                        res = this.hsla;\n                        break;\n                    case \"hsv\":\n                        res = this.hsv;\n                        break;\n                    case \"cmyk\":\n                        res = this.cmyk;\n                        break;\n                    default: res = this.hex;\n                }\n                return o.returnAsString ? res.toString() : res;\n            }\n\n            if (!Metro.colors.isColor(v)) {\n                return ;\n            }\n\n            this._colorToPos(Metro.colors.parse(v));\n        },\n\n        user: function(v){\n            if (!Utils.isValue(v)) {\n                return this.userColors;\n            }\n\n            if (!Array.isArray(v) && typeof v !== \"string\") {\n                return ;\n            }\n\n            if (typeof v === \"string\") {\n                this.userColors = v.toArray(\",\").map(function (el){return el.toUpperCase();});\n            } else {\n                this.userColors = v.map(function (el){return el.toUpperCase();});\n            }\n\n            this._fillUserColors();\n        },\n\n        _fillUserColors: function(){\n            var colors = this.element.find(\".user-colors\").clear();\n\n            $.each(this.userColors, function(){\n                var color = this;\n                colors.append(\n                    $(\"<button>\")\n                        .attr(\"data-color\", color)\n                        .attr(\"type\", \"button\")\n                        .addClass(\"swatch user-swatch\")\n                        .css({\n                            backgroundColor: color\n                        })\n                )\n            });\n        },\n\n        changeAttribute: function(attr, newValue){\n            var o = this.options;\n\n            if (attr === \"data-return-value-type\") {\n                o.returnValueType = newValue;\n            }\n\n            if (attr === \"data-return-as-string\") {\n                o.returnValueType = Utils.bool(newValue);\n            }\n        },\n\n        destroy: function(){\n            this.element.remove();\n        }\n    });\n\n    Metro.defaults.ColorSelector = ColorSelectorDefaultConfig;\n}(Metro, m4q));\n\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Types = {\n        HEX: \"hex\",\n        HEXA: \"hexa\",\n        RGB: \"rgb\",\n        RGBA: \"rgba\",\n        HSV: \"hsv\",\n        HSL: \"hsl\",\n        HSLA: \"hsla\",\n        CMYK: \"cmyk\",\n        UNKNOWN: \"unknown\"\n    };\n\n    Metro.colorsSetup = function (options) {\n        ColorsDefaultConfig = $.extend({}, ColorsDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroColorsSetup\"] !== undefined) {\n        Metro.colorsSetup(window[\"metroColorsSetup\"]);\n    }\n\n    var ColorsDefaultConfig = {\n        angle: 30,\n        resultType: 'hex',\n        results: 6,\n        baseLight: \"#ffffff\",\n        baseDark: \"self\"\n    };\n\n    // function HEX(r, g, b) {\n    //     this.r = r || \"00\";\n    //     this.g = g || \"00\";\n    //     this.b = b || \"00\";\n    // }\n    //\n    // HEX.prototype.toString = function(){\n    //     return \"#\" + [this.r, this.g, this.b].join(\"\");\n    // }\n\n    // function dec2hex(d){\n    //     return Math.round(parseFloat(d) * 255).toString(16);\n    // }\n    //\n    // function hex2dec(h){\n    //     return (parseInt(h, 16) / 255);\n    // }\n\n    function shift(h, angle){\n        h += angle;\n        while (h >= 360.0) h -= 360.0;\n        while (h < 0.0) h += 360.0;\n        return h;\n    }\n\n    function clamp(val){\n        return Math.min(1, Math.max(0, val));\n    }\n\n    function RGB(r, g, b){\n        this.r = r || 0;\n        this.g = g || 0;\n        this.b = b || 0;\n    }\n\n    RGB.prototype.toString = function(){\n        return \"rgb(\" + [this.r, this.g, this.b].join(\", \") + \")\";\n    }\n\n    function RGBA(r, g, b, a){\n        this.r = r || 0;\n        this.g = g || 0;\n        this.b = b || 0;\n        this.a = a === 0 ? 0 : a || 1;\n    }\n\n    RGBA.prototype.toString = function(){\n        return \"rgba(\" + [this.r, this.g, this.b, parseFloat(this.a).toFixed(2)].join(\", \") + \")\";\n    }\n\n    function HSV(h, s, v){\n        this.h = h || 0;\n        this.s = s || 0;\n        this.v = v || 0;\n    }\n\n    HSV.prototype.toString2 = function(){\n        return \"hsv(\" + [this.h, this.s, this.v].join(\", \") + \")\";\n    }\n\n    HSV.prototype.toString = function(){\n        return \"hsv(\" + [Math.round(this.h), Math.round(this.s*100)+\"%\", Math.round(this.v*100)+\"%\"].join(\", \") + \")\";\n    }\n\n    function HSL(h, s, l){\n        this.h = h || 0;\n        this.s = s || 0;\n        this.l = l || 0;\n    }\n\n    HSL.prototype.toString2 = function(){\n        return \"hsl(\" + [this.h, this.s, this.l].join(\", \") + \")\";\n    }\n\n    HSL.prototype.toString = function(){\n        return \"hsl(\" + [Math.round(this.h), Math.round(this.s*100)+\"%\", Math.round(this.l*100)+\"%\"].join(\", \") + \")\";\n    }\n\n    function HSLA(h, s, l, a){\n        this.h = h || 0;\n        this.s = s || 0;\n        this.l = l || 0;\n        this.a = a === 0 ? 0 : a || 1;\n    }\n\n    HSLA.prototype.toString2 = function(){\n        return \"hsla(\" + [this.h, this.s, this.l, this.a].join(\", \") + \")\";\n    }\n\n    HSLA.prototype.toString = function(){\n        return \"hsla(\" + [Math.round(this.h), Math.round(this.s*100)+\"%\", Math.round(this.l*100)+\"%\", parseFloat(this.a).toFixed(2)].join(\", \") + \")\";\n    }\n\n    function CMYK(c, m, y, k){\n        this.c = c || 0;\n        this.m = m || 0;\n        this.y = y || 0;\n        this.k = k || 0;\n    }\n\n    CMYK.prototype.toString = function(){\n        return \"cmyk(\" + [this.c, this.m, this.y, this.k].join(\", \") + \")\";\n    }\n\n    var Colors = {\n\n        PALETTES: {\n            ALL: \"all\",\n            METRO: \"metro\",\n            STANDARD: \"standard\"\n        },\n\n        metro: {\n            lime: '#a4c400',\n            green: '#60a917',\n            emerald: '#008a00',\n            blue: '#00AFF0',\n            teal: '#00aba9',\n            cyan: '#1ba1e2',\n            cobalt: '#0050ef',\n            indigo: '#6a00ff',\n            violet: '#aa00ff',\n            pink: '#dc4fad',\n            magenta: '#d80073',\n            crimson: '#a20025',\n            red: '#CE352C',\n            orange: '#fa6800',\n            amber: '#f0a30a',\n            yellow: '#fff000',\n            brown: '#825a2c',\n            olive: '#6d8764',\n            steel: '#647687',\n            mauve: '#76608a',\n            taupe: '#87794e'\n        },\n\n        standard: {\n            aliceblue: \"#f0f8ff\",\n            antiquewhite: \"#faebd7\",\n            aqua: \"#00ffff\",\n            aquamarine: \"#7fffd4\",\n            azure: \"#f0ffff\",\n            beige: \"#f5f5dc\",\n            bisque: \"#ffe4c4\",\n            black: \"#000000\",\n            blanchedalmond: \"#ffebcd\",\n            blue: \"#0000ff\",\n            blueviolet: \"#8a2be2\",\n            brown: \"#a52a2a\",\n            burlywood: \"#deb887\",\n            cadetblue: \"#5f9ea0\",\n            chartreuse: \"#7fff00\",\n            chocolate: \"#d2691e\",\n            coral: \"#ff7f50\",\n            cornflowerblue: \"#6495ed\",\n            cornsilk: \"#fff8dc\",\n            crimson: \"#dc143c\",\n            cyan: \"#00ffff\",\n            darkblue: \"#00008b\",\n            darkcyan: \"#008b8b\",\n            darkgoldenrod: \"#b8860b\",\n            darkgray: \"#a9a9a9\",\n            darkgreen: \"#006400\",\n            darkkhaki: \"#bdb76b\",\n            darkmagenta: \"#8b008b\",\n            darkolivegreen: \"#556b2f\",\n            darkorange: \"#ff8c00\",\n            darkorchid: \"#9932cc\",\n            darkred: \"#8b0000\",\n            darksalmon: \"#e9967a\",\n            darkseagreen: \"#8fbc8f\",\n            darkslateblue: \"#483d8b\",\n            darkslategray: \"#2f4f4f\",\n            darkturquoise: \"#00ced1\",\n            darkviolet: \"#9400d3\",\n            deeppink: \"#ff1493\",\n            deepskyblue: \"#00bfff\",\n            dimgray: \"#696969\",\n            dodgerblue: \"#1e90ff\",\n            firebrick: \"#b22222\",\n            floralwhite: \"#fffaf0\",\n            forestgreen: \"#228b22\",\n            fuchsia: \"#ff00ff\",\n            gainsboro: \"#DCDCDC\",\n            ghostwhite: \"#F8F8FF\",\n            gold: \"#ffd700\",\n            goldenrod: \"#daa520\",\n            gray: \"#808080\",\n            green: \"#008000\",\n            greenyellow: \"#adff2f\",\n            honeydew: \"#f0fff0\",\n            hotpink: \"#ff69b4\",\n            indianred: \"#cd5c5c\",\n            indigo: \"#4b0082\",\n            ivory: \"#fffff0\",\n            khaki: \"#f0e68c\",\n            lavender: \"#e6e6fa\",\n            lavenderblush: \"#fff0f5\",\n            lawngreen: \"#7cfc00\",\n            lemonchiffon: \"#fffacd\",\n            lightblue: \"#add8e6\",\n            lightcoral: \"#f08080\",\n            lightcyan: \"#e0ffff\",\n            lightgoldenrodyellow: \"#fafad2\",\n            lightgray: \"#d3d3d3\",\n            lightgreen: \"#90ee90\",\n            lightpink: \"#ffb6c1\",\n            lightsalmon: \"#ffa07a\",\n            lightseagreen: \"#20b2aa\",\n            lightskyblue: \"#87cefa\",\n            lightslategray: \"#778899\",\n            lightsteelblue: \"#b0c4de\",\n            lightyellow: \"#ffffe0\",\n            lime: \"#00ff00\",\n            limegreen: \"#32dc32\",\n            linen: \"#faf0e6\",\n            magenta: \"#ff00ff\",\n            maroon: \"#800000\",\n            mediumaquamarine: \"#66cdaa\",\n            mediumblue: \"#0000cd\",\n            mediumorchid: \"#ba55d3\",\n            mediumpurple: \"#9370db\",\n            mediumseagreen: \"#3cb371\",\n            mediumslateblue: \"#7b68ee\",\n            mediumspringgreen: \"#00fa9a\",\n            mediumturquoise: \"#48d1cc\",\n            mediumvioletred: \"#c71585\",\n            midnightblue: \"#191970\",\n            mintcream: \"#f5fffa\",\n            mistyrose: \"#ffe4e1\",\n            moccasin: \"#ffe4b5\",\n            navajowhite: \"#ffdead\",\n            navy: \"#000080\",\n            oldlace: \"#fdd5e6\",\n            olive: \"#808000\",\n            olivedrab: \"#6b8e23\",\n            orange: \"#ffa500\",\n            orangered: \"#ff4500\",\n            orchid: \"#da70d6\",\n            palegoldenrod: \"#eee8aa\",\n            palegreen: \"#98fb98\",\n            paleturquoise: \"#afeeee\",\n            palevioletred: \"#db7093\",\n            papayawhip: \"#ffefd5\",\n            peachpuff: \"#ffdab9\",\n            peru: \"#cd853f\",\n            pink: \"#ffc0cb\",\n            plum: \"#dda0dd\",\n            powderblue: \"#b0e0e6\",\n            purple: \"#800080\",\n            rebeccapurple: \"#663399\",\n            red: \"#ff0000\",\n            rosybrown: \"#bc8f8f\",\n            royalblue: \"#4169e1\",\n            saddlebrown: \"#8b4513\",\n            salmon: \"#fa8072\",\n            sandybrown: \"#f4a460\",\n            seagreen: \"#2e8b57\",\n            seashell: \"#fff5ee\",\n            sienna: \"#a0522d\",\n            silver: \"#c0c0c0\",\n            slyblue: \"#87ceeb\",\n            slateblue: \"#6a5acd\",\n            slategray: \"#708090\",\n            snow: \"#fffafa\",\n            springgreen: \"#00ff7f\",\n            steelblue: \"#4682b4\",\n            tan: \"#d2b48c\",\n            teal: \"#008080\",\n            thistle: \"#d8bfd8\",\n            tomato: \"#ff6347\",\n            turquoise: \"#40e0d0\",\n            violet: \"#ee82ee\",\n            wheat: \"#f5deb3\",\n            white: \"#ffffff\",\n            whitesmoke: \"#f5f5f5\",\n            yellow: \"#ffff00\",\n            yellowgreen: \"#9acd32\"\n        },\n\n        all: {},\n\n        init: function(){\n            this.all = $.extend( {}, this.standard, this.metro );\n            return this;\n        },\n\n        color: function(name, palette){\n            palette = palette || this.PALETTES.ALL;\n            return this[palette][name] !== undefined ? this[palette][name] : false;\n        },\n\n        palette: function(palette){\n            palette = palette || this.PALETTES.ALL;\n            return Object.keys(this[palette]);\n        },\n\n        expandHexColor: function(hex){\n            if (typeof hex !== \"string\") {\n                throw new Error(\"Value is not a string!\");\n            }\n            if (hex[0] === \"#\" && hex.length === 4) {\n                var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n                return (\n                    \"#\" +\n                    hex.replace(shorthandRegex, function(m, r, g, b) {\n                        return r + r + g + g + b + b;\n                    })\n                );\n            }\n            return hex[0] === \"#\" ? hex : \"#\" + hex;\n        },\n\n        colors: function(palette){\n            palette = palette || this.PALETTES.ALL;\n            return Object.values(this[palette]);\n        },\n\n        random: function(colorType, alpha){\n            colorType = colorType || Types.HEX;\n            alpha = typeof alpha !== \"undefined\" ? alpha : 1;\n\n            var hex, r, g, b;\n\n            r = $.random(0, 255);\n            g = $.random(0, 255);\n            b = $.random(0, 255);\n\n            hex = \"#\" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n\n            return colorType === \"hex\" ? hex : this.toColor(hex, colorType, alpha);\n        },\n\n        parse: function(color){\n            var _color = color.toLowerCase().trim();\n\n            var a = _color\n                .replace(/[^%\\d.,]/g, \"\")\n                .split(\",\")\n                .map(function(v) {\n                    if (v.indexOf('%') > -1) {\n                        v = \"\"+parseInt(v)/100;\n                    }\n                    return v.indexOf(\".\") > -1 ? parseFloat(v) : parseInt(v);\n                });\n\n            if (this.metro[_color]) {\n                return this.expandHexColor(this.metro[_color]);\n            }\n\n            if (this.standard[_color]) {\n                return this.expandHexColor(this.standard[_color]);\n            }\n\n            if (_color[0] === \"#\") {\n                return this.expandHexColor(_color);\n            }\n\n            if (_color.indexOf(\"rgba\") === 0 && a.length === 4) {\n                return new RGBA(a[0], a[1], a[2], a[3]);\n            }\n            if (_color.indexOf(\"rgb\") === 0 && a.length === 3) {\n                return new RGB(a[0], a[1], a[2]);\n            }\n            if (_color.indexOf(\"cmyk\") === 0 && a.length === 4) {\n                return new CMYK(a[0], a[1], a[2], a[3]);\n            }\n            if (_color.indexOf(\"hsv\") === 0 && a.length === 3) {\n                return new HSV(a[0], a[1], a[2]);\n            }\n            if (_color.indexOf(\"hsla\") === 0 && a.length === 4) {\n                return new HSLA(a[0], a[1], a[2], a[3]);\n            }\n            if (_color.indexOf(\"hsl\")  === 0 && a.length === 3) {\n                return new HSL(a[0], a[1], a[2]);\n            }\n            return undefined;\n        },\n\n        createColor: function(colorType, from){\n            colorType = colorType || \"hex\";\n            from = from || \"#000000\";\n\n            var baseColor;\n\n            if (typeof from === \"string\") {\n                baseColor = this.parse(from);\n            }\n\n            if (!this.isColor(baseColor)) {\n                baseColor = \"#000000\";\n            }\n\n            return this.toColor(baseColor, colorType.toLowerCase());\n        },\n\n        isDark: function(color){\n            if (!this.isColor(color)) return;\n            var rgb = this.toRGB(color);\n            var YIQ = (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n            return YIQ < 128;\n        },\n\n        isLight: function(color){\n            return !this.isDark(color);\n        },\n\n        isHSV: function(color){\n            return color instanceof HSV;\n        },\n\n        isHSL: function(color){\n            return color instanceof HSL;\n        },\n\n        isHSLA: function(color){\n            return color instanceof HSLA;\n        },\n\n        isRGB: function(color){\n            return color instanceof RGB;\n        },\n\n        isRGBA: function(color){\n            return color instanceof RGBA;\n        },\n\n        isCMYK: function(color){\n            return color instanceof CMYK;\n        },\n\n        isHEX: function(color){\n            return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(color);\n        },\n\n        isColor: function(val){\n            var color = typeof val === \"string\" ? this.parse(val) : val;\n\n            return !color\n                ? false\n                : this.isHEX(color) ||\n                  this.isRGB(color) ||\n                  this.isRGBA(color) ||\n                  this.isHSV(color) ||\n                  this.isHSL(color) ||\n                  this.isHSLA(color) ||\n                  this.isCMYK(color);\n        },\n\n        check: function(color, type){\n            var that = this, checkFor = typeof type === \"string\" ? [type] : type;\n            var result = false;\n\n            $.each(checkFor, function(){\n                if (that[\"is\"+this.toUpperCase()](color)) {\n                    result = true;\n                }\n            });\n\n            if (!result) {\n                throw new Error(\"Value is not a \" + type + \" color type!\");\n            }\n        },\n\n        colorType: function(color){\n            if (this.isHEX(color)) return Types.HEX;\n            if (this.isRGB(color)) return Types.RGB;\n            if (this.isRGBA(color)) return Types.RGBA;\n            if (this.isHSV(color)) return Types.HSV;\n            if (this.isHSL(color)) return Types.HSL;\n            if (this.isHSLA(color)) return Types.HSLA;\n            if (this.isCMYK(color)) return Types.CMYK;\n\n            return Types.UNKNOWN;\n        },\n\n        equal: function(color1, color2){\n            if (!this.isColor(color1) || !this.isColor(color2)) {\n                return false;\n            }\n\n            return this.toHEX(color1) === this.toHEX(color2);\n        },\n\n        colorToString: function(color){\n            return color.toString();\n        },\n\n        hex2rgb: function(color){\n            if (typeof color !== \"string\") {\n                throw new Error(\"Value is not a string!\")\n            }\n            var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(\n                this.expandHexColor(color)\n            );\n            var rgb = [\n                parseInt(result[1], 16),\n                parseInt(result[2], 16),\n                parseInt(result[3], 16)\n            ];\n            return result ? new RGB(rgb[0], rgb[1], rgb[2]) : null;\n        },\n\n        // TODO can be improved\n        rgb2hex: function(color){\n            this.check(color, \"rgb\");\n            return (\n                \"#\" +\n                ((1 << 24) + (color.r << 16) + (color.g << 8) + color.b).toString(16).slice(1)\n            );\n        },\n\n        rgb2hsv: function(color){\n            this.check(color, \"rgb\");\n            var hsv = new HSV();\n            var h, s, v;\n            var r = color.r / 255,\n                g = color.g / 255,\n                b = color.b / 255;\n\n            var max = Math.max(r, g, b);\n            var min = Math.min(r, g, b);\n            var delta = max - min;\n\n            v = max;\n\n            if (max === 0) {\n                s = 0;\n            } else {\n                s = 1 - min / max;\n            }\n\n            if (max === min) {\n                h = 0;\n            } else if (max === r && g >= b) {\n                h = 60 * ((g - b) / delta);\n            } else if (max === r && g < b) {\n                h = 60 * ((g - b) / delta) + 360;\n            } else if (max === g) {\n                h = 60 * ((b - r) / delta) + 120;\n            } else if (max === b) {\n                h = 60 * ((r - g) / delta) + 240;\n            } else {\n                h = 0;\n            }\n\n            hsv.h = h;\n            hsv.s = s;\n            hsv.v = v;\n\n            return hsv;\n        },\n\n        hsv2rgb: function(color){\n            this.check(color, \"hsv\");\n            var r, g, b;\n            var h = color.h,\n                s = color.s * 100,\n                v = color.v * 100;\n            var Hi = Math.floor(h / 60);\n            var Vmin = ((100 - s) * v) / 100;\n            var alpha = (v - Vmin) * ((h % 60) / 60);\n            var Vinc = Vmin + alpha;\n            var Vdec = v - alpha;\n\n            switch (Hi) {\n                case 0:\n                    r = v;\n                    g = Vinc;\n                    b = Vmin;\n                    break;\n                case 1:\n                    r = Vdec;\n                    g = v;\n                    b = Vmin;\n                    break;\n                case 2:\n                    r = Vmin;\n                    g = v;\n                    b = Vinc;\n                    break;\n                case 3:\n                    r = Vmin;\n                    g = Vdec;\n                    b = v;\n                    break;\n                case 4:\n                    r = Vinc;\n                    g = Vmin;\n                    b = v;\n                    break;\n                case 5:\n                    r = v;\n                    g = Vmin;\n                    b = Vdec;\n                    break;\n            }\n\n            return new RGB(\n                Math.round((r * 255) / 100),\n                Math.round((g * 255) / 100),\n                Math.round((b * 255) / 100)\n            );\n        },\n\n        hsv2hex: function(color){\n            this.check(color, \"hsv\");\n            return this.rgb2hex(this.hsv2rgb(color));\n        },\n\n        hex2hsv: function(color){\n            this.check(color, \"hex\");\n            return this.rgb2hsv(this.hex2rgb(color));\n        },\n\n        rgb2cmyk: function(color){\n            this.check(color, \"rgb\");\n            var cmyk = new CMYK();\n\n            var r = color.r / 255;\n            var g = color.g / 255;\n            var b = color.b / 255;\n\n            cmyk.k = Math.min(1 - r, 1 - g, 1 - b);\n\n            cmyk.c = 1 - cmyk.k === 0 ? 0 : (1 - r - cmyk.k) / (1 - cmyk.k);\n            cmyk.m = 1 - cmyk.k === 0 ? 0 : (1 - g - cmyk.k) / (1 - cmyk.k);\n            cmyk.y = 1 - cmyk.k === 0 ? 0 : (1 - b - cmyk.k) / (1 - cmyk.k);\n\n            cmyk.c = Math.round(cmyk.c * 100);\n            cmyk.m = Math.round(cmyk.m * 100);\n            cmyk.y = Math.round(cmyk.y * 100);\n            cmyk.k = Math.round(cmyk.k * 100);\n\n            return cmyk;\n        },\n\n        cmyk2rgb: function(color){\n            this.check(color, \"cmyk\");\n            var r = Math.floor(255 * (1 - color.c / 100) * (1 - color.k / 100));\n            var g = Math.ceil(255 * (1 - color.m / 100) * (1 - color.k / 100));\n            var b = Math.ceil(255 * (1 - color.y / 100) * (1 - color.k / 100));\n\n            return new RGB(r, g, b);\n        },\n\n        hsv2hsl: function(color){\n            this.check(color, \"hsv\");\n            var h, s, l, d;\n            h = color.h;\n            l = (2 - color.s) * color.v;\n            s = color.s * color.v;\n            if (l === 0) {\n                s = 0;\n            } else {\n                d = l <= 1 ? l : 2 - l;\n                if (d === 0) {\n                    s = 0;\n                } else {\n                    s /= d;\n                }\n            }\n            l /= 2;\n            return new HSL(h, s, l);\n        },\n\n        hsl2hsv: function(color){\n            this.check(color, [\"hsl\", \"hsla\"]);\n            var h, s, v, l;\n            h = color.h;\n            l = color.l * 2;\n            s = color.s * (l <= 1 ? l : 2 - l);\n\n            v = (l + s) / 2;\n\n            if (l + s === 0) {\n                s = 0;\n            } else {\n                s = (2 * s) / (l + s);\n            }\n\n            return new HSV(h, s, v);\n        },\n\n        rgb2websafe: function(color){\n            this.check(color, \"rgb\");\n            return new RGB(\n                Math.round(color.r / 51) * 51,\n                Math.round(color.g / 51) * 51,\n                Math.round(color.b / 51) * 51\n            );\n        },\n\n        rgba2websafe: function(color){\n            this.check(color, \"rgba\");\n            var rgbWebSafe = this.rgb2websafe(color);\n            return new RGBA(rgbWebSafe.r, rgbWebSafe.g, rgbWebSafe.b, color.a);\n        },\n\n        hex2websafe: function(color){\n            this.check(color, \"hex\");\n            return this.rgb2hex(this.rgb2websafe(this.hex2rgb(color)));\n        },\n\n        hsv2websafe: function(color){\n            this.check(color, \"hsv\");\n            return this.rgb2hsv(this.rgb2websafe(this.toRGB(color)));\n        },\n\n        hsl2websafe: function(color){\n           this.check(color, \"hsl\");\n            return this.hsv2hsl(this.rgb2hsv(this.rgb2websafe(this.toRGB(color))));\n        },\n\n        cmyk2websafe: function(color){\n            this.check(color, \"cmyk\");\n            return this.rgb2cmyk(this.rgb2websafe(this.cmyk2rgb(color)));\n        },\n\n        websafe: function(color){\n            if (this.isHEX(color)) return this.hex2websafe(color);\n            if (this.isRGB(color)) return this.rgb2websafe(color);\n            if (this.isRGBA(color)) return this.rgba2websafe(color);\n            if (this.isHSV(color)) return this.hsv2websafe(color);\n            if (this.isHSL(color)) return this.hsl2websafe(color);\n            if (this.isCMYK(color)) return this.cmyk2websafe(color);\n\n            return color;\n        },\n\n        toColor: function(color, type, alpha){\n            var result;\n            switch (type.toLowerCase()) {\n                case \"hex\":\n                    result = this.toHEX(color);\n                    break;\n                case \"rgb\":\n                    result = this.toRGB(color);\n                    break;\n                case \"rgba\":\n                    result = this.toRGBA(color, alpha);\n                    break;\n                case \"hsl\":\n                    result = this.toHSL(color);\n                    break;\n                case \"hsla\":\n                    result = this.toHSLA(color, alpha);\n                    break;\n                case \"hsv\":\n                    result = this.toHSV(color);\n                    break;\n                case \"cmyk\":\n                    result = this.toCMYK(color);\n                    break;\n                default:\n                    result = color;\n            }\n            return result;\n        },\n\n        toHEX: function(val){\n            var color = typeof val === \"string\" ? this.parse(val) : val;\n\n            if (!color) {\n                throw new Error(\"Unknown color format!\");\n            }\n\n            return typeof color === \"string\"\n                ? color\n                : this.rgb2hex(this.toRGB(color));\n        },\n\n        toRGB: function(val){\n            var color = typeof val === \"string\" ? this.parse(val) : val;\n\n            if (this.isRGB(color)) return color;\n            if (this.isRGBA(color)) return new RGB(color.r, color.g, color.b);\n            if (this.isHSV(color)) return this.hsv2rgb(color);\n            if (this.isHSL(color)) return this.hsv2rgb(this.hsl2hsv(color));\n            if (this.isHSLA(color)) return this.hsv2rgb(this.hsl2hsv(color));\n            if (this.isHEX(color)) return this.hex2rgb(color);\n            if (this.isCMYK(color)) return this.cmyk2rgb(color);\n\n            throw new Error(\"Unknown color format!\");\n        },\n\n        toRGBA: function(color, alpha){\n            if (this.isRGBA(color)) {\n                if (alpha) {\n                    color.a = alpha;\n                }\n                return color;\n            }\n            var rgb = this.toRGB(color);\n            return new RGBA(rgb.r, rgb.g, rgb.b, alpha);\n        },\n\n        toHSV: function(color){\n            return this.rgb2hsv(this.toRGB(color));\n        },\n\n        toHSL: function(color){\n            return this.hsv2hsl(this.rgb2hsv(this.toRGB(color)));\n        },\n\n        toHSLA: function(color, alpha){\n            if (this.isHSLA(color)) {\n                if (alpha) {\n                    color.a = alpha;\n                }\n                return color;\n            }\n            var hsla = this.hsv2hsl(this.rgb2hsv(this.toRGB(color)));\n            hsla.a = alpha;\n            return new HSLA(hsla.h, hsla.s, hsla.l, hsla.a);\n        },\n\n        toCMYK: function(color){\n            return this.rgb2cmyk(this.toRGB(color));\n        },\n\n        grayscale: function(color){\n            return this.desaturate(color, 100);\n        },\n\n        lighten: function(color, amount){\n            var hsl, type, alpha;\n\n            if (!this.isColor(color)) {\n                throw new Error(color + \" is not a valid color value!\");\n            }\n\n            amount = (amount === 0) ? 0 : (amount || 10);\n            hsl = this.toHSL(color);\n            hsl.l += amount / 100;\n            hsl.l = clamp(hsl.l);\n\n            type = this.colorType(color).toLowerCase();\n\n            if (type === Types.RGBA || type === Types.HSLA) {\n                alpha = color.a;\n            }\n\n            return this.toColor(hsl, type, alpha);\n        },\n\n        darken: function(color, amount){\n            return this.lighten(color, -amount);\n        },\n\n        spin: function(color, amount){\n            var hsl, type, alpha, hue;\n\n            if (!this.isColor(color)) {\n                throw new Error(color + \" is not a valid color value!\");\n            }\n\n            hsl = this.toHSL(color);\n            hue = (hsl.h + amount) % 360;\n            hsl.h = hue < 0 ? 360 + hue : hue;\n\n            type = this.colorType(color).toLowerCase();\n\n            if (type === Types.RGBA || type === Types.HSLA) {\n                alpha = color.a;\n            }\n\n            return this.toColor(hsl, type, alpha);\n        },\n\n        brighten: function(color, amount){\n            var rgb, type, alpha;\n\n            if (!this.isColor(color)) {\n                throw new Error(color + \" is not a valid color value!\");\n            }\n\n            rgb = this.toRGB(color);\n            rgb.r = Math.max(0, Math.min(255, rgb.r - Math.round(255 * - (amount / 100))));\n            rgb.g = Math.max(0, Math.min(255, rgb.g - Math.round(255 * - (amount / 100))));\n            rgb.b = Math.max(0, Math.min(255, rgb.b - Math.round(255 * - (amount / 100))));\n\n            type = this.colorType(color).toLowerCase();\n\n            if (type === Types.RGBA || type === Types.HSLA) {\n                alpha = color.a;\n            }\n\n            return this.toColor(rgb, type, alpha);\n        },\n\n        saturate: function(color, amount){\n            var hsl, type, alpha;\n\n            if (!this.isColor(color)) {\n                throw new Error(color + \" is not a valid color value!\");\n            }\n\n            hsl = this.toHSL(color);\n            hsl.s += amount / 100;\n            hsl.s = clamp(hsl.s);\n\n            type = this.colorType(color).toLowerCase();\n\n            if (type === Types.RGBA || type === Types.HSLA) {\n                alpha = color.a;\n            }\n\n            return this.toColor(hsl, type, alpha);\n        },\n\n        desaturate: function(color, amount){\n            var hsl, type, alpha;\n\n            if (!this.isColor(color)) {\n                throw new Error(color + \" is not a valid color value!\");\n            }\n\n            hsl = this.toHSL(color);\n            hsl.s -= amount / 100;\n            hsl.s = clamp(hsl.s);\n\n            type = this.colorType(color).toLowerCase();\n\n            if (type === Types.RGBA || type === Types.HSLA) {\n                alpha = color.a;\n            }\n\n            return this.toColor(hsl, type, alpha);\n        },\n\n        hueShift: function(color, hue, saturation, value){\n            var hsv = this.toHSV(color);\n            var type = this.colorType(color).toLowerCase();\n            var h = hsv.h;\n            var alpha;\n            var _h = hue || 0;\n            var _s = saturation || 0;\n            var _v = value || 0;\n\n            h += _h;\n            while (h >= 360.0) h -= 360.0;\n            while (h < 0.0) h += 360.0;\n            hsv.h = h;\n\n            hsv.s += _s;\n            if (hsv.s > 1) {hsv.s = 1;}\n            if (hsv.s < 0) {hsv.s = 0;}\n\n            hsv.v += _v;\n            if (hsv.v > 1) {hsv.v = 1;}\n            if (hsv.v < 0) {hsv.v = 0;}\n\n            if (type === Types.RGBA || type === Types.HSLA) {\n                alpha = color.a;\n            }\n\n            return this.toColor(hsv, type, alpha);\n        },\n\n        shade: function(color, amount){\n            if (!this.isColor(color)) {\n                throw new Error(color + \" is not a valid color value!\");\n            }\n\n            amount /= 100;\n\n            var type = this.colorType(color).toLowerCase();\n            var rgb = this.toRGB(color);\n            var t = amount < 0 ? 0 : 255;\n            var p = amount < 0 ? amount * -1 : amount;\n            var r, g, b, a;\n\n            r = (Math.round((t - rgb.r) * p) + rgb.r);\n            g = (Math.round((t - rgb.g) * p) + rgb.g);\n            b = (Math.round((t - rgb.b) * p) + rgb.b);\n\n            if (type === Types.RGBA || type === Types.HSLA) {\n                a = color.a;\n            }\n\n            return this.toColor(new RGB(r, g, b), type, a);\n        },\n\n        mix: function(color1, color2, amount){\n\n            amount = (amount === 0) ? 0 : (amount || 50);\n\n            var rgb = new RGB(0,0,0);\n            var rgb1 = this.toRGB(color1);\n            var rgb2 = this.toRGB(color2);\n\n            var p = amount / 100;\n\n            rgb.r = Math.round(((rgb2.r - rgb1.r) * p) + rgb1.r);\n            rgb.g = Math.round(((rgb2.g - rgb1.g) * p) + rgb1.g);\n            rgb.b = Math.round(((rgb2.b - rgb1.b) * p) + rgb1.b);\n\n            return this.toHEX(rgb);\n        },\n\n        multiply: function(color1, color2){\n            var rgb1 = this.toRGB(color1);\n            var rgb2 = this.toRGB(color2);\n            var rgb = new RGB();\n\n            rgb1.b = Math.floor(rgb1.b * rgb2.b / 255);\n            rgb1.g = Math.floor(rgb1.g * rgb2.g / 255);\n            rgb1.r = Math.floor(rgb1.r * rgb2.r / 255);\n\n            return this.toHEX(rgb);\n        },\n\n        materialPalette: function(color, options){\n            var opt = $.extend({}, ColorsDefaultConfig, options);\n            var baseLight = opt.baseLight;\n            var baseDark = opt.baseDark === \"self\" || !opt.baseDark ? this.multiply(color, color) : opt.baseDark;\n\n            return {\n                \"50\": this.mix(baseLight, color, 10),\n                \"100\": this.mix(baseLight, color, 30),\n                \"200\": this.mix(baseLight, color, 50),\n                \"300\": this.mix(baseLight, color, 70),\n                \"400\": this.mix(baseLight, color, 85),\n                \"500\": this.mix(baseLight, color, 100),\n                \"600\": this.mix(baseDark, color, 92),\n                \"700\": this.mix(baseDark, color, 83),\n                \"800\": this.mix(baseDark, color, 74),\n                \"900\": this.mix(baseDark, color, 65),\n\n                \"A100\": this.lighten(this.saturate(this.mix(baseDark, color, 15), 80), 65),\n                \"A200\": this.lighten(this.saturate(this.mix(baseDark, color, 15), 80), 55),\n                \"A400\": this.lighten(this.saturate(this.mix(baseLight, color, 100), 55), 10),\n                \"A700\": this.lighten(this.saturate(this.mix(baseDark, color, 83), 65), 10)\n            };\n        },\n\n        monochromatic: function(color, options){\n            var opt = $.extend({}, ColorsDefaultConfig, options);\n            var returnAs = opt.resultType;\n            var results = opt.results;\n            var hsv = this.toHSV(color);\n            var h = hsv.h,\n                s = hsv.s,\n                v = hsv.v;\n            var result = [];\n            var mod = 1 / results;\n            var self = this;\n\n            while (results--) {\n                result.push(new HSV(h, s, v));\n                v = (v + mod) % 1;\n            }\n\n            return result.map(function(el){\n                return self[\"to\"+returnAs.toUpperCase()](el);\n            });\n        },\n\n        complementary: function(color, options){\n            var opt = $.extend({}, ColorsDefaultConfig, options);\n            var hsl = this.toHSL(color);\n            var result;\n            var self = this;\n\n            var returnAs = opt.resultType;\n\n            result = [\n                hsl,\n                new HSL(shift(hsl.h, 180), hsl.s, hsl.l)\n            ];\n\n            return result.map(function(el){\n                return self[\"to\"+returnAs.toUpperCase()](el);\n            });\n        },\n\n        splitComplementary: function(color, options){\n            var opt = $.extend({}, ColorsDefaultConfig, options);\n            var hsl = this.toHSL(color);\n            var h = hsl.h;\n            var result, self = this;\n\n            var returnAs = opt.resultType;\n            var angle = opt.angle;\n\n            result = [\n                hsl,\n                new HSL(shift(h, 180 - angle), hsl.s, hsl.l ),\n                new HSL(shift(h, 180 + angle), hsl.s, hsl.l )\n            ];\n\n            return result.map(function(el){\n                return self[\"to\"+returnAs.toUpperCase()](el);\n            });\n        },\n\n        doubleComplementary: function(color, options){\n            var opt = $.extend({}, ColorsDefaultConfig, options);\n            var returnAs = opt.resultType;\n            var angle = opt.angle;\n            var hsl = this.toHSL(color);\n            var h = hsl.h;\n            var result, self = this;\n\n            result = [\n                hsl,\n                new HSL(shift(h, 180), hsl.s, hsl.l ),\n                new HSL(shift(h, angle), hsl.s, hsl.l ),\n                new HSL(shift(h, 180 + angle), hsl.s, hsl.l )\n            ];\n\n            return result.map(function(el){\n                return self[\"to\"+returnAs.toUpperCase()](el);\n            });\n        },\n\n        square: function(color, options){\n            var opt = $.extend({}, ColorsDefaultConfig, options);\n            var returnAs = opt.resultType;\n            var result = [], i;\n            var hsl = this.toHSL(color);\n            var h = hsl.h , self = this;\n\n            result.push(hsl);\n\n            for (i = 1; i < 4; i++) {\n                h = shift(h, 90.0);\n                result.push(new HSL(h, hsl.s, hsl.l));\n            }\n\n            return result.map(function(el){\n                return self[\"to\"+returnAs.toUpperCase()](el);\n            });\n        },\n\n        tetradic: function(color, options){\n            var opt = $.extend({}, ColorsDefaultConfig, options);\n            var returnAs = opt.resultType;\n            var angle = opt.angle;\n            var result;\n            var hsl = this.toHSL(color);\n            var h = hsl.h;\n            var self = this;\n\n            result = [\n                hsl,\n                new HSL(shift(h, 180), hsl.s, hsl.l),\n                new HSL(shift(h, 180 - angle), hsl.s, hsl.l),\n                new HSL(shift(h, -angle), hsl.s, hsl.l)\n            ];\n\n            return result.map(function(el){\n                return self[\"to\"+returnAs.toUpperCase()](el);\n            });\n        },\n\n        triadic: function(color, options){\n            var opt = $.extend({}, ColorsDefaultConfig, options);\n            var returnAs = opt.resultType;\n            var result;\n            var hsl = this.toHSL(color);\n            var h = hsl.h;\n            var self = this;\n\n            result = [\n                hsl,\n                new HSL(shift(h,120), hsl.s, hsl.l),\n                new HSL(shift(h,240), hsl.s, hsl.l)\n            ];\n\n            return result.map(function(el){\n                return self[\"to\"+returnAs.toUpperCase()](el);\n            });\n        },\n\n        analogous: function(color, options){\n            var opt = $.extend({}, ColorsDefaultConfig, options);\n            var returnAs = opt.resultType;\n            var angle = opt.angle;\n\n            var hsl = this.toHSL(color);\n            var result, self = this;\n\n            result = [\n                hsl,\n                new HSL(shift(hsl.h, -angle), hsl.s, hsl.l),\n                new HSL(shift(hsl.h, +angle), hsl.s, hsl.l)\n            ];\n\n            return result.map(function(el){\n                return self[\"to\"+returnAs.toUpperCase()](el);\n            });\n        },\n\n        createScheme: function(color, name, options){\n            switch (name.toLowerCase()) {\n                case \"analogous\":\n                case \"analog\": return this.analogous(color, options);\n\n                case \"triadic\":\n                case \"triad\": return this.triadic(color, options);\n\n                case \"tetradic\":\n                case \"tetra\": return this.tetradic(color, options);\n\n                case \"monochromatic\":\n                case \"mono\": return this.monochromatic(color, options);\n\n                case \"complementary\":\n                case \"complement\":\n                case \"comp\": return this.complementary(color, options);\n\n                case \"double-complementary\":\n                case \"double-complement\":\n                case \"double\": return this.doubleComplementary(color, options);\n\n                case \"split-complementary\":\n                case \"split-complement\":\n                case \"split\": return this.splitComplementary(color, options);\n\n                case \"square\": return this.square(color, options);\n                case \"material\": return this.materialPalette(color, options);\n            }\n        },\n\n        getScheme: function(){\n            return this.createScheme.apply(this, arguments)\n        },\n\n        add: function(val1, val2, returnAs){\n            var color1 = typeof val1 === \"string\" ? this.parse(val1) : val1;\n            var color2 = typeof val2 === \"string\" ? this.parse(val2) : val2;\n            var c1 = this.toRGBA(color1);\n            var c2 = this.toRGBA(color2);\n            var result = new RGBA();\n            var to = (\"\"+returnAs).toLowerCase() || \"hex\";\n\n            result.r = Math.round((c1.r + c2.r) / 2);\n            result.g = Math.round((c1.g + c2.g) / 2);\n            result.b = Math.round((c1.b + c2.b) / 2);\n            result.a = Math.round((c1.a + c2.a) / 2);\n\n            return this[\"to\"+to.toUpperCase()](result);\n        }\n    };\n\n    var Color = function(color, options){\n        this._setValue(color);\n        this._setOptions(options);\n    }\n\n    Color.prototype = {\n        _setValue: function(color){\n            var _color;\n\n            if (typeof color === \"string\") {\n                _color = Colors.parse(color);\n            } else {\n                _color = color;\n            }\n\n            if (!Colors.isColor(_color)) {\n                _color = \"#000000\";\n            }\n\n            this._value = _color;\n            this._type = Colors.colorType(this._value);\n        },\n\n        _setOptions: function(options){\n            options = typeof options === \"object\" ? options : {};\n            this._options = $.extend({}, ColorsDefaultConfig, options);\n        },\n\n        getOptions: function(){\n            return this._options;\n        },\n\n        setOptions: function(options){\n            this._setOptions(options);\n        },\n\n        setValue: function(color){\n            this._setValue(color);\n        },\n\n        getValue: function(){\n            return this._value;\n        },\n\n        channel: function(ch, val){\n            var currentType = this._type.toUpperCase();\n\n            if ([\"red\", \"green\", \"blue\"].indexOf(ch) > -1) {\n                this.toRGB();\n                this._value[ch[0]] = val;\n                this[\"to\"+currentType]();\n            }\n            if (ch === \"alpha\" && this._value.a) {\n                this._value.a = val;\n            }\n            if ([\"hue\", \"saturation\", \"value\"].indexOf(ch) > -1) {\n                this.toHSV();\n                this._value[ch[0]] = val;\n                this[\"to\"+currentType]();\n            }\n            if ([\"lightness\"].indexOf(ch) > -1) {\n                this.toHSL();\n                this._value[ch[0]] = val;\n                this[\"to\"+currentType]();\n            }\n            if ([\"cyan\", \"magenta\", \"yellow\", \"black\"].indexOf(ch) > -1) {\n                this.toCMYK();\n                this._value[ch[0]] = val;\n                this[\"to\"+currentType]();\n            }\n\n            return this;\n        },\n\n        channels: function(obj){\n            var that = this;\n\n            $.each(obj, function(key, val){\n                that.channel(key, val);\n            });\n\n            return this;\n        },\n\n        toRGB: function() {\n            this._value = Colors.toRGB(this._value);\n            this._type = Types.RGB;\n            return this;\n        },\n\n        rgb: function(){\n            return this._value ? new Color(Colors.toRGB(this._value)) : undefined;\n        },\n\n        toRGBA: function(alpha) {\n            if (Colors.isRGBA(this._value)) {\n                if (alpha) {\n                    this._value = Colors.toRGBA(this._value, alpha);\n                }\n            } else {\n                this._value = Colors.toRGBA(this._value, alpha);\n            }\n            this._type = Types.RGBA;\n            return this;\n        },\n\n        rgba: function(alpha) {\n            return this._value ? new Color(Colors.toRGBA(this._value, alpha)) : undefined;\n        },\n\n        toHEX: function() {\n            this._value = Colors.toHEX(this._value);\n            this._type = Types.HEX;\n            return this;\n        },\n\n        hex: function() {\n            return this._value ? new Color(Colors.toHEX(this._value)) : undefined;\n        },\n\n        toHSV: function() {\n            this._value = Colors.toHSV(this._value);\n            this._type = Types.HSV;\n            return this;\n        },\n\n        hsv: function() {\n            return this._value ? new Color(Colors.toHSV(this._value)) : undefined;\n        },\n\n        toHSL: function() {\n            this._value = Colors.toHSL(this._value);\n            this._type = Types.HSL;\n            return this;\n        },\n\n        hsl: function() {\n            return this._value ? new Color(Colors.toHSL(this._value)) : undefined;\n        },\n\n        toHSLA: function(alpha) {\n            if (Colors.isHSLA(this._value)) {\n                if (alpha) {\n                    this._value = Colors.toHSLA(this._value, alpha);\n                }\n            } else {\n                this._value = Colors.toHSLA(this._value, alpha);\n            }\n            this._type = Types.HSLA;\n            return this;\n        },\n\n        hsla: function(alpha) {\n            return this._value ? new Color(Colors.toHSLA(this._value, alpha)) : undefined;\n        },\n\n        toCMYK: function() {\n            this._value = Colors.toCMYK(this._value);\n            this._type = Types.CMYK;\n            return this;\n        },\n\n        cmyk: function() {\n            return this._value ? new Color(Colors.toCMYK(this._value)) : undefined;\n        },\n\n        toWebsafe: function() {\n            this._value = Colors.websafe(this._value);\n            this._type = Colors.colorType(this._value);\n            return this;\n        },\n\n        websafe: function() {\n            return this._value ? new Color(Colors.websafe(this._value)) : undefined;\n        },\n\n        toString: function() {\n            return this._value ? Colors.colorToString(this._value) : \"undefined\";\n        },\n\n        toDarken: function(amount) {\n            this._value = Colors.darken(this._value, amount);\n            return this;\n        },\n\n        darken: function(amount){\n            return new Color(Colors.darken(this._value, amount));\n        },\n\n        toLighten: function(amount) {\n            this._value = Colors.lighten(this._value, amount);\n            return this;\n        },\n\n        lighten: function(amount){\n            return new Color(Colors.lighten(this._value, amount))\n        },\n\n        isDark: function() {\n            return this._value ? Colors.isDark(this._value) : undefined;\n        },\n\n        isLight: function() {\n            return this._value ? Colors.isLight(this._value) : undefined;\n        },\n\n        toHueShift: function(hue, saturation, value) {\n            this._value = Colors.hueShift(this._value, hue, saturation, value);\n            return this;\n        },\n\n        hueShift: function (hue, saturation, value) {\n            return new Color(Colors.hueShift(this._value, hue, saturation, value));\n        },\n\n        toGrayscale: function() {\n            this._value = Colors.grayscale(this._value, this._type);\n            return this;\n        },\n\n        grayscale: function(){\n            return new Color(Colors.grayscale(this._value, this._type));\n        },\n\n        type: function() {\n            return Colors.colorType(this._value);\n        },\n\n        createScheme: function(name, format, options) {\n            return this._value\n                ? Colors.createScheme(this._value, name, format, options)\n                : undefined;\n        },\n\n        getScheme: function(){\n            return this.createScheme.apply(this, arguments);\n        },\n\n        equal: function(color) {\n            return Colors.equal(this._value, color);\n        },\n\n        toAdd: function(color){\n            this._value = Colors.add(this._value, color, this._type);\n            return this;\n        },\n\n        add: function(color){\n            return new Color(Colors.add(this._value, color, this._type));\n        }\n    }\n\n    Metro.colors = Colors.init();\n    window.Color = Metro.Color = Color;\n    window.ColorPrimitive = Metro.colorPrimitive = {\n        RGB: RGB,\n        RGBA: RGBA,\n        HSV: HSV,\n        HSL: HSL,\n        HSLA: HSLA,\n        CMYK: CMYK\n    };\n\n    if (window.METRO_GLOBAL_COMMON === true) {\n        window.Colors = Metro.colors;\n    }\n\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var cookieDisclaimerDefaults = {\n        name: 'cookies_accepted',\n        template: null,\n        templateSource: null,\n        acceptButton: '.cookie-accept-button',\n        cancelButton: '.cookie-cancel-button',\n        message: 'Our website uses cookies to monitor traffic on our website and ensure that we can provide our customers with the best online experience possible.',\n        duration: \"30days\",\n        clsContainer: \"\",\n        clsMessage: \"\",\n        clsButtons: \"\",\n        clsAcceptButton: \"alert\",\n        clsCancelButton: \"\",\n        onAccept: Metro.noop,\n        onDecline: Metro.noop\n    };\n\n    Metro.cookieDisclaimer = {\n        init: function(options){\n            var that = this, cookie = Metro.cookie;\n\n            this.options = $.extend({}, cookieDisclaimerDefaults, options);\n            this.disclaimer = $(\"<div>\");\n\n            if (cookie.getCookie(this.options.name)) {\n                return ;\n            }\n\n            if (this.options.template) {\n                fetch(this.options.template)\n                    .then(Metro.fetch.text)\n                    .then(function(data){\n                        that.create(data)\n                    });\n            } else if (this.options.templateSource) {\n                this.create($(this.options.templateSource));\n            } else {\n                this.create();\n            }\n        },\n\n        create: function(html){\n            var cookie = Metro.cookie;\n            var o = this.options, wrapper = this.disclaimer, buttons;\n\n            wrapper\n                .addClass(\"cookie-disclaimer-block\")\n                .addClass(o.clsContainer);\n\n            if (!html) {\n                buttons = $(\"<div>\")\n                    .addClass(\"cookie-disclaimer-actions\")\n                    .addClass(o.clsButtons)\n                    .append( $('<button>').addClass('button cookie-accept-button').addClass(o.clsAcceptButton).html('Accept') )\n                    .append( $('<button>').addClass('button cookie-cancel-button').addClass(o.clsCancelButton).html('Cancel') );\n\n                wrapper\n                    .html( $(\"<div>\").addClass(o.clsMessage).html(o.message) )\n                    .append( $(\"<hr>\").addClass('thin') )\n                    .append(buttons);\n\n            } else if (html instanceof $) {\n                wrapper.append(html);\n            } else {\n                wrapper.html(html);\n            }\n\n            wrapper.appendTo($('body'));\n\n            wrapper.on(Metro.events.click, o.acceptButton, function(){\n                var dur = 0;\n                var durations = (\"\"+o.duration).toArray(\" \");\n\n                $.each(durations, function(){\n                    var d = \"\"+this;\n                    if (d.includes(\"day\")) {\n                        dur += parseInt(d)*24*60*60*1000;\n                    } else\n                    if (d.includes(\"hour\")) {\n                        dur += parseInt(d)*60*60*1000;\n                    } else\n                    if (d.includes(\"min\")) {\n                        dur += parseInt(d)*60*1000;\n                    } else\n                    if (d.includes(\"sec\")) {\n                        dur += parseInt(d)*1000;\n                    } else {\n                        dur += parseInt(d);\n                    }\n                })\n\n                cookie.setCookie(o.name, true, dur);\n                Utils.exec(o.onAccept);\n                wrapper.remove();\n            });\n\n            wrapper.on(Metro.events.click, o.cancelButton, function(){\n                Utils.exec(o.onDecline);\n                wrapper.remove();\n            });\n        }\n    };\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var CookieDefaultConfig = {\n        path: \"/\",\n        expires: null,\n        maxAge: null,\n        domain: null,\n        secure: false,\n        samesite: null\n    }\n\n    Metro.cookieSetup = function (options) {\n        CookieDefaultConfig = $.extend({}, CookieDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroCookieSetup\"] !== undefined) {\n        Metro.cookieSetup(window[\"metroCookieSetup\"]);\n    }\n\n    Metro.cookie = {\n        getCookies: function(){\n            var a = document.cookie.toArray(\";\");\n            var o = {};\n            $.each(a, function(){\n                var i = this.split('=');\n                o[i[0]] = i[1];\n            });\n            return o;\n        },\n\n        getCookie: function(name){\n            var cookieName = encodeURIComponent(name) + \"=\";\n            var cookies = document.cookie.toArray(\";\");\n            var i, cookie;\n\n            for(i = 0; i < cookies.length; i++) {\n                cookie = cookies[i];\n                while (cookie.charAt(0) === ' ') {\n                    cookie = cookie.substring(1, cookie.length);\n                }\n                if (cookie.indexOf(cookieName) === 0) {\n                    return decodeURIComponent(cookie.substring(cookieName.length, cookie.length));\n                }\n            }\n            return null;\n        },\n\n        setCookie: function(name, value, options){\n            var date;\n            var cookieName = encodeURIComponent(name);\n            var cookieValue = encodeURIComponent(value);\n            var opt, a = [];\n\n            if (options && typeof options !== \"object\") {\n                date = new Date();\n                date.setTime(date.getTime()+(parseInt(options)));\n                opt = $.extend({}, CookieDefaultConfig, {\n                    expires: date.toUTCString()\n                });\n            } else {\n                opt = $.extend({}, CookieDefaultConfig, options);\n            }\n\n            $.each(opt, function(key, val){\n                if (key !== 'secure' && val) {\n                    a.push(Cake.dashedName(key) + \"=\" + val);\n                }\n                if (key === 'secure' && val === true) {\n                    a.push( \"secure\" );\n                }\n            });\n\n            document.cookie = cookieName + '=' + cookieValue + \"; \" +  a.join(\"; \");\n        },\n\n        delCookie: function(name){\n            this.setCookie(name, false, {\n                maxAge: -1\n            });\n        }\n    };\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var CountdownDefaultConfig = {\n        countdownDeferred: 0,\n        stopOnBlur: true,\n        animate: \"none\",\n        ease: \"linear\",\n        duration: 600,\n        inputFormat: null,\n        locale: METRO_LOCALE,\n        days: 0,\n        hours: 0,\n        minutes: 0,\n        seconds: 0,\n        date: null,\n        start: true,\n        clsCountdown: \"\",\n        clsPart: \"\",\n        clsZero: \"\",\n        clsAlarm: \"\",\n        clsDays: \"\",\n        clsHours: \"\",\n        clsMinutes: \"\",\n        clsSeconds: \"\",\n        onAlarm: Metro.noop,\n        onTick: Metro.noop,\n        onZero: Metro.noop,\n        onBlink: Metro.noop,\n        onCountdownCreate: Metro.noop\n    };\n\n    Metro.countdownSetup = function (options) {\n        CountdownDefaultConfig = $.extend({}, CountdownDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroCountdownSetup\"] !== undefined) {\n        Metro.countdownSetup(window[\"metroCountdownSetup\"]);\n    }\n\n    Metro.Component('countdown', {\n        init: function( options, elem ) {\n            this._super(elem, options, CountdownDefaultConfig, {\n                locale: Metro.locales[\"en-US\"],\n                breakpoint: (new Date()).getTime(),\n                blinkInterval: null,\n                tickInterval: null,\n                zeroDaysFired: false,\n                zeroHoursFired: false,\n                zeroMinutesFired: false,\n                zeroSecondsFired: false,\n                fontSize: parseInt(Utils.getStyleOne(elem, \"font-size\")),\n                current: {\n                    d: 0, h: 0, m: 0, s: 0\n                },\n                inactiveTab: false,\n                id: Utils.elementId(\"countdown\"),\n                duration: 600\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var o = this.options;\n\n            this.locale = Metro.locales[o.locale] !== undefined ? Metro.locales[o.locale] : Metro.locales[\"en-US\"];\n\n            this.duration = (+o.duration <= 0 || +o.duration >= 1000) ? 600 : +o.duration;\n\n            this._build();\n            this._createEvents();\n        },\n\n        _setBreakpoint: function(){\n            var o = this.options;\n            var dm = 86400000, hm = 3600000, mm = 60000, sm = 1000;\n\n            this.breakpoint = datetime().time();\n\n            if (o.date) {\n                this.breakpoint = (o.inputFormat ? Datetime.from(o.date, o.inputFormat) : datetime(o.date)).time();\n            }\n\n            if (parseInt(o.days) > 0) {\n                this.breakpoint += parseInt(o.days) * dm;\n            }\n            if (parseInt(o.hours) > 0) {\n                this.breakpoint += parseInt(o.hours) * hm;\n            }\n            if (parseInt(o.minutes) > 0) {\n                this.breakpoint += parseInt(o.minutes) * mm;\n            }\n            if (parseInt(o.seconds) > 0) {\n                this.breakpoint += parseInt(o.seconds) * sm;\n            }\n        },\n\n        _build: function(){\n            var that = this, element = this.element, o = this.options;\n            var parts = [\"days\", \"hours\", \"minutes\", \"seconds\"];\n            var dm = 24*60*60*1000;\n            var delta_days;\n            var now = datetime().time();\n            var digit;\n\n            if (!element.attr(\"id\")) {\n                element.attr(\"id\", Utils.elementId(\"countdown\"));\n            }\n\n            if (!Utils.isValue(element.attr(\"id\"))) {\n                element.attr(\"id\", Utils.elementId(\"countdown\"));\n            }\n\n            element.addClass(\"countdown\").addClass(o.clsCountdown);\n\n            this._setBreakpoint();\n\n            delta_days = Math.round((that.breakpoint - now) / dm);\n\n            $.each(parts, function(){\n                var part = $(\"<div>\").addClass(\"part \" + this).addClass(o.clsPart).attr(\"data-label\", that.locale[\"calendar\"][\"time\"][this]).appendTo(element);\n\n                if (this === \"days\") {part.addClass(o.clsDays);}\n                if (this === \"hours\") {part.addClass(o.clsHours);}\n                if (this === \"minutes\") {part.addClass(o.clsMinutes);}\n                if (this === \"seconds\") {part.addClass(o.clsSeconds);}\n\n                $(\"<div>\").addClass(\"digit\").appendTo(part);\n                $(\"<div>\").addClass(\"digit\").appendTo(part);\n\n                if (this === \"days\" && delta_days >= 100) {\n\n                    for(var i = 0; i < String(Math.round(delta_days/100)).length; i++) {\n                        $(\"<div>\").addClass(\"digit\").appendTo(part);\n                    }\n                }\n\n            });\n\n            digit = element.find(\".digit\");\n            digit.append($(\"<span class='digit-placeholder'>\").html(\"0\"));\n            digit.append($(\"<span class='digit-value'>\").html(\"0\"));\n\n            this._fireEvent(\"countdown-create\", {\n                element: element\n            })\n\n            if (o.start === true) {\n                this.start();\n            } else {\n                this.tick();\n            }\n        },\n\n        _createEvents: function(){\n            var that = this;\n            $(document).on(\"visibilitychange\", function() {\n                if (document.hidden) {\n                    that.pause();\n                } else {\n                    that.resume();\n                }\n            }, {ns: this.id});\n        },\n\n        blink: function(){\n            var element = this.element;\n            element.toggleClass(\"blink\");\n\n            this._fireEvent(\"blink\", {\n                time: this.current\n            });\n        },\n\n        tick: function(){\n            var element = this.element, o = this.options;\n            var dm = 24*60*60, hm = 60*60, mm = 60, sm = 1;\n            var left, now = datetime().time();\n            var d, h, m, s;\n            var days = element.find(\".days\"),\n                hours = element.find(\".hours\"),\n                minutes = element.find(\".minutes\"),\n                seconds = element.find(\".seconds\");\n\n            left = Math.floor((this.breakpoint - now)/1000);\n\n            if (left <= -1) {\n                this.stop();\n                element.addClass(o.clsAlarm);\n\n                this._fireEvent(\"alarm\", {\n                    time: now\n                });\n\n                return ;\n            }\n\n            d = Math.floor(left / dm);\n\n            left -= d * dm;\n            if (this.current.d !== d) {\n                this.current.d = d;\n                this.draw(\"days\", d);\n            }\n\n            if (d === 0) {\n                if (this.zeroDaysFired === false) {\n                    this.zeroDaysFired = true;\n                    days.addClass(o.clsZero);\n\n                    this._fireEvent(\"zero\", {\n                        part: \"days\",\n                        value: days\n                    });\n                }\n            }\n\n            h = Math.floor(left / hm);\n            left -= h*hm;\n            if (this.current.h !== h) {\n                this.current.h = h;\n                this.draw(\"hours\", h);\n            }\n\n            if (d === 0 && h === 0) {\n                if (this.zeroHoursFired === false) {\n                    this.zeroHoursFired = true;\n                    hours.addClass(o.clsZero);\n\n                    this._fireEvent(\"zero\", {\n                        part: \"hours\",\n                        value: hours\n                    });\n                }\n            }\n\n            m = Math.floor(left / mm);\n            left -= m*mm;\n            if (this.current.m !== m) {\n                this.current.m = m;\n                this.draw(\"minutes\", m);\n            }\n\n            if (d === 0 && h === 0 && m === 0) {\n                if (this.zeroMinutesFired === false) {\n                    this.zeroMinutesFired = true;\n                    minutes.addClass(o.clsZero);\n\n                    this._fireEvent(\"zero\", {\n                        part: \"minutes\",\n                        value: minutes\n                    });\n\n                }\n            }\n\n            s = Math.floor(left / sm);\n            if (this.current.s !== s) {\n                this.current.s = s;\n                this.draw(\"seconds\", s);\n            }\n\n            if (d === 0 && h === 0 && m === 0 && s === 0) {\n                if (this.zeroSecondsFired === false) {\n                    this.zeroSecondsFired = true;\n                    seconds.addClass(o.clsZero);\n\n                    this._fireEvent(\"zero\", {\n                        part: \"seconds\",\n                        value: seconds\n                    });\n\n                }\n            }\n\n            this._fireEvent(\"tick\", {\n                days: d,\n                hours: h,\n                minutes: m,\n                seconds: s\n            });\n        },\n\n        draw: function(part, value){\n            var element = this.element, o = this.options;\n            var digits, digits_length, digit_value, digit_current, digit;\n            var len, i, duration = this.duration;\n\n            var slideDigit = function(digit, value){\n                var digit_copy, height = digit.height();\n\n                digit.siblings(\"-old-digit\").remove();\n                digit_copy = digit.clone().appendTo(digit.parent());\n                digit_copy.css({\n                    top: -1 * height + 'px'\n                });\n\n                digit\n                    .addClass(\"-old-digit\")\n                    .animate({\n                        draw: {\n                            top: height,\n                            opacity: 0\n                        },\n                        dur: duration,\n                        ease: o.ease,\n                        onDone: function(){\n                            $(this).remove();\n                        }\n                    });\n\n                digit_copy\n                    .html(value)\n                    .animate({\n                        draw: {\n                            top: 0,\n                            opacity: 1\n                        },\n                        dur: duration,\n                        ease: o.ease\n                    });\n            };\n\n            var fadeDigit = function(digit, value){\n                var digit_copy;\n                digit.siblings(\"-old-digit\").remove();\n                digit_copy = digit.clone().appendTo(digit.parent());\n                digit_copy.css({\n                    opacity: 0\n                });\n\n                digit\n                    .addClass(\"-old-digit\")\n                    .animate({\n                        draw: {\n                            opacity: 0\n                        },\n                        dur: duration / 2,\n                        ease: o.ease,\n                        onDone: function(){\n                            $(this).remove();\n                        }\n                    });\n\n                digit_copy\n                    .html(value)\n                    .animate({\n                        draw: {\n                            opacity: 1\n                        },\n                        dur: duration,\n                        ease: o.ease\n                    });\n            };\n\n            var zoomDigit = function(digit, value) {\n                var digit_copy, height = digit.height(), fs = parseInt(digit.style(\"font-size\"));\n\n                digit.siblings(\"-old-digit\").remove();\n                digit_copy = digit.clone().appendTo(digit.parent());\n                digit_copy.css({\n                    top: 0,\n                    left: 0,\n                    opacity: 1\n                });\n\n                digit\n                    .addClass(\"-old-digit\")\n                    .animate({\n                        draw: {\n                            top: height,\n                            opacity: 0,\n                            fontSize: 0\n                        },\n                        dur: duration,\n                        ease: o.ease,\n                        onDone: function(){\n                            $(this).remove();\n                        }\n                    });\n\n                digit_copy\n                    .html(value)\n                    .animate({\n                        draw: {\n                            top: 0,\n                            opacity: 1,\n                            fontSize: [0, fs]\n                        },\n                        dur: duration,\n                        ease: o.ease\n                    });\n            };\n\n            value = \"\"+value;\n\n            if (value.length === 1) {\n                value = '0'+value;\n            }\n\n            len = value.length;\n\n            digits = element.find(\".\"+part+\" .digit:not(-old-digit)\");\n            digits_length = digits.length;\n\n            for(i = 0; i < len; i++){\n                digit = digits.eq(digits_length - 1).find(\".digit-value\");\n                digit_value = Math.floor( parseInt(value) / Math.pow(10, i) ) % 10;\n                digit_current = parseInt(digit.text());\n\n                digits_length--;\n\n                if (digit_current === digit_value) {\n                    continue;\n                }\n\n                switch ((\"\"+o.animate).toLowerCase()) {\n                    case \"slide\": slideDigit(digit, digit_value); break;\n                    case \"fade\": fadeDigit(digit, digit_value); break;\n                    case \"zoom\": zoomDigit(digit, digit_value); break;\n                    default: digit.html(digit_value);\n                }\n            }\n        },\n\n        start: function(){\n            var that = this, element = this.element;\n\n            if (element.data(\"paused\") === false) {\n                return;\n            }\n\n            clearInterval(this.blinkInterval);\n            clearInterval(this.tickInterval);\n\n            element.data(\"paused\", false);\n\n            this._setBreakpoint();\n            this.tick();\n\n            this.blinkInterval = setInterval(function(){that.blink();}, 500);\n            this.tickInterval = setInterval(function(){that.tick();}, 1000);\n        },\n\n        stop: function(){\n            var element = this.element;\n            clearInterval(this.blinkInterval);\n            clearInterval(this.tickInterval);\n            element.data(\"paused\", true);\n            element.find(\".digit\").html(\"0\");\n            this.current = {\n                d: 0, h:0, m: 0, s:0\n            };\n        },\n\n        pause: function(){\n            clearInterval(this.blinkInterval);\n            clearInterval(this.tickInterval);\n            this.element.data(\"paused\", true);\n        },\n\n        resume: function(){\n            var that = this;\n\n            this.element.data(\"paused\", false);\n            this.blinkInterval = setInterval(function(){that.blink();}, 500);\n            this.tickInterval = setInterval(function(){that.tick();}, 1000);\n        },\n\n        reset: function(){\n            var that = this, element = this.element, o = this.options;\n\n            clearInterval(this.blinkInterval);\n            clearInterval(this.tickInterval);\n\n            element.find(\".part\").removeClass(o.clsZero);\n\n            var digit = element.find(\".digit\").clear();\n\n            digit.append($(\"<span class='digit-placeholder'>\").html(\"0\"));\n            digit.append($(\"<span class='digit-value'>\").html(\"0\"));\n\n            this._setBreakpoint();\n\n            element.data(\"paused\", false);\n\n            this.tick();\n\n            this.blinkInterval = setInterval(function(){that.blink();}, 500);\n            this.tickInterval = setInterval(function(){that.tick();}, 1000);\n        },\n\n        resetWith: function(val){\n            var that = this, element = this.element, o = this.options;\n\n            if (typeof val === \"string\") {\n                element.attr(\"data-date\", val)\n                o.date = val\n            } else if (typeof val === 'object') {\n                var keys = [\"days\", \"hours\", \"minutes\", \"seconds\"]\n                $.each(keys, function(i, v){\n                    if (Metro.utils.isValue(val[v])) {\n                        element.attr(\"data-\"+v, val[v])\n                        o[v] = val[v]\n                    }\n                })\n            }\n\n            this.reset()\n        },\n\n        togglePlay: function(){\n            if (this.element.attr(\"data-pause\") === true) {\n                this.pause();\n            } else {\n                this.start();\n            }\n        },\n\n        isPaused: function(){\n            return this.element.data(\"paused\");\n        },\n\n        getBreakpoint: function(asDate){\n            return asDate === true ? new Date(this.breakpoint) : this.breakpoint;\n        },\n\n        getLeft: function(){\n            var dm = 24*60*60*1000, hm = 60*60*1000, mm = 60*1000, sm = 1000;\n            var now = (new Date()).getTime();\n            var left_seconds = Math.floor(this.breakpoint - now);\n            return {\n                days: Math.round(left_seconds / dm),\n                hours: Math.round(left_seconds / hm),\n                minutes: Math.round(left_seconds / mm),\n                seconds: Math.round(left_seconds / sm)\n            };\n        },\n\n        i18n: function(val){\n            var that = this, element = this.element, o = this.options;\n            var parts = [\"days\", \"hours\", \"minutes\", \"seconds\"];\n\n\n            if (val === undefined) {\n                return o.locale;\n            }\n            if (Metro.locales[val] === undefined) {\n                return false;\n            }\n            o.locale = val;\n            this.locale = Metro.locales[o.locale];\n\n            $.each(parts, function(){\n                var cls = \".part.\" + this;\n                var part = element.find(cls);\n                part.attr(\"data-label\", that.locale[\"calendar\"][\"time\"][this]);\n            });\n        },\n\n        changeAttrLocale: function(){\n            var element = this.element;\n            var locale = element.attr('data-locale');\n            this.i18n(locale);\n        },\n\n        changeAttribute: function(attr, newVal){\n            switch (attr) {\n                case \"data-pause\": this.togglePlay(); break;\n                case \"data-locale\": this.i18n(newVal); break;\n                case \"data-duration\": this.duration = +newVal <= 0 || +newVal >= 1000 ? 600 : +newVal; break;\n            }\n        },\n\n        destroy: function(){\n            clearInterval(this.blinkInterval);\n            clearInterval(this.tickInterval);\n\n            $(document).off(\"visibilitychange\", {ns: this.id});\n\n            return this.element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var CounterDefaultConfig = {\n        startOnViewport: true,\n        counterDeferred: 0,\n        duration: 2000,\n        value: 0,\n        from: 0,\n        timeout: 0,\n        delimiter: \",\",\n        prefix: \"\",\n        suffix: \"\",\n        onStart: Metro.noop,\n        onStop: Metro.noop,\n        onTick: Metro.noop,\n        onCounterCreate: Metro.noop\n    };\n\n    Metro.counterSetup = function (options) {\n        CounterDefaultConfig = $.extend({}, CounterDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroCounterSetup\"] !== undefined) {\n        Metro.counterSetup(window[\"metroCounterSetup\"]);\n    }\n\n    Metro.Component('counter', {\n        init: function( options, elem ) {\n            this._super(elem, options, CounterDefaultConfig, {\n                numbers: [],\n                html: $(elem).html(),\n                started: false,\n                id: Utils.elementId(\"counter\")\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            this._createEvents();\n            this._fireEvent(\"counter-create\");\n            this._run();\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n\n            $.window().on(\"scroll\", function(){\n                if (o.startOnViewport === true && Utils.inViewport(element[0]) && !that.started) {\n                    that.start();\n                }\n            }, {ns: this.id})\n        },\n\n        _run: function(){\n            var element = this.element, o = this.options;\n\n            this.started = false;\n\n            if (o.startOnViewport !== true) {\n                this.start();\n            } else {\n                if (Utils.inViewport(element[0])) {\n                    this.start();\n                }\n            }\n        },\n\n        startInViewport: function(val, from){\n            var o = this.options;\n\n            if (Utils.isValue(from)) {\n                o.from = +from;\n            }\n\n            if (Utils.isValue(val)) {\n                o.value = +val;\n            }\n            this._run();\n        },\n\n        start: function(val, from){\n            var that = this, element = this.element, o = this.options;\n\n            if (Utils.isValue(from)) {\n                o.from = +from;\n            }\n\n            if (Utils.isValue(val)) {\n                o.value = +val;\n            }\n\n            this.started = true;\n\n            this._fireEvent(\"start\");\n\n            element.animate({\n                draw: {\n                    innerHTML: [o.from, o.value]\n                },\n                defer: o.timeout,\n                dur: o.duration,\n                onFrame: function () {\n                    that._fireEvent(\"tick\", {\n                        value: +this.innerHTML\n                    });\n                    this.innerHTML = o.prefix + Number(this.innerHTML).format(0, 0, o.delimiter) + o.suffix\n                },\n                onDone: function(){\n                    that._fireEvent(\"stop\");\n                }\n            })\n        },\n\n        reset: function(){\n            this.started = false;\n            this.element.html(this.html);\n        },\n\n        changeAttribute: function(attr, val){\n            var o = this.options;\n\n            if (attr === \"data-value\") {\n                o.value = +val;\n            }\n            if (attr === \"data-from\") {\n                o.from = +val;\n            }\n        },\n\n        destroy: function(){\n            $.window().off(\"scroll\", {ns: this.id});\n            return this.element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var CubeDefaultConfig = {\n        cubeDeferred: 0,\n        rules: null,\n        color: null,\n        flashColor: null,\n        flashInterval: 1000,\n        numbers: false,\n        offBefore: true,\n        attenuation: .3,\n        stopOnBlur: false,\n        cells: 4,\n        margin: 8,\n        showAxis: false,\n        axisStyle: \"arrow\", //line\n        cellClick: false,\n        autoRestart: 5000,\n\n        clsCube: \"\",\n        clsCell: \"\",\n        clsSide: \"\",\n        clsSideLeft: \"\",\n        clsSideRight: \"\",\n        clsSideTop: \"\",\n        clsSideLeftCell: \"\",\n        clsSideRightCell: \"\",\n        clsSideTopCell: \"\",\n        clsAxis: \"\",\n        clsAxisX: \"\",\n        clsAxisY: \"\",\n        clsAxisZ: \"\",\n\n        custom: Metro.noop,\n        onTick: Metro.noop,\n        onCubeCreate: Metro.noop\n    };\n\n    Metro.cubeSetup = function (options) {\n        CubeDefaultConfig = $.extend({}, CubeDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroCubeSetup\"] !== undefined) {\n        Metro.cubeSetup(window[\"metroCubeSetup\"]);\n    }\n\n    Metro.cubeDefaultRules = [\n        {\n            on: {'top': [16],      'left': [4],         'right': [1]},\n            off: {'top': [13, 4],   'left': [1, 16],     'right': [13, 4]}\n        },\n        {\n            on: {'top': [12, 15],  'left': [3, 8],      'right': [2, 5]},\n            off: {'top': [9, 6, 3], 'left': [5, 10, 15], 'right': [14, 11, 8]}\n        },\n        {\n            on: {'top': [11],      'left': [7],         'right': [6]},\n            off: {'top': [1, 2, 5], 'left': [9, 13, 14], 'right': [15, 12, 16]}\n        },\n        {\n            on: {'top': [8, 14],   'left': [2, 12],     'right': [9, 3]},\n            off: {'top': [16],      'left': [4],         'right': [1]}\n        },\n        {\n            on: {'top': [10, 7],   'left': [6, 11],     'right': [10, 7]},\n            off: {'top': [12, 15],  'left': [3, 8],      'right': [2, 5]}\n        },\n        {\n            on: {'top': [13, 4],   'left': [1, 16],     'right': [13, 4]},\n            off: {'top': [11],      'left': [7],         'right': [6]}\n        },\n        {\n            on: {'top': [9, 6, 3], 'left': [5, 10, 15], 'right': [14, 11, 8]},\n            off: {'top': [8, 14],   'left': [2, 12],     'right': [9, 3]}\n        },\n        {\n            on: {'top': [1, 2, 5], 'left': [9, 13, 14], 'right': [15, 12, 16]},\n            off: {'top': [10, 7],   'left': [6, 11],     'right': [10, 7]}\n        }\n    ];\n\n    Metro.Component('cube', {\n        init: function( options, elem ) {\n            this._super(elem, options, CubeDefaultConfig, {\n                id: Utils.elementId(\"cube\"),\n                rules: null,\n                interval: false,\n                ruleInterval: false,\n                running: false,\n                intervals: []\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n\n            if (o.rules === null) {\n                this.rules = Metro.cubeDefaultRules;\n            } else {\n                this._parseRules(o.rules);\n            }\n\n            this._createCube();\n            this._createEvents();\n\n            this._fireEvent(\"cube-create\", {\n                element: element\n            });\n        },\n\n        _parseRules: function(rules){\n\n            if (rules === undefined || rules === null) {\n                return false;\n            }\n\n            if (Utils.isObject(rules)) {\n                this.rules = Utils.isObject(rules);\n                return true;\n            } else {\n                try {\n                    this.rules = JSON.parse(rules);\n                    return true;\n                } catch (err) {\n                    console.warn(\"Unknown or empty rules for cell flashing!\");\n                    return false;\n                }\n            }\n        },\n\n        _createCube: function(){\n            var element = this.element, o = this.options;\n            var sides = ['left', 'right', 'top'];\n            var id = Utils.elementId(\"cube\");\n            var cells_count = Math.pow(o.cells, 2);\n\n            element.addClass(\"cube\").addClass(o.clsCube);\n\n            if (!element.attr('id')) {\n                element.attr('id', id);\n            }\n\n            this.id = element.attr('id');\n\n            this._createCssForFlashColor();\n            this._createCssForCellSize();\n\n            $.each(sides, function(){\n                var side, cell, i;\n\n                side = $(\"<div>\").addClass(\"side \" + this+\"-side\").addClass(o.clsSide).appendTo(element);\n\n                if (this === 'left') {side.addClass(o.clsSideLeft);}\n                if (this === 'right') {side.addClass(o.clsSideRight);}\n                if (this === 'top') {side.addClass(o.clsSideTop);}\n\n                for(i = 0; i < cells_count; i++) {\n                    cell = $(\"<div>\").addClass(\"cube-cell\").addClass(\"cell-id-\"+(i+1)).addClass(o.clsCell);\n                    cell.data(\"id\", i + 1).data(\"side\", this);\n                    cell.appendTo(side);\n                    if (o.numbers === true) {\n                        cell.html(i + 1);\n                    }\n                }\n            });\n\n            var cells  = element.find(\".cube-cell\");\n            if (o.color !== null) {\n                if (Metro.colors.isColor(o.color)) {\n                    cells.css({\n                        backgroundColor: o.color,\n                        borderColor: o.color\n                    })\n                } else {\n                    cells.addClass(o.color);\n                }\n            }\n\n            var axis = ['x', 'y', 'z'];\n            $.each(axis, function(){\n                var axis_name = this;\n                var ax = $(\"<div>\").addClass(\"axis \" + o.axisStyle).addClass(\"axis-\"+axis_name).addClass(o.clsAxis);\n                if (axis_name === \"x\") ax.addClass(o.clsAxisX);\n                if (axis_name === \"y\") ax.addClass(o.clsAxisY);\n                if (axis_name === \"z\") ax.addClass(o.clsAxisZ);\n                ax.appendTo(element);\n            });\n\n            if (o.showAxis === false) {\n                element.find(\".axis\").hide();\n            }\n\n            this._run();\n        },\n\n        _run: function(){\n            var that = this, element = this.element, o = this.options;\n            var interval = 0;\n\n            clearInterval(this.interval);\n            element.find(\".cube-cell\").removeClass(\"light\");\n\n            if (o.custom !== Metro.noop) {\n                Utils.exec(o.custom, [element]);\n            } else {\n\n                element.find(\".cube-cell\").removeClass(\"light\");\n\n                that._start();\n\n                interval = Utils.isObject(this.rules) ? Utils.objectLength(this.rules) : 0;\n\n                this.interval = setInterval(function(){\n                    that._start();\n                }, interval * o.flashInterval);\n            }\n        },\n\n        _createCssForCellSize: function(){\n            var element = this.element, o = this.options;\n            var sheet = Metro.sheet;\n            var width;\n            var cell_size;\n\n            if (o.margin === 8 && o.cells === 4) {\n                return ;\n            }\n\n            width = parseInt(Utils.getStyleOne(element, 'width'));\n            cell_size = Math.ceil((width / 2 - o.margin * o.cells * 2) / o.cells);\n            Utils.addCssRule(sheet, \"#\"+element.attr('id')+\" .side .cube-cell\", \"width: \"+cell_size+\"px!important; height: \"+cell_size+\"px!important; margin: \" + o.margin + \"px!important;\");\n        },\n\n        _createCssForFlashColor: function(){\n            var element = this.element, o = this.options;\n            var sheet = Metro.sheet;\n            var rule1;\n            var rule2;\n            var rules1 = [];\n            var rules2 = [];\n            var i;\n\n            if (o.flashColor === null) {\n                return ;\n            }\n\n            rule1 = \"0 0 10px \" + Metro.colors.toRGBA(o.flashColor, 1);\n            rule2 = \"0 0 10px \" + Metro.colors.toRGBA(o.flashColor, o.attenuation);\n\n            for(i = 0; i < 3; i++) {\n                rules1.push(rule1);\n                rules2.push(rule2);\n            }\n\n            Utils.addCssRule(sheet, \"@keyframes pulsar-cell-\"+element.attr('id'), \"0%, 100% { \" + \"box-shadow: \" + rules1.join(\",\") + \"} 50% { \" + \"box-shadow: \" + rules2.join(\",\") + \" }\");\n            Utils.addCssRule(sheet, \"#\"+element.attr('id')+\" .side .cube-cell.light\", \"animation: pulsar-cell-\" + element.attr('id') + \" 2.5s 0s ease-out infinite; \" + \"background-color: \" + o.flashColor + \"!important; border-color: \" + o.flashColor+\"!important;\");\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n\n            $(window).on(Metro.events.blur, function(){\n                if (o.stopOnBlur === true && that.running === true) {\n                    that._stop();\n                }\n            }, {ns: element.attr(\"id\")});\n\n            $(window).on(Metro.events.focus, function(){\n                if (o.stopOnBlur === true && that.running === false) {\n                    that._start();\n                }\n            }, {ns: element.attr(\"id\")});\n\n            element.on(Metro.events.click, \".cube-cell\", function(){\n                if (o.cellClick === true) {\n                    var cell = $(this);\n                    cell.toggleClass(\"light\");\n                }\n            });\n        },\n\n        _start: function(){\n            var that = this, element = this.element;\n\n            element.find(\".cube-cell\").removeClass(\"light\");\n\n            this.running = true;\n\n            $.each(this.rules, function(index, rule){\n                that._execRule(index, rule);\n            });\n        },\n\n        _stop: function(){\n            this.running = false;\n            clearInterval(this.interval);\n            $.each(this.intervals, function(){\n                clearInterval(this);\n            })\n        },\n\n        _tick: function(index, speed){\n            var that = this, o = this.options;\n            if (speed === undefined) {\n                speed = o.flashInterval * index;\n            }\n\n            var interval = setTimeout(function(){\n\n                that._fireEvent(\"tick\", {\n                    index: index\n                });\n\n                clearInterval(interval);\n                Utils.arrayDelete(that.intervals, interval);\n            }, speed);\n            this.intervals.push(interval);\n        },\n\n        _toggle: function(cell, func, time, speed){\n            var that = this;\n            if (speed === undefined) {\n                speed = this.options.flashInterval * time;\n            }\n            var interval = setTimeout(function(){\n                cell[func === 'on' ? 'addClass' : 'removeClass'](\"light\");\n                clearInterval(interval);\n                Utils.arrayDelete(that.intervals, interval);\n            }, speed);\n            this.intervals.push(interval);\n        },\n\n        start: function(){\n            this._start();\n        },\n\n        stop: function(){\n            this._stop();\n        },\n\n        toRule: function(index, speed){\n            var that = this, element = this.element, o = this.options;\n            var rules = this.rules;\n\n            if (rules === null || rules === undefined || rules[index] === undefined) {\n                return ;\n            }\n            clearInterval(this.ruleInterval);\n            this.ruleInterval = false;\n            this.stop();\n            element.find(\".cube-cell\").removeClass(\"light\");\n            for (var i = 0; i <= index; i++) {\n                this._execRule(i, rules[i], speed);\n            }\n            if (Utils.isInt(o.autoRestart) && o.autoRestart > 0) {\n                this.ruleInterval = setTimeout(function(){\n                    that._run();\n                }, o.autoRestart);\n            }\n        },\n\n        _execRule: function(index, rule, speed){\n            var that = this, element = this.element;\n            var sides = ['left', 'right', 'top'];\n\n            this._tick(index, speed);\n\n            $.each(sides, function(){\n                var side_class = \".\"+this+\"-side\";\n                var side_name = this;\n                var cells_on = rule[\"on\"] !== undefined && rule[\"on\"][side_name] !== undefined ? rule[\"on\"][side_name] : false;\n                var cells_off = rule[\"off\"] !== undefined && rule[\"off\"][side_name] !== undefined ? rule[\"off\"][side_name] : false;\n\n                if (cells_on !== false) $.each(cells_on, function(){\n                    var cell_index = this;\n                    var cell = element.find(side_class + \" .cell-id-\"+cell_index);\n\n                    that._toggle(cell, 'on', index, speed);\n                });\n\n                if (cells_off !== false) $.each(cells_off, function(){\n                    var cell_index = this;\n                    var cell = element.find(side_class + \" .cell-id-\"+cell_index);\n\n                    that._toggle(cell, 'off', index, speed);\n                });\n            });\n        },\n\n        rule: function(r){\n            if (r === undefined) {\n                return this.rules;\n            }\n\n            if (this._parseRules(r) !== true) {\n                return ;\n            }\n            this.options.rules = r;\n            this.stop();\n            this.element.find(\".cube-cell\").removeClass(\"light\");\n            this._run();\n        },\n\n        axis: function(show){\n            var func = show === true ? \"show\" : \"hide\";\n            this.element.find(\".axis\")[func]();\n        },\n\n        changeRules: function(){\n            var element = this.element, o = this.options;\n            var rules = element.attr(\"data-rules\");\n            if (this._parseRules(rules) !== true) {\n                return ;\n            }\n            this.stop();\n            element.find(\".cube-cell\").removeClass(\"light\");\n            o.rules = rules;\n            this._run();\n        },\n\n        changeAxisVisibility: function(){\n            var element = this.element;\n            var visibility = JSON.parse(element.attr(\"data-show-axis\")) === true;\n            var func = visibility ? \"show\" : \"hide\";\n            element.find(\".axis\")[func]();\n        },\n\n        changeAxisStyle: function(){\n            var element = this.element;\n            var style = element.attr(\"data-axis-style\");\n\n            element.find(\".axis\").removeClass(\"arrow line no-style\").addClass(style);\n        },\n\n        changeAttribute: function(attributeName){\n            switch (attributeName) {\n                case \"data-rules\": this.changeRules(); break;\n                case \"data-show-axis\": this.changeAxisVisibility(); break;\n                case \"data-axis-style\": this.changeAxisStyle(); break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element;\n\n            clearInterval(this.interval);\n            this.interval = null;\n\n            $(window).off(Metro.events.blur, {ns: element.attr(\"id\")});\n            $(window).off(Metro.events.focus,{ns: element.attr(\"id\")});\n\n            element.off(Metro.events.click, \".cube-cell\");\n\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var DatePickerDefaultConfig = {\n        label: \"\",\n        datepickerDeferred: 0,\n        gmt: 0,\n        format: \"YYYY-MM-DD\",\n        inputFormat: null,\n        locale: METRO_LOCALE,\n        value: null,\n        distance: 3,\n        month: true,\n        day: true,\n        year: true,\n        minYear: null,\n        maxYear: null,\n        defaultYearDistance: 100,\n        scrollSpeed: 4,\n        copyInlineStyles: false,\n        clsPicker: \"\",\n        clsPart: \"\",\n        clsMonth: \"\",\n        clsDay: \"\",\n        clsYear: \"\",\n        clsLabel: \"\",\n        clsButton: \"\",\n        clsOkButton: \"\",\n        clsCancelButton: \"\",\n        okButtonIcon: \"<span class='default-icon-check'></span>\",\n        cancelButtonIcon: \"<span class='default-icon-cross'></span>\",\n        onSet: Metro.noop,\n        onOpen: Metro.noop,\n        onClose: Metro.noop,\n        onScroll: Metro.noop,\n        onDatePickerCreate: Metro.noop\n    };\n\n    Metro.datePickerSetup = function (options) {\n        DatePickerDefaultConfig = $.extend({}, DatePickerDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroDatePickerSetup\"] !== undefined) {\n        Metro.datePickerSetup(window[\"metroDatePickerSetup\"]);\n    }\n\n    Metro.Component('date-picker', {\n        init: function( options, elem ) {\n            this._super(elem, options, DatePickerDefaultConfig, {\n                picker: null,\n                isOpen: false,\n                value: datetime(),\n                locale: null,\n                listTimer: {\n                    day: null,\n                    month: null,\n                    year: null\n                }\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n            var date = datetime();\n\n            if (o.distance < 1) {\n                o.distance = 1;\n            }\n\n            if (Utils.isValue(element.val())) {\n                o.value = element.val();\n            }\n\n            if (Utils.isValue(o.value)) {\n                this.value = o.inputFormat ? Datetime.from(o.value, o.inputFormat, o.locale) : datetime(o.value);\n            }\n\n            if (Metro.locales[o.locale] === undefined) {\n                o.locale = METRO_LOCALE;\n            }\n\n            this.locale = Metro.locales[o.locale]['calendar'];\n\n            if (o.minYear === null) {\n                o.minYear = date.year() - o.defaultYearDistance;\n            }\n\n            if (o.maxYear === null) {\n                o.maxYear = date.year() + o.defaultYearDistance;\n            }\n\n            this._createStructure();\n            this._createEvents();\n            this._set();\n\n            this._fireEvent(\"datepicker-create\", {\n                element: element\n            });\n        },\n\n        _createStructure: function(){\n            var element = this.element, o = this.options;\n            var picker, month, day, year, i, j;\n            var dateWrapper, selectWrapper, selectBlock, actionBlock;\n\n            var id = Utils.elementId(\"datepicker\");\n\n            picker = $(\"<div>\").attr(\"id\", id).addClass(\"wheel-picker date-picker \" + element[0].className).addClass(o.clsPicker);\n\n            picker.insertBefore(element);\n            element.appendTo(picker);\n\n            if (o.label) {\n                var label = $(\"<label>\").addClass(\"label-for-input\").addClass(o.clsLabel).html(o.label).insertBefore(picker);\n                if (element.attr(\"id\")) {\n                    label.attr(\"for\", element.attr(\"id\"));\n                }\n                if (element.attr(\"dir\") === \"rtl\") {\n                    label.addClass(\"rtl\");\n                }\n            }\n\n            dateWrapper = $(\"<div>\").addClass(\"date-wrapper\").appendTo(picker);\n\n            if (o.month === true) {\n                month = $(\"<div>\").addClass(\"month\").addClass(o.clsPart).addClass(o.clsMonth).appendTo(dateWrapper);\n            }\n            if (o.day === true) {\n                day = $(\"<div>\").addClass(\"day\").addClass(o.clsPart).addClass(o.clsDay).appendTo(dateWrapper);\n            }\n            if (o.year === true) {\n                year = $(\"<div>\").addClass(\"year\").addClass(o.clsPart).addClass(o.clsYear).appendTo(dateWrapper);\n            }\n\n            selectWrapper = $(\"<div>\").addClass(\"select-wrapper\").appendTo(picker);\n\n            selectBlock = $(\"<div>\").addClass(\"select-block\").appendTo(selectWrapper);\n\n            if (o.month === true) {\n                month = $(\"<ul>\").addClass(\"sel-month\").appendTo(selectBlock);\n                for (i = 0; i < o.distance; i++) $(\"<li>\").html(\"&nbsp;\").data(\"value\", -1).appendTo(month);\n                for (i = 0; i < 12; i++) {\n                    $(\"<li>\").addClass(\"js-month-\"+i+\" js-month-real-\"+this.locale['months'][i].toLowerCase()).html(this.locale['months'][i]).data(\"value\", i).appendTo(month);\n                }\n                for (i = 0; i < o.distance; i++) $(\"<li>\").html(\"&nbsp;\").data(\"value\", -1).appendTo(month);\n            }\n\n            if (o.day === true) {\n                day = $(\"<ul>\").addClass(\"sel-day\").appendTo(selectBlock);\n                for (i = 0; i < o.distance; i++) $(\"<li>\").html(\"&nbsp;\").data(\"value\", -1).appendTo(day);\n                for (i = 0; i < 31; i++) {\n                    $(\"<li>\").addClass(\"js-day-\"+i+\" js-day-real-\"+(i+1)).html(i + 1).data(\"value\", i + 1).appendTo(day);\n                }\n                for (i = 0; i < o.distance; i++) $(\"<li>\").html(\"&nbsp;\").data(\"value\", -1).appendTo(day);\n            }\n\n            if (o.year === true) {\n                year = $(\"<ul>\").addClass(\"sel-year\").appendTo(selectBlock);\n                for (i = 0; i < o.distance; i++) $(\"<li>\").html(\"&nbsp;\").data(\"value\", -1).appendTo(year);\n                for (i = o.minYear, j = 0; i <= o.maxYear; i++, j++) {\n                    $(\"<li>\").addClass(\"js-year-\"+ j + \" js-year-real-\" + i).html(i).data(\"value\", i).appendTo(year);\n                }\n                for (i = 0; i < o.distance; i++) $(\"<li>\").html(\"&nbsp;\").data(\"value\", -1).appendTo(year);\n            }\n\n            selectBlock.height((o.distance * 2 + 1) * 40);\n\n            actionBlock = $(\"<div>\").addClass(\"action-block\").appendTo(selectWrapper);\n            $(\"<button>\").attr(\"type\", \"button\").addClass(\"button action-ok\").addClass(o.clsButton).addClass(o.clsOkButton).html(o.okButtonIcon).appendTo(actionBlock);\n            $(\"<button>\").attr(\"type\", \"button\").addClass(\"button action-cancel\").addClass(o.clsButton).addClass(o.clsCancelButton).html(o.cancelButtonIcon).appendTo(actionBlock);\n\n\n            element[0].className = '';\n            if (o.copyInlineStyles === true) {\n                for (i = 0; i < element[0].style.length; i++) {\n                    picker.css(element[0].style[i], element.css(element[0].style[i]));\n                }\n            }\n\n            if (element.prop(\"disabled\")) {\n                picker.addClass(\"disabled\");\n            }\n\n            this.picker = picker;\n        },\n\n        _createEvents: function(){\n            var that = this, o = this.options;\n            var picker = this.picker;\n\n            picker.on(Metro.events.start, \".select-block ul\", function(e){\n\n                if (e.changedTouches) {\n                    return ;\n                }\n\n                var target = this;\n                var pageY = Utils.pageXY(e).y;\n\n                $(document).on(Metro.events.move, function(e){\n\n                    target.scrollTop -= o.scrollSpeed * (pageY  > Utils.pageXY(e).y ? -1 : 1);\n\n                    pageY = Utils.pageXY(e).y;\n                }, {ns: picker.attr(\"id\")});\n\n                $(document).on(Metro.events.stop, function(){\n                    $(document).off(Metro.events.move, {ns: picker.attr(\"id\")});\n                    $(document).off(Metro.events.stop, {ns: picker.attr(\"id\")});\n                }, {ns: picker.attr(\"id\")});\n            });\n\n            picker.on(Metro.events.click, function(e){\n                if (that.isOpen === false) that.open();\n                e.stopPropagation();\n            });\n\n            picker.on(Metro.events.click, \".action-ok\", function(e){\n                var m, d, y;\n                var sm = picker.find(\".sel-month li.active\"),\n                    sd = picker.find(\".sel-day li.active\"),\n                    sy = picker.find(\".sel-year li.active\");\n\n                m = sm.length === 0 ? that.value.getMonth() : sm.data(\"value\");\n                d = sd.length === 0 ? that.value.getDate() : sd.data(\"value\");\n                y = sy.length === 0 ? that.value.getFullYear() : sy.data(\"value\");\n\n                that.value = datetime(y, m, d);\n                that._correct();\n                that._set();\n\n                that.close();\n                e.stopPropagation();\n            });\n\n            picker.on(Metro.events.click, \".action-cancel\", function(e){\n                that.close();\n                e.stopPropagation();\n            });\n\n            var scrollLatency = 150;\n            $.each([\"month\", \"day\", \"year\"], function(){\n                var part = this, list = picker.find(\".sel-\"+part);\n\n                list.on(\"scroll\", function(){\n                    if (that.isOpen) {\n                        if (that.listTimer[part]) {\n                            clearTimeout(that.listTimer[part]);\n                            that.listTimer[part] = null;\n                        }\n\n                        if (!that.listTimer[part]) that.listTimer[part] = setTimeout(function () {\n\n                            var target, targetElement, scrollTop;\n\n                            that.listTimer[part] = null;\n\n                            target = Math.round((Math.ceil(list.scrollTop()) / 40));\n\n                            targetElement = list.find(\".js-\" + part + \"-\" + target);\n                            scrollTop = targetElement.position().top - (o.distance * 40);\n\n                            list.find(\".active\").removeClass(\"active\");\n\n                            list[0].scrollTop = scrollTop;\n                            targetElement.addClass(\"active\");\n                            Utils.exec(o.onScroll, [targetElement, list, picker], list[0]);\n\n                        }, scrollLatency);\n                    }\n                })\n            });\n        },\n\n        _correct: function(){\n            var m = this.value.month(),\n                d = this.value.day(),\n                y = this.value.year();\n\n            this.value = datetime(y, m, d);\n        },\n\n        _set: function(){\n            var element = this.element, o = this.options;\n            var picker = this.picker;\n            var m = this.locale['months'][this.value.month()],\n                d = this.value.day(),\n                y = this.value.year();\n\n            if (o.month === true) {\n                picker.find(\".month\").html(m);\n            }\n            if (o.day === true) {\n                picker.find(\".day\").html(d);\n            }\n            if (o.year === true) {\n                picker.find(\".year\").html(y);\n            }\n\n            element.val(this.value.format(o.format, o.locale)).trigger(\"change\");\n\n            this._fireEvent(\"set\", {\n                value: this.value.val(),\n                elementValue: element.val(),\n                picker: picker\n            })\n        },\n\n        open: function(){\n            var o = this.options;\n            var picker = this.picker;\n            var m = this.value.month(), d = this.value.day() - 1, y = this.value.year();\n            var m_list, d_list, y_list;\n            var select_wrapper = picker.find(\".select-wrapper\");\n            var select_wrapper_in_viewport, select_wrapper_rect;\n\n            select_wrapper.parent().removeClass(\"for-top for-bottom\");\n            select_wrapper.show(0);\n            picker.find(\"li\").removeClass(\"active\");\n\n            select_wrapper_in_viewport = Utils.inViewport(select_wrapper[0]);\n            select_wrapper_rect = Utils.rect(select_wrapper[0]);\n\n            if (!select_wrapper_in_viewport && select_wrapper_rect.top > 0) {\n                select_wrapper.parent().addClass(\"for-bottom\");\n            }\n\n            if (!select_wrapper_in_viewport && select_wrapper_rect.top < 0) {\n                select_wrapper.parent().addClass(\"for-top\");\n            }\n\n            if (o.month === true) {\n                m_list = picker.find(\".sel-month\");\n                m_list\n                    .scrollTop(0)\n                    .animate({\n                        draw: {\n                            scrollTop: m_list.find(\"li.js-month-\" + m).addClass(\"active\").position().top - (40 * o.distance)\n                        },\n                        dur: 100\n                    });\n            }\n            if (o.day === true) {\n                d_list = picker.find(\".sel-day\");\n                d_list\n                    .scrollTop(0)\n                    .animate({\n                        draw: {\n                            scrollTop: d_list.find(\"li.js-day-\" + d).addClass(\"active\").position().top - (40 * o.distance)\n                        },\n                        dur: 100\n                    });\n            }\n            if (o.year === true) {\n                y_list = picker.find(\".sel-year\");\n                y_list\n                    .scrollTop(0)\n                    .animate({\n                        draw: {\n                            scrollTop: y_list.find(\"li.js-year-real-\" + y).addClass(\"active\").position().top - (40 * o.distance)\n                        },\n                        dur: 100\n                    });\n            }\n\n            this.isOpen = true;\n\n            this._fireEvent(\"open\", {\n                value: this.value.val(),\n                picker: picker\n            })\n\n        },\n\n        close: function(){\n            var picker = this.picker;\n            picker.find(\".select-wrapper\").hide(0);\n            this.isOpen = false;\n\n            this._fireEvent(\"close\", {\n                value: this.value.val(),\n                picker: picker\n            });\n        },\n\n        val: function(value){\n            var o = this.options;\n\n            if (!Utils.isValue(value)) {\n                return this.element.val();\n            }\n\n            this.value = o.inputFormat ? Datetime.from(value, o.inputFormat, o.locale) : datetime(value);\n\n            this._set();\n        },\n\n        date: function(t, f){\n            if (t === undefined) {\n                return this.value.val();\n            }\n\n            try {\n                this.value = Datetime.from(t, f, this.options.locale);\n                this._set();\n            } catch (e) {\n                return false;\n            }\n        },\n\n        i18n: function(locale){\n            var element = this.element, o = this.options;\n            var month, i;\n\n            o.locale = locale ? locale : element.attr(\"data-locale\");\n            this.locale = Metro.locales[o.locale]['calendar'];\n\n            if (o.month === true) {\n                month =  element.closest(\".date-picker\").find(\".sel-month\").html(\"\");\n                for (i = 0; i < o.distance; i++) $(\"<li>\").html(\"&nbsp;\").data(\"value\", -1).appendTo(month);\n                for (i = 0; i < 12; i++) {\n                    $(\"<li>\").addClass(\"js-month-\"+i+\" js-month-real-\"+this.locale['months'][i].toLowerCase()).html(this.locale['months'][i]).data(\"value\", i).appendTo(month);\n                }\n                for (i = 0; i < o.distance; i++) $(\"<li>\").html(\"&nbsp;\").data(\"value\", -1).appendTo(month);\n            }\n\n            this._set();\n        },\n\n\n        disable: function(){\n            this.element.data(\"disabled\", true);\n            this.element.parent().addClass(\"disabled\");\n        },\n\n        enable: function(){\n            this.element.data(\"disabled\", false);\n            this.element.parent().removeClass(\"disabled\");\n        },\n\n        toggleState: function(){\n            if (this.elem.disabled) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        },\n\n        changeAttribute: function(attr, newValue){\n            switch (attr) {\n                case \"disabled\": this.toggleState(); break;\n                case \"data-value\": this.val(newValue); break;\n                case \"data-locale\": this.i18n(newValue); break;\n                case \"data-format\":\n                    this.options.format = newValue;\n                    this._set();\n                    break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element, picker = this.picker;\n\n            $.each([\"moth\", \"day\", \"year\"], function(){\n                picker.find(\".sel-\"+this).off(\"scroll\");\n            });\n\n            picker.off(Metro.events.start, \".select-block ul\");\n            picker.off(Metro.events.click);\n            picker.off(Metro.events.click, \".action-ok\");\n            picker.off(Metro.events.click, \".action-cancel\");\n\n            return element;\n        }\n    });\n\n    $(document).on(Metro.events.click, function(){\n        $.each($(\".date-picker\"), function(){\n            $(this).find(\"input\").each(function(){\n                Metro.getPlugin(this, \"datepicker\").close();\n            });\n        });\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var DialogDefaultConfig = {\n        dialogDeferred: 0,\n        closeButton: false,\n        leaveOverlayOnClose: false,\n        toTop: false,\n        toBottom: false,\n        locale: METRO_LOCALE,\n        title: \"\",\n        content: \"\",\n        actions: {},\n        actionsAlign: \"right\",\n        defaultAction: true,\n        overlay: true,\n        overlayColor: '#000000',\n        overlayAlpha: .5,\n        overlayClickClose: false,\n        width: '480',\n        height: 'auto',\n        shadow: true,\n        closeAction: true,\n        clsDialog: \"\",\n        clsTitle: \"\",\n        clsContent: \"\",\n        clsAction: \"\",\n        clsDefaultAction: \"\",\n        clsOverlay: \"\",\n        autoHide: 0,\n        removeOnClose: false,\n        show: false,\n\n        _runtime: false,\n\n        onShow: Metro.noop,\n        onHide: Metro.noop,\n        onOpen: Metro.noop,\n        onClose: Metro.noop,\n        onDialogCreate: Metro.noop\n    };\n\n    Metro.dialogSetup = function (options) {\n        DialogDefaultConfig = $.extend({}, DialogDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroDialogSetup\"] !== undefined) {\n        Metro.dialogSetup(window[\"metroDialogSetup\"]);\n    }\n\n    Metro.Component('dialog', {\n        _counter: 0,\n\n        init: function( options, elem ) {\n            this._super(elem, options, DialogDefaultConfig, {\n                interval: null,\n                overlay: null,\n                id: Utils.elementId(\"dialog\")\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var o = this.options;\n            this.locale = Metro.locales[o.locale] !== undefined ? Metro.locales[o.locale] : Metro.locales[\"en-US\"];\n            this._build();\n        },\n\n        _build: function(){\n            var that = this, element = this.element, o = this.options;\n            var body = $(\"body\");\n            var overlay;\n\n            element.addClass(\"dialog\");\n\n            if (o.shadow === true) {\n                element.addClass(\"shadow-on\");\n            }\n\n            if (o.title !== \"\") {\n                this.setTitle(o.title);\n            }\n\n            if (o.content !== \"\") {\n                this.setContent(o.content);\n            }\n\n            if (o.defaultAction === true || (o.actions !== false && typeof o.actions === 'object' && Utils.objectLength(o.actions) > 0)) {\n                var buttons = element.find(\".dialog-actions\");\n                var button;\n\n                if (buttons.length === 0) {\n                    buttons = $(\"<div>\").addClass(\"dialog-actions\").addClass(\"text-\"+o.actionsAlign).appendTo(element);\n                }\n\n                if (o.defaultAction === true && (Utils.objectLength(o.actions) === 0 && element.find(\".dialog-actions > *\").length === 0)) {\n                    button = $(\"<button>\").addClass(\"button js-dialog-close\").addClass(o.clsDefaultAction).html(this.locale[\"buttons\"][\"ok\"]);\n                    button.appendTo(buttons);\n                }\n\n                if (Utils.isObject(o.actions)) $.each(Utils.isObject(o.actions), function(){\n                    var item = this;\n                    button = $(\"<button>\").addClass(\"button\").addClass(item.cls).html(item.caption);\n                    if (item.onclick !== undefined) button.on(Metro.events.click, function(){\n                        Utils.exec(item.onclick, [element]);\n                    });\n                    button.appendTo(buttons);\n                });\n            }\n\n            if (o.overlay === true) {\n                overlay  = this._overlay();\n                this.overlay = overlay;\n            }\n\n            if (o.closeAction === true) {\n                element.on(Metro.events.click, \".js-dialog-close\", function(){\n                    that.close();\n                });\n            }\n\n            var closer = element.find(\"closer\");\n            if (closer.length === 0) {\n                closer = $(\"<span>\").addClass(\"button square closer js-dialog-close\");\n                closer.appendTo(element);\n            }\n            if (o.closeButton !== true) {\n                closer.hide();\n            }\n\n            element.css({\n                width: o.width,\n                height: o.height,\n                visibility: \"hidden\",\n                top: '100%',\n                left: ( $(window).width() - element.outerWidth() ) / 2\n            });\n\n            element.addClass(o.clsDialog);\n            element.find(\".dialog-title\").addClass(o.clsTitle);\n            element.find(\".dialog-content\").addClass(o.clsContent);\n            element.find(\".dialog-actions\").addClass(o.clsAction);\n\n            element.appendTo(body);\n\n            if (o.show) {\n                this.open();\n            }\n\n            $(window).on(Metro.events.resize, function(){\n                that.setPosition();\n            }, {ns: this.id});\n\n            this._fireEvent(\"dialog-create\", {\n                element: element\n            });\n        },\n\n        _overlay: function(){\n            var o = this.options;\n\n            var overlay = $(\"<div>\");\n            overlay.addClass(\"overlay\").addClass(o.clsOverlay);\n\n            if (o.overlayColor === 'transparent') {\n                overlay.addClass(\"transparent\");\n            } else {\n                overlay.css({\n                    background: Metro.colors.toRGBA(o.overlayColor, o.overlayAlpha)\n                });\n            }\n\n            return overlay;\n        },\n\n        hide: function(callback){\n            var element = this.element, o = this.options;\n            var timeout = 0;\n            if (o.onHide !== Metro.noop) {\n                timeout = 500;\n\n                this._fireEvent(\"hide\");\n            }\n            setTimeout(function(){\n                Utils.exec(callback, null, element[0]);\n                element.css({\n                    visibility: \"hidden\",\n                    top: \"100%\"\n                });\n            }, timeout);\n        },\n\n        show: function(callback){\n            var element = this.element;\n            this.setPosition();\n            element.css({\n                visibility: \"visible\"\n            });\n\n            this._fireEvent(\"show\");\n\n            Utils.exec(callback, null, element[0]);\n        },\n\n        setPosition: function(){\n            var element = this.element, o = this.options;\n            var top, bottom;\n            if (o.toTop !== true && o.toBottom !== true) {\n                top = ( $(window).height() - element.outerHeight() ) / 2;\n                if (top < 0) {\n                    top = 0;\n                }\n                bottom = \"auto\";\n            } else {\n                if (o.toTop === true) {\n                    top = 0;\n                    bottom = \"auto\";\n                }\n                if (o.toTop !== true && o.toBottom === true) {\n                    bottom = 0;\n                    top = \"auto\";\n                }\n            }\n            element.css({\n                top: top,\n                bottom: bottom,\n                left: ( $(window).width() - element.outerWidth() ) / 2\n            });\n        },\n\n        setContent: function(c){\n            var element = this.element;\n            var content = element.find(\".dialog-content\");\n            if (content.length === 0) {\n                content = $(\"<div>\").addClass(\"dialog-content\");\n                content.appendTo(element);\n            }\n\n            if (!Utils.isQ(c) && Utils.isFunc(c)) {\n                c = Utils.exec(c);\n            }\n\n            if (Utils.isQ(c)) {\n                c.appendTo(content);\n            } else {\n                content.html(c);\n            }\n        },\n\n        setTitle: function(t){\n            var element = this.element;\n            var title = element.find(\".dialog-title\");\n            if (title.length === 0) {\n                title = $(\"<div>\").addClass(\"dialog-title\");\n                title.appendTo(element);\n            }\n            title.html(t);\n        },\n\n        close: function(){\n            var that = this, element = this.element, o = this.options;\n\n            if (!Utils.bool(o.leaveOverlayOnClose)) {\n                $('body').find('.overlay').remove();\n            }\n\n            this.hide(function(){\n                element.data(\"open\", false);\n\n                that._fireEvent(\"close\")\n\n                if (o.removeOnClose === true) {\n                    element.remove();\n                }\n            });\n        },\n\n        open: function(){\n            var that = this, element = this.element, o = this.options;\n\n            if (o.overlay === true && $(\".overlay\").length === 0) {\n                this.overlay.appendTo($(\"body\"));\n                if (o.overlayClickClose === true) {\n                    this.overlay.on(Metro.events.click, function(){\n                        that.close();\n                    });\n                }\n            }\n\n            this.show(function(){\n\n                that._fireEvent(\"open\");\n\n                element.data(\"open\", true);\n                if (parseInt(o.autoHide) > 0) {\n                    setTimeout(function(){\n                        that.close();\n                    }, parseInt(o.autoHide));\n                }\n            });\n        },\n\n        toggle: function(){\n            var element = this.element;\n            if (element.data('open')) {\n                this.close();\n            } else {\n                this.open();\n            }\n        },\n\n        isOpen: function(){\n            return this.element.data('open') === true;\n        },\n\n        /* eslint-disable-next-line */\n        changeAttribute: function(attributeName){\n        },\n\n        destroy: function(){\n            var element = this.element;\n\n            element.off(Metro.events.click, \".js-dialog-close\");\n            element.find(\".button\").off(Metro.events.click);\n            $(window).off(Metro.events.resize,{ns: this.id});\n\n            return element;\n        }\n    });\n\n    Metro.dialog = {\n        isDialog: function(el){\n            return Utils.isMetroObject(el, \"dialog\");\n        },\n\n        open: function(el, content, title){\n            if (!this.isDialog(el)) {\n                return false;\n            }\n            var dialog = Metro.getPlugin(el, \"dialog\");\n            if (title !== undefined) {\n                dialog.setTitle(title);\n            }\n            if (content !== undefined) {\n                dialog.setContent(content);\n            }\n            dialog.open();\n        },\n\n        close: function(el){\n            if (!this.isDialog(el)) {\n                return false;\n            }\n            Metro.getPlugin($(el)[0], \"dialog\").close();\n        },\n\n        toggle: function(el){\n            if (!this.isDialog(el)) {\n                return false;\n            }\n            Metro.getPlugin($(el)[0], \"dialog\").toggle();\n        },\n\n        isOpen: function(el){\n            if (!this.isDialog(el)) {\n                return false;\n            }\n            Metro.getPlugin($(el)[0], \"dialog\").isOpen();\n        },\n\n        remove: function(el){\n            if (!this.isDialog(el)) {\n                return false;\n            }\n            var dialog = Metro.getPlugin($(el)[0], \"dialog\");\n            dialog.options.removeOnClose = true;\n            dialog.close();\n        },\n\n        create: function(options){\n            var dlg;\n\n            dlg = $(\"<div>\").appendTo($(\"body\"));\n\n            var dlg_options = $.extend({}, {\n                show: true,\n                closeAction: true,\n                removeOnClose: true\n            }, (options !== undefined ? options : {}));\n\n            dlg_options._runtime = true;\n\n            return Metro.makePlugin(dlg, \"dialog\", dlg_options);\n        }\n    };\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var DonutDefaultConfig = {\n        donutDeferred: 0,\n        size: 100,\n        hole: .8,\n        value: 0,\n        background: \"#ffffff\",\n        color: \"\",\n        stroke: \"#d1d8e7\",\n        fill: \"#49649f\",\n        fontSize: 0,\n        total: 100,\n        cap: \"%\",\n        showText: true,\n        showValue: false,\n        animate: 0,\n        onChange: Metro.noop,\n        onDrawValue: function(v){return v},\n        onDonutCreate: Metro.noop\n    };\n\n    Metro.donutSetup = function (options) {\n        DonutDefaultConfig = $.extend({}, DonutDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroDonutSetup\"] !== undefined) {\n        Metro.donutSetup(window[\"metroDonutSetup\"]);\n    }\n\n    Metro.Component('donut', {\n        init: function( options, elem ) {\n            this._super(elem, options, DonutDefaultConfig, {\n                value: 0,\n                animation_change_interval: null\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n\n            element.addClass(\"donut\");\n\n            this._setElementSize();\n            this._draw();\n            this._addEvents();\n            this.val(o.value);\n\n            this._fireEvent(\"donut-create\", {\n                element: element\n            });\n        },\n\n        _setElementSize: function(){\n            var element = this.element, o = this.options;\n            var width = o.size;\n\n            element.css({\n                width: width,\n                background: o.background\n            });\n\n            element.css({\n                height: element.width()\n            });\n        },\n\n        _draw: function(){\n            var element = this.element, o = this.options;\n            var html = \"\";\n            var radius = element.width() / 2\n            var r = radius  * (1 - (1 - o.hole) / 2);\n            var width = radius * (1 - o.hole);\n            var transform = 'rotate(-90 ' + radius + ',' + radius + ')';\n            var fontSize = o.fontSize === 0 ? r * o.hole * 0.6 : o.fontSize;\n\n            html += \"<svg>\";\n            html += \"   <circle class='donut-back' r='\"+(r)+\"px' cx='\"+(radius)+\"px' cy='\"+(radius)+\"px' transform='\"+(transform)+\"' fill='none' stroke='\"+(o.stroke)+\"' stroke-width='\"+(width)+\"'/>\";\n            html += \"   <circle class='donut-fill' r='\"+(r)+\"px' cx='\"+(radius)+\"px' cy='\"+(radius)+\"px' transform='\"+(transform)+\"' fill='none' stroke='\"+(o.fill)+\"' stroke-width='\"+(width)+\"'/>\";\n\n            if (o.showText === true)\n                html += \"   <text class='donut-title' x='\"+(radius)+\"px' y='\"+(radius)+\"px' dy='\"+(fontSize/3)+\"px' text-anchor='middle' fill='\"+(o.color !== \"\" ? o.color: o.fill)+\"' font-size='\"+(fontSize)+\"px'></text>\";\n\n            html += \"</svg>\";\n\n            element.html(html);\n        },\n\n        _addEvents: function(){\n            var that = this;\n\n            $(window).on(\"resize\", function(){\n                that._setElementSize();\n                that._draw();\n                that.val(that.value);\n            })\n        },\n\n        _setValue: function(v){\n            var element = this.element, o = this.options;\n\n            var fill = element.find(\".donut-fill\");\n            var title = element.find(\".donut-title\");\n            var radius = element.width() / 2\n            var r = radius  * (1 - (1 - o.hole) / 2);\n            var circumference = Math.round(2 * Math.PI * r);\n            var title_value = (o.showValue ? v : Utils.percent(o.total, v, true))/*  + (o.cap)*/;\n            var fill_value = Math.round(((+v * circumference) / o.total));// + ' ' + circumference;\n\n            var sda = fill.attr(\"stroke-dasharray\");\n            if (typeof sda === \"undefined\") {\n                sda = 0;\n            } else {\n                sda = +sda.split(\" \")[0];\n            }\n            var delta = fill_value - sda;\n\n            fill.animate({\n                draw: function(t, p){\n                    $(this).attr(\"stroke-dasharray\", (sda + delta * p ) + ' ' + circumference);\n                },\n                dur: o.animate\n            })\n\n            title.html(Metro.utils.exec(o.onDrawValue, [title_value + o.cap]));\n        },\n\n        val: function(v){\n            var o = this.options;\n\n            if (v === undefined) {\n                return this.value\n            }\n\n            if (parseInt(v) < 0 || parseInt(v) > o.total) {\n                return false;\n            }\n\n            this._setValue(v);\n\n            this.value = v;\n\n            this._fireEvent(\"change\", {\n                value: this.value\n            });\n        },\n\n        setColor: function(obj){\n            var validKeys = [\"background\", \"fill\", \"stroke\", \"color\"]\n            var that = this\n\n            $.each(obj, function(key, val){\n                if (validKeys.indexOf(key) !== -1) {\n                    that.options[key] = val\n                }\n            })\n\n            this._draw();\n            this.val(this.value);\n\n            return this;\n        },\n\n        changeValue: function(){\n            this.val(this.element.attr(\"data-value\"));\n        },\n\n        changeAttribute: function(attr, val){\n            switch (attr) {\n                case \"data-value\": this.changeValue(); break;\n                case \"data-background\": this.setColor({\"background\": val}); break;\n                case \"data-fill\": this.setColor({\"fill\": val}); break;\n                case \"data-stroke\": this.setColor({\"stroke\": val}); break;\n                case \"data-color\": this.setColor({\"color\": val}); break;\n            }\n        },\n\n        destroy: function(){\n            return this.element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n/* eslint-disable */\n(function(Metro, $) {\n    'use strict';\n\n    var DoubleSelectBoxDefaultConfig = {\n        height: \"auto\",\n        multiSelect: false,\n\n        moveRightIcon: \"<span>&rsaquo;</span>\",\n        moveRightAllIcon: \"<span>&raquo;</span>\",\n        moveLeftIcon: \"<span>&lsaquo;</span>\",\n        moveLeftAllIcon: \"<span>&laquo;</span>\",\n\n        clsBox: \"\",\n        clsMoveButton: \"\",\n        clsMoveRightButton: \"\",\n        clsMoveRightAllButton: \"\",\n        clsMoveLeftButton: \"\",\n        clsMoveLeftAllButton: \"\",\n        clsListLeft: \"\",\n        clsListRight: \"\",\n\n        onDoubleSelectBoxCreate: Metro.noop\n    };\n\n    Metro.doubleSelectBoxSetup = function (options) {\n        DoubleSelectBoxDefaultConfig = $.extend({}, DoubleSelectBoxDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroDoubleSelectBoxSetup\"] !== undefined) {\n        Metro.doubleSelectBoxSetup(window[\"metroDoubleSelectBoxSetup\"]);\n    }\n\n    Metro.Component('double-select-box', {\n        init: function( options, elem ) {\n            this._super(elem, options, DoubleSelectBoxDefaultConfig, {\n                // define instance vars here\n                select1: null,\n                select2: null,\n                list1: null,\n                list2: null\n            });\n            return this;\n        },\n\n        _create: function(){\n            var that = this, element = this.element, o = this.options;\n\n            if (element.children(\"select\").length !== 2) {\n                throw new Error(\"Component DoubleSelectBox required two select elements!\")\n            }\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent('double-select-box-create');\n        },\n\n        _drawList: function(){\n            var that = this;\n\n            this.list1.clear();\n            this.select1.find(\"option\").each(function(i, option){\n                var $op = $(option);\n                var html = $op.attr(\"data-template\") ? $op.attr(\"data-template\").replace(/\\$1/g, $op.text()) : $op.text();\n\n                that.list1.append(\n                    $(\"<li>\").html(html).attr(\"data-value\", option.value).data(\"option\", option)\n                )\n            });\n\n            this.list2.clear();\n            this.select2.find(\"option\").each(function(i, option){\n                var $op = $(option);\n                var html = $op.attr(\"data-template\") ? $op.attr(\"data-template\").replace(/\\$1/g, $op.text()) : $op.text();\n\n                that.list2.append(\n                    $(\"<li>\").html(html).attr(\"data-value\", option.value).data(\"option\", option)\n                )\n            });\n        },\n\n        _createStructure: function(){\n            var that = this, element = this.element, o = this.options;\n            var selects = element.children(\"select\");\n            var select1 = selects.eq(0);\n            var select2 = selects.eq(1);\n            var controls = $(\"<div>\").addClass(\"controls\").insertBefore(select2);\n            var list1, list2;\n\n            element.addClass(\"double-select-box\").addClass(o.clsBox).css({\n                height: o.height\n            });\n\n            selects.prop(\"multiple\", true);\n\n            controls.append(\n                $([\n                    $(\"<button>\").attr(\"type\", \"button\").addClass(\"button --move-right\").addClass(o.clsMoveButton).addClass(o.clsMoveRightButton).html(o.moveRightIcon),\n                    $(\"<button>\").attr(\"type\", \"button\").addClass(\"button --move-right-all\").addClass(o.clsMoveButton).addClass(o.clsMoveRightAllButton).html(o.moveRightAllIcon),\n                    $(\"<button>\").attr(\"type\", \"button\").addClass(\"button --move-left-all\").addClass(o.clsMoveButton).addClass(o.clsMoveLeftAllButton).html(o.moveLeftAllIcon),\n                    $(\"<button>\").attr(\"type\", \"button\").addClass(\"button --move-left\").addClass(o.clsMoveButton).addClass(o.clsMoveLeftButton).html(o.moveLeftIcon),\n                ])\n            )\n\n            list1 = $(\"<ul>\").addClass(\"--list1\").addClass(o.clsListLeft).insertBefore(select1);\n            list2 = $(\"<ul>\").addClass(\"--list2\").addClass(o.clsListRight).insertBefore(select2);\n\n\n            this.select1 = select1;\n            this.select2 = select2;\n            this.list1 = list1;\n            this.list2 = list2;\n\n            this._drawList();\n        },\n\n        _moveItems: function(items, targets){\n            $.each(items, function(){\n                var $item = $(this);\n                var option = $item.data('option');\n\n                $(option).appendTo(targets[0]);\n                $item.removeClass(\"active\").appendTo(targets[1]);\n            })\n        },\n\n        _move: function(dir, scope){\n            var that = this;\n\n            if (scope === 'selected') {\n                if (dir === 'ltr') { // left to right\n                    that._moveItems(this.list1.find(\"li.active\"), [that.select2, that.list2]);\n                } else {\n                    that._moveItems(this.list2.find(\"li.active\"), [that.select1, that.list1]);\n                }\n            } else {\n                if (dir === 'ltr') { // left to right\n                    that._moveItems(this.list1.find(\"li\"), [that.select2, that.list2]);\n                } else {\n                    that._moveItems(this.list2.find(\"li\"), [that.select1, that.list1]);\n                }\n            }\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var items = element.find(\"li\");\n\n            items.on(\"click\", function(){\n                var $el = $(this);\n\n                if (o.multiSelect === false) {\n                    that.list1.find(\"li\").removeClass(\"active\");\n                    that.list2.find(\"li\").removeClass(\"active\");\n                }\n\n                $el.addClass(\"active\");\n            });\n\n            items.on(\"dblclick\", function(){\n                var $el = $(this);\n                var dir = $el.parent().hasClass(\"--list1\") ? 'ltr' : 'rtl';\n                var scope = 'selected';\n\n                that.list1.find(\"li\").removeClass(\"active\");\n                that.list2.find(\"li\").removeClass(\"active\");\n\n                $el.addClass(\"active\");\n\n                that._move(dir, scope);\n            });\n\n            element.on(\"click\", \"button\", function(){\n                var btn = $(this)\n                if (btn.hasClass(\"--move-right\")) {\n                    that._move('ltr', 'selected');\n                } else if (btn.hasClass(\"--move-right-all\")) {\n                    that._move('ltr', 'all');\n                } else if (btn.hasClass(\"--move-left\")) {\n                    that._move('rtl', 'selected');\n                } else if (btn.hasClass(\"--move-left-all\")) {\n                    that._move('rtl', 'all');\n                } else {\n                    throw new Error(\"Pressed unregistered button!\")\n                }\n            });\n        },\n\n        changeAttribute: function(attr, newValue){\n        },\n\n        destroy: function(){\n            this.element.remove();\n        }\n    });\n}(Metro, m4q));\n/* eslint-enable */\n\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var DoubleSliderDefaultConfig = {\n        doublesliderDeferred: 0,\n        roundValue: true,\n        min: 0,\n        max: 100,\n        accuracy: 0,\n        showMinMax: false,\n        minMaxPosition: Metro.position.TOP,\n        valueMin: null,\n        valueMax: null,\n        hint: false,\n        hintAlways: false,\n        hintPositionMin: Metro.position.TOP,\n        hintPositionMax: Metro.position.TOP,\n        hintMaskMin: \"$1\",\n        hintMaskMax: \"$1\",\n        target: null,\n        size: 0,\n\n        clsSlider: \"\",\n        clsBackside: \"\",\n        clsComplete: \"\",\n        clsMarker: \"\",\n        clsMarkerMin: \"\",\n        clsMarkerMax: \"\",\n        clsHint: \"\",\n        clsHintMin: \"\",\n        clsHintMax: \"\",\n        clsMinMax: \"\",\n        clsMin: \"\",\n        clsMax: \"\",\n\n        onStart: Metro.noop,\n        onStop: Metro.noop,\n        onMove: Metro.noop,\n        onChange: Metro.noop,\n        onChangeValue: Metro.noop,\n        onFocus: Metro.noop,\n        onBlur: Metro.noop,\n        onDoubleSliderCreate: Metro.noop\n    };\n\n    Metro.doubleSliderSetup = function (options) {\n        DoubleSliderDefaultConfig = $.extend({}, DoubleSliderDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroDoubleSliderSetup\"] !== undefined) {\n        Metro.doubleSliderSetup(window[\"metroDoubleSliderSetup\"]);\n    }\n\n    Metro.Component('double-slider', {\n        init: function( options, elem ) {\n            this._super(elem, options, DoubleSliderDefaultConfig, {\n                slider: null,\n                valueMin: null,\n                valueMax: null,\n                keyInterval: false,\n                id: Utils.elementId(\"slider\")\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n\n            this.valueMin = Utils.isValue(o.valueMin) ? +o.valueMin : +o.min;\n            this.valueMax = Utils.isValue(o.valueMax) ? +o.valueMax : +o.max;\n\n            this._createSlider();\n            this._createEvents();\n\n            this.val(this.valueMin, this.valueMax);\n\n            this._fireEvent(\"double-slider-create\", {\n                element: element\n            })\n        },\n\n        _createSlider: function(){\n            var element = this.element, o = this.options;\n            var slider_wrapper = $(\"<div>\").addClass(\"slider-wrapper\");\n            var slider = $(\"<div>\").addClass(\"slider\").addClass(o.clsSlider).addClass(this.elem.className);\n            var backside = $(\"<div>\").addClass(\"backside\").addClass(o.clsBackside);\n            var complete = $(\"<div>\").addClass(\"complete\").addClass(o.clsComplete);\n            var markerMin = $(\"<button>\").attr(\"type\", \"button\").addClass(\"marker marker-min\").addClass(o.clsMarker).addClass(o.clsMarkerMin);\n            var markerMax = $(\"<button>\").attr(\"type\", \"button\").addClass(\"marker marker-max\").addClass(o.clsMarker).addClass(o.clsMarkerMax);\n            var hintMin = $(\"<div>\").addClass(\"hint hint-min\").addClass(o.hintPositionMin + \"-side\").addClass(o.clsHint).addClass(o.clsHintMin);\n            var hintMax = $(\"<div>\").addClass(\"hint hint-max\").addClass(o.hintPositionMax + \"-side\").addClass(o.clsHint).addClass(o.clsHintMax);\n            var i;\n\n            if (o.size > 0) {\n                slider.outerWidth(o.size);\n            }\n\n            slider.insertBefore(element);\n            element.appendTo(slider);\n            slider_wrapper.insertBefore(slider);\n            slider.appendTo(slider_wrapper);\n\n            backside.appendTo(slider);\n            complete.appendTo(slider);\n            markerMin.appendTo(slider);\n            markerMax.appendTo(slider);\n            hintMin.appendTo(markerMin);\n            hintMax.appendTo(markerMax);\n\n            if (o.hintAlways === true) {\n                $([hintMin, hintMax]).css({\n                    display: \"block\"\n                }).addClass(\"permanent-hint\");\n            }\n\n            if (o.showMinMax === true) {\n                var min_max_wrapper = $(\"<div>\").addClass(\"slider-min-max\").addClass(o.clsMinMax);\n                $(\"<span>\").addClass(\"slider-text-min\").addClass(o.clsMin).html(o.min).appendTo(min_max_wrapper);\n                $(\"<span>\").addClass(\"slider-text-max\").addClass(o.clsMax).html(o.max).appendTo(min_max_wrapper);\n                if (o.minMaxPosition === Metro.position.TOP) {\n                    min_max_wrapper.insertBefore(slider);\n                } else {\n                    min_max_wrapper.insertAfter(slider);\n                }\n            }\n\n            element[0].className = '';\n            if (o.copyInlineStyles === true) {\n                for (i = 0; i < element[0].style.length; i++) {\n                    slider.css(element[0].style[i], element.css(element[0].style[i]));\n                }\n            }\n\n            if (element.is(\":disabled\")) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n\n            this.slider = slider;\n        },\n\n        _createEvents: function(){\n            var that = this, slider = this.slider, o = this.options;\n            var marker = slider.find(\".marker\");\n\n            marker.on(Metro.events.startAll, function(){\n                var _marker = $(this);\n                var hint = _marker.find(\".hint\");\n                if (o.hint === true && o.hintAlways !== true) {\n                    hint.fadeIn(300);\n                }\n\n                $(document).on(Metro.events.moveAll, function(e){\n                    that._move(e);\n                    that._fireEvent(\"move\", {\n                        min: that.valueMin,\n                        max: that.valueMax\n                    });\n\n                }, {ns: that.id});\n\n                $(document).on(Metro.events.stopAll, function(){\n                    $(document).off(Metro.events.moveAll, {ns: that.id});\n                    $(document).off(Metro.events.stopAll, {ns: that.id});\n\n                    if (o.hintAlways !== true) {\n                        hint.fadeOut(300);\n                    }\n\n                    that._fireEvent(\"stop\", {\n                        min: that.valueMin,\n                        max: that.valueMax\n                    });\n                }, {ns: that.id});\n\n                that._fireEvent(\"start\", {\n                    min: that.valueMin,\n                    max: that.valueMax\n                });\n            });\n\n            marker.on(Metro.events.focus, function(){\n                that._fireEvent(\"focus\", {\n                    min: that.valueMin,\n                    max: that.valueMax\n                });\n            });\n\n            marker.on(Metro.events.blur, function(){\n                that._fireEvent(\"blur\", {\n                    min: that.valueMin,\n                    max: that.valueMax\n                });\n            });\n\n            $(window).on(Metro.events.resize,function(){\n                that.val(that.valueMin, that.valueMax);\n            }, {ns: that.id});\n        },\n\n        _convert: function(v, how){\n            var slider = this.slider, o = this.options;\n            var length = slider.outerWidth() - slider.find(\".marker\").outerWidth();\n            switch (how) {\n                case \"pix2prc\": return ( v * 100 / length );\n                case \"pix2val\": return ( this._convert(v, 'pix2prc') * ((o.max - o.min) / 100) + o.min );\n                case \"val2prc\": return ( (v - o.min)/( (o.max - o.min) / 100 )  );\n                case \"prc2pix\": return ( v / ( 100 / length ));\n                case \"val2pix\": return ( this._convert(this._convert(v, 'val2prc'), 'prc2pix') );\n            }\n\n            return 0;\n        },\n\n        _correct: function(value){\n            var res = value;\n            var accuracy  = this.options.accuracy;\n            var min = this.options.min, max = this.options.max;\n            var _dec = function(v){\n                return v % 1 === 0 ? 0 : v.toString().split(\".\")[1].length;\n            };\n\n            if (accuracy === 0 || isNaN(accuracy)) {\n                return res;\n            }\n\n            res = Math.round(value/accuracy)*accuracy;\n\n            if (res < min) {\n                res = min;\n            }\n\n            if (res > max) {\n                res = max;\n            }\n\n            return res.toFixed(_dec(accuracy));\n        },\n\n        _move: function(e){\n            var target = $(e.target).closest(\".marker\");\n            var isMin = target.hasClass(\"marker-min\");\n            var slider = this.slider;\n            var offset = slider.offset(),\n                marker_size = slider.find(\".marker\").outerWidth(),\n                markerMin = slider.find(\".marker-min\"),\n                markerMax = slider.find(\".marker-max\"),\n                length = slider.outerWidth(),\n                cPix, cStart, cStop;\n\n            cPix = Utils.pageXY(e).x - offset.left - marker_size / 2;\n\n            if (isMin) {\n                cStart = 0;\n                cStop = parseInt(markerMax.css(\"left\")) - marker_size;\n            } else {\n                cStart = parseInt(markerMin.css(\"left\")) + marker_size;\n                cStop = length - marker_size;\n            }\n\n            if (cPix < cStart || cPix > cStop) {\n                return ;\n            }\n\n            this[isMin ? \"valueMin\" : \"valueMax\"] = this._correct(this._convert(cPix, 'pix2val'));\n\n            this._redraw();\n        },\n\n        _hint: function(){\n            var that = this, o = this.options, slider = this.slider, hint = slider.find(\".hint\");\n\n            hint.each(function(){\n                var _hint = $(this);\n                var isMin = _hint.hasClass(\"hint-min\");\n                var _mask = isMin ? o.hintMaskMin : o.hintMaskMax;\n                var value = +(isMin ? that.valueMin : that.valueMax) || 0;\n                _hint.text(_mask.replace(\"$1\", value.toFixed(Utils.decCount(o.accuracy))))\n            });\n        },\n\n        _value: function(){\n            var element = this.element, o = this.options;\n            var v1 = +this.valueMin || 0, v2 = +this.valueMax || 0;\n            var value;\n\n            if (o.roundValue) {\n                v1 = v1.toFixed(Utils.decCount(o.accuracy));\n                v2 = v2.toFixed(Utils.decCount(o.accuracy));\n            }\n\n            value = [v1, v2].join(\", \");\n\n            if (element[0].tagName === \"INPUT\") {\n                element.val(value);\n            }\n\n            if (o.target !== null) {\n                var target = $(o.target);\n                if (target.length !== 0) {\n\n                    $.each(target, function(){\n                        var t = $(this);\n                        if (this.tagName === \"INPUT\") {\n                            t.val(value);\n                        } else {\n                            t.text(value);\n                        }\n                        t.trigger(\"change\");\n                    });\n                }\n            }\n\n            this._fireEvent(\"change-value\", {\n                val: value\n            });\n\n            this._fireEvent(\"change\", {\n                val: value\n            });\n        },\n\n        _marker: function(){\n            var slider = this.slider;\n            var markerMin = slider.find(\".marker-min\");\n            var markerMax = slider.find(\".marker-max\");\n            var complete = slider.find(\".complete\");\n            var marker_size = parseInt(Utils.getStyleOne(markerMin, \"width\"));\n            var slider_visible = Utils.isVisible(slider);\n\n            if (slider_visible) {\n                $([markerMin, markerMax]).css({\n                    'margin-top': 0,\n                    'margin-left': 0\n                });\n            }\n\n            if (slider_visible) {\n                markerMin.css('left', this._convert(this.valueMin, 'val2pix'));\n                markerMax.css('left', this._convert(this.valueMax, 'val2pix'));\n            } else {\n                markerMin.css({\n                    'left': (this._convert(this.valueMin, 'val2prc')) + \"%\",\n                    'margin-top': this._convert(this.valueMin, 'val2prc') === 0 ? 0 : -1 * marker_size / 2\n                });\n                markerMax.css({\n                    'left': (this._convert(this.valueMax, 'val2prc')) + \"%\",\n                    'margin-top': this._convert(this.valueMax, 'val2prc') === 0 ? 0 : -1 * marker_size / 2\n                });\n            }\n\n            complete.css({\n                \"left\": this._convert(this.valueMin, 'val2pix'),\n                \"width\": this._convert(this.valueMax, 'val2pix') - this._convert(this.valueMin, 'val2pix')\n            });\n        },\n\n        _redraw: function(){\n            this._marker();\n            this._value();\n            this._hint();\n        },\n\n        val: function(vMin, vMax){\n            var o = this.options;\n\n            if (!Utils.isValue(vMin) && !Utils.isValue(vMax)) {\n                return [this.valueMin, this.valueMax];\n            }\n\n            if (vMin < o.min) vMin = o.min;\n            if (vMax < o.min) vMax = o.min;\n\n            if (vMin > o.max) vMin = o.max;\n            if (vMax > o.max) vMax = o.max;\n\n            this.valueMin = this._correct(vMin);\n            this.valueMax = this._correct(vMax);\n\n            this._redraw();\n        },\n\n        changeValue: function(){\n            var element = this.element;\n            var valMin = +element.attr(\"data-value-min\");\n            var valMax = +element.attr(\"data-value-max\");\n            this.val(valMin, valMax);\n        },\n\n        disable: function(){\n            var element = this.element;\n            element.data(\"disabled\", true);\n            element.parent().addClass(\"disabled\");\n        },\n\n        enable: function(){\n            var element = this.element;\n            element.data(\"disabled\", false);\n            element.parent().removeClass(\"disabled\");\n        },\n\n        toggleState: function(){\n            if (this.elem.disabled) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        },\n\n        changeAttribute: function(attributeName){\n            switch (attributeName) {\n                case \"data-value-min\": this.changeValue(); break;\n                case \"data-value-max\": this.changeValue(); break;\n                case 'disabled': this.toggleState(); break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element, slider = this.slider;\n            var marker = slider.find(\".marker\");\n\n            marker.off(Metro.events.startAll);\n            marker.off(Metro.events.focus);\n            marker.off(Metro.events.blur);\n            marker.off(Metro.events.keydown);\n            marker.off(Metro.events.keyup);\n            slider.off(Metro.events.click);\n            $(window).off(Metro.events.resize, {ns: this.id});\n\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var DragItemsDefaultConfig = {\n        dragitemsDeferred: 0,\n        target: null,\n        dragItem: \"li\",\n        dragMarker: \".drag-item-marker\",\n        drawDragMarker: false,\n        clsDragItemAvatar: \"\",\n        clsDragItem: \"\",\n        canDrag: true,\n        onDragStartItem: Metro.noop,\n        onDragMoveItem: Metro.noop,\n        onDragDropItem: Metro.noop,\n        onTarget: Metro.noop,\n        onTargetIn: Metro.noop, //TODO\n        onTargetOut: Metro.noop, //TODO\n        onDragItemsCreate: Metro.noop\n    };\n\n    Metro.dragItemsSetup = function (options) {\n        DragItemsDefaultConfig = $.extend({}, DragItemsDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroDragItemsSetup\"] !== undefined) {\n        Metro.dragItemsSetup(window[\"metroDragItemsSetup\"]);\n    }\n\n    Metro.Component('drag-items', {\n        init: function( options, elem ) {\n            this._super(elem, options, DragItemsDefaultConfig, {\n                id: Utils.elementId(\"dragItems\"),\n                canDrag: false\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"drag-items-create\", {\n                element: element\n            });\n        },\n\n        _createStructure: function(){\n            var element = this.element, o = this.options;\n\n            element.addClass(\"drag-items-target\");\n\n            if (o.drawDragMarker === true) {\n                element.find(o.dragItem).each(function(){\n                    $(\"<span>\").addClass(\"drag-item-marker\").appendTo(this);\n                })\n            }\n\n            o.canDrag ? this.on() : this.off();\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var doc = $.document(), body = $.body();\n            var offset, shift = {top: 0, left: 0}, width, height;\n\n            var move = function(e, avatar, dragItem){\n                var x = Utils.pageXY(e).x, y = Utils.pageXY(e).y;\n                var _top = y - shift.top;\n                var _left = x - shift.left;\n\n                avatar.css({\n                    top: _top,\n                    left: _left\n                });\n\n                var target = document.elementsFromPoint(x, y).filter(function(el){\n                    return $(el).hasClass('drag-items-target');\n                });\n\n                if (target.length === 0) {\n                    return;\n                }\n\n                that._fireEvent(\"target\", {\n                    target: target\n                });\n\n                var sibling = document.elementsFromPoint(x, y).filter(function(el){\n                    var $el = $(el);\n                    return $.matches(el, o.dragItem) && !$el.hasClass(\"dragged-item-avatar\");\n                })[0];\n\n                if (!Utils.isValue(sibling)) {\n                    dragItem.appendTo(target);\n                } else {\n                    var $sibling = $(sibling);\n                    var $sibling_offset = $sibling.offset();\n                    var offsetY = y - $sibling_offset.top;\n                    var offsetX = x - $sibling_offset.left;\n                    var side;\n                    var dim = {w: $sibling.width(), h: $sibling.height()};\n\n                    if (offsetX < dim.w / 3 && (offsetY < dim.h / 2 || offsetY > dim.h / 2)) {\n                        side = 'left';\n                    } else if (offsetX > dim.w * 2 / 3 && (offsetY < dim.h / 2 || offsetY > dim.h / 2)) {\n                        side = 'right';\n                    } else if (offsetX > dim.w / 3 && offsetX < dim.w * 2 / 3 && offsetY > dim.h / 2) {\n                        side = 'bottom';\n                    } else {\n                        side = \"top\";\n                    }\n\n                    if (!$sibling.hasClass(\"dragged-item\")) {\n                        if (side === \"top\" || side === \"left\") {\n                            dragItem.insertBefore($sibling);\n                        } else {\n                            dragItem.insertAfter($sibling);\n                        }\n                    }\n                }\n            };\n\n            element.on(Metro.events.startAll, (o.drawDragMarker ? o.dragMarker : o.dragItem), function(e_start){\n                var dragItem = $(e_start.target).closest(o.dragItem);\n                var avatar;\n\n                if (Utils.isRightMouse(e_start)) {\n                    return ;\n                }\n\n                if (that.canDrag !== true) {\n                    return ;\n                }\n\n                dragItem.addClass(\"dragged-item\").addClass(o.clsDragItem);\n                avatar = $(\"<div>\").addClass(\"dragged-item-avatar\").addClass(o.clsDragItemAvatar);\n                offset = dragItem.offset();\n                width = dragItem.width();\n                height = dragItem.height();\n                shift.top = Utils.pageXY(e_start).y - offset.top;\n                shift.left = Utils.pageXY(e_start).x - offset.left;\n\n                avatar.css({\n                    top: offset.top,\n                    left: offset.left,\n                    width: width,\n                    height: height\n                }).appendTo(body);\n\n                that._fireEvent(\"drag-start-item\", {\n                    dragItem: dragItem[0],\n                    avatar: avatar[0]\n                });\n\n                doc.on(Metro.events.moveAll, function(e_move){\n\n                    move(e_move, avatar, dragItem);\n\n                    that._fireEvent(\"drag-move-item\", {\n                        dragItem: dragItem[0],\n                        avatar: avatar[0]\n                    });\n\n                    e_move.preventDefault();\n\n                }, {ns: that.id, passive: false});\n\n                doc.on(Metro.events.stopAll, function(){\n\n                    that._fireEvent(\"drag-drop-item\", {\n                        dragItem: dragItem[0],\n                        avatar: avatar[0]\n                    });\n\n                    dragItem.removeClass(\"dragged-item\").removeClass(o.clsDragItem);\n                    avatar.remove();\n\n                    doc.off(Metro.events.moveAll, {ns: that.id});\n                    doc.off(Metro.events.stopAll, {ns: that.id});\n\n                }, {ns: that.id});\n\n                if (o.drawDragMarker) {\n                    e_start.preventDefault();\n                    e_start.stopPropagation();\n                }\n            });\n        },\n\n        on: function(){\n            this.canDrag = true;\n            this.element.find(\".drag-item-marker\").show();\n        },\n\n        off: function(){\n            this.canDrag = false;\n            this.element.find(\".drag-item-marker\").hide();\n        },\n\n        toggle: function(){\n            this.canDrag = this.canDrag ? this.off() : this.on();\n        },\n\n        changeAttribute: function(attributeName){\n            var that = this, element = this.element, o = this.options;\n            var changeCanDrag = function(){\n                o.canDtag = JSON.parse(element.attr(\"data-can-drag\"));\n                o.canDtag ? that.on() : that.off();\n            };\n\n            if (attributeName === \"data-can-drag\") {\n                changeCanDrag();\n            }\n        },\n\n        destroy: function(){\n            var element = this.element, o = this.options;\n            element.off(Metro.events.startAll, (o.drawDragMarker ? o.dragMarker : o.dragItem));\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var DraggableDefaultConfig = {\n        dragContext: null,\n        draggableDeferred: 0,\n        dragElement: 'self',\n        dragArea: \"parent\",\n        timeout: 0,\n        boundaryRestriction: true,\n        onCanDrag: Metro.noop_true,\n        onDragStart: Metro.noop,\n        onDragStop: Metro.noop,\n        onDragMove: Metro.noop,\n        onDraggableCreate: Metro.noop\n    };\n\n    Metro.draggableSetup = function (options) {\n        DraggableDefaultConfig = $.extend({}, DraggableDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroDraggableSetup\"] !== undefined) {\n        Metro.draggableSetup(window[\"metroDraggableSetup\"]);\n    }\n\n    Metro.Component('draggable', {\n        init: function( options, elem ) {\n            this._super(elem, options, DraggableDefaultConfig, {\n                drag: false,\n                move: false,\n                backup: {\n                    cursor: 'default',\n                    zIndex: '0'\n                },\n                dragArea: null,\n                dragElement: null,\n                id: Utils.elementId(\"draggable\")\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"draggable-create\", {\n                element: this.element\n            });\n        },\n\n        _createStructure: function(){\n            var that = this, element = this.element, o = this.options;\n            var offset = element.offset();\n            var dragElement  = o.dragElement !== 'self' ? element.find(o.dragElement) : element;\n\n            element.data(\"canDrag\", true);\n\n            this.dragElement = dragElement;\n\n            dragElement[0].ondragstart = function(){return false;};\n\n            element.css(\"position\", \"absolute\");\n\n            if (o.dragArea === 'document' || o.dragArea === 'window') {\n                o.dragArea = \"body\";\n            }\n\n            setImmediate(function(){\n                that.dragArea = o.dragArea === 'parent' ? element.parent() : $(o.dragArea);\n                if (o.dragArea !== 'parent') {\n                    element.appendTo(that.dragArea);\n                    element.css({\n                        top: offset.top,\n                        left: offset.left\n                    });\n                }\n            });\n\n            if (!element.attr(\"id\")) {\n                element.attr(\"id\", Utils.elementId(\"draggable\"));\n            }\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var position = {\n                x: 0,\n                y: 0\n            };\n\n            this.dragElement.on(Metro.events.startAll, function(e){\n\n                var coord = o.dragArea !== \"parent\" ? element.offset() : element.position(),\n                    shiftX = Utils.pageXY(e).x - coord.left,\n                    shiftY = Utils.pageXY(e).y - coord.top;\n\n                var moveElement = function(e){\n                    var top = Utils.pageXY(e).y - shiftY;\n                    var left = Utils.pageXY(e).x - shiftX;\n\n                    if (o.boundaryRestriction) {\n                        if (top < 0) top = 0;\n                        if (left < 0) left = 0;\n\n                        if (top > that.dragArea.outerHeight() - element.outerHeight()) top = that.dragArea.outerHeight() - element.outerHeight();\n                        if (left > that.dragArea.outerWidth() - element.outerWidth()) left = that.dragArea.outerWidth() - element.outerWidth();\n                    }\n\n                    position.y = top;\n                    position.x = left;\n\n                    element.css({\n                        left: left,\n                        top: top\n                    });\n                };\n\n\n                if (element.data(\"canDrag\") === false || Utils.exec(o.onCanDrag, [element]) !== true) {\n                    return ;\n                }\n\n                if (Metro.isTouchable === false && e.which !== 1) {\n                    return ;\n                }\n\n                that.drag = true;\n\n                that.backup.cursor = element.css(\"cursor\");\n                that.backup.zIndex = element.css(\"z-index\");\n\n                element.addClass(\"draggable\");\n\n                moveElement(e);\n\n                that._fireEvent(\"drag-start\", {\n                    position: position,\n                    context: o.dragContext\n                });\n\n                $(document).on(Metro.events.moveAll, function(e){\n                    e.preventDefault();\n                    moveElement(e);\n\n                    that._fireEvent(\"drag-move\", {\n                        position: position,\n                        context: o.dragContext\n                    });\n\n                }, {ns: that.id, passive: false});\n\n                $(document).on(Metro.events.stopAll, function(){\n                    // element.css({\n                    //     cursor: that.backup.cursor,\n                    //     zIndex: that.backup.zIndex\n                    // });\n                    element.removeClass(\"draggable\");\n\n                    if (that.drag) {\n                        $(document).off(Metro.events.moveAll, {ns: that.id});\n                        $(document).off(Metro.events.stopAll, {ns: that.id});\n                    }\n\n                    that.drag = false;\n                    that.move = false;\n\n                    that._fireEvent(\"drag-stop\", {\n                        position: position,\n                        context: o.dragContext\n                    });\n\n                }, {ns: that.id});\n            });\n        },\n\n        off: function(){\n            this.element.data(\"canDrag\", false);\n        },\n\n        on: function(){\n            this.element.data(\"canDrag\", true);\n        },\n\n        /* eslint-disable-next-line */\n        changeAttribute: function(attributeName, newValue){\n        },\n\n        destroy: function(){\n            var element = this.element;\n            this.dragElement.off(Metro.events.startAll);\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var DropdownDefaultConfig = {\n        dropdownDeferred: 0,\n        dropFilter: null,\n        toggleElement: null,\n        noClose: false,\n        duration: 50,\n        checkDropUp: false,\n        dropUp: false,\n        onDrop: Metro.noop,\n        onUp: Metro.noop,\n        onDropdownCreate: Metro.noop\n    };\n\n    Metro.dropdownSetup = function (options) {\n        DropdownDefaultConfig = $.extend({}, DropdownDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroDropdownSetup\"] !== undefined) {\n        Metro.dropdownSetup(window[\"metroDropdownSetup\"]);\n    }\n\n    Metro.Component('dropdown', {\n        init: function( options, elem ) {\n            this._super(elem, options, DropdownDefaultConfig, {\n                _toggle: null,\n                displayOrigin: null,\n                isOpen: false\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var that = this, element = this.element;\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"dropdown-create\", {\n                element: element\n            });\n\n            if (element.hasClass(\"open\")) {\n                element.removeClass(\"open\");\n                setTimeout(function(){\n                    that.open(true);\n                },0);\n            }\n        },\n\n        _createStructure: function(){\n            var element = this.element, o = this.options;\n            var toggle;\n\n            if (o.dropUp) {\n                element.addClass(\"drop-up\");\n            }\n\n            toggle = o.toggleElement !== null ? $(o.toggleElement) : element.siblings('.dropdown-toggle').length > 0 ? element.siblings('.dropdown-toggle') : element.prev();\n\n            this.displayOrigin = Utils.getStyleOne(element, \"display\");\n\n            if (element.hasClass(\"v-menu\")) {\n                element.addClass(\"for-dropdown\");\n            }\n\n            element.css(\"display\", \"none\");\n\n            this._toggle = toggle;\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var toggle = this._toggle, parent = element.parent();\n\n            toggle.on(Metro.events.click, function(e){\n                parent.siblings(parent[0].tagName).removeClass(\"active-container\");\n                $(\".active-container\").removeClass(\"active-container\");\n\n                if (element.css('display') !== 'none' && !element.hasClass('keep-open')) {\n                    that._close(element);\n                } else {\n                    $('[data-role*=dropdown]').each(function(i, el){\n                        if (!element.parents('[data-role*=dropdown]').is(el) && !$(el).hasClass('keep-open') && $(el).css('display') !== 'none') {\n                            if (!Utils.isValue(o.dropFilter)) {\n                                that._close(el);\n                            } else {\n                                if ($(el).closest(o.dropFilter).length > 0) {\n                                    that._close(el);\n                                }\n                            }\n                        }\n                    });\n                    if (element.hasClass('horizontal')) {\n                        element.css({\n                            'visibility': 'hidden',\n                            'display': 'block'\n                        });\n                        var children_width = 0;\n                        $.each(element.children('li'), function(){\n                            children_width += $(this).outerWidth(true);\n                        });\n\n                        element.css({\n                            'visibility': 'visible',\n                            'display': 'none'\n                        });\n                        element.css('width', children_width);\n                    }\n                    that._open(element);\n                    parent.addClass(\"active-container\");\n                }\n                e.preventDefault();\n                e.stopPropagation();\n            });\n\n            if (o.noClose === true) {\n                element.addClass(\"keep-open\").on(Metro.events.click, function (e) {\n                    //e.preventDefault();\n                    e.stopPropagation();\n                });\n            }\n\n            $(element).find('li.disabled a').on(Metro.events.click, function(e){\n                e.preventDefault();\n            });\n        },\n\n        _close: function(el, immediate){\n            el = $(el);\n\n            var dropdown  = Metro.getPlugin(el, \"dropdown\");\n            var toggle = dropdown._toggle;\n            var options = dropdown.options;\n            var func = \"slideUp\";\n\n            toggle.removeClass('active-toggle').removeClass(\"active-control\");\n            dropdown.element.parent().removeClass(\"active-container\");\n\n            if (immediate) {\n                func = 'hide'\n            }\n\n            el[func](immediate ? 0 : options.duration, function(){\n                dropdown._fireEvent(\"close\");\n                dropdown._fireEvent(\"up\");\n\n                if (!options.dropUp && options.checkDropUp) {\n                    dropdown.element.removeClass(\"drop-up\");\n                }\n            });\n\n            this.isOpen = false;\n        },\n\n        // TODO Add control: if no space for drop-down and no space for drop-up, element will must drop-down\n        _open: function(el, immediate){\n            el = $(el);\n\n            var dropdown  = Metro.getPlugin(el, \"dropdown\");\n            var toggle = dropdown._toggle;\n            var options = dropdown.options;\n            var func = \"slideDown\";\n\n            toggle.addClass('active-toggle').addClass(\"active-control\");\n\n            el[func](immediate ? 0 : options.duration, function(){\n\n                if (!options.dropUp && options.checkDropUp) {\n                    // dropdown.element.removeClass(\"drop-up\");\n                    if (!Utils.inViewport(dropdown.element[0])) {\n                        dropdown.element.addClass(\"drop-up\");\n\n                        if (!Utils.inViewport(dropdown.element[0])) {\n                            dropdown.element.removeClass(\"drop-up\");\n                        }\n                    }\n                }\n\n                dropdown._fireEvent(\"open\");\n                dropdown._fireEvent(\"drop\");\n            });\n\n            // this._fireEvent(\"drop\");\n\n            this.isOpen = true;\n        },\n\n        close: function(immediate){\n            this._close(this.element, immediate);\n        },\n\n        open: function(immediate){\n            this._open(this.element, immediate);\n        },\n\n        toggle: function(){\n            if (this.isOpen)\n                this.close();\n            else\n                this.open();\n        },\n\n        /* eslint-disable-next-line */\n        changeAttribute: function(){\n        },\n\n        destroy: function(){\n            this._toggle.off(Metro.events.click);\n        }\n    });\n\n    $(document).on(Metro.events.click, function(){\n        $('[data-role*=dropdown]').each(function(){\n            var el = $(this);\n\n            if (el.css('display')!=='none' && !el.hasClass('keep-open') && !el.hasClass('stay-open') && !el.hasClass('ignore-document-click')) {\n                Metro.getPlugin(el, 'dropdown').close();\n            }\n        });\n    });\n}(Metro, m4q));\r\n\r\n(function (Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var Export = {\n\n        init: function () {\n            return this;\n        },\n\n        options: {\n            csvDelimiter: \"\\t\",\n            csvNewLine: \"\\r\\n\",\n            includeHeader: true\n        },\n\n        setup: function (options) {\n            this.options = $.extend({}, this.options, options);\n            return this;\n        },\n\n        base64: function (data) {\n            return window.btoa(unescape(encodeURIComponent(data)));\n        },\n\n        b64toBlob: function (b64Data, contentType, sliceSize) {\n            contentType = contentType || '';\n            sliceSize = sliceSize || 512;\n\n            var byteCharacters = window.atob(b64Data);\n            var byteArrays = [];\n\n            var offset;\n            for (offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n                var slice = byteCharacters.slice(offset, offset + sliceSize);\n\n                var byteNumbers = new Array(slice.length);\n                var i;\n                for (i = 0; i < slice.length; i = i + 1) {\n                    byteNumbers[i] = slice.charCodeAt(i);\n                }\n\n                var byteArray = new window.Uint8Array(byteNumbers);\n\n                byteArrays.push(byteArray);\n            }\n\n            return new Blob(byteArrays, {\n                type: contentType\n            });\n        },\n\n        tableToCSV: function (table, filename, options) {\n            var o;\n            var body, head, data = \"\";\n            var i, j, row, cell;\n\n            o = $.extend({}, this.options, options);\n\n            table = $(table)[0];\n\n            if (Utils.bool(o.includeHeader)) {\n\n                head = table.querySelectorAll(\"thead\")[0];\n\n                for (i = 0; i < head.rows.length; i++) {\n                    row = head.rows[i];\n                    for (j = 0; j < row.cells.length; j++) {\n                        cell = row.cells[j];\n                        data += (j ? o.csvDelimiter : '') + cell.textContent.trim();\n                    }\n                    data += o.csvNewLine;\n                }\n            }\n\n            body = table.querySelectorAll(\"tbody\")[0];\n\n            for (i = 0; i < body.rows.length; i++) {\n                row = body.rows[i];\n                for (j = 0; j < row.cells.length; j++) {\n                    cell = row.cells[j];\n                    data += (j ? o.csvDelimiter : '') + cell.textContent.trim();\n                }\n                data += o.csvNewLine;\n            }\n\n            if (Utils.isValue(filename)) {\n                return this.createDownload(this.base64(\"\\uFEFF\" + data), 'application/csv', filename);\n            }\n\n            return data;\n        },\n\n        createDownload: function (data, contentType, filename) {\n            var blob, anchor, url;\n\n            anchor = document.createElement('a');\n            anchor.style.display = \"none\";\n            document.body.appendChild(anchor);\n\n            blob = this.b64toBlob(data, contentType);\n\n            url = window.URL.createObjectURL(blob);\n            anchor.href = url;\n            anchor.download = filename || Utils.elementId(\"download\");\n            anchor.click();\n            window.URL.revokeObjectURL(url);\n            document.body.removeChild(anchor);\n            return true;\n        },\n\n        arrayToCsv: function(array, filename, options){\n            var o, data = \"\", i, row;\n\n            o = $.extend({}, this.options, options);\n\n            for (i = 0; i < array.length; i++) {\n                row = array[i];\n\n                if (typeof row !== \"object\") {\n                    data += row + o.csvNewLine;\n                } else {\n                    $.each(row, function(key, val){\n                        data += (key ? o.csvDelimiter : '') + val.toString();\n                    });\n                    data += o.csvNewLine;\n                }\n            }\n\n            if (Utils.isValue(filename)) {\n                return this.createDownload(this.base64(\"\\uFEFF\" + data), 'application/csv', filename);\n            }\n\n            return data;\n        }\n    };\n\n    Metro.export = Export.init();\n\n    if (window.METRO_GLOBAL_COMMON === true) {\n        window.Export = Metro.export;\n    }\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var FileDefaultConfig = {\n        fileDeferred: 0,\n        label: \"\",\n        mode: \"input\",\n        buttonTitle: \"Choose file(s)\",\n        filesTitle: \"file(s) selected\",\n        dropTitle: \"<strong>Choose a file(s)</strong> or drop it here\",\n        dropIcon: \"<span class='default-icon-upload'></span>\",\n        prepend: \"\",\n        clsComponent: \"\",\n        clsPrepend: \"\",\n        clsButton: \"\",\n        clsCaption: \"\",\n        clsLabel: \"\",\n        copyInlineStyles: false,\n        onSelect: Metro.noop,\n        onFileCreate: Metro.noop\n    };\n\n    Metro.fileSetup = function (options) {\n        FileDefaultConfig = $.extend({}, FileDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroFileSetup\"] !== undefined) {\n        Metro.fileSetup(window[\"metroFileSetup\"]);\n    }\n\n    Metro.Component('file', {\n        init: function( options, elem ) {\n            this._super(elem, options, FileDefaultConfig);\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"file-create\", {\n                element: element\n            });\n        },\n\n        _createStructure: function(){\n            var element = this.element, o = this.options;\n            var container = $(\"<label>\").addClass((o.mode === \"input\" ? \" file \" : o.mode === \"button\" ? \" file-button \" : \" drop-zone \") + element[0].className).addClass(o.clsComponent);\n            var caption = $(\"<span>\").addClass(\"caption\").addClass(o.clsCaption);\n            var files = $(\"<span>\").addClass(\"files\").addClass(o.clsCaption);\n            var icon, button;\n\n\n            container.insertBefore(element);\n            element.appendTo(container);\n\n            if (o.mode === 'drop' || o.mode === 'dropzone') {\n                icon = $(o.dropIcon).addClass(\"icon\").appendTo(container);\n                caption.html(o.dropTitle).insertAfter(icon);\n                files.html(\"0\" + \" \" + o.filesTitle).insertAfter(caption);\n            } else if (o.mode === 'button') {\n\n                button = $(\"<span>\").addClass(\"button\").attr(\"tabindex\", -1).html(o.buttonTitle);\n                button.appendTo(container);\n                button.addClass(o.clsButton);\n\n            } else {\n                caption.insertBefore(element);\n\n                button = $(\"<span>\").addClass(\"button\").attr(\"tabindex\", -1).html(o.buttonTitle);\n                button.appendTo(container);\n                button.addClass(o.clsButton);\n\n                if (element.attr('dir') === 'rtl' ) {\n                    container.addClass(\"rtl\");\n                }\n\n                if (o.prepend !== \"\") {\n                    var prepend = $(\"<div>\").html(o.prepend);\n                    prepend.addClass(\"prepend\").addClass(o.clsPrepend).appendTo(container);\n                }\n            }\n\n            element[0].className = '';\n\n            if (o.copyInlineStyles === true) {\n                for (var i = 0, l = element[0].style.length; i < l; i++) {\n                    container.css(element[0].style[i], element.css(element[0].style[i]));\n                }\n            }\n\n            if (o.label) {\n                var label = $(\"<label>\").addClass(\"label-for-input\").addClass(o.clsLabel).html(o.label).insertBefore(container);\n                if (element.attr(\"id\")) {\n                    label.attr(\"for\", element.attr(\"id\"));\n                }\n                if (element.attr(\"dir\") === \"rtl\") {\n                    label.addClass(\"rtl\");\n                }\n            }\n\n            if (element.is(\":disabled\")) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var container = element.closest(\"label\");\n            var caption = container.find(\".caption\");\n            var files = container.find(\".files\");\n            var form = element.closest(\"form\");\n\n            if (form.length) {\n                form.on(\"reset\", function(){\n                    that.clear();\n                })\n            }\n\n            container.on(Metro.events.click, \"button\", function(){\n                element[0].click();\n            });\n\n            element.on(Metro.events.change, function(){\n                var fi = this;\n                var file_names = [];\n                var entry;\n\n                // if (fi.files.length === 0) {\n                //     return ;\n                // }\n\n                Array.from(fi.files).forEach(function(file){\n                    file_names.push(file.name);\n                });\n\n                if (o.mode === \"input\") {\n\n                    entry = file_names.join(\", \");\n\n                    caption.html(entry);\n                    caption.attr('title', entry);\n                } else {\n                    files.html(element[0].files.length + \" \" +o.filesTitle);\n                }\n\n                that._fireEvent(\"select\", {\n                    files: fi.files\n                });\n            });\n\n            element.on(Metro.events.focus, function(){container.addClass(\"focused\");});\n            element.on(Metro.events.blur, function(){container.removeClass(\"focused\");});\n\n            if (o.mode !== \"input\") {\n                container.on('drag dragstart dragend dragover dragenter dragleave drop', function(e){\n                    e.preventDefault();\n                });\n\n                container.on('dragenter dragover', function(){\n                    container.addClass(\"drop-on\");\n                });\n\n                container.on('dragleave', function(){\n                    container.removeClass(\"drop-on\");\n                });\n\n                container.on('drop', function(e){\n                    element[0].files = e.dataTransfer.files;\n                    files.html(element[0].files.length + \" \" +o.filesTitle);\n                    container.removeClass(\"drop-on\");\n                    element.trigger(\"change\");\n                });\n            }\n        },\n\n        clear: function(){\n            var element = this.element, o = this.options;\n            if (o.mode === \"input\") {\n                element.siblings(\".caption\").html(\"\");\n            } else {\n                element.siblings(\".caption\").html(o.dropTitle);\n                element.siblings(\".files\").html(\"0\" + \" \" + o.filesTitle);\n            }\n\n            element.val(\"\");\n        },\n\n        disable: function(){\n            this.element.data(\"disabled\", true);\n            this.element.parent().addClass(\"disabled\");\n        },\n\n        enable: function(){\n            this.element.data(\"disabled\", false);\n            this.element.parent().removeClass(\"disabled\");\n        },\n\n        toggleState: function(){\n            if (this.elem.disabled) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        },\n\n        toggleDir: function(){\n            if (this.element.attr(\"dir\") === 'rtl') {\n                this.element.parent().addClass(\"rtl\");\n            } else {\n                this.element.parent().removeClass(\"rtl\");\n            }\n        },\n\n        changeAttribute: function(attributeName){\n            switch (attributeName) {\n                case 'disabled': this.toggleState(); break;\n                case 'dir': this.toggleDir(); break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element;\n            var parent = element.parent();\n            element.off(Metro.events.change);\n            parent.off(Metro.events.click, \"button\");\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n\n    var Utils = Metro.utils;\n    var GradientBoxDefaultConfig = {\n        gradientType: \"linear\", // linear, radial\n        gradientShape: \"\",\n        gradientPosition: \"\",\n        gradientSize: \"\",\n        gradientColors: \"#000, #fff\",\n        gradientRepeat: false,\n        onGradientBoxCreate: Metro.noop\n    };\n\n    Metro.gradientBoxSetup = function (options) {\n        GradientBoxDefaultConfig = $.extend({}, GradientBoxDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroGradientBoxSetup\"] !== undefined) {\n        Metro.gradientBoxSetup(window[\"metroGradientBoxSetup\"]);\n    }\n\n    Metro.Component('gradient-box', {\n        init: function( options, elem ) {\n            this._super(elem, options, GradientBoxDefaultConfig, {\n                // define instance vars here\n                colors: [],\n                shape: \"\",\n                size: \"\",\n                position: \"\",\n                type: \"linear\",\n                func: \"linear-gradient\",\n                repeat: false\n            });\n            return this;\n        },\n\n        _create: function(){\n            var o = this.options;\n\n            this.colors = o.gradientColors.toArray(\",\");\n            this.type = o.gradientType.toLowerCase();\n            this.shape = o.gradientShape.toLowerCase();\n            this.size = o.gradientSize.toLowerCase();\n            this.repeat = o.gradientRepeat;\n            this.func = (this.repeat ? \"repeating-\" : \"\") + this.type + \"-gradient\";\n\n\n            if (this.type === \"linear\") {\n                if ( !o.gradientPosition ) {\n                    this.position = \"to bottom\";\n                } else {\n                    this.position = isNaN(o.gradientPosition) === false ? o.gradientPosition + \"deg\" : o.gradientPosition;\n\n                    if (this.position.indexOf(\"deg\") === -1 && this.position.indexOf(\"to \") === -1) {\n                        this.position = \"to \" + this.position;\n                    }\n                }\n            } else {\n                this.position = o.gradientPosition.toLowerCase();\n                if (this.position && this.position.indexOf(\"at \") === -1) {\n                    this.position = \"at \" + this.position;\n                }\n            }\n\n            this._createStructure();\n            this._setGradient();\n            this._fireEvent('gradient-box-create');\n        },\n\n        _createStructure: function(){\n            this.element.addClass(\"gradient-box\");\n        },\n\n        _setGradient: function (){\n            var element = this.element;\n            var gradientRule, gradientOptions = [];\n\n            if (this.type === \"radial\" && this.shape) {\n                gradientOptions.push(this.shape);\n            }\n\n            if (this.type === \"radial\" && this.size) {\n                gradientOptions.push(this.size);\n            }\n\n            if (this.position) {\n                gradientOptions.push((this.position.indexOf(\"at\") === -1 ? \"at \" : \"\") + this.position);\n            }\n\n            gradientRule = this.func + \"(\" + (gradientOptions.length ? gradientOptions.join(\" \") + \", \" : \"\") + this.colors.join(\", \") + \")\";\n\n            element.css({\n                background: gradientRule\n            });\n        },\n\n        changeAttribute: function(attr, newValue){\n            if (attr.indexOf(\"data-gradient-\") === -1) {\n                return ;\n            }\n\n            switch (attr) {\n                case \"data-gradient-type\": this.type = newValue; this.func = newValue.toLowerCase() + \"-gradient\"; break;\n                case \"data-gradient-colors\": this.colors = newValue ? newValue.toArray(\",\") : [\"#fff\", \"#000\"]; break;\n                case \"data-gradient-shape\": this.shape = newValue.toLowerCase(); break;\n                case \"data-gradient-size\": this.size = newValue.toLowerCase(); break;\n                case \"data-gradient-position\": this.position = newValue.toLowerCase(); break;\n                case \"data-gradient-repeat\": this.repeat = Utils.bool(newValue); break;\n            }\n\n            this._setGradient();\n        },\n\n        destroy: function(){\n            return this.element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n\n    var GravatarDefaultConfig = {\n        gravatarDeferred: 0,\n        email: \"\",\n        size: 80,\n        default: \"mp\",\n        onGravatarCreate: Metro.noop\n    };\n\n    Metro.gravatarSetup = function (options) {\n        GravatarDefaultConfig = $.extend({}, GravatarDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroGravatarSetup\"] !== undefined) {\n        Metro.gravatarSetup(window[\"metroGravatarSetup\"]);\n    }\n\n    Metro.Component('gravatar', {\n        init: function( options, elem ) {\n            this._super(elem, options, GravatarDefaultConfig);\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this.get();\n\n            this._fireEvent(\"gravatar-create\", {\n                element: element\n            });\n        },\n\n        getImage: function(email, size, def, is_object){\n            var image = $(\"<img>\").attr('alt', email);\n\n            image.attr(\"src\", this.getImageSrc(email, size));\n\n            return is_object === true ? image : image[0];\n        },\n\n        getImageSrc: function(email, size, def){\n            if (email === undefined || email.trim() === '') {\n                return \"\";\n            }\n\n            size = size || 80;\n            def = Metro.utils.encodeURI(def) || '404';\n\n            return \"//www.gravatar.com/avatar/\" + Metro.md5((email.toLowerCase()).trim()) + '?size=' + size + '&d=' + def;\n        },\n\n        get: function(){\n            var element = this.element, o = this.options;\n            var img = element[0].tagName === 'IMG' ? element : element.find(\"img\");\n\n            if (img.length === 0) {\n                return;\n            }\n            img.attr(\"src\", this.getImageSrc(o.email, o.size, o.default));\n\n            return this;\n        },\n\n        resize: function(new_size){\n            this.options.size = new_size !== undefined ? new_size : this.element.attr(\"data-size\");\n            this.get();\n        },\n\n        email: function(new_email){\n            this.options.email = new_email !== undefined ? new_email : this.element.attr(\"data-email\");\n            this.get();\n        },\n\n        changeAttribute: function(attributeName){\n            switch (attributeName) {\n                case 'data-size': this.resize(); break;\n                case 'data-email': this.email(); break;\n            }\n        },\n\n        destroy: function(){\n            return this.element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var HintDefaultConfig = {\n        hintDeferred: 0,\n        hintHide: 5000,\n        clsHint: \"\",\n        hintText: \"\",\n        hintPosition: Metro.position.TOP,\n        hintOffset: 4,\n        onHintShow: Metro.noop,\n        onHintHide: Metro.noop,\n        onHintCreate: Metro.noop\n    };\n\n    Metro.hintSetup = function (options) {\n        HintDefaultConfig = $.extend({}, HintDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroHintSetup\"] !== undefined) {\n        Metro.hintSetup(window[\"metroHintSetup\"]);\n    }\n\n    Metro.Component('hint', {\n        init: function( options, elem ) {\n            this._super(elem, options, HintDefaultConfig, {\n                hint: null,\n                hint_size: {\n                    width: 0,\n                    height: 0\n                },\n                id: Utils.elementId(\"hint\")\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            this._createEvents();\n            this._fireEvent(\"hint-create\", {\n                element: this.element\n            });\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var over = false;\n\n            element.on(Metro.events.enter, function(){\n                over = true;\n                setTimeout(function(){\n                    if (!over) return;\n\n                    that.createHint();\n                    if (+o.hintHide > 0) {\n                        setTimeout(function(){\n                            that.removeHint();\n                        }, o.hintHide);\n                    }\n                }, o.hintDeferred);\n            });\n\n            element.on(Metro.events.leave, function(){\n                over = false;\n                that.removeHint();\n            });\n\n            $(window).on(Metro.events.scroll+\" \"+Metro.events.resize, function(){\n                if (that.hint !== null) that.setPosition();\n            }, {ns: this.id});\n        },\n\n        createHint: function(){\n            var elem = this.elem, element = this.element, o = this.options;\n            var hint = $(\"<div>\").addClass(\"hint\").addClass(o.clsHint).html(o.hintText);\n\n            this.hint = hint;\n            this.hint_size = Utils.hiddenElementSize(hint);\n\n            $(\".hint:not(.permanent-hint)\").remove();\n\n            if (elem.tagName === 'TD' || elem.tagName === 'TH') {\n                var wrp = $(\"<div/>\").css(\"display\", \"inline-block\").html(element.html());\n                element.html(wrp);\n                this.element = wrp;\n            }\n\n            this.setPosition();\n\n            hint.appendTo($('body'));\n\n            this._fireEvent(\"hint-show\", {\n                hint: hint[0]\n            })\n        },\n\n        setPosition: function(){\n            var hint = this.hint, hint_size = this.hint_size, o = this.options, element = this.element;\n\n            if (o.hintPosition === Metro.position.BOTTOM) {\n                hint.addClass('bottom');\n                hint.css({\n                    top: element.offset().top - $(window).scrollTop() + element.outerHeight() + o.hintOffset,\n                    left: element.offset().left + element.outerWidth()/2 - hint_size.width/2  - $(window).scrollLeft()\n                });\n            } else if (o.hintPosition === Metro.position.RIGHT) {\n                hint.addClass('right');\n                hint.css({\n                    top: element.offset().top + element.outerHeight()/2 - hint_size.height/2 - $(window).scrollTop(),\n                    left: element.offset().left + element.outerWidth() - $(window).scrollLeft() + o.hintOffset\n                });\n            } else if (o.hintPosition === Metro.position.LEFT) {\n                hint.addClass('left');\n                hint.css({\n                    top: element.offset().top + element.outerHeight()/2 - hint_size.height/2 - $(window).scrollTop(),\n                    left: element.offset().left - hint_size.width - $(window).scrollLeft() - o.hintOffset\n                });\n            } else {\n                hint.addClass('top');\n                hint.css({\n                    top: element.offset().top - $(window).scrollTop() - hint_size.height - o.hintOffset,\n                    left: element.offset().left - $(window).scrollLeft() + element.outerWidth()/2 - hint_size.width/2\n                });\n            }\n        },\n\n        removeHint: function(){\n            var that = this;\n            var hint = this.hint;\n            var options = this.options;\n            var timeout = options.onHintHide === Metro.noop ? 0 : 300;\n\n            if (hint !== null) {\n\n                this._fireEvent(\"hint-hide\", {\n                    hint: hint[0]\n                });\n\n                setTimeout(function(){\n                    hint.hide(0, function(){\n                        hint.remove();\n                        that.hint = null;\n                    });\n                }, timeout);\n            }\n        },\n\n        changeText: function(){\n            this.options.hintText = this.element.attr(\"data-hint-text\");\n        },\n\n        changeAttribute: function(attributeName){\n            if (attributeName === \"data-hint-text\") {\n                this.changeText();\n            }\n        },\n\n        destroy: function(){\n            var element = this.element;\n            this.removeHint();\n            element.off(Metro.events.enter + \"-hint\");\n            element.off(Metro.events.leave + \"-hint\");\n            $(window).off(Metro.events.scroll + \"-hint\");\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var Hotkey = {\n        specialKeys: {\n            8: \"backspace\", 9: \"tab\", 13: \"return\", 16: \"shift\", 17: \"ctrl\", 18: \"alt\", 19: \"pause\",\n            20: \"capslock\", 27: \"esc\", 32: \"space\", 33: \"pageup\", 34: \"pagedown\", 35: \"end\", 36: \"home\",\n            37: \"left\", 38: \"up\", 39: \"right\", 40: \"down\", 45: \"insert\", 46: \"del\",\n            96: \"0\", 97: \"1\", 98: \"2\", 99: \"3\", 100: \"4\", 101: \"5\", 102: \"6\", 103: \"7\",\n            104: \"8\", 105: \"9\", 106: \"*\", 107: \"+\", 109: \"-\", 110: \".\", 111 : \"/\",\n            112: \"f1\", 113: \"f2\", 114: \"f3\", 115: \"f4\", 116: \"f5\", 117: \"f6\", 118: \"f7\", 119: \"f8\",\n            120: \"f9\", 121: \"f10\", 122: \"f11\", 123: \"f12\", 144: \"numlock\", 145: \"scroll\", 188: \",\", 190: \".\",\n            191: \"/\", 224: \"meta\" },\n\n        shiftNums: {\n            \"~\":\"`\", \"!\":\"1\", \"@\":\"2\", \"#\":\"3\", \"$\":\"4\", \"%\":\"5\", \"^\":\"6\", \"&\":\"7\",\n            \"*\":\"8\", \"(\":\"9\", \")\":\"0\", \"_\":\"-\", \"+\":\"=\", \":\":\";\", \"\\\"\":\"'\", \"<\":\",\",\n            \">\":\".\",  \"?\":\"/\",   \"|\":\"\\\\\"\n        },\n\n        shiftNumsInverse: {\n            \"`\": \"~\", \"1\": \"!\", \"2\": \"@\", \"3\": \"#\", \"4\": \"$\", \"5\": \"%\", \"6\": \"^\", \"7\": \"&\",\n            \"8\": \"*\", \"9\": \"(\", \"0\": \")\", \"-\": \"_\", \"=\": \"+\", \";\": \": \", \"'\": \"\\\"\", \",\": \"<\",\n            \".\": \">\",  \"/\": \"?\",  \"\\\\\": \"|\"\n        },\n\n        textAcceptingInputTypes: [\n            \"text\", \"password\", \"number\", \"email\", \"url\", \"range\", \"date\", \"month\", \"week\", \"time\", \"datetime\",\n            \"datetime-local\", \"search\", \"color\", \"tel\"\n        ],\n\n        getKey: function(e){\n            var key, k = e.keyCode, char = String.fromCharCode( k ).toLowerCase();\n            if( e.shiftKey ){\n                key = Hotkey.shiftNums[ char ] ? Hotkey.shiftNums[ char ] : char;\n            }\n            else {\n                key = Hotkey.specialKeys[ k ] === undefined\n                    ? char\n                    : Hotkey.specialKeys[ k ];\n            }\n\n            return Hotkey.getModifier(e).length ? Hotkey.getModifier(e).join(\"+\") + \"+\" + key : key;\n        },\n\n        getModifier: function(e){\n            var m = [];\n            if (e.altKey) {m.push(\"alt\");}\n            if (e.ctrlKey) {m.push(\"ctrl\");}\n            if (e.shiftKey) {m.push(\"shift\");}\n            return m;\n        }\n    };\n\n    function bindKey(key, fn){\n        return this.each(function(){\n            $(this).on(Metro.events.keyup+\".hotkey-method-\"+key, function(e){\n                var _key = Hotkey.getKey(e);\n                var el = $(this);\n                var href = \"\"+el.attr(\"href\");\n\n                if (key !== _key) {\n                    return;\n                }\n\n                if (el.is(\"a\")) {\n                    if (href && href.trim() !== \"#\") {\n                        window.location.href = href;\n                    }\n                }\n\n                Utils.exec(fn, [e, _key, key], this);\n            })\n        })\n    }\n\n    $.fn.hotkey = bindKey;\n\n    if (window.METRO_JQUERY && window.jquery_present) {\n        jQuery.fn.hotkey = bindKey;\n    }\n\n    // TODO keyup or keydown ?\n    $(document).on(Metro.events.keyup + \".hotkey-data\", function(e){\n        var el, fn, key, href;\n\n        if (\n            (METRO_HOTKEYS_FILTER_INPUT_ACCEPTING_ELEMENTS && /textarea|input|select/i.test(e.target.nodeName)) ||\n            (METRO_HOTKEYS_FILTER_CONTENT_EDITABLE && $(e.target).attr('contenteditable')) ||\n            (METRO_HOTKEYS_FILTER_TEXT_INPUTS && Hotkey.textAcceptingInputTypes.indexOf(e.target.type) > -1)\n        )\n        {\n            return;\n        }\n\n        key = Hotkey.getKey(e);\n\n        if (Utils.keyInObject(Metro.hotkeys, key)) {\n            el = $(Metro.hotkeys[key][0]);\n            fn = Metro.hotkeys[key][1];\n            href = (\"\"+el.attr(\"href\")).trim();\n\n            if (fn) {\n                Utils.exec(fn);\n            } else {\n                if (el.is(\"a\") && href && href.length > 0 && href.trim() !== \"#\") {\n                    window.location.href = href;\n                } else {\n                    el.click();\n                }\n            }\n        }\n    });\n\n    // TODO add destroy\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var HtmlContainerDefaultConfig = {\n        htmlcontainerDeferred: 0,\n        method: \"get\",\n        htmlSource: null,\n        requestData: null,\n        requestOptions: null,\n        insertMode: \"default\", // replace, append, prepend\n        onHtmlLoad: Metro.noop,\n        onHtmlLoadFail: Metro.noop,\n        onHtmlLoadDone: Metro.noop,\n        onHtmlContainerCreate: Metro.noop\n    };\n\n    Metro.htmlContainerSetup = function (options) {\n        HtmlContainerDefaultConfig = $.extend({}, HtmlContainerDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroHtmlContainerSetup\"] !== undefined) {\n        Metro.htmlContainerSetup(window[\"metroHtmlContainerSetup\"]);\n    }\n\n    Metro.Component('html-container', {\n        init: function( options, elem ) {\n            this._super(elem, options, HtmlContainerDefaultConfig, {\n                data: null,\n                opt: {},\n                htmlSource: ''\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n\n            if (typeof o.requestData === 'string') {\n                o.requestData = JSON.parse(o.requestData);\n            }\n\n            if (Utils.isObject(o.requestData)) {\n                this.data = Utils.isObject(o.requestData);\n            }\n\n            if (typeof o.requestOptions === 'string') {\n                o.requestOptions = JSON.parse(o.requestOptions);\n            }\n\n            if (Utils.isObject(o.requestOptions)) {\n                this.opt = Utils.isObject(o.requestOptions);\n            }\n\n            o.method = o.method.toUpperCase();\n\n            if (Utils.isValue(o.htmlSource)) {\n                this.htmlSource = o.htmlSource;\n                this._load();\n            }\n\n            this._fireEvent(\"html-container-create\", {\n                element: element\n            });\n        },\n\n        _load: function(){\n            var that = this, element = this.element, o = this.options;\n            var fetchData = {\n                method: o.method\n            };\n\n            if (this.data) fetchData['body'] = this.data;\n            if (this.opt) fetchData['headers'] = this.opt;\n\n            fetch(this.htmlSource, fetchData)\n            .then(Metro.fetch.status)\n            .then(Metro.fetch.text)\n            .then(function(data){\n                var _data = $(data);\n\n                if (_data.length === 0) {\n                    _data = $(\"<div>\").html(data);\n                }\n\n                switch (o.insertMode.toLowerCase()) {\n                    case \"prepend\": element.prepend(_data); break;\n                    case \"append\": element.append(_data); break;\n                    case \"replace\": _data.insertBefore(element).script(); element.remove(); break;\n                    default: {\n                        element.html(_data);\n                    }\n                }\n                that._fireEvent(\"html-load\", {\n                    data: data,\n                    source: o.htmlSource,\n                    requestData: that.data,\n                    requestOptions: that.opt\n                });\n            })\n            .catch(function(error){\n                that._fireEvent(\"html-load-fail\", {\n                    error: error\n                });\n            });\n        },\n\n        load: function(source, data, opt){\n            if (source) {\n                this.htmlSource = source;\n            }\n\n            if (data) {\n                this.data = Utils.isObject(data);\n            }\n\n            if (opt) {\n                this.opt = Utils.isObject(opt);\n            }\n\n            this._load();\n        },\n\n        changeAttribute: function(attributeName){\n            var that = this, element = this.element, o = this.options;\n\n            var changeHTMLSource = function(){\n                var html = element.attr(\"data-html-source\");\n                if (Utils.isNull(html)) {\n                    return ;\n                }\n                if (html.trim() === \"\") {\n                    element.html(\"\");\n                }\n                o.htmlSource = html;\n                that._load();\n            };\n\n            var changeInsertMode = function(){\n                var attr = element.attr(\"data-insert-mode\");\n                if (Utils.isValue(attr)) {\n                    o.insertMode = attr;\n                }\n            };\n\n            var changeRequestData = function(){\n                var data = element.attr(\"data-request-data\");\n                that.load(o.htmlSource, data);\n            };\n\n            switch (attributeName) {\n                case \"data-html-source\": changeHTMLSource(); break;\n                case \"data-insert-mode\": changeInsertMode(); break;\n                case \"data-request-data\": changeRequestData(); break;\n            }\n        },\n\n        destroy: function(){}\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n\n    var ImageBoxDefaultConfig = {\n        image: null,\n        size: \"cover\",\n        repeat: false,\n        color: \"transparent\",\n        attachment: \"scroll\",\n        origin: \"border\",\n        onImageBoxCreate: Metro.noop\n    };\n\n    Metro.imageBoxSetup = function (options) {\n        ImageBoxDefaultConfig = $.extend({}, ImageBoxDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroImageBoxSetup\"] !== undefined) {\n        Metro.imageBoxSetup(window[\"metroImageBoxSetup\"]);\n    }\n\n    Metro.Component('image-box', {\n        init: function( options, elem ) {\n            this._super(elem, options, ImageBoxDefaultConfig, {\n                // define instance vars here\n            });\n            return this;\n        },\n\n        _create: function(){\n            this._createStructure();\n\n            this._fireEvent('image-box-create');\n        },\n\n        _createStructure: function(){\n            var element = this.element;\n\n            element.addClass(\"image-box\");\n\n            this._drawImage();\n        },\n\n        _drawImage: function(){\n            var element = this.element, o = this.options;\n            var image = new Image();\n            var portrait;\n\n            if (!element.attr(\"data-original\"))\n                element.attr(\"data-original\", o.image);\n\n            element.css({\n                backgroundImage: \"url(\"+o.image+\")\",\n                backgroundSize: o.size,\n                backgroundRepeat: o.repeat ? \"repeat\" : \"no-repeat\",\n                backgroundColor: o.color,\n                backgroundAttachment: o.attachment,\n                backgroundOrigin: o.origin\n            });\n\n            image.src = o.image;\n            image.onload = function(){\n                portrait = this.height >= this.width;\n                element\n                    .removeClass(\"image-box__portrait image-box__landscape\")\n                    .addClass(\"image-box__\" + (portrait ? \"portrait\" : \"landscape\"));\n            }\n        },\n\n        changeAttribute: function(attr, newValue){\n            var attrName = attr.replace(\"data-\", \"\");\n\n            if ([\"image\", \"size\", \"repeat\", \"color\", \"attachment\", \"origin\"].indexOf(attrName) > -1) {\n                this.options[attrName] = newValue;\n                this._drawImage();\n            }\n        },\n\n        destroy: function(){\n            return this.element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var ImageCompareDefaultConfig = {\n        imagecompareDeferred: 0,\n        width: \"100%\",\n        height: \"auto\",\n        onSliderMove: Metro.noop,\n        onImageCompareCreate: Metro.noop\n    };\n\n    Metro.imageCompareSetup = function (options) {\n        ImageCompareDefaultConfig = $.extend({}, ImageCompareDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroImageCompareSetup\"] !== undefined) {\n        Metro.imageCompareSetup(window[\"metroImageCompareSetup\"]);\n    }\n\n    Metro.Component('image-compare', {\n        init: function( options, elem ) {\n            this._super(elem, options, ImageCompareDefaultConfig, {\n                id: Utils.elementId(\"image-compare\")\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"image-compare-create\", {\n                element: element\n            });\n        },\n\n        _createStructure: function(){\n            var element = this.element, o = this.options;\n            var container, container_overlay, slider;\n            var images, element_width, element_height;\n\n            if (!Utils.isValue(element.attr(\"id\"))) {\n                element.attr(\"id\", Utils.elementId(\"image-compare\"));\n            }\n\n            element.addClass(\"image-compare\").css({\n                width: o.width\n            });\n\n            element_width = element.width();\n\n            switch (o.height) {\n                case \"16/9\": element_height = Utils.aspectRatioH(element_width, o.height); break;\n                case \"21/9\": element_height = Utils.aspectRatioH(element_width, o.height); break;\n                case \"4/3\": element_height = Utils.aspectRatioH(element_width, o.height); break;\n                case \"auto\": element_height = Utils.aspectRatioH(element_width, \"16/9\"); break;\n                default: element_height = o.height;\n            }\n\n            element.css({\n                height: element_height\n            });\n\n            container = $(\"<div>\").addClass(\"image-container\").appendTo(element);\n            container_overlay = $(\"<div>\").addClass(\"image-container-overlay\").appendTo(element).css({\n                width: element_width / 2\n            });\n\n            slider = $(\"<div>\").addClass(\"image-slider\").appendTo(element);\n            slider.css({\n                top: element_height / 2 - slider.height() / 2,\n                left: element_width / 2 - slider.width() / 2\n            });\n\n            images = element.find(\"img\");\n\n            $.each(images, function(i){\n                var img = $(\"<div>\").addClass(\"image-wrapper\");\n                img.css({\n                    width: element_width,\n                    height: element_height,\n                    backgroundImage: \"url(\"+this.src+\")\"\n                });\n                img.appendTo(i === 0 ? container : container_overlay);\n            });\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n\n            var overlay = element.find(\".image-container-overlay\");\n            var slider = element.find(\".image-slider\");\n\n            slider.on(Metro.events.startAll, function(){\n                var w = element.width();\n                $(document).on(Metro.events.moveAll, function(e){\n                    var x = Utils.getCursorPositionX(element[0], e), left_pos;\n                    if (x < 0) x = 0;\n                    if (x > w) x = w;\n                    overlay.css({\n                        width: x\n                    });\n                    left_pos = x - slider.width() / 2;\n                    slider.css({\n                        left: left_pos\n                    });\n\n                    that._fireEvent(\"slider-move\", {\n                        x: x,\n                        l: left_pos\n                    });\n                }, {ns: that.id});\n\n                $(document).on(Metro.events.stopAll, function(){\n                    $(document).off(Metro.events.moveAll, {ns: that.id});\n                    $(document).off(Metro.events.stopAll, {ns: that.id});\n                }, {ns: that.id})\n            });\n\n            $(window).on(Metro.events.resize, function(){\n                var element_width = element.width(), element_height;\n\n                if (o.width !== \"100%\") {\n                    return ;\n                }\n\n                switch (o.height) {\n                    case \"16/9\": element_height = Utils.aspectRatioH(element_width, o.height); break;\n                    case \"21/9\": element_height = Utils.aspectRatioH(element_width, o.height); break;\n                    case \"4/3\": element_height = Utils.aspectRatioH(element_width, o.height); break;\n                    case \"auto\": element_height = Utils.aspectRatioH(element_width, \"16/9\"); break;\n                    default: element_height = o.height;\n                }\n\n                element.css({\n                    height: element_height\n                });\n\n                $.each(element.find(\".image-wrapper\"), function(){\n                    $(this).css({\n                        width: element_width,\n                        height: element_height\n                    })\n                });\n\n                element.find(\".image-container-overlay\").css({\n                    width: element_width / 2\n                });\n\n                slider.css({\n                    top: element_height / 2 - slider.height() / 2,\n                    left: element_width / 2 - slider.width() / 2\n                });\n\n            }, {ns: this.id});\n        },\n\n        /* eslint-disable-next-line */\n        changeAttribute: function(attributeName){\n        },\n\n        destroy: function(){\n            var element = this.element;\n\n            element.off(Metro.events.start);\n            $(window).off(Metro.events.resize, {ns: this.id});\n\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n\n    var Utils = Metro.utils;\n    var ImageGridDefaultConfig = {\n        useBackground: false,\n        backgroundSize: \"cover\",\n        backgroundPosition: \"top left\",\n\n        clsImageGrid: \"\",\n        clsImageGridItem: \"\",\n        clsImageGridImage: \"\",\n\n        onItemClick: Metro.noop,\n        onDrawItem: Metro.noop,\n        onImageGridCreate: Metro.noop\n    };\n\n    Metro.imageGridSetup = function (options) {\n        ImageGridDefaultConfig = $.extend({}, ImageGridDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroImageGridSetup\"] !== undefined) {\n        Metro.imageGridSetup(window[\"metroImageGridSetup\"]);\n    }\n\n    Metro.Component('image-grid', {\n        init: function( options, elem ) {\n            this._super(elem, options, ImageGridDefaultConfig, {\n                // define instance vars here\n                items: []\n            });\n            return this;\n        },\n\n        _create: function(){\n            this.items = this.element.children(\"img\");\n            this._createStructure();\n            this._createEvents();\n            this._fireEvent('image-grid-create');\n        },\n\n        _createStructure: function(){\n            var element = this.element, o = this.options;\n\n            element.addClass(\"image-grid\").addClass(o.clsImageGrid);\n\n            this._createItems();\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element;\n\n            element.on(Metro.events.click, \".image-grid__item\", function(){\n                that._fireEvent(\"item-click\", {\n                    item: this\n                });\n            });\n        },\n\n        _createItems: function(){\n            var that = this, element = this.element, o = this.options;\n            var items = this.items;\n\n            element.clear();\n\n            items.each(function(){\n                var el = $(this);\n                var src = this.src;\n                var wrapper = $(\"<div>\").addClass(\"image-grid__item\").addClass(o.clsImageGridItem).appendTo(element);\n                var img = new Image();\n\n                img.src = src;\n                img.onload = function(){\n                    var port = this.height >= this.width;\n                    wrapper.addClass(port ? \"image-grid__item-portrait\" : \"image-grid__item-landscape\");\n                    el.addClass(o.clsImageGridImage).appendTo(wrapper);\n\n                    if (o.useBackground) {\n                        wrapper\n                            .css({\n                                background: \"url(\"+src+\")\",\n                                backgroundRepeat: \"no-repeat\",\n                                backgroundSize: o.backgroundSize,\n                                backgroundPosition: o.backgroundPosition\n                            })\n                            .attr(\"data-original\", el.attr(\"data-original\") || src)\n                            .attr(\"data-title\", el.attr(\"alt\") || el.attr(\"data-title\") || \"\");\n                        el.visible(false);\n                    }\n\n                    that._fireEvent(\"draw-item\", {\n                        item: wrapper[0],\n                        image: el[0]\n                    });\n                }\n            });\n        },\n\n        changeAttribute: function(attr, val){\n            var o = this.options;\n\n            if (attr === \"data-use-background\") {\n                o.useBackground = Utils.bool(val);\n                this._createItems();\n            }\n\n            if (attr === \"data-background-size\") {\n                o.backgroundSize = val;\n                this._createItems();\n            }\n\n            if (attr === \"data-background-position\") {\n                o.backgroundPosition = val;\n                this._createItems();\n            }\n        },\n\n        destroy: function(){\n            this.element.remove();\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var ImageMagnifierDefaultConfig = {\n        imagemagnifierDeferred: 0,\n        width: \"100%\",\n        height: \"auto\",\n        lensSize: 100,\n        lensType: \"square\", // square, circle\n        magnifierZoom: 2,\n        magnifierMode: \"glass\", // glass, zoom\n        magnifierZoomElement: null,\n\n        clsMagnifier: \"\",\n        clsLens: \"\",\n        clsZoom: \"\",\n\n        onMagnifierMove: Metro.noop,\n        onImageMagnifierCreate: Metro.noop\n    };\n\n    Metro.imageMagnifierSetup = function (options) {\n        ImageMagnifierDefaultConfig = $.extend({}, ImageMagnifierDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroImageMagnifierSetup\"] !== undefined) {\n        Metro.imageMagnifierSetup(window[\"metroImageMagnifierSetup\"]);\n    }\n\n    Metro.Component('image-magnifier', {\n        init: function( options, elem ) {\n            this._super(elem, options, ImageMagnifierDefaultConfig, {\n                zoomElement: null,\n                id: Utils.elementId(\"image-magnifier\")\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"image-magnifier-create\", {\n                element: element\n            });\n        },\n\n        _createStructure: function(){\n            var element = this.element, o = this.options;\n            var magnifier, element_width, element_height;\n            var image = element.find(\"img\");\n\n            if (image.length === 0) {\n                throw new Error(\"Image not defined\");\n            }\n\n            if (!Utils.isValue(element.attr(\"id\"))) {\n                element.attr(\"id\", Utils.elementId(\"image-magnifier\"));\n            }\n\n            element.addClass(\"image-magnifier\").css({\n                width: o.width\n            }).addClass(o.clsMagnifier);\n\n            element_width = element.width();\n\n            switch (o.height) {\n                case \"16/9\": element_height = Utils.aspectRatioH(element_width, o.height); break;\n                case \"21/9\": element_height = Utils.aspectRatioH(element_width, o.height); break;\n                case \"4/3\": element_height = Utils.aspectRatioH(element_width, o.height); break;\n                case \"auto\": element_height = Utils.aspectRatioH(element_width, \"16/9\"); break;\n                default: element_height = o.height;\n            }\n\n            element.css({\n                height: element_height\n            });\n\n            var x = element_width / 2 - o.lensSize / 2;\n            var y = element_height / 2 - o.lensSize / 2;\n\n            if (o.magnifierMode === \"glass\") {\n\n                magnifier = $(\"<div>\").addClass(\"image-magnifier-glass\").appendTo(element);\n                magnifier.css({\n                    width: o.lensSize,\n                    height: o.lensSize,\n                    borderRadius: o.lensType !== \"circle\" ? 0 : \"50%\",\n                    top: y,\n                    left: x,\n                    backgroundImage: \"url(\" + image[0].src + \")\",\n                    backgroundRepeat: \"no-repeat\",\n                    backgroundPosition: \"-\" + ((x * o.magnifierZoom) - o.lensSize / 4 + 4) + \"px -\" + ((y * o.magnifierZoom) - o.lensSize / 4 + 4) + \"px\",\n                    backgroundSize: (image[0].width * o.magnifierZoom) + \"px \" + (image[0].height * o.magnifierZoom) + \"px\"\n                }).addClass(o.clsLens);\n\n            } else {\n\n                magnifier = $(\"<div>\").addClass(\"image-magnifier-glass\").appendTo(element);\n                magnifier.css({\n                    width: o.lensSize,\n                    height: o.lensSize,\n                    borderRadius: 0,\n                    borderWidth: 1,\n                    top: y,\n                    left: x\n                }).addClass(o.clsLens);\n\n                if (!Utils.isValue(o.magnifierZoomElement) || $(o.magnifierZoomElement).length === 0) {\n                    this.zoomElement = $(\"<div>\").insertAfter(element);\n                } else {\n                    this.zoomElement = $(o.magnifierZoomElement);\n                }\n\n                var zoom_element_width = magnifier[0].offsetWidth * o.magnifierZoom;\n                var zoom_element_height = magnifier[0].offsetHeight * o.magnifierZoom;\n                var cx = zoom_element_width / o.lensSize;\n                var cy = zoom_element_height / o.lensSize;\n\n                this.zoomElement.css({\n                    width: zoom_element_width,\n                    height: zoom_element_height,\n                    backgroundImage: \"url(\" + image[0].src + \")\",\n                    backgroundRepeat: \"no-repeat\",\n                    backgroundPosition: \"-\" + (x * cx) + \"px -\" + (y * cy) + \"px\",\n                    backgroundSize: (image[0].width * cx) + \"px \" + (image[0].height * cy) + \"px\"\n                }).addClass(o.clsZoom);\n            }\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var glass = element.find(\".image-magnifier-glass\");\n            var glass_size = glass[0].offsetWidth / 2;\n            var image = element.find(\"img\")[0];\n            var zoomElement = this.zoomElement;\n            var cx, cy;\n\n            $(window).on(Metro.events.resize, function(){\n                var x = element.width() / 2 - o.lensSize / 2;\n                var y = element.height() / 2 - o.lensSize / 2;\n\n                if (o.magnifierMode === \"glass\") {\n                    glass.css({\n                        backgroundPosition: \"-\" + ((x * o.magnifierZoom) - o.lensSize / 4 + 4) + \"px -\" + ((y * o.magnifierZoom) - o.lensSize / 4 + 4) + \"px\",\n                        backgroundSize: (image.width * o.magnifierZoom) + \"px \" + (image.height * o.magnifierZoom) + \"px\"\n                    });\n                }\n            }, {ns: this.id})\n\n            if (o.magnifierMode !== \"glass\") {\n                cx = zoomElement[0].offsetWidth / glass_size / 2;\n                cy = zoomElement[0].offsetHeight / glass_size / 2;\n\n                zoomElement.css({\n                    backgroundSize: (image.width * cx) + \"px \" + (image.height * cy) + \"px\"\n                });\n            }\n\n            var lens_move = function(pos){\n                var x, y;\n                var magic = 4, zoom = parseInt(o.magnifierZoom);\n\n                if (o.magnifierMode === \"glass\") {\n\n                    x = pos.x;\n                    y = pos.y;\n\n                    if (x > image.width - (glass_size / zoom)) {\n                        x = image.width - (glass_size / zoom);\n                    }\n                    if (x < glass_size / zoom) {\n                        x = glass_size / zoom;\n                    }\n                    if (y > image.height - (glass_size / zoom)) {\n                        y = image.height - (glass_size / zoom);\n                    }\n                    if (y < glass_size / zoom) {\n                        y = glass_size / zoom;\n                    }\n\n                    glass.css({\n                        top: y - glass_size,\n                        left: x - glass_size,\n                        backgroundPosition: \"-\" + ((x * zoom) - glass_size + magic) + \"px -\" + ((y * zoom) - glass_size + magic) + \"px\"\n                    });\n                } else {\n\n                    x = pos.x - (glass_size);\n                    y = pos.y - (glass_size);\n\n                    if (x > image.width - glass_size * 2) {x = image.width - glass_size * 2;}\n                    if (x < 0) {x = 0;}\n                    if (y > image.height - glass_size * 2) {y = image.height - glass_size * 2;}\n                    if (y < 0) {y = 0;}\n\n                    glass.css({\n                        top: y,\n                        left: x\n                    });\n\n                    zoomElement.css({\n                        backgroundPosition: \"-\" + (x * cx) + \"px -\" + (y * cy) + \"px\"\n                    });\n                }\n            };\n\n            element.on(Metro.events.move, function(e){\n                var pos = Utils.getCursorPosition(image, e);\n\n                lens_move(pos);\n\n                that._fireEvent(\"magnifier-move\", {\n                    pos: pos,\n                    glass: glass[0],\n                    zoomElement: zoomElement ? zoomElement[0] : undefined\n                });\n\n                e.preventDefault();\n            });\n\n            element.on(Metro.events.leave, function(){\n                var x = element.width() / 2 - o.lensSize / 2;\n                var y = element.height() / 2 - o.lensSize / 2;\n\n                glass.animate({\n                    draw: {\n                        top: y,\n                        left: x\n                    }\n                });\n\n                lens_move({\n                    x: x + o.lensSize / 2, y: y + o.lensSize / 2\n                });\n            });\n        },\n\n        /* eslint-disable-next-line */\n        changeAttribute: function(attributeName){\n        },\n\n        destroy: function(){\n            var element = this.element;\n            element.off(Metro.events.move);\n            element.off(Metro.events.leave);\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n\n    var ImagePlaceholderDefaultConfig = {\n        size: \"100x100\",\n        width: null,\n        height: null,\n        color: \"#f8f8f8\",\n        textColor: \"#292929\",\n        font: \"12px sans-serif\",\n        text: \"\",\n        showText: true,\n        onImagePlaceholderCreate: Metro.noop\n    };\n\n    Metro.imagePlaceholderSetup = function (options) {\n        ImagePlaceholderDefaultConfig = $.extend({}, ImagePlaceholderDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroImagePlaceholderSetup\"] !== undefined) {\n        Metro.imagePlaceholderSetup(window[\"metroImagePlaceholderSetup\"]);\n    }\n\n    Metro.Component('image-placeholder', {\n        init: function( options, elem ) {\n            this._super(elem, options, ImagePlaceholderDefaultConfig, {\n                // define instance vars here\n                width: 0,\n                height: 0\n            });\n            return this;\n        },\n\n        _create: function(){\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent('image-placeholder-create');\n        },\n\n        _createStructure: function(){\n            var element = this.element, o = this.options;\n            var size = o.size.toArray(\"x\");\n\n            this.width = o.width ? o.width : size[0];\n            this.height = o.height ? o.height : size[1];\n\n            element.attr(\"src\", this._createPlaceholder());\n        },\n\n        _createEvents: function(){\n        },\n\n        _createPlaceholder: function(){\n            var o = this.options;\n            var canvas = document.createElement(\"canvas\"),\n                context = canvas.getContext(\"2d\");\n\n            var width = this.width, height = this.height;\n\n            canvas.width = parseInt(width);\n            canvas.height = parseInt(height);\n\n            // background\n            context.clearRect(0, 0, width, height);\n            context.fillStyle = o.color;\n            context.fillRect(0, 0, width, height);\n\n            // text\n            context.fillStyle = o.textColor;\n            context.font = o.font;\n\n            context.translate(width / 2, height / 2);\n            context.textAlign = 'center';\n            context.textBaseline = 'middle';\n\n            if (o.showText)\n                context.fillText(o.text ? o.text : width + \" \\u00d7 \" + height, 0, 0);\n\n            return canvas.toDataURL();\n        },\n\n        // changeAttribute: function(attr, newValue){\n        // },\n\n        destroy: function(){\n            this.element.remove();\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var InfoBoxDefaultConfig = {\n        infoboxDeferred: 0,\n        type: \"\",\n        width: 480,\n        height: \"auto\",\n        overlay: true,\n        overlayColor: '#000000',\n        overlayAlpha: .5,\n        overlayClickClose: false,\n        autoHide: 0,\n        removeOnClose: false,\n        closeButton: true,\n        clsBox: \"\",\n        clsBoxContent: \"\",\n        clsOverlay: \"\",\n        onOpen: Metro.noop,\n        onClose: Metro.noop,\n        onInfoBoxCreate: Metro.noop\n    };\n\n    Metro.infoBoxSetup = function (options) {\n        InfoBoxDefaultConfig = $.extend({}, InfoBoxDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroInfoBoxSetup\"] !== undefined) {\n        Metro.infoBoxSetup(window[\"metroInfoBoxSetup\"]);\n    }\n\n    Metro.Component('info-box', {\n        init: function( options, elem ) {\n            this._super(elem, options, InfoBoxDefaultConfig, {\n                overlay: null,\n                id: Utils.elementId(\"info-box\")\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"info-box-create\", {\n                element: element\n            });\n        },\n\n        _overlay: function(){\n            var o = this.options;\n\n            var overlay = $(\"<div>\");\n            overlay.addClass(\"overlay\").addClass(o.clsOverlay);\n\n            if (o.overlayColor === 'transparent') {\n                overlay.addClass(\"transparent\");\n            } else {\n                overlay.css({\n                    background: Metro.colors.toRGBA(o.overlayColor, o.overlayAlpha)\n                });\n            }\n\n            return overlay;\n        },\n\n        _createStructure: function(){\n            var element = this.element, o = this.options;\n            var closer, content;\n\n            if (o.overlay === true) {\n                this.overlay = this._overlay();\n            }\n\n            element.addClass(\"info-box\").addClass(o.type).addClass(o.clsBox);\n\n            closer = element.find(\"closer\");\n            if (closer.length === 0) {\n                closer = $(\"<span>\").addClass(\"button square closer\");\n                closer.appendTo(element);\n            }\n\n            if (o.closeButton !== true) {\n                closer.hide();\n            }\n\n            content = element.find(\".info-box-content\");\n            if (content.length > 0) {\n                content.addClass(o.clsBoxContent);\n            }\n\n            element.css({\n                width: o.width,\n                height: o.height,\n                visibility: \"hidden\",\n                top: '100%',\n                left: ( $(window).width() - element.outerWidth() ) / 2\n            });\n\n            element.appendTo($('body'));\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element;\n\n            element.on(Metro.events.click, \".closer\", function(){\n                that.close();\n            });\n\n            element.on(Metro.events.click, \".js-dialog-close\", function(){\n                that.close();\n            });\n\n            $(window).on(Metro.events.resize, function(){\n                that.reposition();\n            }, {ns: this.id});\n        },\n\n        _setPosition: function(){\n            var element = this.element;\n            element.css({\n                top: ( $(window).height() - element.outerHeight() ) / 2,\n                left: ( $(window).width() - element.outerWidth() ) / 2\n            });\n        },\n\n        reposition: function(){\n            this._setPosition();\n        },\n\n        setContent: function(c){\n            var element = this.element;\n            var content = element.find(\".info-box-content\");\n            if (content.length === 0) {\n                return ;\n            }\n            content.html(c);\n            this.reposition();\n        },\n\n        setType: function(t){\n            var element = this.element;\n            element.removeClass(\"success info alert warning\").addClass(t);\n        },\n\n        open: function(){\n            var that = this, element = this.element, o = this.options;\n\n            // if (o.overlay === true) {\n            //     this.overlay.appendTo($(\"body\"));\n            // }\n            if (o.overlay === true && $(\".overlay\").length === 0) {\n                this.overlay.appendTo($(\"body\"));\n                if (o.overlayClickClose === true) {\n                    this.overlay.on(Metro.events.click, function(){\n                        that.close();\n                    });\n                }\n            }\n\n            this._setPosition();\n\n            element.css({\n                visibility: \"visible\"\n            });\n\n            this._fireEvent(\"open\");\n\n            element.data(\"open\", true);\n\n            if (parseInt(o.autoHide) > 0) {\n                setTimeout(function(){\n                    that.close();\n                }, parseInt(o.autoHide));\n            }\n        },\n\n        close: function(){\n            var element = this.element, o = this.options;\n\n            if (o.overlay === true) {\n                $('body').find('.overlay').remove();\n            }\n\n            element.css({\n                visibility: \"hidden\",\n                top: \"100%\"\n            });\n\n            this._fireEvent(\"close\");\n\n            element.data(\"open\", false);\n\n            if (o.removeOnClose === true) {\n                this.destroy();\n                element.remove();\n            }\n        },\n\n        isOpen: function(){\n            return this.element.data(\"open\") === true;\n        },\n\n        /* eslint-disable-next-line */\n        changeAttribute: function(attributeName){\n        },\n\n        destroy: function(){\n            var element = this.element;\n\n            element.off(\"all\");\n            $(window).off(Metro.events.resize, {ns: this.id});\n\n            return element;\n        }\n    });\n\n    Metro['infobox'] = {\n        isInfoBox: function(el){\n            return Utils.isMetroObject(el, \"infobox\");\n        },\n\n        open: function(el, c, t){\n            if (!this.isInfoBox(el)) {\n                return false;\n            }\n            var ib = Metro.getPlugin(el, \"infobox\");\n            if (c !== undefined) {\n                ib.setContent(c);\n            }\n            if (t !== undefined) {\n                ib.setType(t);\n            }\n            ib.open();\n        },\n\n        close: function(el){\n            if (!this.isInfoBox(el)) {\n                return false;\n            }\n            var ib = Metro.getPlugin(el, \"infobox\");\n            ib.close();\n        },\n\n        setContent: function(el, c){\n            if (!this.isInfoBox(el)) {\n                return false;\n            }\n\n            if (c === undefined) {\n                c = \"\";\n            }\n\n            var ib = Metro.getPlugin(el, \"infobox\");\n            ib.setContent(c);\n            ib.reposition();\n        },\n\n        setType: function(el, t){\n            if (!this.isInfoBox(el)) {\n                return false;\n            }\n\n            var ib = Metro.getPlugin(el, \"infobox\");\n            ib.setType(t);\n            ib.reposition();\n        },\n\n        isOpen: function(el){\n            if (!this.isInfoBox(el)) {\n                return false;\n            }\n            var ib = Metro.getPlugin(el, \"infobox\");\n            return ib.isOpen();\n        },\n\n        create: function(c, t, o, open){\n            var $$ = Utils.$();\n            var el, ib, box_type;\n\n            box_type = t !== undefined ? t : \"\";\n\n            el = $$(\"<div>\").appendTo($$(\"body\"));\n            $$(\"<div>\").addClass(\"info-box-content\").appendTo(el);\n\n            var ib_options = $$.extend({}, {\n                removeOnClose: true,\n                type: box_type\n            }, (o !== undefined ? o : {}));\n\n            ib_options._runtime = true;\n\n            el.infobox(ib_options);\n\n            ib = Metro.getPlugin(el, 'infobox');\n            ib.setContent(c);\n            if (open !== false) {\n                ib.open();\n            }\n\n            return el;\n        }\n    };\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n\n    var Utils = Metro.utils;\n    var InputMaskDefaultConfig = {\n        maskPattern: \".\",\n        mask: null,\n        maskPlaceholder: \"_\",\n        maskEditableStart: 0,\n        thresholdInterval: 300,\n        onChar: Metro.noop,\n        onInputMaskCreate: Metro.noop\n    };\n\n    Metro.inputMaskSetup = function (options) {\n        InputMaskDefaultConfig = $.extend({}, InputMaskDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroInputMaskSetup\"] !== undefined) {\n        Metro.inputMaskSetup(window[\"metroInputMaskSetup\"]);\n    }\n\n    Metro.Component('input-mask', {\n        init: function( options, elem ) {\n            if ($.device) {\n                if (elem.setAttribute) elem.setAttribute(\"placeholder\", options.mask);\n                console.warn(\"The component input-mask can't be initialized, because you run it on a mobile device!\");\n                return ;\n            }\n            this._super(elem, options, InputMaskDefaultConfig, {\n                // define instance vars here\n                pattern: null,\n                mask: \"\",\n                maskArray: [],\n                placeholder: \"\",\n                length: 0,\n                thresholdTimer: null,\n                id: Utils.elementId(\"input-mask\")\n            });\n            return this;\n        },\n\n        _create: function(){\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent('input-mask-create');\n        },\n\n        _createStructure: function(){\n            var o = this.options;\n\n            if (!o.mask) {\n                throw new Error('You must provide a pattern for masked input.')\n            }\n\n            if (typeof o.maskPlaceholder !== 'string' || o.maskPlaceholder.length > 1) {\n                throw new Error('Mask placeholder should be a single character or an empty string.')\n            }\n\n            this.placeholder = o.maskPlaceholder;\n            this.mask = (\"\"+o.mask);\n            this.maskArray = this.mask.split(\"\");\n            this.pattern = new RegExp(\"^\"+o.maskPattern+\"+$\");\n            this.length = this.mask.length;\n\n            this._showValue();\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var editableStart = o.maskEditableStart;\n            var id = this.id;\n\n            var checkEditablePosition = function(pos){\n                if (pos < editableStart) {\n                    setPosition(editableStart);\n                    return false;\n                }\n                return true;\n            }\n\n            var checkEditableChar = function(pos){\n                return pos < that.mask.length && that.mask.charAt(pos) === that.placeholder;\n            }\n\n            var findNextEditablePosition = function (pos){\n                var i, a = that.maskArray;\n\n                for (i = pos; i <= a.length; i++) {\n                    if (a[i] === that.placeholder) {\n                        return i;\n                    }\n                }\n                return pos;\n            }\n\n            var setPosition = function(pos){\n                that.elem.setSelectionRange(pos, pos);\n            }\n\n            var clearThresholdInterval = function(){\n                clearInterval(that.thresholdTimer);\n                that.thresholdTimer = null;\n            }\n\n            element.on(\"change\", function(){\n                if (this.value === \"\") {\n                    this.value = that.mask;\n                    setPosition(editableStart);\n                }\n            }, {ns: id});\n\n            element.on(\"focus click\", function(){\n                checkEditablePosition(this.selectionStart);\n                setPosition(findNextEditablePosition(this.selectionStart));\n            }, {ns: id});\n\n            element.on(\"keydown\", function(e){\n                var pos = this.selectionStart;\n                var val = this.value;\n                var code = e.code, key = e.key;\n\n                if (code === \"ArrowRight\" || code === \"End\") {\n                    return true;\n                } else {\n                    if (pos >= that.length && ([\"Backspace\", \"Home\", \"ArrowLeft\", \"ArrowUp\"].indexOf(code) === -1)) {\n                        // Don't move over mask length\n                        e.preventDefault();\n                    } else if (code === \"Home\" || code === \"ArrowUp\") {\n                        // Goto editable start position\n                        e.preventDefault();\n                        setPosition(editableStart);\n                    } else if (code === \"ArrowLeft\") {\n                        if (pos - 1 < editableStart) {\n                            // Don't move behind a editable start position\n                            e.preventDefault();\n                        }\n                    } else if (code === \"Backspace\") {\n                        e.preventDefault();\n                        if (pos - 1 >= editableStart) {\n                            if (checkEditableChar(pos - 1)) {\n                                if (this.value.charAt(pos - 1) !== that.placeholder) {\n                                    // Replace char if it is not a mask placeholder\n                                    this.value = val.substr(0, pos - 1) + that.placeholder + val.substr(pos);\n                                }\n                            }\n                            // Move to prev char position\n                            setPosition(pos - 1);\n                        }\n                    } else if (code === \"Space\") {\n                        e.preventDefault();\n                        setPosition(pos + 1);\n                    } else if (!that.pattern.test(key)) {\n                        e.preventDefault();\n                    } else {\n                        e.preventDefault();\n                        if (checkEditableChar(pos)) {\n                            this.value = val.substr(0, pos) + (o.onChar === Metro.noop ? key : Utils.exec(o.onChar, [key], this)) + val.substr(pos + 1);\n                            setPosition(findNextEditablePosition(pos + 1));\n                        }\n                    }\n                }\n            }, {ns: id});\n\n            element.on(\"keyup\", function(){\n                var el = this;\n\n                clearThresholdInterval();\n\n                that.thresholdTimer = setInterval(function(){\n                    clearThresholdInterval();\n                    setPosition(findNextEditablePosition(el.selectionStart));\n                }, o.thresholdInterval)\n            }, {ns: id});\n        },\n\n        _showValue: function(){\n            var that = this, elem = this.elem;\n            var a = new Array(this.length);\n            var val;\n            if (!elem.value) {\n                elem.value = this.mask;\n            } else {\n                val = elem.value;\n                $.each(this.maskArray, function(i, v){\n                    if (val[i] !== v && !that.pattern.test(val[i])) {\n                        a[i] = that.placeholder;\n                    } else {\n                        a[i] = val[i];\n                    }\n                });\n                this.elem.value = a.join(\"\");\n            }\n        },\n\n        destroy: function(){\n            var element = this.element, id = this.id;\n\n            element.off(\"change\", {ns: id});\n            element.off(\"focus\", {ns: id});\n            element.off(\"click\", {ns: id});\n            element.off(\"keydown\", {ns: id});\n            element.off(\"keyup\", {ns: id});\n\n            return element;\n        }\n    });\n}(Metro, m4q));\n\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var MaterialInputDefaultConfig = {\n        materialinputDeferred: 0,\n        label: \"\",\n        informer: \"\",\n        icon: \"\",\n\n        permanentLabel: false,\n\n        clsComponent: \"\",\n        clsInput: \"\",\n        clsLabel: \"\",\n        clsInformer: \"\",\n        clsIcon: \"\",\n        clsLine: \"\",\n\n        onInputCreate: Metro.noop\n    };\n\n    Metro.materialInputSetup = function (options) {\n        MaterialInputDefaultConfig = $.extend({}, MaterialInputDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroMaterialInputSetup\"] !== undefined) {\n        Metro.materialInputSetup(window[\"metroMaterialInputSetup\"]);\n    }\n\n    Metro.Component('material-input', {\n        init: function( options, elem ) {\n            this._super(elem, options, MaterialInputDefaultConfig, {\n                history: [],\n                historyIndex: -1\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"input-create\", {\n                element: element\n            });\n        },\n\n        _createStructure: function(){\n            var element = this.element, o = this.options;\n            var container = $(\"<div>\").addClass(\"input-material \" + element[0].className);\n\n            element[0].className = \"\";\n            element.attr(\"autocomplete\", \"nope\");\n\n            if (element.attr(\"type\") === undefined) {\n                element.attr(\"type\", \"text\");\n            }\n\n            container.insertBefore(element);\n            element.appendTo(container);\n\n            if (Utils.isValue(o.label)) {\n                $(\"<span>\").html(o.label).addClass(\"label\").addClass(o.clsLabel).insertAfter(element);\n            }\n            if (Utils.isValue(o.informer)) {\n                $(\"<span>\").html(o.informer).addClass(\"informer\").addClass(o.clsInformer).insertAfter(element);\n            }\n            if (Utils.isValue(o.icon)) {\n                container.addClass(\"with-icon\");\n                $(\"<span>\").html(o.icon).addClass(\"icon\").addClass(o.clsIcon).insertAfter(element);\n            }\n\n            container.append($(\"<hr>\").addClass(o.clsLine));\n\n            if (o.permanentLabel === true) {\n                container.addClass(\"permanent-label\");\n            }\n\n            container.addClass(o.clsComponent);\n            element.addClass(o.clsInput);\n\n            if (element.is(\":disabled\")) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        },\n\n        _createEvents: function(){\n\n        },\n\n        clear: function(){\n            this.element.val('');\n        },\n\n        disable: function(){\n            this.element.data(\"disabled\", true);\n            this.element.parent().addClass(\"disabled\");\n        },\n\n        enable: function(){\n            this.element.data(\"disabled\", false);\n            this.element.parent().removeClass(\"disabled\");\n        },\n\n        toggleState: function(){\n            if (this.elem.disabled) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        },\n\n        changeAttribute: function(attributeName){\n            if (attributeName === 'disabled') {\n                this.toggleState();\n            }\n        },\n\n        destroy: function(){\n            return this.element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var InputDefaultConfig = {\n        inputDeferred: 0,\n\n        label: \"\",\n\n        autocomplete: null,\n        autocompleteUrl: null,\n        autocompleteUrlMethod: \"GET\",\n        autocompleteUrlKey: null,\n        autocompleteDivider: \",\",\n        autocompleteListHeight: 200,\n\n        history: false,\n        historyPreset: \"\",\n        historyDivider: \"|\",\n        preventSubmit: false,\n        defaultValue: \"\",\n        size: \"default\",\n        prepend: \"\",\n        append: \"\",\n        copyInlineStyles: false,\n        searchButton: false,\n        clearButton: true,\n        revealButton: true,\n        clearButtonIcon: \"<span class='default-icon-cross'></span>\",\n        revealButtonIcon: \"<span class='default-icon-eye'></span>\",\n        searchButtonIcon: \"<span class='default-icon-search'></span>\",\n        customButtons: [],\n        searchButtonClick: 'submit',\n\n        clsComponent: \"\",\n        clsInput: \"\",\n        clsPrepend: \"\",\n        clsAppend: \"\",\n        clsClearButton: \"\",\n        clsRevealButton: \"\",\n        clsCustomButton: \"\",\n        clsSearchButton: \"\",\n        clsLabel: \"\",\n\n        onAutocompleteSelect: Metro.noop,\n        onHistoryChange: Metro.noop,\n        onHistoryUp: Metro.noop,\n        onHistoryDown: Metro.noop,\n        onClearClick: Metro.noop,\n        onRevealClick: Metro.noop,\n        onSearchButtonClick: Metro.noop,\n        onEnterClick: Metro.noop,\n        onInputCreate: Metro.noop\n    };\n\n    Metro.inputSetup = function (options) {\n        InputDefaultConfig = $.extend({}, InputDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroInputSetup\"] !== undefined) {\n        Metro.inputSetup(window[\"metroInputSetup\"]);\n    }\n\n    Metro.Component('input', {\n        init: function( options, elem ) {\n            this._super(elem, options, InputDefaultConfig, {\n                history: [],\n                historyIndex: -1,\n                autocomplete: []\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"input-create\", {\n                element: element\n            });\n        },\n\n        _createStructure: function(){\n            var that = this, element = this.element, o = this.options;\n            var container = $(\"<div>\").addClass(\"input \" + element[0].className);\n            var buttons = $(\"<div>\").addClass(\"button-group\");\n            var clearButton, revealButton, searchButton;\n\n            if (Utils.isValue(o.historyPreset)) {\n                $.each(o.historyPreset.toArray(o.historyDivider), function(){\n                    that.history.push(this);\n                });\n                that.historyIndex = that.history.length - 1;\n            }\n\n            if (element.attr(\"type\") === undefined) {\n                element.attr(\"type\", \"text\");\n            }\n\n            container.insertBefore(element);\n            element.appendTo(container);\n            buttons.appendTo(container);\n\n            if (!Utils.isValue(element.val().trim())) {\n                element.val(o.defaultValue);\n            }\n\n            if (o.clearButton === true && !element[0].readOnly) {\n                clearButton = $(\"<button>\").addClass(\"button input-clear-button\").addClass(o.clsClearButton).attr(\"tabindex\", -1).attr(\"type\", \"button\").html(o.clearButtonIcon);\n                clearButton.appendTo(buttons);\n            }\n            if (element.attr('type') === 'password' && o.revealButton === true) {\n                revealButton = $(\"<button>\").addClass(\"button input-reveal-button\").addClass(o.clsRevealButton).attr(\"tabindex\", -1).attr(\"type\", \"button\").html(o.revealButtonIcon);\n                revealButton.appendTo(buttons);\n            }\n            if (o.searchButton === true) {\n                searchButton = $(\"<button>\").addClass(\"button input-search-button\").addClass(o.clsSearchButton).attr(\"tabindex\", -1).attr(\"type\", o.searchButtonClick === 'submit' ? \"submit\" : \"button\").html(o.searchButtonIcon);\n                searchButton.appendTo(buttons);\n            }\n\n            if (Utils.isValue(o.prepend)) {\n                var prepend = $(\"<div>\").html(o.prepend);\n                prepend.addClass(\"prepend\").addClass(o.clsPrepend).appendTo(container);\n            }\n\n            if (Utils.isValue(o.append)) {\n                var append = $(\"<div>\").html(o.append);\n                append.addClass(\"append\").addClass(o.clsAppend).appendTo(container);\n            }\n\n            if (typeof o.customButtons === \"string\") {\n                o.customButtons = Utils.isObject(o.customButtons);\n            }\n\n            if (typeof o.customButtons === \"object\" && Utils.objectLength(o.customButtons) > 0) {\n                $.each(o.customButtons, function(){\n                    var item = this;\n                    var customButton = $(\"<button>\");\n\n                    customButton\n                        .addClass(\"button input-custom-button\")\n                        .addClass(o.clsCustomButton)\n                        .addClass(item.cls)\n                        .attr(\"tabindex\", -1)\n                        .attr(\"type\", \"button\")\n                        .html(item.html);\n\n                    if (item.attr && typeof item.attr === 'object') {\n                        $.each(item.attr, function(k, v){\n                            customButton.attr(Cake.dashedName(k), v);\n                        });\n                    }\n\n                    customButton.data(\"action\", item.onclick);\n\n                    customButton.appendTo(buttons);\n                });\n            }\n\n            if (Utils.isValue(element.attr('data-exclaim'))) {\n                container.attr('data-exclaim', element.attr('data-exclaim'));\n            }\n\n            if (element.attr('dir') === 'rtl' ) {\n                container.addClass(\"rtl\").attr(\"dir\", \"rtl\");\n            }\n\n            element[0].className = '';\n            if (o.copyInlineStyles === true) {\n                for (var i = 0, l = element[0].style.length; i < l; i++) {\n                    container.css(element[0].style[i], element.css(element[0].style[i]));\n                }\n            }\n\n            container.addClass(o.clsComponent);\n            element.addClass(o.clsInput);\n\n            if (o.size !== \"default\") {\n                container.css({\n                    width: o.size\n                });\n            }\n\n            if (!Utils.isNull(o.autocomplete) || !Utils.isNull(o.autocompleteUrl)) {\n                $(\"<div>\").addClass(\"autocomplete-list\").css({\n                    maxHeight: o.autocompleteListHeight,\n                    display: \"none\"\n                }).appendTo(container);\n            }\n\n            if (Utils.isValue(o.autocomplete)) {\n                var autocomplete_obj = Utils.isObject(o.autocomplete);\n\n                if (autocomplete_obj !== false) {\n                    this.autocomplete = autocomplete_obj;\n                } else {\n                    this.autocomplete = o.autocomplete.toArray(o.autocompleteDivider);\n                }\n            }\n\n            if (Utils.isValue(o.autocompleteUrl)) {\n                fetch(o.autocompleteUrl, {\n                    method: o.autocompleteUrlMethod\n                }).then(function(response){\n                    return response.text()\n                }).then(function(data){\n                    var newData = [];\n\n                    try {\n                        newData = JSON.parse(data);\n                        if (o.autocompleteUrlKey) {\n                            newData = newData[o.autocompleteUrlKey];\n                        }\n                    } catch (e) {\n                        newData = data.split(\"\\n\");\n                    }\n\n                    that.autocomplete = that.autocomplete.concat(newData);\n                });\n            }\n\n            if (o.label) {\n                var label = $(\"<label>\").addClass(\"label-for-input\").addClass(o.clsLabel).html(o.label).insertBefore(container);\n                if (element.attr(\"id\")) {\n                    label.attr(\"for\", element.attr(\"id\"));\n                }\n                if (element.attr(\"dir\") === \"rtl\") {\n                    label.addClass(\"rtl\");\n                }\n            }\n\n            if (element.is(\":disabled\")) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var container = element.closest(\".input\");\n            var autocompleteList = container.find(\".autocomplete-list\");\n\n            container.on(Metro.events.click, \".input-clear-button\", function(){\n                var curr = element.val();\n                element.val(Utils.isValue(o.defaultValue) ? o.defaultValue : \"\").fire('clear').fire('change').fire('keyup').focus();\n                if (autocompleteList.length > 0) {\n                    autocompleteList.css({\n                        display: \"none\"\n                    })\n                }\n\n                that._fireEvent(\"clear-click\", {\n                    prev: curr,\n                    val: element.val()\n                });\n\n            });\n\n            container.on(Metro.events.click, \".input-reveal-button\", function(){\n                if (element.attr('type') === 'password') {\n                    element.attr('type', 'text');\n                } else {\n                    element.attr('type', 'password');\n                }\n\n                that._fireEvent(\"reveal-click\", {\n                    val: element.val()\n                });\n\n            });\n\n            container.on(Metro.events.click, \".input-search-button\", function(){\n                if (o.searchButtonClick !== 'submit') {\n\n                    that._fireEvent(\"search-button-click\", {\n                        val: element.val(),\n                        button: this\n                    });\n\n                } else {\n                    this.form.submit();\n                }\n            });\n\n            // container.on(Metro.events.stop, \".input-reveal-button\", function(){\n            //     element.attr('type', 'password').focus();\n            // });\n\n            container.on(Metro.events.click, \".input-custom-button\", function(){\n                var button = $(this);\n                var action = button.data(\"action\");\n                Utils.exec(action, [element.val(), button], this);\n            });\n\n            element.on(Metro.events.keyup, function(e){\n                var val = element.val().trim();\n\n                if (o.history && e.keyCode === Metro.keyCode.ENTER && val !== \"\") {\n                    element.val(\"\");\n                    that.history.push(val);\n                    that.historyIndex = that.history.length - 1;\n\n                    that._fireEvent(\"history-change\", {\n                        val: val,\n                        history: that.history,\n                        historyIndex: that.historyIndex\n                    })\n\n                    if (o.preventSubmit === true) {\n                        e.preventDefault();\n                    }\n                }\n\n                if (o.history && e.keyCode === Metro.keyCode.UP_ARROW) {\n                    that.historyIndex--;\n                    if (that.historyIndex >= 0) {\n                        element.val(\"\");\n                        element.val(that.history[that.historyIndex]);\n\n                        that._fireEvent(\"history-down\", {\n                            val: element.val(),\n                            history: that.history,\n                            historyIndex: that.historyIndex\n                        })\n                    } else {\n                        that.historyIndex = 0;\n                    }\n                    e.preventDefault();\n                }\n\n                if (o.history && e.keyCode === Metro.keyCode.DOWN_ARROW) {\n                    that.historyIndex++;\n                    if (that.historyIndex < that.history.length) {\n                        element.val(\"\");\n                        element.val(that.history[that.historyIndex]);\n\n                        that._fireEvent(\"history-up\", {\n                            val: element.val(),\n                            history: that.history,\n                            historyIndex: that.historyIndex\n                        })\n                    } else {\n                        that.historyIndex = that.history.length - 1;\n                    }\n                    e.preventDefault();\n                }\n            });\n\n            element.on(Metro.events.keydown, function(e){\n                if (e.keyCode === Metro.keyCode.ENTER) {\n                    that._fireEvent(\"enter-click\", {\n                        val: element.val()\n                    });\n                }\n            });\n\n            element.on(Metro.events.blur, function(){\n                container.removeClass(\"focused\");\n            });\n\n            element.on(Metro.events.focus, function(){\n                container.addClass(\"focused\");\n            });\n\n            element.on(Metro.events.input, function(){\n                var val = this.value.toLowerCase();\n                that._drawAutocompleteList(val);\n            });\n\n            container.on(Metro.events.click, \".autocomplete-list .item\", function(){\n                var val = $(this).attr(\"data-autocomplete-value\");\n                element.val(val);\n                autocompleteList.css({\n                    display: \"none\"\n                });\n                element.trigger(\"change\");\n                that._fireEvent(\"autocomplete-select\", {\n                    value: val\n                });\n            });\n        },\n\n        _drawAutocompleteList: function(val){\n            var that = this, element = this.element;\n            var container = element.closest(\".input\");\n            var autocompleteList = container.find(\".autocomplete-list\");\n            var items;\n\n            if (autocompleteList.length === 0) {\n                return;\n            }\n\n            autocompleteList.html(\"\");\n\n            items = this.autocomplete.filter(function(item){\n                return item.toLowerCase().indexOf(val) > -1;\n            });\n\n            autocompleteList.css({\n                display: items.length > 0 ? \"block\" : \"none\"\n            });\n\n            $.each(items, function(){\n                var v = this;\n                var index = v.toLowerCase().indexOf(val), content;\n                var item = $(\"<div>\").addClass(\"item\").attr(\"data-autocomplete-value\", v);\n\n                if (index === 0) {\n                    content = \"<strong>\"+v.substr(0, val.length)+\"</strong>\"+v.substr(val.length);\n                } else {\n                    content = v.substr(0, index) + \"<strong>\"+v.substr(index, val.length)+\"</strong>\"+v.substr(index + val.length);\n                }\n\n                item.html(content).appendTo(autocompleteList);\n\n                that._fireEvent(\"draw-autocomplete-item\", {\n                    item: item\n                })\n            });\n        },\n\n        getHistory: function(){\n            return this.history;\n        },\n\n        getHistoryIndex: function(){\n            return this.historyIndex;\n        },\n\n        setHistoryIndex: function(val){\n            this.historyIndex = val >= this.history.length ? this.history.length - 1 : val;\n        },\n\n        setHistory: function(history, append) {\n            var that = this, o = this.options;\n            if (Utils.isNull(history)) return;\n            if (!Array.isArray(history) && typeof history === 'string') {\n                history = history.toArray(o.historyDivider);\n            }\n            if (append === true) {\n                $.each(history, function () {\n                    that.history.push(this);\n                })\n            } else{\n                this.history = history;\n            }\n            this.historyIndex = this.history.length - 1;\n        },\n\n        clear: function(){\n            this.element.val('');\n        },\n\n        toDefault: function(){\n            this.element.val(Utils.isValue(this.options.defaultValue) ? this.options.defaultValue : \"\");\n        },\n\n        disable: function(){\n            this.element.data(\"disabled\", true);\n            this.element.parent().addClass(\"disabled\");\n        },\n\n        enable: function(){\n            this.element.data(\"disabled\", false);\n            this.element.parent().removeClass(\"disabled\");\n        },\n\n        toggleState: function(){\n            if (this.elem.disabled) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        },\n\n        setAutocompleteList: function(l){\n            var autocomplete_list = Utils.isObject(l);\n            if (autocomplete_list !== false) {\n                this.autocomplete = autocomplete_list;\n            } else if (typeof l === \"string\") {\n                this.autocomplete = l.toArray(this.options.autocompleteDivider);\n            }\n        },\n\n        changeAttribute: function(attributeName){\n            switch (attributeName) {\n                case 'disabled': this.toggleState(); break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element;\n            var parent = element.parent();\n            var clearBtn = parent.find(\".input-clear-button\");\n            var revealBtn = parent.find(\".input-reveal-button\");\n            var customBtn = parent.find(\".input-custom-button\");\n\n            if (clearBtn.length > 0) {\n                clearBtn.off(Metro.events.click);\n            }\n            if (revealBtn.length > 0) {\n                revealBtn.off(Metro.events.start);\n                revealBtn.off(Metro.events.stop);\n            }\n            if (customBtn.length > 0) {\n                clearBtn.off(Metro.events.click);\n            }\n\n            element.off(Metro.events.blur);\n            element.off(Metro.events.focus);\n\n            return element;\n        }\n    });\n\n    $(document).on(Metro.events.click, function(){\n        $('.input .autocomplete-list').hide();\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var KeylockDefaultConfig = {\n        keylockDeferred: 0,\n\n        stateOnIcon: \"<span>&times;</span>\",\n        stateOffIcon: \"<span>&checkmark;</span>\",\n\n        transition: true,\n\n        onCaption: \"\",\n        offCaption: \"\",\n        captionPosition: \"right\",\n\n        clsKeylock: \"\",\n        clsStateOn: \"\",\n        clsStateOff: \"\",\n        clsCaption: \"\",\n        clsIcon: \"\",\n        clsOnCaption: \"\",\n        clsOffCaption: \"\",\n\n        onKeylockCreate: Metro.noop\n    };\n\n    Metro.keylockSetup = function (options) {\n        KeylockDefaultConfig = $.extend({}, KeylockDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroKeylockSetup\"] !== undefined) {\n        Metro.keylockSetup(window[\"metroKeylockSetup\"]);\n    }\n\n    Metro.Component('keylock', {\n        init: function( options, elem ) {\n            this._super(elem, options, KeylockDefaultConfig);\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n            var container;\n            var icon = $(\"<span>\").addClass(\"icon\").addClass(o.clsIcon);\n            var caption = $(\"<span>\").addClass(\"caption\").addClass(o.clsCaption);\n            var stateOnIcon = $(o.stateOnIcon).addClass(\"state-on\").addClass(o.clsStateOn);\n            var stateOffIcon = $(o.stateOffIcon).addClass(\"state-off\").addClass(o.clsStateOff);\n            var onCaption = $(\"<span>\").addClass(\"state-on\").addClass(o.clsOnCaption).html(o.onCaption);\n            var offCaption = $(\"<span>\").addClass(\"state-off\").addClass(o.clsOffCaption).html(o.offCaption);\n\n            element.attr(\"type\", \"checkbox\");\n\n            if (element.attr(\"readonly\") !== undefined) {\n                element.on(\"click\", function(e){\n                    e.preventDefault();\n                })\n            }\n\n            container = element.wrap(\n                $(\"<label>\").addClass(\"keylock\").addClass(o.clsKeylock)\n            );\n\n            icon.appendTo(container);\n            caption.appendTo(container);\n\n            stateOnIcon.appendTo(icon);\n            stateOffIcon.appendTo(icon);\n\n            onCaption.appendTo(caption);\n            offCaption.appendTo(caption);\n\n            if (o.transition === true) {\n                container.addClass(\"transition-on\");\n            }\n\n            if (o.captionPosition === 'left') {\n                container.addClass(\"caption-left\");\n            }\n\n            element[0].className = '';\n\n            if (element.is(':disabled')) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n\n            this._fireEvent(\"keylock-create\");\n        },\n\n        disable: function(){\n            this.element.data(\"disabled\", true);\n            this.element.parent().addClass(\"disabled\");\n        },\n\n        enable: function(){\n            this.element.data(\"disabled\", false);\n            this.element.parent().removeClass(\"disabled\");\n        },\n\n        toggleState: function(){\n            if (this.elem.disabled) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        },\n\n        toggle: function(v){\n            var element = this.element;\n\n            if (!Utils.isValue(v)) {\n                element.prop(\"checked\", !Utils.bool(element.prop(\"checked\")));\n            } else {\n                element.prop(\"checked\", v === 1);\n            }\n\n            return this;\n        },\n\n        changeAttribute: function(attributeName){\n            switch (attributeName) {\n                case 'disabled': this.toggleState(); break;\n            }\n        },\n\n        destroy: function(){\n            return this.element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    //var Utils = Metro.utils;\n    var KeypadDefaultConfig = {\n        keypadDeferred: 0,\n        label: \"\",\n        keySize: 48,\n        keys: \"1, 2, 3, 4, 5, 6, 7, 8, 9, 0\",\n        exceptKeys: \"\",\n        keySeparator: \"\",\n        trimSeparator: false,\n        keyDelimiter: \",\",\n        copyInlineStyles: false,\n        target: null,\n        keyLength: 0,\n        shuffle: false,\n        shuffleCount: 3,\n        position: Metro.position.BOTTOM_LEFT, //top-left, top, top-right, right, bottom-right, bottom, bottom-left, left\n        dynamicPosition: false,\n        serviceButtons: true,\n        showValue: true,\n        open: false,\n        sizeAsKeys: false,\n\n        clsKeypad: \"\",\n        clsInput: \"\",\n        clsKeys: \"\",\n        clsKey: \"\",\n        clsServiceKey: \"\",\n        clsBackspace: \"\",\n        clsClear: \"\",\n        clsLabel: \"\",\n\n        onChange: Metro.noop,\n        onClear: Metro.noop,\n        onBackspace: Metro.noop,\n        onShuffle: Metro.noop,\n        onKey: Metro.noop,\n        onKeypadCreate: Metro.noop\n    };\n\n    Metro.keypadSetup = function (options) {\n        KeypadDefaultConfig = $.extend({}, KeypadDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroKeypadSetup\"] !== undefined) {\n        Metro.keypadSetup(window[\"metroKeypadSetup\"]);\n    }\n\n    Metro.Component('keypad', {\n        init: function( options, elem ) {\n            this._super(elem, options, KeypadDefaultConfig, {\n                value: elem.tagName === 'INPUT' ? elem.value : elem.innerText,\n                positions: [\"top-left\", \"top\", \"top-right\", \"right\", \"bottom-right\", \"bottom\", \"bottom-left\", \"left\"],\n                keypad: null,\n                keys: [],\n                keys_to_work: [],\n                exceptKeys: []\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n\n            this.keys = o.keys.toArray(o.keyDelimiter);\n            this.keys_to_work = this.keys;\n            this.exceptKeys = o.exceptKeys.toArray(o.keyDelimiter);\n\n            this._createKeypad();\n            if (o.shuffle === true) {\n                this.shuffle();\n            }\n            this._createKeys();\n            this._createEvents();\n\n            this._fireEvent(\"keypad-create\", {\n                element: element\n            });\n        },\n\n        _createKeypad: function(){\n            var element = this.element, o = this.options;\n            var parent = element.parent();\n            var keypad, keys;\n\n            if (parent.hasClass(\"input\")) {\n                keypad = parent;\n            } else {\n                keypad = $(\"<div>\").addClass(\"input\").addClass(element[0].className);\n            }\n\n            keypad.addClass(\"keypad\");\n            if (keypad.css(\"position\") === \"static\" || keypad.css(\"position\") === \"\") {\n                keypad.css({\n                    position: \"relative\"\n                });\n            }\n\n            if (element.attr(\"type\") === undefined) {\n                element.attr(\"type\", \"text\");\n            }\n\n            keypad.insertBefore(element);\n\n            element.attr(\"readonly\", true);\n            element.appendTo(keypad);\n\n            keys = $(\"<div>\").addClass(\"keys\").addClass(o.clsKeys);\n            keys.appendTo(keypad);\n            this._setKeysPosition();\n\n            if (o.open === true) {\n                keys.addClass(\"open keep-open\");\n            }\n\n\n            element[0].className = '';\n            if (o.copyInlineStyles === true) {\n                for (var i = 0, l = element[0].style.length; i < l; i++) {\n                    keypad.css(element[0].style[i], element.css(element[0].style[i]));\n                }\n            }\n\n            element.addClass(o.clsInput);\n            keypad.addClass(o.clsKeypad);\n\n            element.on(Metro.events.blur, function(){keypad.removeClass(\"focused\");});\n            element.on(Metro.events.focus, function(){keypad.addClass(\"focused\");});\n\n            if (o.label) {\n                var label = $(\"<label>\").addClass(\"label-for-input\").addClass(o.clsLabel).html(o.label).insertBefore(keypad);\n                if (element.attr(\"id\")) {\n                    label.attr(\"for\", element.attr(\"id\"));\n                }\n                if (element.attr(\"dir\") === \"rtl\") {\n                    label.addClass(\"rtl\");\n                }\n            }\n\n            if (o.disabled === true || element.is(\":disabled\")) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n\n            this.keypad = keypad;\n        },\n\n        _setKeysPosition: function(){\n            var element = this.element, o = this.options;\n            var keypad = element.parent();\n            var keys = keypad.find(\".keys\");\n            keys.removeClass(this.positions.join(\" \")).addClass(o.position)\n        },\n\n        _createKeys: function(){\n            var element = this.element, o = this.options;\n            var keypad = element.parent();\n            var key, keys = keypad.find(\".keys\");\n            var factor = Math.round(Math.sqrt(this.keys.length + 2));\n            var key_size = o.keySize;\n            var width;\n\n            keys.html(\"\");\n\n            $.each(this.keys_to_work, function(){\n                key = $(\"<span>\").addClass(\"key\").addClass(o.clsKey).html(this);\n                key.data(\"key\", this);\n                key.css({\n                    width: o.keySize,\n                    height: o.keySize,\n                    lineHeight: o.keySize - 4\n                }).appendTo(keys);\n            });\n\n            if (o.serviceButtons === true) {\n\n                var service_keys = ['&larr;', '&times;'];\n\n                $.each(service_keys, function () {\n                    key = $(\"<span>\").addClass(\"key service-key\").addClass(o.clsKey).addClass(o.clsServiceKey).html(this);\n                    if (this === '&larr;') {\n                        key.addClass(o.clsBackspace);\n                    }\n                    if (this === '&times;') {\n                        key.addClass(o.clsClear);\n                    }\n                    key.data(\"key\", this);\n                    key.css({\n                        width: o.keySize,\n                        height: o.keySize,\n                        lineHeight: o.keySize - 4\n                    }).appendTo(keys);\n                });\n            }\n\n            width = factor * (key_size + 2) - 6;\n            keys.outerWidth(width);\n\n            if (o.sizeAsKeys === true && ['top-left', 'top', 'top-right', 'bottom-left', 'bottom', 'bottom-right'].indexOf(o.position) !== -1) {\n                keypad.outerWidth(keys.outerWidth());\n            }\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var keypad = element.parent();\n            var keys = keypad.find(\".keys\");\n\n            keys.on(Metro.events.click, \".key\", function(e){\n                var key = $(this);\n                var keyValue = key.data(\"key\");\n                var crop;\n\n                if (key.data('key') !== '&larr;' && key.data('key') !== '&times;') {\n\n                    if (o.keyLength > 0 && (\"\"+that.value).length === o.keyLength) {\n                        return false;\n                    }\n\n                    if (that.exceptKeys.indexOf(keyValue) === -1)\n                        that.value = that.value + (that.value !== \"\" ? o.keySeparator : \"\") + keyValue;\n\n                    if (o.shuffle === true) {\n                        that.shuffle();\n                        that._createKeys();\n                    }\n\n                    if (o.dynamicPosition === true) {\n                        o.position = that.positions[$.random(0, that.positions.length - 1)];\n                        that._setKeysPosition();\n                    }\n\n                    that._fireEvent(\"key\", {\n                        key: key.data(\"key\"),\n                        val: that.value\n                    });\n\n                } else {\n                    if (key.data('key') === '&times;') {\n                        that.value = \"\";\n                        that._fireEvent(\"clear\");\n                    }\n                    if (key.data('key') === '&larr;') {\n                        crop = o.keySeparator && that.value[that.value.length - 1] !== o.keySeparator ? 2 : 1;\n                        that.value = (that.value.substring(0, that.value.length - crop));\n                        that._fireEvent(\"backspace\", {\n                            val: that.value\n                        });\n                    }\n                }\n\n                if (o.showValue === true) {\n                    if (element[0].tagName === \"INPUT\") {\n                        element.val(that.value);\n                    } else {\n                        element.text(that.value);\n                    }\n                }\n\n                that._fireEvent('change', {\n                    val: that.val\n                })\n                // element.trigger('change');\n                // Utils.exec(o.onChange, [that.value], element[0]);\n\n                e.preventDefault();\n                e.stopPropagation();\n            });\n\n            keypad.on(Metro.events.click, function(e){\n                if (o.open === true) {\n                    return ;\n                }\n\n                if (keys.hasClass(\"open\") === true) {\n                    keys.removeClass(\"open\");\n                } else {\n                    keys.addClass(\"open\");\n                }\n\n                e.preventDefault();\n                e.stopPropagation();\n            });\n\n            if (o.target !== null) {\n                element.on(Metro.events.change, function(){\n                    var t = $(o.target);\n                    if (t.length === 0) {\n                        return ;\n                    }\n                    if (t[0].tagName === \"INPUT\") {\n                        t.val(that.value);\n                    } else {\n                        t.text(that.value);\n                    }\n                });\n            }\n        },\n\n        shuffle: function(){\n            var o = this.options;\n            for (var i = 0; i < o.shuffleCount; i++) {\n                this.keys_to_work = this.keys_to_work.shuffle();\n            }\n\n            this._fireEvent(\"shuffle\", {\n                keysToWork: this.keys_to_work,\n                keys: this.keys\n            });\n        },\n\n        shuffleKeys: function(count){\n            if (count === undefined) {\n                count = this.options.shuffleCount;\n            }\n            for (var i = 0; i < count; i++) {\n                this.keys_to_work = this.keys_to_work.shuffle();\n            }\n            this._createKeys();\n        },\n\n        val: function(v){\n            var element = this.element, o = this.options;\n\n            if (typeof v === \"undefined\") {\n                return o.trimSeparator ? this.value.replace(new RegExp(o.keySeparator, \"g\")) : this.value;\n            }\n\n            this.value = \"\"+v;\n\n            if (element[0].tagName === \"INPUT\") {\n                element.val(v);\n                // set cursor to end position\n            } else {\n                element.text(v)\n            }\n\n            return this;\n        },\n\n        open: function(){\n            var element = this.element;\n            var keypad = element.parent();\n            var keys = keypad.find(\".keys\");\n\n            keys.addClass(\"open\");\n        },\n\n        close: function(){\n            var element = this.element;\n            var keypad = element.parent();\n            var keys = keypad.find(\".keys\");\n\n            keys.removeClass(\"open\");\n        },\n\n        disable: function(){\n            this.element.data(\"disabled\", true);\n            this.element.parent().addClass(\"disabled\");\n        },\n\n        enable: function(){\n            this.element.data(\"disabled\", false);\n            this.element.parent().removeClass(\"disabled\");\n        },\n\n        toggleState: function(){\n            if (this.elem.disabled) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        },\n\n        setPosition: function(pos){\n            var new_position = pos !== undefined ? pos : this.element.attr(\"data-position\");\n            if (this.positions.indexOf(new_position) === -1) {\n                return ;\n            }\n            this.options.position = new_position;\n            this._setKeysPosition();\n        },\n\n        changeAttribute: function(attributeName){\n            switch (attributeName) {\n                case 'disabled': this.toggleState(); break;\n                case 'data-position': this.setPosition(); break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element, keypad = this.keypad, keys = keypad.find(\".keys\");\n\n            keypad.off(Metro.events.click);\n            keys.off(Metro.events.click, \".key\");\n            element.off(Metro.events.change);\n\n            return element;\n        }\n    });\n\n    $(document).on(Metro.events.click, function(){\n        var keypads = $(\".keypad .keys\");\n        $.each(keypads, function(){\n            if (!$(this).hasClass(\"keep-open\")) {\n                $(this).removeClass(\"open\");\n            }\n        });\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n\n    var LightboxDefaultConfig = {\n        loop: true,\n        source: \"img\",\n\n        iconClose: \"<span class='default-icon-cross'>\",\n        iconPrev: \"<span class='default-icon-chevron-left'>\",\n        iconNext: \"<span class='default-icon-chevron-right'>\",\n\n        clsNext: \"\",\n        clsPrev: \"\",\n        clsClose: \"\",\n        clsImage: \"\",\n        clsImageContainer: \"\",\n        clsImageWrapper: \"\",\n        clsLightbox: \"\",\n\n        onDrawImage: Metro.noop,\n        onLightboxCreate: Metro.noop\n    };\n\n    Metro.lightboxSetup = function (options) {\n        LightboxDefaultConfig = $.extend({}, LightboxDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroLightboxSetup\"] !== undefined) {\n        Metro.lightboxSetup(window[\"metroLightboxSetup\"]);\n    }\n\n    Metro.Component('lightbox', {\n        init: function( options, elem ) {\n            this._super(elem, options, LightboxDefaultConfig, {\n                // define instance vars here\n                overlay: null,\n                lightbox: null,\n                current: null,\n                items: []\n            });\n            return this;\n        },\n\n        _create: function(){\n            var o = this.options;\n\n            if (!o.source) {\n                o.source = \"img\";\n            }\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent('lightbox-create');\n        },\n\n        _createStructure: function(){\n            var o = this.options;\n            var lightbox, overlay;\n\n            overlay = $(\".lightbox-overlay\");\n\n            if (overlay.length === 0) {\n                overlay = $(\"<div>\").addClass(\"lightbox-overlay\").appendTo(\"body\").hide();\n            }\n\n            lightbox = $(\"<div>\").addClass(\"lightbox\").addClass(o.clsLightbox).appendTo(\"body\").hide();\n\n            $(\"<span>\").addClass(\"lightbox__prev\").addClass(o.clsPrev).html(o.iconPrev).appendTo(lightbox);\n            $(\"<span>\").addClass(\"lightbox__next\").addClass(o.clsNext).html(o.iconNext).appendTo(lightbox);\n            $(\"<span>\").addClass(\"lightbox__closer\").addClass(o.clsClose).html(o.iconClose).appendTo(lightbox);\n            $(\"<div>\").addClass(\"lightbox__image\").addClass(o.clsImageContainer).appendTo(lightbox);\n\n            this.component = lightbox[0];\n            this.lightbox = lightbox;\n            this.overlay = overlay;\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var lightbox = $(this.component);\n\n            element.on(Metro.events.click, o.source, function(){\n                that.open(this);\n            });\n\n            lightbox.on(Metro.events.click, \".lightbox__closer\", function(){\n                that.close();\n            });\n\n            lightbox.on(Metro.events.click, \".lightbox__prev\", function(){\n                that.prev();\n            });\n\n            lightbox.on(Metro.events.click, \".lightbox__next\", function(){\n                that.next();\n            });\n        },\n\n        _setupItems: function(){\n            var element = this.element, o = this.options;\n            var items = element.find(o.source);\n\n            if (items.length === 0) {\n                return ;\n            }\n\n            this.items = items;\n        },\n\n        _goto: function(el){\n            var that = this, o = this.options;\n            var $el = $(el);\n            var img = $(\"<img>\"), src;\n            var imageContainer, imageWrapper, activity;\n\n            imageContainer = this.lightbox.find(\".lightbox__image\");\n\n            imageContainer.find(\".lightbox__image-wrapper\").remove();\n            imageWrapper = $(\"<div>\")\n                .addClass(\"lightbox__image-wrapper\")\n                .addClass(o.clsImageWrapper)\n                .attr(\"data-title\", ($el.attr(\"alt\") || $el.attr(\"data-title\") || \"\"))\n                .appendTo(imageContainer);\n\n            activity = $(\"<div>\").appendTo(imageWrapper);\n\n            Metro.makePlugin(activity, \"activity\", {\n                type: \"cycle\",\n                style: \"color\"\n            });\n\n            this.current = el;\n\n            if (el.tagName === \"IMG\" || el.tagName === \"DIV\") {\n                src = $el.attr(\"data-original\") || $el.attr(\"src\");\n                img.attr(\"src\", src);\n                img[0].onload = function(){\n                    var port = this.height > this.width;\n                    img.addClass(port ? \"lightbox__image-portrait\" : \"lightbox__image-landscape\").addClass(o.clsImage);\n                    img.attr(\"alt\", $el.attr(\"alt\"));\n                    img.appendTo(imageWrapper);\n                    activity.remove();\n                    that._fireEvent(\"draw-image\", {\n                        image: img[0],\n                        item: imageWrapper[0]\n                    });\n                }\n            }\n        },\n\n        _index: function(el){\n            var index = -1;\n\n            this.items.each(function(i){\n                if (this === el) {\n                    index = i;\n                }\n            });\n\n            return index;\n        },\n\n        next: function(){\n            var index, current = this.current;\n\n            index = this._index(current);\n\n            if (index + 1 >= this.items.length) {\n                if (this.options.loop) {\n                    index = -1;\n                } else {\n                    return;\n                }\n            }\n\n            this._goto(this.items[index + 1]);\n        },\n\n        prev: function(){\n            var index, current = this.current;\n\n            index = this._index(current);\n\n            if (index - 1 < 0) {\n                if (this.options.loop) {\n                    index = this.items.length;\n                } else {\n                    return;\n                }\n            }\n\n            this._goto(this.items[index - 1]);\n        },\n\n        open: function(el){\n            this._setupItems();\n\n            this._goto(el);\n\n            this.overlay.show();\n            this.lightbox.show();\n\n            return this;\n        },\n\n        close: function(){\n            this.overlay.hide();\n            this.lightbox.hide();\n        },\n\n        changeAttribute: function(){\n        },\n\n        destroy: function(){\n            this.element.remove();\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var ListDefaultConfig = {\n        locale: METRO_LOCALE,\n        listDeferred: 0,\n        templateBeginToken: \"<%\",\n        templateEndToken: \"%>\",\n        paginationDistance: 5,\n        paginationShortMode: true,\n        thousandSeparator: \",\",\n        decimalSeparator: \",\",\n        itemTag: \"li\",\n        defaultTemplateTag: \"div\",\n        sortClass: null,\n        sortDir: \"asc\",\n        sortInitial: true,\n        filterClass: null,\n        filter: null,\n        filterString: \"\",\n        filters: null,\n        source: null,\n        showItemsSteps: false,\n        showSearch: false,\n        showListInfo: false,\n        showPagination: false,\n        showActivity: true,\n        muteList: true,\n        items: -1,\n        itemsSteps: \"all, 10,25,50,100\",\n        itemsAllTitle: \"Show all\",\n        listItemsCountTitle: \"Show entries:\",\n        listSearchTitle: \"Search:\",\n        listInfoTitle: \"Showing $1 to $2 of $3 entries\",\n        paginationPrevTitle: \"Prev\",\n        paginationNextTitle: \"Next\",\n        activityType: \"cycle\",\n        activityStyle: \"color\",\n        activityTimeout: 100,\n        searchWrapper: null,\n        rowsWrapper: null,\n        infoWrapper: null,\n        paginationWrapper: null,\n        clsComponent: \"\",\n        clsList: \"\",\n        clsListItem: \"\",\n        clsListTop: \"\",\n        clsItemsCount: \"\",\n        clsSearch: \"\",\n        clsListBottom: \"\",\n        clsListInfo: \"\",\n        clsListPagination: \"\",\n        clsPagination: \"\",\n        clsTemplateTag: \"\",\n        onDraw: Metro.noop,\n        onDrawItem: Metro.noop,\n        onSortStart: Metro.noop,\n        onSortStop: Metro.noop,\n        onSortItemSwitch: Metro.noop,\n        onSearch: Metro.noop,\n        onRowsCountChange: Metro.noop,\n        onDataLoad: Metro.noop,\n        onDataLoaded: Metro.noop,\n        onDataLoadError: Metro.noop,\n        onFilterItemAccepted: Metro.noop,\n        onFilterItemDeclined: Metro.noop,\n        onListCreate: Metro.noop\n    };\n\n    Metro.listSetup = function (options) {\n        ListDefaultConfig = $.extend({}, ListDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroListSetup\"] !== undefined) {\n        Metro.listSetup(window[\"metroListSetup\"]);\n    }\n\n    Metro.Component('list', {\n        init: function( options, elem ) {\n            this._super(elem, options, ListDefaultConfig, {\n                currentPage: 1,\n                pagesCount: 1,\n                filterString: \"\",\n                data: null,\n                activity: null,\n                busy: false,\n                filters: [],\n                wrapperInfo: null,\n                wrapperSearch: null,\n                wrapperRows: null,\n                wrapperPagination: null,\n                filterIndex: null,\n                filtersIndexes: [],\n                itemTemplate: null,\n\n                sort: {\n                    dir: \"asc\",\n                    colIndex: 0\n                },\n\n                header: null,\n                items: []\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var that = this, o = this.options;\n\n            if (o.source) {\n                that._fireEvent(\"data-load\", {\n                    source: o.source\n                });\n\n                fetch(o.source)\n                    .then(Metro.fetch.status)\n                    .then(Metro.fetch.json)\n                    .then(function(data){\n                        that._fireEvent(\"data-loaded\", {\n                            source: o.source,\n                            data: data\n                        });\n                        that._build(data);\n                    })\n                    .catch(function(error){\n                        that._fireEvent(\"data-load-error\", {\n                            source: o.source,\n                            error: error\n                        });\n                    });\n\n            } else {\n                that._build();\n            }\n        },\n\n        _build: function(data){\n            if (Utils.isValue(data)) {\n                this._createItemsFromJSON(data);\n            } else {\n                this._createItemsFromHTML()\n            }\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"list-create\");\n        },\n\n        _createItemsFromHTML: function(){\n            var that = this, element = this.element, o = this.options;\n            var clsTemplateTag = (\"\"+o.clsTemplateTag).toArray(\",\")\n\n            this.items = [];\n\n            $.each(element.children(o.itemTag), function(){\n                var tagChildren = $(this).children(\"*\");\n\n                if (clsTemplateTag.length) {\n                    if (clsTemplateTag.length === 1) {\n                        tagChildren.addClass(clsTemplateTag[0]);\n                    } else {\n                        tagChildren.each(function (i, child) {\n                            $(child).addClass(clsTemplateTag[i] ? clsTemplateTag[i] : clsTemplateTag[clsTemplateTag.length - 1]);\n                        })\n                    }\n                }\n                that.items.push(this);\n            });\n        },\n\n        _createItemsFromJSON: function(source){\n            var that = this, o = this.options;\n            var clsTemplateTag = (\"\"+o.clsTemplateTag).toArray(\",\")\n\n            this.items = [];\n\n            if (Utils.isValue(source.template)) {\n                this.itemTemplate = source.template;\n            }\n\n            if (Utils.isValue(source.header)) {\n                this.header = source.header;\n            }\n\n            if (Utils.isValue(source.data)) {\n                $.each(source.data, function(){\n                    var item = '', row = this;\n                    var li = document.createElement(o.itemTag);\n                    var tpl = that.itemTemplate;\n                    var tagChildren;\n\n                    if (!Utils.isValue(tpl)) {\n                        for (var i in row) {\n                            item += \"<\"+o.defaultTemplateTag+\">\"+row[i]+\"</\"+o.defaultTemplateTag+\">\";\n                        }\n                    } else {\n                        item = Metro.template(tpl, row, {\n                            beginToken: o.templateBeginToken,\n                            endToken: o.templateEndToken\n                        });\n                    }\n\n                    li.innerHTML = item;\n                    tagChildren = $(li).children(\"*\");\n\n                    if (clsTemplateTag.length) {\n                        if (clsTemplateTag.length === 1) {\n                            tagChildren.addClass(clsTemplateTag[0]);\n                        } else {\n                            tagChildren.each(function (i, child) {\n                                $(child).addClass(clsTemplateTag[i] ? clsTemplateTag[i] : clsTemplateTag[clsTemplateTag.length - 1]);\n                            })\n                        }\n                    }\n\n                    that.items.push(li);\n                });\n            }\n        },\n\n        _createTopBlock: function (){\n            var that = this, element = this.element, o = this.options;\n            var top_block = $(\"<div>\").addClass(\"list-top\").addClass(o.clsListTop).insertBefore(element);\n            var search_block, search_input, rows_block, rows_select;\n\n            search_block = Utils.isValue(this.wrapperSearch) ? this.wrapperSearch : $(\"<div>\").addClass(\"list-search-block\").addClass(o.clsSearch).appendTo(top_block);\n\n            search_input = $(\"<input>\").attr(\"type\", \"text\").appendTo(search_block);\n            search_input.input({\n                prepend: o.listSearchTitle\n            });\n\n            if (o.showSearch !== true) {\n                search_block.hide();\n            }\n\n            rows_block = Utils.isValue(this.wrapperRows) ? this.wrapperRows : $(\"<div>\").addClass(\"list-rows-block\").addClass(o.clsItemsCount).appendTo(top_block);\n\n            rows_select = $(\"<select>\").appendTo(rows_block);\n            $.each(o.itemsSteps.toArray(), function () {\n                var option = $(\"<option>\").attr(\"value\", this === \"all\" ? -1 : this).text(this === \"all\" ? o.itemsAllTitle : this).appendTo(rows_select);\n                if (+this === +o.items) option.attr(\"selected\", \"selected\");\n            });\n            rows_select.select({\n                filter: false,\n                prepend: o.listItemsCountTitle,\n                onChange: function (val) {\n                    if (+val === +o.items) return;\n                    o.items = parseInt(val);\n                    that.currentPage = 1;\n                    that._draw();\n\n                    that._fireEvent(\"rows-count-change\", {\n                        val: val\n                    });\n                }\n            });\n\n            if (o.showItemsSteps !== true) {\n                rows_block.hide();\n            }\n\n            return top_block;\n        },\n\n        _createBottomBlock: function (){\n            var element = this.element, o = this.options;\n            var bottom_block = $(\"<div>\").addClass(\"list-bottom\").addClass(o.clsListBottom).insertAfter(element);\n            var info, pagination;\n\n            info = $(\"<div>\").addClass(\"list-info\").addClass(o.clsListInfo).appendTo(bottom_block);\n            if (o.showListInfo !== true) {\n                info.hide();\n            }\n\n            pagination = $(\"<div>\").addClass(\"list-pagination\").addClass(o.clsListPagination).appendTo(bottom_block);\n            if (o.showPagination !== true) {\n                pagination.hide();\n            }\n\n            return bottom_block;\n        },\n\n        _createStructure: function(){\n            var that = this, element = this.element, o = this.options;\n            var list_component;\n            var w_search = $(o.searchWrapper),\n                w_info = $(o.infoWrapper),\n                w_rows = $(o.rowsWrapper),\n                w_paging = $(o.paginationWrapper);\n\n            if (w_search.length > 0) {this.wrapperSearch = w_search;}\n            if (w_info.length > 0) {this.wrapperInfo = w_info;}\n            if (w_rows.length > 0) {this.wrapperRows = w_rows;}\n            if (w_paging.length > 0) {this.wrapperPagination = w_paging;}\n\n            if (!element.parent().hasClass(\"list-component\")) {\n                list_component = $(\"<div>\").addClass(\"list-component\").insertBefore(element);\n                element.appendTo(list_component);\n            } else {\n                list_component = element.parent();\n            }\n\n            list_component.addClass(o.clsComponent);\n\n            this.activity =  $(\"<div>\").addClass(\"list-progress\").appendTo(list_component);\n            $(\"<div>\").activity({\n                type: o.activityType,\n                style: o.activityStyle\n            }).appendTo(this.activity);\n\n            if (o.showActivity !== true) {\n                this.activity.css({\n                    visibility: \"hidden\"\n                })\n            }\n\n            // element.html(\"\").addClass(o.clsList);\n            element.addClass(o.clsList);\n\n            this._createTopBlock();\n            this._createBottomBlock();\n\n            if (Utils.isValue(o.filterString)) {\n                this.filterString = o.filterString;\n            }\n\n            var filter_func;\n\n            if (Utils.isValue(o.filter)) {\n                filter_func = Utils.isFunc(o.filter);\n                if (filter_func === false) {\n                    filter_func = Utils.func(o.filter);\n                }\n                that.filterIndex = that.addFilter(filter_func);\n            }\n\n            if (Utils.isValue(o.filters) && typeof o.filters === 'string') {\n                $.each(o.filters.toArray(), function(){\n                    filter_func = Utils.isFunc(this);\n                    if (filter_func !== false) {\n                        that.filtersIndexes.push(that.addFilter(filter_func));\n                    }\n                });\n            }\n\n            this.currentPage = 1;\n\n            if (o.sortInitial !== false)\n                this.sorting(o.sortClass, o.sortDir, true);\n            else\n                this.draw();\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element;\n            var component = element.parent();\n            var search = component.find(\".list-search-block input\");\n            var customSearch;\n\n            search.on(Metro.events.inputchange, function(){\n                that.filterString = this.value.trim().toLowerCase();\n                if (that.filterString[that.filterString.length - 1] === \":\") {\n                    return ;\n                }\n                that.currentPage = 1;\n                that._draw();\n            });\n\n            if (Utils.isValue(this.wrapperSearch)) {\n                customSearch = this.wrapperSearch.find(\"input\");\n                if (customSearch.length > 0) {\n                    customSearch.on(Metro.events.inputchange, function(){\n                        that.filterString = this.value.trim().toLowerCase();\n                        if (that.filterString[that.filterString.length - 1] === \":\") {\n                            return ;\n                        }\n                        that.currentPage = 1;\n                        that._draw();\n                    });\n                }\n            }\n\n            function pageLinkClick(l){\n                var link = $(l);\n                var item = link.parent();\n\n                if (item.hasClass(\"active\")) {\n                    return ;\n                }\n\n                if (item.hasClass(\"service\")) {\n                    if (link.data(\"page\") === \"prev\") {\n                        that.currentPage--;\n                        if (that.currentPage === 0) {\n                            that.currentPage = 1;\n                        }\n                    } else {\n                        that.currentPage++;\n                        if (that.currentPage > that.pagesCount) {\n                            that.currentPage = that.pagesCount;\n                        }\n                    }\n                } else {\n                    that.currentPage = link.data(\"page\");\n                }\n\n                that._draw();\n            }\n\n            component.on(Metro.events.click, \".pagination .page-link\", function(){\n                pageLinkClick(this)\n            });\n\n            if (Utils.isValue(this.wrapperPagination)) {\n                this.wrapperPagination.on(Metro.events.click, \".pagination .page-link\", function(){\n                    pageLinkClick(this)\n                });\n            }\n        },\n\n        _info: function(start, stop, length){\n            var element = this.element, o = this.options;\n            var component = element.parent();\n            var info = Utils.isValue(this.wrapperInfo) ? this.wrapperInfo : component.find(\".list-info\");\n            var text;\n\n            if (info.length === 0) {\n                return ;\n            }\n\n            if (stop > length) {\n                stop = length;\n            }\n\n            if (this.items.length === 0) {\n                start = stop = length = 0;\n            }\n\n            text = o.listInfoTitle;\n            text = text.replace(\"$1\", start);\n            text = text.replace(\"$2\", stop);\n            text = text.replace(\"$3\", length);\n            info.html(text);\n        },\n\n        _paging: function(length){\n            var element = this.element, o = this.options;\n            var component = element.parent();\n            this.pagesCount = Math.ceil(length / o.items); // \n            Metro.pagination({\n                length: length,\n                rows: o.items,\n                current: this.currentPage,\n                target: Utils.isValue(this.wrapperPagination) ? this.wrapperPagination : component.find(\".list-pagination\"),\n                claPagination: o.clsPagination,\n                prevTitle: o.paginationPrevTitle,\n                nextTitle: o.paginationNextTitle,\n                distance: o.paginationShortMode === true ? o.paginationDistance : 0\n            });\n        },\n\n        _filter: function(){\n            var that = this,\n                o = this.options,\n                items, i, data, inset, c1, result;\n\n            if (Utils.isValue(this.filterString) || this.filters.length > 0) {\n                items = this.items.filter(function(item){\n                    data = \"\";\n\n                    if (Utils.isValue(o.filterClass)) {\n                        inset = item.getElementsByClassName(o.filterClass);\n\n                        if (inset.length > 0) for (i = 0; i < inset.length; i++) {\n                            data += inset[i].textContent;\n                        }\n                    } else {\n                        data = item.textContent;\n                    }\n\n                    c1 = data.replace(/[\\n\\r]+|[\\s]{2,}/g, ' ').trim().toLowerCase();\n                    result = Utils.isValue(that.filterString) ? c1.indexOf(that.filterString) > -1 : true;\n\n                    if (result === true && that.filters.length > 0) {\n                        for (i = 0; i < that.filters.length; i++) {\n                            if (Utils.exec(that.filters[i], [item]) !== true) {\n                                result = false;\n                                break;\n                            }\n                        }\n                    }\n\n                    if (result) {\n\n                        that._fireEvent(\"filter-item-accepted\", {\n                            item: item\n                        });\n\n                    } else {\n\n                        that._fireEvent(\"filter-item-declined\", {\n                            item: item\n                        });\n\n                    }\n\n                    return result;\n                });\n\n                that._fireEvent(\"search\", {\n                    search: that.filterString,\n                    items: items\n                });\n\n            } else {\n                items = this.items;\n            }\n\n            return items;\n        },\n\n        _draw: function(cb){\n            var element = this.element, o = this.options;\n            var i;\n            var start = o.items === -1 ? 0 : o.items * (this.currentPage - 1),\n                stop = o.items === -1 ? this.items.length - 1 : start + o.items - 1;\n            var items;\n\n            items = this._filter();\n\n            element.children(o.itemTag).remove();\n\n            for (i = start; i <= stop; i++) {\n                if (Utils.isValue(items[i])) {\n                    $(items[i]).addClass(o.clsListItem).appendTo(element);\n                }\n\n                this._fireEvent(\"draw-item\", {\n                    item: items[i]\n                });\n\n            }\n\n            this._info(start + 1, stop + 1, items.length);\n            this._paging(items.length);\n\n            this.activity.hide();\n\n            this._fireEvent(\"draw\");\n\n            if (cb !== undefined) {\n                Utils.exec(cb, [element], element[0])\n            }\n        },\n\n        _getItemContent: function(item){\n            var o = this.options, $item = $(item);\n            var i, inset, data;\n            var format, formatMask = Utils.isValue($item.data(\"formatMask\")) ? $item.data(\"formatMask\") : null;\n\n            if (Utils.isValue(o.sortClass)) {\n                data = \"\";\n                inset = $(item).find(\".\"+o.sortClass);\n\n                if (inset.length > 0) for (i = 0; i < inset.length; i++) {\n                    data += inset[i].textContent;\n                }\n                format = inset.length > 0 ? inset[0].getAttribute(\"data-format\") : \"\";\n            } else {\n                data = item.textContent;\n                format = item.getAttribute(\"data-format\");\n            }\n\n            data = (\"\"+data).toLowerCase().replace(/[\\n\\r]+|[\\s]{2,}/g, ' ').trim();\n\n            if (Utils.isValue(format)) {\n\n                if (['number', 'int', 'integer', 'float', 'money'].indexOf(format) !== -1 && (o.thousandSeparator !== \",\" || o.decimalSeparator !== \".\" )) {\n                    data = Utils.parseNumber(data, o.thousandSeparator, o.decimalSeparator);\n                }\n\n                switch (format) {\n                    case \"date\": data = formatMask ? Datetime.from(data, formatMask, o.locale) : datetime(data); break;\n                    case \"number\": data = Number(data); break;\n                    case \"int\":\n                    case \"integer\": data = parseInt(data); break;\n                    case \"float\": data = parseFloat(data); break;\n                    case \"money\": data = Utils.parseMoney(data); break;\n                    case \"card\": data = Utils.parseCard(data); break;\n                    case \"phone\": data = Utils.parsePhone(data); break;\n                }\n            }\n\n            return data;\n        },\n\n        deleteItem: function(value){\n            var i, deleteIndexes = [], item;\n            var is_func = Utils.isFunc(value);\n\n            for (i = 0; i < this.items.length; i++) {\n                item = this.items[i];\n\n                if (is_func) {\n                    if (Utils.exec(value, [item])) {\n                        deleteIndexes.push(i);\n                    }\n                } else {\n                    if (item.textContent.includes(value)) {\n                        deleteIndexes.push(i);\n                    }\n                }\n            }\n\n            this.items = Utils.arrayDeleteByMultipleKeys(this.items, deleteIndexes);\n\n            return this;\n        },\n\n        draw: function(){\n            return this._draw();\n        },\n\n        sorting: function(source, dir, redraw){\n            var that = this, o = this.options;\n\n            if (Utils.isValue(source)) {\n                o.sortClass = source;\n            }\n            if (Utils.isValue(dir) && [\"asc\", \"desc\"].indexOf(dir) > -1) {\n                o.sortDir= dir;\n            }\n\n            this._fireEvent(\"sort-start\", {\n                items: this.items\n            });\n\n            this.items.sort(function(a, b){\n                var c1 = that._getItemContent(a);\n                var c2 = that._getItemContent(b);\n                var result = 0;\n\n                if (c1 < c2) {\n                    result = o.sortDir === \"asc\" ? -1 : 1;\n                }\n                if (c1 > c2) {\n                    result = o.sortDir === \"asc\" ? 1 : -1;\n                }\n\n                if (result !== 0) {\n\n                    that._fireEvent(\"sort-item-switch\", {\n                        a: a,\n                        b: b,\n                        result: result\n                    });\n                }\n\n                return result;\n            });\n\n            this._fireEvent(\"sort-stop\", {\n                items: this.items\n            })\n\n            if (redraw === true) {\n                this._draw();\n            }\n\n            return this;\n        },\n\n        filter: function(val){\n            this.filterString = val.trim().toLowerCase();\n            this.currentPage = 1;\n            this._draw();\n        },\n\n        setData: function(data){\n            var that = this, element = this.element, o = this.options;\n\n            if (Utils.isValue(data) !== true) {\n                return ;\n            }\n\n            that._createItemsFromJSON(data);\n\n            element.html(\"\");\n\n            if (Utils.isValue(o.filterString)) {\n                that.filterString = o.filterString;\n            }\n\n            var filter_func;\n\n            if (Utils.isValue(o.filter)) {\n                filter_func = Utils.isFunc(o.filter);\n                if (filter_func === false) {\n                    filter_func = Utils.func(o.filter);\n                }\n                that.filterIndex = that.addFilter(filter_func);\n            }\n\n            if (Utils.isValue(o.filters) && typeof o.filters === 'string') {\n                $.each(o.filters.toArray(), function(){\n                    filter_func = Utils.isFunc(this);\n                    if (filter_func !== false) {\n                        that.filtersIndexes.push(that.addFilter(filter_func));\n                    }\n                });\n            }\n\n            that.currentPage = 1;\n\n            that.sorting(o.sortClass, o.sortDir, true);\n        },\n\n        loadData: function(source){\n            var that = this, o = this.options;\n\n            if (Utils.isValue(source) !== true) {\n                return ;\n            }\n\n            o.source = source;\n\n            this._fireEvent(\"data-load\", {\n                source: o.source\n            });\n\n            fetch(o.source)\n                .then(Metro.fetch.status)\n                .then(Metro.fetch.json)\n                .then(function(data){\n                    that._fireEvent(\"data-loaded\", {\n                        source: o.source,\n                        data: data\n                    });\n                    that.setData(data)\n                })\n                .catch(function(error){\n                    that._fireEvent(\"data-load-error\", {\n                        source: o.source,\n                        error: error\n                    });\n                });\n\n        },\n\n        next: function(){\n            if (this.items.length === 0) return ;\n            this.currentPage++;\n            if (this.currentPage > this.pagesCount) {\n                this.currentPage = this.pagesCount;\n                return ;\n            }\n            this._draw();\n        },\n\n        prev: function(){\n            if (this.items.length === 0) return ;\n            this.currentPage--;\n            if (this.currentPage === 0) {\n                this.currentPage = 1;\n                return ;\n            }\n            this._draw();\n        },\n\n        first: function(){\n            if (this.items.length === 0) return ;\n            this.currentPage = 1;\n            this._draw();\n        },\n\n        last: function(){\n            if (this.items.length === 0) return ;\n            this.currentPage = this.pagesCount;\n            this._draw();\n        },\n\n        page: function(num){\n            if (num <= 0) {\n                num = 1;\n            }\n\n            if (num > this.pagesCount) {\n                num = this.pagesCount;\n            }\n\n            this.currentPage = num;\n            this._draw();\n        },\n\n        addFilter: function(f, redraw){\n            var func = Utils.isFunc(f);\n            if (func === false) {\n                return ;\n            }\n            this.filters.push(func);\n\n            if (redraw === true) {\n                this.currentPage = 1;\n                this.draw();\n            }\n\n            return this.filters.length - 1;\n        },\n\n        removeFilter: function(key, redraw){\n            Utils.arrayDeleteByKey(this.filters, key);\n            if (redraw === true) {\n                this.currentPage = 1;\n                this.draw();\n            }\n            return this;\n        },\n\n        removeFilters: function(redraw){\n            this.filters = [];\n            if (redraw === true) {\n                this.currentPage = 1;\n                this.draw();\n            }\n        },\n\n        getFilters: function(){\n            return this.filters;\n        },\n\n        getFilterIndex: function(){\n            return this.filterIndex;\n        },\n\n        getFiltersIndexes: function(){\n            return this.filtersIndexes;\n        },\n\n        changeAttribute: function(attributeName){\n            var that = this, element = this.element, o = this.options;\n\n            var changeSortDir = function(){\n                var dir = element.attr(\"data-sort-dir\");\n                if (!Utils.isValue(dir)) {\n                    return ;\n                }\n                o.sortDir = dir;\n                that.sorting(o.sortClass, o.sortDir, true);\n            };\n\n            var changeSortClass = function(){\n                var target = element.attr(\"data-sort-source\");\n                if (!Utils.isValue(target)) {\n                    return ;\n                }\n                o.sortClass = target;\n                that.sorting(o.sortClass, o.sortDir, true);\n            };\n\n            var changeFilterString = function(){\n                var filter = element.attr(\"data-filter-string\");\n                if (!Utils.isValue(filter)) {\n                    return ;\n                }\n                o.filterString = filter;\n                that.filter(o.filterString);\n            };\n\n            switch (attributeName) {\n                case \"data-sort-dir\": changeSortDir(); break;\n                case \"data-sort-source\": changeSortClass(); break;\n                case \"data-filter-string\": changeFilterString(); break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element;\n            var component = element.parent();\n            var search = component.find(\".list-search-block input\");\n            var customSearch;\n\n            search.off(Metro.events.inputchange);\n            if (Utils.isValue(this.wrapperSearch)) {\n                customSearch = this.wrapperSearch.find(\"input\");\n                if (customSearch.length > 0) {\n                    customSearch.off(Metro.events.inputchange);\n                }\n            }\n\n            component.off(Metro.events.click, \".pagination .page-link\");\n\n            if (Utils.isValue(this.wrapperPagination)) {\n                this.wrapperPagination.off(Metro.events.click, \".pagination .page-link\");\n            }\n\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var ListViewDefaultConfig = {\n        listviewDeferred: 0,\n        selectable: false,\n        checkStyle: 1,\n        duration: 100,\n        view: Metro.listView.LIST,\n        selectCurrent: true,\n        structure: {},\n        onNodeInsert: Metro.noop,\n        onNodeDelete: Metro.noop,\n        onNodeClean: Metro.noop,\n        onCollapseNode: Metro.noop,\n        onExpandNode: Metro.noop,\n        onGroupNodeClick: Metro.noop,\n        onNodeClick: Metro.noop,\n        onNodeDblclick: Metro.noop,\n        onListViewCreate: Metro.noop\n    };\n\n    Metro.listViewSetup = function (options) {\n        ListViewDefaultConfig = $.extend({}, ListViewDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroListViewSetup\"] !== undefined) {\n        Metro.listViewSetup(window[\"metroListViewSetup\"]);\n    }\n\n    Metro.Component('listview', {\n        init: function( options, elem ) {\n            this._super(elem, options, ListViewDefaultConfig);\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this._createView();\n            this._createEvents();\n\n            this._fireEvent(\"listview-create\", {\n                element: element\n            });\n        },\n\n        _createIcon: function(data){\n            var icon, src;\n\n            src = Utils.isTag(data) ? $(data) : $(\"<img>\").attr(\"src\", data);\n            icon = $(\"<span>\").addClass(\"icon\");\n            icon.html(src.outerHTML());\n\n            return icon;\n        },\n\n        _createCaption: function(data){\n            return $(\"<div>\").addClass(\"caption\").html(data);\n        },\n\n        _createContent: function(data){\n            return $(\"<div>\").addClass(\"content\").html(data);\n        },\n\n        _createToggle: function(){\n            return $(\"<span>\").addClass(\"node-toggle\");\n        },\n\n        _createNode: function(data){\n            var that = this, o = this.options;\n            var node;\n\n            node = $(\"<li>\");\n\n            if (data.caption !== undefined || data.content !== undefined ) {\n                var d = $(\"<div>\").addClass(\"data\");\n                node.prepend(d);\n                if (data.caption !== undefined) d.append(that._createCaption(data.caption));\n                if (data.content !== undefined) d.append(that._createContent(data.content));\n            }\n\n            if (data.icon !== undefined) {\n                node.prepend(this._createIcon(data.icon));\n            }\n\n            if (Utils.objectLength(o.structure) > 0) $.each(o.structure, function(key, val){\n                if (data[key] !== undefined) {\n                    $(\"<div>\").addClass(\"node-data item-data-\"+key).addClass(data[val]).html(data[key]).appendTo(node);\n                }\n            });\n\n            return node;\n        },\n\n        _createView: function(){\n            var that = this, element = this.element, o = this.options;\n            var nodes = element.find(\"li\");\n            var struct_length = Utils.objectLength(o.structure);\n\n            element.addClass(\"listview\");\n            element.find(\"ul\").addClass(\"listview\");\n\n            $.each(nodes, function(){\n                var node = $(this);\n\n                if (node.data(\"caption\") !== undefined || node.data(\"content\") !== undefined) {\n                    var data = $(\"<div>\").addClass(\"data\");\n                    node.prepend(data);\n                    if (node.data(\"caption\") !== undefined) data.append(that._createCaption(node.data(\"caption\")));\n                    if (node.data(\"content\") !== undefined) data.append(that._createContent(node.data(\"content\")));\n                }\n\n                if (node.data('icon') !== undefined) {\n                    node.prepend(that._createIcon(node.data('icon')));\n                }\n\n                if (node.children(\"ul\").length > 0) {\n                    node.addClass(\"node-group\");\n                    node.append(that._createToggle());\n                    if (node.data(\"collapsed\") !== true) node.addClass(\"expanded\");\n                } else {\n                    node.addClass(\"node\");\n                }\n\n                if (node.hasClass(\"node\")) {\n                    var cb = $(\"<input type='checkbox' data-role='checkbox' data-style='\"+o.checkStyle+\"'>\");\n                    cb.data(\"node\", node);\n                    node.prepend(cb);\n                }\n\n                if (struct_length > 0) $.each(o.structure, function(key){\n                    if (node.data(key) !== undefined) {\n                        $(\"<div>\").addClass(\"node-data item-data-\"+key).addClass(node.data(key)).html(node.data(key)).appendTo(node);\n                    }\n                });\n            });\n\n            this.toggleSelectable();\n\n            this.view(o.view);\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n\n            element.on(Metro.events.dblclick, \".node\", function(){\n                var node = $(this);\n                that._fireEvent(\"node-dblclick\", {\n                    node: node\n                });\n            });\n\n            element.on(Metro.events.click, \".node\", function(){\n                var node = $(this);\n                element.find(\".node\").removeClass(\"current\");\n                node.toggleClass(\"current\");\n                if (o.selectCurrent === true) {\n                    element.find(\".node\").removeClass(\"current-select\");\n                    node.toggleClass(\"current-select\");\n                }\n                that._fireEvent(\"node-click\", {\n                    node: node\n                });\n            });\n\n            element.on(Metro.events.click, \".node-toggle\", function(){\n                var node = $(this).closest(\"li\");\n                that.toggleNode(node);\n            });\n\n            element.on(Metro.events.click, \".node-group > .data > .caption\", function(){\n                var node = $(this).closest(\"li\");\n                element.find(\".node-group\").removeClass(\"current-group\");\n                node.addClass(\"current-group\");\n\n                that._fireEvent(\"group-node-click\", {\n                    node: node\n                });\n\n            });\n\n            element.on(Metro.events.dblclick, \".node-group > .data > .caption\", function(){\n                var node = $(this).closest(\"li\");\n                that.toggleNode(node);\n\n                that._fireEvent(\"node-dbl-click\", {\n                    node: node\n                });\n            });\n        },\n\n        view: function(v){\n            var element = this.element, o = this.options;\n\n            if (v === undefined) {\n                return o.view;\n            }\n\n            o.view = v;\n\n            $.each(Metro.listView, function(i, v){\n                element.removeClass(\"view-\"+v);\n                element.find(\"ul\").removeClass(\"view-\"+v);\n            });\n\n            element.addClass(\"view-\" + o.view);\n            element.find(\"ul\").addClass(\"view-\" + o.view);\n        },\n\n        toggleNode: function(node){\n            var o = this.options;\n            var func;\n\n            node=$(node);\n\n            if (!node.hasClass(\"node-group\")) {\n                return ;\n            }\n\n            node.toggleClass(\"expanded\");\n\n            func = node.hasClass(\"expanded\") !== true ? \"slideUp\" : \"slideDown\";\n\n            this._fireEvent(\"collapse-node\", {\n                node: node\n            });\n\n            node.children(\"ul\")[func](o.duration);\n        },\n\n        toggleSelectable: function(){\n            var element = this.element, o = this.options;\n            var func = o.selectable === true ? \"addClass\" : \"removeClass\";\n            element[func](\"selectable\");\n            element.find(\"ul\")[func](\"selectable\");\n        },\n\n        add: function(node, data){\n            var element = this.element, o = this.options;\n            var target;\n            var new_node;\n            var toggle;\n\n            if (node === null) {\n                target = element;\n            } else {\n\n                node=$(node);\n\n                if (!node.hasClass(\"node-group\")) {\n                    return ;\n                }\n\n                target = node.children(\"ul\");\n                if (target.length === 0) {\n                    target = $(\"<ul>\").addClass(\"listview\").addClass(\"view-\"+o.view).appendTo(node);\n                    toggle = this._createToggle();\n                    toggle.appendTo(node);\n                    node.addClass(\"expanded\");\n                }\n            }\n\n            new_node = this._createNode(data);\n\n            new_node.addClass(\"node\").appendTo(target);\n\n            var cb = $(\"<input type='checkbox'>\");\n            cb.data(\"node\", new_node);\n            new_node.prepend(cb);\n            Metro.makePlugin(cb, \"checkbox\", {});\n\n            this._fireEvent(\"node-insert\", {\n                newNode: new_node,\n                parentNode: node,\n                list: target\n            });\n\n            return new_node;\n        },\n\n        addGroup: function(data){\n            var element = this.element, o = this.options;\n            var node;\n\n            delete data['icon'];\n\n            node = this._createNode(data);\n            node.addClass(\"node-group\").appendTo(element);\n            node.append(this._createToggle());\n            node.addClass(\"expanded\");\n            node.append($(\"<ul>\").addClass(\"listview\").addClass(\"view-\"+o.view));\n\n            this._fireEvent(\"node-insert\", {\n                newNode: node,\n                parentNode: null,\n                list: element\n            })\n\n            return node;\n        },\n\n        insertBefore: function(node, data){\n            var new_node, parent_node, list;\n\n            node=$(node);\n\n            if (!node.length) {return;}\n\n            new_node = this._createNode(data);\n            new_node.addClass(\"node\").insertBefore(node);\n            parent_node = new_node.closest(\".node\");\n            list = new_node.closest(\"ul\");\n\n            this._fireEvent(\"node-insert\", {\n                newNode: new_node,\n                parentNode: parent_node,\n                list: list\n            });\n\n            return new_node;\n        },\n\n        insertAfter: function(node, data){\n            var new_node, parent_node, list;\n\n            node=$(node);\n\n            if (!node.length) {return;}\n\n            new_node = this._createNode(data);\n            new_node.addClass(\"node\").insertAfter(node);\n            parent_node = new_node.closest(\".node\");\n            list = new_node.closest(\"ul\");\n\n            this._fireEvent(\"node-insert\", {\n                newNode: new_node,\n                parentNode: parent_node,\n                list: list\n            });\n\n            return new_node;\n        },\n\n        del: function(node){\n            var element = this.element;\n\n            node=$(node);\n\n            if (!node.length) {return;}\n\n            var parent_list = node.closest(\"ul\");\n            var parent_node = parent_list.closest(\"li\");\n            node.remove();\n            if (parent_list.children().length === 0 && !parent_list.is(element)) {\n                parent_list.remove();\n                parent_node.removeClass(\"expanded\");\n                parent_node.children(\".node-toggle\").remove();\n            }\n\n            this._fireEvent(\"node-delete\", {\n                node: node\n            });\n        },\n\n        clean: function(node){\n            node=$(node);\n\n            if (!node.length) {return;}\n\n            node.children(\"ul\").remove();\n            node.removeClass(\"expanded\");\n            node.children(\".node-toggle\").remove();\n\n            this._fireEvent(\"node-clean\", {\n                node: node\n            });\n        },\n\n        getSelected: function(){\n            var element = this.element;\n            var nodes = [];\n\n            $.each(element.find(\":checked\"), function(){\n                var check = $(this);\n                nodes.push(check.closest(\".node\")[0])\n            });\n\n            return nodes;\n        },\n\n        clearSelected: function(){\n            this.element.find(\":checked\").prop(\"checked\", false);\n            this.element.trigger('change');\n        },\n\n        selectAll: function(mode){\n            this.element.find(\".node > .checkbox input\").prop(\"checked\", mode !== false);\n            this.element.trigger('change');\n        },\n\n        selectByAttribute: function(attributeName, attributeValue, select) {\n            if (select !== false) {\n                select = true;\n            }\n            this.element.find('li[' + attributeName + '=\"' + attributeValue + '\"]' + ' > .checkbox input').prop(\"checked\", select);\n            this.element.trigger('change');\n        },\n\n        changeAttribute: function(attributeName){\n            var that = this, element = this.element, o = this.options;\n\n            var changeView = function(){\n                var new_view = \"view-\"+element.attr(\"data-view\");\n                that.view(new_view);\n            };\n\n            var changeSelectable = function(){\n                o.selectable = JSON.parse(element.attr(\"data-selectable\")) === true;\n                that.toggleSelectable();\n            };\n\n            switch (attributeName) {\n                case \"data-view\": changeView(); break;\n                case \"data-selectable\": changeSelectable(); break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element;\n\n            element.off(Metro.events.click, \".node\");\n            element.off(Metro.events.click, \".node-toggle\");\n            element.off(Metro.events.click, \".node-group > .data > .caption\");\n            element.off(Metro.events.dblclick, \".node-group > .data > .caption\");\n\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n\n    var MarqueeDefaultConfig = {\n        items: null,\n        backgroundColor: \"#fff\",\n        color: \"#000\",\n        borderSize: 0,\n        borderColor: \"transparent\",\n        loop: true,\n        height: \"auto\",\n        width: \"auto\",\n        duration: 10000,\n        direction: \"left\",\n        ease: \"linear\",\n        mode: \"default\", // default || accent\n        accentPause: 2000,\n        firstPause: 1000,\n        stopOnHover: false,\n\n        clsMarquee: \"\",\n        clsMarqueeItem: \"\",\n\n        onMarqueeItem: Metro.noop,\n        onMarqueeItemComplete: Metro.noop,\n        onMarqueeComplete: Metro.noop,\n        onMarqueeCreate: Metro.noop\n    };\n\n    Metro.marqueeSetup = function (options) {\n        MarqueeDefaultConfig = $.extend({}, MarqueeDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroMarqueeSetup\"] !== undefined) {\n        Metro.marqueeSetup(window[\"metroMarqueeSetup\"]);\n    }\n\n    Metro.Component('marquee', {\n        init: function( options, elem ) {\n            this._super(elem, options, MarqueeDefaultConfig, {\n                // define instance vars here\n                items: [],\n                running: false,\n                current: -1\n            });\n            return this;\n        },\n\n        _create: function(){\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent('marquee-create');\n        },\n\n        _createStructure: function(){\n            var element = this.element, o = this.options;\n\n            element.addClass(\"marquee\").addClass(o.clsMarquee);\n\n            element.css({\n                height: o.height,\n                width: o.width,\n                backgroundColor: Metro.colors.isColor(o.backgroundColor) ? o.backgroundColor : MarqueeDefaultConfig.backgroundColor,\n                color: Metro.colors.isColor(o.color) ? o.color : MarqueeDefaultConfig.color,\n                borderStyle: \"solid\",\n                borderWidth: o.borderSize,\n                borderColor: Metro.colors.isColor(o.borderColor) ? o.borderColor : MarqueeDefaultConfig.borderColor\n            });\n\n            this.setItems(o.items);\n\n            if (this.items.length) {\n                this.current = 0;\n            }\n\n            if (this.items.length) this.start();\n        },\n\n        setItems: function(items, replace){\n            var element = this.element, o = this.options;\n            var dir = o.direction.toLowerCase(), h;\n\n            items = Metro.utils.isObject(items);\n\n            if (items && replace) {\n                element.clear();\n            }\n\n            if (items !== false) {\n                $.each(items, function(){\n                    var el = $(this);\n\n                    if (el.length)\n                        el.appendTo(element);\n                    else\n                        element.append( $(\"<div>\").html(this) );\n                })\n            }\n\n            this.items = element.children(\"*\").addClass(\"marquee__item\").addClass(o.clsMarqueeItem).items();\n\n            if (dir === \"left\" || dir === \"right\") {\n                $(this.items).addClass(\"moveLeftRight\");\n            } else {\n                $(this.items).addClass(\"moveUpDown\");\n            }\n\n            if (o.height === \"auto\") {\n                h = 0;\n                $(this.items).each(function(){\n                    if ( +$(this).outerHeight(true) > h) {\n                        h = +$(this).outerHeight(true);\n                    }\n                });\n                element.height(h);\n            }\n            return this\n        },\n\n\n        setItem: function(index, value){\n            var target = $(this.items[index]), h, o = this.options, element = this.element;\n\n            if (!target.length) {\n                return;\n            }\n\n            target.html(value)\n\n            if (o.height === \"auto\") {\n                h = 0;\n                $(this.items).each(function(){\n                    if ( +$(this).outerHeight(true) > h) {\n                        h = +$(this).outerHeight(true);\n                    }\n                });\n                element.height(h);\n            }\n            return this\n        },\n\n        addItem: function(item, index){\n            var element = this.element;\n            var ins, $item = $(item), trg;\n\n            ins = $item.length ? $item : $(\"<div>\").html(item);\n\n            if (Metro.utils.isNull(index)) {\n                element.append(ins);\n            } else {\n                trg = this.items[index]\n                if (trg) {\n                    ins.insertBefore(trg);\n                } else {\n                    element.append(ins);\n                }\n            }\n            return this\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n\n            element.on(Metro.events.enter, function(){\n                if (o.stopOnHover)\n                    $.pauseAll(that.items);\n            })\n\n            element.on(Metro.events.leave, function(){\n                if (o.stopOnHover)\n                    $.resumeAll(that.items);\n            })\n        },\n\n        start: function(){\n            var element = this.element, o = this.options;\n            var chain = [], dir = o.direction.toLowerCase(), mode = o.mode.toLowerCase();\n            var magic = 20;\n            var ease = o.ease.toArray(\",\");\n            var dur = +o.duration;\n\n            if (mode === \"default\") {\n                $.each(this.items, function (i) {\n                    var el = $(this);\n                    var draw;\n\n                    if (el.attr(\"data-direction\")) {\n                        dir = el.attr(\"data-direction\").toLowerCase();\n                    }\n\n                    if (el.attr(\"data-duration\")) {\n                        dur = +el.attr(\"data-duration\");\n                    }\n\n                    if ([\"left\", \"right\"].indexOf(dir) > -1) {\n                        draw = {\n                            left: dir === \"left\" ? [element.width(), -$(this).width() - magic] : [-$(this).width() - magic, element.width()]\n                        }\n                    } else {\n                        draw = {\n                            top: dir === \"up\" ? [element.height(), -$(this).height() - magic] : [-$(this).height() - magic, element.height()]\n                        }\n                    }\n\n                    chain.push({\n                        el: this,\n                        draw: draw,\n                        dur: dur,\n                        ease: \"linear\",\n                        defer: i === 0 ? +o.firstPause : 0\n                    });\n                });\n            } else {\n                $.each(this.items, function(i){\n                    var el = $(this);\n                    var half, draw1, draw2;\n                    dur = o.duration / 2;\n\n                    if (el.attr(\"data-direction\")) {\n                        dir = el.attr(\"data-direction\").toLowerCase();\n                    }\n\n                    if (el.attr(\"data-duration\")) {\n                        dur = +el.attr(\"data-duration\") / 2;\n                    }\n\n                    if (el.attr(\"data-ease\")) {\n                        ease = el.attr(\"data-ease\").toArray(\",\");\n                    }\n\n                    if ([\"left\", \"right\"].indexOf(dir) > -1) {\n                        half = element.width() / 2 - $(this).width() / 2;\n                        draw1 = {\n                            left: dir === \"left\" ? [element.width(), half] : [-$(this).width() - magic, half]\n                        }\n                        draw2 = {\n                            left: dir === \"left\" ? [half, -$(this).width() - magic] : [half, element.width() + magic]\n                        }\n                    } else {\n                        half = element.height() / 2 - $(this).height() / 2;\n                        draw1 = {\n                            top: dir === \"up\" ? [element.height(), half] : [-$(this).height() - magic, half]\n                        }\n                        draw2 = {\n                            top: dir === \"up\" ? [half, -$(this).height() - magic] : [half, element.height() + magic]\n                        }\n                    }\n\n                    chain.push({\n                        el: this,\n                        draw: draw1,\n                        dur: dur,\n                        ease: ease[0] || \"linear\",\n                        defer: i === 0 ? +o.firstPause : 0\n                    });\n                    chain.push({\n                        el: this,\n                        draw: draw2,\n                        dur: dur,\n                        ease: ease[1] ? ease[1] : ease[0] ? ease[0] : \"linear\",\n                        defer: +o.accentPause\n                    });\n                });\n            }\n\n            this.running = true;\n\n            $.chain(chain, {\n                loop: o.loop,\n                onChainItem: Metro.utils.isFunc(o.onMarqueeItem),\n                onChainItemComplete: Metro.utils.isFunc(o.onMarqueeItemComplete),\n                onChainComplete: Metro.utils.isFunc(o.onMarqueeComplete)\n            });\n            return this\n        },\n\n        stop: function(){\n            this.running = false;\n            $.stopAll(this.items);\n            return this\n        },\n\n        changeAttribute: function(){\n        },\n\n        destroy: function(){\n            this.element.remove();\n        }\n    });\n}(Metro, m4q));\n\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var MasterDefaultConfig = {\n        masterDeferred: 0,\n        effect: \"slide\", // slide, fade, switch, slowdown, custom\n        effectFunc: \"linear\",\n        duration: METRO_ANIMATION_DURATION,\n\n        controlPrev: \"<span class='default-icon-left-arrow'></span>\",\n        controlNext: \"<span class='default-icon-right-arrow'></span>\",\n        controlTitle: \"Master, page $1 of $2\",\n        backgroundImage: \"\",\n\n        clsMaster: \"\",\n        clsControls: \"\",\n        clsControlPrev: \"\",\n        clsControlNext: \"\",\n        clsControlTitle: \"\",\n        clsPages: \"\",\n        clsPage: \"\",\n\n        onBeforePage: Metro.noop_true,\n        onBeforeNext: Metro.noop_true,\n        onBeforePrev: Metro.noop_true,\n        onNextPage: Metro.noop,\n        onPrevPage: Metro.noop,\n        onMasterCreate: Metro.noop\n    };\n\n    Metro.masterSetup = function (options) {\n        MasterDefaultConfig = $.extend({}, MasterDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroMasterSetup\"] !== undefined) {\n        Metro.masterSetup(window[\"metroMasterSetup\"]);\n    }\n\n    Metro.Component('master', {\n        init: function( options, elem ) {\n            this._super(elem, options, MasterDefaultConfig, {\n                pages: [],\n                currentIndex: 0,\n                isAnimate: false,\n                id: Utils.elementId(\"master\")\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n\n            element.addClass(\"master\").addClass(o.clsMaster);\n            element.css({\n                backgroundImage: \"url(\"+o.backgroundImage+\")\"\n            });\n\n            this._createControls();\n            this._createPages();\n            this._createEvents();\n\n            this._fireEvent(\"master-create\", {\n                element: element\n            });\n        },\n\n        _createControls: function(){\n            var element = this.element, o = this.options;\n            var controls_position = ['top', 'bottom'];\n            var controls, title, pages = element.find(\".page\");\n\n            title = String(o.controlTitle).replace(\"$1\", \"1\");\n            title = String(title).replace(\"$2\", pages.length);\n\n            $.each(controls_position, function(){\n                controls = $(\"<div>\").addClass(\"controls controls-\"+this).addClass(o.clsControls).appendTo(element);\n                $(\"<span>\").addClass(\"prev\").addClass(o.clsControlPrev).html(o.controlPrev).appendTo(controls);\n                $(\"<span>\").addClass(\"next\").addClass(o.clsControlNext).html(o.controlNext).appendTo(controls);\n                $(\"<span>\").addClass(\"title\").addClass(o.clsControlTitle).html(title).appendTo(controls);\n            });\n\n            this._enableControl(\"prev\", false);\n        },\n\n        _enableControl: function(type, state){\n            var control = this.element.find(\".controls .\" + type);\n            if (state === true) {\n                control.removeClass(\"disabled\");\n            } else {\n                control.addClass(\"disabled\");\n            }\n        },\n\n        _setTitle: function(){\n            var title = this.element.find(\".controls .title\");\n\n            var title_str = this.options.controlTitle.replace(\"$1\", this.currentIndex + 1);\n            title_str = title_str.replace(\"$2\", String(this.pages.length));\n\n            title.html(title_str);\n        },\n\n        _createPages: function(){\n            var that = this, element = this.element, o = this.options;\n            var pages = element.find(\".pages\");\n            var page = element.find(\".page\");\n\n            if (pages.length === 0) {\n                pages = $(\"<div>\").addClass(\"pages\").appendTo(element);\n            }\n\n            pages.addClass(o.clsPages);\n\n            $.each(page, function(){\n                var p = $(this);\n                if (p.data(\"cover\") !== undefined) {\n                    element.css({\n                        backgroundImage: \"url(\"+p.data('cover')+\")\"\n                    });\n                } else {\n                    element.css({\n                        backgroundImage: \"url(\"+o.backgroundImage+\")\"\n                    });\n                }\n\n                p.css({\n                    left: \"100%\"\n                });\n\n                p.addClass(o.clsPage).hide(0);\n\n                that.pages.push(p);\n            });\n\n            page.appendTo(pages);\n\n            this.currentIndex = 0;\n            if (this.pages[this.currentIndex] !== undefined) {\n                if (this.pages[this.currentIndex].data(\"cover\") !== undefined ) {\n                    element.css({\n                        backgroundImage: \"url(\"+this.pages[this.currentIndex].data('cover')+\")\"\n                    });\n                }\n                this.pages[this.currentIndex].css(\"left\", \"0\").show(0);\n                setTimeout(function(){\n                    pages.css({\n                        height: that.pages[0].outerHeight(true) + 2\n                    });\n                }, 0);\n            }\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n\n            element.on(Metro.events.click, \".controls .prev\", function(){\n                if (that.isAnimate === true) {\n                    return ;\n                }\n                if (\n                    Utils.exec(o.onBeforePrev, [that.currentIndex, that.pages[that.currentIndex], element]) === true &&\n                    Utils.exec(o.onBeforePage, [\"prev\", that.currentIndex, that.pages[that.currentIndex], element]) === true\n                ) {\n                    that.prev();\n                }\n            });\n\n            element.on(Metro.events.click, \".controls .next\", function(){\n                if (that.isAnimate === true) {\n                    return ;\n                }\n                if (\n                    Utils.exec(o.onBeforeNext, [that.currentIndex, that.pages[that.currentIndex], element]) === true &&\n                    Utils.exec(o.onBeforePage, [\"next\", that.currentIndex, that.pages[that.currentIndex], element]) === true\n                ) {\n                    that.next();\n                }\n            });\n\n            $(window).on(Metro.events.resize, function(){\n                element.find(\".pages\").height(that.pages[that.currentIndex].outerHeight(true) + 2);\n            }, {ns: this.id});\n        },\n\n        _slideToPage: function(index){\n            var current, next, to;\n\n            if (this.pages[index] === undefined) {\n                return ;\n            }\n\n            if (this.currentIndex === index) {\n                return ;\n            }\n\n            to = index > this.currentIndex ? \"next\" : \"prev\";\n            current = this.pages[this.currentIndex];\n            next = this.pages[index];\n\n            this.currentIndex = index;\n\n            this._effect(current, next, to);\n        },\n\n        _slideTo: function(to){\n            var current, next, forward = to.toLowerCase() === 'next';\n\n            current = this.pages[this.currentIndex];\n\n            if (forward ) {\n                if (this.currentIndex + 1 >= this.pages.length) {\n                    return ;\n                }\n                this.currentIndex++;\n            } else {\n                if (this.currentIndex - 1 < 0) {\n                    return ;\n                }\n                this.currentIndex--;\n            }\n\n            next = this.pages[this.currentIndex];\n\n            this._fireEvent(forward ? \"next-page\" : \"prev-page\", {\n                current: current,\n                next: next,\n                forward: forward\n            });\n\n            this._effect(current, next, to);\n        },\n\n        _effect: function(current, next, to){\n            var that = this, element = this.element, o = this.options;\n            var out = element.width();\n            var pages = element.find(\".pages\");\n\n            this._setTitle();\n\n            if (this.currentIndex === this.pages.length - 1) {\n                this._enableControl(\"next\", false);\n            } else {\n                this._enableControl(\"next\", true);\n            }\n\n            if (this.currentIndex === 0) {\n                this._enableControl(\"prev\", false);\n            } else {\n                this._enableControl(\"prev\", true);\n            }\n\n            setTimeout(function(){\n                that.isAnimate = true;\n                pages.animate({\n                    draw: {\n                        height: next.outerHeight(true) + 2\n                    }\n                });\n            },0);\n\n            pages.css(\"overflow\", \"hidden\");\n\n            function finish(){\n                if (next.data(\"cover\") !== undefined) {\n                    element.css({\n                        backgroundImage: \"url(\"+next.data('cover')+\")\"\n                    });\n                } else {\n                    element.css({\n                        backgroundImage: \"url(\"+o.backgroundImage+\")\"\n                    });\n                }\n                pages.css(\"overflow\", \"initial\");\n                that.isAnimate = false;\n            }\n\n            function _slide(){\n                current\n                    .stop(true)\n                    .animate({\n                        draw: {\n                            left: to === \"next\" ? -out : out\n                        },\n                        dur: o.duration,\n                        ease: o.effectFunc,\n                        onDone: function(){\n                            current.hide(0);\n                        }\n                    });\n\n                next\n                    .stop(true)\n                    .css({\n                        left: to === \"next\" ? out : -out\n                    })\n                    .show(0)\n                    .animate({\n                        draw: {\n                            left: 0\n                        },\n                        dur: o.duration,\n                        ease: o.effectFunc,\n                        onDone: function(){\n                            finish();\n                        }\n                    });\n            }\n\n            function _switch(){\n                current.hide();\n\n                next.css({\n                    top: 0,\n                    left: 0,\n                    opacity: 0\n                }).show(function(){\n                    finish();\n                });\n            }\n\n            function _fade(){\n                current.fadeOut(o.duration);\n\n                next.css({\n                    top: 0,\n                    left: 0,\n                    opacity: 0\n                }).fadeIn(o.duration, \"linear\", function(){\n                    finish();\n                });\n            }\n\n            switch (o.effect) {\n                case \"fade\": _fade(); break;\n                case \"switch\": _switch(); break;\n                default: _slide();\n            }\n        },\n\n        toPage: function(index){\n            this._slideToPage(index);\n        },\n\n        next: function(){\n            this._slideTo(\"next\");\n        },\n\n        prev: function(){\n            this._slideTo(\"prev\");\n        },\n\n        changeEffect: function(){\n            this.options.effect = this.element.attr(\"data-effect\");\n        },\n\n        changeEffectFunc: function(){\n            this.options.effectFunc = this.element.attr(\"data-effect-func\");\n        },\n\n        changeEffectDuration: function(){\n            this.options.duration = this.element.attr(\"data-duration\");\n        },\n\n        changeAttribute: function(attributeName){\n            switch (attributeName) {\n                case \"data-effect\": this.changeEffect(); break;\n                case \"data-effect-func\": this.changeEffectFunc(); break;\n                case \"data-duration\": this.changeEffectDuration(); break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element;\n\n            element.off(Metro.events.click, \".controls .prev\");\n            element.off(Metro.events.click, \".controls .next\");\n            $(window).off(Metro.events.resize,{ns: this.id});\n\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro) {\n    'use strict';\n    Metro.md5 = function (string) {\n        function RotateLeft(lValue, iShiftBits) {\n            return (lValue<<iShiftBits) | (lValue>>>(32-iShiftBits));\n        }\n\n        function AddUnsigned(lX,lY) {\n            var lX4,lY4,lX8,lY8,lResult;\n            lX8 = (lX & 0x80000000);\n            lY8 = (lY & 0x80000000);\n            lX4 = (lX & 0x40000000);\n            lY4 = (lY & 0x40000000);\n            lResult = (lX & 0x3FFFFFFF)+(lY & 0x3FFFFFFF);\n            if (lX4 & lY4) {\n                return (lResult ^ 0x80000000 ^ lX8 ^ lY8);\n            }\n            if (lX4 | lY4) {\n                if (lResult & 0x40000000) {\n                    return (lResult ^ 0xC0000000 ^ lX8 ^ lY8);\n                } else {\n                    return (lResult ^ 0x40000000 ^ lX8 ^ lY8);\n                }\n            } else {\n                return (lResult ^ lX8 ^ lY8);\n            }\n        }\n\n        function F(x,y,z) { return (x & y) | ((~x) & z); }\n        function G(x,y,z) { return (x & z) | (y & (~z)); }\n        function H(x,y,z) { return (x ^ y ^ z); }\n        function I(x,y,z) { return (y ^ (x | (~z))); }\n\n        function FF(a,b,c,d,x,s,ac) {\n            a = AddUnsigned(a, AddUnsigned(AddUnsigned(F(b, c, d), x), ac));\n            return AddUnsigned(RotateLeft(a, s), b);\n        }\n\n        function GG(a,b,c,d,x,s,ac) {\n            a = AddUnsigned(a, AddUnsigned(AddUnsigned(G(b, c, d), x), ac));\n            return AddUnsigned(RotateLeft(a, s), b);\n        }\n\n        function HH(a,b,c,d,x,s,ac) {\n            a = AddUnsigned(a, AddUnsigned(AddUnsigned(H(b, c, d), x), ac));\n            return AddUnsigned(RotateLeft(a, s), b);\n        }\n\n        function II(a,b,c,d,x,s,ac) {\n            a = AddUnsigned(a, AddUnsigned(AddUnsigned(I(b, c, d), x), ac));\n            return AddUnsigned(RotateLeft(a, s), b);\n        }\n\n        function ConvertToWordArray(string) {\n            var lWordCount;\n            var lMessageLength = string.length;\n            var lNumberOfWords_temp1=lMessageLength + 8;\n            var lNumberOfWords_temp2=(lNumberOfWords_temp1-(lNumberOfWords_temp1 % 64))/64;\n            var lNumberOfWords = (lNumberOfWords_temp2+1)*16;\n            var lWordArray=Array(lNumberOfWords-1);\n            var lBytePosition = 0;\n            var lByteCount = 0;\n            while ( lByteCount < lMessageLength ) {\n                lWordCount = (lByteCount-(lByteCount % 4))/4;\n                lBytePosition = (lByteCount % 4)*8;\n                lWordArray[lWordCount] = (lWordArray[lWordCount] | (string.charCodeAt(lByteCount)<<lBytePosition));\n                lByteCount++;\n            }\n            lWordCount = (lByteCount-(lByteCount % 4))/4;\n            lBytePosition = (lByteCount % 4)*8;\n            lWordArray[lWordCount] = lWordArray[lWordCount] | (0x80<<lBytePosition);\n            lWordArray[lNumberOfWords-2] = lMessageLength<<3;\n            lWordArray[lNumberOfWords-1] = lMessageLength>>>29;\n            return lWordArray;\n        }\n\n        function WordToHex(lValue) {\n            var WordToHexValue=\"\",WordToHexValue_temp=\"\",lByte,lCount;\n            for (lCount = 0;lCount<=3;lCount++) {\n                lByte = (lValue>>>(lCount*8)) & 255;\n                WordToHexValue_temp = \"0\" + lByte.toString(16);\n                WordToHexValue = WordToHexValue + WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2);\n            }\n            return WordToHexValue;\n        }\n\n        function Utf8Encode(string) {\n            string = string.replace(/\\r\\n/g,\"\\n\");\n            var utftext = \"\";\n\n            for (var n = 0; n < string.length; n++) {\n\n                var c = string.charCodeAt(n);\n\n                if (c < 128) {\n                    utftext += String.fromCharCode(c);\n                }\n                else if((c > 127) && (c < 2048)) {\n                    utftext += String.fromCharCode((c >> 6) | 192);\n                    utftext += String.fromCharCode((c & 63) | 128);\n                }\n                else {\n                    utftext += String.fromCharCode((c >> 12) | 224);\n                    utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n                    utftext += String.fromCharCode((c & 63) | 128);\n                }\n\n            }\n\n            return utftext;\n        }\n\n        var x=[];\n        var k,AA,BB,CC,DD,a,b,c,d;\n        var S11=7, S12=12, S13=17, S14=22;\n        var S21=5, S22=9 , S23=14, S24=20;\n        var S31=4, S32=11, S33=16, S34=23;\n        var S41=6, S42=10, S43=15, S44=21;\n\n        string = Utf8Encode(string);\n\n        x = ConvertToWordArray(string);\n\n        a = 0x67452301; b = 0xEFCDAB89; c = 0x98BADCFE; d = 0x10325476;\n\n        for (k=0;k<x.length;k+=16) {\n            AA=a; BB=b; CC=c; DD=d;\n            a=FF(a,b,c,d,x[k], S11,0xD76AA478);\n            d=FF(d,a,b,c,x[k+1], S12,0xE8C7B756);\n            c=FF(c,d,a,b,x[k+2], S13,0x242070DB);\n            b=FF(b,c,d,a,x[k+3], S14,0xC1BDCEEE);\n            a=FF(a,b,c,d,x[k+4], S11,0xF57C0FAF);\n            d=FF(d,a,b,c,x[k+5], S12,0x4787C62A);\n            c=FF(c,d,a,b,x[k+6], S13,0xA8304613);\n            b=FF(b,c,d,a,x[k+7], S14,0xFD469501);\n            a=FF(a,b,c,d,x[k+8], S11,0x698098D8);\n            d=FF(d,a,b,c,x[k+9], S12,0x8B44F7AF);\n            c=FF(c,d,a,b,x[k+10],S13,0xFFFF5BB1);\n            b=FF(b,c,d,a,x[k+11],S14,0x895CD7BE);\n            a=FF(a,b,c,d,x[k+12],S11,0x6B901122);\n            d=FF(d,a,b,c,x[k+13],S12,0xFD987193);\n            c=FF(c,d,a,b,x[k+14],S13,0xA679438E);\n            b=FF(b,c,d,a,x[k+15],S14,0x49B40821);\n            a=GG(a,b,c,d,x[k+1], S21,0xF61E2562);\n            d=GG(d,a,b,c,x[k+6], S22,0xC040B340);\n            c=GG(c,d,a,b,x[k+11],S23,0x265E5A51);\n            b=GG(b,c,d,a,x[k], S24,0xE9B6C7AA);\n            a=GG(a,b,c,d,x[k+5], S21,0xD62F105D);\n            d=GG(d,a,b,c,x[k+10],S22,0x2441453);\n            c=GG(c,d,a,b,x[k+15],S23,0xD8A1E681);\n            b=GG(b,c,d,a,x[k+4], S24,0xE7D3FBC8);\n            a=GG(a,b,c,d,x[k+9], S21,0x21E1CDE6);\n            d=GG(d,a,b,c,x[k+14],S22,0xC33707D6);\n            c=GG(c,d,a,b,x[k+3], S23,0xF4D50D87);\n            b=GG(b,c,d,a,x[k+8], S24,0x455A14ED);\n            a=GG(a,b,c,d,x[k+13],S21,0xA9E3E905);\n            d=GG(d,a,b,c,x[k+2], S22,0xFCEFA3F8);\n            c=GG(c,d,a,b,x[k+7], S23,0x676F02D9);\n            b=GG(b,c,d,a,x[k+12],S24,0x8D2A4C8A);\n            a=HH(a,b,c,d,x[k+5], S31,0xFFFA3942);\n            d=HH(d,a,b,c,x[k+8], S32,0x8771F681);\n            c=HH(c,d,a,b,x[k+11],S33,0x6D9D6122);\n            b=HH(b,c,d,a,x[k+14],S34,0xFDE5380C);\n            a=HH(a,b,c,d,x[k+1], S31,0xA4BEEA44);\n            d=HH(d,a,b,c,x[k+4], S32,0x4BDECFA9);\n            c=HH(c,d,a,b,x[k+7], S33,0xF6BB4B60);\n            b=HH(b,c,d,a,x[k+10],S34,0xBEBFBC70);\n            a=HH(a,b,c,d,x[k+13],S31,0x289B7EC6);\n            d=HH(d,a,b,c,x[k], S32,0xEAA127FA);\n            c=HH(c,d,a,b,x[k+3], S33,0xD4EF3085);\n            b=HH(b,c,d,a,x[k+6], S34,0x4881D05);\n            a=HH(a,b,c,d,x[k+9], S31,0xD9D4D039);\n            d=HH(d,a,b,c,x[k+12],S32,0xE6DB99E5);\n            c=HH(c,d,a,b,x[k+15],S33,0x1FA27CF8);\n            b=HH(b,c,d,a,x[k+2], S34,0xC4AC5665);\n            a=II(a,b,c,d,x[k], S41,0xF4292244);\n            d=II(d,a,b,c,x[k+7], S42,0x432AFF97);\n            c=II(c,d,a,b,x[k+14],S43,0xAB9423A7);\n            b=II(b,c,d,a,x[k+5], S44,0xFC93A039);\n            a=II(a,b,c,d,x[k+12],S41,0x655B59C3);\n            d=II(d,a,b,c,x[k+3], S42,0x8F0CCC92);\n            c=II(c,d,a,b,x[k+10],S43,0xFFEFF47D);\n            b=II(b,c,d,a,x[k+1], S44,0x85845DD1);\n            a=II(a,b,c,d,x[k+8], S41,0x6FA87E4F);\n            d=II(d,a,b,c,x[k+15],S42,0xFE2CE6E0);\n            c=II(c,d,a,b,x[k+6], S43,0xA3014314);\n            b=II(b,c,d,a,x[k+13],S44,0x4E0811A1);\n            a=II(a,b,c,d,x[k+4], S41,0xF7537E82);\n            d=II(d,a,b,c,x[k+11],S42,0xBD3AF235);\n            c=II(c,d,a,b,x[k+2], S43,0x2AD7D2BB);\n            b=II(b,c,d,a,x[k+9], S44,0xEB86D391);\n            a=AddUnsigned(a,AA);\n            b=AddUnsigned(b,BB);\n            c=AddUnsigned(c,CC);\n            d=AddUnsigned(d,DD);\n        }\n\n        var temp = WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d);\n\n        return temp.toLowerCase();\n    };\n\n    if (window.METRO_GLOBAL_COMMON === true) {\n        window.md5 = Metro.md5;\n    }\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var NavigationViewDefaultConfig = {\n        navviewDeferred: 0,\n        compact: \"md\",\n        expand: \"lg\",\n        toggle: null,\n        activeState: false,\n        onMenuItemClick: Metro.noop,\n        onNavviewCreate: Metro.noop\n    };\n\n    Metro.navViewSetup = function (options) {\n        NavigationViewDefaultConfig = $.extend({}, NavigationViewDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroNavViewSetup\"] !== undefined) {\n        Metro.navViewSetup(window[\"metroNavViewSetup\"]);\n    }\n\n    Metro.Component('nav-view', {\n        init: function( options, elem ) {\n            this._super(elem, options, NavigationViewDefaultConfig, {\n                pane: null,\n                content: null,\n                paneToggle: null,\n                id: Utils.elementId(\"navview\"),\n                menuScrollDistance: 0,\n                menuScrollStep: 0\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"navview-create\");\n        },\n\n        _calcMenuHeight: function(){\n            var element = this.element, pane, menu_container;\n            var elements_height = 0;\n\n            pane = element.children(\".navview-pane\");\n            if (pane.length === 0) {\n                return;\n            }\n\n            menu_container = pane.children(\".navview-menu-container\");\n\n            if (menu_container.length === 0) {\n                return ;\n            }\n\n            $.each(menu_container.prevAll(), function(){\n                elements_height += $(this).outerHeight(true);\n            });\n\n            $.each(menu_container.nextAll(), function(){\n                elements_height += $(this).outerHeight(true);\n            });\n\n            menu_container.css({\n                height: \"calc(100% - \"+(elements_height)+\"px)\"\n            });\n\n            this.menuScrollStep = 48;\n            this.menuScrollDistance = Utils.nearest(menu_container[0].scrollHeight - menu_container.height(), 48);\n        },\n\n        _recalc: function(){\n            var that = this, element = this.element;\n            setTimeout(function(){\n                if (that.pane.width() === 48) {\n                    element.addClass(\"js-compact\");\n                } else {\n                    element.removeClass(\"js-compact\");\n                }\n                that._calcMenuHeight();\n            }, 200);\n        },\n\n        _createStructure: function(){\n            var element = this.element, o = this.options;\n            var pane, content, toggle, menu/*, menu_container, menu_h, menu_container_h*/;\n\n            element\n                .addClass(\"navview\")\n                .addClass(o.compact !== false ? \"navview-compact-\"+o.compact : \"\")\n                .addClass(o.expand !== false ? \"navview-expand-\"+o.expand : \"\");\n\n            pane = element.children(\".navview-pane\");\n            content = element.children(\".navview-content\");\n            toggle = $(o.toggle);\n            menu = pane.children(\".navview-menu\");\n\n            if (menu.length) {\n                menu.prevAll().reverse().wrapAll($(\"<div>\").addClass(\"navview-container\"));\n                menu.wrap($(\"<div>\").addClass(\"navview-menu-container\"));\n            }\n\n            this.pane = pane.length > 0 ? pane : null;\n            this.content = content.length > 0 ? content : null;\n            this.paneToggle = toggle.length > 0 ? toggle : null;\n\n            this._recalc();\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var menu_container = element.find(\".navview-menu-container\");\n            var menu = menu_container.children(\".navview-menu\");\n\n            menu_container.on(\"mousewheel\", function(e){\n                var pane_width = element.find(\".navview-pane\").width();\n                var dir = e.deltaY > 0 ? -1 : 1;\n                var step = that.menuScrollStep;\n                var distance = that.menuScrollDistance;\n                var top = parseInt(menu.css('top'));\n\n                if (pane_width > 48 /*|| !element.hasClass(\"compacted\") */) {\n                    return false;\n                }\n\n                if(dir === -1 && Math.abs(top) <= distance) {\n                    menu.css('top', parseInt(menu.css('top')) + step * dir);\n                }\n\n                if(dir === 1 && top <= -step) {\n                    menu.css('top', parseInt(menu.css('top')) + step * dir);\n                }\n            });\n\n            element.on(Metro.events.click, \".pull-button, .holder\", function(){\n                that.pullClick(this);\n            });\n\n            element.on(Metro.events.click, \".navview-menu li\", function(){\n                if (o.activeState === true) {\n                    element.find(\".navview-menu li\").removeClass(\"active\");\n                    $(this).toggleClass(\"active\");\n                }\n            });\n\n            element.on(Metro.events.click, \".navview-menu li > a\", function(){\n\n                that._fireEvent(\"menu-item-click\", {\n                    item: this\n                });\n\n            });\n\n            if (this.paneToggle !== null) {\n                this.paneToggle.on(Metro.events.click, function(){\n                    that.pane.toggleClass(\"open\");\n                })\n            }\n\n            $(window).on(Metro.events.resize, function(){\n                var menu_h, menu_container_h,\n                    menu_container = element.children(\".navview-menu-container\"),\n                    menu;\n\n                if (that.pane.hasClass(\"open\")) {\n                    that._recalc();\n                    return ;\n                }\n\n                element.removeClass(\"expanded\");\n                that.pane.removeClass(\"open\");\n\n                if ($(this).width() <= Metro.media_sizes[(\"\"+o.compact).toUpperCase()]) {\n                    element.removeClass(\"compacted\");\n                }\n\n                if (menu_container.length) {\n                    menu = menu_container.children(\".navview-menu\");\n                    setTimeout(function () {\n                        menu_h = menu.height();\n                        menu_container_h = menu_container.height();\n                        that.menuScrollStep = menu.children(\":not(.item-separator), :not(.item-header)\")[0].clientHeight;\n                        that.menuScrollDistance = menu_h > menu_container_h ? Utils.nearest(menu_h - menu_container_h, that.menuScrollStep) : 0;\n                    }, 0);\n                }\n\n                that._recalc();\n\n            }, {ns: this.id})\n        },\n\n        _togglePaneMode: function(){\n            var element = this.element;\n            var pane = this.pane;\n            var pane_compact = pane.width() < 280;\n\n            if ((pane_compact || element.hasClass(\"expanded\")) && !element.hasClass(\"compacted\")) {\n                element.toggleClass(\"expanded\");\n            } else\n\n            if (element.hasClass(\"compacted\") || !pane_compact) {\n                element.toggleClass(\"compacted\");\n            }\n\n        },\n\n        pullClick: function(el){\n            var that = this;\n            var input;\n\n            var target = $(el);\n\n            if (target && target.hasClass(\"holder\")) {\n                input = target.parent().find(\"input\");\n                setTimeout(function(){\n                    input.focus();\n                }, 200);\n            }\n\n            if (that.pane.hasClass(\"open\")) {\n                that.close();\n            } else {\n                this._togglePaneMode();\n            }\n\n            this._recalc();\n\n            return true;\n        },\n\n        open: function(){\n            this.pane.addClass(\"open\");\n        },\n\n        close: function(){\n            this.pane.removeClass(\"open\");\n        },\n\n        toggle: function(){\n            var pane = this.pane;\n            pane.hasClass(\"open\") ? pane.removeClass(\"open\") : pane.addClass(\"open\");\n        },\n\n        toggleMode: function(){\n            this._togglePaneMode();\n        },\n\n        /* eslint-disable-next-line */\n        changeAttribute: function(attributeName){\n        },\n\n        destroy: function(){\n            var element = this.element;\n\n            element.off(Metro.events.click, \".pull-button, .holder\");\n            element.off(Metro.events.click, \".navview-menu li\");\n            element.off(Metro.events.click, \".navview-menu li > a\");\n\n            if (this.paneToggle !== null) {\n                this.paneToggle.off(Metro.events.click);\n            }\n\n            $(window).off(Metro.events.resize,{ns: this.id});\n\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var NotifyDefaultConfig = {\n        container: null,\n        width: 220,\n        timeout: METRO_TIMEOUT,\n        duration: METRO_ANIMATION_DURATION,\n        distance: \"max\",\n        animation: \"linear\",\n        onClick: Metro.noop,\n        onClose: Metro.noop,\n        onShow: Metro.noop,\n        onAppend: Metro.noop,\n        onNotifyCreate: Metro.noop\n\n    };\n\n    Metro.notifySetup = function(options){\n        NotifyDefaultConfig = $.extend({}, NotifyDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroNotifySetup\"] !== undefined) {\n        Metro.notifySetup(window[\"metroNotifySetup\"]);\n    }\n\n    var Notify = {\n\n        container: null,\n\n        options: {\n        },\n\n        notifies: [],\n\n        setup: function(options){\n            this.options = $.extend({}, NotifyDefaultConfig, options);\n\n            return this;\n        },\n\n        reset: function(){\n            var reset_options = {\n                width: 220,\n                timeout: METRO_TIMEOUT,\n                duration: METRO_ANIMATION_DURATION,\n                distance: \"max\",\n                animation: \"linear\"\n            };\n            this.options = $.extend({}, NotifyDefaultConfig, reset_options);\n        },\n\n        _createContainer: function(){\n\n            var container = $(\"<div>\").addClass(\"notify-container\");\n            $(\"body\").prepend(container);\n\n            return container;\n        },\n\n        create: function(message, title, options){\n            var notify, that = this, o = this.options;\n            var m, t, id = Utils.elementId(\"notify\");\n\n            if (Utils.isNull(options)) {\n                options = {};\n            }\n\n            if (!Utils.isValue(message)) {\n                return false;\n            }\n\n            notify = $(\"<div>\").addClass(\"notify\").attr(\"id\", id);\n            notify.css({\n                width: o.width\n            });\n\n            if (title) {\n                t = $(\"<div>\").addClass(\"notify-title\").html(title);\n                notify.prepend(t);\n            }\n            m = $(\"<div>\").addClass(\"notify-message\").html(message);\n            m.appendTo(notify);\n\n            // Set options\n            /*\n            * keepOpen, cls, width, callback\n            * */\n            if (options !== undefined) {\n                if (options.cls !== undefined) {\n                    notify.addClass(options.cls);\n                }\n                if (options.width !== undefined) {\n                    notify.css({\n                        width: options.width\n                    });\n                }\n            }\n\n            notify.on(Metro.events.click, function(){\n                Utils.exec(Utils.isValue(options.onClick) ? options.onClick : o.onClick, null, this);\n                that.kill($(this).closest(\".notify\"), Utils.isValue(options.onClose) ? options.onClose : o.onClose);\n            });\n\n            // Show\n            if (Notify.container === null) {\n                Notify.container = Notify._createContainer();\n            }\n            notify.appendTo(Notify.container);\n\n            notify.hide(function(){\n\n                Utils.exec(Utils.isValue(options.onAppend) ? options.onAppend : o.onAppend, null, notify[0]);\n\n                var duration = Utils.isValue(options.duration) ? options.duration : o.duration;\n                var animation = Utils.isValue(options.animation) ? options.animation : o.animation;\n                var distance = Utils.isValue(options.distance) ? options.distance : o.distance;\n\n                if (distance === \"max\" || isNaN(distance)) {\n                    distance = $(window).height();\n                }\n\n                notify\n                    .show()\n                    .animate({\n                        draw: {\n                            marginTop: [distance, 4],\n                            opacity: [0, 1]\n                        },\n                        dur: duration,\n                        ease: animation,\n                        onDone: function(){\n                            Utils.exec(o.onNotifyCreate, null, this);\n\n                            if (options !== undefined && options.keepOpen === true) {\n                                /* eslint-disable-next-line */\n\n                            } else {\n                                setTimeout(function(){\n                                    that.kill(notify, Utils.isValue(options.onClose) ? options.onClose : o.onClose);\n                                }, o.timeout);\n                            }\n\n                            Utils.exec(Utils.isValue(options.onShow) ? options.onShow : o.onShow, null, notify[0]);\n                        }\n                    });\n\n            });\n        },\n\n        kill: function(notify, callback){\n            var that = this, o = this.options;\n            notify.off(Metro.events.click);\n            notify.fadeOut(o.duration, 'linear', function(){\n                Utils.exec(Utils.isValue(callback) ? callback : that.options.onClose, null, notify[0]);\n                notify.remove();\n            });\n        },\n\n        killAll: function(){\n            var that = this;\n            var notifies = $(\".notify\");\n            $.each(notifies, function(){\n                that.kill($(this));\n            });\n        }\n    };\n\n    Metro['notify'] = Notify.setup();\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    Metro.pagination = function(c){\n        var defConf = {\n            length: 0,\n            rows: 0,\n            current: 0,\n            target: \"body\",\n            clsPagination: \"\",\n            prevTitle: \"Prev\",\n            nextTitle: \"Next\",\n            distance: 5\n        }, conf;\n        var pagination;\n        var pagination_wrapper;\n        var i, prev, next;\n        var shortDistance;\n\n        conf = $.extend( {}, defConf, c);\n\n        shortDistance = parseInt(conf.distance);\n        pagination_wrapper = $(conf.target);\n        pagination_wrapper.html(\"\");\n        pagination = $(\"<ul>\").addClass(\"pagination\").addClass(conf.clsPagination).appendTo(pagination_wrapper);\n\n        if (conf.length === 0) {\n            return ;\n        }\n\n        if (conf.rows === -1) {\n            return ;\n        }\n\n        conf.pages = Math.ceil(conf.length / conf.rows);\n\n        var add_item = function(item_title, item_type, data){\n            var li, a;\n\n            li = $(\"<li>\").addClass(\"page-item\").addClass(item_type);\n            a  = $(\"<a>\").addClass(\"page-link\").html(item_title);\n            a.data(\"page\", data);\n            a.appendTo(li);\n\n            return li;\n        };\n\n        prev = add_item(conf.prevTitle, \"service prev-page\", \"prev\");\n        pagination.append(prev);\n\n        pagination.append(add_item(1, conf.current === 1 ? \"active\" : \"\", 1));\n\n        if (shortDistance === 0 || conf.pages <= 7) {\n            for (i = 2; i < conf.pages; i++) {\n                pagination.append(add_item(i, i === conf.current ? \"active\" : \"\", i));\n            }\n        } else {\n            if (conf.current < shortDistance) {\n                for (i = 2; i <= shortDistance; i++) {\n                    pagination.append(add_item(i, i === conf.current ? \"active\" : \"\", i));\n                }\n\n                if (conf.pages > shortDistance) {\n                    pagination.append(add_item(\"...\", \"no-link\", null));\n                }\n            } else if (conf.current <= conf.pages && conf.current > conf.pages - shortDistance + 1) {\n                if (conf.pages > shortDistance) {\n                    pagination.append(add_item(\"...\", \"no-link\", null));\n                }\n\n                for (i = conf.pages - shortDistance + 1; i < conf.pages; i++) {\n                    pagination.append(add_item(i, i === conf.current ? \"active\" : \"\", i));\n                }\n            } else {\n                pagination.append(add_item(\"...\", \"no-link\", null));\n\n                pagination.append(add_item(conf.current - 1, \"\", conf.current - 1));\n                pagination.append(add_item(conf.current, \"active\", conf.current));\n                pagination.append(add_item(conf.current + 1, \"\", conf.current + 1));\n\n                pagination.append(add_item(\"...\", \"no-link\", null));\n            }\n        }\n\n        if (conf.pages > 1 || conf.current < conf.pages) pagination.append(add_item(conf.pages, conf.current === conf.pages ? \"active\" : \"\", conf.pages));\n\n        next = add_item(conf.nextTitle, \"service next-page\", \"next\");\n        pagination.append(next);\n\n        if (conf.current === 1) {\n            prev.addClass(\"disabled\");\n        }\n\n        if (conf.current === conf.pages) {\n            next.addClass(\"disabled\");\n        }\n\n        if (conf.length === 0) {\n            pagination.addClass(\"disabled\");\n            pagination.children().addClass(\"disabled\");\n        }\n\n        return pagination;\n    };\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var PanelDefaultConfig = {\n        panelDeferred: 0,\n        id: null,\n        titleCaption: \"\",\n        titleIcon: \"\",\n        collapsible: false,\n        collapsed: false,\n        collapseDuration: METRO_ANIMATION_DURATION,\n        width: \"auto\",\n        height: \"auto\",\n        draggable: false,\n\n        customButtons: null,\n        clsCustomButton: \"\",\n\n        clsPanel: \"\",\n        clsTitle: \"\",\n        clsTitleCaption: \"\",\n        clsTitleIcon: \"\",\n        clsContent: \"\",\n        clsCollapseToggle: \"\",\n\n        onCollapse: Metro.noop,\n        onExpand: Metro.noop,\n        onDragStart: Metro.noop,\n        onDragStop: Metro.noop,\n        onDragMove: Metro.noop,\n        onPanelCreate: Metro.noop\n    };\n\n    Metro.panelSetup = function (options) {\n        PanelDefaultConfig = $.extend({}, PanelDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroPanelSetup\"] !== undefined) {\n        Metro.panelSetup(window[\"metroPanelSetup\"]);\n    }\n\n    Metro.Component('panel', {\n        init: function( options, elem ) {\n            this._super(elem, options, PanelDefaultConfig);\n\n            return this;\n        },\n\n        _addCustomButtons: function(buttons){\n            var element = this.element, o = this.options;\n            var title = element.closest(\".panel\").find(\".panel-title\");\n            var buttonsContainer, customButtons = [];\n\n            if (typeof buttons === \"string\" && buttons.indexOf(\"{\") > -1) {\n                customButtons = JSON.parse(buttons);\n            } else if (typeof buttons === \"string\" && Utils.isObject(buttons)) {\n                customButtons = Utils.isObject(buttons);\n            } else if (typeof buttons === \"object\" && Utils.objectLength(buttons) > 0) {\n                customButtons = buttons;\n            } else {\n                console.warn(\"Unknown format for custom buttons\", buttons);\n                return ;\n            }\n\n            if (title.length === 0) {\n                console.warn(\"No place for custom buttons\");\n                return ;\n            }\n\n            buttonsContainer = title.find(\".custom-buttons\");\n\n            if (buttonsContainer.length === 0) {\n                buttonsContainer = $(\"<div>\").addClass(\"custom-buttons\").appendTo(title);\n            } else {\n                buttonsContainer.find(\".btn-custom\").off(Metro.events.click);\n                buttonsContainer.html(\"\");\n            }\n\n            $.each(customButtons, function(){\n                var item = this;\n                var customButton = $(\"<span>\");\n\n                customButton\n                    .addClass(\"button btn-custom\")\n                    .addClass(o.clsCustomButton)\n                    .addClass(item.cls)\n                    .attr(\"tabindex\", -1)\n                    .html(item.html);\n\n                if (item.attr && typeof item.attr === 'object') {\n                    $.each(item.attr, function(k, v){\n                        customButton.attr(Cake.dashedName(k), v);\n                    });\n                }\n\n                customButton.data(\"action\", item.onclick);\n\n                buttonsContainer.prepend(customButton);\n            });\n\n            title.on(Metro.events.click, \".btn-custom\", function(e){\n                if (Utils.isRightMouse(e)) return;\n                var button = $(this);\n                var action = button.data(\"action\");\n                Utils.exec(action, [button], this);\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n            var panel = $(\"<div>\").addClass(\"panel\").addClass(o.clsPanel);\n            var id = o.id ? o.id : Utils.elementId(\"panel\");\n            var original_classes = element[0].className;\n            var title;\n\n            panel.attr(\"id\", id).addClass(original_classes);\n            panel.insertBefore(element);\n            element.appendTo(panel);\n\n            element[0].className = '';\n            element.addClass(\"panel-content\").addClass(o.clsContent).appendTo(panel);\n\n            if (o.titleCaption !== \"\" || o.titleIcon !== \"\" || o.collapsible === true) {\n                title = $(\"<div>\").addClass(\"panel-title\").addClass(o.clsTitle);\n\n                if (o.titleCaption !== \"\") {\n                    $(\"<span>\").addClass(\"caption\").addClass(o.clsTitleCaption).html(o.titleCaption).appendTo(title)\n                }\n\n                if (o.titleIcon !== \"\") {\n                    $(o.titleIcon).addClass(\"icon\").addClass(o.clsTitleIcon).appendTo(title)\n                }\n\n                if (o.collapsible === true) {\n                    var collapseToggle = $(\"<span>\").addClass(\"dropdown-toggle marker-center active-toggle\").addClass(o.clsCollapseToggle).appendTo(title);\n                    Metro.makePlugin(element, \"collapse\", {\n                        toggleElement: collapseToggle,\n                        duration: o.collapseDuration,\n                        onCollapse: o.onCollapse,\n                        onExpand: o.onExpand\n                    });\n\n                    if (o.collapsed === true) {\n                        this.collapse();\n                    }\n                }\n\n                title.appendTo(panel);\n            }\n\n            if (title && Utils.isValue(o.customButtons)) {\n                this._addCustomButtons(o.customButtons);\n            }\n\n            if (o.draggable === true) {\n                var dragElement;\n\n                if (title) {\n                    dragElement = title.find(\".caption, .icon\");\n                } else {\n                    dragElement = panel;\n                }\n\n                Metro.makePlugin(panel, \"draggable\", {\n                    dragContext: panel[0],\n                    dragElement: dragElement,\n                    onDragStart: o.onDragStart,\n                    onDragStop: o.onDragStop,\n                    onDragMove: o.onDragMove\n                });\n            }\n\n            if (o.width !== \"auto\" && parseInt(o.width) >= 0) {\n                panel.outerWidth(parseInt(o.width));\n            }\n\n            if (o.height !== \"auto\" && parseInt(o.height) >= 0) {\n                panel.outerHeight(parseInt(o.height));\n                element.css({overflow: \"auto\"});\n            }\n\n            this.panel = panel;\n\n            this._fireEvent(\"panel-create\", {\n                element: element,\n                panel: panel\n            });\n        },\n\n        customButtons: function(buttons){\n            return this._addCustomButtons(buttons);\n        },\n\n        collapse: function(){\n            var element = this.element;\n            if (Utils.isMetroObject(element, 'collapse') === false) {\n                return ;\n            }\n            Metro.getPlugin(element, 'collapse').collapse();\n        },\n\n        open: function(){\n            this.expand();\n        },\n\n        close: function(){\n            this.collapse();\n        },\n\n        expand: function(){\n            var element = this.element;\n            if (Utils.isMetroObject(element, 'collapse') === false) {\n                return ;\n            }\n            Metro.getPlugin(element, 'collapse').expand();\n        },\n\n        /* eslint-disable-next-line */\n        changeAttribute: function(attributeName){\n        },\n\n        destroy: function(){\n            var element = this.element, o = this.options;\n\n            if (o.collapsible === true) {\n                Metro.getPlugin(element, \"collapse\").destroy();\n            }\n\n            if (o.draggable === true) {\n                Metro.getPlugin(element, \"draggable\").destroy();\n            }\n\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var PopoverDefaultConfig = {\n        popoverDeferred: 0,\n        popoverText: \"\",\n        popoverHide: 3000,\n        popoverTimeout: 10,\n        popoverOffset: 10,\n        popoverTrigger: Metro.popoverEvents.HOVER,\n        popoverPosition: Metro.position.TOP,\n        hideOnLeave: false,\n        closeButton: true,\n        clsPopover: \"\",\n        clsPopoverContent: \"\",\n        onPopoverShow: Metro.noop,\n        onPopoverHide: Metro.noop,\n        onPopoverCreate: Metro.noop\n    };\n\n    Metro.popoverSetup = function (options) {\n        PopoverDefaultConfig = $.extend({}, PopoverDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroPopoverSetup\"] !== undefined) {\n        Metro.popoverSetup(window[\"metroPopoverSetup\"]);\n    }\n\n    Metro.Component('popover', {\n        init: function( options, elem ) {\n            this._super(elem, options, PopoverDefaultConfig, {\n                popover: null,\n                popovered: false,\n                size: {\n                    width: 0,\n                    height: 0\n                },\n                id: Utils.elementId(\"popover\")\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            this._createEvents();\n            this._fireEvent(\"popover-create\", {\n                element: this.element\n            })\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var event;\n\n            switch (o.popoverTrigger) {\n                case Metro.popoverEvents.CLICK: event = Metro.events.click; break;\n                case Metro.popoverEvents.FOCUS: event = Metro.events.focus; break;\n                default: event = Metro.events.enter;\n            }\n\n            element.on(event, function(){\n                if (that.popover !== null || that.popovered === true) {\n                    return ;\n                }\n                setTimeout(function(){\n                    that.createPopover();\n\n                    that._fireEvent(\"popover-show\", {\n                        popover: that.popover\n                    });\n\n                    if (o.popoverHide > 0) {\n                        setTimeout(function(){\n                            that.removePopover();\n                        }, o.popoverHide);\n                    }\n                }, o.popoverTimeout);\n            });\n\n            if (o.hideOnLeave === true) {\n                element.on(Metro.events.leave, function(){\n                    that.removePopover();\n                });\n            }\n\n            $(window).on(Metro.events.scroll, function(){\n                if (that.popover !== null) that.setPosition();\n            }, {ns: this.id});\n        },\n\n        setPosition: function(){\n            var popover = this.popover, size = this.size, o = this.options, element = this.element;\n\n            if (o.popoverPosition === Metro.position.BOTTOM) {\n                popover.addClass('bottom');\n                popover.css({\n                    top: element.offset().top - $(window).scrollTop() + element.outerHeight() + o.popoverOffset,\n                    left: element.offset().left + element.outerWidth()/2 - size.width/2  - $(window).scrollLeft()\n                });\n            } else if (o.popoverPosition === Metro.position.RIGHT) {\n                popover.addClass('right');\n                popover.css({\n                    top: element.offset().top + element.outerHeight()/2 - size.height/2 - $(window).scrollTop(),\n                    left: element.offset().left + element.outerWidth() - $(window).scrollLeft() + o.popoverOffset\n                });\n            } else if (o.popoverPosition === Metro.position.LEFT) {\n                popover.addClass('left');\n                popover.css({\n                    top: element.offset().top + element.outerHeight()/2 - size.height/2 - $(window).scrollTop(),\n                    left: element.offset().left - size.width - $(window).scrollLeft() - o.popoverOffset\n                });\n            } else {\n                popover.addClass('top');\n                popover.css({\n                    top: element.offset().top - $(window).scrollTop() - size.height - o.popoverOffset,\n                    left: element.offset().left + element.outerWidth()/2 - size.width/2  - $(window).scrollLeft()\n                });\n            }\n        },\n\n        createPopover: function(){\n            var that = this, elem = this.elem, element = this.element, o = this.options;\n            var popover;\n            var neb_pos;\n            var id = Utils.elementId(\"popover\");\n            var closeButton;\n\n            if (this.popovered) {\n                return ;\n            }\n\n            popover = $(\"<div>\").addClass(\"popover neb\").addClass(o.clsPopover);\n            popover.attr(\"id\", id);\n\n            $(\"<div>\").addClass(\"popover-content\").addClass(o.clsPopoverContent).html(o.popoverText).appendTo(popover);\n\n            if (o.popoverHide === 0 && o.closeButton === true) {\n                closeButton = $(\"<button>\").addClass(\"button square small popover-close-button bg-white\").html(\"&times;\").appendTo(popover);\n                closeButton.on(Metro.events.click, function(){\n                    that.removePopover();\n                });\n            }\n\n            switch (o.popoverPosition) {\n                case Metro.position.TOP: neb_pos = \"neb-s\"; break;\n                case Metro.position.BOTTOM: neb_pos = \"neb-n\"; break;\n                case Metro.position.RIGHT: neb_pos = \"neb-w\"; break;\n                case Metro.position.LEFT: neb_pos = \"neb-e\"; break;\n            }\n\n            popover.addClass(neb_pos);\n\n            if (o.closeButton !== true) {\n                popover.on(Metro.events.click, function(){\n                    that.removePopover();\n                });\n            }\n\n            this.popover = popover;\n            this.size = Utils.hiddenElementSize(popover);\n\n            if (elem.tagName === 'TD' || elem.tagName === 'TH') {\n                var wrp = $(\"<div/>\").css(\"display\", \"inline-block\").html(element.html());\n                element.html(wrp);\n                element = wrp;\n            }\n\n            this.setPosition();\n\n            popover.appendTo($('body'));\n\n            this.popovered = true;\n\n            this._fireEvent(\"popover-create\", {\n                popover: popover\n            });\n        },\n\n        removePopover: function(){\n            var that = this;\n            var timeout = this.options.onPopoverHide === Metro.noop ? 0 : 300;\n            var popover = this.popover;\n\n            if (!this.popovered) {\n                return ;\n            }\n\n            this._fireEvent(\"popover-hide\", {\n                popover: popover\n            });\n\n            setTimeout(function(){\n                popover.hide(0, function(){\n                    popover.remove();\n                    that.popover = null;\n                    that.popovered = false;\n                });\n            }, timeout);\n        },\n\n        show: function(){\n            var that = this, o = this.options;\n\n            if (this.popovered === true) {\n                return ;\n            }\n\n            setTimeout(function(){\n                that.createPopover();\n\n                that._fireEvent(\"popover-show\", {\n                    popover: that.popover\n                });\n\n                if (o.popoverHide > 0) {\n                    setTimeout(function(){\n                        that.removePopover();\n                    }, o.popoverHide);\n                }\n            }, o.popoverTimeout);\n        },\n\n        hide: function(){\n            this.removePopover();\n        },\n\n        changeAttribute: function(attributeName){\n            var that = this, element = this.element, o = this.options;\n\n            var changeText = function(){\n                o.popoverText = element.attr(\"data-popover-text\");\n                if (that.popover) {\n                    that.popover.find(\".popover-content\").html(o.popoverText);\n                    that.setPosition();\n                }\n            };\n\n            var changePosition = function(){\n                o.popoverPosition = element.attr(\"data-popover-position\");\n                that.setPosition();\n            };\n\n            switch (attributeName) {\n                case \"data-popover-text\": changeText(); break;\n                case \"data-popover-position\": changePosition(); break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element, o = this.options;\n            var event;\n\n            switch (o.popoverTrigger) {\n                case Metro.popoverEvents.CLICK: event = Metro.events.click; break;\n                case Metro.popoverEvents.FOCUS: event = Metro.events.focus; break;\n                default: event = Metro.events.enter;\n            }\n\n            element.off(event);\n\n            if (o.hideOnLeave === true) {\n                element.off(Metro.events.leave);\n            }\n\n            $(window).off(Metro.events.scroll,{ns: this.id});\n\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var ProgressDefaultConfig = {\n        progressDeferred: 0,\n        showValue: false,\n        valuePosition: \"free\", // center, free\n        showLabel: false,\n        labelPosition: \"before\", // before, after\n        labelTemplate: \"\",\n        value: 0,\n        buffer: 0,\n        type: \"bar\",\n        small: false,\n        clsBack: \"\",\n        clsBar: \"\",\n        clsBuffer: \"\",\n        clsValue: \"\",\n        clsLabel: \"\",\n        onValueChange: Metro.noop,\n        onBufferChange: Metro.noop,\n        onComplete: Metro.noop,\n        onBuffered: Metro.noop,\n        onProgressCreate: Metro.noop\n    };\n\n    Metro.progressSetup = function (options) {\n        ProgressDefaultConfig = $.extend({}, ProgressDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroProgressSetup\"] !== undefined) {\n        Metro.progressSetup(window[\"metroProgressSetup\"]);\n    }\n\n    Metro.Component('progress', {\n        init: function( options, elem ) {\n            this._super(elem, options, ProgressDefaultConfig, {\n                value: 0,\n                buffer: 0\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n            var value;\n\n            if (typeof o.type === \"string\") o.type = o.type.toLowerCase();\n\n            element\n                .html(\"\")\n                .addClass(\"progress\");\n\n            function _progress(){\n                $(\"<div>\").addClass(\"bar\").appendTo(element);\n            }\n\n            function _buffer(){\n                $(\"<div>\").addClass(\"bar\").appendTo(element);\n                $(\"<div>\").addClass(\"buffer\").appendTo(element);\n            }\n\n            function _load(){\n                element.addClass(\"with-load\");\n                $(\"<div>\").addClass(\"bar\").appendTo(element);\n                $(\"<div>\").addClass(\"buffer\").appendTo(element);\n                $(\"<div>\").addClass(\"load\").appendTo(element);\n            }\n\n            function _line(){\n                element.addClass(\"line\");\n            }\n\n            switch (o.type) {\n                case \"buffer\": _buffer(); break;\n                case \"load\": _load(); break;\n                case \"line\": _line(); break;\n                default: _progress();\n            }\n\n            if (o.type !== 'line') {\n                value = $(\"<span>\").addClass(\"value\").addClass(o.clsValue).appendTo(element);\n                if (o.valuePosition === \"center\") value.addClass(\"centered\");\n                if (o.showValue === false) value.hide();\n            }\n\n            if (o.small === true) element.addClass(\"small\");\n\n            element.addClass(o.clsBack);\n            element.find(\".bar\").addClass(o.clsBar);\n            element.find(\".buffer\").addClass(o.clsBuffer);\n\n            if (o.showLabel === true) {\n                var label = $(\"<span>\").addClass(\"progress-label\").addClass(o.clsLabel).html(o.labelTemplate === \"\" ? o.value+\"%\" : o.labelTemplate.replace(\"%VAL%\", o.value));\n                if (o.labelPosition === 'before') {\n                    label.insertBefore(element);\n                } else {\n                    label.insertAfter(element);\n                }\n            }\n\n            this.val(o.value);\n            this.buff(o.buffer);\n\n            this._fireEvent(\"progress-create\", {\n                element: element\n            });\n        },\n\n        val: function(v){\n            var that = this, element = this.element, o = this.options;\n            var value = element.find(\".value\");\n\n            if (v === undefined) {\n                return that.value;\n            }\n\n            var bar  = element.find(\".bar\");\n\n            if (bar.length === 0) {\n                return false;\n            }\n\n            this.value = parseInt(v, 10);\n\n            bar.css(\"width\", this.value + \"%\");\n            value.html(this.value+\"%\");\n\n            var diff = element.width() - bar.width();\n            var valuePosition = value.width() > diff ? {left: \"auto\", right: diff + 'px'} : {left: v + '%'};\n\n            if (o.valuePosition === \"free\") value.css(valuePosition);\n\n            if (o.showLabel === true) {\n                var label = element[o.labelPosition === \"before\" ? \"prev\" : \"next\"](\".progress-label\");\n                if (label.length) {\n                    label.html(o.labelTemplate === \"\" ? o.value+\"%\" : o.labelTemplate.replace(\"%VAL%\", o.value));\n                }\n            }\n\n            this._fireEvent(\"value-change\", {\n                val: this.value\n            });\n\n            if (this.value === 100) {\n\n                this._fireEvent(\"complete\", {\n                    val: this.value\n                });\n\n            }\n        },\n\n        buff: function(v){\n            var that = this, element = this.element;\n\n            if (v === undefined) {\n                return that.buffer;\n            }\n\n            var bar  = element.find(\".buffer\");\n\n            if (bar.length === 0) {\n                return false;\n            }\n\n            this.buffer = parseInt(v, 10);\n\n            bar.css(\"width\", this.buffer + \"%\");\n\n            this._fireEvent(\"buffer-change\", {\n                val: this.buffer\n            });\n\n            if (this.buffer === 100) {\n                this._fireEvent(\"buffered\", {\n                    val: this.buffer\n                });\n            }\n        },\n\n        changeValue: function(){\n            this.val(this.element.attr('data-value'));\n        },\n\n        changeBuffer: function(){\n            this.buff(this.element.attr('data-buffer'));\n        },\n\n        changeAttribute: function(attributeName){\n            switch (attributeName) {\n                case 'data-value': this.changeValue(); break;\n                case 'data-buffer': this.changeBuffer(); break;\n            }\n        },\n\n        destroy: function(){\n            return this.element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var RadioDefaultConfig = {\n        radioDeferred: 0,\n        transition: true,\n        style: 1,\n        caption: \"\",\n        captionPosition: \"right\",\n        clsRadio: \"\",\n        clsCheck: \"\",\n        clsCaption: \"\",\n        onRadioCreate: Metro.noop\n    };\n\n    Metro.radioSetup = function (options) {\n        RadioDefaultConfig = $.extend({}, RadioDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroRadioSetup\"] !== undefined) {\n        Metro.radioSetup(window[\"metroRadioSetup\"]);\n    }\n\n    Metro.Component('radio', {\n        init: function( options, elem ) {\n            this._super(elem, options, RadioDefaultConfig, {\n                origin: {\n                    className: \"\"\n                }\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"radio-create\", {\n                element: element\n            });\n        },\n\n        _createStructure: function(){\n            var element = this.element, o = this.options;\n            var radio = $(\"<label>\").addClass(\"radio \" + element[0].className).addClass(o.style === 2 ? \"style2\" : \"\");\n            var check = $(\"<span>\").addClass(\"check\");\n            var caption = $(\"<span>\").addClass(\"caption\").html(o.caption);\n\n            element.attr(\"type\", \"radio\");\n\n            radio.insertBefore(element);\n            element.appendTo(radio);\n            check.appendTo(radio);\n            caption.appendTo(radio);\n\n            if (o.transition === true) {\n                radio.addClass(\"transition-on\");\n            }\n\n            if (o.captionPosition === 'left') {\n                radio.addClass(\"caption-left\");\n            }\n\n            this.origin.className = element[0].className;\n            element[0].className = '';\n\n            radio.addClass(o.clsRadio);\n            caption.addClass(o.clsCaption);\n            check.addClass(o.clsCheck);\n\n            if (element.is(':disabled')) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        },\n\n        _createEvents: function(){\n            var element = this.element, check = element.siblings(\".check\");\n\n            element.on(\"focus\", function(){\n                check.addClass(\"focused\");\n            });\n\n            element.on(\"blur\", function(){\n                check.removeClass(\"focused\");\n            });\n        },\n\n        disable: function(){\n            this.element.data(\"disabled\", true);\n            this.element.parent().addClass(\"disabled\");\n        },\n\n        enable: function(){\n            this.element.data(\"disabled\", false);\n            this.element.parent().removeClass(\"disabled\");\n        },\n\n        toggleState: function(){\n            if (this.elem.disabled) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        },\n\n        changeAttribute: function(attributeName){\n            var element = this.element, o = this.options;\n            var parent = element.parent();\n\n            var changeStyle = function(){\n                var new_style = parseInt(element.attr(\"data-style\"));\n\n                if (!Utils.isInt(new_style)) return;\n\n                o.style = new_style;\n                parent.removeClass(\"style1 style2\").addClass(\"style\"+new_style);\n            };\n\n            switch (attributeName) {\n                case 'disabled': this.toggleState(); break;\n                case 'data-style': changeStyle(); break;\n            }\n        },\n\n        destroy: function(){\n            return this.element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var RatingDefaultConfig = {\n        ratingDeferred: 0,\n        label: \"\",\n        static: false,\n        title: null,\n        value: 0,\n        values: null,\n        message: \"\",\n        stars: 5,\n        starColor: null,\n        staredColor: null,\n        roundFunc: \"round\", // ceil, floor, round\n        half: true,\n        clsRating: \"\",\n        clsTitle: \"\",\n        clsStars: \"\",\n        clsResult: \"\",\n        clsLabel: \"\",\n        onStarClick: Metro.noop,\n        onRatingCreate: Metro.noop\n    };\n\n    Metro.ratingSetup = function (options) {\n        RatingDefaultConfig = $.extend({}, RatingDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroRatingSetup\"] !== undefined) {\n        Metro.ratingSetup(window[\"metroRatingSetup\"]);\n    }\n\n    Metro.Component('rating', {\n        init: function( options, elem ) {\n            this._super(elem, options, RatingDefaultConfig, {\n                value: 0,\n                originValue: 0,\n                values: [],\n                rate: 0,\n                rating: null\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n            var i;\n\n            if (isNaN(o.value)) {\n                o.value = 0;\n            } else {\n                o.value = parseFloat(o.value).toFixed(1);\n            }\n\n            if (o.values !== null) {\n                if (Array.isArray(o.values)) {\n                    this.values = o.values;\n                } else if (typeof o.values === \"string\") {\n                    this.values = o.values.toArray()\n                }\n            } else {\n                for(i = 1; i <= o.stars; i++) {\n                    this.values.push(i);\n                }\n            }\n\n            this.originValue = o.value;\n            this.value = o.value > 0 ? Math[o.roundFunc](o.value) : 0;\n\n            this._createRating();\n            this._createEvents();\n\n            this._fireEvent(\"rating-create\", {\n                element: element\n            });\n        },\n\n        _createRating: function(){\n            var element = this.element, o = this.options;\n\n            var id = Utils.elementId(\"rating\");\n            var rating = $(\"<div>\").addClass(\"rating \" + String(element[0].className).replace(\"d-block\", \"d-flex\")).addClass(o.clsRating);\n            var i, stars, result, li;\n            var sheet = Metro.sheet;\n            var value = o.static ? Math.floor(this.originValue) : this.value;\n\n            element.val(this.value);\n\n            rating.attr(\"id\", id);\n\n            rating.insertBefore(element);\n            element.appendTo(rating);\n\n            stars = $(\"<ul>\").addClass(\"stars\").addClass(o.clsStars).appendTo(rating);\n\n            for(i = 1; i <= o.stars; i++) {\n                li = $(\"<li>\").data(\"value\", this.values[i-1]).appendTo(stars);\n                if (i <= value) {\n                    li.addClass(\"on\");\n                }\n            }\n\n            result = $(\"<span>\").addClass(\"result\").addClass(o.clsResult).appendTo(rating);\n\n            result.html(o.message);\n\n            if (o.starColor !== null && Metro.colors.isColor(o.starColor)) {\n                Utils.addCssRule(sheet, \"#\" + id + \" .stars:hover li\", \"color: \" + o.starColor + \";\");\n            }\n            if (o.staredColor !== null && Metro.colors.isColor(o.staredColor)) {\n                Utils.addCssRule(sheet, \"#\"+id+\" .stars li.on\", \"color: \"+o.staredColor+\";\");\n                Utils.addCssRule(sheet, \"#\"+id+\" .stars li.half::after\", \"color: \"+o.staredColor+\";\");\n            }\n\n            if (o.title !== null) {\n                var title = $(\"<span>\").addClass(\"title\").addClass(o.clsTitle).html(o.title);\n                rating.prepend(title);\n            }\n\n            if (o.static === true) {\n                rating.addClass(\"static\");\n                if (o.half === true){\n                    var dec = Math.round((this.originValue % 1) * 10);\n                    if (dec > 0 && dec <= 9) {\n                        rating.find('.stars li.on').last().next(\"li\").addClass(\"half half-\" + ( dec * 10));\n                    }\n                }\n            }\n\n            element[0].className = '';\n            if (o.copyInlineStyles === true) {\n                for (i = 0; i < element[0].style.length; i++) {\n                    rating.css(element[0].style[i], element.css(element[0].style[i]));\n                }\n            }\n\n            if (o.label) {\n                var label = $(\"<label>\").addClass(\"label-for-input\").addClass(o.clsLabel).html(o.label).insertBefore(rating);\n                if (element.attr(\"id\")) {\n                    label.attr(\"for\", element.attr(\"id\"));\n                }\n                if (element.attr(\"dir\") === \"rtl\") {\n                    label.addClass(\"rtl\");\n                }\n            }\n\n            if (element.is(\":disabled\")) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n\n            this.rating = rating;\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var rating = this.rating;\n\n            rating.on(Metro.events.click, \".stars li\", function(){\n\n                if (o.static === true) {\n                    return ;\n                }\n\n                var star = $(this);\n                var value = star.data(\"value\");\n                star.addClass(\"scale\");\n                setTimeout(function(){\n                    star.removeClass(\"scale\");\n                }, 300);\n                element.val(value).trigger(\"change\");\n                star.addClass(\"on\");\n                star.prevAll().addClass(\"on\");\n                star.nextAll().removeClass(\"on\");\n\n                that._fireEvent(\"star-click\", {\n                    value: value,\n                    star: star[0]\n                });\n\n            });\n        },\n\n        val: function(v){\n            var that = this, element = this.element, o = this.options;\n            var rating = this.rating;\n\n            if (v === undefined) {\n                return this.value;\n            }\n\n            this.value = v > 0 ? Math[o.roundFunc](v) : 0;\n            element.val(this.value).trigger(\"change\");\n\n            var stars = rating.find(\".stars li\").removeClass(\"on\");\n            $.each(stars, function(){\n                var star = $(this);\n                if (star.data(\"value\") <= that.value) {\n                    star.addClass(\"on\");\n                }\n            });\n\n            return this;\n        },\n\n        msg: function(m){\n            var rating = this.rating;\n            if (m ===  undefined) {\n                return ;\n            }\n            rating.find(\".result\").html(m);\n            return this;\n        },\n\n        static: function (mode) {\n            var o = this.options;\n            var rating = this.rating;\n\n            o.static = mode;\n\n            if (mode === true) {\n                rating.addClass(\"static\");\n            } else {\n                rating.removeClass(\"static\");\n            }\n        },\n\n        changeAttributeValue: function(a){\n            var element = this.element;\n            var value = a === \"value\" ? element.val() : element.attr(\"data-value\");\n            this.val(value);\n        },\n\n        changeAttributeMessage: function(){\n            var element = this.element;\n            var message = element.attr(\"data-message\");\n            this.msg(message);\n        },\n\n        changeAttributeStatic: function(){\n            var element = this.element;\n            var isStatic = JSON.parse(element.attr(\"data-static\")) === true;\n\n            this.static(isStatic);\n        },\n\n        disable: function(){\n            this.element.data(\"disabled\", true);\n            this.element.parent().addClass(\"disabled\");\n        },\n\n        enable: function(){\n            this.element.data(\"disabled\", false);\n            this.element.parent().removeClass(\"disabled\");\n        },\n\n        toggleState: function(){\n            if (this.elem.disabled) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        },\n\n        changeAttribute: function(attributeName){\n            switch (attributeName) {\n                case \"value\":\n                case \"data-value\": this.changeAttributeValue(attributeName); break;\n                case \"disabled\": this.toggleState(); break;\n                case \"data-message\": this.changeAttributeMessage(); break;\n                case \"data-static\": this.changeAttributeStatic(); break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element;\n            var rating = this.rating;\n\n            rating.off(Metro.events.click, \".stars li\");\n\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var ResizableDefaultConfig = {\n        resizableDeferred: 0,\n        canResize: true,\n        resizeElement: \".resize-element\",\n        minWidth: 0,\n        minHeight: 0,\n        maxWidth: 0,\n        maxHeight: 0,\n        preserveRatio: false,\n        onResizeStart: Metro.noop,\n        onResizeStop: Metro.noop,\n        onResize: Metro.noop,\n        onResizableCreate: Metro.noop\n    };\n\n    Metro.resizableSetup = function (options) {\n        ResizableDefaultConfig = $.extend({}, ResizableDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroResizableSetup\"] !== undefined) {\n        Metro.resizableSetup(window[\"metroResizableSetup\"]);\n    }\n\n    Metro.Component('resizable', {\n        init: function( options, elem ) {\n            this._super(elem, options, ResizableDefaultConfig, {\n                resizer: null,\n                id: Utils.elementId(\"resizable\")\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"resizable-create\");\n        },\n\n        _createStructure: function(){\n            var element = this.element, o = this.options;\n\n            element.data(\"canResize\", true);\n            element.addClass(\"resizable-element\");\n\n            if (Utils.isValue(o.resizeElement) && element.find(o.resizeElement).length > 0) {\n                this.resizer = element.find(o.resizeElement);\n            } else {\n                this.resizer = $(\"<span>\").addClass(\"resize-element\").appendTo(element);\n            }\n\n            element.data(\"canResize\", o.canResize);\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n\n            this.resizer.on(Metro.events.start, function(e){\n\n                if (element.data('canResize') === false) {\n                    return ;\n                }\n\n                var startXY = Utils.pageXY(e);\n                var startWidth = parseInt(element.outerWidth());\n                var startHeight = parseInt(element.outerHeight());\n                var size = {width: startWidth, height: startHeight};\n\n                element.addClass(\"stop-pointer\");\n\n                that._fireEvent(\"resize-start\", {\n                    size: size\n                });\n\n                $(document).on(Metro.events.move, function(e){\n                    var moveXY = Utils.pageXY(e);\n                    var size = {\n                        width: startWidth + moveXY.x - startXY.x,\n                        height: startHeight + moveXY.y - startXY.y\n                    };\n\n                    if (o.maxWidth > 0 && size.width > o.maxWidth) {return true;}\n                    if (o.minWidth > 0 && size.width < o.minWidth) {return true;}\n\n                    if (o.maxHeight > 0 && size.height > o.maxHeight) {return true;}\n                    if (o.minHeight > 0 && size.height < o.minHeight) {return true;}\n\n                    element.css(size);\n\n                    that._fireEvent(\"resize\", {\n                        size: size\n                    })\n\n                }, {ns: that.id});\n\n                $(document).on(Metro.events.stop, function(){\n                    element.removeClass(\"stop-pointer\");\n\n                    $(document).off(Metro.events.move, {ns: that.id});\n                    $(document).off(Metro.events.stop, {ns: that.id});\n\n                    var size = {\n                        width: parseInt(element.outerWidth()),\n                        height: parseInt(element.outerHeight())\n                    };\n\n                    that._fireEvent(\"resize-stop\", {\n                        size: size\n                    });\n\n                }, {ns: that.id});\n\n                e.preventDefault();\n                e.stopPropagation();\n            });\n\n        },\n\n        off: function(){\n            this.element.data(\"canResize\", false);\n        },\n\n        on: function(){\n            this.element.data(\"canResize\", true);\n        },\n\n        changeAttribute: function(attributeName){\n            var element = this.element, o = this.options;\n\n            var canResize = function(){\n                o.canResize = JSON.parse(element.attr('data-can-resize')) === true;\n            };\n\n            switch (attributeName) {\n                case \"data-can-resize\": canResize(); break;\n            }\n        },\n\n        destroy: function(){\n            this.resizer.off(Metro.events.start);\n            return this.element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var ResizerDefaultConfig = {\n        resizerDeferred: 0,\n        onMediaPoint: Metro.noop,\n        onMediaPointEnter: Metro.noop,\n        onMediaPointLeave: Metro.noop,\n        onWindowResize: Metro.noop,\n        onElementResize: Metro.noop,\n        onResizerCreate: Metro.noop\n    };\n\n    Metro.resizerSetup = function (options) {\n        ResizerDefaultConfig = $.extend({}, ResizerDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroResizerSetup\"] !== undefined) {\n        Metro.resizerSetup(window[\"metroResizerSetup\"]);\n    }\n\n    Metro.Component('resizer', {\n        init: function( options, elem ) {\n            this._super(elem, options, ResizerDefaultConfig, {\n                size: {width: 0, height: 0},\n                media: window.METRO_MEDIA,\n                id: Utils.elementId(\"resizer\")\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this.size = {\n                width: element.width(),\n                height: element.height()\n            };\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"resizer-create\", {\n                element: element\n            });\n        },\n\n        _createStructure: function(){\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element;\n            var win = $.window();\n\n            win.on(\"resize\", function(){\n                var windowWidth = win.width(), windowHeight = win.height();\n                var elementWidth = element.width(), elementHeight = element.height();\n                var oldSize = that.size;\n                var point;\n\n                that._fireEvent(\"window-resize\", {\n                    width: windowWidth,\n                    height: windowHeight,\n                    media: window.METRO_MEDIA\n                });\n\n                if (that.size.width !== elementWidth || that.size.height !== elementHeight) {\n                    that.size = {\n                        width: elementWidth,\n                        height: elementHeight\n                    };\n\n                    that._fireEvent(\"element-resize\", {\n                        width: elementWidth,\n                        height: elementHeight,\n                        oldSize: oldSize,\n                        media: window.METRO_MEDIA\n                    });\n\n                }\n\n                if (that.media.length !== window.METRO_MEDIA.length) {\n                    if (that.media.length > window.METRO_MEDIA.length) {\n                        point = that.media.filter(function(x){\n                            return !window.METRO_MEDIA.includes(x);\n                        });\n\n                        that._fireEvent(\"media-point-leave\", {\n                            point: point,\n                            media: window.METRO_MEDIA\n                        });\n\n                    } else {\n                        point = window.METRO_MEDIA.filter(function(x){\n                            return !that.media.includes(x);\n                        });\n\n                        that._fireEvent(\"media-point-enter\", {\n                            point: point,\n                            media: window.METRO_MEDIA\n                        });\n                    }\n\n                    that.media = window.METRO_MEDIA;\n\n                    that._fireEvent(\"media-point\", {\n                        point: point,\n                        media: window.METRO_MEDIA\n                    });\n                }\n            }, {ns: this.id});\n        },\n\n        changeAttribute: function(){\n        },\n\n        destroy: function(){\n            $(window).off(\"resize\", {ns: this.id});\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var RibbonMenuDefaultConfig = {\n        ribbonmenuDeferred: 0,\n        onStatic: Metro.noop,\n        onBeforeTab: Metro.noop_true,\n        onTab: Metro.noop,\n        onRibbonMenuCreate: Metro.noop\n    };\n\n    Metro.ribbonMenuSetup = function (options) {\n        RibbonMenuDefaultConfig = $.extend({}, RibbonMenuDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroRibbonMenuSetup\"] !== undefined) {\n        Metro.ribbonMenuSetup(window[\"metroRibbonMenuSetup\"]);\n    }\n\n    Metro.Component('ribbon-menu', {\n        init: function( options, elem ) {\n            this._super(elem, options, RibbonMenuDefaultConfig);\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"ribbon-menu-create\", {\n                element: element\n            });\n        },\n\n        _createStructure: function(){\n            var element = this.element;\n\n            element.addClass(\"ribbon-menu\");\n\n            var tabs = element.find(\".tabs-holder li:not(.static)\");\n            var active_tab = element.find(\".tabs-holder li.active\");\n            if (active_tab.length > 0) {\n                this.open($(active_tab[0]));\n            } else {\n                if (tabs.length > 0) {\n                    this.open($(tabs[0]));\n                }\n            }\n\n            var fluentGroups = element.find(\".ribbon-toggle-group\");\n            $.each(fluentGroups, function(){\n                var g = $(this);\n                g.buttongroup({\n                    clsActive: \"active\"\n                });\n\n                var gw = 0;\n                var btns = g.find(\".ribbon-icon-button\");\n                $.each(btns, function(){\n                    var b = $(this);\n                    var w = b.outerWidth(true);\n                    if (w > gw) gw = w;\n                });\n\n                g.css(\"width\", gw * Math.ceil(btns.length / 3) + 4);\n            });\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n\n            element.on(Metro.events.click, \".tabs-holder li a\", function(e){\n                var link = $(this);\n                var tab = $(this).parent(\"li\");\n\n                if (tab.hasClass(\"static\")) {\n                    if (o.onStatic === Metro.noop && link.attr(\"href\") !== undefined) {\n                        document.location.href = link.attr(\"href\");\n                    } else {\n                        that._fireEvent(\"static\", {\n                            tab: tab[0]\n                        });\n                    }\n                } else {\n                    if (Utils.exec(o.onBeforeTab, [tab[0]], element[0]) === true) {\n                        that.open(tab[0]);\n                    }\n                }\n                e.preventDefault();\n            })\n        },\n\n        open: function(tab){\n            var element = this.element;\n            var $tab = $(tab);\n            var tabs = element.find(\".tabs-holder li\");\n            var sections = element.find(\".content-holder .section\");\n            var target = $tab.children(\"a\").attr(\"href\");\n            var target_section = target !== \"#\" ? element.find(target) : null;\n\n            tabs.removeClass(\"active\");\n            $tab.addClass(\"active\");\n\n            sections.removeClass(\"active\");\n            if (target_section) target_section.addClass(\"active\");\n\n            this._fireEvent(\"tab\", {\n                tab: $tab[0]\n            });\n        },\n\n        changeAttribute: function(){\n        },\n\n        destroy: function(){\n            var element = this.element;\n            element.off(Metro.events.click, \".tabs-holder li a\");\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var RippleDefaultConfig = {\n        rippleDeferred: 0,\n        rippleColor: \"#fff\",\n        rippleAlpha: .4,\n        rippleTarget: \"default\",\n        onRippleCreate: Metro.noop\n    };\n\n    Metro.rippleSetup = function (options) {\n        RippleDefaultConfig = $.extend({}, RippleDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroRippleSetup\"] !== undefined) {\n        Metro.rippleSetup(window[\"metroRippleSetup\"]);\n    }\n\n    var getRipple = function(target, color, alpha, event){\n        var el = $(target);\n        var rect = Utils.rect(el[0]);\n        var x, y;\n        var Colors = Metro.colors;\n\n        if (el.length === 0) {\n            return ;\n        }\n\n        if (!Utils.isValue(color)) {\n            color = \"#fff\";\n        }\n\n        if (!Utils.isValue(alpha)) {\n            alpha = .4;\n        }\n\n        if (el.css('position') === 'static') {\n            el.css('position', 'relative');\n        }\n\n        el.css({\n            overflow: 'hidden'\n        });\n\n        $(\".ripple\").remove();\n\n        var size = Math.max(el.outerWidth(), el.outerHeight());\n\n        // Add the element\n        var ripple = $(\"<span class='ripple'></span>\").css({\n            width: size,\n            height: size\n        });\n\n        el.prepend(ripple);\n\n        if (event) {\n            // Get touch point x, y\n            x = event.pageX - el.offset().left - ripple.width()/2;\n            y = event.pageY - el.offset().top - ripple.height()/2;\n        } else {\n            // Get the center of the element\n            x = rect.width / 2 - ripple.width()/2;\n            y = rect.height / 2 - ripple.height()/2;\n        }\n\n        ripple.css({\n            background: Colors.toRGBA(color, alpha),\n            width: size,\n            height: size,\n            top: y + 'px',\n            left: x + 'px'\n        }).addClass(\"rippleEffect\");\n\n        setTimeout(function(){\n            ripple.remove();\n        }, 400);\n    };\n\n    Metro.Component('ripple', {\n        init: function( options, elem ) {\n            this._super(elem, options, RippleDefaultConfig);\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n            var target = o.rippleTarget === 'default' ? null : o.rippleTarget;\n\n            element.on(Metro.events.click, target, function(e){\n                getRipple(this, o.rippleColor, o.rippleAlpha, e);\n            });\n\n            this._fireEvent(\"riopple-create\", {\n                element: element\n            });\n        },\n\n        changeAttribute: function(attributeName){\n            var element = this.element, o = this.options;\n\n            function changeColor(){\n                var color = element.attr(\"data-ripple-color\");\n                if (!Metro.colors.isColor(color)) {\n                    return;\n                }\n                o.rippleColor = color;\n            }\n\n            function changeAlpha(){\n                var alpha = +element.attr(\"data-ripple-alpha\");\n                if (isNaN(alpha)) {\n                    return;\n                }\n                o.rippleColor = alpha;\n            }\n\n            switch (attributeName) {\n                case \"data-ripple-color\": changeColor(); break;\n                case \"data-ripple-alpha\": changeAlpha(); break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element, o = this.options;\n            var target = o.rippleTarget === 'default' ? null : o.rippleTarget;\n            element.off(Metro.events.click, target);\n        }\n    });\n\n    Metro.ripple = getRipple;\n}(Metro, m4q));\r\n\r\n/* eslint-disable */\n(function(Metro, $) {\n    'use strict';\n\n    var SearcherDefaultConfig = {\n        onSearcherCreate: Metro.noop\n    };\n\n    Metro.searcherSetup = function (options) {\n        SearcherDefaultConfig = $.extend({}, SearcherDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroSearcherSetup\"] !== undefined) {\n        Metro.searcherSetup(window[\"metroSearcherSetup\"]);\n    }\n\n    Metro.Component('searcher', {\n        init: function( options, elem ) {\n            this._super(elem, options, SearcherDefaultConfig, {\n                // define instance vars here\n            });\n            return this;\n        },\n\n        _create: function(){\n            var that = this, element = this.element, o = this.options;\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent('searcher-create');\n        },\n\n        _createStructure: function(){\n            var that = this, element = this.element, o = this.options;\n\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n\n        },\n\n        changeAttribute: function(attr, newValue){\n        },\n\n        destroy: function(){\n            this.element.remove();\n        }\n    });\n}(Metro, m4q));\n/* eslint-enable */\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var SelectDefaultConfig = {\n        label: \"\",\n        size: \"normal\",\n        selectDeferred: 0,\n        clearButton: false,\n        clearButtonIcon: \"<span class='default-icon-cross'></span>\",\n        usePlaceholder: false,\n        placeholder: \"\",\n        addEmptyValue: false,\n        emptyValue: \"\",\n        duration: 0,\n        prepend: \"\",\n        append: \"\",\n        filterPlaceholder: \"Search...\",\n        filter: true,\n        copyInlineStyles: false,\n        dropHeight: 200,\n        dropWidth: null,\n        dropFullSize: false,\n        checkDropUp: true,\n        dropUp: false,\n        showGroupName: false,\n        shortTag: true,\n\n        clsSelect: \"\",\n        clsSelectInput: \"\",\n        clsPrepend: \"\",\n        clsAppend: \"\",\n        clsOption: \"\",\n        clsOptionActive: \"\",\n        clsOptionGroup: \"\",\n        clsDropList: \"\",\n        clsDropContainer: \"\",\n        clsSelectedItem: \"\",\n        clsSelectedItemRemover: \"\",\n        clsLabel: \"\",\n        clsGroupName: \"\",\n\n        onClear: Metro.noop,\n        onChange: Metro.noop,\n        onUp: Metro.noop,\n        onDrop: Metro.noop,\n        onItemSelect: Metro.noop,\n        onItemDeselect: Metro.noop,\n        onSelectCreate: Metro.noop\n    };\n\n    Metro.selectSetup = function (options) {\n        SelectDefaultConfig = $.extend({}, SelectDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroSelectSetup\"] !== undefined) {\n        Metro.selectSetup(window[\"metroSelectSetup\"]);\n    }\n\n    Metro.Component('select', {\n        init: function( options, elem ) {\n            this._super(elem, options, SelectDefaultConfig, {\n                list: null,\n                placeholder: null\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this._createSelect();\n            this._createEvents();\n\n            this._fireEvent(\"select-create\", {\n                element: element\n            });\n        },\n\n        _setPlaceholder: function(){\n            var element = this.element, o = this.options;\n            var input = element.siblings(\".select-input\");\n            if (o.usePlaceholder === true && (!Utils.isValue(element.val()) || element.val() == o.emptyValue)) {\n                input.html(this.placeholder);\n            }\n        },\n\n        _addTag: function(val, data){\n            var element = this.element, o = this.options;\n            var tag, tagSize, container = element.closest(\".select\");\n            tag = $(\"<div>\").addClass(\"tag\").addClass(o.shortTag ? \"short-tag\" : \"\").addClass(o.clsSelectedItem).html(\"<span class='title'>\"+val+\"</span>\").data(\"option\", data);\n            $(\"<span>\").addClass(\"remover\").addClass(o.clsSelectedItemRemover).html(\"&times;\").appendTo(tag);\n\n            if (container.hasClass(\"input-large\")) {\n                tagSize = \"large\";\n            } else if (container.hasClass(\"input-small\")) {\n                tagSize = \"small\"\n            }\n\n            tag.addClass(tagSize);\n\n            return tag;\n        },\n\n        _addOption: function(item, parent, input, multiple, group){\n            var option = $(item);\n            var l, a;\n            var element = this.element, o = this.options;\n            var html = Utils.isValue(option.attr('data-template')) ? option.attr('data-template').replace(\"$1\", item.text):item.text;\n            var displayValue = option.attr(\"data-display\");\n\n            l = $(\"<li>\").addClass(o.clsOption).data(\"option\", item).attr(\"data-text\", item.text).attr('data-value', item.value ? item.value : \"\");\n            a = $(\"<a>\").html(html);\n\n            if (displayValue) {\n                l.attr(\"data-display\", displayValue);\n                html = displayValue;\n            }\n\n            l.addClass(item.className);\n\n            l.data(\"group\", group);\n\n            if (option.is(\":disabled\")) {\n                l.addClass(\"disabled\");\n            }\n\n            if (option.is(\":selected\")) {\n\n                if (o.showGroupName && group) {\n                    html += \"&nbsp;<span class='selected-item__group-name \"+o.clsGroupName+\"'>\" + group + \"</span>\";\n                }\n\n                if (multiple) {\n                    l.addClass(\"d-none\");\n                    input.append(this._addTag(html, l));\n                } else {\n                    element.val(item.value);\n                    input.html(html);\n                    element.fire(\"change\", {\n                        val: item.value\n                    });\n                    l.addClass(\"active\");\n                }\n            }\n\n            l.append(a).appendTo(parent);\n        },\n\n        _addOptionGroup: function(item, parent, input, multiple){\n            var that = this, o = this.options;\n            var group = $(item);\n\n            $(\"<li>\").html(item.label).addClass(\"group-title\").addClass(o.clsOptionGroup).appendTo(parent);\n\n            $.each(group.children(), function(){\n                that._addOption(this, parent, input, multiple, item.label);\n            })\n        },\n\n        _createOptions: function(){\n            var that = this, element = this.element, o = this.options, select = element.parent();\n            var list = select.find(\"ul\").empty();\n            var selected = element.find(\"option[selected]\").length > 0;\n            var multiple = element[0].multiple;\n            var input = element.siblings(\".select-input\");\n\n            element.siblings(\".select-input\").empty();\n\n            if (o.addEmptyValue === true) {\n                element.prepend($(\"<option \"+(!selected ? 'selected' : '')+\" value='\"+o.emptyValue+\"' class='d-none'></option>\"));\n            }\n\n            $.each(element.children(), function(){\n                if (this.tagName === \"OPTION\") {\n                    that._addOption(this, list, input, multiple, null);\n                } else if (this.tagName === \"OPTGROUP\") {\n                    that._addOptionGroup(this, list, input, multiple);\n                }\n            });\n        },\n\n        _createSelect: function(){\n            var that = this, element = this.element, o = this.options;\n\n            var container = $(\"<label>\").addClass(\"select \" + element[0].className).addClass(o.clsSelect);\n            var multiple = element[0].multiple;\n            var select_id = Utils.elementId(\"select\");\n            var buttons = $(\"<div>\").addClass(\"button-group\");\n            var input, drop_container, drop_container_input, list, filter_input, dropdown_toggle;\n            var checkboxID = Utils.elementId(\"select-focus-trigger\");\n            var checkbox = $(\"<input type='checkbox'>\").addClass(\"select-focus-trigger\").attr(\"id\", checkboxID);\n\n            this.placeholder = $(\"<span>\").addClass(\"placeholder\").html(o.placeholder);\n\n            container.attr(\"id\", select_id).attr(\"for\", checkboxID);\n            container.addClass(\"input-\" + o.size);\n\n            dropdown_toggle = $(\"<span>\").addClass(\"dropdown-toggle\");\n            dropdown_toggle.appendTo(container);\n\n            if (multiple) {\n                container.addClass(\"multiple\");\n            }\n\n            container.insertBefore(element);\n            element.appendTo(container);\n            buttons.appendTo(container);\n            checkbox.appendTo(container);\n\n            input = $(\"<div>\").addClass(\"select-input\").addClass(o.clsSelectInput).attr(\"name\", \"__\" + select_id + \"__\");\n            drop_container = $(\"<div>\").addClass(\"drop-container\").addClass(o.clsDropContainer);\n\n            if (o.dropFullSize === false) {\n                if (o.dropWidth) {\n                    drop_container.css({\n                        width: +o.dropWidth\n                    })\n                }\n            } else {\n                container.addClass(\"drop-full-size\")\n            }\n\n            drop_container_input = $(\"<div>\").appendTo(drop_container);\n            list = $(\"<ul>\").addClass(\"option-list\").addClass(o.clsDropList).css({\n                \"max-height\": o.dropHeight\n            });\n            filter_input = $(\"<input type='text' data-role='input'>\").attr(\"placeholder\", o.filterPlaceholder).appendTo(drop_container_input);\n\n            container.append(input);\n            container.append(drop_container);\n\n            drop_container.append(drop_container_input);\n\n            if (o.filter !== true) {\n                drop_container_input.hide();\n            }\n\n            drop_container.append(list);\n\n            this._createOptions();\n\n            this._setPlaceholder();\n\n            Metro.makePlugin(drop_container, \"dropdown\", {\n                dropFilter: \".select\",\n                duration: o.duration,\n                toggleElement: [container],\n                checkDropUp: o.checkDropUp,\n                dropUp: o.dropUp,\n                onDrop: function(){\n                    var dropped, target;\n                    dropdown_toggle.addClass(\"active-toggle\");\n                    dropped = $(\".select .drop-container\");\n                    $.each(dropped, function(){\n                        var drop = $(this);\n                        if (drop.is(drop_container)) {\n                            return ;\n                        }\n                        var dataDrop = Metro.getPlugin(drop, 'dropdown');\n                        if (dataDrop && dataDrop.close) {\n                            dataDrop.close();\n                        }\n                    });\n\n                    filter_input.val(\"\").trigger(Metro.events.keyup);//.focus();\n\n                    target = list.find(\"li.active\").length > 0 ? $(list.find(\"li.active\")[0]) : undefined;\n                    if (target !== undefined) {\n                        list[0].scrollTop = target.position().top - ( (list.height() - target.height() )/ 2);\n                    }\n\n                    that._fireEvent(\"drop\", {\n                        list: list[0]\n                    });\n                },\n                onUp: function(){\n                    dropdown_toggle.removeClass(\"active-toggle\");\n\n                    that._fireEvent(\"up\", {\n                        list: list[0]\n                    });\n                }\n            });\n\n            this.list = list;\n\n            if (o.clearButton === true && !element[0].readOnly) {\n                var clearButton = $(\"<button>\").addClass(\"button input-clear-button\").addClass(o.clsClearButton).attr(\"tabindex\", -1).attr(\"type\", \"button\").html(o.clearButtonIcon);\n                clearButton.appendTo(buttons);\n            } else {\n                buttons.addClass(\"d-none\");\n            }\n\n            if (o.prepend !== \"\" && !multiple) {\n                var prepend = $(\"<div>\").html(o.prepend);\n                prepend.addClass(\"prepend\").addClass(o.clsPrepend).appendTo(container);\n            }\n\n            if (o.append !== \"\" && !multiple) {\n                var append = $(\"<div>\").html(o.append);\n                append.addClass(\"append\").addClass(o.clsAppend).appendTo(container);\n            }\n\n            if (o.copyInlineStyles === true) {\n                for (var i = 0, l = element[0].style.length; i < l; i++) {\n                    container.css(element[0].style[i], element.css(element[0].style[i]));\n                }\n            }\n\n            if (element.attr('dir') === 'rtl' ) {\n                container.addClass(\"rtl\").attr(\"dir\", \"rtl\");\n            }\n\n            if (o.label) {\n                var label = $(\"<label>\").addClass(\"label-for-input\").addClass(o.clsLabel).html(o.label).insertBefore(container);\n                if (element.attr(\"id\")) {\n                    label.attr(\"for\", element.attr(\"id\"));\n                }\n                if (element.attr(\"dir\") === \"rtl\") {\n                    label.addClass(\"rtl\");\n                }\n            }\n\n            if (element.is(':disabled')) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var container = element.closest(\".select\");\n            var drop_container = container.find(\".drop-container\");\n            var input = element.siblings(\".select-input\");\n            var filter_input = drop_container.find(\"input\");\n            var list = drop_container.find(\"ul\");\n            var clearButton = container.find(\".input-clear-button\");\n            var checkbox = container.find(\".select-focus-trigger\");\n\n            checkbox.on(\"focus\", function(){\n                container.addClass(\"focused\");\n            });\n\n            checkbox.on(\"blur\", function(){\n                container.removeClass(\"focused\");\n            });\n\n            clearButton.on(Metro.events.click, function(e){\n                element.val(o.emptyValue);\n                if (element[0].multiple) {\n                    list.find(\"li\").removeClass(\"d-none\");\n                }\n\n                input.clear();\n                that._setPlaceholder();\n\n                e.preventDefault();\n                e.stopPropagation();\n\n                that._fireEvent(\"clear\");\n                that._fireEvent(\"change\", {\n                    selected: that.getSelected()\n                });\n            });\n\n            element.on(Metro.events.change, function(){\n                that._setPlaceholder();\n            });\n\n            container.on(Metro.events.click, function(){\n                $(\".focused\").removeClass(\"focused\");\n                container.addClass(\"focused\");\n            });\n\n            input.on(Metro.events.click, function(){\n                $(\".focused\").removeClass(\"focused\");\n                container.addClass(\"focused\");\n            });\n\n            list.on(Metro.events.click, \"li\", function(e){\n                if ($(this).hasClass(\"group-title\")) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    return ;\n                }\n                var leaf = $(this);\n                var displayValue = leaf.attr(\"data-display\");\n                var val = leaf.data('value');\n                var group = leaf.data('group');\n                var html = displayValue ? displayValue : leaf.children('a').html();\n                var selected;\n                var option = leaf.data(\"option\");\n                var options = element.find(\"option\");\n\n                if (o.showGroupName && group) {\n                    html += \"&nbsp;<span class='selected-item__group-name \"+o.clsGroupName+\"'>\" + group + \"</span>\";\n                }\n\n                if (element[0].multiple) {\n                    leaf.addClass(\"d-none\");\n                    input.append(that._addTag(html, leaf));\n                } else {\n                    list.find(\"li.active\").removeClass(\"active\").removeClass(o.clsOptionActive);\n                    leaf.addClass(\"active\").addClass(o.clsOptionActive);\n                    input.html(html);\n                    Metro.getPlugin(drop_container, \"dropdown\").close();\n                }\n\n                $.each(options, function(){\n                    if (this === option) {\n                        this.selected = true;\n                    }\n                });\n\n                that._fireEvent(\"item-select\", {\n                    val: val,\n                    option: option,\n                    leaf: leaf[0]\n                });\n\n                selected = that.getSelected();\n\n                that._fireEvent(\"change\", {\n                    selected: selected\n                });\n            });\n\n            input.on(\"click\", \".tag .remover\", function(e){\n                var item = $(this).closest(\".tag\");\n                var leaf = item.data(\"option\");\n                var option = leaf.data('option');\n                var selected;\n\n                leaf.removeClass(\"d-none\");\n                $.each(element.find(\"option\"), function(){\n                    if (this === option) {\n                        this.selected = false;\n                    }\n                });\n                item.remove();\n\n                that._fireEvent(\"item-deselect\", {\n                    option: option\n                });\n\n                selected = that.getSelected();\n\n                that._fireEvent(\"change\", {\n                    selected: selected\n                });\n\n                e.preventDefault();\n                e.stopPropagation();\n            });\n\n            filter_input.on(Metro.events.keyup, function(){\n                var filter = this.value.toUpperCase();\n                var li = list.find(\"li\");\n                var i, a;\n                for (i = 0; i < li.length; i++) {\n                    if ($(li[i]).hasClass(\"group-title\")) continue;\n                    a = li[i].getElementsByTagName(\"a\")[0];\n                    if (a.innerHTML.toUpperCase().indexOf(filter) > -1) {\n                        li[i].style.display = \"\";\n                    } else {\n                        li[i].style.display = \"none\";\n                    }\n                }\n            });\n\n            filter_input.on(Metro.events.click, function(e){\n                e.preventDefault();\n                e.stopPropagation();\n            });\n\n            drop_container.on(Metro.events.click, function(e){\n                e.preventDefault();\n                e.stopPropagation();\n            });\n        },\n\n        disable: function(){\n            this.element.data(\"disabled\", true);\n            this.element.closest(\".select\").addClass(\"disabled\");\n        },\n\n        enable: function(){\n            this.element.data(\"disabled\", false);\n            this.element.closest(\".select\").removeClass(\"disabled\");\n        },\n\n        toggleState: function(){\n            if (this.elem.disabled) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        },\n\n        reset: function(to_default){\n            var element = this.element;\n            var options = element.find(\"option\");\n            var select = element.closest('.select');\n            var selected;\n\n            $.each(options, function(){\n                this.selected = !Utils.isNull(to_default) ? this.defaultSelected : false;\n            });\n\n            this.list.find(\"li\").remove();\n            select.find(\".select-input\").html('');\n\n            this._createOptions();\n\n            selected = this.getSelected();\n\n            this._fireEvent(\"change\", {\n                selected: selected\n            });\n        },\n\n        getSelected: function(){\n            var element = this.element;\n            var result = [];\n\n            element.find(\"option\").each(function(){\n                if (this.selected) result.push(this.value);\n            });\n\n            return result;\n        },\n\n        val: function(val){\n            var that = this, element = this.element, o = this.options;\n            var input = element.siblings(\".select-input\");\n            var options = element.find(\"option\");\n            var list_items = this.list.find(\"li\");\n            var result = [];\n            var multiple = element.attr(\"multiple\") !== undefined;\n            var option;\n            var i, html, list_item, option_value, selected, group;\n\n            if (Utils.isNull(val)) {\n                $.each(options, function(){\n                    if (this.selected) result.push(this.value);\n                });\n                return multiple ? result : result[0];\n            }\n\n            $.each(options, function(){\n                this.selected = false;\n            });\n            list_items.removeClass(\"active\").removeClass(o.clsOptionActive);\n            input.html('');\n\n            if (Array.isArray(val) === false) {\n                val  = [val];\n            }\n\n            $.each(val, function(){\n                for (i = 0; i < options.length; i++) {\n                    option = options[i];\n                    html = Utils.isValue(option.getAttribute('data-template')) ? option.getAttribute('data-template').replace(\"$1\", option.text) : option.text;\n                    if (\"\"+option.value === \"\"+this) {\n                        option.selected = true;\n                        break;\n                    }\n                }\n\n                for(i = 0; i < list_items.length; i++) {\n                    list_item = $(list_items[i]);\n                    group = list_item.data(\"group\");\n                    option_value = list_item.attr(\"data-value\");\n                    if (\"\"+option_value === \"\"+this) {\n\n                        if (o.showGroupName && group) {\n                            html += \"&nbsp;<span class='selected-item__group-name'>\" + group + \"</span>\";\n                        }\n\n                        if (multiple) {\n                            list_item.addClass(\"d-none\");\n                            input.append(that._addTag(html, list_item));\n\n                            // tag = $(\"<div>\").addClass(\"tag\").addClass(o.clsSelectedItem).html(\"<span class='title'>\"+html+\"</span>\").appendTo(input);\n                            // tag.data(\"option\", list_item);\n                            // $(\"<span>\").addClass(\"remover\").addClass(o.clsSelectedItemRemover).html(\"&times;\").appendTo(tag);\n                        } else {\n                            list_item.addClass(\"active\").addClass(o.clsOptionActive);\n                            input.html(html);\n                        }\n                        break;\n                    }\n                }\n            });\n\n            selected = this.getSelected();\n\n            this._fireEvent(\"change\", {\n                selected: selected\n            });\n        },\n\n        options: function(op, selected, delimiter){\n            return this.data(op, selected, delimiter);\n        },\n\n        data: function(op, selected, delimiter){\n            var element = this.element;\n            var option_group, _selected;\n            var _delimiter = delimiter || \",\";\n\n            if (typeof selected === \"string\") {\n                _selected = selected.toArray(_delimiter).map(function(v){\n                    return isNaN(v) ? v : +v;\n                });\n            } else if (Array.isArray(selected)) {\n                _selected = selected.slice().map(function(v){\n                    return isNaN(v) ? v : +v;\n                });\n            } else {\n                _selected = [];\n            }\n\n            element.empty();\n\n            if (typeof op === 'string') {\n                element.html(op);\n            } else if (Utils.isObject2(op)) {\n                $.each(op, function(key, val){\n                    if (Utils.isObject2(val)) {\n                        option_group = $(\"<optgroup label=''>\").attr(\"label\", key).appendTo(element);\n                        $.each(val, function(key2, val2){\n                            var op = $(\"<option>\").attr(\"value\", key2).text(val2).appendTo(option_group);\n                            if (_selected.indexOf(+key2) > -1) {\n                                op.prop(\"selected\", true);\n                            }\n                        });\n                    } else {\n                        var op = $(\"<option>\").attr(\"value\", key).text(val).appendTo(element);\n                        if (_selected.indexOf(key) > -1) {\n                            op.prop(\"selected\", true);\n                        }\n                    }\n                });\n            }\n\n            this._createOptions();\n\n            return this;\n        },\n\n        addOption: function(val, title, selected){\n            var element = this.element;\n            var option = $(\"<option>\").attr(\"value\", val).text(title ? title : val)\n\n            element.append(option)\n\n            if (selected) {\n                option.prop(\"selected\", true)\n            }\n\n            this._createOptions();\n\n            return this;\n        },\n\n        addOptions: function(values){\n            var that = this;\n\n            if (!values) {\n                return this;\n            }\n\n            if (Array.isArray(values)) {\n                $.each(values, function(){\n                    var o = this;\n                    if (Metro.utils.isObject2(o)) {\n                        that.addOption(o.val, o.title, o.selected)\n                    } else {\n                        that.addOption(o)\n                    }\n                })\n            } else if (Metro.utils.isObject2(values)) {\n                $.each(values, function(key, val){\n                    that.addOption(key, val);\n                })\n            }\n\n            return this;\n        },\n\n        removeOption: function(val){\n            var element = this.element;\n            var options = element.find(\"option\")\n\n            options.each(function(){\n                var $el = $(this)\n\n                if ($el.attr(\"value\") == val) {\n                    $el.remove()\n                }\n            })\n\n            this._createOptions();\n\n            return this;\n        },\n\n        removeOptions: function(values){\n            var element = this.element;\n            var options = element.find(\"option\")\n\n            if (!values || !Array.isArray(values)) {\n                return this;\n            }\n\n            options.each(function(){\n                var $el = $(this);\n                var val = $el.attr(\"value\");\n\n                if (values.indexOf(val) > -1) {\n                    $el.remove()\n                }\n            })\n\n            this._createOptions();\n\n            return this;\n        },\n\n        changeAttribute: function(attributeName){\n            if (attributeName === 'disabled') {\n                this.toggleState();\n            }\n        },\n\n        destroy: function(){\n            var element = this.element;\n            var container = element.closest(\".select\");\n            var drop_container = container.find(\".drop-container\");\n            var input = element.siblings(\".select-input\");\n            var filter_input = drop_container.find(\"input\");\n            var list = drop_container.find(\"ul\");\n            var clearButton = container.find(\".input-clear-button\");\n\n            container.off(Metro.events.click);\n            container.off(Metro.events.click, \".input-clear-button\");\n            input.off(Metro.events.click);\n            filter_input.off(Metro.events.blur);\n            filter_input.off(Metro.events.focus);\n            list.off(Metro.events.click, \"li\");\n            filter_input.off(Metro.events.keyup);\n            drop_container.off(Metro.events.click);\n            clearButton.off(Metro.events.click);\n\n            drop_container.data(\"dropdown\").destroy();\n\n            return element;\n        }\n    });\n\n    $(document).on(Metro.events.click, function(){\n        $(\".select\").removeClass(\"focused\");\n    }, {ns: \"blur-select-elements\"});\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var SidebarDefaultConfig = {\n        menuScrollbar: false,\n        sidebarDeferred: 0,\n        shadow: true,\n        position: \"left\",\n        size: 290,\n        shift: null,\n        staticShift: null,\n        toggle: null,\n        duration: METRO_ANIMATION_DURATION,\n        static: null,\n        menuItemClick: true,\n        closeOutside: true,\n        onOpen: Metro.noop,\n        onClose: Metro.noop,\n        onToggle: Metro.noop,\n        onStaticSet: Metro.noop,\n        onStaticLoss: Metro.noop,\n        onSidebarCreate: Metro.noop\n    };\n\n    Metro.sidebarSetup = function (options) {\n        SidebarDefaultConfig = $.extend({}, SidebarDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroSidebarSetup\"] !== undefined) {\n        Metro.sidebarSetup(window[\"metroSidebarSetup\"]);\n    }\n\n    Metro.Component('sidebar', {\n        init: function( options, elem ) {\n            this._super(elem, options, SidebarDefaultConfig, {\n                toggle_element: null,\n                id: Utils.elementId('sidebar')\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this._createStructure();\n            this._createEvents();\n            $(window).resize();\n            this._checkStatic();\n\n            this._fireEvent(\"sidebar-create\", {\n                element: element\n            });\n        },\n\n        _createStructure: function(){\n            var element = this.element, o = this.options;\n            var header = element.find(\".sidebar-header\");\n            var sheet = Metro.sheet;\n            var menu = element.find(\".sidebar-menu\");\n\n            element.addClass(\"sidebar\").addClass(\"on-\"+o.position);\n\n            if (o.menuScrollbar === false) {\n                menu.addClass(\"hide-scroll\");\n            }\n\n            if (o.size !== 290) {\n                Utils.addCssRule(sheet, \".sidebar\", \"width: \" + o.size + \"px;\");\n\n                if (o.position === \"left\") {\n                    Utils.addCssRule(sheet, \".sidebar.on-left\", \"left: \" + -o.size + \"px;\");\n                } else {\n                    Utils.addCssRule(sheet, \".sidebar.on-right\", \"right: \" + -o.size + \"px;\");\n                }\n            }\n\n            if (o.shadow === true) {\n                element.addClass(\"sidebar-shadow\");\n            }\n\n            if (o.toggle !== null && $(o.toggle).length > 0) {\n                this.toggle_element = $(o.toggle);\n            }\n\n            if (header.length > 0) {\n                if (header.data(\"image\") !== undefined) {\n                    header.css({\n                        backgroundImage: \"url(\"+header.data(\"image\")+\")\"\n                    });\n                }\n            }\n\n            if (o.static !== null) {\n                if (o.staticShift !== null) {\n                    if (o.position === 'left') {\n                        Utils.addCssRule(sheet, \"@media screen and \" + Metro.media_queries[o.static.toUpperCase()], o.staticShift + \"{margin-left: \" + o.size + \"px; width: calc(100% - \" + o.size + \"px);}\");\n                    } else {\n                        Utils.addCssRule(sheet, \"@media screen and \" + Metro.media_queries[o.static.toUpperCase()], o.staticShift + \"{margin-right: \" + o.size + \"px; width: calc(100% - \" + o.size + \"px);}\");\n                    }\n                }\n            }\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var toggle = this.toggle_element;\n\n            if (toggle !== null) {\n                toggle.on(Metro.events.click, function(e){\n                    that.toggle();\n                    e.stopPropagation();\n                });\n            } else if (o.toggle) {\n                $.document().on(\"click\", o.toggle, function (e) {\n                    that.toggle();\n                    e.stopPropagation();\n                })\n            }\n\n            if (o.static !== null && [\"fs\", \"sm\", \"md\", \"lg\", \"xl\", \"xxl\"].indexOf(o.static) > -1) {\n                $(window).on(Metro.events.resize,function(){\n                    that._checkStatic();\n                }, {ns: this.id});\n            }\n\n            if (o.menuItemClick === true) {\n                element.on(Metro.events.click, \".sidebar-menu li > a\", function(e){\n                    that.close();\n                    e.stopPropagation();\n                });\n            }\n\n            element.on(Metro.events.click, \".sidebar-menu .js-sidebar-close\", function(e){\n                that.close();\n                e.stopPropagation();\n            });\n\n            element.on(Metro.events.click, function(e){\n                e.stopPropagation();\n            });\n\n            $(document).on(Metro.events.click, function(){\n                if (o.closeOutside === true) {\n                    if (that.isOpen()) that.close()\n                }\n            })\n        },\n\n        _checkStatic: function(){\n            var element = this.element, o = this.options;\n            if (Utils.mediaExist(o.static) && !element.hasClass(\"static\")) {\n                element.addClass(\"static\");\n                element.data(\"opened\", false).removeClass('open');\n                if (o.shift !== null) {\n                    $.each(o.shift.split(\",\"), function(){\n                        $(this)\n                            .animate({\n                                draw: {\n                                    left: 0\n                                },\n                                dur: o.duration\n                            })\n                    });\n                }\n\n                this._fireEvent(\"static-set\");\n            }\n            if (!Utils.mediaExist(o.static)) {\n                element.removeClass(\"static\");\n                this._fireEvent(\"static-loss\");\n            }\n        },\n\n        isOpen: function(){\n            return this.element.data(\"opened\") === true;\n        },\n\n        open: function(){\n            var element = this.element, o = this.options;\n\n            if (element.hasClass(\"static\")) {\n                return ;\n            }\n\n            element.data(\"opened\", true).addClass('open');\n\n            if (o.shift !== null) {\n                $(o.shift)\n                    .animate({\n                        draw: {\n                            left: element.outerWidth()\n                        },\n                        dur: o.duration\n                    });\n            }\n\n            this._fireEvent(\"open\");\n        },\n\n        close: function(){\n            var element = this.element, o = this.options;\n\n            if (element.hasClass(\"static\")) {\n                return ;\n            }\n\n            element.data(\"opened\", false).removeClass('open');\n\n            if (o.shift !== null) {\n                $(o.shift)\n                    .animate({\n                        draw: {\n                            left: 0\n                        },\n                        dur: o.duration\n                    });\n            }\n\n            this._fireEvent(\"close\");\n        },\n\n        toggle: function(){\n            if (this.isOpen()) {\n                this.close();\n            } else {\n                this.open();\n            }\n\n            this._fireEvent(\"toggle\");\n        },\n\n        changeAttribute: function(){\n        },\n\n        destroy: function(){\n            var element = this.element, o = this.options;\n            var toggle = this.toggle_element;\n\n            if (toggle !== null) {\n                toggle.off(Metro.events.click);\n            }\n\n            if (o.static !== null && [\"fs\", \"sm\", \"md\", \"lg\", \"xl\", \"xxl\"].indexOf(o.static) > -1) {\n                $(window).off(Metro.events.resize, {ns: this.id});\n            }\n\n            if (o.menuItemClick === true) {\n                element.off(Metro.events.click, \".sidebar-menu li > a\");\n            }\n\n            element.off(Metro.events.click, \".sidebar-menu .js-sidebar-close\");\n\n            return element;\n        }\n    });\n\n    Metro['sidebar'] = {\n        isSidebar: function(el){\n            return Utils.isMetroObject(el, \"sidebar\");\n        },\n\n        open: function(el){\n            if (!this.isSidebar(el)) {\n                return ;\n            }\n            Metro.getPlugin(el, \"sidebar\").open();\n        },\n\n        close: function(el){\n            if (!this.isSidebar(el)) {\n                return ;\n            }\n            Metro.getPlugin(el, \"sidebar\").close();\n        },\n\n        toggle: function(el){\n            if (!this.isSidebar(el)) {\n                return ;\n            }\n            Metro.getPlugin(el, \"sidebar\").toggle();\n        },\n\n        isOpen: function(el){\n            if (!this.isSidebar(el)) {\n                return ;\n            }\n            return Metro.getPlugin(el, \"sidebar\").isOpen();\n        }\n    };\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var SliderDefaultConfig = {\n        sliderDeferred: 0,\n        roundValue: true,\n        min: 0,\n        max: 100,\n        accuracy: 0,\n        showMinMax: false,\n        minMaxPosition: Metro.position.TOP,\n        value: 0,\n        buffer: 0,\n        hint: false,\n        hintAlways: false,\n        hintPosition: Metro.position.TOP,\n        hintMask: \"$1\",\n        vertical: false,\n        target: null,\n        returnType: \"value\", // value or percent\n        size: 0,\n\n        clsSlider: \"\",\n        clsBackside: \"\",\n        clsComplete: \"\",\n        clsBuffer: \"\",\n        clsMarker: \"\",\n        clsHint: \"\",\n        clsMinMax: \"\",\n        clsMin: \"\",\n        clsMax: \"\",\n\n        onStart: Metro.noop,\n        onStop: Metro.noop,\n        onMove: Metro.noop,\n        onSliderClick: Metro.noop,\n        onChange: Metro.noop,\n        onChangeValue: Metro.noop,\n        onChangeBuffer: Metro.noop,\n        onFocus: Metro.noop,\n        onBlur: Metro.noop,\n        onSliderCreate: Metro.noop\n    };\n\n    Metro.sliderSetup = function (options) {\n        SliderDefaultConfig = $.extend({}, SliderDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroSliderSetup\"] !== undefined) {\n        Metro.sliderSetup(window[\"metroSliderSetup\"]);\n    }\n\n    Metro.Component('slider', {\n        init: function( options, elem ) {\n            this._super(elem, options, SliderDefaultConfig, {\n                slider: null,\n                value: 0,\n                percent: 0,\n                pixel: 0,\n                buffer: 0,\n                keyInterval: false,\n                id: Utils.elementId('slider')\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n\n            this._createSlider();\n            this._createEvents();\n            this.buff(o.buffer);\n            this.val(o.value);\n\n            this._fireEvent(\"slider-create\", {\n                element: element\n            });\n        },\n\n        _createSlider: function(){\n            var element = this.element, o = this.options;\n\n            var prev = element.prev();\n            var parent = element.parent();\n            var slider = $(\"<div>\").addClass(\"slider \" + element[0].className).addClass(o.clsSlider);\n            var backside = $(\"<div>\").addClass(\"backside\").addClass(o.clsBackside);\n            var complete = $(\"<div>\").addClass(\"complete\").addClass(o.clsComplete);\n            var buffer = $(\"<div>\").addClass(\"buffer\").addClass(o.clsBuffer);\n            var marker = $(\"<button>\").attr(\"type\", \"button\").addClass(\"marker\").addClass(o.clsMarker);\n            var hint = $(\"<div>\").addClass(\"hint\").addClass(o.hintPosition + \"-side\").addClass(o.clsHint);\n            var i;\n\n            if (o.size > 0) {\n                if (o.vertical === true) {\n                    slider.outerHeight(o.size);\n                } else {\n                    slider.outerWidth(o.size);\n                }\n            }\n\n            if (o.vertical === true) {\n                slider.addClass(\"vertical-slider\");\n            }\n\n            if (prev.length === 0) {\n                parent.prepend(slider);\n            } else {\n                slider.insertAfter(prev);\n            }\n\n            if (o.hintAlways === true) {\n                hint.css({\n                    display: \"block\"\n                }).addClass(\"permanent-hint\");\n            }\n\n            element.appendTo(slider);\n            backside.appendTo(slider);\n            complete.appendTo(slider);\n            buffer.appendTo(slider);\n            marker.appendTo(slider);\n            hint.appendTo(marker);\n\n            if (o.showMinMax === true) {\n                var min_max_wrapper = $(\"<div>\").addClass(\"slider-min-max\").addClass(o.clsMinMax);\n                $(\"<span>\").addClass(\"slider-text-min\").addClass(o.clsMin).html(o.min).appendTo(min_max_wrapper);\n                $(\"<span>\").addClass(\"slider-text-max\").addClass(o.clsMax).html(o.max).appendTo(min_max_wrapper);\n                if (o.minMaxPosition === Metro.position.TOP) {\n                    min_max_wrapper.insertBefore(slider);\n                } else {\n                    min_max_wrapper.insertAfter(slider);\n                }\n            }\n\n            element[0].className = '';\n            if (o.copyInlineStyles === true) {\n                for (i = 0; i < element[0].style.length; i++) {\n                    slider.css(element[0].style[i], element.css(element[0].style[i]));\n                }\n            }\n\n            if (element.is(\":disabled\")) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n\n            this.slider = slider;\n        },\n\n        _createEvents: function(){\n            var that = this, slider = this.slider, o = this.options;\n            var marker = slider.find(\".marker\");\n            var hint = slider.find(\".hint\");\n\n            marker.on(Metro.events.startAll, function(){\n                if (o.hint === true && o.hintAlways !== true) {\n                    hint.fadeIn(300);\n                }\n\n                $(document).on(Metro.events.moveAll, function(e){\n                    if (e.cancelable) e.preventDefault();\n                    that._move(e);\n\n                    that._fireEvent(\"move\", {\n                        val: that.value,\n                        percent: that.percent\n                    });\n\n                }, {ns: that.id, passive: false});\n\n                $(document).on(Metro.events.stopAll, function(){\n                    $(document).off(Metro.events.moveAll, {ns: that.id});\n                    $(document).off(Metro.events.stopAll, {ns: that.id});\n\n                    if (o.hintAlways !== true) {\n                        hint.fadeOut(300);\n                    }\n\n                    that._fireEvent(\"stop\", {\n                        val: that.value,\n                        percent: that.percent\n                    });\n                }, {ns: that.id});\n\n                that._fireEvent(\"start\", {\n                    val: that.value,\n                    percent: that.percent\n                });\n            });\n\n            marker.on(Metro.events.focus, function(){\n                that._fireEvent(\"focus\", {\n                    val: that.value,\n                    percent: that.percent\n                });\n            });\n\n            marker.on(Metro.events.blur, function(){\n                that._fireEvent(\"blur\", {\n                    val: that.value,\n                    percent: that.percent\n                });\n            });\n\n            marker.on(Metro.events.keydown, function(e){\n\n                var key = e.keyCode ? e.keyCode : e.which;\n\n                if ([37,38,39,40].indexOf(key) === -1) {\n                    return;\n                }\n\n                var step = o.accuracy === 0 ? 1 : o.accuracy;\n\n                if (that.keyInterval) {\n                    return ;\n                }\n                that.keyInterval = setInterval(function(){\n\n                    var val = that.value;\n\n                    if (e.keyCode === 37 || e.keyCode === 40) { // left, down\n                        if (val - step < o.min) {\n                            val = o.min;\n                        } else {\n                            val -= step;\n                        }\n                    }\n\n                    if (e.keyCode === 38 || e.keyCode === 39) { // right, up\n                        if (val + step > o.max) {\n                            val = o.max;\n                        } else {\n                            val += step;\n                        }\n                    }\n\n                    that.value = that._correct(val);\n                    that.percent = that._convert(that.value, 'val2prc');\n                    that.pixel = that._convert(that.percent, 'prc2pix');\n\n                    that._redraw();\n                }, 100);\n\n                e.preventDefault();\n            });\n\n            marker.on(Metro.events.keyup, function(){\n                clearInterval(that.keyInterval);\n                that.keyInterval = false;\n            });\n\n            slider.on(Metro.events.click, function(e){\n                that._move(e);\n\n                that._fireEvent(\"slider-click\", {\n                    val: that.value,\n                    percent: that.percent\n                });\n\n                that._fireEvent(\"stop\", {\n                    val: that.value,\n                    percent: that.percent\n                });\n            });\n\n            $(window).on(Metro.events.resize,function(){\n                that.val(that.value);\n                that.buff(that.buffer);\n            }, {ns: that.id});\n        },\n\n        _convert: function(v, how){\n            var slider = this.slider, o = this.options;\n            var length = (o.vertical === true ? slider.outerHeight() : slider.outerWidth()) - slider.find(\".marker\").outerWidth();\n            switch (how) {\n                case \"pix2prc\": return ( v * 100 / length );\n                case \"pix2val\": return ( this._convert(v, 'pix2prc') * ((o.max - o.min) / 100) + o.min );\n                case \"val2prc\": return ( (v - o.min)/( (o.max - o.min) / 100 )  );\n                case \"prc2pix\": return ( v / ( 100 / length ));\n                case \"val2pix\": return ( this._convert(this._convert(v, 'val2prc'), 'prc2pix') );\n            }\n\n            return 0;\n        },\n\n        _correct: function(value){\n            var res = value;\n            var accuracy  = this.options.accuracy;\n            var min = this.options.min, max = this.options.max;\n\n            if (accuracy === 0 || isNaN(accuracy)) {\n                return res;\n            }\n\n            res = Math.round(value/accuracy)*accuracy;\n\n            if (res < min) {\n                res = min;\n            }\n\n            if (res > max) {\n                res = max;\n            }\n\n            return res.toFixed(Utils.decCount(accuracy));\n        },\n\n        _move: function(e){\n            var slider = this.slider, o = this.options;\n            var offset = slider.offset(),\n                marker_size = slider.find(\".marker\").outerWidth(),\n                length = o.vertical === true ? slider.outerHeight() : slider.outerWidth(),\n                cPos, cPix, cStart = 0, cStop = length - marker_size;\n\n            cPos = o.vertical === true ? Utils.pageXY(e).y - offset.top : Utils.pageXY(e).x - offset.left;\n            cPix = o.vertical === true ? length - cPos - marker_size / 2 : cPos - marker_size / 2;\n\n            if (cPix < cStart || cPix > cStop) {\n                return ;\n            }\n\n            this.value = this._correct(this._convert(cPix, 'pix2val'));\n            this.percent = this._convert(this.value, 'val2prc');\n            this.pixel = this._convert(this.percent, 'prc2pix');\n\n            this._redraw();\n        },\n\n        _hint: function(){\n            var o = this.options, slider = this.slider, hint = slider.find(\".hint\");\n            var value = +this.value || 0;\n            var percent = +this.percent || 0;\n\n            if (o.roundValue) {\n                value = (Utils.isValue(value) ? +value : 0).toFixed(Utils.decCount(o.accuracy));\n                percent = (Utils.isValue(percent) ? +percent : 0).toFixed(Utils.decCount(o.accuracy));\n            }\n\n            hint.text(o.hintMask.replace(\"$1\", value).replace(\"$2\", percent));\n        },\n\n        _value: function(){\n            var element = this.element, o = this.options;\n            var value = o.returnType === 'value' ? this.value : this.percent;\n            var percent = this.percent;\n            var buffer = this.buffer;\n\n            if (o.roundValue) {\n                value = (Utils.isValue(value) ? +value : 0).toFixed(Utils.decCount(o.accuracy));\n                percent = (Utils.isValue(percent) ? +percent : 0).toFixed(Utils.decCount(o.accuracy));\n                buffer = (Utils.isValue(buffer) ? +buffer : 0).toFixed(Utils.decCount(o.accuracy));\n            }\n\n            if (element[0].tagName === \"INPUT\") {\n                element.val(value);\n            }\n\n            if (o.target !== null) {\n                var target = $(o.target);\n                if (target.length !== 0) {\n\n                    $.each(target, function(){\n                        var t = $(this);\n                        if (this.tagName === \"INPUT\") {\n                            t.val(value);\n                        } else {\n                            t.text(value);\n                        }\n                        t.trigger(\"change\");\n                    });\n                }\n            }\n\n            this._fireEvent(\"change-value\", {\n                val: value\n            });\n\n            this._fireEvent(\"change\", {\n                val: value,\n                percent: percent,\n                buffer: buffer\n            });\n        },\n\n        _marker: function(){\n            var slider = this.slider, o = this.options;\n            var marker = slider.find(\".marker\"), complete = slider.find(\".complete\");\n            var length = o.vertical === true ? slider.outerHeight() : slider.outerWidth();\n            var marker_size = parseInt(Utils.getStyleOne(marker, \"width\"));\n            var slider_visible = Utils.isVisible(slider);\n\n            if (slider_visible) {\n                marker.css({\n                    'margin-top': 0,\n                    'margin-left': 0\n                });\n            }\n\n            if (o.vertical === true) {\n                if (slider_visible) {\n                    marker.css('top', length - this.pixel);\n                } else {\n                    marker.css('top', (100 - this.percent) + \"%\");\n                    marker.css('margin-top', marker_size / 2);\n                }\n                complete.css('height', this.percent+\"%\");\n            } else {\n                if (slider_visible) {\n                    marker.css('left', this.pixel);\n                } else {\n                    marker.css('left', this.percent + \"%\");\n                    marker.css('margin-left', this.percent === 0 ? 0 : -1 * marker_size / 2);\n                }\n                complete.css('width', this.percent+\"%\");\n            }\n        },\n\n        _redraw: function(){\n            this._marker();\n            this._value();\n            this._hint();\n        },\n\n        _buffer: function(){\n            var element = this.element, o = this.options;\n            var buffer = this.slider.find(\".buffer\");\n\n            if (o.vertical === true) {\n                buffer.css(\"height\", this.buffer + \"%\");\n            } else {\n                buffer.css(\"width\", this.buffer + \"%\");\n            }\n\n            this._fireEvent(\"change-buffer\", {\n                val: this.buffer\n            });\n\n            this._fireEvent(\"change\", {\n                val: element.val(),\n                percent: this.percent,\n                buffer: this.buffer\n            });\n        },\n\n        val: function(v){\n            var o = this.options;\n\n            if (v === undefined || isNaN(v)) {\n                return this.value;\n            }\n\n            if (v < o.min) {\n                v = o.min;\n            }\n\n            if (v > o.max) {\n                v = o.max;\n            }\n\n            this.value = this._correct(v);\n            this.percent = this._convert(this.value, 'val2prc');\n            this.pixel = this._convert(this.percent, 'prc2pix');\n\n            this._redraw();\n        },\n\n        buff: function(v){\n            var slider = this.slider;\n            var buffer = slider.find(\".buffer\");\n\n            if (v === undefined || isNaN(v)) {\n                return this.buffer;\n            }\n\n            if (buffer.length === 0) {\n                return false;\n            }\n\n            v = parseInt(v);\n\n            if (v > 100) {\n                v = 100;\n            }\n\n            if (v < 0) {\n                v = 0;\n            }\n\n            this.buffer = v;\n            this._buffer();\n        },\n\n        changeValue: function(){\n            var element = this.element, o = this.options;\n            var val = element.attr(\"data-value\");\n            if (val < o.min) {\n                val = o.min\n            }\n            if (val > o.max) {\n                val = o.max\n            }\n            this.val(val);\n        },\n\n        changeBuffer: function(){\n            var element = this.element;\n            var val = parseInt(element.attr(\"data-buffer\"));\n            if (val < 0) {\n                val = 0\n            }\n            if (val > 100) {\n                val = 100\n            }\n            this.buff(val);\n        },\n\n        disable: function(){\n            this.element.data(\"disabled\", true);\n            this.element.parent().addClass(\"disabled\");\n        },\n\n        enable: function(){\n            this.element.data(\"disabled\", false);\n            this.element.parent().removeClass(\"disabled\");\n        },\n\n        toggleState: function(){\n            if (this.elem.disabled) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        },\n\n        changeAttribute: function(attributeName){\n            switch (attributeName) {\n                case \"data-value\": this.changeValue(); break;\n                case \"data-buffer\": this.changeBuffer(); break;\n                case 'disabled': this.toggleState(); break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element, slider = this.slider;\n            var marker = slider.find(\".marker\");\n\n            marker.off(Metro.events.startAll);\n            marker.off(Metro.events.focus);\n            marker.off(Metro.events.blur);\n            marker.off(Metro.events.keydown);\n            marker.off(Metro.events.keyup);\n            slider.off(Metro.events.click);\n            $(window).off(Metro.events.resize, {ns: this.id});\n\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var SorterDefaultConfig = {\n        sorterDeferred: 0,\n        thousandSeparator: \",\",\n        decimalSeparator: \",\",\n        sortTarget: null,\n        sortSource: null,\n        sortDir: \"asc\",\n        sortStart: true,\n        saveInitial: true,\n        onSortStart: Metro.noop,\n        onSortStop: Metro.noop,\n        onSortItemSwitch: Metro.noop,\n        onSorterCreate: Metro.noop\n    };\n\n    Metro.sorterSetup = function (options) {\n        SorterDefaultConfig = $.extend({}, SorterDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroSorterSetup\"] !== undefined) {\n        Metro.sorterSetup(window[\"metroSorterSetup\"]);\n    }\n\n    Metro.Component('sorter', {\n        init: function( options, elem ) {\n            this._super(elem, options, SorterDefaultConfig, {\n                initial: []\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this._createStructure();\n\n            this._fireEvent(\"sorter-create\", {\n                element: element\n            });\n        },\n\n        _createStructure: function(){\n            var element = this.element, o = this.options;\n\n            if (o.sortTarget === null) {\n                o.sortTarget = element.children()[0].tagName;\n            }\n\n            this.initial = element.find(o.sortTarget).get();\n\n            if (o.sortStart === true) {\n                this.sort(o.sortDir);\n            }\n        },\n\n        _getItemContent: function(item){\n            var o = this.options;\n            var data, inset, i, format;\n\n            if (Utils.isValue(o.sortSource)) {\n                data = \"\";\n                inset = item.getElementsByClassName(o.sortSource);\n\n                if (inset.length > 0) for (i = 0; i < inset.length; i++) {\n                    data += inset[i].textContent;\n                }\n                format = inset[0].dataset.format;\n            } else {\n                data = item.textContent;\n                format = item.dataset.format;\n            }\n\n            data = (\"\"+data).toLowerCase().replace(/[\\n\\r]+|[\\s]{2,}/g, ' ').trim();\n\n            if (Utils.isValue(format)) {\n\n                if (['number', 'int', 'float', 'money'].indexOf(format) !== -1 && (o.thousandSeparator !== \",\" || o.decimalSeparator !== \".\" )) {\n                    data = Utils.parseNumber(data, o.thousandSeparator, o.decimalSeparator);\n                }\n\n                switch (format) {\n                    case \"date\": data = Utils.isDate(data) ? new Date(data) : \"\"; break;\n                    case \"number\": data = Number(data); break;\n                    case \"int\": data = parseInt(data); break;\n                    case \"float\": data = parseFloat(data); break;\n                    case \"money\": data = Utils.parseMoney(data); break;\n                    case \"card\": data = Utils.parseCard(data); break;\n                    case \"phone\": data = Utils.parsePhone(data); break;\n                }\n            }\n\n            return data;\n        },\n\n        sort: function(dir){\n            var that = this, element = this.element, o = this.options;\n            var items;\n            var id = Utils.elementId(\"temp\");\n            var prev;\n\n            if (dir !== undefined) {\n                o.sortDir = dir;\n            }\n\n            items = element.find(o.sortTarget).get();\n\n            if (items.length === 0) {\n                return ;\n            }\n\n            prev = $(\"<div>\").attr(\"id\", id).insertBefore($(element.find(o.sortTarget)[0]));\n\n            this._fireEvent(\"sort-start\", {\n                items: items\n            });\n\n            items.sort(function(a, b){\n                var c1 = that._getItemContent(a);\n                var c2 = that._getItemContent(b);\n                var result = 0;\n\n                if (c1 < c2 ) {\n                    result = -1;\n                }\n\n                if (c1 > c2 ) {\n                    result = 1;\n                }\n\n                if (result !== 0) {\n                    that._fireEvent(\"sort-item-switch\", {\n                        a: a,\n                        b: b,\n                        result: result\n                    });\n                }\n\n                return result;\n            });\n\n            if (o.sortDir === \"desc\") {\n                items.reverse();\n            }\n\n            element.find(o.sortTarget).remove();\n\n            $.each(items, function(){\n                var $this = $(this);\n                $this.insertAfter(prev);\n                prev = $this;\n            });\n\n            $(\"#\"+id).remove();\n\n            this._fireEvent(\"sort-stop\", {\n                items: items\n            });\n        },\n\n        reset: function(){\n            var element = this.element, o = this.options;\n            var items;\n            var id = Utils.elementId('sorter');\n            var prev;\n\n            items = this.initial;\n\n            if (items.length === 0) {\n                return ;\n            }\n\n            prev = $(\"<div>\").attr(\"id\", id).insertBefore($(element.find(o.sortTarget)[0]));\n\n            element.find(o.sortTarget).remove();\n\n            $.each(items, function(){\n                var $this = $(this);\n                $this.insertAfter(prev);\n                prev = $this;\n            });\n\n            $(\"#\"+id).remove();\n        },\n\n        changeAttribute: function(attributeName){\n            var that = this, element = this.element, o = this.options;\n\n            var changeSortDir = function() {\n                var dir = element.attr(\"data-sort-dir\").trim();\n                if (dir === \"\") return;\n                o.sortDir = dir;\n                that.sort();\n            };\n\n            var changeSortContent = function(){\n                var content = element.attr(\"data-sort-content\").trim();\n                if (content === \"\") return ;\n                o.sortContent = content;\n                that.sort();\n            };\n\n            switch (attributeName) {\n                case \"data-sort-dir\": changeSortDir(); break;\n                case \"data-sort-content\": changeSortContent(); break;\n            }\n        },\n\n        destroy: function(){\n            return this.element;\n        }\n    });\n\n    Metro['sorter'] = {\n        create: function(el, op){\n            return Utils.$()(el).sorter(op);\n        },\n\n        isSorter: function(el){\n            return Utils.isMetroObject(el, \"sorter\");\n        },\n\n        sort: function(el, dir){\n            if (!this.isSorter(el)) {\n                return false;\n            }\n            if (dir === undefined) {\n                dir = \"asc\";\n            }\n            Metro.getPlugin(el, \"sorter\").sort(dir);\n        },\n\n        reset: function(el){\n            if (!this.isSorter(el)) {\n                return false;\n            }\n            Metro.getPlugin(el, \"sorter\").reset();\n        }\n    };\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var SpinnerDefaultConfig = {\n        spinnerDeferred: 0,\n        label: \"\",\n        step: 1,\n        plusIcon: \"<span class='default-icon-plus'></span>\",\n        minusIcon: \"<span class='default-icon-minus'></span>\",\n        buttonsPosition: \"default\",\n        defaultValue: 0,\n        minValue: null,\n        maxValue: null,\n        fixed: 0,\n        repeatThreshold: 1000,\n        hideCursor: false,\n        clsSpinner: \"\",\n        clsSpinnerInput: \"\",\n        clsSpinnerButton: \"\",\n        clsSpinnerButtonPlus: \"\",\n        clsSpinnerButtonMinus: \"\",\n        clsLabel: \"\",\n        onBeforeChange: Metro.noop_true,\n        onChange: Metro.noop,\n        onPlusClick: Metro.noop,\n        onMinusClick: Metro.noop,\n        onArrowUp: Metro.noop,\n        onArrowDown: Metro.noop,\n        onButtonClick: Metro.noop,\n        onArrowClick: Metro.noop,\n        onSpinnerCreate: Metro.noop\n    };\n\n    Metro.spinnerSetup = function (options) {\n        SpinnerDefaultConfig = $.extend({}, SpinnerDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroSpinnerSetup\"] !== undefined) {\n        Metro.spinnerSetup(window[\"metroSpinnerSetup\"]);\n    }\n\n    Metro.Component('spinner', {\n        init: function( options, elem ) {\n            this._super(elem, options, SpinnerDefaultConfig, {\n                repeat_timer: false\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"spinner-create\", {\n                element: element\n            });\n        },\n\n        _createStructure: function(){\n            var element = this.element, o = this.options;\n            var spinner = $(\"<div>\").addClass(\"spinner\").addClass(\"buttons-\"+o.buttonsPosition).addClass(element[0].className).addClass(o.clsSpinner);\n            var button_plus = $(\"<button>\").attr(\"type\", \"button\").addClass(\"button spinner-button spinner-button-plus\").addClass(o.clsSpinnerButton + \" \" + o.clsSpinnerButtonPlus).html(o.plusIcon);\n            var button_minus = $(\"<button>\").attr(\"type\", \"button\").addClass(\"button spinner-button spinner-button-minus\").addClass(o.clsSpinnerButton + \" \" + o.clsSpinnerButtonMinus).html(o.minusIcon);\n            var init_value = element.val().trim();\n\n            if (!Utils.isValue(init_value)) {\n                element.val(0);\n            }\n\n            element[0].className = '';\n\n            spinner.insertBefore(element);\n            element.appendTo(spinner).addClass(o.clsSpinnerInput);\n\n            element.addClass(\"original-input\");\n\n            button_plus.appendTo(spinner);\n            button_minus.appendTo(spinner);\n\n            if (o.hideCursor === true) {\n                spinner.addClass(\"hide-cursor\");\n            }\n\n            if (o.label) {\n                var label = $(\"<label>\").addClass(\"label-for-input\").addClass(o.clsLabel).html(o.label).insertBefore(spinner);\n                if (element.attr(\"id\")) {\n                    label.attr(\"for\", element.attr(\"id\"));\n                }\n                if (element.attr(\"dir\") === \"rtl\") {\n                    label.addClass(\"rtl\");\n                }\n            }\n\n            if (o.disabled === true || element.is(\":disabled\")) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var spinner = element.closest(\".spinner\");\n            var spinner_buttons = spinner.find(\".spinner-button\");\n            var value;\n\n            var spinnerButtonClick = function(plus, threshold){\n                var events = [plus ? \"plus-click\" : \"minus-click\", plus ? \"arrow-up\" : \"arrow-down\", \"button-click\", \"arrow-click\"];\n                var curr = +element.val();\n                var val = +element.val();\n                var step = +o.step;\n\n                if (plus) {\n                    val += step;\n                } else {\n                    val -= step;\n                }\n\n                that._setValue(val.toFixed(o.fixed), true);\n\n                that._fireEvents(events, {\n                    curr: curr,\n                    val: val,\n                    elementVal: element.val(),\n                    button: plus ? \"plus\" : \"minus\"\n                });\n\n                setTimeout(function(){\n                    if (that.repeat_timer) {\n                        spinnerButtonClick(plus, 100);\n                    }\n                }, threshold);\n            };\n\n            spinner.on(Metro.events.click, function(e){\n                $(\".focused\").removeClass(\"focused\");\n                spinner.addClass(\"focused\");\n\n                e.preventDefault();\n                e.stopPropagation();\n            });\n\n            spinner_buttons.on(Metro.events.startAll, function(e){\n                var plus = $(this).closest(\".spinner-button\").hasClass(\"spinner-button-plus\");\n\n                if (that.repeat_timer) return ;\n\n                that.repeat_timer = true;\n                spinnerButtonClick(plus, o.repeatThreshold);\n\n                e.preventDefault();\n            });\n\n            spinner_buttons.on(Metro.events.stopAll, function(){\n                that.repeat_timer = false;\n            });\n\n            element.on(Metro.events.keydown, function(e){\n                if (e.keyCode === Metro.keyCode.UP_ARROW || e.keyCode === Metro.keyCode.DOWN_ARROW) {\n\n                    if (that.repeat_timer) return ;\n\n                    that.repeat_timer = true;\n                    spinnerButtonClick(e.keyCode === Metro.keyCode.UP_ARROW, o.repeatThreshold);\n\n                } else {\n                    var key = e.key;\n                    if (key === \"Backspace\" || key === \"Delete\" || key === \"ArrowLeft\" || key === \"ArrowRight\" ) {\n                        //\n                    } else\n                    if (isNaN(key) || parseInt(key) < 0 && parseInt(key) > 9) {\n                        e.preventDefault();\n                    }\n\n                    value = parseInt(this.value);\n                }\n            });\n\n            element.on(Metro.events.keyup, function(){\n                var val = parseInt(this.value);\n                if ((o.minValue && val < o.minValue) || (o.maxValue && val > o.maxValue)) {\n                    this.value = value;\n                }\n            });\n\n            spinner.on(Metro.events.keyup, function(){\n                that.repeat_timer = false;\n            });\n        },\n\n        _setValue: function(val, trigger_change){\n            var element = this.element, o = this.options;\n\n            if (Utils.exec(o.onBeforeChange, [val], element[0]) !== true) {\n                return ;\n            }\n\n            if (Utils.isValue(o.maxValue) && val > Number(o.maxValue)) {\n                val =  Number(o.maxValue);\n            }\n\n            if (Utils.isValue(o.minValue) && val < Number(o.minValue)) {\n                val =  Number(o.minValue);\n            }\n\n            element.val(val);\n\n            this._fireEvent(\"change\", {val: val}, false, true);\n\n            if (trigger_change === true) {\n                element.fire(\"change\", {\n                    val: val\n                });\n            }\n        },\n\n        val: function(val){\n            var that = this, element = this.element, o = this.options;\n            if (!Utils.isValue(val)) {\n                return element.val();\n            }\n\n            that._setValue(val.toFixed(o.fixed), true);\n        },\n\n        toDefault: function(){\n            var o = this.options;\n            var val = Utils.isValue(o.defaultValue) ? Number(o.defaultValue) : 0;\n            this._setValue(val.toFixed(o.fixed), true);\n\n            this._fireEvent(\"change\", {\n                val: val\n            });\n        },\n\n        disable: function(){\n            this.element.data(\"disabled\", true);\n            this.element.parent().addClass(\"disabled\");\n        },\n\n        enable: function(){\n            this.element.data(\"disabled\", false);\n            this.element.parent().removeClass(\"disabled\");\n        },\n\n        toggleState: function(){\n            if (this.elem.disabled) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        },\n\n        changeAttribute: function(attributeName){\n            var that = this, element = this.element;\n\n            var changeValue = function(){\n                var val = element.attr('value').trim();\n                if (Utils.isValue(val)) {\n                    that._setValue(Number(val), false);\n                }\n            };\n\n            switch (attributeName) {\n                case 'disabled': this.toggleState(); break;\n                case 'value': changeValue(); break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element;\n            var spinner = element.closest(\".spinner\");\n            var spinner_buttons = spinner.find(\".spinner-button\");\n\n            spinner.off(Metro.events.click);\n            spinner_buttons.off(Metro.events.start);\n            spinner_buttons.off(Metro.events.stop);\n            element.off(Metro.events.keydown);\n            spinner.off(Metro.events.keyup);\n\n            return element;\n        }\n    });\n\n    $(document).on(Metro.events.click, function(){\n        $(\".spinner\").removeClass(\"focused\");\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var Storage = Metro.storage;\n    var SplitterDefaultConfig = {\n        splitterDeferred: 0,\n        splitMode: \"horizontal\", // horizontal or vertical\n        splitSizes: null,\n        gutterSize: 4,\n        minSizes: null,\n        children: \"*\",\n        gutterClick: \"expand\", // TODO expand or collapse\n        saveState: false,\n        onResizeStart: Metro.noop,\n        onResizeStop: Metro.noop,\n        onResizeSplit: Metro.noop,\n        onResizeWindow: Metro.noop,\n        onSplitterCreate: Metro.noop\n    };\n\n    Metro.splitterSetup = function (options) {\n        SplitterDefaultConfig = $.extend({}, SplitterDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroSplitterSetup\"] !== undefined) {\n        Metro.splitterSetup(window[\"metroSplitterSetup\"]);\n    }\n\n    Metro.Component('splitter', {\n        init: function( options, elem ) {\n            this._super(elem, options, SplitterDefaultConfig, {\n                storage: Utils.isValue(Storage) ? Storage : null,\n                storageKey: \"SPLITTER:\",\n                id: Utils.elementId(\"splitter\")\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"splitter-create\", {\n                element: element\n            });\n        },\n\n        _createStructure: function(){\n            var element = this.element, o = this.options;\n            var children = element.children(o.children).addClass(\"split-block\");\n            var i, children_sizes = [];\n            var resizeProp = o.splitMode === \"horizontal\" ? \"width\" : \"height\";\n\n            element.addClass(\"splitter\");\n            if (o.splitMode.toLowerCase() === \"vertical\") {\n                element.addClass(\"vertical\");\n            }\n\n            for (i = 0; i < children.length - 1; i++) {\n                $(\"<div>\").addClass(\"gutter\").css(resizeProp, o.gutterSize).insertAfter($(children[i]));\n            }\n\n            this._setSize();\n\n            if (Utils.isValue(o.minSizes)) {\n                if ((\"\"+o.minSizes).includes(\",\")) {\n                    children_sizes = o.minSizes.toArray();\n                    for (i = 0; i < children_sizes.length; i++) {\n                        $(children[i]).data(\"min-size\", children_sizes[i]);\n                        children[i].style.setProperty('min-'+resizeProp, (\"\"+children_sizes[i]).includes(\"%\") ? children_sizes[i] : (\"\"+children_sizes[i]).replace(\"px\", \"\")+\"px\", 'important');\n                    }\n                } else {\n                    $.each(children, function(){\n                        this.style.setProperty('min-'+resizeProp, (\"\"+o.minSizes).includes(\"%\") ? o.minSizes : (\"\"+o.minSizes).replace(\"px\", \"\")+\"px\", 'important');\n                    });\n                }\n            }\n\n            if (o.saveState && this.storage !== null) {\n                this._getSize();\n            }\n        },\n\n        _setSize: function(){\n            var element = this.element, o = this.options;\n            var gutters, children_sizes, i;\n            var children = element.children(\".split-block\");\n\n            gutters = element.children(\".gutter\");\n\n            if (!Utils.isValue(o.splitSizes)) {\n                children.css({\n                    flexBasis: \"calc(\"+(100/children.length)+\"% - \"+(gutters.length * o.gutterSize)+\"px)\"\n                })\n            } else {\n                children_sizes = o.splitSizes.toArray();\n                for(i = 0; i < children_sizes.length; i++) {\n                    $(children[i]).css({\n                        flexBasis: \"calc(\"+children_sizes[i]+\"% - \"+(gutters.length * o.gutterSize)+\"px)\"\n                    });\n                }\n            }\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var gutters = element.children(\".gutter\");\n\n            gutters.on(Metro.events.startAll, function(e){\n                var w = o.splitMode === \"horizontal\" ? element.width() : element.height();\n                var gutter = $(this);\n                var prev_block = gutter.prev(\".split-block\");\n                var next_block = gutter.next(\".split-block\");\n                var prev_block_size = 100 * (o.splitMode === \"horizontal\" ? prev_block.outerWidth(true) : prev_block.outerHeight(true)) / w;\n                var next_block_size = 100 * (o.splitMode === \"horizontal\" ? next_block.outerWidth(true) : next_block.outerHeight(true)) / w;\n                var start_pos = Utils.getCursorPosition(element[0], e);\n\n                gutter.addClass(\"active\");\n\n                prev_block.addClass(\"stop-pointer\");\n                next_block.addClass(\"stop-pointer\");\n\n                that._fireEvent(\"resize-start\", {\n                    pos: start_pos,\n                    gutter: gutter[0],\n                    prevBlock: prev_block[0],\n                    nextBlock: next_block[0]\n                });\n\n                $(window).on(Metro.events.moveAll, function(e){\n                    var pos = Utils.getCursorPosition(element[0], e);\n                    var new_pos;\n\n                    if (o.splitMode === \"horizontal\") {\n                        new_pos = (pos.x * 100 / w) - (start_pos.x * 100 / w);\n\n                    } else {\n                        new_pos = (pos.y * 100 / w) - (start_pos.y * 100 / w);\n                    }\n\n                    prev_block.css(\"flex-basis\", \"calc(\" + (prev_block_size + new_pos) + \"% - \"+(gutters.length * o.gutterSize)+\"px)\");\n                    next_block.css(\"flex-basis\", \"calc(\" + (next_block_size - new_pos) + \"% - \"+(gutters.length * o.gutterSize)+\"px)\");\n\n                    that._fireEvent(\"resize-split\", {\n                        pos: pos,\n                        gutter: gutter[0],\n                        prevBlock: prev_block[0],\n                        nextBlock: next_block[0]\n                    });\n\n                }, {ns: that.id});\n\n                $(window).on(Metro.events.stopAll, function(e){\n                    var cur_pos;\n\n                    prev_block.removeClass(\"stop-pointer\");\n                    next_block.removeClass(\"stop-pointer\");\n\n                    that._saveSize();\n\n                    gutter.removeClass(\"active\");\n\n                    $(window).off(Metro.events.moveAll,{ns: that.id});\n                    $(window).off(Metro.events.stopAll,{ns: that.id});\n\n                    cur_pos = Utils.getCursorPosition(element[0], e);\n\n                    that._fireEvent(\"resize-stop\", {\n                        pos: cur_pos,\n                        gutter: gutter[0],\n                        prevBlock: prev_block[0],\n                        nextBlock: next_block[0]\n                    });\n\n                }, {ns: that.id})\n            });\n\n            $(window).on(Metro.events.resize, function(){\n                var gutter = element.children(\".gutter\");\n                var prev_block = gutter.prev(\".split-block\");\n                var next_block = gutter.next(\".split-block\");\n\n                that._fireEvent(\"resize-window\", {\n                    prevBlock: prev_block[0],\n                    nextBlock: next_block[0]\n                });\n\n            }, {ns: that.id});\n        },\n\n        _saveSize: function(){\n            var element = this.element, o = this.options;\n            var storage = this.storage, itemsSize = [];\n            var id = element.attr(\"id\") || this.id;\n\n            if (o.saveState === true && storage !== null) {\n\n                $.each(element.children(\".split-block\"), function(){\n                    var item = $(this);\n                    itemsSize.push(item.css(\"flex-basis\"));\n                });\n\n                if (storage)\n                    storage.setItem(this.storageKey + id, itemsSize);\n            }\n\n        },\n\n        _getSize: function(){\n            var element = this.element, o = this.options;\n            var storage = this.storage, itemsSize = [];\n            var id = element.attr(\"id\") || this.id;\n\n            if (o.saveState === true && storage !== null) {\n\n                itemsSize = storage.getItem(this.storageKey + id);\n\n                $.each(element.children(\".split-block\"), function(i, v){\n                    var item = $(v);\n                    if (Utils.isValue(itemsSize) && Utils.isValue(itemsSize[i])) item.css(\"flex-basis\", itemsSize[i]);\n                });\n            }\n        },\n\n        size: function(size){\n            var that = this, o = this.options;\n            if (Utils.isValue(size)) {\n                o.splitSizes = size;\n                that._setSize();\n            }\n            return this;\n        },\n\n        changeAttribute: function(attributeName){\n            var that = this, element = this.element;\n\n            function changeSize(){\n                var size = element.attr(\"data-split-sizes\");\n                that.size(size);\n            }\n\n            if (attributeName === 'data-split-sizes') {\n                changeSize();\n            }\n        },\n\n        destroy: function(){\n            var element = this.element;\n            var gutters = element.children(\".gutter\");\n            gutters.off(Metro.events.start);\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var StepperDefaultConfig = {\n        stepperDeferred: 0,\n        view: Metro.stepperView.SQUARE, // square, cycle, diamond\n        steps: 3,\n        step: 1,\n        stepClick: false,\n        clsStepper: \"\",\n        clsStep: \"\",\n        clsComplete: \"\",\n        clsCurrent: \"\",\n        onStep: Metro.noop,\n        onStepClick: Metro.noop,\n        onStepperCreate: Metro.noop\n    };\n\n    Metro.stepperSetup = function (options) {\n        StepperDefaultConfig = $.extend({}, StepperDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroStepperSetup\"] !== undefined) {\n        Metro.stepperSetup(window[\"metroStepperSetup\"]);\n    }\n\n    Metro.Component('stepper', {\n        init: function( options, elem ) {\n            this._super(elem, options, StepperDefaultConfig, {\n                current: 0\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n\n            if (o.step <= 0) {\n                o.step = 1;\n            }\n\n            this._createStepper();\n            this._createEvents();\n\n            this._fireEvent(\"stepper-create\", {\n                element: element\n            });\n        },\n\n        _createStepper: function(){\n            var element = this.element, o = this.options;\n            var i;\n\n            element.addClass(\"stepper\").addClass(o.view).addClass(o.clsStepper);\n\n            for(i = 1; i <= o.steps; i++) {\n                $(\"<span>\").addClass(\"step\").addClass(o.clsStep).data(\"step\", i).html(\"<span>\"+i+\"</span>\").appendTo(element);\n            }\n\n            this.current = 1;\n            this.toStep(o.step);\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n\n            element.on(Metro.events.click, \".step\", function(){\n                var step = $(this).data(\"step\");\n                if (o.stepClick === true) {\n                    that.toStep(step);\n\n                    that._fireEvent(\"step-click\", {\n                        step: step\n                    });\n                }\n            });\n        },\n\n        next: function(){\n            var element = this.element;\n            var steps = element.find(\".step\");\n\n            if (this.current + 1 > steps.length) {\n                return ;\n            }\n\n            this.current++;\n\n            this.toStep(this.current);\n        },\n\n        prev: function(){\n            if (this.current - 1 === 0) {\n                return ;\n            }\n\n            this.current--;\n\n            this.toStep(this.current);\n        },\n\n        last: function(){\n            var element = this.element;\n\n            this.toStep(element.find(\".step\").length);\n        },\n\n        first: function(){\n            this.toStep(1);\n        },\n\n        toStep: function(step){\n            var element = this.element, o = this.options;\n            var target = $(element.find(\".step\").get(step - 1));\n            var prevStep = this.current;\n\n            if (target.length === 0) {\n                return ;\n            }\n\n            this.current = step;\n\n            element.find(\".step\")\n                .removeClass(\"complete current\")\n                .removeClass(o.clsCurrent)\n                .removeClass(o.clsComplete);\n\n            target.addClass(\"current\").addClass(o.clsCurrent);\n            target.prevAll().addClass(\"complete\").addClass(o.clsComplete);\n\n            this._fireEvent(\"step\", {\n                step: this.current,\n                prev: prevStep\n            });\n\n        },\n\n        changeAttribute: function(){\n        },\n\n        destroy: function(){\n            var element = this.element;\n            element.off(Metro.events.click, \".step\");\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro) {\n    'use strict';\n    var Utils = Metro.utils;\n\n    var MetroStorage = function(type){\n        return new MetroStorage.init(type);\n    };\n\n    MetroStorage.prototype = {\n        setKey: function(key){\n            this.key = key\n        },\n\n        getKey: function(){\n            return this.key;\n        },\n\n        setItem: function(key, value){\n            this.storage.setItem(this.key + \":\" + key, JSON.stringify(value));\n        },\n\n        getItem: function(key, default_value, reviver){\n            var result, value;\n\n            value = this.storage.getItem(this.key + \":\" + key);\n\n            try {\n                result = JSON.parse(value, reviver);\n            } catch (e) {\n                result = null;\n            }\n            return Utils.nvl(result, default_value);\n        },\n\n        getItemPart: function(key, sub_key, default_value, reviver){\n            var i;\n            var val = this.getItem(key, default_value, reviver);\n\n            sub_key = sub_key.split(\"->\");\n            for(i = 0; i < sub_key.length; i++) {\n                val = val[sub_key[i]];\n            }\n            return val;\n        },\n\n        delItem: function(key){\n            this.storage.removeItem(this.key + \":\" + key)\n        },\n\n        size: function(unit){\n            var divider;\n            switch (unit) {\n                case 'm':\n                case 'M': {\n                    divider = 1024 * 1024;\n                    break;\n                }\n                case 'k':\n                case 'K': {\n                    divider = 1024;\n                    break;\n                }\n                default: divider = 1;\n            }\n            return JSON.stringify(this.storage).length / divider;\n        }\n    };\n\n    MetroStorage.init = function(type){\n\n        this.key = \"\";\n        this.storage = type ? type : window.localStorage;\n\n        return this;\n    };\n\n    MetroStorage.init.prototype = MetroStorage.prototype;\n\n    Metro.storage = MetroStorage(window.localStorage);\n    Metro.session = MetroStorage(window.sessionStorage);\n}(Metro));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var StreamerDefaultConfig = {\n        streamerDeferred: 0,\n        wheel: true,\n        wheelStep: 20,\n        duration: METRO_ANIMATION_DURATION,\n        defaultClosedIcon: \"\",\n        defaultOpenIcon: \"\",\n        changeUri: true,\n        encodeLink: true,\n        closed: false,\n        chromeNotice: false,\n        startFrom: null,\n        slideToStart: true,\n        startSlideSleep: 1000,\n        source: null,\n        data: null,\n        eventClick: \"select\",\n        selectGlobal: true,\n        streamSelect: false,\n        excludeSelectElement: null,\n        excludeClickElement: null,\n        excludeElement: null,\n        excludeSelectClass: \"\",\n        excludeClickClass: \"\",\n        excludeClass: \"\",\n\n        onDataLoad: Metro.noop,\n        onDataLoaded: Metro.noop,\n        onDataLoadError: Metro.noop,\n\n        onDrawEvent: Metro.noop,\n        onDrawGlobalEvent: Metro.noop,\n        onDrawStream: Metro.noop,\n\n        onStreamClick: Metro.noop,\n        onStreamSelect: Metro.noop,\n        onEventClick: Metro.noop,\n        onEventSelect: Metro.noop,\n        onEventsScroll: Metro.noop,\n        onStreamerCreate: Metro.noop\n    };\n\n    Metro.streamerSetup = function (options) {\n        StreamerDefaultConfig = $.extend({}, StreamerDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroStreamerSetup\"] !== undefined) {\n        Metro.streamerSetup(window[\"metroStreamerSetup\"]);\n    }\n\n    Metro.Component('streamer', {\n        init: function( options, elem ) {\n            this._super(elem, options, StreamerDefaultConfig, {\n                data: null,\n                scroll: 0,\n                scrollDir: \"left\",\n                events: null\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n\n            element.addClass(\"streamer\");\n\n            if (element.attr(\"id\") === undefined) {\n                element.attr(\"id\", Utils.elementId(\"streamer\"));\n            }\n\n            if (o.source === null && o.data === null) {\n                return false;\n            }\n\n            $(\"<div>\").addClass(\"streams\").appendTo(element);\n            $(\"<div>\").addClass(\"events-area\").appendTo(element);\n\n            if (o.source !== null) {\n\n                this._fireEvent(\"data-load\", {\n                    source: o.source\n                });\n\n                this._loadSource();\n            } else {\n                this.data = o.data;\n                this.build();\n            }\n\n            if (o.chromeNotice === true && Utils.detectChrome() === true && $.touchable === false) {\n                $(\"<p>\").addClass(\"text-small text-muted\").html(\"*) In Chrome browser please press and hold Shift and turn the mouse wheel.\").insertAfter(element);\n            }\n        },\n\n        _loadSource: function(){\n            var that = this, o = this.options;\n\n            fetch(o.source)\n                .then(Metro.fetch.status)\n                .then(Metro.fetch.json)\n                .then(function(data){\n                    that._fireEvent(\"data-loaded\", {\n                        source: o.source,\n                        data: data\n                    });\n\n                    that.data = data;\n                    that.build();\n                })\n                .catch(function (error) {\n                    that._fireEvent(\"data-load-error\", {\n                        source: o.source,\n                        error: error\n                    });\n                });\n        },\n\n        build: function(){\n            var that = this, element = this.element, o = this.options, data = this.data;\n            var streams = element.find(\".streams\").html(\"\");\n            var events_area = element.find(\".events-area\").html(\"\");\n            var fake_timeline;\n            var timeline = $(\"<ul>\").addClass(\"streamer-timeline\").html(\"\").appendTo(events_area);\n            var streamer_events = $(\"<div>\").addClass(\"streamer-events\").appendTo(events_area);\n            var event_group_main = $(\"<div>\").addClass(\"event-group\").appendTo(streamer_events);\n            var StreamerIDS = Utils.getURIParameter(null, \"StreamerIDS\");\n\n            if (StreamerIDS !== null && o.encodeLink === true) {\n                StreamerIDS = atob(StreamerIDS);\n            }\n\n            var StreamerIDS_i = StreamerIDS ? StreamerIDS.split(\"|\")[0] : null;\n            var StreamerIDS_a = StreamerIDS ? StreamerIDS.split(\"|\")[1].split(\",\") : [];\n\n            if (data.actions !== undefined) {\n                var actions = $(\"<div>\").addClass(\"streamer-actions\").appendTo(streams);\n                $.each(data.actions, function(){\n                    var item = this;\n                    var button = $(\"<button>\").addClass(\"streamer-action\").addClass(item.cls).html(item.html);\n                    if (item.onclick !== undefined) button.on(Metro.events.click, function(){\n                        Utils.exec(item.onclick, [element]);\n                    });\n                    button.appendTo(actions);\n                });\n            }\n\n            // Create timeline\n\n            timeline.html(\"\");\n\n            if (data.timeline === undefined) {\n                data.timeline = {\n                    start: \"09:00\",\n                    stop: \"18:00\",\n                    step: 20\n                }\n            }\n\n            var start = new Date(), stop = new Date();\n            var start_time_array = data.timeline.start ? data.timeline.start.split(\":\") : [9,0];\n            var stop_time_array = data.timeline.stop ? data.timeline.stop.split(\":\") : [18,0];\n            var step = data.timeline.step ? parseInt(data.timeline.step) * 60 : 1200;\n\n            start.setHours(start_time_array[0]);\n            start.setMinutes(start_time_array[1]);\n            start.setSeconds(0);\n\n            stop.setHours(stop_time_array[0]);\n            stop.setMinutes(stop_time_array[1]);\n            stop.setSeconds(0);\n\n            var i, t, h, v, m, j, fm, li, fli, fli_w;\n\n            for (i = start.getTime()/1000; i <= stop.getTime()/1000; i += step) {\n                t = new Date(i * 1000);\n                h = t.getHours();\n                m = t.getMinutes();\n                v = Cake.lpad(h, 2, \"0\")+\":\"+Cake.lpad(m, 2, \"0\");\n\n                li = $(\"<li>\").data(\"time\", v).addClass(\"js-time-point-\" + v.replace(\":\", \"-\")).html(\"<em>\"+v+\"</em>\").appendTo(timeline);\n\n                fli_w = li.width() / parseInt(data.timeline.step);\n                fake_timeline = $(\"<ul>\").addClass(\"streamer-fake-timeline\").html(\"\").appendTo(li);\n                for(j = 0; j < parseInt(data.timeline.step); j++) {\n                    fm = m + j;\n                    v = Cake.lpad(h, 2, \"0\")+\":\"+Cake.lpad(fm, 2, \"0\");\n                    fli = $(\"<li>\").data(\"time\", v).addClass(\"js-fake-time-point-\" + v.replace(\":\", \"-\")).html(\"|\").appendTo(fake_timeline);\n                    fli.css({\n                        width: fli_w\n                    })\n                }\n            }\n\n            // -- End timeline creator\n\n            if (data.streams !== undefined) {\n                $.each(data.streams, function(stream_index){\n                    var stream_height = 75, rows = 0;\n                    var stream_item = this;\n                    var stream = $(\"<div>\").addClass(\"stream\").addClass(this.cls).appendTo(streams);\n                    stream\n                        .addClass(stream_item.cls)\n                        .data(\"one\", false)\n                        .data(\"data\", stream_item.data);\n\n                    $(\"<div>\").addClass(\"stream-title\").html(stream_item.title).appendTo(stream);\n                    $(\"<div>\").addClass(\"stream-secondary\").html(stream_item.secondary).appendTo(stream);\n                    $(stream_item.icon).addClass(\"stream-icon\").appendTo(stream);\n\n                    var bg = Metro.colors.toHEX(Utils.getStyleOne(stream, \"background-color\"));\n                    var fg = Metro.colors.toHEX(Utils.getStyleOne(stream, \"color\"));\n\n                    var stream_events = $(\"<div>\").addClass(\"stream-events\")\n                        .data(\"background-color\", bg)\n                        .data(\"text-color\", fg)\n                        .appendTo(event_group_main);\n\n                    if (stream_item.events !== undefined) {\n                        $.each(stream_item.events, function(event_index){\n                            var event_item = this;\n                            var row = event_item.row === undefined ? 1 : parseInt(event_item.row);\n                            var _icon;\n                            var sid = stream_index+\":\"+event_index;\n                            var custom_html = event_item.custom !== undefined ? event_item.custom : \"\";\n                            var custom_html_open = event_item.custom_open !== undefined ? event_item.custom_open : \"\";\n                            var custom_html_close = event_item.custom_close !== undefined ? event_item.custom_close : \"\";\n                            var event;\n\n                            if (event_item.skip !== undefined && Utils.bool(event_item.skip)) {\n                                return ;\n                            }\n\n                            event = $(\"<div>\")\n                                .data(\"origin\", event_item)\n                                .data(\"sid\", sid)\n                                .data(\"data\", event_item.data)\n                                .data(\"time\", event_item.time)\n                                .data(\"target\", event_item.target)\n                                .addClass(\"stream-event\")\n                                .addClass(\"size-\"+event_item.size+([\"half\", \"one-third\"].includes(event_item.size) ? \"\" : \"x\"))\n                                .addClass(event_item.cls)\n                                .appendTo(stream_events);\n\n\n                            var time_point = timeline.find(\".js-fake-time-point-\"+this.time.replace(\":\", \"-\"));\n                            var left = time_point.offset().left - stream_events.offset().left;\n                            var top = 75 * (row - 1);\n\n                            if (row > rows) {\n                                rows = row;\n                            }\n\n                            event.css({\n                                position: \"absolute\",\n                                left: left,\n                                top: top\n                            });\n\n\n                            if (Utils.isNull(event_item.html)) {\n\n                                var slide = $(\"<div>\").addClass(\"stream-event-slide\").appendTo(event);\n                                var slide_logo = $(\"<div>\").addClass(\"slide-logo\").appendTo(slide);\n                                var slide_data = $(\"<div>\").addClass(\"slide-data\").appendTo(slide);\n\n                                if (event_item.icon !== undefined) {\n                                    if (Utils.isTag(event_item.icon)) {\n                                        $(event_item.icon).addClass(\"icon\").appendTo(slide_logo);\n                                    } else {\n                                        $(\"<img>\").addClass(\"icon\").attr(\"src\", event_item.icon).appendTo(slide_logo);\n                                    }\n                                }\n\n                                $(\"<span>\").addClass(\"time\").css({\n                                    backgroundColor: bg,\n                                    color: fg\n                                }).html(event_item.time).appendTo(slide_logo);\n\n                                $(\"<div>\").addClass(\"title\").html(event_item.title).appendTo(slide_data);\n                                $(\"<div>\").addClass(\"subtitle\").html(event_item.subtitle).appendTo(slide_data);\n                                $(\"<div>\").addClass(\"desc\").html(event_item.desc).appendTo(slide_data);\n\n                                if (o.closed === false && (element.attr(\"id\") === StreamerIDS_i && StreamerIDS_a.indexOf(sid) !== -1) || event_item.selected === true || parseInt(event_item.selected) === 1) {\n                                    event.addClass(\"selected\");\n                                }\n\n                                if (o.closed === true || event_item.closed === true || parseInt(event_item.closed) === 1) {\n                                    _icon = event_item.closedIcon !== undefined ? Utils.isTag(event_item.closedIcon) ? event_item.closedIcon : \"<span>\" + event_item.closedIcon + \"</span>\" : Utils.isTag(o.defaultClosedIcon) ? o.defaultClosedIcon : \"<span>\" + o.defaultClosedIcon + \"</span>\";\n                                    $(_icon).addClass(\"state-icon\").addClass(event_item.clsClosedIcon).appendTo(slide);\n                                    event\n                                        .data(\"closed\", true)\n                                        .data(\"target\", event_item.target);\n                                    event.append(custom_html_open);\n                                } else {\n                                    _icon = event_item.openIcon !== undefined ? Utils.isTag(event_item.openIcon) ? event_item.openIcon : \"<span>\" + event_item.openIcon + \"</span>\" : Utils.isTag(o.defaultOpenIcon) ? o.defaultOpenIcon : \"<span>\" + o.defaultOpenIcon + \"</span>\";\n                                    $(_icon).addClass(\"state-icon\").addClass(event_item.clsOpenIcon).appendTo(slide);\n                                    event\n                                        .data(\"closed\", false);\n                                    event.append(custom_html_close);\n                                }\n\n                                event.append(custom_html);\n                            } else {\n                                event.html(event_item.html);\n                            }\n\n                            that._fireEvent(\"draw-event\", {\n                                event: event[0]\n                            });\n\n                        });\n\n                        var last_child = stream_events.find(\".stream-event\").last();\n                        if (last_child.length > 0) stream_events.outerWidth(last_child[0].offsetLeft + last_child.outerWidth());\n                    }\n\n                    stream_events.css({\n                        height: stream_height * rows\n                    });\n\n                    element.find(\".stream\").eq(stream_events.index()).css({\n                        height: stream_height * rows\n                    });\n\n                    that._fireEvent(\"draw-stream\", {\n                        stream: stream[0]\n                    });\n\n                });\n            }\n\n            if (data.global !== undefined) {\n                var streamer_events_left = streamer_events.offset().left;\n                $.each(['before', 'after'], function(){\n                    var global_item = this;\n                    if (data.global[global_item] !== undefined) {\n                        $.each(data.global[global_item], function(){\n                            var event_item = this;\n                            var group = $(\"<div>\").addClass(\"event-group\").addClass(\"size-\"+event_item.size+([\"half\", \"one-third\"].includes(event_item.size) ? \"\" : \"x\"));\n                            var events = $(\"<div>\").addClass(\"stream-events global-stream\").appendTo(group);\n                            var event = $(\"<div>\").addClass(\"stream-event\").appendTo(events);\n                            event\n                                .addClass(\"global-event\")\n                                .addClass(event_item.cls)\n                                .data(\"time\", event_item.time)\n                                .data(\"origin\", event_item)\n                                .data(\"data\", event_item.data);\n\n                            $(\"<div>\").addClass(\"event-title\").html(event_item.title).appendTo(event);\n                            $(\"<div>\").addClass(\"event-subtitle\").html(event_item.subtitle).appendTo(event);\n                            $(\"<div>\").addClass(\"event-html\").html(event_item.html).appendTo(event);\n\n                            var left, t = timeline.find(\".js-fake-time-point-\"+this.time.replace(\":\", \"-\"));\n\n                            if (t.length > 0) {\n                                // left = t[0].offsetLeft - streams.find(\".stream\").outerWidth();\n                                left = t.offset().left - streamer_events_left;\n                            }\n                            group.css({\n                                position: \"absolute\",\n                                left: left,\n                                height: \"100%\"\n                            }).appendTo(streamer_events);\n\n                            that._fireEvent(\"draw-global-event\", {\n                                event: event[0]\n                            });\n\n                        });\n                    }\n                });\n            }\n\n            element.data(\"stream\", -1);\n            element.find(\".events-area\").scrollLeft(0);\n\n            this.events = element.find(\".stream-event\");\n\n            this._createEvents();\n\n            if (o.startFrom !== null && o.slideToStart === true) {\n                setTimeout(function(){\n                    that.slideTo(o.startFrom);\n                }, o.startSlideSleep);\n            }\n\n            this._fireEvent(\"streamer-create\");\n\n            this._fireScroll();\n        },\n\n        _fireScroll: function(){\n            var that = this, element = this.element;\n            var scrollable = element.find(\".events-area\");\n            var oldScroll = this.scroll;\n\n            if (scrollable.length === 0) {\n                return undefined;\n            }\n\n            this.scrollDir = this.scroll < scrollable[0].scrollLeft ? \"left\" : \"right\";\n            this.scroll = scrollable[0].scrollLeft;\n\n            this._fireEvent(\"events-scroll\", {\n                scrollLeft: scrollable[0].scrollLeft,\n                oldScroll: oldScroll,\n                scrollDir: that.scrollDir,\n                events: $.toArray(this.events)\n            });\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n\n            function disableScroll() {\n                var scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n                var scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;\n\n                window.onscroll = function() {\n                    window.scrollTo(scrollLeft, scrollTop);\n                };\n            }\n\n            function enableScroll() {\n                window.onscroll = function() {};\n            }\n\n            element.off(Metro.events.click, \".stream-event\").on(Metro.events.click, \".stream-event\", function(e){\n                var event = $(this);\n\n                if (o.excludeClass !== \"\" && event.hasClass(o.excludeClass)) {\n                    return ;\n                }\n\n                if (o.excludeElement !== null && $(e.target).is(o.excludeElement)) {\n                    return ;\n                }\n\n                if (o.closed === false && event.data(\"closed\") !== true && o.eventClick === 'select') {\n                    if (o.excludeSelectClass !== \"\" && event.hasClass(o.excludeSelectClass)) {\n                        /* eslint-disable-next-line */\n\n                    } else {\n                        if (o.excludeSelectElement !== null && $(e.target).is(o.excludeSelectElement)) {\n                            /* eslint-disable-next-line */\n\n                        } else {\n                            if (event.hasClass(\"global-event\")) {\n                                if (o.selectGlobal === true) {\n                                    event.toggleClass(\"selected\");\n                                }\n                            } else {\n                                event.toggleClass(\"selected\");\n                            }\n                            if (o.changeUri === true) {\n                                that._changeURI();\n                            }\n\n                            that._fireEvent(\"event-select\", {\n                                event: event[0],\n                                selected: event.hasClass(\"selected\")\n                            });\n                        }\n                    }\n                } else {\n                    if (o.excludeClickClass !== \"\" && event.hasClass(o.excludeClickClass)) {\n                        /* eslint-disable-next-line */\n\n                    } else {\n\n                        if (o.excludeClickElement !== null && $(e.target).is(o.excludeClickElement)) {\n                            /* eslint-disable-next-line */\n\n                        } else {\n\n                            that._fireEvent(\"event-click\", {\n                                event: event[0]\n                            });\n\n                            if (o.closed === true || event.data(\"closed\") === true) {\n                                var target = event.data(\"target\");\n                                if (target) {\n                                    window.location.href = target;\n                                }\n                            }\n\n                        }\n                    }\n                }\n            });\n\n            element.off(Metro.events.click, \".stream\").on(Metro.events.click, \".stream\", function(){\n                var stream = $(this);\n                var index = stream.index();\n\n                if (o.streamSelect === false) {\n                    return;\n                }\n\n                if (element.data(\"stream\") === index) {\n                    element.find(\".stream-event\").removeClass(\"disabled\");\n                    element.data(\"stream\", -1);\n                } else {\n                    element.data(\"stream\", index);\n                    element.find(\".stream-event\").addClass(\"disabled\");\n                    that.enableStream(stream);\n                    that._fireEvent(\"stream-select\", {\n                        stream: stream\n                    });\n                }\n\n                that._fireEvent(\"stream-click\", {\n                    stream: stream\n                });\n            });\n\n            if (o.wheel === true) {\n                element.find(\".events-area\")\n                    .off(Metro.events.mousewheel)\n                    .on(Metro.events.mousewheel, function(e) {\n\n                    if (e.deltaY === undefined) {\n                        return ;\n                    }\n\n                    var scroll, scrollable = $(this);\n                    var dir = e.deltaY > 0 ? -1 : 1;\n                    var step = o.wheelStep;\n\n\n                    scroll = scrollable.scrollLeft() - ( dir * step);\n                    scrollable.scrollLeft(scroll);\n\n                });\n\n                element.find(\".events-area\").off(\"mouseenter\").on(\"mouseenter\", function() {\n                    disableScroll();\n                });\n\n                element.find(\".events-area\").off(\"mouseleave\").on(\"mouseleave\", function() {\n                    enableScroll();\n                });\n            }\n\n            element.find(\".events-area\").last().off(\"scroll\").on(\"scroll\", function(){\n                that._fireScroll();\n            });\n\n            if ($.touchable === true) {\n                element.off(Metro.events.click, \".stream\").on(Metro.events.click, \".stream\", function(){\n                    var stream = $(this);\n                    stream.toggleClass(\"focused\");\n                    $.each(element.find(\".stream\"), function () {\n                        if ($(this).is(stream)) return ;\n                        $(this).removeClass(\"focused\");\n                    })\n                })\n            }\n        },\n\n        _changeURI: function(){\n            var link = this.getLink();\n            history.pushState({}, document.title, link);\n        },\n\n        slideTo: function(time){\n            var element = this.element, o = this.options;\n            var target;\n            if (time === undefined) {\n                target = $(element.find(\".streamer-timeline li\")[0]);\n            } else {\n                target = $(element.find(\".streamer-timeline .js-time-point-\" + time.replace(\":\", \"-\"))[0]);\n            }\n\n            element\n                .find(\".events-area\")\n                .animate({\n                    draw: {\n                        scrollLeft: target[0].offsetLeft - element.find(\".streams .stream\").outerWidth()\n                    },\n                    dur: o.duration\n                });\n        },\n\n        enableStream: function(stream){\n            var element = this.element;\n            var index = stream.index()-1;\n            stream.removeClass(\"disabled\").data(\"streamDisabled\", false);\n            element.find(\".stream-events\").eq(index).find(\".stream-event\").removeClass(\"disabled\");\n        },\n\n        disableStream: function(stream){\n            var element = this.element;\n            var index = stream.index()-1;\n            stream.addClass(\"disabled\").data(\"streamDisabled\", true);\n            element.find(\".stream-events\").eq(index).find(\".stream-event\").addClass(\"disabled\");\n        },\n\n        toggleStream: function(stream){\n            if (stream.data(\"streamDisabled\") === true) {\n                this.enableStream(stream);\n            } else {\n                this.disableStream(stream);\n            }\n        },\n\n        getLink: function(){\n            var element = this.element, o = this.options;\n            var events = element.find(\".stream-event\");\n            var a = [];\n            var link;\n            var origin = window.location.href;\n\n            $.each(events, function(){\n                var event = $(this);\n                if (event.data(\"sid\") === undefined || !event.hasClass(\"selected\")) {\n                    return;\n                }\n\n                a.push(event.data(\"sid\"));\n            });\n\n            link = element.attr(\"id\") + \"|\" + a.join(\",\");\n\n            if (o.encodeLink === true) {\n                link = btoa(link);\n            }\n\n            return Utils.updateURIParameter(origin, \"StreamerIDS\", link);\n        },\n\n        getTimes: function(){\n            var element = this.element;\n            var times = element.find(\".streamer-timeline > li\");\n            var result = [];\n            $.each(times, function(){\n                result.push($(this).data(\"time\"));\n            });\n            return result;\n        },\n\n        getEvents: function(event_type, include_global){\n            var element = this.element;\n            var items, events = [];\n\n            switch (event_type) {\n                case \"selected\": items = element.find(\".stream-event.selected\"); break;\n                case \"non-selected\": items = element.find(\".stream-event:not(.selected)\"); break;\n                default: items = element.find(\".stream-event\");\n            }\n\n            $.each(items, function(){\n                var item = $(this);\n                var origin;\n\n                if (include_global !== true && item.parent().hasClass(\"global-stream\")) return ;\n\n                origin = item.data(\"origin\");\n\n                events.push(origin);\n            });\n\n            return events;\n        },\n\n        source: function(s){\n            var element = this.element;\n\n            if (s === undefined) {\n                return this.options.source;\n            }\n\n            element.attr(\"data-source\", s);\n\n            this.options.source = s;\n            this.changeSource();\n        },\n\n        dataSet: function(s){\n            if (s === undefined) {\n                return this.options.data;\n            }\n\n            this.options.data = s;\n            this.changeData(s);\n        },\n\n        getStreamerData: function(){\n            return this.data;\n        },\n\n        toggleEvent: function(event){\n            var o = this.options;\n            event = $(event);\n\n            if (event.hasClass(\"global-event\") && o.selectGlobal !== true) {\n                return ;\n            }\n\n            if (event.hasClass(\"selected\")) {\n                this.selectEvent(event, false);\n            } else {\n                this.selectEvent(event, true);\n            }\n        },\n\n        selectEvent: function(event, state){\n            var that = this, o = this.options;\n            if (state === undefined) {\n                state = true;\n            }\n            event = $(event);\n\n            if (event.hasClass(\"global-event\") && o.selectGlobal !== true) {\n                return ;\n            }\n\n            if (state === true) event.addClass(\"selected\"); else event.removeClass(\"selected\");\n\n            if (o.changeUri === true) {\n                that._changeURI();\n            }\n\n            this._fireEvent(\"event-select\", {\n                event: event[0],\n                selected: state\n            });\n        },\n\n        changeSource: function(){\n            var element = this.element, o = this.options;\n            var new_source = element.attr(\"data-source\");\n\n            if (String(new_source).trim() === \"\") {\n                return ;\n            }\n\n            o.source = new_source;\n\n            this._fireEvent(\"data-load\", {\n                source: o.source\n            });\n\n            this._loadSource();\n\n            // $.json(o.source).then(function(data){\n            //\n            //     that._fireEvent(\"data-loaded\", {\n            //         source: o.source,\n            //         data: data\n            //     });\n            //\n            //     that.data = data;\n            //     that.build();\n            // }, function(xhr){\n            //\n            //     that._fireEvent(\"data-load-error\", {\n            //         source: o.source,\n            //         xhr: xhr\n            //     });\n            // });\n\n            this._fireEvent(\"source-change\");\n        },\n\n        changeData: function(data){\n            var element = this.element, o = this.options;\n            var old_data = this.data;\n\n            o.data =  typeof data === 'object' ? data : JSON.parse(element.attr(\"data-data\"));\n\n            this.data = o.data;\n\n            this.build();\n\n            this._fireEvent(\"data-change\", {\n                oldData: old_data,\n                newData: o.data\n            });\n        },\n\n        changeStreamSelectOption: function(){\n            var element = this.element, o = this.options;\n\n            o.streamSelect = element.attr(\"data-stream-select\").toLowerCase() === \"true\";\n        },\n\n        changeAttribute: function(attributeName){\n            switch (attributeName) {\n                case 'data-source': this.changeSource(); break;\n                case 'data-data': this.changeData(); break;\n                case 'data-stream-select': this.changeStreamSelectOption(); break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element;\n\n            element.off(Metro.events.click, \".stream-event\");\n            element.off(Metro.events.click, \".stream\");\n            element.find(\".events-area\").off(Metro.events.mousewheel);\n            element.find(\".events-area\").last().off(\"scroll\");\n            // element.off(Metro.events.click, \".stream\");\n\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var SwitchDefaultConfig = {\n        switchDeferred: 0,\n        material: false,\n        transition: true,\n        caption: \"\",\n        captionPosition: \"right\",\n        clsSwitch: \"\",\n        clsCheck: \"\",\n        clsCaption: \"\",\n        textOn: \"\",\n        textOff: \"\",\n        locale: METRO_LOCALE,\n        showOnOff: false,\n        onSwitchCreate: Metro.noop\n    };\n\n    Metro.switchSetup = function (options) {\n        SwitchDefaultConfig = $.extend({}, SwitchDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroSwitchSetup\"] !== undefined) {\n        Metro.switchSetup(window[\"metroSwitchSetup\"]);\n    }\n\n    Metro.Component('switch', {\n        init: function( options, elem ) {\n            this._super(elem, options, SwitchDefaultConfig, {\n                locale: null\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n            var container ;\n            var check = $(\"<span>\").addClass(\"check\");\n            var caption = $(\"<span>\").addClass(\"caption\").html(o.caption);\n\n            element.attr(\"type\", \"checkbox\");\n\n            if (element.attr(\"readonly\") !== undefined) {\n                element.on(\"click\", function(e){\n                    e.preventDefault();\n                })\n            }\n\n            container = element.wrap(\n                $(\"<label>\").addClass((o.material === true ? \" switch-material \" : \" switch \") + element[0].className)\n            );\n\n            this.component = container;\n\n            check.appendTo(container);\n            caption.appendTo(container);\n\n            if (o.transition === true) {\n                container.addClass(\"transition-on\");\n            }\n\n            if (o.captionPosition === 'left') {\n                container.addClass(\"caption-left\");\n            }\n\n            element[0].className = '';\n\n            container.addClass(o.clsSwitch);\n            caption.addClass(o.clsCaption);\n            check.addClass(o.clsCheck);\n\n            if (element.is(':disabled')) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n\n            this.i18n(o.locale);\n            this._fireEvent(\"switch-create\");\n        },\n\n        disable: function(){\n            this.element.prop(\"disabled\", true);\n        },\n\n        enable: function(){\n            this.element.prop(\"disabled\", false);\n        },\n\n        toggleState: function(){\n            var element = this.element;\n\n            if (!element.is(\":disabled\")) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        },\n\n        toggle: function(v){\n            var element = this.element;\n\n            if (element.is(\":disabled\")) return this;\n\n            if (!Utils.isValue(v)) {\n                element.prop(\"checked\", !Utils.bool(element.prop(\"checked\")));\n            } else {\n                element.prop(\"checked\", v === 1);\n            }\n\n            return this;\n        },\n\n        changeLocale: function(where, val){\n            var element = this.element, o = this.options;\n            var check = element.siblings(\".check\");\n\n            o[\"text\"+Cake.capitalize(where)] = val\n\n            check.attr(\"data-\"+where, val);\n        },\n\n        i18n: function(locale){\n            var element = this.element, o = this.options;\n            var check = element.siblings(\".check\");\n            var on, off;\n\n            o.locale = locale;\n            this.locale = Metro.locales[o.locale] !== undefined ? Metro.locales[o.locale] : Metro.locales[\"en-US\"];\n\n            if (o.showOnOff) {\n                on = element.attr(\"data-on\") || o.textOn || this.locale.switch.on;\n                off = element.attr(\"data-off\") || o.textOff || this.locale.switch.off;\n\n                check.attr(\"data-on\", on);\n                check.attr(\"data-off\", off);\n            } else {\n                check.removeAttr(\"data-on\");\n                check.removeAttr(\"data-off\");\n            }\n        },\n\n        changeAttribute: function(attr, newVal){\n            switch (attr) {\n                case 'data-on':\n                case 'data-text-on': this.changeLocale('on', newVal); break;\n                case 'data-off':\n                case 'data-text-off': this.changeLocale('off', newVal); break;\n            }\n        },\n\n        destroy: function(){\n            return this.element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n\n    var Utils = Metro.utils;\n    var TableDefaultConfig = {\n        useCurrentSlice: false,\n        showInspectorButton: false,\n        inspectorButtonIcon: \"<span class='default-icon-equalizer'>\",\n        tableDeferred: 0,\n        templateBeginToken: \"<%\",\n        templateEndToken: \"%>\",\n        paginationDistance: 5,\n\n        locale: METRO_LOCALE,\n\n        horizontalScroll: false,\n        horizontalScrollStop: null,\n        check: false,\n        checkType: \"checkbox\",\n        checkStyle: 1,\n        checkColIndex: 0,\n        checkName: null,\n        checkStoreKey: \"TABLE:$1:KEYS\",\n        rownum: false,\n        rownumTitle: \"#\",\n\n        filters: null,\n        filtersOperator: \"and\",\n\n        head: null,\n        body: null,\n        static: false,\n        source: null,\n\n        searchMinLength: 1,\n        searchThreshold: 500,\n        searchFields: null,\n\n        showRowsSteps: true,\n        showSearch: true,\n        showTableInfo: true,\n        showPagination: true,\n        paginationShortMode: true,\n        showActivity: true,\n        muteTable: true,\n        showSkip: false,\n\n        rows: 10,\n        rowsSteps: \"10,25,50,100\",\n\n        staticView: false,\n        viewSaveMode: \"client\",\n        viewSavePath: \"TABLE:$1:OPTIONS\",\n\n        sortDir: \"asc\",\n        decimalSeparator: \".\",\n        thousandSeparator: \",\",\n\n        tableRowsCountTitle: null,\n        tableSearchTitle: null,\n        tableSearchPlaceholder: \"\",\n        tableInfoTitle: null,\n        paginationPrevTitle: null,\n        paginationNextTitle: null,\n        allRecordsTitle: null,\n        inspectorTitle: null,\n        tableSkipTitle: null,\n        emptyTableTitle: null,\n\n        activityType: \"atom\",\n        activityStyle: \"color\",\n        activityTimeout: 100,\n\n        searchWrapper: null,\n        rowsWrapper: null,\n        infoWrapper: null,\n        paginationWrapper: null,\n        skipWrapper: null,\n\n        cellWrapper: true,\n\n        clsComponent: \"\",\n        clsTableContainer: \"\",\n        clsTable: \"\",\n\n        clsHead: \"\",\n        clsHeadRow: \"\",\n        clsHeadCell: \"\",\n\n        clsBody: \"\",\n        clsBodyRow: \"\",\n        clsBodyCell: \"\",\n        clsCellWrapper: \"\",\n\n        clsFooter: \"\",\n        clsFooterRow: \"\",\n        clsFooterCell: \"\",\n\n        clsTableTop: \"\",\n        clsRowsCount: \"\",\n        clsSearch: \"\",\n\n        clsTableBottom: \"\",\n        clsTableInfo: \"\",\n        clsTablePagination: \"\",\n\n        clsPagination: \"\",\n        clsTableSkip: \"\",\n        clsTableSkipInput: \"\",\n        clsTableSkipButton: \"\",\n\n        clsEvenRow: \"\",\n        clsOddRow: \"\",\n        clsRow: \"\",\n\n        clsEmptyTableTitle: \"\",\n\n        onDraw: Metro.noop,\n        onDrawRow: Metro.noop,\n        onDrawCell: Metro.noop,\n        onAppendRow: Metro.noop,\n        onAppendCell: Metro.noop,\n        onSortStart: Metro.noop,\n        onSortStop: Metro.noop,\n        onSortItemSwitch: Metro.noop,\n        onSearch: Metro.noop,\n        onRowsCountChange: Metro.noop,\n        onDataLoad: Metro.noop,\n        onDataLoadError: Metro.noop,\n        onDataLoaded: Metro.noop,\n        onDataLoadEnd: Metro.noop,\n        onDataSaveError: Metro.noop,\n        onFilterRowAccepted: Metro.noop,\n        onFilterRowDeclined: Metro.noop,\n        onCheckClick: Metro.noop,\n        onCheckClickAll: Metro.noop,\n        onCheckDraw: Metro.noop,\n        onViewSave: Metro.noop,\n        onViewGet: Metro.noop,\n        onViewCreated: Metro.noop,\n        onTableCreate: Metro.noop,\n        onSkip: Metro.noop\n    };\n\n    Metro.tableSetup = function(options){\n        TableDefaultConfig = $.extend({}, TableDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroTableSetup\"] !== undefined) {\n        Metro.tableSetup(window[\"metroTableSetup\"]);\n    }\n\n    Metro.Component('table', {\n        init: function( options, elem ) {\n            this._super(elem, options, TableDefaultConfig, {\n                currentPage: 1,\n                pagesCount: 1,\n                searchString: \"\",\n                data: null,\n                activity: null,\n                loadActivity: null,\n                busy: false,\n                filters: [],\n                wrapperInfo: null,\n                wrapperSearch: null,\n                wrapperRows: null,\n                wrapperPagination: null,\n                wrapperSkip: null,\n                filterIndex: null,\n                filtersIndexes: [],\n                component: null,\n                inspector: null,\n                view: {},\n                viewDefault: {},\n                locale: Metro.locales[\"en-US\"],\n                input_interval: null,\n                searchFields: [],\n                id: Utils.elementId('table'),\n                sort: {\n                    dir: \"asc\",\n                    colIndex: 0\n                },\n                service: [],\n                heads: [],\n                items: [],\n                foots: [],\n                filteredItems: [],\n                currentSlice: [],\n                index: {}\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var that = this, element = this.element, o = this.options;\n            var id = Utils.elementId(\"table\");\n            var table_component, table_container, activity;\n\n            if (!Utils.isValue(element.attr(\"id\"))) {\n                element.attr(\"id\", id);\n            }\n\n            if (Utils.isValue(Metro.locales[o.locale])) {\n                this.locale = Metro.locales[o.locale];\n            }\n\n            if (Utils.isValue(o.searchFields)) {\n                this.searchFields = o.searchFields.toArray();\n            }\n\n            if (Utils.isValue(o.head)) {\n                var _head = o.head;\n                o.head = Utils.isObject(o.head);\n                if (!o.head) {\n                    console.warn(\"Head \"+_head+\" defined but not exists!\");\n                    o.head = null;\n                }\n            }\n\n            if (Utils.isValue(o.body)) {\n                var _body = o.body;\n                o.body = Utils.isObject(o.body);\n                if (!o.body) {\n                    console.warn(\"Body \"+_body+\" defined but not exists!\");\n                    o.body = null;\n                }\n            }\n\n            if (o.static === true) {\n                o.showPagination = false;\n                o.showRowsSteps = false;\n                o.showSearch = false;\n                o.showTableInfo = false;\n                o.showSkip = false;\n                o.rows = -1;\n            }\n\n            table_component = $(\"<div>\").addClass(\"table-component\");\n            table_component.insertBefore(element);\n\n            table_container = $(\"<div>\").addClass(\"table-container\").addClass(o.clsTableContainer).appendTo(table_component);\n            element.appendTo(table_container);\n\n            if (o.horizontalScroll === true) {\n                table_container.addClass(\"horizontal-scroll\");\n            }\n            if (!Utils.isNull(o.horizontalScrollStop) && Utils.mediaExist(o.horizontalScrollStop)) {\n                table_container.removeClass(\"horizontal-scroll\");\n            }\n\n            table_component.addClass(o.clsComponent);\n\n            this.activity =  $(\"<div>\").addClass(\"table-progress\").appendTo(table_component);\n\n            activity = $(\"<div>\").appendTo(this.activity);\n            Metro.makePlugin(activity, \"activity\", {\n                type: o.activityType,\n                style: o.activityStyle\n            });\n\n            if (o.showActivity !== true) {\n                this.activity.css({\n                    visibility: \"hidden\"\n                })\n            }\n\n            this.component = table_component[0];\n\n            if (o.source !== null) {\n\n                this._fireEvent(\"data-load\", {\n                    source: o.source\n                });\n\n                var objSource = Utils.isObject(o.source);\n\n                if (objSource !== false && $.isPlainObject(objSource)) {\n                    that._build(objSource);\n                } else {\n                    this.activity.show(function () {\n                        fetch(o.source)\n                            .then(Metro.fetch.status)\n                            .then(Metro.fetch.json)\n                            .then(function(data){\n                                that.activity.hide();\n                                if (typeof data !== \"object\") {\n                                    throw new Error(\"Data for table is not a object\");\n                                }\n\n                                that._fireEvent(\"data-loaded\", {\n                                    source: o.source,\n                                    data: data\n                                });\n\n                                that._build(data);\n                            })\n                            .catch(function(error){\n                                that.activity.hide();\n\n                                that._fireEvent(\"data-load-error\", {\n                                    source: o.source,\n                                    error: error\n                                });\n                            });\n                    });\n                }\n            } else {\n                that._build();\n            }\n        },\n\n        _createIndex: function(){\n            var that = this, colIndex = this.options.checkColIndex;\n            setImmediate(function(){\n                that.items.forEach(function(v, i){\n                    that.index[v[colIndex]] = i;\n                });\n            });\n        },\n\n        _build: function(data){\n            var that = this, element = this.element, o = this.options;\n            var view, id = element.attr(\"id\"), viewPath;\n\n            o.rows = +o.rows;\n\n            this.items = [];\n            this.heads = [];\n            this.foots = [];\n\n            if (Array.isArray(o.head)) {\n                this.heads = o.head;\n            }\n\n            if (Array.isArray(o.body)) {\n                this.items = o.body;\n            }\n\n            if (Utils.isValue(data)) {\n                this._createItemsFromJSON(data);\n            } else {\n                this._createItemsFromHTML()\n            }\n\n            // Create index\n            this._createIndex();\n\n            this.view = this._createView();\n            this.viewDefault = Utils.objectClone(this.view);\n\n            viewPath = o.viewSavePath.replace(\"$1\", id);\n\n            if (o.viewSaveMode.toLowerCase() === \"client\") {\n\n                view = Metro.storage.getItem(viewPath);\n                if (Utils.isValue(view) && Utils.objectLength(view) === Utils.objectLength(this.view)) {\n                    this.view = view;\n\n                    this._fireEvent(\"view-get\", {\n                        source: \"client\",\n                        view: view\n                    });\n                }\n                this._final();\n\n            } else {\n\n                fetch(viewPath)\n                    .then(Metro.fetch.status)\n                    .then(Metro.fetch.json)\n                    .then(function(view){\n                        if (Utils.isValue(view) && Utils.objectLength(view) === Utils.objectLength(that.view)) {\n                            that.view = view;\n                            that._fireEvent(\"view-get\", {\n                                source: \"server\",\n                                view: view\n                            });\n                        }\n                        that._final();\n                    })\n                    .catch(function(error){\n                        that._final();\n                        console.warn(\"Warning! Error loading view for table \" + element.attr('id') + \": \" + error);\n                    });\n            }\n        },\n\n        _final: function(){\n            var element = this.element, o = this.options;\n            var id = element.attr(\"id\");\n\n            Metro.storage.delItem(o.checkStoreKey.replace(\"$1\", id));\n\n            this._service();\n            this._createStructure();\n            this._createInspector();\n            this._createEvents();\n\n            this._fireEvent(\"table-create\", {\n                element: element\n            });\n        },\n\n        _service: function(){\n            var o = this.options;\n\n            this.service = [\n                {\n                    // Rownum\n                    title: o.rownumTitle,\n                    format: undefined,\n                    name: undefined,\n                    sortable: false,\n                    sortDir: undefined,\n                    clsColumn: \"rownum-cell \" + (o.rownum !== true ? \"d-none\" : \"\"),\n                    cls: \"rownum-cell \" + (o.rownum !== true ? \"d-none\" : \"\"),\n                    colspan: undefined,\n                    type: \"rownum\"\n                },\n                {\n                    // Check\n                    title: o.checkType === \"checkbox\" ? \"<input type='checkbox' data-role='checkbox' class='table-service-check-all' data-style='\"+o.checkStyle+\"'>\" : \"\",\n                    format: undefined,\n                    name: undefined,\n                    sortable: false,\n                    sortDir: undefined,\n                    clsColumn: \"check-cell \" + (o.check !== true ? \"d-none\" : \"\"),\n                    cls: \"check-cell \"+(o.check !== true ? \"d-none\" : \"\"),\n                    colspan: undefined,\n                    type: \"rowcheck\"\n                }\n            ];\n        },\n\n        _createView: function(){\n            var view;\n\n            view = {};\n\n            $.each(this.heads, function(i){\n\n                if (Utils.isValue(this.cls)) {this.cls = this.cls.replace(\"hidden\", \"\");}\n                if (Utils.isValue(this.clsColumn)) {this.clsColumn = this.clsColumn.replace(\"hidden\", \"\");}\n\n                view[i] = {\n                    \"index\": i,\n                    \"index-view\": i,\n                    \"show\": !Utils.isValue(this.show) ? true : this.show,\n                    \"size\": Utils.isValue(this.size) ? this.size : \"\"\n                }\n            });\n\n            this._fireEvent(\"view-created\", {\n                view: view\n            });\n\n            return view;\n        },\n\n        _createInspectorItems: function(table){\n            var that = this, o = this.options;\n            var j, tds = [], row;\n            var cells = this.heads;\n\n            table.html(\"\");\n\n            for (j = 0; j < cells.length; j++){\n                tds[j] = null;\n            }\n\n            $.each(cells, function(i){\n                row = $(\"<tr>\");\n                row.data('index', i);\n                row.data('index-view', i);\n                $(\"<td>\").html(\"<input type='checkbox' data-style='\"+o.checkStyle+\"' data-role='checkbox' name='column_show_check[]' value='\"+i+\"' \"+(Utils.bool(that.view[i]['show']) ? \"checked\" : \"\")+\">\").appendTo(row);\n                $(\"<td>\").html(this.title).appendTo(row);\n                $(\"<td>\").html(\"<input type='number' data-role='spinner' name='column_size' value='\"+that.view[i]['size']+\"' data-index='\"+i+\"'>\").appendTo(row);\n                $(\"<td>\").html(\"\" +\n                    \"<button class='button square js-table-inspector-field-up' type='button'><span class='mif-arrow-up'></span></button>\" +\n                    \"<button class='button square js-table-inspector-field-down' type='button'><span class='mif-arrow-down'></span></button>\" +\n                    \"\").appendTo(row);\n                tds[that.view[i]['index-view']] = row;\n            });\n\n            //\n            for (j = 0; j < cells.length; j++){\n                tds[j].appendTo(table);\n            }\n        },\n\n        _createInspector: function(){\n            var o = this.options;\n            var inspector, table_wrap, table, tbody, actions;\n\n            inspector = $(\"<div data-role='draggable' data-drag-element='.table-inspector-header' data-drag-area='body'>\").addClass(\"table-inspector\");\n            inspector.attr(\"for\", this.element.attr(\"id\"));\n\n            $(\"<div class='table-inspector-header'>\"+(o.inspectorTitle || this.locale.table[\"inspector\"])+\"</div>\").appendTo(inspector);\n\n            table_wrap = $(\"<div>\").addClass(\"table-wrap\").appendTo(inspector);\n\n            table = $(\"<table>\").addClass(\"table subcompact\");\n            tbody = $(\"<tbody>\").appendTo(table);\n\n            table.appendTo(table_wrap);\n\n            this._createInspectorItems(tbody);\n\n            actions = $(\"<div class='table-inspector-actions'>\").appendTo(inspector);\n            $(\"<button class='button primary js-table-inspector-save' type='button'>\").html(this.locale.buttons.save).appendTo(actions);\n            $(\"<button class='button secondary js-table-inspector-reset ml-2 mr-2' type='button'>\").html(this.locale.buttons.reset).appendTo(actions);\n            $(\"<button class='button link js-table-inspector-cancel place-right' type='button'>\").html(this.locale.buttons.cancel).appendTo(actions);\n\n            inspector.data(\"open\", false);\n            this.inspector = inspector;\n\n            $(\"body\").append(inspector);\n\n            this._createInspectorEvents();\n        },\n\n        _resetInspector: function(){\n            var inspector = this.inspector;\n            var table = inspector.find(\"table tbody\");\n            this._createInspectorItems(table);\n            this._createInspectorEvents();\n        },\n\n        _createHeadsFromHTML: function(){\n            var that = this, element = this.element;\n            var head = element.find(\"thead\");\n\n            if (head.length > 0) {\n                $.each(head.find(\"tr > *\"), function () {\n                    var item = $(this);\n                    var dir, head_item, item_class;\n\n                    if (item.hasClass('rownum-cell') || item.hasClass('check-cell')) return\n\n                    if (Utils.isValue(item.data('sort-dir'))) {\n                        dir = item.data('sort-dir');\n                    } else {\n                        if (item.hasClass(\"sort-asc\")) {\n                            dir = \"asc\";\n                        } else if (item.hasClass(\"sort-desc\")) {\n                            dir = \"desc\"\n                        } else {\n                            dir = undefined;\n                        }\n                    }\n\n                    item_class = item[0].className.replace(\"sortable-column\", \"\");\n                    item_class = item_class.replace(\"sort-asc\", \"\");\n                    item_class = item_class.replace(\"sort-desc\", \"\");\n                    item_class = item_class.replace(\"hidden\", \"\");\n\n                    head_item = {\n                        type: \"data\",\n                        title: item.html(),\n                        name: Utils.isValue(item.data(\"name\")) ? item.data(\"name\") : item.text().replace(\" \", \"_\"),\n                        sortable: item.hasClass(\"sortable-column\") || (Utils.isValue(item.data('sortable')) && JSON.parse(item.data('sortable')) === true),\n                        sortDir: dir,\n                        format: Utils.isValue(item.data(\"format\")) ? item.data(\"format\") : \"string\",\n                        formatMask: Utils.isValue(item.data(\"format-mask\")) ? item.data(\"format-mask\") : null,\n                        clsColumn: Utils.isValue(item.data(\"cls-column\")) ? item.data(\"cls-column\") : \"\",\n                        cls: item_class,\n                        colspan: item.attr(\"colspan\"),\n                        size: Utils.isValue(item.data(\"size\")) ? item.data(\"size\") : \"\",\n                        show: !(item.hasClass(\"hidden\") || (Utils.isValue(item.data('show')) && JSON.parse(item.data('show')) === false)),\n\n                        required: Utils.isValue(item.data(\"required\")) ? JSON.parse(item.data(\"required\")) === true : false,\n                        field: Utils.isValue(item.data(\"field\")) ? item.data(\"field\") : \"input\",\n                        fieldType: Utils.isValue(item.data(\"field-type\")) ? item.data(\"field-type\") : \"text\",\n                        validator: Utils.isValue(item.data(\"validator\")) ? item.data(\"validator\") : null,\n\n                        template: Utils.isValue(item.data(\"template\")) ? item.data(\"template\") : null\n                    };\n                    that.heads.push(head_item);\n                });\n                // head.clear();\n            }\n        },\n\n        _createFootsFromHTML: function(){\n            var that = this, element = this.element;\n            var foot = element.find(\"tfoot\");\n\n            if (foot.length > 0) $.each(foot.find(\"tr > *\"), function(){\n                var item = $(this);\n                var foot_item;\n\n                foot_item = {\n                    title: item.html(),\n                    name: Utils.isValue(item.data(\"name\")) ? item.data(\"name\") : false,\n                    cls: item[0].className,\n                    colspan: item.attr(\"colspan\")\n                };\n\n                that.foots.push(foot_item);\n            });\n        },\n\n        _createItemsFromHTML: function(){\n            var that = this, element = this.element;\n            var body = element.find(\"tbody\");\n\n            if (body.length > 0) $.each(body.find(\"tr\"), function(){\n                var row = $(this);\n                var tr = [];\n                $.each(row.children(\"td\"), function(){\n                    var td = $(this);\n                    tr.push(td.html());\n                });\n                that.items.push(tr);\n            });\n\n            this._createHeadsFromHTML();\n            this._createFootsFromHTML();\n        },\n\n        _createItemsFromJSON: function(source){\n            var that = this;\n\n            if (typeof source === \"string\") {\n                source = JSON.parse(source);\n            }\n\n            if (source.header !== undefined) {\n                that.heads = source.header;\n            } else {\n                this._createHeadsFromHTML();\n            }\n\n            if (source.data !== undefined) {\n                $.each(source.data, function(){\n                    var row = this;\n                    var tr = [];\n                    $.each(row, function(){\n                        var td = this;\n                        tr.push(td);\n                    });\n                    that.items.push(tr);\n                });\n            }\n\n            if (source.footer !== undefined) {\n                this.foots = source.footer;\n            } else {\n                this._createFootsFromHTML();\n            }\n        },\n\n        _createTableHeader: function(){\n            var element = this.element, o = this.options;\n            var head = element.find(\"thead\");\n            var tr, th, tds = [], j, cells;\n            var view = o.staticView ? this._createView() : this.view;\n\n            if (head.length === 0) {\n                head = $(\"<thead>\");\n                element.prepend(head);\n            }\n\n            head.clear().addClass(o.clsHead);\n\n            if (this.heads.length === 0) {\n                return head;\n            }\n\n            tr = $(\"<tr>\").addClass(o.clsHeadRow).appendTo(head);\n\n\n            $.each(this.service, function(){\n                var item = this, classes = [];\n                var th = $(\"<th>\");\n                if (Utils.isValue(item.title)) {th.html(item.title);}\n                if (Utils.isValue(item.size)) {th.css({width: item.size});}\n                if (Utils.isValue(item.cls)) {classes.push(item.cls);}\n                classes.push(o.clsHeadCell);\n                th.addClass(classes.join(\" \"));\n                tr.append(th)\n            });\n\n            cells = this.heads;\n\n            for (j = 0; j < cells.length; j++){\n                tds[j] = null;\n            }\n\n            $.each(cells, function(cell_index){\n                var item = this;\n                var classes = [];\n\n                var th = $(\"<th>\");\n                th.data(\"index\", cell_index);\n\n                if (Utils.isValue(item.title)) {th.html(item.title);}\n                if (Utils.isValue(item.format)) {th.attr(\"data-format\", item.format);}\n                if (Utils.isValue(item.formatMask)) {th.attr(\"data-format-mask\", item.formatMask);}\n                if (Utils.isValue(item.name)) {th.attr(\"data-name\", item.name);}\n                if (Utils.isValue(item.colspan)) {th.attr(\"colspan\", item.colspan);}\n                if (Utils.isValue(item.size)) {th.attr(\"data-size\", item.size);}\n                if (Utils.isValue(item.sortable)) {th.attr(\"data-sortable\", item.sortable);}\n                if (Utils.isValue(item.sortDir)) {th.attr(\"data-sort-dir\", item.sortDir);}\n                if (Utils.isValue(item.clsColumn)) {th.attr(\"data-cls-column\", item.clsColumn);}\n                if (Utils.isValue(item.cls)) {th.attr(\"data-cls\", item.cls);}\n                if (Utils.isValue(item.colspan)) {th.attr(\"colspan\", item.colspan);}\n                if (Utils.isValue(item.show)) {th.attr(\"data-show\", item.show);}\n                if (Utils.isValue(item.required)) {th.attr(\"data-required\", item.required);}\n                if (Utils.isValue(item.field)) {th.attr(\"data-field\", item.field);}\n                if (Utils.isValue(item.fieldType)) {th.attr(\"data-field-type\", item.fieldType);}\n                if (Utils.isValue(item.validator)) {th.attr(\"data-validator\", item.validator);}\n                if (Utils.isValue(item.template)) {th.attr(\"data-template\", item.template);}\n                if (Utils.isValue(view[cell_index]['size'])) {th.css({width: view[cell_index]['size']});}\n                if (item.sortable === true) {\n                    classes.push(\"sortable-column\");\n\n                    if (Utils.isValue(item.sortDir)) {\n                        classes.push(\"sort-\" + item.sortDir);\n                    }\n                }\n                if (Utils.isValue(item.cls)) {\n                    $.each(item.cls.toArray(), function () {\n                        classes.push(this);\n                    });\n                }\n                if (Utils.bool(view[cell_index]['show']) === false) {\n                    if (classes.indexOf('hidden') === -1) classes.push(\"hidden\");\n                }\n\n                classes.push(o.clsHeadCell);\n\n                if (Utils.bool(view[cell_index]['show'])) {\n                    Utils.arrayDelete(classes, \"hidden\");\n                }\n\n                th.addClass(classes.join(\" \"));\n\n                tds[view[cell_index]['index-view']] = th;\n            });\n\n            for (j = 0; j < cells.length; j++){\n                tds[j].appendTo(tr);\n            }\n        },\n\n        _createTableBody: function(){\n            var body, head, element = this.element;\n\n            head  = element.find(\"thead\");\n            body  = element.find(\"tbody\");\n\n            if (body.length === 0) {\n                body = $(\"<tbody>\").addClass(this.options.clsBody);\n                if (head.length !== 0) {\n                    body.insertAfter(head);\n                } else {\n                    element.append(body);\n                }\n            }\n\n            body.clear();\n        },\n\n        _createTableFooter: function(){\n            var element = this.element, o = this.options;\n            var foot = element.find(\"tfoot\");\n            var tr, th;\n\n            if (foot.length === 0) {\n                foot = $(\"<tfoot>\").appendTo(element);\n            }\n\n            foot.clear().addClass(o.clsFooter);\n\n            if (this.foots.length === 0) {\n                return;\n            }\n\n            tr = $(\"<tr>\").addClass(o.clsHeadRow).appendTo(foot);\n            $.each(this.foots, function(){\n                var item = this;\n                th = $(\"<th>\").appendTo(tr);\n\n                if (item.title !== undefined) {\n                    th.html(item.title);\n                }\n\n                if (item.name !== undefined) {\n                    th.addClass(\"foot-column-name-\" + item.name);\n                }\n\n                if (item.cls !== undefined) {\n                    th.addClass(item.cls);\n                }\n\n                if (Utils.isValue(item.colspan)) {\n                    th.attr(\"colspan\", item.colspan);\n                }\n\n                th.appendTo(tr);\n            });\n        },\n\n        _createTopBlock: function (){\n            var that = this, element = this.element, o = this.options;\n            var top_block = $(\"<div>\").addClass(\"table-top\").addClass(o.clsTableTop).insertBefore(element.parent());\n            var search_block, search_input, rows_block, rows_select;\n\n            search_block = Utils.isValue(this.wrapperSearch) ? this.wrapperSearch : $(\"<div>\").addClass(\"table-search-block\").addClass(o.clsSearch).appendTo(top_block);\n            search_block.addClass(o.clsSearch);\n\n            search_input = $(\"<input>\").attr(\"type\", \"text\").attr(\"placeholder\", o.tableSearchPlaceholder).appendTo(search_block);\n            Metro.makePlugin(search_input, \"input\", {\n                prepend: o.tableSearchTitle || that.locale.table[\"search\"]\n            });\n\n            if (o.showSearch !== true) {\n                search_block.hide();\n            }\n\n            rows_block = Utils.isValue(this.wrapperRows) ? this.wrapperRows : $(\"<div>\").addClass(\"table-rows-block\").appendTo(top_block);\n            rows_block.addClass(o.clsRowsCount);\n\n            rows_select = $(\"<select>\").appendTo(rows_block);\n            $.each(o.rowsSteps.toArray(), function () {\n                var val = parseInt(this);\n                var option = $(\"<option>\").attr(\"value\", val).text(val === -1 ? (o.allRecordsTitle || that.locale.table[\"all\"]) : val).appendTo(rows_select);\n                if (val === parseInt(o.rows)) {\n                    option.attr(\"selected\", \"selected\");\n                }\n            });\n            Metro.makePlugin(rows_select, \"select\",{\n                filter: false,\n                prepend: o.tableRowsCountTitle || that.locale.table[\"rowsCount\"],\n                onChange: function (val) {\n                    val = parseInt(val);\n                    if (val === parseInt(o.rows)) {\n                        return;\n                    }\n                    o.rows = val;\n                    that.currentPage = 1;\n                    that._draw();\n\n                    that._fireEvent(\"rows-count-change\", {\n                        val: val\n                    });\n                }\n            });\n\n            if (o.showInspectorButton) {\n                $(\"<button>\").addClass(\"button inspector-button\").attr(\"type\", \"button\").html(o.inspectorButtonIcon).insertAfter(rows_block);\n            }\n\n            if (o.showRowsSteps !== true) {\n                rows_block.hide();\n            }\n\n            return top_block;\n        },\n\n        _createBottomBlock: function (){\n            var element = this.element, o = this.options;\n            var bottom_block = $(\"<div>\").addClass(\"table-bottom\").addClass(o.clsTableBottom).insertAfter(element.parent());\n            var info, pagination, skip;\n\n            info = Utils.isValue(this.wrapperInfo) ? this.wrapperInfo : $(\"<div>\").addClass(\"table-info\").appendTo(bottom_block);\n            info.addClass(o.clsTableInfo);\n            if (o.showTableInfo !== true) {\n                info.hide();\n            }\n\n            pagination = Utils.isValue(this.wrapperPagination) ? this.wrapperPagination : $(\"<div>\").addClass(\"table-pagination\").appendTo(bottom_block);\n            pagination.addClass(o.clsTablePagination);\n            if (o.showPagination !== true) {\n                pagination.hide();\n            }\n\n            skip = Utils.isValue(this.wrapperSkip) ? this.wrapperSkip : $(\"<div>\").addClass(\"table-skip\").appendTo(bottom_block);\n            skip.addClass(o.clsTableSkip);\n\n            $(\"<input type='text'>\").addClass(\"input table-skip-input\").addClass(o.clsTableSkipInput).appendTo(skip);\n            $(\"<button>\").addClass(\"button table-skip-button\").addClass(o.clsTableSkipButton).html(o.tableSkipTitle || this.locale.table[\"skip\"]).appendTo(skip);\n\n            if (o.showSkip !== true) {\n                skip.hide();\n            }\n\n            return bottom_block;\n        },\n\n        _createStructure: function(){\n            var that = this, element = this.element, o = this.options;\n            var columns;\n            var w_search = $(o.searchWrapper),\n                w_info = $(o.infoWrapper),\n                w_rows = $(o.rowsWrapper),\n                w_paging = $(o.paginationWrapper),\n                w_skip = $(o.skipWrapper);\n\n            if (w_search.length > 0) {this.wrapperSearch = w_search;}\n            if (w_info.length > 0) {this.wrapperInfo = w_info;}\n            if (w_rows.length > 0) {this.wrapperRows = w_rows;}\n            if (w_paging.length > 0) {this.wrapperPagination = w_paging;}\n            if (w_skip.length > 0) {this.wrapperSkip = w_skip;}\n\n            element.addClass(o.clsTable);\n\n            this._createTableHeader();\n            this._createTableBody();\n            this._createTableFooter();\n\n            this._createTopBlock();\n            this._createBottomBlock();\n\n            var need_sort = false;\n            if (this.heads.length > 0) $.each(this.heads, function(i){\n                var item = this;\n                if (!need_sort && [\"asc\", \"desc\"].indexOf(item.sortDir) > -1) {\n                    need_sort = true;\n                    that.sort.colIndex = i;\n                    that.sort.dir = item.sortDir;\n                }\n            });\n\n            if (need_sort) {\n                columns = element.find(\"thead th\");\n                this._resetSortClass(columns);\n                $(columns.get(this.sort.colIndex + that.service.length)).addClass(\"sort-\"+this.sort.dir);\n                this.sorting();\n            }\n\n            var filter_func;\n\n            if (Utils.isValue(o.filters) && typeof o.filters === 'string') {\n                $.each(o.filters.toArray(), function(){\n                    filter_func = Utils.isFunc(this);\n                    if (filter_func !== false) {\n                        that.filtersIndexes.push(that.addFilter(filter_func));\n                    }\n                });\n            }\n\n            this.currentPage = 1;\n\n            this._draw();\n        },\n\n        _resetSortClass: function(el){\n            $(el).removeClass(\"sort-asc sort-desc\");\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var component = element.closest(\".table-component\");\n            var table_container = component.find(\".table-container\");\n            var search = component.find(\".table-search-block input\");\n            var skip_button = o.skipWrapper ? $(o.skipWrapper).find('.table-skip-button') : component.find(\".table-skip-button\");\n            var skip_input = o.skipWrapper ? $(o.skipWrapper).find('.table-skip-input') : component.find(\".table-skip-input\");\n            var customSearch;\n            var id = element.attr(\"id\");\n            var inspectorButton = component.find(\".inspector-button\");\n\n            inspectorButton.on(Metro.events.click, function(){\n                that.toggleInspector();\n            });\n\n            skip_button.on(Metro.events.click, function(){\n                var skipTo = parseInt(skip_input.val().trim());\n\n                if (isNaN(skipTo) || skipTo <=0 || skipTo > that.pagesCount) {\n                    skip_input.val('');\n                    return false;\n                }\n\n                skip_input.val('');\n\n                that._fireEvent(\"skip\", {\n                    skipTo: skipTo,\n                    skipFrom: that.currentPage\n                });\n\n                that.page(skipTo);\n            });\n\n            $(window).on(Metro.events.resize, function(){\n                if (o.horizontalScroll === true) {\n                    if (!Utils.isNull(o.horizontalScrollStop) && Utils.mediaExist(o.horizontalScrollStop)) {\n                        table_container.removeClass(\"horizontal-scroll\");\n                    } else {\n                        table_container.addClass(\"horizontal-scroll\");\n                    }\n                }\n            }, {ns: this.id});\n\n            element.on(Metro.events.click, \".sortable-column\", function(){\n\n                if (o.muteTable === true) element.addClass(\"disabled\");\n\n                if (that.busy) {\n                    return false;\n                }\n                that.busy = true;\n\n                var col = $(this);\n\n                that.activity.show(function(){\n                    setImmediate(function(){\n                        that.currentPage = 1;\n                        that.sort.colIndex = col.data(\"index\");\n                        if (!col.hasClass(\"sort-asc\") && !col.hasClass(\"sort-desc\")) {\n                            that.sort.dir = o.sortDir;\n                        } else {\n                            if (col.hasClass(\"sort-asc\")) {\n                                that.sort.dir = \"desc\";\n                            } else {\n                                that.sort.dir = \"asc\";\n                            }\n                        }\n                        that._resetSortClass(element.find(\".sortable-column\"));\n                        col.addClass(\"sort-\"+that.sort.dir);\n                        that.sorting();\n                        that._draw(function(){\n                            that.busy = false;\n                            if (o.muteTable === true) element.removeClass(\"disabled\");\n                        });\n                    });\n                });\n            });\n\n            element.on(Metro.events.click, \".table-service-check input\", function(){\n                var check = $(this);\n                var status = check.is(\":checked\");\n                var val = \"\"+check.val();\n                var store_key = o.checkStoreKey.replace(\"$1\", id);\n                var storage = Metro.storage;\n                var data = storage.getItem(store_key);\n                var is_radio = check.attr('type') === 'radio';\n\n                if (is_radio) {\n                    data = [];\n                }\n\n                if (status) {\n                    if (!Utils.isValue(data)) {\n                        data = [val];\n                    } else {\n                        if (Array(data).indexOf(val) === -1) {\n                            data.push(val);\n                        }\n                    }\n                } else {\n                    if (Utils.isValue(data)) {\n                        Utils.arrayDelete(data, val);\n                    } else {\n                        data = [];\n                    }\n                }\n\n                storage.setItem(store_key, data);\n\n                that._fireEvent(\"check-click\", {\n                    check: this,\n                    status: status,\n                    data: data\n                });\n            });\n\n            element.on(Metro.events.click, \".table-service-check-all input\", function(){\n                var checked = $(this).is(\":checked\");\n                var store_key = o.checkStoreKey.replace(\"$1\", id);\n                var storage = Metro.storage;\n                var data, stored_keys;\n\n                if (o.useCurrentSlice === true) {\n                    stored_keys = storage.getItem(store_key, []);\n\n                    if (checked) {\n                        $.each(that.currentSlice, function(){\n                            if (stored_keys.indexOf(\"\"+this[o.checkColIndex]) === -1) {\n                                stored_keys.push(\"\"+this[o.checkColIndex])\n                            }\n                        });\n                    } else {\n                        $.each(that.currentSlice, function(){\n                            var key = \"\"+this[o.checkColIndex];\n                            if (stored_keys.indexOf(key) !== -1) {\n                                Metro.utils.arrayDelete(stored_keys, key)\n                            }\n                        });\n                    }\n                    data = stored_keys\n                } else {\n                    if (checked) {\n                        $.each(that.filteredItems, function () {\n                            if (data.indexOf(this[o.checkColIndex]) !== -1) return;\n                            data.push(\"\" + this[o.checkColIndex]);\n                        });\n                    } else {\n                        data = [];\n                    }\n                }\n\n                storage.setItem(store_key, data);\n\n                that._draw();\n\n                that._fireEvent(\"check-click-all\", {\n                    check: this,\n                    status: checked,\n                    data: data\n                });\n            });\n\n            var _search = function(){\n                that.searchString = this.value.trim().toLowerCase();\n\n                clearInterval(that.input_interval); that.input_interval = false;\n                if (!that.input_interval) that.input_interval = setTimeout(function(){\n                    that.currentPage = 1;\n                    that._draw();\n                    clearInterval(that.input_interval); that.input_interval = false;\n                }, o.searchThreshold);\n            };\n\n            search.on(Metro.events.inputchange, _search);\n\n            if (Utils.isValue(this.wrapperSearch)) {\n                customSearch = this.wrapperSearch.find(\"input\");\n                if (customSearch.length > 0) {\n                    customSearch.on(Metro.events.inputchange, _search);\n                }\n            }\n\n            function pageLinkClick(l){\n                var link = $(l);\n                var item = link.parent();\n                if (that.filteredItems.length === 0) {\n                    return ;\n                }\n\n                if (item.hasClass(\"active\")) {\n                    return ;\n                }\n\n                if (item.hasClass(\"service\")) {\n                    if (link.data(\"page\") === \"prev\") {\n                        that.currentPage--;\n                        if (that.currentPage === 0) {\n                            that.currentPage = 1;\n                        }\n                    } else {\n                        that.currentPage++;\n                        if (that.currentPage > that.pagesCount) {\n                            that.currentPage = that.pagesCount;\n                        }\n                    }\n                } else {\n                    that.currentPage = link.data(\"page\");\n                }\n\n                that._draw();\n            }\n\n            component.on(Metro.events.click, \".pagination .page-link\", function(){\n                pageLinkClick(this)\n            });\n\n            if (Utils.isValue(this.wrapperPagination)) {\n                this.wrapperPagination.on(Metro.events.click, \".pagination .page-link\", function(){\n                    pageLinkClick(this)\n                });\n            }\n\n            this._createInspectorEvents();\n\n            element.on(Metro.events.click, \".js-table-crud-button\", function(){\n\n            });\n        },\n\n        _createInspectorEvents: function(){\n            var that = this, inspector = this.inspector;\n            // Inspector event\n\n            this._removeInspectorEvents();\n\n            inspector.on(Metro.events.click, \".js-table-inspector-field-up\", function(){\n                var button = $(this), tr = button.closest(\"tr\");\n                var tr_prev = tr.prev(\"tr\");\n                var index = tr.data(\"index\");\n                var index_view;\n                if (tr_prev.length === 0) {\n                    return ;\n                }\n                tr.insertBefore(tr_prev);\n                tr.addClass(\"flash\");\n                setTimeout(function(){\n                    tr.removeClass(\"flash\");\n                }, 1000);\n                index_view = tr.index();\n\n                tr.data(\"index-view\", index_view);\n                that.view[index]['index-view'] = index_view;\n\n                $.each(tr.nextAll(), function(){\n                    var t = $(this);\n                    index_view++;\n                    t.data(\"index-view\", index_view);\n                    that.view[t.data(\"index\")]['index-view'] = index_view;\n                });\n\n                that._createTableHeader();\n                that._draw();\n            });\n\n            inspector.on(Metro.events.click, \".js-table-inspector-field-down\", function(){\n                var button = $(this), tr = button.closest(\"tr\");\n                var tr_next = tr.next(\"tr\");\n                var index = tr.data(\"index\");\n                var index_view;\n                if (tr_next.length === 0) {\n                    return ;\n                }\n                tr.insertAfter(tr_next);\n                tr.addClass(\"flash\");\n                setTimeout(function(){\n                    tr.removeClass(\"flash\");\n                }, 1000);\n                index_view = tr.index();\n\n                tr.data(\"index-view\", index_view);\n                that.view[index]['index-view'] = index_view;\n\n                $.each(tr.prevAll(), function(){\n                    var t = $(this);\n                    index_view--;\n                    t.data(\"index-view\", index_view);\n                    that.view[t.data(\"index\")]['index-view'] = index_view;\n                });\n\n                that._createTableHeader();\n                that._draw();\n            });\n\n            inspector.on(Metro.events.click, \"input[type=checkbox]\", function(){\n                var check = $(this);\n                var status = check.is(\":checked\");\n                var index = check.val();\n                var op = ['cls', 'clsColumn'];\n\n                if (status) {\n                    $.each(op, function(){\n                        var a;\n                        a = Utils.isValue(that.heads[index][this]) ? (that.heads[index][this]).toArray(\" \") : [];\n                        Utils.arrayDelete(a, \"hidden\");\n                        that.heads[index][this] = a.join(\" \");\n                        that.view[index]['show'] = true;\n                    });\n                } else {\n                    $.each(op, function(){\n                        var a;\n\n                        a = Utils.isValue(that.heads[index][this]) ? (that.heads[index][this]).toArray(\" \") : [];\n                        if (a.indexOf(\"hidden\") === -1) {\n                            a.push(\"hidden\");\n                        }\n                        that.heads[index][this] = a.join(\" \");\n                        that.view[index]['show'] = false;\n                    });\n                }\n\n                that._createTableHeader();\n                that._draw();\n            });\n\n            inspector.find(\"input[type=number]\").on(Metro.events.inputchange, function(){\n                var input = $(this);\n                var index = input.attr(\"data-index\");\n                var val = parseInt(input.val());\n\n                that.view[index]['size'] = val === 0 ? \"\" : val;\n\n                that._createTableHeader();\n            });\n\n            inspector.on(Metro.events.click, \".js-table-inspector-save\", function(){\n                that._saveTableView();\n                that.openInspector(false);\n            });\n\n            inspector.on(Metro.events.click, \".js-table-inspector-cancel\", function(){\n                that.openInspector(false);\n            });\n\n            inspector.on(Metro.events.click, \".js-table-inspector-reset\", function(){\n                that.resetView();\n            });\n        },\n\n        _removeInspectorEvents: function(){\n            var inspector = this.inspector;\n            inspector.off(Metro.events.click, \".js-table-inspector-field-up\");\n            inspector.off(Metro.events.click, \".js-table-inspector-field-down\");\n            inspector.off(Metro.events.click, \"input[type=checkbox]\");\n            inspector.off(Metro.events.click, \".js-table-inspector-save\");\n            inspector.off(Metro.events.click, \".js-table-inspector-cancel\");\n            inspector.off(Metro.events.click, \".js-table-inspector-reset\");\n            inspector.find(\"input[type=number]\").off(Metro.events.inputchange);\n        },\n\n        _saveTableView: function(){\n            var that = this, element = this.element, o = this.options;\n            var view = this.view;\n            var id = element.attr(\"id\");\n            var viewPath = o.viewSavePath.replace(\"$1\", id);\n            var storage = Metro.storage;\n\n            if (o.viewSaveMode.toLowerCase() === \"client\") {\n                storage.setItem(viewPath, view);\n\n                this._fireEvent(\"view-save\", {\n                    target: \"client\",\n                    path: o.viewSavePath,\n                    view: view\n                });\n            } else {\n                var post_data = {\n                    id : element.attr(\"id\"),\n                    view : view\n                };\n\n                fetch(viewPath, {\n                    method: \"POST\"\n                    , body: JSON.stringify(post_data)\n                    , header: {\n                        \"Content-type\": \"application/json;charset=utf-8\"\n                    }\n                })\n                    .then(Metro.fetch.status)\n                    .then(Metro.fetch.text)\n                    .then(function(data){\n                        that._fireEvent(\"view-save\", {\n                            target: \"server\",\n                            path: o.viewSavePath,\n                            view: view,\n                            post_data: post_data,\n                            response: data\n                        });\n                    })\n                    .catch(function(error){\n                        that._fireEvent(\"data-save-error\", {\n                            source: o.viewSavePath,\n                            error: error,\n                            post_data: post_data\n                        });\n                    });\n            }\n        },\n\n        _info: function(start, stop, length){\n            var element = this.element, o = this.options;\n            var component = element.closest(\".table-component\");\n            var info = Utils.isValue(this.wrapperInfo) ? this.wrapperInfo : component.find(\".table-info\");\n            var text;\n\n            if (info.length === 0) {\n                return ;\n            }\n\n            if (stop > length) {\n                stop = length;\n            }\n\n            if (this.items.length === 0) {\n                start = stop = length = 0;\n            }\n\n            text = o.tableInfoTitle || this.locale.table[\"info\"];\n            text = text.replace(\"$1\", start);\n            text = text.replace(\"$2\", stop);\n            text = text.replace(\"$3\", length);\n            info.html(text);\n        },\n\n        _paging: function(length){\n            var element = this.element, o = this.options;\n            var component = element.closest(\".table-component\");\n            this.pagesCount = Math.ceil(length / o.rows); // \n            Metro.pagination({\n                length: length,\n                rows: o.rows,\n                current: this.currentPage,\n                target: Utils.isValue(this.wrapperPagination) ? this.wrapperPagination : component.find(\".table-pagination\"),\n                claPagination: o.clsPagination,\n                prevTitle: o.paginationPrevTitle || this.locale.table[\"prev\"],\n                nextTitle: o.paginationNextTitle || this.locale.table[\"next\"],\n                distance: o.paginationShortMode === true ? o.paginationDistance : 0\n            });\n        },\n\n        _filter: function(){\n            var that = this, o = this.options;\n            var items;\n            if ((Utils.isValue(this.searchString) && that.searchString.length >= o.searchMinLength) || this.filters.length > 0) {\n                items = this.items.filter(function(row){\n\n                    var row_data = \"\", result, search_result, i, j = 0;\n\n                    if (that.filters.length > 0) {\n\n                        result = o.filtersOperator.toLowerCase() === \"and\";\n                        for (i = 0; i < that.filters.length; i++) {\n                            if (Utils.isNull(that.filters[i])) continue;\n                            j++;\n                            result = o.filtersOperator.toLowerCase() === \"and\" ?\n                                result && Utils.exec(that.filters[i], [row, that.heads]) :\n                                result || Utils.exec(that.filters[i], [row, that.heads])\n                            ;\n                        }\n\n                        if (j === 0) result = true;\n                    } else {\n                        result = true;\n                    }\n\n                    if (that.searchFields.length > 0) {\n                        $.each(that.heads, function(i, v){\n                            if (that.searchFields.indexOf(v.name) > -1) {\n                                row_data += \"\"+row[i];\n                            }\n                        })\n                    } else {\n                        row_data = row.join(\"\");\n                    }\n\n                    row_data = row_data.replace(/[\\n\\r]+|[\\s]{2,}/g, ' ').trim().toLowerCase();\n                    search_result = Utils.isValue(that.searchString) && that.searchString.length >= o.searchMinLength ? ~row_data.indexOf(that.searchString) : true;\n\n                    result = result && search_result;\n\n                    if (result) {\n                        that._fireEvent(\"filter-row-accepted\", {\n                            row: row\n                        });\n                    } else {\n                        that._fireEvent(\"filter-row-declined\", {\n                            row: row\n                        });\n                    }\n\n                    return result;\n                });\n\n            } else {\n                items = this.items;\n            }\n\n            this._fireEvent(\"search\", {\n                search: that.searchString,\n                items: items\n            });\n\n            this.filteredItems = items;\n\n            return items;\n        },\n\n        _draw: function(cb){\n            var that = this, element = this.element, o = this.options;\n            var body = element.find(\"tbody\");\n            var i, j, tr, td, check, cells, tds, is_even_row;\n            var start = parseInt(o.rows) === -1 ? 0 : o.rows * (this.currentPage - 1),\n                stop = parseInt(o.rows) === -1 ? this.items.length - 1 : start + o.rows - 1;\n            var items, checkedItems = [];\n            var stored_keys = Metro.storage.getItem(o.checkStoreKey.replace(\"$1\", element.attr('id')));\n\n            var view = o.staticView ? this.viewDefault : this.view;\n\n            body.html(\"\");\n\n            if (!this.heads.length) {\n                console.warn(\"Heads is not defined for table ID \" + element.attr(\"id\"));\n                return ;\n            }\n\n            items = this._filter();\n\n            this.currentSlice = items.slice(start, stop + 1);\n            checkedItems = [];\n\n            if (items.length > 0) {\n                for (i = start; i <= stop; i++) {\n                    cells = items[i];\n                    tds = [];\n                    if (!Utils.isValue(cells)) {continue;}\n                    tr = $(\"<tr>\").addClass(o.clsBodyRow);\n                    tr.data('original', cells);\n\n                    // Rownum\n\n                    is_even_row = i % 2 === 0;\n\n                    td = $(\"<td>\").html(i + 1);\n                    if (that.service[0].clsColumn !== undefined) {\n                        td.addClass(that.service[0].clsColumn);\n                    }\n                    td.appendTo(tr);\n\n                    // Checkbox\n                    td = $(\"<td>\");\n                    if (o.checkType === \"checkbox\") {\n                        check = $(\"<input type='checkbox' data-style='\"+o.checkStyle+\"' data-role='checkbox' name='\" + (Utils.isValue(o.checkName) ? o.checkName : 'table_row_check') + \"[]' value='\" + items[i][o.checkColIndex] + \"'>\");\n                    } else {\n                        check = $(\"<input type='radio' data-style='\"+o.checkStyle+\"' data-role='radio' name='\" + (Utils.isValue(o.checkName) ? o.checkName : 'table_row_check') + \"' value='\" + items[i][o.checkColIndex] + \"'>\");\n                    }\n\n                    if (Utils.isValue(stored_keys) && Array.isArray(stored_keys) && stored_keys.indexOf(\"\"+items[i][o.checkColIndex]) > -1) {\n                        check.prop(\"checked\", true);\n                        checkedItems.push(cells)\n                    }\n\n                    check.addClass(\"table-service-check\");\n\n                    this._fireEvent(\"check-draw\", {\n                        check: check\n                    });\n\n                    check.appendTo(td);\n                    if (that.service[1].clsColumn !== undefined) {\n                        td.addClass(that.service[1].clsColumn);\n                    }\n                    td.appendTo(tr);\n                    // End of check\n\n                    for (j = 0; j < cells.length; j++){\n                        tds[j] = null;\n                    }\n\n                    $.each(cells, function(cell_index){\n                        var val = this;\n                        var td = $(\"<td>\");\n\n                        if (Utils.isValue(that.heads[cell_index].template)) {\n                            val = that.heads[cell_index].template.replace(/%VAL%/g, val);\n                        }\n\n                        td.html(val);\n\n                        td.addClass(o.clsBodyCell);\n                        if (Utils.isValue(that.heads[cell_index].clsColumn)) {\n                            td.addClass(that.heads[cell_index].clsColumn);\n                        }\n\n                        if (Utils.bool(view[cell_index].show) === false) {\n                            td.addClass(\"hidden\");\n                        }\n\n                        if (Utils.bool(view[cell_index].show)) {\n                            td.removeClass(\"hidden\");\n                        }\n\n                        td.data('original',this);\n\n                        tds[view[cell_index]['index-view']] = td;\n\n                        that._fireEvent(\"draw-cell\", {\n                            td: td,\n                            val: val,\n                            cellIndex: cell_index,\n                            head: that.heads[cell_index],\n                            items: cells\n                        });\n\n                        if (o.cellWrapper === true) {\n                            val = $(\"<div>\").addClass(\"data-wrapper\").addClass(o.clsCellWrapper).html(td.html());\n                            td.html('').append(val);\n                        }\n                    });\n\n                    for (j = 0; j < cells.length; j++){\n                        tds[j].appendTo(tr);\n\n                        that._fireEvent(\"append-cell\", {\n                            td: tds[j],\n                            tr: tr,\n                            index: j\n                        });\n                    }\n\n                    that._fireEvent(\"draw-row\", {\n                        tr: tr,\n                        view: that.view,\n                        heads: that.heads,\n                        items: cells\n                    });\n\n                    tr.addClass(o.clsRow).addClass(is_even_row ? o.clsEvenRow : o.clsOddRow).appendTo(body);\n\n                    that._fireEvent(\"append-row\", {\n                        tr: tr\n                    });\n                }\n\n                $(this.component).find(\".table-service-check-all input\").prop(\"checked\", checkedItems.length);\n            } else {\n                j = 0;\n                $.each(view, function(){\n                    if (this.show) j++;\n                });\n                if (o.check === true) {\n                    j++;\n                }\n                if (o.rownum === true) {\n                    j++;\n                }\n                tr = $(\"<tr>\").addClass(o.clsBodyRow).appendTo(body);\n                td = $(\"<td>\").attr(\"colspan\", j).addClass(\"text-center\").html($(\"<span>\").addClass(o.clsEmptyTableTitle).html(o.emptyTableTitle || that.locale.table[\"empty\"]));\n                td.appendTo(tr);\n            }\n\n            this._info(start + 1, stop + 1, items.length);\n            this._paging(items.length);\n\n            if (this.activity) this.activity.hide();\n\n            this._fireEvent(\"draw\");\n\n            if (cb !== undefined) {\n                Utils.exec(cb, null, element[0])\n            }\n        },\n\n        _getItemContent: function(row){\n            var o = this.options;\n            var result, col = row[this.sort.colIndex];\n            var format = this.heads[this.sort.colIndex].format;\n            var formatMask = !Utils.isNull(this.heads) && !Utils.isNull(this.heads[this.sort.colIndex]) && Utils.isValue(this.heads[this.sort.colIndex]['formatMask']) ? this.heads[this.sort.colIndex]['formatMask'] : \"%Y-%m-%d\";\n            var thousandSeparator = this.heads && this.heads[this.sort.colIndex] && this.heads[this.sort.colIndex][\"thousandSeparator\"] ? this.heads[this.sort.colIndex][\"thousandSeparator\"] : o.thousandSeparator;\n            var decimalSeparator  = this.heads && this.heads[this.sort.colIndex] && this.heads[this.sort.colIndex][\"decimalSeparator\"] ? this.heads[this.sort.colIndex][\"decimalSeparator\"] : o.decimalSeparator;\n\n            result = (\"\"+col).toLowerCase().replace(/[\\n\\r]+|[\\s]{2,}/g, ' ').trim();\n\n            if (Utils.isValue(result) && Utils.isValue(format)) {\n\n                if (['number', 'int', 'float', 'money'].indexOf(format) !== -1) {\n                    result = Utils.parseNumber(result, thousandSeparator, decimalSeparator);\n                }\n\n                switch (format) {\n                    case \"date\": result = formatMask ? Datetime.from(result, formatMask, o.locale) : datetime(result); break;\n                    case \"number\": result = +result; break;\n                    case \"int\": result = parseInt(result); break;\n                    case \"float\": result = parseFloat(result); break;\n                    case \"money\": result = Utils.parseMoney(result); break;\n                    case \"card\": result = Utils.parseCard(result); break;\n                    case \"phone\": result = Utils.parsePhone(result); break;\n                }\n            }\n\n            return result;\n        },\n\n        addItem: function(item, redraw){\n            if (!Array.isArray(item)) {\n                console.warn(\"Item is not an array and can't be added\");\n                return this;\n            }\n            this.items.push(item);\n            if (redraw !== false) this.draw();\n        },\n\n        addItems: function(items, redraw){\n            if (!Array.isArray(items)) {\n                console.warn(\"Items is not an array and can't be added\");\n                return this;\n            }\n            items.forEach(function(item){\n                if (Array.isArray(item))\n                    this.items.push(item, false);\n            });\n            this.draw();\n            if (redraw !== false) this.draw();\n        },\n\n        updateItem: function(key, field, value){\n            var item = this.items[this.index[key]];\n            var fieldIndex = null;\n            if (Utils.isNull(item)) {\n                console.warn('Item is undefined for update');\n                return this;\n            }\n            if (isNaN(field)) {\n                this.heads.forEach(function(v, i){\n                    if (v['name'] === field) {\n                        fieldIndex = i;\n                    }\n                });\n            }\n            if (Utils.isNull(fieldIndex)) {\n                console.warn('Item is undefined for update. Field ' + field + ' not found in data structure');\n                return this;\n            }\n\n            item[fieldIndex] = value;\n            this.items[this.index[key]] = item;\n            return this;\n        },\n\n        getItem: function(key){\n            return this.items[this.index[key]];\n        },\n\n        deleteItem: function(fieldIndex, value){\n            var i, deleteIndexes = [];\n            var is_func = Utils.isFunc(value);\n            for(i = 0; i < this.items.length; i++) {\n                if (is_func) {\n                    if (Utils.exec(value, [this.items[i][fieldIndex]])) {\n                        deleteIndexes.push(i);\n                    }\n                } else {\n                    if (this.items[i][fieldIndex] === value) {\n                        deleteIndexes.push(i);\n                    }\n                }\n            }\n\n            this.items = Utils.arrayDeleteByMultipleKeys(this.items, deleteIndexes);\n\n            return this;\n        },\n\n        deleteItemByName: function(fieldName, value){\n            var i, fieldIndex, deleteIndexes = [];\n            var is_func = Utils.isFunc(value);\n\n            for(i = 0; i < this.heads.length; i++) {\n                if (this.heads[i]['name'] === fieldName) {\n                    fieldIndex = i;\n                    break;\n                }\n            }\n\n            for(i = 0; i < this.items.length; i++) {\n                if (is_func) {\n                    if (Utils.exec(value, [this.items[i][fieldIndex]])) {\n                        deleteIndexes.push(i);\n                    }\n                } else {\n                    if (this.items[i][fieldIndex] === value) {\n                        deleteIndexes.push(i);\n                    }\n                }\n            }\n\n            this.items = Utils.arrayDeleteByMultipleKeys(this.items, deleteIndexes);\n\n            return this;\n        },\n\n        draw: function(){\n            this._draw();\n            return this;\n        },\n\n        sorting: function(dir){\n            var that = this;\n\n            if (Utils.isValue(dir)) {\n                this.sort.dir = dir;\n            }\n\n            this._fireEvent(\"sort-start\", {\n                items: this.items\n            });\n\n            this.items.sort(function(a, b){\n                var c1 = that._getItemContent(a);\n                var c2 = that._getItemContent(b);\n                var result = 0;\n\n                if (c1 < c2) {\n                    result = that.sort.dir === \"asc\" ? -1 : 1;\n                }\n                if (c1 > c2) {\n                    result = that.sort.dir === \"asc\" ? 1 : -1;\n                }\n\n                if (result !== 0) {\n\n                    that._fireEvent(\"sort-item-switch\", {\n                        a: a,\n                        b: b,\n                        result: result\n                    });\n                }\n\n                return result;\n            });\n\n            this._fireEvent(\"sort-stop\", {\n                items: this.items\n            });\n\n            return this;\n        },\n\n        search: function(val){\n            this.searchString = val.trim().toLowerCase();\n            this.currentPage = 1;\n            this._draw();\n            return this;\n        },\n\n        _rebuild: function(review){\n            var that = this, element = this.element;\n            var need_sort = false, sortable_columns;\n\n            this._createIndex();\n\n            if (review === true) {\n                this.view = this._createView();\n            }\n\n            this._createTableHeader();\n            this._createTableBody();\n            this._createTableFooter();\n\n            if (this.heads.length > 0) $.each(this.heads, function(i){\n                var item = this;\n                if (!need_sort && [\"asc\", \"desc\"].indexOf(item.sortDir) > -1) {\n                    need_sort = true;\n                    that.sort.colIndex = i;\n                    that.sort.dir = item.sortDir;\n                }\n            });\n\n            if (need_sort) {\n                sortable_columns = element.find(\".sortable-column\");\n                this._resetSortClass(sortable_columns);\n                $(sortable_columns.get(that.sort.colIndex)).addClass(\"sort-\"+that.sort.dir);\n                this.sorting();\n            }\n\n            that.currentPage = 1;\n\n            that._draw();\n        },\n\n        setHeads: function(data){\n            this.heads = data;\n            return this;\n        },\n\n        setHeadItem: function(name, data){\n            var i, index;\n            for(i = 0; i < this.heads.length; i++) {\n                if (this.heads[i].name === name) {\n                    index = i;\n                    break;\n                }\n            }\n            this.heads[index] = data;\n            return this;\n        },\n\n        setItems: function(data){\n            this.items = data;\n            return this;\n        },\n\n        setData: function(/*obj*/ data){\n            var that = this, o = this.options;\n\n            this.activity.show(function() {\n                that.items = [];\n                that.heads = [];\n                that.foots = [];\n\n                if (Array.isArray(o.head)) {\n                    that.heads = o.head;\n                }\n\n                if (Array.isArray(o.body)) {\n                    that.items = o.body;\n                }\n\n                that._createItemsFromJSON(data);\n\n                that._rebuild(true);\n\n                that.activity.hide();\n            })\n\n            return this;\n        },\n\n        loadData: function(source, review){\n            var that = this, element = this.element, o = this.options;\n\n            if (!Utils.isValue(review)) {\n                review = true;\n            }\n\n            element.html(\"\");\n\n            if (!Utils.isValue(source)) {\n\n                this._rebuild(review);\n\n            } else {\n                o.source = source;\n\n                this._fireEvent(\"data-load\", {\n                    source: o.source\n                });\n\n                that.activity.show(function(){\n                    fetch(o.source)\n                        .then(Metro.fetch.status)\n                        .then(Metro.fetch.json)\n                        .then(function(data){\n                            that.activity.hide();\n                            that.items = [];\n                            that.heads = [];\n                            that.foots = [];\n\n                            that._fireEvent(\"data-loaded\", {\n                                source: o.source,\n                                data: data\n                            });\n\n                            if (Array.isArray(o.head)) {\n                                that.heads = o.head;\n                            }\n\n                            if (Array.isArray(o.body)) {\n                                that.items = o.body;\n                            }\n\n                            that._createItemsFromJSON(data);\n                            that._rebuild(review);\n                            that._resetInspector();\n\n                            that._fireEvent(\"data-load-end\", {\n                                source: o.source,\n                                data: data\n                            });\n                        })\n                        .catch(function(error){\n                            that.activity.hide();\n                            that._fireEvent(\"data-load-error\", {\n                                source: o.source,\n                                error: error\n                            });\n                        })\n                });\n\n            }\n        },\n\n        reload: function(review){\n            this.loadData(this.options.source, review);\n        },\n\n        clear: function(){\n            this.items = [];\n            return this.draw();\n        },\n\n        next: function(){\n            if (this.items.length === 0) return ;\n            this.currentPage++;\n            if (this.currentPage > this.pagesCount) {\n                this.currentPage = this.pagesCount;\n                return ;\n            }\n            this._draw();\n            return this;\n        },\n\n        prev: function(){\n            if (this.items.length === 0) return ;\n            this.currentPage--;\n            if (this.currentPage === 0) {\n                this.currentPage = 1;\n                return ;\n            }\n            this._draw();\n            return this;\n        },\n\n        first: function(){\n            if (this.items.length === 0) return ;\n            this.currentPage = 1;\n            this._draw();\n            return this;\n        },\n\n        last: function(){\n            if (this.items.length === 0) return ;\n            this.currentPage = this.pagesCount;\n            this._draw();\n            return this;\n        },\n\n        page: function(num){\n            if (num <= 0) {\n                num = 1;\n            }\n\n            if (num > this.pagesCount) {\n                num = this.pagesCount;\n            }\n\n            this.currentPage = num;\n            this._draw();\n            return this;\n        },\n\n        addFilter: function(f, redraw){\n            var filterIndex = null, i, func = Utils.isFunc(f);\n            if (func === false) {\n                return ;\n            }\n\n            for(i = 0; i < this.filters.length; i++) {\n                if (Utils.isNull(this.filters[i])) {\n                    filterIndex = i;\n                    this.filters[i] = func;\n                    break;\n                }\n            }\n\n            if (Utils.isNull(filterIndex)) {\n                this.filters.push(func);\n                filterIndex = this.filters.length - 1;\n            }\n\n            if (redraw === true) {\n                this.currentPage = 1;\n                this.draw();\n            }\n\n            return filterIndex\n        },\n\n        removeFilter: function(key, redraw){\n            this.filters[key] = null;\n            if (redraw === true) {\n                this.currentPage = 1;\n                this.draw();\n            }\n            return this;\n        },\n\n        removeFilters: function(redraw){\n            this.filters = [];\n            if (redraw === true) {\n                this.currentPage = 1;\n                this.draw();\n            }\n            return this;\n        },\n\n        getItems: function(){\n            return this.items;\n        },\n\n        getHeads: function(){\n            return this.heads;\n        },\n\n        getView: function(){\n            return this.view;\n        },\n\n        getFilteredItems: function(){\n            return this.filteredItems.length > 0 ? this.filteredItems : this.items;\n        },\n\n        getSelectedItems: function(){\n            var element = this.element, o = this.options;\n            var stored_keys = Metro.storage.getItem(o.checkStoreKey.replace(\"$1\", element.attr(\"id\")));\n            var selected = [];\n\n            if (!Utils.isValue(stored_keys)) {\n                return [];\n            }\n\n            $.each(this.items, function(){\n                if (stored_keys.indexOf(\"\"+this[o.checkColIndex]) !== -1) {\n                    selected.push(this);\n                }\n            });\n            return selected;\n        },\n\n        getStoredKeys: function(){\n            var element = this.element, o = this.options;\n            return Metro.storage.getItem(o.checkStoreKey.replace(\"$1\", element.attr(\"id\")), []);\n        },\n\n        clearSelected: function(redraw){\n            var element = this.element, o = this.options;\n            Metro.storage.setItem(o.checkStoreKey.replace(\"$1\", element.attr(\"id\")), []);\n            element.find(\"table-service-check-all input\").prop(\"checked\", false);\n            if (redraw === true) this._draw();\n        },\n\n        getFilters: function(){\n            return this.filters;\n        },\n\n        getFiltersIndexes: function(){\n            return this.filtersIndexes;\n        },\n\n        openInspector: function(mode){\n            var ins = this.inspector;\n            if (mode) {\n                ins.show(0, function(){\n                    ins.css({\n                        top: ($(window).height()  - ins.outerHeight(true)) / 2 + pageYOffset,\n                        left: ($(window).width() - ins.outerWidth(true)) / 2 + pageXOffset\n                    }).data(\"open\", true);\n                });\n            } else {\n                ins.hide().data(\"open\", false);\n            }\n        },\n\n        closeInspector: function(){\n            this.openInspector(false);\n        },\n\n        toggleInspector: function(){\n            this.openInspector(!this.inspector.data(\"open\"));\n        },\n\n        resetView: function(){\n\n            this.view = this._createView();\n\n            this._createTableHeader();\n            this._createTableFooter();\n            this._draw();\n\n            this._resetInspector();\n            this._saveTableView();\n        },\n\n        rebuildIndex: function(){\n            this._createIndex();\n        },\n\n        getIndex: function(){\n            return this.index;\n        },\n\n        export: function(to, mode, filename, options){\n            var Export = Metro.export;\n            var that = this, o = this.options;\n            var table = document.createElement(\"table\");\n            var head = $(\"<thead>\").appendTo(table);\n            var body = $(\"<tbody>\").appendTo(table);\n            var i, j, cells, tds = [], items, tr, td;\n            var start, stop;\n\n            if (typeof Export.tableToCSV !== 'function') {\n                return ;\n            }\n\n            mode = Utils.isValue(mode) ? mode.toLowerCase() : \"all-filtered\";\n            filename = Utils.isValue(filename) ? filename : Utils.elementId(\"table\")+\"-export.csv\";\n\n            // Create table header\n            tr = $(\"<tr>\");\n            cells = this.heads;\n\n            for (j = 0; j < cells.length; j++){\n                tds[j] = null;\n            }\n\n            $.each(cells, function(cell_index){\n                var item = this;\n                if (Utils.bool(that.view[cell_index]['show']) === false) {\n                    return ;\n                }\n                td = $(\"<th>\");\n                if (Utils.isValue(item.title)) {\n                    td.html(item.title);\n                }\n                tds[that.view[cell_index]['index-view']] = td;\n            });\n\n            for (j = 0; j < cells.length; j++){\n                if (Utils.isValue(tds[j])) tds[j].appendTo(tr);\n            }\n            tr.appendTo(head);\n\n            // Create table data\n            if (mode === \"checked\") {\n                items = this.getSelectedItems();\n                start = 0; stop = items.length - 1;\n            } else if (mode === \"view\") {\n                items = this._filter();\n                start = parseInt(o.rows) === -1 ? 0 : o.rows * (this.currentPage - 1);\n                stop = parseInt(o.rows) === -1 ? items.length - 1 : start + o.rows - 1;\n            } else if (mode === \"all\") {\n                items = this.items;\n                start = 0; stop = items.length - 1;\n            } else {\n                items = this._filter();\n                start = 0; stop = items.length - 1;\n            }\n\n            for (i = start; i <= stop; i++) {\n                if (Utils.isValue(items[i])) {\n                    tr = $(\"<tr>\");\n\n                    cells = items[i];\n\n                    for (j = 0; j < cells.length; j++){\n                        tds[j] = null;\n                    }\n\n                    $.each(cells, function(cell_index){\n                        if (Utils.bool(that.view[cell_index].show) === false) {\n                            return ;\n                        }\n                        td = $(\"<td>\").html(this);\n                        tds[that.view[cell_index]['index-view']] = td;\n                    });\n\n                    for (j = 0; j < cells.length; j++){\n                        if (Utils.isValue(tds[j])) tds[j].appendTo(tr);\n                    }\n\n                    tr.appendTo(body);\n                }\n            }\n\n            // switch (to) {\n            //     default: Export.tableToCSV(table, filename, options);\n            // }\n            Export.tableToCSV(table, filename, options);\n            table.remove();\n        },\n\n        changeAttribute: function(attributeName){\n            var that = this, element = this.element, o = this.options;\n\n            function dataCheck(){\n                o.check = Utils.bool(element.attr(\"data-check\"));\n                that._service();\n                that._createTableHeader();\n                that._draw();\n            }\n\n            function dataRownum(){\n                o.rownum = Utils.bool(element.attr(\"data-rownum\"));\n                that._service();\n                that._createTableHeader();\n                that._draw();\n            }\n\n            switch (attributeName) {\n                case \"data-check\": dataCheck(); break;\n                case \"data-rownum\": dataRownum(); break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element;\n            var component = element.closest(\".table-component\");\n            var search_input = component.find(\"input\");\n            var rows_select = component.find(\"select\");\n\n            search_input.data(\"input\").destroy();\n            rows_select.data(\"select\").destroy();\n\n            $(window).off(Metro.events.resize, {ns: this.id});\n\n            element.off(Metro.events.click, \".sortable-column\");\n\n            element.off(Metro.events.click, \".table-service-check input\");\n\n            element.off(Metro.events.click, \".table-service-check-all input\");\n\n            search_input.off(Metro.events.inputchange);\n\n            if (Utils.isValue(this.wrapperSearch)) {\n                var customSearch = this.wrapperSearch.find(\"input\");\n                if (customSearch.length > 0) {\n                    customSearch.off(Metro.events.inputchange);\n                }\n            }\n\n            component.off(Metro.events.click, \".pagination .page-link\");\n            if (Utils.isValue(this.wrapperPagination)) {\n                this.wrapperPagination.off(Metro.events.click, \".pagination .page-link\");\n            }\n            element.off(Metro.events.click, \".js-table-crud-button\");\n\n            this._removeInspectorEvents();\n\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var MaterialTabsDefaultConfig = {\n        wheelStep: 20,\n        materialtabsDeferred: 0,\n        deep: false,\n        fixedTabs: false,\n        duration: 300,\n        appBar: false,\n\n        clsComponent: \"\",\n        clsTabs: \"\",\n        clsTab: \"\",\n        clsTabActive: \"\",\n        clsMarker: \"\",\n\n        onBeforeTabOpen: Metro.noop_true,\n        onTabOpen: Metro.noop,\n        onTabsScroll: Metro.noop,\n        onTabsCreate: Metro.noop\n    };\n\n    Metro.materialTabsSetup = function (options) {\n        MaterialTabsDefaultConfig = $.extend({}, MaterialTabsDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroMaterialTabsSetup\"] !== undefined) {\n        Metro.materialTabsSetup(window[\"metroMaterialTabsSetup\"]);\n    }\n\n    Metro.Component('material-tabs', {\n        init: function( options, elem ) {\n            this._super(elem, options, MaterialTabsDefaultConfig, {\n                marker: null,\n                scroll: 0,\n                scrollDir: \"left\"\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"tabs-create\", {\n                element: element\n            });\n        },\n\n        _createStructure: function(){\n            var element = this.element, o = this.options;\n            var tabs = element.find(\"li\"), active_tab = element.find(\"li.active\");\n            var wrapper = $(\"<div>\").addClass(\"tabs-material-wrapper\").addClass(o.clsComponent).insertBefore(element);\n\n            if (o.appBar === true) {\n                wrapper.addClass(\"app-bar-present\");\n            }\n            if (o.appBar === \"more\") {\n                wrapper.addClass(\"app-bar-present-more\");\n            }\n\n            element.appendTo(wrapper);\n            element.addClass(\"tabs-material\").addClass(o.clsTabs);\n            tabs.addClass(o.clsTab);\n\n            if (o.deep === true) {\n                element.addClass(\"deep\");\n            }\n\n            if (o.fixedTabs === true) {\n                element.addClass(\"fixed-tabs\");\n            }\n\n            this.marker = element.find(\".tab-marker\");\n\n            if (this.marker.length === 0) {\n                this.marker = $(\"<span>\").addClass(\"tab-marker\").addClass(o.clsMarker).appendTo(element);\n            }\n\n            this.openTab(active_tab.length === 0 ? tabs[0] : active_tab[0]);\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n\n            element.on(Metro.events.click, \"li\", function(e){\n                var tab = $(this);\n                var active_tab = element.find(\"li.active\");\n                var tab_next = tab.index() > active_tab.index();\n                var target = tab.children(\"a\").attr(\"href\");\n\n                e.preventDefault();\n\n                if (Utils.isValue(target) && target[0] === \"#\") {\n                    if (tab.hasClass(\"active\")) return;\n                    if (tab.hasClass(\"disabled\")) return;\n                    if (Utils.exec(o.onBeforeTabOpen, [tab, target, tab_next], this) === false) return;\n                    that.openTab(tab, tab_next);\n                }\n            });\n\n            element.on(Metro.events.scroll, function(){\n                var oldScroll = that.scroll;\n\n                that.scrollDir = that.scroll < element[0].scrollLeft ? \"left\" : \"right\";\n                that.scroll = element[0].scrollLeft;\n\n                that._fireEvent(\"tabs-scroll\", {\n                    scrollLeft: element[0].scrollLeft,\n                    oldScroll: oldScroll,\n                    scrollDir: that.scrollDir\n                });\n\n            });\n\n            element.on(Metro.events.mousewheel, function(e){\n                if (e.deltaY === undefined) {\n                    return ;\n                }\n\n                var scroll, scrollable = $(this);\n                var dir = e.deltaY > 0 ? -1 : 1;\n                var step = o.wheelStep;\n\n\n                scroll = scrollable.scrollLeft() - ( dir * step);\n                scrollable.scrollLeft(scroll);\n            })\n        },\n\n        openTab: function(tab, tab_next){\n            var element = this.element, o = this.options;\n            var tabs = element.find(\"li\");\n            var magic = 52, shift, width, tab_width, target, tab_left, scroll, scrollLeft;\n\n            tab = $(tab);\n\n            $.each(tabs, function(){\n                var target = $(this).find(\"a\").attr(\"href\");\n                if (!Utils.isValue(target)) return;\n                if (target[0] === \"#\" && target.length > 1) {\n                    $(target).hide();\n                }\n            });\n\n            width = element.width();\n            scroll = element.scrollLeft();\n            tab_left = tab.position().left;\n            tab_width = tab.width();\n            shift = tab_left + tab_width;\n\n            tabs.removeClass(\"active\").removeClass(o.clsTabActive);\n            tab.addClass(\"active\").addClass(o.clsTabActive);\n\n            if (shift + magic > width + scroll) {\n                scrollLeft = scroll + (magic * 2);\n            } else if (tab_left < scroll) {\n                scrollLeft = tab_left - magic * 2;\n            } else {\n                scrollLeft = scroll;\n            }\n\n            element.animate({\n                draw: {\n                    scrollLeft: scrollLeft\n                },\n                dur: o.duration\n            });\n\n            this.marker.animate({\n                draw: {\n                    left: tab_left,\n                    width: tab_width\n                },\n                dur: o.duration\n            });\n\n            target = tab.find(\"a\").attr(\"href\");\n            if (Utils.isValue(target)) {\n                if (target[0] === \"#\" && target.length > 1) {\n                    $(target).show();\n                }\n            }\n\n            this._fireEvent(\"tab-open\", {\n                tab: tab[0],\n                target: target,\n                tab_next: tab_next\n            });\n        },\n\n        open: function(tab_num){\n            var element = this.element;\n            var tabs = element.find(\"li\");\n            var active_tab = element.find(\"li.active\");\n            var tab = tabs.eq(tab_num - 1);\n            var tab_next = tabs.index(tab) > tabs.index(active_tab);\n            this.openTab(tab, tab_next);\n        },\n\n        changeAttribute: function(){\n        },\n\n        destroy: function(){\n            var element = this.element;\n\n            element.off(Metro.events.click, \"li\");\n            element.off(Metro.events.scroll);\n\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n\n    var Utils = Metro.utils;\n    var TabsDefaultConfig = {\n        tabsDeferred: 0,\n        expand: false,\n        expandPoint: null,\n        tabsPosition: \"top\",\n        tabsType: \"default\",\n        updateUri: false,\n\n        clsTabs: \"\",\n        clsTabsList: \"\",\n        clsTabsListItem: \"\",\n        clsTabsListItemActive: \"\",\n\n        onTab: Metro.noop,\n        onTabOpen: Metro.noop,\n        onTabClose: Metro.noop,\n        onBeforeTab: Metro.noop_true,\n        onTabsCreate: Metro.noop\n    };\n\n    Metro.tabsSetup = function (options) {\n        TabsDefaultConfig = $.extend({}, TabsDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroTabsSetup\"] !== undefined) {\n        Metro.tabsSetup(window[\"metroTabsSetup\"]);\n    }\n\n    Metro.Component('tabs', {\n        init: function( options, elem ) {\n            this._super(elem, options, TabsDefaultConfig, {\n                _targets: [],\n                id: Utils.elementId('tabs')\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n            var tab = element.find(\".active\").length > 0 ? $(element.find(\".active\")[0]) : undefined;\n\n            this._createStructure();\n            this._createEvents();\n\n            this._open(tab);\n\n            this._fireEvent(\"tabs-create\", {\n                element: element\n            });\n        },\n\n        _createStructure: function(){\n            var element = this.element, o = this.options;\n            var parent = element.parent();\n            var right_parent = parent.hasClass(\"tabs\");\n            var container = right_parent ? parent : $(\"<div>\").addClass(\"tabs tabs-wrapper\");\n            var expandTitle, hamburger;\n\n            container.addClass(o.tabsPosition.replace([\"-\", \"_\", \"+\"], \" \"));\n\n            element.addClass(\"tabs-list\");\n            if (o.tabsType !== \"default\") {\n                element.addClass(\"tabs-\"+o.tabsType);\n            }\n            if (!right_parent) {\n                container.insertBefore(element);\n                element.appendTo(container);\n            }\n\n            element.data('expanded', false);\n\n            expandTitle = $(\"<div>\").addClass(\"expand-title\"); container.prepend(expandTitle);\n            hamburger = container.find(\".hamburger\");\n            if (hamburger.length === 0) {\n                hamburger = $(\"<button>\").attr(\"type\", \"button\").addClass(\"hamburger menu-down\").appendTo(container);\n                for(var i = 0; i < 3; i++) {\n                    $(\"<span>\").addClass(\"line\").appendTo(hamburger);\n                }\n\n                if (Metro.colors.isLight(Utils.getStyleOne(container, \"background-color\")) === true) {\n                    hamburger.addClass(\"dark\");\n                }\n            }\n\n            container.addClass(o.clsTabs);\n            element.addClass(o.clsTabsList);\n            element.children(\"li\").addClass(o.clsTabsListItem);\n\n            if (o.expand === true && !o.tabsPosition.includes(\"vertical\")) {\n                container.addClass(\"tabs-expand\");\n            } else {\n                if (Utils.isValue(o.expandPoint) && Utils.mediaExist(o.expandPoint) && !o.tabsPosition.includes(\"vertical\")) {\n                    container.addClass(\"tabs-expand\");\n                }\n            }\n\n            if (o.tabsPosition.includes(\"vertical\")) {\n                container.addClass(\"tabs-expand\");\n            }\n\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var container = element.parent();\n\n            $(window).on(Metro.events.resize, function(){\n\n                if (o.tabsPosition.includes(\"vertical\")) {\n                    return ;\n                }\n\n                if (o.expand === true && !o.tabsPosition.includes(\"vertical\")) {\n                    container.addClass(\"tabs-expand\");\n                } else {\n                    if (Utils.isValue(o.expandPoint) && Utils.mediaExist(o.expandPoint) && !o.tabsPosition.includes(\"vertical\")) {\n                        if (!container.hasClass(\"tabs-expand\")) container.addClass(\"tabs-expand\");\n                    } else {\n                        if (container.hasClass(\"tabs-expand\")) container.removeClass(\"tabs-expand\");\n                    }\n                }\n            }, {ns: this.id});\n\n            container.on(Metro.events.click, \".hamburger, .expand-title\", function(){\n                if (element.data('expanded') === false) {\n                    element.addClass(\"expand\");\n                    element.data('expanded', true);\n                    container.find(\".hamburger\").addClass(\"active\");\n                } else {\n                    element.removeClass(\"expand\");\n                    element.data('expanded', false);\n                    container.find(\".hamburger\").removeClass(\"active\");\n                }\n            });\n\n            element.on(Metro.events.click, \"a\", function(e){\n                var link = $(this);\n                var href = link.attr(\"href\").trim();\n                var tab = link.parent(\"li\");\n\n                that._fireEvent(\"tab\", {\n                    tab: tab[0],\n                    target: tab.children(\"a\").attr(\"href\")\n                });\n\n                if (tab.hasClass(\"active\")) {\n                    e.preventDefault();\n                }\n\n                if (element.data('expanded') === true) {\n                    element.removeClass(\"expand\");\n                    element.data('expanded', false);\n                    container.find(\".hamburger\").removeClass(\"active\");\n                }\n\n                if (Utils.exec(o.onBeforeTab, [tab, element], tab[0]) !== true) {\n                    return false;\n                }\n\n                if (Utils.isValue(href) && href[0] === \"#\") {\n                    that._open(tab);\n                    e.preventDefault();\n                }\n            });\n\n            $(window).on(\"hashchange\", function(e){\n                var hash, tab;\n\n                if (o.updateUri) {\n                    hash = window.location.hash;\n                    tab = that._findTabByTarget(hash)\n                    that._open($(tab))\n                }\n            });\n        },\n\n        _findTabByTarget: function(target){\n            var element = this.element;\n            var tabs = element.find(\"li\")\n            var tab = undefined\n\n            tabs.each(function(i, el){\n                if (!tab && $(el).children(\"a\").attr(\"href\") === target) {\n                    tab = el\n                }\n            })\n\n            return tab\n        },\n\n        _collectTargets: function(){\n            var that = this, element = this.element;\n            var tabs = element.find(\"li\");\n\n            this._targets = [];\n\n            $.each(tabs, function(){\n                var target = $(this).find(\"a\").attr(\"href\").trim();\n                if (target.length > 1 && target[0] === \"#\") {\n                    that._targets.push(target);\n                }\n            });\n        },\n\n        _open: function(tab){\n            var element = this.element, o = this.options;\n            var tabs = element.find(\"li\");\n            var expandTitle = element.siblings(\".expand-title\");\n            var activeTab = element.find(\"li.active\");\n\n            if (tabs.length === 0) {\n                return;\n            }\n\n            this._collectTargets();\n\n            if (tab === undefined) {\n                tab = $(tabs[0]);\n            }\n\n            var target = tab.find(\"a\").attr(\"href\");\n\n            if (target === undefined) {\n                return;\n            }\n\n            tabs.removeClass(\"active\").removeClass(o.clsTabsListItemActive);\n            if (tab.parent().hasClass(\"d-menu\")) {\n                tab.parent().parent().addClass(\"active\");\n            } else {\n                tab.addClass(\"active\");\n            }\n\n            $.each(this._targets, function(){\n                var t = $(this);\n                if (t.length > 0) t.hide();\n            });\n\n            if (target !== \"#\" && target[0] === \"#\") {\n                if (o.updateUri) {\n                    window.location.hash = target\n                }\n                $(target).show();\n            }\n\n            expandTitle.html(tab.find(\"a\").html());\n\n            tab.addClass(o.clsTabsListItemActive);\n\n            if (!activeTab.is(tab)) {\n                this._fireEvent(\"tab-open\", {\n                    tab: tab[0],\n                    target: tab.children(\"a\").attr(\"href\")\n                });\n\n                this._fireEvent(\"tab-close\", {\n                    tab: activeTab[0],\n                    target: activeTab.children(\"a\").attr(\"href\")\n                });\n            }\n        },\n\n        next: function(){\n            var element = this.element;\n            var next, active_tab = element.find(\"li.active\");\n\n            next = active_tab.next(\"li\");\n            if (next.length > 0) {\n                this._open(next);\n            }\n        },\n\n        prev: function(){\n            var element = this.element;\n            var next, active_tab = element.find(\"li.active\");\n\n            next = active_tab.prev(\"li\");\n            if (next.length > 0) {\n                this._open(next);\n            }\n        },\n\n        openByTarget: function(target){\n            var tab = this._findTabByTarget(target);\n            if (tab) {\n                this._open($(tab));\n            }\n        },\n\n        open: function(tab){\n            var element = this.element;\n            var tabs = element.find(\"li\");\n\n            if (!Utils.isValue(tab)) {\n                tab = 1;\n            }\n\n            if (Utils.isInt(tab)) {\n                if (Utils.isValue(tabs[tab-1])) this._open($(tabs[tab-1]));\n            } else {\n                this._open($(tab));\n            }\n        },\n\n        changeAttribute: function(){\n        },\n\n        destroy: function(){\n            var element = this.element;\n            var container = element.parent();\n\n            $(window).off(Metro.events.resize,{ns: this.id});\n\n            container.off(Metro.events.click, \".hamburger, .expand-title\");\n\n            element.off(Metro.events.click, \"a\");\n\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n\n    var Utils = Metro.utils;\n    var TagInputDefaultConfig = {\n        autocomplete: null,\n        autocompleteUnique: true,\n        autocompleteUrl: null,\n        autocompleteUrlMethod: \"GET\",\n        autocompleteUrlKey: null,\n        autocompleteDivider: \",\",\n        autocompleteListHeight: 200,\n\n        label: \"\",\n        size: \"normal\",\n        taginputDeferred: 0,\n        static: false,\n        clearButton: true,\n        clearButtonIcon: \"<span class='default-icon-cross'></span>\",\n\n        randomColor: false,\n        maxTags: 0,\n        tagSeparator: \",\",\n        tagTrigger: \"Enter, Space, Comma\",\n        backspace: true,\n\n        clsComponent: \"\",\n        clsInput: \"\",\n        clsClearButton: \"\",\n        clsTag: \"\",\n        clsTagTitle: \"\",\n        clsTagRemover: \"\",\n        clsLabel: \"\",\n\n        onBeforeTagAdd: Metro.noop_true,\n        onTagAdd: Metro.noop,\n        onBeforeTagRemove: Metro.noop_true,\n        onTagRemove: Metro.noop,\n        onTag: Metro.noop,\n        onClear: Metro.noop,\n        onTagTrigger: Metro.noop,\n        onTagInputCreate: Metro.noop\n    };\n\n    Metro.tagInputSetup = function (options) {\n        TagInputDefaultConfig = $.extend({}, TagInputDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroTagInputSetup\"] !== undefined) {\n        Metro.tagInputSetup(window[\"metroTagInputSetup\"]);\n    }\n\n    Metro.Component('tag-input', {\n        init: function( options, elem ) {\n            this._super(elem, options, TagInputDefaultConfig, {\n                values: [],\n                triggers: [],\n                autocomplete: []\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            this.triggers = (\"\"+this.options.tagTrigger).toArray(\",\");\n\n            if (this.triggers.includes(\"Space\") || this.triggers.includes(\"Spacebar\")) {\n                this.triggers.push(\" \");\n                this.triggers.push(\"Spacebar\");\n            }\n\n            if (this.triggers.includes(\"Comma\")) {\n                this.triggers.push(\",\");\n            }\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"tag-input-create\", {\n                element: this.element\n            });\n        },\n\n        _createStructure: function(){\n            var that = this, element = this.element, o = this.options;\n            var container, input, clearButton;\n            var values = element.val().trim();\n\n            container = $(\"<div>\").addClass(\"tag-input \"  + element[0].className).addClass(o.clsComponent).insertBefore(element);\n            element.appendTo(container);\n\n            container.addClass(\"input-\" + o.size)\n\n            element[0].className = \"\";\n\n            element.addClass(\"original-input\");\n            input = $(\"<input type='text'>\").addClass(\"input-wrapper\").addClass(o.clsInput).attr(\"size\", 1);\n            input.appendTo(container);\n\n            if (o.clearButton !== false && !element[0].readOnly) {\n                container.addClass(\"padding-for-clear\");\n                clearButton = $(\"<button>\").addClass(\"button input-clear-button\").attr(\"tabindex\", -1).attr(\"type\", \"button\").html(o.clearButtonIcon);\n                clearButton.appendTo(container);\n            }\n\n            if (Utils.isValue(values)) {\n                $.each(values.toArray(o.tagSeparator), function(){\n                    that._addTag(this);\n                })\n            }\n\n            if (o.label) {\n                var label = $(\"<label>\").addClass(\"label-for-input\").addClass(o.clsLabel).html(o.label).insertBefore(container);\n                if (element.attr(\"id\")) {\n                    label.attr(\"for\", element.attr(\"id\"));\n                }\n                if (element.attr(\"dir\") === \"rtl\") {\n                    label.addClass(\"rtl\");\n                }\n            }\n\n            if (element.is(\":disabled\")) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n\n            if (o.static === true || element.attr(\"readonly\") !== undefined) {\n                container.addClass(\"static-mode\");\n            }\n\n            if (!Utils.isNull(o.autocomplete) || !Utils.isNull(o.autocompleteUrl)) {\n                $(\"<div>\").addClass(\"autocomplete-list\").css({\n                    maxHeight: o.autocompleteListHeight,\n                    display: \"none\"\n                }).appendTo(container);\n            }\n\n            if (Utils.isValue(o.autocomplete)) {\n                var autocomplete_obj = Utils.isObject(o.autocomplete);\n\n                if (autocomplete_obj !== false) {\n                    this.autocomplete = autocomplete_obj;\n                } else {\n                    this.autocomplete = o.autocomplete.toArray(o.autocompleteDivider);\n                }\n            }\n\n            if (Utils.isValue(o.autocompleteUrl)) {\n                fetch(o.autocompleteUrl, {\n                    method: o.autocompleteUrlMethod\n                }).then(function(response){\n                    return response.text()\n                }).then(function(data){\n                    var newData = [];\n\n                    try {\n                        newData = JSON.parse(data);\n                        if (o.autocompleteUrlKey) {\n                            newData = newData[o.autocompleteUrlKey];\n                        }\n                    } catch (e) {\n                        newData = data.split(\"\\n\");\n                    }\n\n                    that.autocomplete = that.autocomplete.concat(newData);\n                });\n            }\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var container = element.closest(\".tag-input\");\n            var input = container.find(\".input-wrapper\");\n            var autocompleteList = container.find(\".autocomplete-list\");\n\n            input.on(Metro.events.focus, function(){\n                container.addClass(\"focused\");\n            });\n\n            input.on(Metro.events.blur, function(){\n                container.removeClass(\"focused\");\n            });\n\n            input.on(Metro.events.inputchange, function(){\n                input.attr(\"size\", Math.ceil(input.val().length / 2) + 2);\n            });\n\n            input.on(Metro.events.keydown, function(e){\n                var val = input.val().trim();\n                var key = e.key;\n\n                if (key === \"Enter\") e.preventDefault();\n\n                if (o.backspace === true && key === \"Backspace\" && val.length === 0) {\n                    if (that.values.length > 0) {\n                        that.values.splice(-1,1);\n                        element.siblings(\".tag\").last().remove();\n                        element.val(that.values.join(o.tagSeparator));\n                    }\n                    return ;\n                }\n\n                if (val === \"\") {return ;}\n\n                if (!that.triggers.includes(key)) {\n                    return ;\n                }\n\n                that._fireEvent(\"tag-trigger\", {\n                    key: key\n                });\n\n                input.val(\"\");\n                that._addTag(val);\n                input.attr(\"size\", 1);\n            });\n\n            input.on(Metro.events.keyup, function(e){\n                var val = input.val();\n                var key = e.key;\n\n                if (that.triggers.includes(key) && val[val.length - 1] === key) {\n                    input.val(val.slice(0, -1));\n                }\n            });\n\n            container.on(Metro.events.click, \".tag .remover\", function(){\n                var tag = $(this).closest(\".tag\");\n                that._delTag(tag);\n            });\n\n            container.on(Metro.events.click, function(){\n                input.focus();\n            });\n\n            container.on(Metro.events.click, \".input-clear-button\", function(){\n                var val = element.val();\n                that.clear();\n\n                that._fireEvent(\"clear\", {\n                    val: val\n                });\n            });\n\n            input.on(Metro.events.input, function(){\n                var val = this.value.toLowerCase();\n                that._drawAutocompleteList(val);\n            });\n\n            container.on(Metro.events.click, \".autocomplete-list .item\", function(){\n                var val = $(this).attr(\"data-autocomplete-value\");\n\n                input.val(\"\");\n                that._addTag(val);\n                input.attr(\"size\", 1);\n\n                autocompleteList.css({\n                    display: \"none\"\n                });\n                that._fireEvent(\"autocomplete-select\", {\n                    value: val\n                });\n            });\n        },\n\n        _drawAutocompleteList: function(val){\n            var that = this, element = this.element, o = this.options;\n            var container = element.closest(\".tag-input\");\n            var input = container.find(\".input-wrapper\");\n            var autocompleteList = container.find(\".autocomplete-list\");\n            var items;\n\n            if (autocompleteList.length === 0) {\n                return;\n            }\n\n            autocompleteList.html(\"\");\n\n            items = this.autocomplete.filter(function(item){\n                return item.toLowerCase().indexOf(val) > -1;\n            });\n\n            autocompleteList.css({\n                display: items.length > 0 ? \"block\" : \"none\",\n                left: input.position().left\n            });\n\n            $.each(items, function(){\n                if (o.autocompleteUnique && that.values.indexOf(this) !== -1) {\n                    return ;\n                }\n\n                var v = this;\n                var index = v.toLowerCase().indexOf(val), content;\n                var item = $(\"<div>\").addClass(\"item\").attr(\"data-autocomplete-value\", v);\n\n                if (index === 0) {\n                    content = \"<strong>\"+v.substr(0, val.length)+\"</strong>\"+v.substr(val.length);\n                } else {\n                    content = v.substr(0, index) + \"<strong>\"+v.substr(index, val.length)+\"</strong>\"+v.substr(index + val.length);\n                }\n\n                item.html(content).appendTo(autocompleteList);\n\n                that._fireEvent(\"draw-autocomplete-item\", {\n                    item: item\n                })\n            });\n        },\n\n        _addTag: function(val){\n            var element = this.element, o = this.options;\n            var container = element.closest(\".tag-input\");\n            var input = container.find(\".input-wrapper\");\n            var tag, title, remover;\n            var tagSize, tagStatic;\n\n            if (container.hasClass(\"input-large\")) {\n                tagSize = \"large\";\n            } else if (container.hasClass(\"input-small\")) {\n                tagSize = \"small\"\n            }\n\n            if (o.maxTags > 0 && this.values.length === o.maxTags) {\n                return ;\n            }\n\n            if ((\"\"+val).trim() === \"\") {\n                return ;\n            }\n\n            if (!Utils.exec(o.onBeforeTagAdd, [val, this.values], element[0])) {\n                return ;\n            }\n\n\n            tag = $(\"<span>\")\n                .addClass(\"tag\")\n                .addClass(tagSize)\n                .addClass(o.clsTag)\n                .insertBefore(input);\n            tag.data(\"value\", val);\n\n            tagStatic = o.static || container.hasClass(\"static-mode\") || element.readonly || element.disabled || container.hasClass(\"disabled\");\n            if (tagStatic) {\n                tag.addClass(\"static\");\n            }\n\n            title = $(\"<span>\").addClass(\"title\").addClass(o.clsTagTitle).html(val);\n            remover = $(\"<span>\").addClass(\"remover\").addClass(o.clsTagRemover).html(\"&times;\");\n\n            title.appendTo(tag);\n            remover.appendTo(tag);\n\n            if (o.randomColor === true) {\n                var colors = Metro.colors.colors(Metro.colors.PALETTES.ALL), bg, fg, bg_r;\n\n                bg = colors[$.random(0, colors.length - 1)];\n                bg_r = Metro.colors.darken(bg, 15);\n                fg = Metro.colors.isDark(bg) ? \"#ffffff\" : \"#000000\";\n\n                tag.css({\n                    backgroundColor: bg,\n                    color: fg\n                });\n                remover.css({\n                    backgroundColor: bg_r,\n                    color: fg\n                });\n            }\n\n            this.values.push(val);\n            element.val(this.values.join(o.tagSeparator));\n\n            this._fireEvent(\"tag-add\", {\n                tag: tag[0],\n                val: val,\n                values: this.values\n            });\n\n            this._fireEvent(\"tag\", {\n                tag: tag[0],\n                val: val,\n                values: this.values\n            });\n        },\n\n        _delTag: function(tag) {\n            var element = this.element, o = this.options;\n            var val = tag.data(\"value\");\n\n            if (!Utils.exec(o.onBeforeTagRemove, [tag, val, this.values], element[0])) {\n                return ;\n            }\n\n            Utils.arrayDelete(this.values, val);\n            element.val(this.values.join(o.tagSeparator));\n\n            this._fireEvent(\"tag-remove\", {\n                tag: tag[0],\n                val: val,\n                values: this.values\n            });\n\n            this._fireEvent(\"tag\", {\n                tag: tag[0],\n                val: val,\n                values: this.values\n            });\n\n            tag.remove();\n        },\n\n        tags: function(){\n            return this.values;\n        },\n\n        val: function(v){\n            var that = this, element = this.element, o = this.options;\n            var container = element.closest(\".tag-input\");\n            var newValues = [];\n\n            if (!Utils.isValue(v)) {\n                return this.tags();\n            }\n\n            this.values = [];\n            container.find(\".tag\").remove();\n\n            if (typeof v === \"string\") {\n                newValues = (\"\"+v).toArray(o.tagSeparator);\n            } else {\n                if (Array.isArray(v)) {\n                    newValues = v;\n                }\n            }\n\n            $.each(newValues, function(){\n                that._addTag(this);\n            });\n\n            return this;\n        },\n\n        append: function(v){\n            var that = this, o = this.options;\n            var newValues = this.values;\n\n            if (typeof v === \"string\") {\n                newValues = (\"\"+v).toArray(o.tagSeparator);\n            } else {\n                if (Array.isArray(v)) {\n                    newValues = v;\n                }\n            }\n\n            $.each(newValues, function(){\n                that._addTag(this);\n            });\n\n            return this;\n        },\n\n        clear: function(){\n            var element = this.element;\n            var container = element.closest(\".tag-input\");\n\n            this.values = [];\n\n            element.val(\"\").trigger(\"change\");\n\n            container.find(\".tag\").remove();\n\n            return this;\n        },\n\n        disable: function(){\n            this.element.data(\"disabled\", true);\n            this.element.parent().addClass(\"disabled\");\n        },\n\n        enable: function(){\n            this.element.data(\"disabled\", false);\n            this.element.parent().removeClass(\"disabled\");\n        },\n\n        toggleState: function(){\n            if (this.elem.disabled) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        },\n\n        toggleStatic: function(val){\n            var container = this.element.closest(\".tag-input\");\n            var staticMode;\n\n            if (Utils.isValue(val)) {\n                staticMode = Utils.bool(val);\n            } else {\n                staticMode = !container.hasClass(\"static-mode\");\n            }\n\n            if (staticMode) {\n                container.addClass(\"static-mode\");\n            } else {\n                container.removeClass(\"static-mode\");\n            }\n        },\n\n        setAutocompleteList: function(l){\n            var autocomplete_list = Utils.isObject(l);\n            if (autocomplete_list !== false) {\n                this.autocomplete = autocomplete_list;\n            } else if (typeof l === \"string\") {\n                this.autocomplete = l.toArray(this.options.autocompleteDivider);\n            }\n        },\n\n        changeAttribute: function(attributeName){\n            var that = this, element = this.element, o = this.options;\n\n            var changeValue = function(){\n                var val = element.attr(\"value\").trim();\n                that.clear();\n                if (!Utils.isValue(val)) {\n                    return ;\n                }\n                that.val(val.toArray(o.tagSeparator));\n            };\n\n            switch (attributeName) {\n                case \"value\": changeValue(); break;\n                case \"disabled\": this.toggleState(); break;\n                case \"static\": this.toggleStatic(); break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element;\n            var container = element.closest(\".tag-input\");\n            var input = container.find(\".input-wrapper\");\n\n            input.off(Metro.events.focus);\n            input.off(Metro.events.blur);\n            input.off(Metro.events.keydown);\n            container.off(Metro.events.click, \".tag .remover\");\n            container.off(Metro.events.click);\n\n            return element;\n        }\n    });\n\n    $(document).on(Metro.events.click, function(){\n        $('.tag-input .autocomplete-list').hide();\n    });\n\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n\n    var Utils = Metro.utils;\n\n    var Engine = function(html, options, conf) {\n        var ReEx, re = '<%(.+?)%>',\n            reExp = /(^( )?(var|if|for|else|switch|case|break|{|}|;))(.*)?/g,\n            code = 'with(obj) { var r=[];\\n',\n            cursor = 0,\n            result,\n            match;\n        var add = function(line, js) {\n            /* jshint -W030 */\n            js? (code += line.match(reExp) ? line + '\\n' : 'r.push(' + line + ');\\n') :\n                (code += line !== '' ? 'r.push(\"' + line.replace(/\"/g, '\\\\\"') + '\");\\n' : '');\n            return add;\n        };\n\n        if (Utils.isValue(conf)) {\n            if (($.hasProp(conf, 'beginToken'))) {\n                re = re.replace('<%', conf.beginToken);\n            }\n            if (($.hasProp(conf,'endToken'))) {\n                re = re.replace('%>', conf.endToken);\n            }\n        }\n\n        ReEx = new RegExp(re, 'g');\n        match = ReEx.exec(html);\n\n        while(match) {\n            add(html.slice(cursor, match.index))(match[1], true);\n            cursor = match.index + match[0].length;\n            match = ReEx.exec(html);\n        }\n        add(html.substr(cursor, html.length - cursor));\n        code = (code + 'return r.join(\"\"); }').replace(/[\\r\\t\\n]/g, ' ');\n        /* jshint -W054 */\n        try { result = new Function('obj', code).apply(options, [options]); }\n        catch(err) { console.error(\"'\" + err.message + \"'\", \" in \\n\\nCode:\\n\", code, \"\\n\"); }\n        return result;\n    };\n\n    var TemplateDefaultConfig = {\n        templateData: null,\n        onTemplateCompile: Metro.noop,\n        onTemplateCreate: Metro.noop\n    };\n\n    Metro.templateSetup = function (options) {\n        TemplateDefaultConfig = $.extend({}, TemplateDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroTemplateSetup\"] !== undefined) {\n        Metro.templateSetup(window[\"metroTemplateSetup\"]);\n    }\n\n    Metro.Component('template', {\n        init: function( options, elem ) {\n            this._super(elem, options, TemplateDefaultConfig, {\n                template: null,\n                data: {}\n            });\n            return this;\n        },\n\n        _compile: function(){\n            var element = this.element;\n            var template, compiled;\n\n            template = this.template\n                .replace(/(&lt;%)/gm, \"<%\")\n                .replace(/(%&gt;)/gm, \"%>\")\n                .replace(/(&lt;)/gm, \"<\")\n                .replace(/(&gt;)/gm, \">\");\n\n            compiled = Engine(template, this.data);\n            element.html(compiled);\n\n            this._fireEvent('template-compile', {\n                template: template,\n                compiled: compiled,\n                element: element\n            });\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n            this.template = element.html();\n            this.data = Utils.isObject(o.templateData) || {};\n            this._compile();\n            this._fireEvent('template-create', {\n                element: element\n            });\n        },\n\n        buildWith: function(obj){\n            var data = Utils.isObject(obj);\n            if (!data) {\n                return;\n            }\n            this.data = data;\n            this._compile();\n        },\n\n        changeAttribute: function(a, v){\n            if (a === \"data-template-data\") {\n                this.options.templateData = v;\n                this.data = Utils.isObject(v) || {};\n                this._compile();\n            }\n        },\n\n        destroy: function(){\n            return this.element;\n        }\n    });\n\n    Metro.template = Engine;\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var TextareaDefaultConfig = {\n        label: \"\",\n        textareaDeferred: 0,\n        charsCounter: null,\n        charsCounterTemplate: \"$1\",\n        defaultValue: \"\",\n        prepend: \"\",\n        append: \"\",\n        copyInlineStyles: false,\n        clearButton: true,\n        clearButtonIcon: \"<span class='default-icon-cross'></span>\",\n        autoSize: true,\n        maxHeight: 0,\n        clsPrepend: \"\",\n        clsAppend: \"\",\n        clsComponent: \"\",\n        clsTextarea: \"\",\n        clsLabel: \"\",\n        onChange: Metro.noop,\n        onTextareaCreate: Metro.noop\n    };\n\n    Metro.textareaSetup = function (options) {\n        TextareaDefaultConfig = $.extend({}, TextareaDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroTextareaSetup\"] !== undefined) {\n        Metro.textareaSetup(window[\"metroTextareaSetup\"]);\n    }\n\n    Metro.Component('textarea', {\n        init: function( options, elem ) {\n            this._super(elem, options, TextareaDefaultConfig);\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"textarea-create\", {\n                element: element\n            });\n        },\n\n        _createStructure: function(){\n            var that = this, element = this.element, elem = this.elem, o = this.options;\n            var container = $(\"<div>\").addClass(\"textarea \" + element[0].className);\n            var fakeTextarea = $(\"<textarea>\").addClass(\"fake-textarea\");\n            var clearButton;\n\n            container.insertBefore(element);\n            element.appendTo(container);\n            fakeTextarea.appendTo(container);\n\n            if (o.clearButton !== false && !element[0].readOnly) {\n                clearButton = $(\"<button>\").addClass(\"button input-clear-button\").attr(\"tabindex\", -1).attr(\"type\", \"button\").html(o.clearButtonIcon);\n                clearButton.appendTo(container);\n            }\n\n            if (element.attr('dir') === 'rtl' ) {\n                container.addClass(\"rtl\").attr(\"dir\", \"rtl\");\n            }\n\n            if (o.prepend !== \"\") {\n                var prepend = $(\"<div>\").html(o.prepend);\n                prepend.addClass(\"prepend\").addClass(o.clsPrepend).appendTo(container);\n            }\n\n            if (o.append !== \"\") {\n                var append = $(\"<div>\").html(o.append);\n                append.addClass(\"append\").addClass(o.clsAppend).appendTo(container);\n                clearButton.css({\n                    right: append.outerWidth() + 4\n                });\n            }\n\n            elem.className = '';\n            if (o.copyInlineStyles === true) {\n                for (var i = 0, l = elem.style.length; i < l; i++) {\n                    container.css(elem.style[i], element.css(elem.style[i]));\n                }\n            }\n\n            if (Utils.isValue(o.defaultValue) && element.val().trim() === \"\") {\n                element.val(o.defaultValue);\n            }\n\n            container.addClass(o.clsComponent);\n            element.addClass(o.clsTextarea);\n\n            if (o.label) {\n                var label = $(\"<label>\").addClass(\"label-for-input\").addClass(o.clsLabel).html(o.label).insertBefore(container);\n                if (element.attr(\"id\")) {\n                    label.attr(\"for\", element.attr(\"id\"));\n                }\n                if (element.attr(\"dir\") === \"rtl\") {\n                    label.addClass(\"rtl\");\n                }\n            }\n\n            if (element.is(':disabled')) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n\n            fakeTextarea.val(element.val());\n\n            if (o.autoSize === true) {\n                container.addClass(\"autosize no-scroll-vertical\");\n\n                setTimeout(function(){\n                    that.resize();\n                }, 100);\n            }\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n            var textarea = element.closest(\".textarea\");\n            var fakeTextarea = textarea.find(\".fake-textarea\");\n            var chars_counter = $(o.charsCounter);\n\n            textarea.on(Metro.events.click, \".input-clear-button\", function(){\n                element.val(Utils.isValue(o.defaultValue) ? o.defaultValue : \"\").trigger('change').trigger('keyup').focus();\n            });\n\n            if (o.autoSize) {\n                element.on(Metro.events.inputchange + \" \" + Metro.events.keyup, function(){\n                    fakeTextarea.val(this.value);\n                    that.resize();\n                });\n            }\n\n            element.on(Metro.events.blur, function(){textarea.removeClass(\"focused\");});\n            element.on(Metro.events.focus, function(){textarea.addClass(\"focused\");});\n\n            element.on(Metro.events.keyup, function(){\n                if (Utils.isValue(o.charsCounter) && chars_counter.length > 0) {\n                    if (chars_counter[0].tagName === \"INPUT\") {\n                        chars_counter.val(that.length());\n                    } else {\n                        chars_counter.html(o.charsCounterTemplate.replace(\"$1\", that.length()));\n                    }\n                }\n\n                that._fireEvent(\"change\", {\n                    val: element.val(),\n                    length: that.length()\n                });\n\n            })\n        },\n\n        resize: function(){\n            var element = this.element, o = this.options,\n                textarea = element.closest(\".textarea\"),\n                fakeTextarea = textarea.find(\".fake-textarea\"),\n                currentHeight = fakeTextarea[0].scrollHeight;\n\n            if (o.maxHeight && currentHeight >= o.maxHeight) {\n                textarea.removeClass(\"no-scroll-vertical\");\n                return ;\n            }\n\n            if (o.maxHeight && currentHeight < o.maxHeight) {\n                textarea.addClass(\"no-scroll-vertical\");\n            }\n\n            fakeTextarea[0].style.cssText = 'height:auto;';\n            fakeTextarea[0].style.cssText = 'height:' + fakeTextarea[0].scrollHeight + 'px';\n            element[0].style.cssText = 'height:' + fakeTextarea[0].scrollHeight + 'px';\n        },\n\n        clear: function(){\n            this.element.val(\"\").trigger('change').trigger('keyup').focus();\n        },\n\n        toDefault: function(){\n            this.element.val(Utils.isValue(this.options.defaultValue) ? this.options.defaultValue : \"\").trigger('change').trigger('keyup').focus();\n        },\n\n        length: function(){\n            var characters = this.elem.value.split('');\n            return characters.length;\n        },\n\n        disable: function(){\n            this.element.data(\"disabled\", true);\n            this.element.parent().addClass(\"disabled\");\n        },\n\n        enable: function(){\n            this.element.data(\"disabled\", false);\n            this.element.parent().removeClass(\"disabled\");\n        },\n\n        toggleState: function(){\n            if (this.elem.disabled) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        },\n\n        changeAttribute: function(attributeName){\n            switch (attributeName) {\n                case 'disabled': this.toggleState(); break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element, o = this.options;\n            var textarea = element.closest(\".textarea\");\n\n            textarea.off(Metro.events.click, \".input-clear-button\");\n\n            if (o.autoSize) {\n                element.off(Metro.events.inputchange + \" \" + Metro.events.keyup);\n            }\n\n            element.off(Metro.events.blur);\n            element.off(Metro.events.focus);\n\n            element.off(Metro.events.keyup);\n\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var effects = [\n        \"slide-up\", \"slide-down\", \"slide-left\", \"slide-right\", \"fade\", \"zoom\", \"swirl\", \"switch\"\n    ];\n    var TileDefaultConfig = {\n        tileDeferred: 0,\n        size: \"medium\",\n        cover: \"\",\n        coverPosition: \"center\",\n        effect: \"\", // slide-up, slide-down, slide-left, slide-right, fade, zoom, swirl, switch\n        effectInterval: 3000,\n        effectDuration: 500,\n        target: null,\n        canTransform: true,\n        onTileClick: Metro.noop,\n        onTileCreate: Metro.noop\n    };\n\n    Metro.tileSetup = function (options) {\n        TileDefaultConfig = $.extend({}, TileDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroTileSetup\"] !== undefined) {\n        Metro.tileSetup(window[\"metroTileSetup\"]);\n    }\n\n    Metro.Component('tile', {\n        init: function( options, elem ) {\n            this._super(elem, options, TileDefaultConfig, {\n                effectInterval: false,\n                images: [],\n                slides: [],\n                currentSlide: -1,\n                unload: false\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this._createTile();\n            this._createEvents();\n\n            this._fireEvent(\"tile-create\", {\n                element: element\n            });\n        },\n\n        _createTile: function(){\n            function switchImage(el, img_src, i){\n                $.setTimeout(function(){\n                    el.fadeOut(500, function(){\n                        el.css(\"background-image\", \"url(\" + img_src + \")\");\n                        el.fadeIn();\n                    });\n                }, i * 300);\n            }\n\n            var that = this, element = this.element, o = this.options;\n            var slides = element.find(\".slide\");\n            var slides2 = element.find(\".slide-front, .slide-back\");\n\n            element.addClass(\"tile-\" + o.size);\n\n            if (o.effect.indexOf(\"hover-\") > -1) {\n                element.addClass(\"effect-\" + o.effect);\n                $.each(slides2, function(){\n                    var slide = $(this);\n\n                    if (slide.data(\"cover\") !== undefined) {\n                        that._setCover(slide, slide.data(\"cover\"), slide.data(\"cover-position\"));\n                    }\n                })\n            }\n\n            if (effects.includes(o.effect) && slides.length > 1) {\n                $.each(slides, function(i){\n                    var slide = $(this);\n\n                    that.slides.push(this);\n\n                    if (slide.data(\"cover\") !== undefined) {\n                        that._setCover(slide, slide.data(\"cover\"), slide.data(\"cover-position\"));\n                    }\n\n                    if (i > 0) {\n                        if ([\"slide-up\", \"slide-down\"].indexOf(o.effect) > -1) slide.css(\"top\", \"100%\");\n                        if ([\"slide-left\", \"slide-right\"].indexOf(o.effect) > -1) slide.css(\"left\", \"100%\");\n                        if ([\"fade\", \"zoom\", \"swirl\", \"switch\"].indexOf(o.effect) > -1) slide.css(\"opacity\", 0);\n                    }\n                });\n\n                this.currentSlide = 0;\n\n                this._runEffects();\n            }\n\n            if (o.cover !== \"\") {\n                this._setCover(element, o.cover);\n            }\n\n            if (o.effect === \"image-set\") {\n                element.addClass(\"image-set\");\n\n                $.each(element.children(\"img\"), function(){\n                    that.images.push(this);\n                    $(this).remove();\n                });\n\n                var temp = this.images.slice();\n\n                for(var i = 0; i < 5; i++) {\n                    var rnd_index = $.random(0, temp.length - 1);\n                    var div = $(\"<div>\").addClass(\"img -js-img-\"+i).css(\"background-image\", \"url(\"+temp[rnd_index].src+\")\");\n                    element.prepend(div);\n                    temp.splice(rnd_index, 1);\n                }\n\n                var a = [0, 1, 4, 3, 2];\n\n                $.setInterval(function(){\n                    var temp = that.images.slice();\n                    var bg = Metro.colors.random();\n\n                    element.css(\"background-color\", bg);\n\n                    for(var i = 0; i < a.length; i++) {\n                        var rnd_index = $.random(0, temp.length - 1);\n                        var div = element.find(\".-js-img-\"+a[i]);\n                        switchImage(div, temp[rnd_index].src, i);\n                        temp.splice(rnd_index, 1);\n                    }\n\n                    a = a.reverse();\n                }, 5000);\n            }\n        },\n\n        _runEffects: function(){\n            var that = this, o = this.options;\n\n            if (this.effectInterval === false) this.effectInterval = $.setInterval(function(){\n                var current, next;\n\n                current = $(that.slides[that.currentSlide]);\n\n                that.currentSlide++;\n                if (that.currentSlide === that.slides.length) {\n                    that.currentSlide = 0;\n                }\n\n                next = that.slides[that.currentSlide];\n\n                if (effects.includes(o.effect)) {\n                    Metro.animations[Cake.camelCase(o.effect)]($(current), $(next), {duration: o.effectDuration});\n                }\n\n            }, o.effectInterval);\n        },\n\n        _stopEffects: function(){\n            $.clearInterval(this.effectInterval);\n            this.effectInterval = false;\n        },\n\n        _setCover: function(to, src, pos){\n            if (!Utils.isValue(pos)) {\n                pos = this.options.coverPosition;\n            }\n            to.css({\n                backgroundImage: \"url(\"+src+\")\",\n                backgroundSize: \"cover\",\n                backgroundRepeat: \"no-repeat\",\n                backgroundPosition: pos\n            });\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options;\n\n            element.on(Metro.events.startAll, function(e){\n                var tile = $(this);\n                var dim = {w: element.width(), h: element.height()};\n                var X = Utils.pageXY(e).x - tile.offset().left,\n                    Y = Utils.pageXY(e).y - tile.offset().top;\n                var side;\n\n                if (Utils.isRightMouse(e) === false) {\n\n                    if (X < dim.w * 1 / 3 && (Y < dim.h * 1 / 2 || Y > dim.h * 1 / 2)) {\n                        side = 'left';\n                    } else if (X > dim.w * 2 / 3 && (Y < dim.h * 1 / 2 || Y > dim.h * 1 / 2)) {\n                        side = 'right';\n                    } else if (X > dim.w * 1 / 3 && X < dim.w * 2 / 3 && Y > dim.h / 2) {\n                        side = 'bottom';\n                    } else {\n                        side = \"top\";\n                    }\n\n                    if (o.canTransform === true) tile.addClass(\"transform-\" + side);\n\n                    if (o.target !== null) {\n                        setTimeout(function(){\n                            document.location.href = o.target;\n                        }, 100);\n                    }\n\n                    that._fireEvent(\"tile-click\", {\n                        side: side\n                    });\n                }\n            });\n\n            element.on([Metro.events.stopAll, Metro.events.leave].join(\" \"), function(){\n                $(this)\n                    .removeClass(\"transform-left\")\n                    .removeClass(\"transform-right\")\n                    .removeClass(\"transform-top\")\n                    .removeClass(\"transform-bottom\");\n            });\n        },\n\n        changeAttribute: function(){\n        },\n\n        destroy: function(){\n            var element = this.element;\n\n            element.off(Metro.events.startAll);\n\n            element.off([Metro.events.stopAll, Metro.events.leave].join(\" \"));\n\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var TimePickerDefaultConfig = {\n        label: \"\",\n        timepickerDeferred: 0,\n        hoursStep: 1,\n        minutesStep: 1,\n        secondsStep: 1,\n        value: null,\n        locale: METRO_LOCALE,\n        distance: 3,\n        hours: true,\n        minutes: true,\n        seconds: true,\n        showLabels: true,\n        scrollSpeed: 4,\n        copyInlineStyles: false,\n        clsPicker: \"\",\n        clsPart: \"\",\n        clsHours: \"\",\n        clsMinutes: \"\",\n        clsSeconds: \"\",\n        clsLabel: \"\",\n        clsButton: \"\",\n        clsOkButton: \"\",\n        clsCancelButton: \"\",\n        okButtonIcon: \"<span class='default-icon-check'></span>\",\n        cancelButtonIcon: \"<span class='default-icon-cross'></span>\",\n        onSet: Metro.noop,\n        onOpen: Metro.noop,\n        onClose: Metro.noop,\n        onScroll: Metro.noop,\n        onTimePickerCreate: Metro.noop\n    };\n\n    Metro.timePickerSetup = function (options) {\n        TimePickerDefaultConfig = $.extend({}, TimePickerDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroTimePickerSetup\"] !== undefined) {\n        Metro.timePickerSetup(window[\"metroTimePickerSetup\"]);\n    }\n\n    Metro.Component('time-picker', {\n        init: function( options, elem ) {\n            this._super(elem, options, TimePickerDefaultConfig, {\n                picker: null,\n                isOpen: false,\n                value: [],\n                locale: Metro.locales[METRO_LOCALE]['calendar'],\n                listTimer: {\n                    hours: null,\n                    minutes: null,\n                    seconds: null\n                },\n                id: Utils.elementId(\"time-picker\")\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n            var i;\n\n            if (o.distance < 1) {\n                o.distance = 1;\n            }\n\n            if (o.hoursStep < 1) {o.hoursStep = 1;}\n            if (o.hoursStep > 23) {o.hoursStep = 23;}\n\n            if (o.minutesStep < 1) {o.minutesStep = 1;}\n            if (o.minutesStep > 59) {o.minutesStep = 59;}\n\n            if (o.secondsStep < 1) {o.secondsStep = 1;}\n            if (o.secondsStep > 59) {o.secondsStep = 59;}\n\n            if (element.val() === \"\" && (!Utils.isValue(o.value))) {\n                o.value = datetime().format(\"HH:mm:ss\");\n            }\n\n            this.value = (element.val() !== \"\" ? element.val() : \"\"+o.value).toArray(\":\");\n\n            for(i = 0; i < 3; i++) {\n                if (this.value[i] === undefined || this.value[i] === null) {\n                    this.value[i] = 0;\n                } else {\n                    this.value[i] = parseInt(this.value[i]);\n                }\n            }\n\n            this._normalizeValue();\n\n            if (Metro.locales[o.locale] === undefined) {\n                o.locale = METRO_LOCALE;\n            }\n\n            this.locale = Metro.locales[o.locale]['calendar'];\n\n            this._createStructure();\n            this._createEvents();\n            this._set();\n\n            this._fireEvent(\"time-picker-create\", {\n                element: element\n            });\n        },\n\n        _normalizeValue: function(){\n            var o = this.options;\n\n            if (o.hoursStep > 1) {\n                this.value[0] = Utils.nearest(this.value[0], o.hoursStep, true);\n            }\n            if (o.minutesStep > 1) {\n                this.value[1] = Utils.nearest(this.value[1], o.minutesStep, true);\n            }\n            if (o.minutesStep > 1) {\n                this.value[2] = Utils.nearest(this.value[2], o.secondsStep, true);\n            }\n        },\n\n        _createStructure: function(){\n            var element = this.element, o = this.options;\n            var picker, hours, minutes, seconds, i;\n            var timeWrapper, selectWrapper, selectBlock, actionBlock;\n\n            picker = $(\"<div>\").addClass(\"wheel-picker time-picker \" + element[0].className).addClass(o.clsPicker);\n\n            picker.insertBefore(element);\n            element.attr(\"readonly\", true).appendTo(picker);\n\n            if (o.label) {\n                var label = $(\"<label>\").addClass(\"label-for-input\").addClass(o.clsLabel).html(o.label).insertBefore(picker);\n                if (element.attr(\"id\")) {\n                    label.attr(\"for\", element.attr(\"id\"));\n                }\n                if (element.attr(\"dir\") === \"rtl\") {\n                    label.addClass(\"rtl\");\n                }\n            }\n\n            timeWrapper = $(\"<div>\").addClass(\"time-wrapper\").appendTo(picker);\n\n            if (o.hours === true) {\n                hours = $(\"<div>\").attr(\"data-title\", this.locale['time']['hours']).addClass(\"hours\").addClass(o.clsPart).addClass(o.clsHours).appendTo(timeWrapper);\n            }\n            if (o.minutes === true) {\n                minutes = $(\"<div>\").attr(\"data-title\", this.locale['time']['minutes']).addClass(\"minutes\").addClass(o.clsPart).addClass(o.clsMinutes).appendTo(timeWrapper);\n            }\n            if (o.seconds === true) {\n                seconds = $(\"<div>\").attr(\"data-title\", this.locale['time']['seconds']).addClass(\"seconds\").addClass(o.clsPart).addClass(o.clsSeconds).appendTo(timeWrapper);\n            }\n\n            selectWrapper = $(\"<div>\").addClass(\"select-wrapper\").appendTo(picker);\n\n            selectBlock = $(\"<div>\").addClass(\"select-block\").appendTo(selectWrapper);\n            if (o.hours === true) {\n                hours = $(\"<ul>\").addClass(\"sel-hours\").appendTo(selectBlock);\n                for (i = 0; i < o.distance; i++) $(\"<li>\").html(\"&nbsp;\").data(\"value\", -1).appendTo(hours);\n                for (i = 0; i < 24; i = i + o.hoursStep) {\n                    $(\"<li>\").addClass(\"js-hours-\"+i).html(Cake.lpad(i, 2, \"0\")).data(\"value\", i).appendTo(hours);\n                }\n                for (i = 0; i < o.distance; i++) $(\"<li>\").html(\"&nbsp;\").data(\"value\", -1).appendTo(hours);\n            }\n            if (o.minutes === true) {\n                minutes = $(\"<ul>\").addClass(\"sel-minutes\").appendTo(selectBlock);\n                for (i = 0; i < o.distance; i++) $(\"<li>\").html(\"&nbsp;\").data(\"value\", -1).appendTo(minutes);\n                for (i = 0; i < 60; i = i + o.minutesStep) {\n                    $(\"<li>\").addClass(\"js-minutes-\"+i).html(Cake.lpad(i, 2, \"0\")).data(\"value\", i).appendTo(minutes);\n                }\n                for (i = 0; i < o.distance; i++) $(\"<li>\").html(\"&nbsp;\").data(\"value\", -1).appendTo(minutes);\n            }\n            if (o.seconds === true) {\n                seconds = $(\"<ul>\").addClass(\"sel-seconds\").appendTo(selectBlock);\n                for (i = 0; i < o.distance; i++) $(\"<li>\").html(\"&nbsp;\").data(\"value\", -1).appendTo(seconds);\n                for (i = 0; i < 60; i = i + o.secondsStep) {\n                    $(\"<li>\").addClass(\"js-seconds-\"+i).html(Cake.lpad(i, 2, \"0\")).data(\"value\", i).appendTo(seconds);\n                }\n                for (i = 0; i < o.distance; i++) $(\"<li>\").html(\"&nbsp;\").data(\"value\", -1).appendTo(seconds);\n            }\n\n            selectBlock.height((o.distance * 2 + 1) * 40);\n\n            actionBlock = $(\"<div>\").addClass(\"action-block\").appendTo(selectWrapper);\n            $(\"<button>\").attr(\"type\", \"button\").addClass(\"button action-ok\").addClass(o.clsButton).addClass(o.clsOkButton).html(o.okButtonIcon).appendTo(actionBlock);\n            $(\"<button>\").attr(\"type\", \"button\").addClass(\"button action-cancel\").addClass(o.clsButton).addClass(o.clsCancelButton).html(o.cancelButtonIcon).appendTo(actionBlock);\n\n\n            element[0].className = '';\n            if (o.copyInlineStyles === true) {\n                for (i = 0; i < element[0].style.length; i++) {\n                    picker.css(element[0].style[i], element.css(element[0].style[i]));\n                }\n            }\n\n            if (o.showLabels === true) {\n                picker.addClass(\"show-labels\");\n            }\n\n            if (element.prop(\"disabled\")) {\n                picker.addClass(\"disabled\");\n            }\n\n            this.picker = picker;\n        },\n\n        _createEvents: function(){\n            var that = this, o = this.options;\n            var picker = this.picker;\n\n            picker.on(Metro.events.start, \".select-block ul\", function(e){\n\n                if (e.changedTouches) {\n                    return ;\n                }\n\n                var target = this;\n                var pageY = Utils.pageXY(e).y;\n\n                $(document).on(Metro.events.move, function(e){\n\n                    target.scrollTop -= o.scrollSpeed * (pageY  > Utils.pageXY(e).y ? -1 : 1);\n\n                    pageY = Utils.pageXY(e).y;\n                }, {ns: that.id});\n\n                $(document).on(Metro.events.stop, function(){\n                    $(document).off(Metro.events.move, {ns: that.id});\n                    $(document).off(Metro.events.stop, {ns: that.id});\n                }, {ns: that.id});\n            });\n\n            picker.on(Metro.events.click, function(e){\n                if (that.isOpen === false) that.open();\n                e.stopPropagation();\n            });\n\n            picker.on(Metro.events.click, \".action-ok\", function(e){\n                var h, m, s;\n                var sh = picker.find(\".sel-hours li.active\"),\n                    sm = picker.find(\".sel-minutes li.active\"),\n                    ss = picker.find(\".sel-seconds li.active\");\n\n                h = sh.length === 0 ? 0 : sh.data(\"value\");\n                m = sm.length === 0 ? 0 : sm.data(\"value\");\n                s = ss.length === 0 ? 0 : ss.data(\"value\");\n\n                that.value = [h, m, s];\n                that._normalizeValue();\n                that._set();\n\n                that.close();\n                e.stopPropagation();\n            });\n\n            picker.on(Metro.events.click, \".action-cancel\", function(e){\n                that.close();\n                e.stopPropagation();\n            });\n\n            var scrollLatency = 150;\n            $.each(['hours', 'minutes', 'seconds'], function(){\n                var part = this, list = picker.find(\".sel-\"+part);\n\n                list.on(\"scroll\", function(){\n                    if (!that.isOpen) {\n                        return ;\n                    }\n\n                    if (that.listTimer[part]) {\n                        clearTimeout(that.listTimer[part]);\n                        that.listTimer[part] = null;\n                    }\n\n                    if (!that.listTimer[part]) that.listTimer[part] = setTimeout(function () {\n\n                        var target, targetElement, scrollTop;\n\n                        that.listTimer[part] = null;\n\n                        target = Math.round((Math.ceil(list.scrollTop()) / 40));\n\n                        if (part === \"hours\" && o.hoursStep) {\n                            target *= parseInt(o.hoursStep);\n                        }\n                        if (part === \"minutes\" && o.minutesStep) {\n                            target *= parseInt(o.minutesStep);\n                        }\n                        if (part === \"seconds\" && o.secondsStep) {\n                            target *= parseInt(o.secondsStep);\n                        }\n\n                        targetElement = list.find(\".js-\" + part + \"-\" + target);\n                        scrollTop = targetElement.position().top - (o.distance * 40);\n\n                        list.find(\".active\").removeClass(\"active\");\n\n                        list[0].scrollTop = scrollTop;\n                        targetElement.addClass(\"active\");\n                        Utils.exec(o.onScroll, [targetElement, list, picker], list[0]);\n\n                    }, scrollLatency);\n\n                })\n            });\n        },\n\n        _set: function(){\n            var element = this.element, o = this.options;\n            var picker = this.picker;\n            var h = \"00\", m = \"00\", s = \"00\";\n\n            if (o.hours === true) {\n                h = parseInt(this.value[0]);\n                picker.find(\".hours\").html(Cake.lpad(h, 2, \"0\"));\n            }\n            if (o.minutes === true) {\n                m = parseInt(this.value[1]);\n                picker.find(\".minutes\").html(Cake.lpad(m, 2, \"0\"));\n            }\n            if (o.seconds === true) {\n                s = parseInt(this.value[2]);\n                picker.find(\".seconds\").html(Cake.lpad(s, 2, \"0\"));\n            }\n\n            element.val([h, m, s].join(\":\")).trigger(\"change\");\n\n            this._fireEvent(\"set\", {\n                val: this.value,\n                elementVal: element.val()\n            });\n\n        },\n\n        open: function(){\n            var o = this.options;\n            var picker = this.picker;\n            var h, m, s;\n            var h_list, m_list, s_list;\n            var items = picker.find(\"li\");\n            var select_wrapper = picker.find(\".select-wrapper\");\n            var select_wrapper_in_viewport, select_wrapper_rect;\n            var h_item, m_item, s_item;\n\n            select_wrapper.parent().removeClass(\"for-top for-bottom\");\n            select_wrapper.show(0);\n            items.removeClass(\"active\");\n\n            select_wrapper_in_viewport = Utils.inViewport(select_wrapper[0]);\n            select_wrapper_rect = Utils.rect(select_wrapper[0]);\n\n            if (!select_wrapper_in_viewport && select_wrapper_rect.top > 0) {\n                select_wrapper.parent().addClass(\"for-bottom\");\n            }\n\n            if (!select_wrapper_in_viewport && select_wrapper_rect.top < 0) {\n                select_wrapper.parent().addClass(\"for-top\");\n            }\n\n            var animateList = function(list, item){\n                list\n                    .scrollTop(0)\n                    .animate({\n                        draw: {\n                            scrollTop: item.position().top - (o.distance * 40) + list.scrollTop()\n                        },\n                        dur: 100\n                    });\n            };\n\n            if (o.hours === true) {\n                h = parseInt(this.value[0]);\n                h_list = picker.find(\".sel-hours\");\n                h_item = h_list.find(\"li.js-hours-\" + h).addClass(\"active\");\n                animateList(h_list, h_item);\n            }\n            if (o.minutes === true) {\n                m = parseInt(this.value[1]);\n                m_list = picker.find(\".sel-minutes\");\n                m_item = m_list.find(\"li.js-minutes-\" + m).addClass(\"active\");\n                animateList(m_list, m_item);\n            }\n            if (o.seconds === true) {\n                s = parseInt(this.value[2]);\n                s_list = picker.find(\".sel-seconds\");\n                s_item = s_list.find(\"li.js-seconds-\" + s).addClass(\"active\");\n                animateList(s_list, s_item);\n            }\n\n            this.isOpen = true;\n\n            this._fireEvent(\"open\", {\n                val: this.value\n            });\n\n        },\n\n        close: function(){\n            var picker = this.picker;\n            picker.find(\".select-wrapper\").hide(0);\n            this.isOpen = false;\n\n            this._fireEvent(\"close\", {\n                val: this.value\n            });\n        },\n\n        _convert: function(t){\n            var result;\n\n            if (Array.isArray(t)) {\n                result = t;\n            } else if (typeof  t.getMonth === 'function') {\n                result = [t.getHours(), t.getMinutes(), t.getSeconds()];\n            } else if (Utils.isObject(t)) {\n                result = [t.h, t.m, t.s];\n            } else {\n                result = t.toArray(\":\");\n            }\n\n            return result;\n        },\n\n        val: function(t){\n            if (t === undefined) {\n                return this.element.val();\n            }\n            this.value = this._convert(t);\n            this._normalizeValue();\n            this._set();\n        },\n\n        time: function(t){\n            if (t === undefined) {\n                return {\n                    h: this.value[0],\n                    m: this.value[1],\n                    s: this.value[2]\n                }\n            }\n\n            this.value = this._convert(t);\n            this._normalizeValue();\n            this._set();\n        },\n\n        date: function(t){\n            if (t === undefined || typeof t.getMonth !== 'function') {\n                return datetime()\n                    .hour(this.value[0])\n                    .minute(this.value[1])\n                    .second(this.value[2])\n                    .ms(0)\n                    .val();\n            }\n\n            this.value = this._convert(t);\n            this._normalizeValue();\n            this._set();\n        },\n\n        disable: function(){\n            this.element.data(\"disabled\", true);\n            this.element.parent().addClass(\"disabled\");\n        },\n\n        enable: function(){\n            this.element.data(\"disabled\", false);\n            this.element.parent().removeClass(\"disabled\");\n        },\n\n        toggleState: function(){\n            if (this.elem.disabled) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        },\n\n        changeAttribute: function(attr, newValue){\n            switch (attr) {\n                case \"data-value\":\n                    this.val(newValue);\n                    break;\n                case \"disabled\":\n                    this.toggleState();\n                    break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element;\n            var picker = this.picker;\n\n            $.each(['hours', 'minutes', 'seconds'], function(){\n                picker.find(\".sel-\"+this).off(\"scroll\");\n            });\n\n            picker.off(Metro.events.start, \".select-block ul\");\n            picker.off(Metro.events.click);\n            picker.off(Metro.events.click, \".action-ok\");\n            picker.off(Metro.events.click, \".action-cancel\");\n\n            return element;\n        }\n\n    });\n\n    $(document).on(Metro.events.click, function(){\n        $.each($(\".time-picker\"), function(){\n            $(this).find(\"input\").each(function(){\n                Metro.getPlugin(this, \"timepicker\").close();\n            });\n        });\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var ToastDefaultConfig = {\n        callback: Metro.noop,\n        timeout: METRO_TIMEOUT,\n        distance: 20,\n        showTop: false,\n        clsToast: \"\"\n    };\n\n    Metro.toastSetup = function(options){\n        ToastDefaultConfig = $.extend({}, ToastDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroToastSetup\"] !== undefined) {\n        Metro.toastSetup(window[\"metroToastSetup\"]);\n    }\n\n    var Toast = {\n        create: function(message, /*callback, timeout, cls, */options){\n            var o, toast, width;\n            var args = Array.from(arguments);\n            var timeout, callback, cls;\n\n            if (!$.isPlainObject(options)) {\n                options = args[4];\n                callback = args[1];\n                timeout = args[2];\n                cls = args[3];\n            }\n\n            o = $.extend({}, ToastDefaultConfig, options);\n\n            toast = $(\"<div>\").addClass(\"toast\").html(message).appendTo($(\"body\"));\n            width = toast.outerWidth();\n            toast.hide();\n\n            timeout = timeout || o.timeout;\n            callback = callback || o.callback;\n            cls = cls || o.clsToast;\n\n            if (o.showTop === true) {\n                toast.addClass(\"show-top\").css({\n                    top: o.distance\n                });\n            } else {\n                toast.css({\n                    bottom: o.distance\n                })\n            }\n\n            toast\n                .css({\n                    'left': '50%',\n                    'margin-left': -(width / 2)\n                })\n                .addClass(o.clsToast)\n                .addClass(cls)\n                .fadeIn(METRO_ANIMATION_DURATION, function(){\n                    setTimeout(function(){\n                        Toast.remove(toast, callback);\n                    }, timeout);\n                });\n        },\n\n        remove: function(toast, cb){\n            if (!toast) return ;\n\n            toast.fadeOut(METRO_ANIMATION_DURATION, function(){\n                toast.remove();\n                Utils.exec(cb, null, toast[0]);\n            });\n        }\n    };\n\n    Metro['toast'] = Toast;\n    Metro['createToast'] = Toast.create;\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n\n    var TokenizerDefaultConfig = {\n        textToTokenize: \"\",\n        spaceSymbol: \"\",\n        spaceClass: \"space\",\n        tokenClass: \"\",\n        splitter: \"\",\n        tokenElement: \"span\",\n        useTokenSymbol: true,\n        useTokenIndex: true,\n        clsTokenizer: \"\",\n        clsToken: \"\",\n        clsTokenOdd: \"\",\n        clsTokenEven: \"\",\n        onTokenCreate: Metro.noop,\n        onTokenize: Metro.noop,\n        onTokenizerCreate: Metro.noop\n    };\n\n    Metro.tokenizerSetup = function (options) {\n        TokenizerDefaultConfig = $.extend({}, TokenizerDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroTokenizerSetup\"] !== undefined) {\n        Metro.tokenizerSetup(window[\"metroTokenizerSetup\"]);\n    }\n\n    Metro.Component('tokenizer', {\n        init: function( options, elem ) {\n            this._super(elem, options, TokenizerDefaultConfig, {\n                // define instance vars here\n                originalText: \"\"\n            });\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n            this.originalText = o.textToTokenize ? o.textToTokenize.trim() : element.text().trim().replace(/[\\r\\n\\t]/gi, '').replace(/\\s\\s+/g, \" \");\n\n            this._createStructure();\n            this._fireEvent('tokenizer-create');\n        },\n\n        _tokenize: function(){\n            var that = this, element = this.element, o = this.options;\n            var index = 0, append, prepend;\n\n            element.clear().attr(\"aria-label\", this.originalText);\n\n            $.each(this.originalText.split(o.splitter), function(i){\n                var symbol = this;\n                var isSpace = symbol === \" \";\n                var token;\n\n                token = $(\"<\"+o.tokenElement+\">\")\n                    .html(isSpace ? o.spaceSymbol : symbol)\n                    .attr(\"aria-hidden\", true)\n                    .addClass(isSpace ? o.spaceClass : \"\")\n                    .addClass(isSpace && o.useTokenSymbol ? \"\" : \"ts-\"+symbol.replace(\" \", \"_\"))\n                    .addClass(isSpace && o.useTokenIndex ? \"\" : \"ti-\" + (i + 1))\n                    .addClass(o.tokenClass ? o.tokenClass : \"\")\n                    .addClass(!isSpace ? o.clsToken : \"\");\n\n                if (!isSpace) {\n                    index++;\n                    token.addClass(index % 2 === 0 ? \"te-even\" : \"te-odd\");\n                    token.addClass(index % 2 === 0 ? o.clsTokenEven : o.clsTokenOdd);\n                }\n\n                if (o.prepend) {\n                    prepend = $.isSelector(o.prepend) ? $(o.prepend) : $(\"<span>\").html(o.prepend);\n                    token.prepend(prepend);\n                }\n\n                if (o.append) {\n                    append = $.isSelector(o.append) ? $(o.append) : $(\"<span>\").html(o.append);\n                    token.append(append);\n                }\n\n                element.append(token);\n\n                that._fireEvent(\"token-create\", {\n                    token: token[0]\n                });\n            });\n\n            that._fireEvent(\"tokenize\", {\n                tokens: element.children().items(),\n                originalText: this.originalText\n            });\n        },\n\n        _createStructure: function(){\n            var element = this.element,  o = this.options;\n            element.addClass(o.clsTokenizer);\n            this._tokenize();\n        },\n\n        tokenize: function(v){\n            this.originalText = v;\n            this._tokenize();\n        },\n\n        destroy: function(){\n            this.element.remove();\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var TouchConst = {\n        LEFT : \"left\",\n        RIGHT : \"right\",\n        UP : \"up\",\n        DOWN : \"down\",\n        IN : \"in\",\n        OUT : \"out\",\n        NONE : \"none\",\n        AUTO : \"auto\",\n        SWIPE : \"swipe\",\n        PINCH : \"pinch\",\n        TAP : \"tap\",\n        DOUBLE_TAP : \"doubletap\",\n        LONG_TAP : \"longtap\",\n        HOLD : \"hold\",\n        HORIZONTAL : \"horizontal\",\n        VERTICAL : \"vertical\",\n        ALL_FINGERS : \"all\",\n        DOUBLE_TAP_THRESHOLD : 10,\n        PHASE_START : \"start\",\n        PHASE_MOVE : \"move\",\n        PHASE_END : \"end\",\n        PHASE_CANCEL : \"cancel\",\n        SUPPORTS_TOUCH : 'ontouchstart' in window,\n        SUPPORTS_POINTER_IE10 : window.navigator.msPointerEnabled && !window.navigator.pointerEnabled && !('ontouchstart' in window),\n        SUPPORTS_POINTER : (window.navigator.pointerEnabled || window.navigator.msPointerEnabled) && !('ontouchstart' in window),\n        IN_TOUCH: \"intouch\"\n    };\n\n    var TouchDefaultConfig = {\n        touchDeferred: 0,\n        fingers: 1,\n        threshold: 75,\n        cancelThreshold: null,\n        pinchThreshold: 20,\n        maxTimeThreshold: null,\n        fingerReleaseThreshold: 250,\n        longTapThreshold: 500,\n        doubleTapThreshold: 200,\n        triggerOnTouchEnd: true,\n        triggerOnTouchLeave: false,\n        allowPageScroll: \"auto\",\n        fallbackToMouseEvents: true,\n        excludedElements: \".no-swipe\",\n        preventDefaultEvents: true,\n\n        onSwipe: Metro.noop,\n        onSwipeLeft: Metro.noop,\n        onSwipeRight: Metro.noop,\n        onSwipeUp: Metro.noop,\n        onSwipeDown: Metro.noop,\n        onSwipeStatus: Metro.noop_true, // params: phase, direction, distance, duration, fingerCount, fingerData, currentDirection\n        onPinchIn: Metro.noop,\n        onPinchOut: Metro.noop,\n        onPinchStatus: Metro.noop_true,\n        onTap: Metro.noop,\n        onDoubleTap: Metro.noop,\n        onLongTap: Metro.noop,\n        onHold: Metro.noop,\n\n        onTouchCreate: Metro.noop\n    };\n\n    Metro.touchSetup = function (options) {\n        TouchDefaultConfig = $.extend({}, TouchDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroTouchSetup\"] !== undefined) {\n        Metro.touchSetup(window[\"metroTouchSetup\"]);\n    }\n\n    Metro.Component('touch', {\n        init: function( options, elem ) {\n            this._super(elem, options, TouchDefaultConfig, {\n                useTouchEvents: null,\n                START_EV: null,\n                MOVE_EV: null,\n                END_EV: null,\n                LEAVE_EV: null,\n                CANCEL_EV: null,\n\n                distance: 0,\n                direction: null,\n                currentDirection: null,\n                duration: 0,\n                startTouchesDistance: 0,\n                endTouchesDistance: 0,\n                pinchZoom: 1,\n                pinchDistance: 0,\n                pinchDirection: 0,\n                maximumsMap: null,\n\n                phase: \"start\",\n\n                fingerCount: 0,\n\n                fingerData: {},\n\n                startTime: 0,\n                endTime: 0,\n                previousTouchEndTime: 0,\n                fingerCountAtRelease: 0,\n                doubleTapStartTime: 0,\n\n                singleTapTimeout: null,\n                holdTimeout: null\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var that = this, element = this.element, o = this.options;\n\n            this.useTouchEvents = (TouchConst.SUPPORTS_TOUCH || TouchConst.SUPPORTS_POINTER || !this.options.fallbackToMouseEvents);\n            this.START_EV = this.useTouchEvents ? (TouchConst.SUPPORTS_POINTER ? (TouchConst.SUPPORTS_POINTER_IE10 ? 'MSPointerDown' : 'pointerdown') : 'touchstart') : 'mousedown';\n            this.MOVE_EV = this.useTouchEvents ? (TouchConst.SUPPORTS_POINTER ? (TouchConst.SUPPORTS_POINTER_IE10 ? 'MSPointerMove' : 'pointermove') : 'touchmove') : 'mousemove';\n            this.END_EV = this.useTouchEvents ? (TouchConst.SUPPORTS_POINTER ? (TouchConst.SUPPORTS_POINTER_IE10 ? 'MSPointerUp' : 'pointerup') : 'touchend') : 'mouseup';\n            this.LEAVE_EV = this.useTouchEvents ? (TouchConst.SUPPORTS_POINTER ? 'mouseleave' : null) : 'mouseleave'; //we manually detect leave on touch devices, so null event here\n            this.CANCEL_EV = (TouchConst.SUPPORTS_POINTER ? (TouchConst.SUPPORTS_POINTER_IE10 ? 'MSPointerCancel' : 'pointercancel') : 'touchcancel');\n\n            if (o.allowPageScroll === undefined && (o.onSwipe !== Metro.noop || o.onSwipeStatus !== Metro.noop)) {\n                o.allowPageScroll = TouchConst.NONE;\n            }\n\n            try {\n                element.on(this.START_EV, $.proxy(this.touchStart, that));\n                element.on(this.CANCEL_EV, $.proxy(this.touchCancel, that));\n            } catch (e) {\n                throw new Error('Events not supported ' + this.START_EV + ',' + this.CANCEL_EV + ' on Swipe');\n            }\n\n            this._fireEvent(\"touch-create\", {\n                element: element\n            });\n        },\n\n        touchStart: function(e) {\n            var element = this.element, options = this.options;\n\n            //If we already in a touch event (a finger already in use) then ignore subsequent ones..\n            if (this.getTouchInProgress()) {\n                return;\n            }\n\n            //Check if this element matches any in the excluded elements selectors,  or its parent is excluded, if so, DON'T swipe\n            if ($(e.target).closest(options.excludedElements).length > 0) {\n                return;\n            }\n\n            //As we use Jquery bind for events, we need to target the original event object\n            //If these events are being programmatically triggered, we don't have an original event object, so use the Jq one.\n            var event = e;\n\n            var ret,\n                touches = event.touches,\n                evt = touches ? touches[0] : event;\n\n            this.phase = TouchConst.PHASE_START;\n\n            //If we support touches, get the finger count\n            if (touches) {\n                // get the total number of fingers touching the screen\n                this.fingerCount = touches.length;\n            }\n            //Else this is the desktop, so stop the browser from dragging content\n            else if (options.preventDefaultEvents !== false) {\n                e.preventDefault(); //call this on jq event so we are cross browser\n            }\n\n            //clear vars..\n            this.distance = 0;\n            this.direction = null;\n            this.currentDirection=null;\n            this.pinchDirection = null;\n            this.duration = 0;\n            this.startTouchesDistance = 0;\n            this.endTouchesDistance = 0;\n            this.pinchZoom = 1;\n            this.pinchDistance = 0;\n            this.maximumsMap = this.createMaximumsData();\n            this.cancelMultiFingerRelease();\n\n            //Create the default finger data\n            this.createFingerData(0, evt);\n\n            // check the number of fingers is what we are looking for, or we are capturing pinches\n            if (!touches || (this.fingerCount === options.fingers || options.fingers === TouchConst.ALL_FINGERS) || this.hasPinches()) {\n                // get the coordinates of the touch\n                this.startTime = this.getTimeStamp();\n\n                if (this.fingerCount === 2) {\n                    //Keep track of the initial pinch distance, so we can calculate the diff later\n                    //Store second finger data as start\n                    this.createFingerData(1, touches[1]);\n                    this.startTouchesDistance = this.endTouchesDistance = this.calculateTouchesDistance(this.fingerData[0].start, this.fingerData[1].start);\n                }\n\n                if (options.onSwipeStatus !== Metro.noop || options.onPinchStatus !== Metro.noop) {\n                    ret = this.triggerHandler(event, this.phase);\n                }\n            } else {\n                //A touch with more or less than the fingers we are looking for, so cancel\n                ret = false;\n            }\n\n            //If we have a return value from the users handler, then return and cancel\n            if (ret === false) {\n                this.phase = TouchConst.PHASE_CANCEL;\n                this.triggerHandler(event, this.phase);\n                return ret;\n            } else {\n                if (options.onHold !== Metro.noop) {\n                    this.holdTimeout = setTimeout($.proxy(function() {\n                        //Trigger the event\n                        element.trigger('hold', [event.target]);\n                        //Fire the callback\n                        if (options.onHold !== Metro.noop) { // TODO Remove this if\n                            ret = Utils.exec(options.onHold, [event, event.target], element[0]);\n                            element.fire(\"hold\", {\n                                event: event,\n                                target: event.target\n                            });\n                        }\n                    }, this), options.longTapThreshold);\n                }\n\n                this.setTouchInProgress(true);\n            }\n\n            return null;\n        },\n\n        touchMove: function(e) {\n            //As we use Jquery bind for events, we need to target the original event object\n            //If these events are being programmatically triggered, we don't have an original event object, so use the Jq one.\n            var event = e;\n\n            //If we are ending, cancelling, or within the threshold of 2 fingers being released, don't track anything..\n            if (this.phase === TouchConst.PHASE_END || this.phase === TouchConst.PHASE_CANCEL || this.inMultiFingerRelease())\n                return;\n\n            var ret,\n                touches = event.touches,\n                evt = touches ? touches[0] : event;\n\n            //Update the  finger data\n            var currentFinger = this.updateFingerData(evt);\n            this.endTime = this.getTimeStamp();\n\n            if (touches) {\n                this.fingerCount = touches.length;\n            }\n\n            if (this.options.onHold !== Metro.noop) {\n                clearTimeout(this.holdTimeout);\n            }\n\n            this.phase = TouchConst.PHASE_MOVE;\n\n            //If we have 2 fingers get Touches distance as well\n            if (this.fingerCount === 2) {\n\n                //Keep track of the initial pinch distance, so we can calculate the diff later\n                //We do this here as well as the start event, in case they start with 1 finger, and the press 2 fingers\n                if (this.startTouchesDistance === 0) {\n                    //Create second finger if this is the first time...\n                    this.createFingerData(1, touches[1]);\n\n                    this.startTouchesDistance = this.endTouchesDistance = this.calculateTouchesDistance(this.fingerData[0].start, this.fingerData[1].start);\n                } else {\n                    //Else just update the second finger\n                    this.updateFingerData(touches[1]);\n\n                    this.endTouchesDistance = this.calculateTouchesDistance(this.fingerData[0].end, this.fingerData[1].end);\n                    this.pinchDirection = this.calculatePinchDirection(this.fingerData[0].end, this.fingerData[1].end);\n                }\n\n                this.pinchZoom = this.calculatePinchZoom(this.startTouchesDistance, this.endTouchesDistance);\n                this.pinchDistance = Math.abs(this.startTouchesDistance - this.endTouchesDistance);\n            }\n\n            if ((this.fingerCount === this.options.fingers || this.options.fingers === TouchConst.ALL_FINGERS) || !touches || this.hasPinches()) {\n\n                //The overall direction of the swipe. From start to now.\n                this.direction = this.calculateDirection(currentFinger.start, currentFinger.end);\n\n                //The immediate direction of the swipe, direction between the last movement and this one.\n                this.currentDirection = this.calculateDirection(currentFinger.last, currentFinger.end);\n\n                //Check if we need to prevent default event (page scroll / pinch zoom) or not\n                this.validateDefaultEvent(e, this.currentDirection);\n\n                //Distance and duration are all off the main finger\n                this.distance = this.calculateDistance(currentFinger.start, currentFinger.end);\n                this.duration = this.calculateDuration();\n\n                //Cache the maximum distance we made in this direction\n                this.setMaxDistance(this.direction, this.distance);\n\n                //Trigger status handler\n                ret = this.triggerHandler(event, this.phase);\n\n\n                //If we trigger end events when threshold are met, or trigger events when touch leaves element\n                if (!this.options.triggerOnTouchEnd || this.options.triggerOnTouchLeave) {\n\n                    var inBounds = true;\n\n                    //If checking if we leave the element, run the bounds check (we can use touchleave as its not supported on webkit)\n                    if (this.options.triggerOnTouchLeave) {\n                        var bounds = this.getBounds(this);\n                        inBounds = this.isInBounds(currentFinger.end, bounds);\n                    }\n\n                    //Trigger end handles as we swipe if thresholds met or if we have left the element if the user has asked to check these..\n                    if (!this.options.triggerOnTouchEnd && inBounds) {\n                        this.phase = this.getNextPhase(TouchConst.PHASE_MOVE);\n                    }\n                    //We end if out of bounds here, so set current phase to END, and check if its modified\n                    else if (this.options.triggerOnTouchLeave && !inBounds) {\n                        this.phase = this.getNextPhase(TouchConst.PHASE_END);\n                    }\n\n                    if (this.phase === TouchConst.PHASE_CANCEL || this.phase === TouchConst.PHASE_END) {\n                        this.triggerHandler(event, this.phase);\n                    }\n                }\n            } else {\n                this.phase = TouchConst.PHASE_CANCEL;\n                this.triggerHandler(event, this.phase);\n            }\n\n            if (ret === false) {\n                this.phase = TouchConst.PHASE_CANCEL;\n                this.triggerHandler(event, this.phase);\n            }\n        },\n\n        touchEnd: function(e) {\n            //As we use Jquery bind for events, we need to target the original event object\n            //If these events are being programmatically triggered, we don't have an original event object, so use the Jq one.\n            var event = e,\n                touches = event.touches;\n\n            //If we are still in a touch with the device wait a fraction and see if the other finger comes up\n            //if it does within the threshold, then we treat it as a multi release, not a single release and end the touch / swipe\n            if (touches) {\n                if (touches.length && !this.inMultiFingerRelease()) {\n                    this.startMultiFingerRelease(event);\n                    return true;\n                } else if (touches.length && this.inMultiFingerRelease()) {\n                    return true;\n                }\n            }\n\n            //If a previous finger has been released, check how long ago, if within the threshold, then assume it was a multifinger release.\n            //This is used to allow 2 fingers to release fractionally after each other, whilst maintaining the event as containing 2 fingers, not 1\n            if (this.inMultiFingerRelease()) {\n                this.fingerCount = this.fingerCountAtRelease;\n            }\n\n            //Set end of swipe\n            this.endTime = this.getTimeStamp();\n\n            //Get duration incase move was never fired\n            this.duration = this.calculateDuration();\n\n            //If we trigger handlers at end of swipe OR, we trigger during, but they didnt trigger and we are still in the move phase\n            if (this.didSwipeBackToCancel() || !this.validateSwipeDistance()) {\n                this.phase = TouchConst.PHASE_CANCEL;\n                this.triggerHandler(event, this.phase);\n            } else if (this.options.triggerOnTouchEnd || (this.options.triggerOnTouchEnd === false && this.phase === TouchConst.PHASE_MOVE)) {\n                //call this on jq event so we are cross browser\n                if (this.options.preventDefaultEvents !== false) {\n                    e.preventDefault();\n                }\n                this.phase = TouchConst.PHASE_END;\n                this.triggerHandler(event, this.phase);\n            }\n            //Special cases - A tap should always fire on touch end regardless,\n            //So here we manually trigger the tap end handler by itself\n            //We dont run trigger handler as it will re-trigger events that may have fired already\n            else if (!this.options.triggerOnTouchEnd && this.hasTap()) {\n                //Trigger the pinch events...\n                this.phase = TouchConst.PHASE_END;\n                this.triggerHandlerForGesture(event, this.phase, TouchConst.TAP);\n            } else if (this.phase === TouchConst.PHASE_MOVE) {\n                this.phase = TouchConst.PHASE_CANCEL;\n                this.triggerHandler(event, this.phase);\n            }\n\n            this.setTouchInProgress(false);\n\n            return null;\n        },\n\n        touchCancel: function() {\n            // reset the variables back to default values\n            this.fingerCount = 0;\n            this.endTime = 0;\n            this.startTime = 0;\n            this.startTouchesDistance = 0;\n            this.endTouchesDistance = 0;\n            this.pinchZoom = 1;\n\n            //If we were in progress of tracking a possible multi touch end, then re set it.\n            this.cancelMultiFingerRelease();\n\n            this.setTouchInProgress(false);\n        },\n\n        touchLeave: function(e) {\n            if (this.options.triggerOnTouchLeave) {\n                this.phase = this.getNextPhase(TouchConst.PHASE_END);\n                this.triggerHandler(e, this.phase);\n            }\n        },\n\n        getNextPhase: function(currentPhase) {\n            var options  = this.options;\n            var nextPhase = currentPhase;\n\n            // Ensure we have valid swipe (under time and over distance  and check if we are out of bound...)\n            var validTime = this.validateSwipeTime();\n            var validDistance = this.validateSwipeDistance();\n            var didCancel = this.didSwipeBackToCancel();\n\n            //If we have exceeded our time, then cancel\n            if (!validTime || didCancel) {\n                nextPhase = TouchConst.PHASE_CANCEL;\n            }\n            //Else if we are moving, and have reached distance then end\n            else if (validDistance && currentPhase === TouchConst.PHASE_MOVE && (!options.triggerOnTouchEnd || options.triggerOnTouchLeave)) {\n                nextPhase = TouchConst.PHASE_END;\n            }\n            //Else if we have ended by leaving and didn't reach distance, then cancel\n            else if (!validDistance && currentPhase === TouchConst.PHASE_END && options.triggerOnTouchLeave) {\n                nextPhase = TouchConst.PHASE_CANCEL;\n            }\n\n            return nextPhase;\n        },\n\n        triggerHandler: function(event, phase) {\n            var ret,\n                touches = event.touches;\n\n            // SWIPE GESTURES\n            if (this.didSwipe() || this.hasSwipes()) {\n                ret = this.triggerHandlerForGesture(event, phase, TouchConst.SWIPE);\n            }\n\n            // PINCH GESTURES (if the above didn't cancel)\n            if ((this.didPinch() || this.hasPinches()) && ret !== false) {\n                ret = this.triggerHandlerForGesture(event, phase, TouchConst.PINCH);\n            }\n\n            // CLICK / TAP (if the above didn't cancel)\n            if (this.didDoubleTap() && ret !== false) {\n                //Trigger the tap events...\n                ret = this.triggerHandlerForGesture(event, phase, TouchConst.DOUBLE_TAP);\n            }\n\n            // CLICK / TAP (if the above didn't cancel)\n            else if (this.didLongTap() && ret !== false) {\n                //Trigger the tap events...\n                ret = this.triggerHandlerForGesture(event, phase, TouchConst.LONG_TAP);\n            }\n\n            // CLICK / TAP (if the above didn't cancel)\n            else if (this.didTap() && ret !== false) {\n                //Trigger the tap event..\n                ret = this.triggerHandlerForGesture(event, phase, TouchConst.TAP);\n            }\n\n            // If we are cancelling the gesture, then manually trigger the reset handler\n            if (phase === TouchConst.PHASE_CANCEL) {\n                this.touchCancel(event);\n            }\n\n            // If we are ending the gesture, then manually trigger the reset handler IF all fingers are off\n            if (phase === TouchConst.PHASE_END) {\n                //If we support touch, then check that all fingers are off before we cancel\n                if (touches) {\n                    if (!touches.length) {\n                        this.touchCancel(event);\n                    }\n                } else {\n                    this.touchCancel(event);\n                }\n            }\n\n            return ret;\n        },\n\n        triggerHandlerForGesture: function(event, phase, gesture) {\n\n            var ret, element = this.element, options = this.options;\n\n            //SWIPES....\n            if (gesture === TouchConst.SWIPE) {\n                //Trigger status every time..\n                element.trigger('swipeStatus', [phase, this.direction || null, this.distance || 0, this.duration || 0, this.fingerCount, this.fingerData, this.currentDirection]);\n\n                ret = Utils.exec(options.onSwipeStatus, [event, phase, this.direction || null, this.distance || 0, this.duration || 0, this.fingerCount, this.fingerData, this.currentDirection], element[0]);\n                element.fire(\"swipestatus\", {\n                    event: event,\n                    phase: phase,\n                    direction: this.direction,\n                    distance: this.distance,\n                    duration: this.duration,\n                    fingerCount: this.fingerCount,\n                    fingerData: this.fingerData,\n                    currentDirection: this.currentDirection\n                });\n                if (ret === false) return false;\n\n                if (phase === TouchConst.PHASE_END && this.validateSwipe()) {\n\n                    //Cancel any taps that were in progress...\n                    clearTimeout(this.singleTapTimeout);\n                    clearTimeout(this.holdTimeout);\n\n                    element.trigger('swipe', [this.direction, this.distance, this.duration, this.fingerCount, this.fingerData, this.currentDirection]);\n\n                    ret = Utils.exec(options.onSwipe, [event, this.direction, this.distance, this.duration, this.fingerCount, this.fingerData, this.currentDirection], element[0]);\n                    element.fire(\"swipe\", {\n                        event: event,\n                        direction: this.direction,\n                        distance: this.distance,\n                        duration: this.duration,\n                        fingerCount: this.fingerCount,\n                        fingerData: this.fingerData,\n                        currentDirection: this.currentDirection\n                    });\n\n                    if (ret === false) return false;\n\n                    //trigger direction specific event handlers\n                    switch (this.direction) {\n                        case TouchConst.LEFT:\n                            element.trigger('swipeLeft', [this.direction, this.distance, this.duration, this.fingerCount, this.fingerData, this.currentDirection]);\n                            ret = Utils.exec(options.onSwipeLeft, [event, this.direction, this.distance, this.duration, this.fingerCount, this.fingerData, this.currentDirection], element[0]);\n                            element.fire(\"swipeleft\", {\n                                event: event,\n                                direction: this.direction,\n                                distance: this.distance,\n                                duration: this.duration,\n                                fingerCount: this.fingerCount,\n                                fingerData: this.fingerData,\n                                currentDirection: this.currentDirection\n                            });\n                            break;\n\n                        case TouchConst.RIGHT:\n                            element.trigger('swipeRight', [this.direction, this.distance, this.duration, this.fingerCount, this.fingerData, this.currentDirection]);\n                            ret = Utils.exec(options.onSwipeRight, [event, this.direction, this.distance, this.duration, this.fingerCount, this.fingerData, this.currentDirection], element[0]);\n                            element.fire(\"swiperight\", {\n                                event: event,\n                                direction: this.direction,\n                                distance: this.distance,\n                                duration: this.duration,\n                                fingerCount: this.fingerCount,\n                                fingerData: this.fingerData,\n                                currentDirection: this.currentDirection\n                            });\n                            break;\n\n                        case TouchConst.UP:\n                            element.trigger('swipeUp', [this.direction, this.distance, this.duration, this.fingerCount, this.fingerData, this.currentDirection]);\n                            ret = Utils.exec(options.onSwipeUp, [event, this.direction, this.distance, this.duration, this.fingerCount, this.fingerData, this.currentDirection], element[0]);\n                            element.fire(\"swipeup\", {\n                                event: event,\n                                direction: this.direction,\n                                distance: this.distance,\n                                duration: this.duration,\n                                fingerCount: this.fingerCount,\n                                fingerData: this.fingerData,\n                                currentDirection: this.currentDirection\n                            });\n                            break;\n\n                        case TouchConst.DOWN:\n                            element.trigger('swipeDown', [this.direction, this.distance, this.duration, this.fingerCount, this.fingerData, this.currentDirection]);\n                            ret = Utils.exec(options.onSwipeDown, [event, this.direction, this.distance, this.duration, this.fingerCount, this.fingerData, this.currentDirection], element[0]);\n                            element.fire(\"swipedown\", {\n                                event: event,\n                                direction: this.direction,\n                                distance: this.distance,\n                                duration: this.duration,\n                                fingerCount: this.fingerCount,\n                                fingerData: this.fingerData,\n                                currentDirection: this.currentDirection\n                            });\n                            break;\n                    }\n                }\n            }\n\n\n            //PINCHES....\n            if (gesture === TouchConst.PINCH) {\n                element.trigger('pinchStatus', [phase, this.pinchDirection || null, this.pinchDistance || 0, this.duration || 0, this.fingerCount, this.fingerData, this.pinchZoom]);\n\n                ret = Utils.exec(options.onPinchStatus, [event, phase, this.pinchDirection || null, this.pinchDistance || 0, this.duration || 0, this.fingerCount, this.fingerData, this.pinchZoom], element[0]);\n                element.fire(\"pinchstatus\", {\n                    event: event,\n                    phase: phase,\n                    direction: this.pinchDirection,\n                    distance: this.pinchDistance,\n                    duration: this.duration,\n                    fingerCount: this.fingerCount,\n                    fingerData: this.fingerData,\n                    zoom: this.pinchZoom\n                });\n                if (ret === false) return false;\n\n                if (phase === TouchConst.PHASE_END && this.validatePinch()) {\n\n                    switch (this.pinchDirection) {\n                        case TouchConst.IN:\n                            element.trigger('pinchIn', [this.pinchDirection || null, this.pinchDistance || 0, this.duration || 0, this.fingerCount, this.fingerData, this.pinchZoom]);\n                            ret = Utils.exec(options.onPinchIn, [event, this.pinchDirection || null, this.pinchDistance || 0, this.duration || 0, this.fingerCount, this.fingerData, this.pinchZoom], element[0]);\n                            element.fire(\"pinchin\", {\n                                event: event,\n                                direction: this.pinchDirection,\n                                distance: this.pinchDistance,\n                                duration: this.duration,\n                                fingerCount: this.fingerCount,\n                                fingerData: this.fingerData,\n                                zoom: this.pinchZoom\n                            });\n                            break;\n\n                        case TouchConst.OUT:\n                            element.trigger('pinchOut', [this.pinchDirection || null, this.pinchDistance || 0, this.duration || 0, this.fingerCount, this.fingerData, this.pinchZoom]);\n                            ret = Utils.exec(options.onPinchOut, [event, this.pinchDirection || null, this.pinchDistance || 0, this.duration || 0, this.fingerCount, this.fingerData, this.pinchZoom], element[0]);\n                            element.fire(\"pinchout\", {\n                                event: event,\n                                direction: this.pinchDirection,\n                                distance: this.pinchDistance,\n                                duration: this.duration,\n                                fingerCount: this.fingerCount,\n                                fingerData: this.fingerData,\n                                zoom: this.pinchZoom\n                            });\n                            break;\n                    }\n                }\n            }\n\n            if (gesture === TouchConst.TAP) {\n                if (phase === TouchConst.PHASE_CANCEL || phase === TouchConst.PHASE_END) {\n\n                    clearTimeout(this.singleTapTimeout);\n                    clearTimeout(this.holdTimeout);\n\n                    //If we are also looking for doubelTaps, wait incase this is one...\n                    if (this.hasDoubleTap() && !this.inDoubleTap()) {\n                        this.doubleTapStartTime = this.getTimeStamp();\n\n                        //Now wait for the double tap timeout, and trigger this single tap\n                        //if its not cancelled by a double tap\n                        this.singleTapTimeout = setTimeout($.proxy(function() {\n                            this.doubleTapStartTime = null;\n                            ret = Utils.exec(options.onTap, [event, event.target], element[0]);\n                            element.fire(\"tap\", {\n                                event: event,\n                                target: event.target\n                            });\n                        }, this), options.doubleTapThreshold);\n\n                    } else {\n                        this.doubleTapStartTime = null;\n                        ret = Utils.exec(options.onTap, [event, event.target], element[0]);\n                        element.fire(\"tap\", {\n                            event: event,\n                            target: event.target\n                        });\n                    }\n                }\n            } else if (gesture === TouchConst.DOUBLE_TAP) {\n                if (phase === TouchConst.PHASE_CANCEL || phase === TouchConst.PHASE_END) {\n                    clearTimeout(this.singleTapTimeout);\n                    clearTimeout(this.holdTimeout);\n                    this.doubleTapStartTime = null;\n\n                    ret = Utils.exec(options.onDoubleTap, [event, event.target], element[0]);\n                    element.fire(\"doubletap\", {\n                        event: event,\n                        target: event.target\n                    });\n                }\n            } else if (gesture === TouchConst.LONG_TAP) {\n                if (phase === TouchConst.PHASE_CANCEL || phase === TouchConst.PHASE_END) {\n                    clearTimeout(this.singleTapTimeout);\n                    this.doubleTapStartTime = null;\n\n                    ret = Utils.exec(options.onLongTap, [event, event.target], element[0]);\n                    element.fire(\"longtap\", {\n                        event: event,\n                        target: event.target\n                    });\n                }\n            }\n\n            return ret;\n        },\n\n        validateSwipeDistance: function() {\n            var valid = true;\n            //If we made it past the min swipe distance..\n            if (this.options.threshold !== null) {\n                valid = this.distance >= this.options.threshold;\n            }\n\n            return valid;\n        },\n\n        didSwipeBackToCancel: function() {\n            var options = this.options;\n            var cancelled = false;\n            if (options.cancelThreshold !== null && this.direction !== null) {\n                cancelled = (this.getMaxDistance(this.direction) - this.distance) >= options.cancelThreshold;\n            }\n\n            return cancelled;\n        },\n\n        validatePinchDistance: function() {\n            if (this.options.pinchThreshold !== null) {\n                return this.pinchDistance >= this.options.pinchThreshold;\n            }\n            return true;\n        },\n\n        validateSwipeTime: function() {\n            var result, options = this.options;\n\n            if (options.maxTimeThreshold) {\n                result = this.duration < options.maxTimeThreshold;\n            } else {\n                result = true;\n            }\n\n            return result;\n        },\n\n        validateDefaultEvent: function(e, direction) {\n            var options = this.options;\n\n            //If the option is set, allways allow the event to bubble up (let user handle weirdness)\n            if (options.preventDefaultEvents === false) {\n                return;\n            }\n\n            if (options.allowPageScroll === TouchConst.NONE) {\n                e.preventDefault();\n            } else {\n                var auto = options.allowPageScroll === TouchConst.AUTO;\n\n                switch (direction) {\n                    case TouchConst.LEFT:\n                        if ((options.onSwipeLeft !== Metro.noop && auto) || (!auto && options.allowPageScroll.toLowerCase() !== TouchConst.HORIZONTAL)) {\n                            e.preventDefault();\n                        }\n                        break;\n\n                    case TouchConst.RIGHT:\n                        if ((options.onSwipeRight !== Metro.noop && auto) || (!auto && options.allowPageScroll.toLowerCase() !== TouchConst.HORIZONTAL)) {\n                            e.preventDefault();\n                        }\n                        break;\n\n                    case TouchConst.UP:\n                        if ((options.onSwipeUp !== Metro.noop && auto) || (!auto && options.allowPageScroll.toLowerCase() !== TouchConst.VERTICAL)) {\n                            e.preventDefault();\n                        }\n                        break;\n\n                    case TouchConst.DOWN:\n                        if ((options.onSwipeDown !== Metro.noop && auto) || (!auto && options.allowPageScroll.toLowerCase() !== TouchConst.VERTICAL)) {\n                            e.preventDefault();\n                        }\n                        break;\n\n                    case TouchConst.NONE:\n\n                        break;\n                }\n            }\n        },\n\n        validatePinch: function() {\n            var hasCorrectFingerCount = this.validateFingers();\n            var hasEndPoint = this.validateEndPoint();\n            var hasCorrectDistance = this.validatePinchDistance();\n            return hasCorrectFingerCount && hasEndPoint && hasCorrectDistance;\n        },\n\n        hasPinches: function() {\n            //Enure we dont return 0 or null for false values\n            return !!(this.options.onPinchStatus || this.options.onPinchIn || this.options.onPinchOut);\n        },\n\n        didPinch: function() {\n            //Enure we dont return 0 or null for false values\n            return !!(this.validatePinch() && this.hasPinches());\n        },\n\n        validateSwipe: function() {\n            //Check validity of swipe\n            var hasValidTime = this.validateSwipeTime();\n            var hasValidDistance = this.validateSwipeDistance();\n            var hasCorrectFingerCount = this.validateFingers();\n            var hasEndPoint = this.validateEndPoint();\n            var didCancel = this.didSwipeBackToCancel();\n\n            // if the user swiped more than the minimum length, perform the appropriate action\n            // hasValidDistance is null when no distance is set\n            return !didCancel && hasEndPoint && hasCorrectFingerCount && hasValidDistance && hasValidTime;\n        },\n\n        hasSwipes: function() {\n            var o = this.options;\n            //Enure we dont return 0 or null for false values\n            return !!(\n                o.onSwipe !== Metro.noop\n                || o.onSwipeStatus  !== Metro.noop\n                || o.onSwipeLeft  !== Metro.noop\n                || o.onSwipeRight  !== Metro.noop\n                || o.onSwipeUp  !== Metro.noop\n                || o.onSwipeDown !== Metro.noop\n            );\n        },\n\n        didSwipe: function() {\n            //Enure we dont return 0 or null for false values\n            return !!(this.validateSwipe() && this.hasSwipes());\n        },\n\n        validateFingers: function() {\n            //The number of fingers we want were matched, or on desktop we ignore\n            return ((this.fingerCount === this.options.fingers || this.options.fingers === TouchConst.ALL_FINGERS) || !TouchConst.SUPPORTS_TOUCH);\n        },\n\n        validateEndPoint: function() {\n            //We have an end value for the finger\n            return this.fingerData[0].end.x !== 0;\n        },\n\n        hasTap: function() {\n            //Enure we dont return 0 or null for false values\n            return this.options.onTap !== Metro.noop;\n        },\n\n        hasDoubleTap: function() {\n            //Enure we dont return 0 or null for false values\n            return this.options.onDoubleTap !== Metro.noop;\n        },\n\n        hasLongTap: function() {\n            //Enure we dont return 0 or null for false values\n            return this.options.onLongTap !== Metro.noop;\n        },\n\n        validateDoubleTap: function() {\n            if (this.doubleTapStartTime == null) {\n                return false;\n            }\n            var now = this.getTimeStamp();\n            return (this.hasDoubleTap() && ((now - this.doubleTapStartTime) <= this.options.doubleTapThreshold));\n        },\n\n        inDoubleTap: function() {\n            return this.validateDoubleTap();\n        },\n\n        validateTap: function() {\n            return ((this.fingerCount === 1 || !TouchConst.SUPPORTS_TOUCH) && (isNaN(this.distance) || this.distance < this.options.threshold));\n        },\n\n        validateLongTap: function() {\n            var options = this.options;\n            //slight threshold on moving finger\n            return ((this.duration > options.longTapThreshold) && (this.distance < TouchConst.DOUBLE_TAP_THRESHOLD)); // check double_tab_threshold where from\n        },\n\n        didTap: function() {\n            //Enure we dont return 0 or null for false values\n            return !!(this.validateTap() && this.hasTap());\n        },\n\n        didDoubleTap: function() {\n            //Enure we dont return 0 or null for false values\n            return !!(this.validateDoubleTap() && this.hasDoubleTap());\n        },\n\n        didLongTap: function() {\n            //Enure we dont return 0 or null for false values\n            return !!(this.validateLongTap() && this.hasLongTap());\n        },\n\n        startMultiFingerRelease: function(event) {\n            this.previousTouchEndTime = this.getTimeStamp();\n            this.fingerCountAtRelease = event.touches.length + 1;\n        },\n\n        cancelMultiFingerRelease: function() {\n            this.previousTouchEndTime = 0;\n            this.fingerCountAtRelease = 0;\n        },\n\n        inMultiFingerRelease: function() {\n            var withinThreshold = false;\n\n            if (this.previousTouchEndTime) {\n                var diff = this.getTimeStamp() - this.previousTouchEndTime;\n                if (diff <= this.options.fingerReleaseThreshold) {\n                    withinThreshold = true;\n                }\n            }\n\n            return withinThreshold;\n        },\n\n        getTouchInProgress: function() {\n            var element = this.element;\n            //strict equality to ensure only true and false are returned\n            return (element.data('intouch') === true);\n        },\n\n        setTouchInProgress: function(val) {\n            var element = this.element;\n\n            //If destroy is called in an event handler, we have no el, and we have already cleaned up, so return.\n            if(!element) { return; }\n\n            //Add or remove event listeners depending on touch status\n            if (val === true) {\n                element.on(this.MOVE_EV, $.proxy(this.touchMove, this));\n                element.on(this.END_EV, $.proxy(this.touchEnd, this));\n\n                //we only have leave events on desktop, we manually calcuate leave on touch as its not supported in webkit\n                if (this.LEAVE_EV) {\n                    element.on(this.LEAVE_EV, $.proxy(this.touchLeave, this));\n                }\n            } else {\n\n                element.off(this.MOVE_EV);\n                element.off(this.END_EV);\n\n                //we only have leave events on desktop, we manually calcuate leave on touch as its not supported in webkit\n                if (this.LEAVE_EV) {\n                    element.off(this.LEAVE_EV);\n                }\n            }\n\n            //strict equality to ensure only true and false can update the value\n            element.data('intouch', val === true);\n        },\n\n        createFingerData: function(id, evt) {\n            var f = {\n                start: {\n                    x: 0,\n                    y: 0\n                },\n                last: {\n                    x: 0,\n                    y: 0\n                },\n                end: {\n                    x: 0,\n                    y: 0\n                }\n            };\n            f.start.x = f.last.x = f.end.x = evt.pageX || evt.clientX;\n            f.start.y = f.last.y = f.end.y = evt.pageY || evt.clientY;\n            this.fingerData[id] = f;\n            return f;\n        },\n\n        updateFingerData: function(evt) {\n            var id = evt.identifier !== undefined ? evt.identifier : 0;\n            var f = this.getFingerData(id);\n\n            if (f === null) {\n                f = this.createFingerData(id, evt);\n            }\n\n            f.last.x = f.end.x;\n            f.last.y = f.end.y;\n\n            f.end.x = evt.pageX || evt.clientX;\n            f.end.y = evt.pageY || evt.clientY;\n\n            return f;\n        },\n\n        getFingerData: function(id) {\n            return this.fingerData[id] || null;\n        },\n\n        setMaxDistance: function(direction, distance) {\n            if (direction === TouchConst.NONE) return;\n            distance = Math.max(distance, this.getMaxDistance(direction));\n            this.maximumsMap[direction].distance = distance;\n        },\n\n        getMaxDistance: function(direction) {\n            return (this.maximumsMap[direction]) ? this.maximumsMap[direction].distance : undefined;\n        },\n\n        createMaximumsData: function() {\n            var maxData = {};\n            maxData[TouchConst.LEFT] = this.createMaximumVO(TouchConst.LEFT);\n            maxData[TouchConst.RIGHT] = this.createMaximumVO(TouchConst.RIGHT);\n            maxData[TouchConst.UP] = this.createMaximumVO(TouchConst.UP);\n            maxData[TouchConst.DOWN] = this.createMaximumVO(TouchConst.DOWN);\n\n            return maxData;\n        },\n\n        createMaximumVO: function(dir) {\n            return {\n                direction: dir,\n                distance: 0\n            }\n        },\n\n        calculateDuration: function(){\n            return this.endTime - this.startTime;\n        },\n\n        calculateTouchesDistance: function(startPoint, endPoint){\n            var diffX = Math.abs(startPoint.x - endPoint.x);\n            var diffY = Math.abs(startPoint.y - endPoint.y);\n\n            return Math.round(Math.sqrt(diffX * diffX + diffY * diffY));\n        },\n\n        calculatePinchZoom: function(startDistance, endDistance){\n            var percent = (endDistance / startDistance) * 100; // 1 ? 100\n            return percent.toFixed(2);\n        },\n\n        calculatePinchDirection: function(){\n            if (this.pinchZoom < 1) {\n                return TouchConst.OUT;\n            } else {\n                return TouchConst.IN;\n            }\n        },\n\n        calculateDistance: function(startPoint, endPoint){\n            return Math.round(Math.sqrt(Math.pow(endPoint.x - startPoint.x, 2) + Math.pow(endPoint.y - startPoint.y, 2)));\n        },\n\n        calculateAngle: function(startPoint, endPoint){\n            var x = startPoint.x - endPoint.x;\n            var y = endPoint.y - startPoint.y;\n            var r = Math.atan2(y, x); //radians\n            var angle = Math.round(r * 180 / Math.PI); //degrees\n\n            //ensure value is positive\n            if (angle < 0) {\n                angle = 360 - Math.abs(angle);\n            }\n\n            return angle;\n        },\n\n        calculateDirection: function(startPoint, endPoint){\n            if( this.comparePoints(startPoint, endPoint) ) {\n                return TouchConst.NONE;\n            }\n\n            var angle = this.calculateAngle(startPoint, endPoint);\n\n            if ((angle <= 45) && (angle >= 0)) {\n                return TouchConst.LEFT;\n            } else if ((angle <= 360) && (angle >= 315)) {\n                return TouchConst.LEFT;\n            } else if ((angle >= 135) && (angle <= 225)) {\n                return TouchConst.RIGHT;\n            } else if ((angle > 45) && (angle < 135)) {\n                return TouchConst.DOWN;\n            } else {\n                return TouchConst.UP;\n            }\n        },\n\n        getTimeStamp: function(){\n            return (new Date()).getTime();\n        },\n\n        getBounds: function (el) {\n            el = $(el);\n            var offset = el.offset();\n\n            return {\n                left: offset.left,\n                right: offset.left + el.outerWidth(),\n                top: offset.top,\n                bottom: offset.top + el.outerHeight()\n            };\n        },\n\n        isInBounds: function(point, bounds){\n            return (point.x > bounds.left && point.x < bounds.right && point.y > bounds.top && point.y < bounds.bottom);\n        },\n\n        comparePoints: function(pointA, pointB) {\n            return (pointA.x === pointB.x && pointA.y === pointB.y);\n        },\n\n        removeListeners: function() {\n            var element = this.element;\n\n            element.off(this.START_EV);\n            element.off(this.CANCEL_EV);\n            element.off(this.MOVE_EV);\n            element.off(this.END_EV);\n\n            //we only have leave events on desktop, we manually calculate leave on touch as its not supported in webkit\n            if (this.LEAVE_EV) {\n                element.off(this.LEAVE_EV);\n            }\n\n            this.setTouchInProgress(false);\n        },\n\n        enable: function(){\n            this.disable();\n            this.element.on(this.START_EV, this.touchStart);\n            this.element.on(this.CANCEL_EV, this.touchCancel);\n            return this.element;\n        },\n\n        disable: function(){\n            this.removeListeners();\n            return this.element;\n        },\n\n        changeAttribute: function(){\n        },\n\n        destroy: function(){\n            this.removeListeners();\n        }\n    });\n\n    Metro['touch'] = TouchConst;\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var TreeViewDefaultConfig = {\n        treeviewDeferred: 0,\n        showChildCount: false,\n        duration: 100,\n        onNodeClick: Metro.noop,\n        onNodeDblClick: Metro.noop,\n        onNodeDelete: Metro.noop,\n        onNodeInsert: Metro.noop,\n        onNodeClean: Metro.noop,\n        onCheckClick: Metro.noop,\n        onRadioClick: Metro.noop,\n        onExpandNode: Metro.noop,\n        onCollapseNode: Metro.noop,\n        onTreeViewCreate: Metro.noop\n    };\n\n    Metro.treeViewSetup = function (options) {\n        TreeViewDefaultConfig = $.extend({}, TreeViewDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroTreeViewSetup\"] !== undefined) {\n        Metro.treeViewSetup(window[\"metroTreeViewSetup\"]);\n    }\n\n    Metro.Component('tree-view', {\n        init: function( options, elem ) {\n            this._super(elem, options, TreeViewDefaultConfig);\n            return this;\n        },\n\n        _create: function(){\n            var that = this, element = this.element;\n\n            this._createTree();\n            this._createEvents();\n\n            $.each(element.find(\"input\"), function(){\n                if (!$(this).is(\":checked\")) return;\n                that._recheck(this);\n            });\n\n            this._fireEvent(\"tree-view-create\", {\n                element: element\n            });\n        },\n\n        _createIcon: function(data){\n            var icon, src;\n\n            src = Utils.isTag(data) ? $(data) : $(\"<img src='' alt=''>\").attr(\"src\", data);\n            icon = $(\"<span>\").addClass(\"icon\");\n            icon.html(src.outerHTML());\n\n            return icon;\n        },\n\n        _createCaption: function(data){\n            return $(\"<span>\").addClass(\"caption\").html(data);\n        },\n\n\n        _createToggle: function(){\n            return $(\"<span>\").addClass(\"node-toggle\");\n        },\n\n\n        _createNode: function(data){\n            var node;\n\n            node = $(\"<li>\");\n\n            if (data.caption !== undefined) {\n                node.prepend(this._createCaption(data.caption));\n            }\n\n            if (data.icon !== undefined) {\n                node.prepend(this._createIcon(data.icon));\n            }\n\n            if (data.html !== undefined) {\n                node.append(data.html);\n            }\n\n            return node;\n        },\n\n        _createTree: function(){\n            var that = this, element = this.element, o = this.options;\n            var nodes = element.find(\"li\");\n\n            element.addClass(\"treeview\");\n\n            $.each(nodes, function(){\n                var node = $(this);\n                var caption, icon;\n\n                caption = node.data(\"caption\");\n                icon = node.data(\"icon\");\n\n                if (caption !== undefined) {\n                    if (node.children(\"ul\").length > 0 && o.showChildCount === true) {\n                        caption += \" (\"+node.children(\"ul\").children(\"li\").length+\")\"\n                    }\n                    node.prepend(that._createCaption(caption));\n                }\n\n                if (icon !== undefined) {\n                    node.prepend(that._createIcon(icon));\n                }\n\n                if (node.children(\"ul\").length > 0) {\n\n                    node.addClass(\"tree-node\");\n\n                    node.append(that._createToggle());\n\n                    if (Utils.bool(node.attr(\"data-collapsed\")) !== true) {\n                        node.addClass(\"expanded\");\n                    } else {\n                        node.children(\"ul\").hide();\n                    }\n                }\n\n            });\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element;\n\n            element.on(Metro.events.click, \".node-toggle\", function(e){\n                var toggle = $(this);\n                var node = toggle.parent();\n\n                that.toggleNode(node);\n\n                e.preventDefault();\n            });\n\n            element.on(Metro.events.click, \"li > .caption\", function(e){\n                var node = $(this).parent();\n\n                that.current(node);\n\n                that._fireEvent(\"node-click\", {\n                    node: node[0]\n                });\n\n                e.preventDefault();\n            });\n\n            element.on(Metro.events.dblclick, \"li > .caption\", function(e){\n                var node = $(this).closest(\"li\");\n                var toggle = node.children(\".node-toggle\");\n                var subtree = node.children(\"ul\");\n\n                if (toggle.length > 0 || subtree.length > 0) {\n                    that.toggleNode(node);\n                }\n\n                that._fireEvent(\"node-dbl-click\", {\n                    node: node[0]\n                })\n\n                e.preventDefault();\n            });\n\n            element.on(Metro.events.click, \"input[type=radio]\", function(){\n                var check = $(this);\n                var checked = check.is(\":checked\");\n                var node = check.closest(\"li\");\n\n                that.current(node);\n\n                that._fireEvent(\"radio-click\", {\n                    checked: checked,\n                    check: check[0],\n                    node: node[0]\n                });\n            });\n\n            element.on(Metro.events.click, \"input[type=checkbox]\", function(){\n                var check = $(this);\n                var checked = check.is(\":checked\");\n                var node = check.closest(\"li\");\n\n                that._recheck(check);\n\n                that._fireEvent(\"check-click\", {\n                    checked: checked,\n                    check: check[0],\n                    node: node[0]\n                });\n            });\n        },\n\n        _recheck: function(check){\n            var element = this.element;\n            var checked, node, checks, all_checks;\n\n            check = $(check);\n\n            checked = check.is(\":checked\");\n            node = check.closest(\"li\");\n\n            this.current(node);\n\n            // down\n            checks = check.closest(\"li\").find(\"ul input[type=checkbox]\");\n            checks.attr(\"data-indeterminate\", false);\n            checks.prop(\"checked\", checked);\n            checks.trigger('change');\n\n            all_checks = [];\n\n            $.each(element.find(\"input[type=checkbox]\"), function(){\n                all_checks.push(this);\n            });\n\n            $.each(all_checks.reverse(), function(){\n                var ch = $(this);\n                var children = ch.closest(\"li\").children(\"ul\").find(\"input[type=checkbox]\").length;\n                var children_checked = ch.closest(\"li\").children(\"ul\").find(\"input[type=checkbox]\").filter(function(el){\n                    return el.checked;\n                }).length;\n\n                if (children > 0 && children_checked === 0) {\n                    ch.attr(\"data-indeterminate\", false);\n                    ch.prop(\"checked\", false);\n                    ch.trigger('change');\n                }\n\n                if (children_checked === 0) {\n                    ch.attr(\"data-indeterminate\", false);\n                } else {\n                    if (children_checked > 0 && children > children_checked) {\n                        ch.attr(\"data-indeterminate\", true);\n                    } else if (children === children_checked) {\n                        ch.attr(\"data-indeterminate\", false);\n                        ch.prop(\"checked\", true);\n                        ch.trigger('change');\n                    }\n                }\n            });\n        },\n\n        current: function(node){\n            var element = this.element;\n\n            if (node === undefined) {\n                return element.find(\"li.current\")\n            }\n\n            element.find(\"li\").removeClass(\"current\");\n            node.addClass(\"current\");\n        },\n\n        toggleNode: function(n){\n            var node = $(n);\n            var o = this.options;\n            var func;\n            var toBeExpanded = !node.data(\"collapsed\");//!node.hasClass(\"expanded\");\n\n            node.toggleClass(\"expanded\");\n            node.data(\"collapsed\", toBeExpanded);\n\n            func = toBeExpanded === true ? \"slideUp\" : \"slideDown\";\n\n            if (!toBeExpanded) {\n\n                this._fireEvent(\"expand-node\", {\n                    node: node[0]\n                });\n\n            } else {\n\n                this._fireEvent(\"collapse-node\", {\n                    node: node[0]\n                });\n\n            }\n\n            node.children(\"ul\")[func](o.duration);\n        },\n\n        addTo: function(node, data){\n            var element = this.element;\n            var target;\n            var new_node;\n            var toggle;\n\n            if (node === null) {\n                target = element;\n            } else {\n                node = $(node);\n                target = node.children(\"ul\");\n                if (target.length === 0) {\n                    target = $(\"<ul>\").appendTo(node);\n                    toggle = this._createToggle();\n                    toggle.appendTo(node);\n                    node.addClass(\"expanded\");\n                }\n            }\n\n            new_node = this._createNode(data);\n\n            new_node.appendTo(target);\n\n            this._fireEvent(\"node-insert\", {\n                node: new_node[0],\n                parent: node ? node[0] : null\n            });\n\n            return new_node;\n        },\n\n        insertBefore: function(node, data){\n            var new_node = this._createNode(data);\n\n            if (Utils.isNull(node)) {\n                return this.addTo(node, data);\n            }\n\n            node = $(node);\n            new_node.insertBefore(node);\n\n            this._fireEvent(\"node-insert\", {\n                node: new_node[0],\n                parent: node ? node[0] : null\n            });\n\n            return new_node;\n        },\n\n        insertAfter: function(node, data){\n            var new_node = this._createNode(data);\n\n            if (Utils.isNull(node)) {\n                return this.addTo(node, data);\n            }\n\n            node = $(node);\n            new_node.insertAfter(node);\n\n            this._fireEvent(\"node-insert\", {\n                node: new_node[0],\n                parent: node[0]\n            });\n\n            return new_node;\n        },\n\n        del: function(node){\n            var element = this.element;\n            node = $(node);\n            var parent_list = node.closest(\"ul\");\n            var parent_node = parent_list.closest(\"li\");\n\n            this._fireEvent(\"node-delete\", {\n                node: node[0]\n            });\n\n            node.remove();\n\n            if (parent_list.children().length === 0 && !parent_list.is(element)) {\n                parent_list.remove();\n                parent_node.removeClass(\"expanded\");\n                parent_node.children(\".node-toggle\").remove();\n            }\n        },\n\n        clean: function(node){\n            node = $(node);\n            node.children(\"ul\").remove();\n            node.removeClass(\"expanded\");\n            node.children(\".node-toggle\").remove();\n\n            this._fireEvent(\"node-clean\", {\n                node: node[0]\n            });\n        },\n\n        changeAttribute: function(){\n        },\n\n        destroy: function(){\n            var element = this.element;\n\n            element.off(Metro.events.click, \".node-toggle\");\n            element.off(Metro.events.click, \"li > .caption\");\n            element.off(Metro.events.dblclick, \"li > .caption\");\n            element.off(Metro.events.click, \"input[type=radio]\");\n            element.off(Metro.events.click, \"input[type=checkbox]\");\n\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n\n    var Utils = Metro.utils;\n    var ValidatorFuncs = {\n        required: function(val){\n            if (Array.isArray(val)) {\n                return val.length > 0 ? val : false;\n            } else {\n                return Utils.isValue(val) ? val.trim() : false;\n            }\n        },\n        length: function(val, len){\n            if (Array.isArray(val)) {return val.length === parseInt(len);}\n            if (!Utils.isValue(len) || isNaN(len) || len <= 0) {\n                return false;\n            }\n            return val.trim().length === parseInt(len);\n        },\n        minlength: function(val, len){\n            if (Array.isArray(val)) {return val.length >= parseInt(len);}\n            if (!Utils.isValue(len) || isNaN(len) || len <= 0) {\n                return false;\n            }\n            return val.trim().length >= parseInt(len);\n        },\n        maxlength: function(val, len){\n            if (Array.isArray(val)) {return val.length <= parseInt(len);}\n            if (!Utils.isValue(len) || isNaN(len) || len <= 0) {\n                return false;\n            }\n            return val.trim().length <= parseInt(len);\n        },\n        min: function(val, min_value){\n            if (!Utils.isValue(min_value) || isNaN(min_value)) {\n                return false;\n            }\n            if (!this.number(val)) {\n                return false;\n            }\n            if (isNaN(val)) {\n                return false;\n            }\n            return Number(val) >= Number(min_value);\n        },\n        max: function(val, max_value){\n            if (!Utils.isValue(max_value) || isNaN(max_value)) {\n                return false;\n            }\n            if (!this.number(val)) {\n                return false;\n            }\n            if (isNaN(val)) {\n                return false;\n            }\n            return Number(val) <= Number(max_value);\n        },\n        email: function(val){\n            /* eslint-disable-next-line */\n            return /^[a-z0-9\\u007F-\\uffff!#$%&'*+\\/=?^_`{|}~-]+(?:\\.[a-z0-9\\u007F-\\uffff!#$%&'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z]{2,}$/i.test(val);\n        },\n        domain: function(val){\n            /* eslint-disable-next-line */\n            return /^((xn--)?[a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}$/.test(val);\n        },\n        url: function(val){\n            /* eslint-disable-next-line */\n            var regexp    = /^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u00a1-\\uffff][a-z0-9\\u00a1-\\uffff_-]{0,62})?[a-z0-9\\u00a1-\\uffff]\\.)+(?:[a-z\\u00a1-\\uffff]{2,}\\.?))(?::\\d{2,5})?(?:[/?#]\\S*)?$/i;\n            return regexp.test(val);\n        },\n        date: function(val, format, locale){\n            try {\n                if (!format) {\n                    datetime(val);\n                } else {\n                    Datetime.from(val, format, locale);\n                }\n                return true;\n            } catch (e) {\n                return false;\n            }\n        },\n        number: function(val){\n            return !isNaN(val);\n        },\n        integer: function(val){\n            return Utils.isInt(val);\n        },\n        float: function(val){\n            return Utils.isFloat(val);\n        },\n        digits: function(val){\n            return /^\\d+$/.test(val);\n        },\n        hexcolor: function(val){\n            /* eslint-disable-next-line */\n            return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(val);\n        },\n        color: function(val){\n            if (!Utils.isValue(val)) return false;\n            return Metro.colors.color(val, Metro.colors.PALETTES.STANDARD) !== false || Metro.colors.isColor(Metro.colors.parse(val));\n        },\n        pattern: function(val, pat){\n            if (!Utils.isValue(val)) return false;\n            if (!Utils.isValue(pat)) return false;\n            var reg = new RegExp(pat);\n            return reg.test(val);\n        },\n        compare: function(val, val2){\n            return val === val2;\n        },\n        not: function(val, not_this){\n            return val !== not_this;\n        },\n        notequals: function(val, val2){\n            if (Utils.isNull(val)) return false;\n            if (Utils.isNull(val2)) return false;\n            return val.trim() !== val2.trim();\n        },\n        equals: function(val, val2){\n            if (Utils.isNull(val)) return false;\n            if (Utils.isNull(val2)) return false;\n            return val.trim() === val2.trim();\n        },\n        custom: function(val, func){\n            if (Utils.isFunc(func) === false) {\n                return false;\n            }\n            return Utils.exec(func, [val]);\n        },\n\n        is_control: function(el){\n            return el.parent().hasClass(\"input\")\n                || el.parent().hasClass(\"select\")\n                || el.parent().hasClass(\"textarea\")\n                || el.parent().hasClass(\"checkbox\")\n                || el.parent().hasClass(\"switch\")\n                || el.parent().hasClass(\"radio\")\n                || el.parent().hasClass(\"spinner\")\n                ;\n        },\n\n        reset_state: function(el){\n            var input = $(el);\n            var is_control = ValidatorFuncs.is_control(input);\n\n            if (is_control) {\n                input.parent().removeClass(\"invalid valid\");\n            } else {\n                input.removeClass(\"invalid valid\");\n            }\n        },\n\n        set_valid_state: function(el){\n            var input = $(el);\n            var is_control = ValidatorFuncs.is_control(input);\n\n            if (is_control) {\n                input.parent().addClass(\"valid\");\n            } else {\n                input.addClass(\"valid\");\n            }\n        },\n\n        set_invalid_state: function(el){\n            var input = $(el);\n            var is_control = ValidatorFuncs.is_control(input);\n\n            if (is_control) {\n                input.parent().addClass(\"invalid\");\n            } else {\n                input.addClass(\"invalid\");\n            }\n        },\n\n        reset: function(form){\n            var that = this;\n            $.each($(form).find(\"[data-validate]\"), function(){\n                that.reset_state(this);\n            });\n\n            return this;\n        },\n\n        validate: function(el, result, cb_ok, cb_error, required_mode){\n            var this_result = true;\n            var input = $(el);\n            var funcs = input.data('validate') !== undefined ? String(input.data('validate')).split(\" \").map(function(s){return s.trim();}) : [];\n            var errors = [];\n            var hasForm = input.closest('form').length > 0;\n            var attr_name, radio_checked;\n\n            if (funcs.length === 0) {\n                return true;\n            }\n\n            this.reset_state(input);\n\n            if (input.attr('type') && input.attr('type').toLowerCase() === \"checkbox\") {\n                if (funcs.indexOf('required') === -1) {\n                    this_result = true;\n                } else {\n                    this_result = input.is(\":checked\");\n                }\n\n                if (this_result === false) {\n                    errors.push('required');\n                }\n\n                if (result !== undefined) {\n                    result.val += this_result ? 0 : 1;\n                }\n            } else if (input.attr('type') && input.attr('type').toLowerCase() === \"radio\") {\n                attr_name = input.attr('name');\n                if (typeof attr_name  === undefined) {\n                    this_result = true;\n                } else {\n                    /*\n                    * Fix with escaped name by nlared https://github.com/nlared\n                    * */\n                    radio_checked = $(\"input[name=\" + attr_name.replace(\"[\", \"\\\\\\[\").replace(\"]\", \"\\\\\\]\") + \"]:checked\"); // eslint-disable-line\n                    this_result = radio_checked.length > 0;\n                }\n                if (result !== undefined) {\n                    result.val += this_result ? 0 : 1;\n                }\n            } else {\n                $.each(funcs, function(){\n                    if (this_result === false) return;\n                    var rule = this.split(\"=\");\n                    var f, a, b;\n\n                    f = rule[0]; rule.shift();\n                    a = rule.join(\"=\");\n\n                    if (['compare', 'equals', 'notequals'].indexOf(f) > -1) {\n                        a = hasForm ? input[0].form.elements[a].value : $(\"[name=\"+a+\"]\").val();\n                    }\n\n                    if (f === 'date') {\n                        a = input.attr(\"data-value-format\");\n                        b = input.attr(\"data-value-locale\");\n                    }\n\n                    if (Utils.isFunc(ValidatorFuncs[f]) === false)  {\n                        this_result = true;\n                    } else {\n                        if (required_mode === true || f === \"required\") {\n                            this_result = ValidatorFuncs[f](input.val(), a, b);\n                        } else {\n                            if (input.val().trim() !== \"\") {\n                                this_result = ValidatorFuncs[f](input.val(), a, b);\n                            } else {\n                                this_result = true;\n                            }\n                        }\n                    }\n\n                    if (this_result === false) {\n                        errors.push(f);\n                    }\n\n                    if (result !== undefined) {\n                        result.val += this_result ? 0 : 1;\n                    }\n                });\n            }\n\n            if (this_result === false) {\n                this.set_invalid_state(input);\n\n                if (result !== undefined) {\n                    result.log.push({\n                        input: input[0],\n                        name: input.attr(\"name\"),\n                        value: input.val(),\n                        funcs: funcs,\n                        errors: errors\n                    });\n                }\n\n                if (cb_error !== undefined) Utils.exec(cb_error, [input, input.val()], input[0]);\n\n            } else {\n                this.set_valid_state(input);\n\n                if (cb_ok !== undefined) Utils.exec(cb_ok, [input, input.val()], input[0]);\n            }\n\n            return this_result;\n        }\n    };\n\n    Metro['validator'] = ValidatorFuncs;\n\n    var ValidatorDefaultConfig = {\n        validatorDeferred: 0,\n        submitTimeout: 200,\n        interactiveCheck: false,\n        clearInvalid: 0,\n        requiredMode: true,\n        useRequiredClass: true,\n        onBeforeSubmit: Metro.noop_true,\n        onSubmit: Metro.noop,\n        onError: Metro.noop,\n        onValidate: Metro.noop,\n        onErrorForm: Metro.noop,\n        onValidateForm: Metro.noop,\n        onValidatorCreate: Metro.noop\n    };\n\n    Metro.validatorSetup = function (options) {\n        ValidatorDefaultConfig = $.extend({}, ValidatorDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroValidatorSetup\"] !== undefined) {\n        Metro.validatorSetup(window[\"metroValidatorSetup\"]);\n    }\n\n    Metro.Component('validator', {\n        name: \"Validator\",\n\n        init: function( options, elem ) {\n            this._super(elem, options, ValidatorDefaultConfig, {\n                _onsubmit: null,\n                _onreset: null,\n                result: []\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var that = this, element = this.element, o = this.options;\n            var inputs = element.find(\"[data-validate]\");\n\n            element\n                .attr(\"novalidate\", 'novalidate');\n\n            $.each(inputs, function(){\n                var input = $(this);\n                var funcs = input.data(\"validate\");\n                var required = funcs.indexOf(\"required\") > -1;\n                if (required && o.useRequiredClass === true) {\n                    if (ValidatorFuncs.is_control(input)) {\n                        input.parent().addClass(\"required\");\n                    } else {\n                        input.addClass(\"required\");\n                    }\n                }\n                if (o.interactiveCheck === true) {\n                    input.on(Metro.events.inputchange, function () {\n                        ValidatorFuncs.validate(this, undefined, undefined, undefined, o.requiredMode);\n                    });\n                }\n            });\n\n            this._onsubmit = null;\n            this._onreset = null;\n\n            if (element[0].onsubmit !== null) {\n                this._onsubmit = element[0].onsubmit;\n                element[0].onsubmit = null;\n            }\n\n            if (element[0].onreset !== null) {\n                this._onreset = element[0].onreset;\n                element[0].onreset = null;\n            }\n\n            element[0].onsubmit = function(){\n                return that._submit();\n            };\n\n            element[0].onreset = function(){\n                return that._reset();\n            };\n\n            this._fireEvent(\"validator-create\", {\n                element: element\n            });\n        },\n\n        _reset: function(){\n            ValidatorFuncs.reset(this.element);\n            if (this._onsubmit !==  null) Utils.exec(this._onsubmit, null, this.element[0]);\n        },\n\n        _submit: function(){\n            var that = this, element = this.element, o = this.options;\n            var form = this.elem;\n            var inputs = element.find(\"[data-validate]\");\n            var submit = element.find(\"input[type=submit], button[type=submit]\");\n            var result = {\n                val: 0,\n                log: []\n            };\n            var formData = $.serializeToArray(element);\n\n            if (submit.length > 0) {\n                submit.attr('disabled', 'disabled').addClass('disabled');\n            }\n\n            $.each(inputs, function(){\n                ValidatorFuncs.validate(this, result, o.onValidate, o.onError, o.requiredMode);\n            });\n\n            submit.removeAttr(\"disabled\").removeClass(\"disabled\");\n\n            result.val += Utils.exec(o.onBeforeSubmit, [formData], this.elem) === false ? 1 : 0;\n\n            if (result.val === 0) {\n\n                this._fireEvent(\"validate-form\", {\n                    data: formData\n                });\n\n                setTimeout(function(){\n                    // TODO need fix event name to equivalent\n                    Utils.exec(o.onSubmit, [formData], form);\n                    element.fire(\"formsubmit\", {\n                        data: formData\n                    });\n                    if (that._onsubmit !==  null) Utils.exec(that._onsubmit, null, form);\n                }, o.submitTimeout);\n            } else {\n\n                this._fireEvent(\"error-form\", {\n                    log: result.log,\n                    data: formData\n                });\n\n                if (o.clearInvalid > 0) {\n                    setTimeout(function(){\n                        $.each(inputs, function(){\n                            var inp  = $(this);\n                            if (ValidatorFuncs.is_control(inp)) {\n                                inp.parent().removeClass(\"invalid\");\n                            } else {\n                                inp.removeClass(\"invalid\");\n                            }\n                        })\n                    }, o.clearInvalid);\n                }\n            }\n\n            return result.val === 0;\n        },\n\n        changeAttribute: function(){\n        }\n    });\n}(Metro, m4q));\r\n\r\n/**\n * Component Vegas based on Vegas by Jay Salvat (http://jaysalvat.com/)\n * Original code https://github.com/jaysalvat/vegas\n * MIT License, Copyright 2018 Jay Salvat\n *\n * Adaptation for Metro 4 by Serhii Pimenov,\n * Copyright 2020 Serhii Pimenov\n */\n\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var VegasDefaultConfig = {\n        duration: 4000,\n        animationDuration: null,\n        transitionDuration: null,\n        transition: \"fade\",\n        animation: null,\n        slides: [],\n        shuffle: false,\n        align: \"center\",\n        valign: \"center\",\n        loop: true,\n        autoplay: true,\n        mute: true,\n        cover: true,\n        preload: true,\n        timer: true,\n        overlay: 2,\n        color: null,\n        volume: 1,\n        onPlay: Metro.noop,\n        onPause: Metro.noop,\n        onEnd: Metro.noop,\n        onWalk: Metro.noop,\n        onNext: Metro.noop,\n        onPrev: Metro.noop,\n        onJump: Metro.noop,\n        onVegasCreate: Metro.noop\n    };\n\n    Metro.vegasSetup = function (options) {\n        VegasDefaultConfig = $.extend({}, VegasDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroVegasSetup\"] !== undefined) {\n        Metro.vegasSetup(window[\"metroVegasSetup\"]);\n    }\n\n    Metro.Component('vegas', {\n\n        videoCache: {},\n\n        init: function( options, elem ) {\n            this.transitions = [\n                \"fade\", \"fade2\",\n                \"slideLeft\", \"slideLeft2\",\n                \"slideRight\", \"slideRight2\",\n                \"slideUp\", \"slideUp2\",\n                \"slideDown\", \"slideDown2\",\n                \"zoomIn\", \"zoomIn2\",\n                \"zoomOut\", \"zoomOut2\",\n                \"swirlLeft\", \"swirlLeft2\",\n                \"swirlRight\", \"swirlRight2\"\n            ];\n            this.animations = [\n                \"kenburns\",\n                \"kenburnsUp\",\n                \"kenburnsDown\",\n                \"kenburnsRight\",\n                \"kenburnsLeft\",\n                \"kenburnsUpLeft\",\n                \"kenburnsUpRight\",\n                \"kenburnsDownLeft\",\n                \"kenburnsDownRight\"\n            ];\n\n            this.support = {\n                objectFit:  'objectFit'  in document.body.style,\n                video: !/(Android|webOS|Phone|iPad|iPod|BlackBerry|Windows Phone)/i.test(navigator.userAgent)\n            }\n\n            this._super(elem, options, VegasDefaultConfig, {\n                slide: 0,\n                slides: null,\n                total: 0,\n                noshow: false,\n                paused: false,\n                ended: false,\n                timer: null,\n                overlay: null,\n                first: true,\n                timeout: false\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n\n            this.slides = Utils.isObject(o.slides) || [];\n            this.total = this.slides.length;\n            this.noshow = this.total < 2;\n            this.paused = !o.autoplay || this.noshow;\n\n            if (o.shuffle) {\n                this.slides.shuffle();\n            }\n\n            if (o.preload) {\n                this._preload();\n            }\n\n            this._createStructure();\n            this._createEvents();\n\n            this._fireEvent(\"vegas-create\", {\n                element: element\n            });\n        },\n\n        _createStructure: function(){\n            var that = this, element = this.element, o = this.options;\n            var isBody = element[0].tagName === 'BODY';\n            var wrapper;\n\n            if (!isBody) {\n                element.css('height', element.css('height')); // it is not clear why this line\n\n                wrapper = $('<div class=\"vegas-wrapper\">')\n                    .css('overflow', element.css('overflow'))\n                    .css('padding',  element.css('padding'));\n\n                if (!element.css('padding')) {\n                    wrapper\n                        .css('padding-top',    element.css('padding-top'))\n                        .css('padding-bottom', element.css('padding-bottom'))\n                        .css('padding-left',   element.css('padding-left'))\n                        .css('padding-right',  element.css('padding-right'));\n                }\n\n                element.children().appendTo(wrapper);\n                element.clear();\n            }\n\n            element.addClass(\"vegas-container\");\n\n            if (!isBody) {\n                element.append(wrapper);\n            }\n\n            if (o.timer) {\n                this.timer = $('<div class=\"vegas-timer\"><div class=\"vegas-timer-progress\">');\n                element.append(this.timer);\n            }\n\n            if (o.overlay) {\n                this.overlay = $('<div class=\"vegas-overlay\">').addClass('overlay' + (typeof o.overlay === 'boolean' || isNaN(o.overlay) ? 2 : +o.overlay));\n                element.append(this.overlay);\n            }\n\n            setTimeout(function(){\n                Utils.exec(o.onPlay, null, element[0]);\n                that._goto(that.slide);\n            },1)\n        },\n\n        _createEvents: function(){\n        },\n\n        _preload: function(){\n            var img, i;\n\n            for (i = 0; i < this.slides.length; i++) {\n\n                var obj = this.slides[i];\n\n                if (obj.src) {\n                    img = new Image();\n                    img.src = this.slides[i].src;\n                }\n\n                if (obj.video) {\n                    if (obj.video instanceof Array) {\n                        this._video(obj.video);\n                    } else {\n                        this._video(obj.video.src);\n                    }\n                }\n            }\n        },\n\n        _slideShow: function () {\n            var that = this, o = this.options;\n\n            if (this.total > 1 && !this.ended && !this.paused && !this.noshow) {\n                this.timeout = setTimeout(function () {\n                    that.next();\n                }, o.duration);\n            }\n        },\n\n        _timer: function (state) {\n            var that = this, o = this.options;\n\n            clearTimeout(this.timeout);\n\n            if (!this.timer) {\n                return;\n            }\n\n            this.timer\n                .removeClass('vegas-timer-running')\n                .find('div')\n                .css('transition-duration', '0ms');\n\n            if (this.ended || this.paused || this.noshow) {\n                return;\n            }\n\n            if (state) {\n                setTimeout(function () {\n                    that.timer\n                        .addClass('vegas-timer-running')\n                        .find('div')\n                        .css('transition-duration', +o.duration - 100 + 'ms');\n                }, 100);\n            }\n        },\n\n        _fadeSoundIn: function(video, duration){\n            var o = this.options;\n\n            $.animate({\n                el: video,\n                draw: {\n                    volume: +o.volume\n                },\n                dur: duration\n            })\n        },\n\n        _fadeSoundOut: function(video, duration){\n            $.animate({\n                el: video,\n                draw: {\n                    volume: 0\n                },\n                dur: duration\n            })\n        },\n\n        _video: function(sources){\n            var video, source;\n            var cacheKey = sources.toString();\n\n            if (this.videoCache[cacheKey]) {\n                return this.videoCache[cacheKey];\n            }\n\n            if (!Array.isArray(sources)) {\n                sources = [sources];\n            }\n\n            video = document.createElement(\"video\");\n            video.preload = true;\n\n            sources.forEach(function(src){\n                source = document.createElement(\"source\");\n                source.src = src;\n                video.appendChild(source);\n            });\n\n            this.videoCache[cacheKey] = video;\n\n            return video;\n        },\n\n        _goto: function(n){\n            var that = this, element = this.element, o = this.options;\n\n            if (typeof this.slides[n] === 'undefined') {\n                n = 0;\n            }\n\n            this.slide = n;\n\n            var $slide, $inner, video, img, $video;\n            var slides = element.children(\".vegas-slide\");\n            var obj = this.slides[n];\n            var cover = o.cover;\n            var transition, animation;\n            var transitionDuration, animationDuration;\n\n            if (this.first) {\n                this.first = false;\n            }\n\n            if (cover !== 'repeat') {\n                if (cover === true) {\n                    cover = 'cover';\n                } else if (cover === false) {\n                    cover = 'contain';\n                }\n            }\n\n            if (o.transition === 'random') {\n                transition = $.random(this.transitions);\n            } else {\n                transition = o.transition ? o.transition : this.transitions[0];\n            }\n\n            if (o.animation === 'random') {\n                animation = $.random(this.animations);\n            } else {\n                animation = o.animation ? o.animation : this.animations[0];\n            }\n\n            if (!o.transitionDuration) {\n                transitionDuration = +o.duration;\n            } else if (o.transitionDuration === 'auto' || +o.transitionDuration > +o.duration) {\n                transitionDuration = +o.duration;\n            } else {\n                transitionDuration = +o.transitionDuration;\n            }\n\n            if (!o.animationDuration) {\n                animationDuration = +o.duration;\n            } else if (o.animationDuration === 'auto' || +o.animationDuration > +o.duration) {\n                animationDuration = +o.duration;\n            } else {\n                animationDuration = +o.animationDuration;\n            }\n\n            $slide = $(\"<div>\").addClass(\"vegas-slide\").addClass('vegas-transition-' + transition);\n\n            if (this.support.video && obj.video) {\n                video = obj.video instanceof Array ? this._video(obj.video) : this._video(obj.video.src);\n                video.loop = obj.video.loop ? obj.video.loop : o.loop;\n                video.muted = obj.video.mute ? obj.video.mute : o.mute;\n\n                if (!video.muted) {\n                    this._fadeSoundIn(video, transitionDuration);\n                } else {\n                    video.pause();\n                }\n\n                $video = $(video)\n                    .addClass('vegas-video')\n                    .css('background-color', o.color || '#000000');\n\n                if (this.support.objectFit) {\n                    $video\n                        .css('object-position', o.align + ' ' + o.valign)\n                        .css('object-fit', cover)\n                        .css('width',  '100%')\n                        .css('height', '100%');\n                } else if (cover === 'contain') {\n                    $video\n                        .css('width',  '100%')\n                        .css('height', '100%');\n                }\n\n                $slide.append($video);\n            } else {\n                img = new Image();\n                $inner = $(\"<div>\").addClass('vegas-slide-inner')\n                    .css({\n                        backgroundImage: 'url(\"'+obj.src+'\")',\n                        backgroundColor: o.color || '#000000',\n                        backgroundPosition: o.align + ' ' + o.valign\n                    });\n\n                if (cover === 'repeat') {\n                    $inner.css('background-repeat', 'repeat');\n                } else {\n                    $inner.css('background-size', cover);\n                }\n\n                if (animation) {\n                    $inner\n                        .addClass('vegas-animation-' + animation)\n                        .css('animation-duration',  animationDuration + 'ms');\n                }\n\n                $slide.append($inner);\n            }\n\n            if (slides.length) {\n                slides.eq(slides.length - 1).after($slide);\n            } else {\n                element.prepend($slide);\n            }\n\n            slides\n                .css('transition', 'all 0ms')\n                .each(function(){\n                    this.className  = 'vegas-slide';\n\n                    if (this.tagName === 'VIDEO') {\n                        this.className += ' vegas-video';\n                    }\n\n                    if (transition) {\n                        this.className += ' vegas-transition-' + transition;\n                        this.className += ' vegas-transition-' + transition + '-in';\n                    }\n                }\n            );\n\n            this._timer(false);\n\n            function go(){\n                that._timer(true);\n                setTimeout(function () {\n                    slides\n                        .css('transition', 'all ' + transitionDuration + 'ms')\n                        .addClass('vegas-transition-' + transition + '-out');\n\n                    slides.each(function () {\n                        var video = slides.find('video').get(0);\n\n                        if (video) {\n                            video.volume = 1;\n                            that._fadeSoundOut(video, transitionDuration);\n                        }\n                    });\n\n                    $slide\n                        .css('transition', 'all ' + transitionDuration + 'ms')\n                        .addClass('vegas-transition-' + transition + '-in');\n\n                    for (var i = 0; i < slides.length - 1; i++) {\n                        slides.eq(i).remove();\n                    }\n\n                    that._fireEvent(\"walk\", {\n                        slide: that.current(true)\n                    });\n\n                    that._slideShow();\n                }, 100);\n            }\n\n            if (video) {\n                if (video.readyState === 4) {\n                    video.currentTime = 0;\n                }\n\n                video.play();\n                go();\n            } else {\n                img.src = obj.src;\n\n                if (img.complete) {\n                    go();\n                } else {\n                    img.onload = go;\n                }\n            }\n        },\n\n        _end: function(){\n            this.ended = this.options.autoplay;\n            this._timer(false);\n\n            this._fireEvent(\"end\", {\n                slide: this.current(true)\n            });\n        },\n\n        play: function(){\n            if (!this.paused) {\n                return ;\n            }\n\n            this._fireEvent(\"play\", {\n                slide: this.current(true)\n            });\n\n            this.paused = false;\n            this.next();\n        },\n\n        pause: function(){\n            this._timer(false);\n            this.paused = true;\n\n            this._fireEvent(\"pause\", {\n                slide: this.current(true)\n            });\n        },\n\n        toggle: function(){\n            this.paused ? this.play() : this.pause();\n        },\n\n        playing: function(){\n            return !this.paused && !this.noshow;\n        },\n\n        current: function (advanced) {\n            if (advanced) {\n                return {\n                    slide: this.slide,\n                    data:  this.slides[this.slide]\n                };\n            }\n            return this.slide;\n        },\n\n        jump: function(n){\n            if (n <= 0 || n > this.slides.length || n === this.slide + 1) {\n                return this;\n            }\n\n            this.slide = n - 1;\n\n            this._fireEvent(\"jump\", {\n                slide: this.current(true)\n            })\n\n            this._goto(this.slide);\n        },\n\n        next: function(){\n            var o = this.options;\n\n            this.slide++;\n\n            if (this.slide >= this.slides.length) {\n                if (!o.loop) {\n                    return this._end();\n                }\n\n                this.slide = 0;\n            }\n\n            this._fireEvent(\"next\", {\n                slide: this.current(true)\n            });\n\n            this._goto(this.slide);\n        },\n\n        prev: function(){\n            var o = this.options;\n\n            this.slide--;\n\n            if (this.slide < 0) {\n                if (!o.loop) {\n                    this.slide++;\n                    return this._end();\n                }\n\n                this.slide = this.slides.length - 1;\n            }\n\n            this._fireEvent(\"prev\", {\n                slide: this.current(true)\n            });\n\n            this._goto(this.slide);\n        },\n\n        changeAttribute: function(attr){\n            var element = this.element, o = this.options;\n            var propName = Cake.camelCase(attr.replace(\"data-\", \"\"));\n\n            if (propName === 'slides') {\n                o.slides = element.attr('data-slides');\n                this.slides = Utils.isObject(o.slides) || [];\n                this.total = this.slides.length;\n                this.noshow = this.total < 2;\n                this.paused = !this.options.autoplay || this.noshow;\n            } else {\n                if (typeof VegasDefaultConfig[propName] !== 'undefined')\n                    o[propName] = JSON.parse(element.attr(attr));\n            }\n        },\n\n        destroy: function(){\n            var element = this.element, o = this.options;\n\n            clearTimeout(this.timeout);\n            element.removeClass('vegas-container');\n            element.find('> .vegas-slide').remove();\n            element.find('> .vegas-wrapper').children().appendTo(element);\n            element.find('> .vegas-wrapper').remove();\n\n            if (o.timer) {\n                this.timer.remove();\n            }\n\n            if (o.overlay) {\n                this.overlay.remove();\n            }\n\n            return element[0];\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var VideoPlayerDefaultConfig = {\n        videoDeferred: 0,\n        src: null,\n\n        poster: \"\",\n        logo: \"\",\n        logoHeight: 32,\n        logoWidth: \"auto\",\n        logoTarget: \"\",\n\n        volume: .5,\n        loop: false,\n        autoplay: false,\n\n        fullScreenMode: Metro.fullScreenMode.DESKTOP,\n        aspectRatio: Metro.aspectRatio.HD,\n\n        controlsHide: 3000,\n\n        showLoop: true,\n        showPlay: true,\n        showStop: true,\n        showMute: true,\n        showFull: true,\n        showStream: true,\n        showVolume: true,\n        showInfo: true,\n\n        loopIcon: \"<span class='default-icon-loop'></span>\",\n        stopIcon: \"<span class='default-icon-stop'></span>\",\n        playIcon: \"<span class='default-icon-play'></span>\",\n        pauseIcon: \"<span class='default-icon-pause'></span>\",\n        muteIcon: \"<span class='default-icon-mute'></span>\",\n        volumeLowIcon: \"<span class='default-icon-low-volume'></span>\",\n        volumeMediumIcon: \"<span class='default-icon-medium-volume'></span>\",\n        volumeHighIcon: \"<span class='default-icon-high-volume'></span>\",\n        screenMoreIcon: \"<span class='default-icon-enlarge'></span>\",\n        screenLessIcon: \"<span class='default-icon-shrink'></span>\",\n\n        onPlay: Metro.noop,\n        onPause: Metro.noop,\n        onStop: Metro.noop,\n        onEnd: Metro.noop,\n        onMetadata: Metro.noop,\n        onTime: Metro.noop,\n        onVideoPlayerCreate: Metro.noop\n    };\n\n    Metro.videoPlayerSetup = function (options) {\n        VideoPlayerDefaultConfig = $.extend({}, VideoPlayerDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroVideoPlayerSetup\"] !== undefined) {\n        Metro.videoPlayerSetup(window[\"metroVideoPlayerSetup\"]);\n    }\n\n    Metro.Component('video-player', {\n        init: function( options, elem ) {\n            this._super(elem, options, VideoPlayerDefaultConfig, {\n                fullscreen: false,\n                preloader: null,\n                player: null,\n                video: elem,\n                stream: null,\n                volume: null,\n                volumeBackup: 0,\n                muted: false,\n                fullScreenInterval: false,\n                isPlaying: false,\n                id: Utils.elementId('video-player')\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element, o = this.options;\n\n            if (Metro.fullScreenEnabled === false) {\n                o.fullScreenMode = Metro.fullScreenMode.WINDOW;\n            }\n\n            this._createPlayer();\n            this._createControls();\n            this._createEvents();\n            this._setAspectRatio();\n\n            if (o.autoplay === true) {\n                this.play();\n            }\n\n            this._fireEvent(\"video-player-create\", {\n                element: element,\n                player: this.player\n            });\n        },\n\n        _createPlayer: function(){\n            var element = this.element, o = this.options, video = this.video;\n            var player = $(\"<div>\").addClass(\"media-player video-player \" + element[0].className);\n            var preloader = $(\"<div>\").addClass(\"preloader\").appendTo(player);\n            var logo = $(\"<a>\").attr(\"href\", o.logoTarget).addClass(\"logo\").appendTo(player);\n\n            player.insertBefore(element);\n            element.appendTo(player);\n\n            $.each(['muted', 'autoplay', 'controls', 'height', 'width', 'loop', 'poster', 'preload'], function(){\n                element.removeAttr(this);\n            });\n\n            element.attr(\"preload\", \"auto\");\n\n            if (o.poster !== \"\") {\n                element.attr(\"poster\", o.poster);\n            }\n\n            video.volume = o.volume;\n\n            preloader.activity({\n                type: \"cycle\",\n                style: \"color\"\n            });\n\n            preloader.hide();\n\n            this.preloader = preloader;\n\n            if (o.logo !== \"\") {\n                $(\"<img>\")\n                    .css({\n                        height: o.logoHeight,\n                        width: o.logoWidth\n                    })\n                    .attr(\"src\", o.logo).appendTo(logo);\n            }\n\n            if (o.src !== null) {\n                this._setSource(o.src);\n            }\n\n            element[0].className = \"\";\n\n            this.player = player;\n        },\n\n        _setSource: function(src){\n            var element = this.element;\n\n            element.find(\"source\").remove();\n            element.removeAttr(\"src\");\n            if (Array.isArray(src)) {\n                $.each(src, function(){\n                    var item = this;\n                    if (item.src === undefined) return ;\n                    $(\"<source>\").attr('src', item.src).attr('type', item.type !== undefined ? item.type : '').appendTo(element);\n                });\n            } else {\n                element.attr(\"src\", src);\n            }\n        },\n\n        _createControls: function(){\n            var that = this, element = this.element, o = this.options, video = this.elem;\n\n            var controls = $(\"<div>\").addClass(\"controls\").addClass(o.clsControls).insertAfter(element);\n\n            var stream = $(\"<div>\").addClass(\"stream\").appendTo(controls);\n            var streamSlider = $(\"<input>\").addClass(\"stream-slider ultra-thin cycle-marker\").appendTo(stream);\n\n            var volume = $(\"<div>\").addClass(\"volume\").appendTo(controls);\n            var volumeSlider = $(\"<input>\").addClass(\"volume-slider ultra-thin cycle-marker\").appendTo(volume);\n\n            var infoBox = $(\"<div>\").addClass(\"info-box\").appendTo(controls);\n\n            if (o.showInfo !== true) {\n                infoBox.hide();\n            }\n\n            Metro.makePlugin(streamSlider, \"slider\", {\n                clsMarker: \"bg-red\",\n                clsHint: \"bg-cyan fg-white\",\n                clsComplete: \"bg-cyan\",\n                hint: true,\n                onStart: function(){\n                    if (!video.paused) video.pause();\n                },\n                onStop: function(val){\n                    if (video.seekable.length > 0) {\n                        video.currentTime = (that.duration * val / 100).toFixed(0);\n                    }\n                    if (video.paused && video.currentTime > 0) {\n                        video.play();\n                    }\n                }\n            });\n\n            this.stream = streamSlider;\n\n            if (o.showStream !== true) {\n                stream.hide();\n            }\n\n            Metro.makePlugin(volumeSlider, \"slider\", {\n                clsMarker: \"bg-red\",\n                clsHint: \"bg-cyan fg-white\",\n                hint: true,\n                value: o.volume * 100,\n                onChangeValue: function(val){\n                    video.volume = val / 100;\n                }\n            });\n\n            this.volume = volumeSlider;\n\n            if (o.showVolume !== true) {\n                volume.hide();\n            }\n\n            var loop;\n\n            if (o.showLoop === true) loop = $(\"<button>\").attr(\"type\", \"button\").addClass(\"button square loop\").html(o.loopIcon).appendTo(controls);\n            if (o.showPlay === true) $(\"<button>\").attr(\"type\", \"button\").addClass(\"button square play\").html(o.playIcon).appendTo(controls);\n            if (o.showStop === true) $(\"<button>\").attr(\"type\", \"button\").addClass(\"button square stop\").html(o.stopIcon).appendTo(controls);\n            if (o.showMute === true) $(\"<button>\").attr(\"type\", \"button\").addClass(\"button square mute\").html(o.muteIcon).appendTo(controls);\n            if (o.showFull === true) $(\"<button>\").attr(\"type\", \"button\").addClass(\"button square full\").html(o.screenMoreIcon).appendTo(controls);\n\n            if (o.loop === true) {\n                loop.addClass(\"active\");\n                element.attr(\"loop\", \"loop\");\n            }\n\n            this._setVolume();\n\n            if (o.muted) {\n                that.volumeBackup = video.volume;\n                Metro.getPlugin(that.volume, 'slider').val(0);\n                video.volume = 0;\n            }\n\n            infoBox.html(\"00:00 / 00:00\");\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element, o = this.options, video = this.elem, player = this.player;\n\n            element.on(\"loadstart\", function(){\n                that.preloader.show();\n            });\n\n            element.on(\"loadedmetadata\", function(){\n                that.duration = video.duration.toFixed(0);\n                that._setInfo(0, that.duration);\n                Utils.exec(o.onMetadata, [video, player], element[0]);\n            });\n\n            element.on(\"canplay\", function(){\n                that._setBuffer();\n                that.preloader.hide();\n            });\n\n            element.on(\"progress\", function(){\n                that._setBuffer();\n            });\n\n            element.on(\"timeupdate\", function(){\n                var position = Math.round(video.currentTime * 100 / that.duration);\n                that._setInfo(video.currentTime, that.duration);\n                Metro.getPlugin(that.stream, 'slider').val(position);\n                Utils.exec(o.onTime, [video.currentTime, that.duration, video, player], element[0]);\n            });\n\n            element.on(\"waiting\", function(){\n                that.preloader.show();\n            });\n\n            element.on(\"loadeddata\", function(){\n\n            });\n\n            element.on(\"play\", function(){\n                player.find(\".play\").html(o.pauseIcon);\n                Utils.exec(o.onPlay, [video, player], element[0]);\n                that._onMouse();\n            });\n\n            element.on(\"pause\", function(){\n                player.find(\".play\").html(o.playIcon);\n                Utils.exec(o.onPause, [video, player], element[0]);\n                that._offMouse();\n            });\n\n            element.on(\"stop\", function(){\n                Metro.getPlugin(that.stream, 'slider').val(0);\n                Utils.exec(o.onStop, [video, player], element[0]);\n                that._offMouse();\n            });\n\n            element.on(\"ended\", function(){\n                Metro.getPlugin(that.stream, 'slider').val(0);\n                Utils.exec(o.onEnd, [video, player], element[0]);\n                that._offMouse();\n            });\n\n            element.on(\"volumechange\", function(){\n                that._setVolume();\n            });\n\n            player.on(Metro.events.click, \".play\", function(){\n                if (video.paused) {\n                    that.play();\n                } else {\n                    that.pause();\n                }\n            });\n\n            player.on(Metro.events.click, \".stop\", function(){\n                that.stop();\n            });\n\n            player.on(Metro.events.click, \".mute\", function(){\n                that._toggleMute();\n            });\n\n            player.on(Metro.events.click, \".loop\", function(){\n                that._toggleLoop();\n            });\n\n            player.on(Metro.events.click, \".full\", function(){\n                that.fullscreen = !that.fullscreen;\n                player.find(\".full\").html(that.fullscreen === true ? o.screenLessIcon : o.screenMoreIcon);\n                if (o.fullScreenMode === Metro.fullScreenMode.WINDOW) {\n                    if (that.fullscreen === true) {\n                        player.addClass(\"full-screen\");\n                    } else {\n                        player.removeClass(\"full-screen\");\n                    }\n                } else {\n                    if (that.fullscreen === true) {\n\n                        Metro.requestFullScreen(video);\n\n                        if (that.fullScreenInterval === false) that.fullScreenInterval = setInterval(function(){\n                            if (Metro.inFullScreen() === false) {\n                                that.fullscreen = false;\n                                clearInterval(that.fullScreenInterval);\n                                that.fullScreenInterval = false;\n                                player.find(\".full\").html(o.screenMoreIcon);\n                            }\n\n                        }, 1000);\n                    } else {\n                        Metro.exitFullScreen();\n                    }\n                }\n\n                // if (that.fullscreen === true) {\n                //     $(document).on(Metro.events.keyup + \".video-player\", function(e){\n                //         if (e.keyCode === 27) {\n                //             player.find(\".full\").click();\n                //         }\n                //     });\n                // } else {\n                //     $(document).off(Metro.events.keyup + \".video-player\");\n                // }\n            });\n\n            $(window).on(Metro.events.keyup, function(e){\n                if (that.fullscreen && e.keyCode === 27) {\n                    player.find(\".full\").click();\n                }\n            }, {ns: this.id});\n\n            $(window).on(Metro.events.resize, function(){\n                that._setAspectRatio();\n            }, {ns: this.id});\n\n        },\n\n        _onMouse: function(){\n            var o = this.options, player = this.player;\n\n            player.on(Metro.events.enter, function(){\n                var controls = player.find(\".controls\");\n                if (o.controlsHide > 0 && controls.style('display') === 'none') {\n                    controls.stop(true).fadeIn(500, function(){\n                        controls.css(\"display\", \"flex\");\n                    });\n                }\n            });\n\n            player.on(Metro.events.leave, function(){\n                var controls = player.find(\".controls\");\n                if (o.controlsHide > 0 && parseInt(controls.style('opacity')) === 1) {\n                    setTimeout(function () {\n                        controls.stop(true).fadeOut(500);\n                    }, o.controlsHide);\n                }\n            });\n        },\n\n        _offMouse: function(){\n            var player = this.player, o = this.options;\n            var controls = player.find(\".controls\");\n\n            player.off(Metro.events.enter);\n            player.off(Metro.events.leave);\n\n            if (o.controlsHide > 0 && controls.style('display') === 'none') {\n                controls.stop(true).fadeIn(500, function(){\n                    controls.css(\"display\", \"flex\");\n                });\n            }\n        },\n\n        _toggleLoop: function(){\n            var loop = this.player.find(\".loop\");\n            if (loop.length === 0) return ;\n            loop.toggleClass(\"active\");\n            if (loop.hasClass(\"active\")) {\n                this.element.attr(\"loop\", \"loop\");\n            } else {\n                this.element.removeAttr(\"loop\");\n            }\n        },\n\n        _toggleMute: function(){\n            this.muted = !this.muted;\n            if (this.muted === false) {\n                this.video.volume = this.volumeBackup;\n            } else {\n                this.volumeBackup = this.video.volume;\n                this.video.volume = 0;\n            }\n            Metro.getPlugin(this.volume, 'slider').val(this.muted === false ? this.volumeBackup * 100 : 0);\n        },\n\n        _setInfo: function(a, b){\n            this.player.find(\".info-box\").html(Utils.secondsToFormattedString(Math.round(a)) + \" / \" + Utils.secondsToFormattedString(Math.round(b)));\n        },\n\n        _setBuffer: function(){\n            var buffer = this.video.buffered.length ? Math.round(Math.floor(this.video.buffered.end(0)) / Math.floor(this.video.duration) * 100) : 0;\n            Metro.getPlugin(this.stream, 'slider').buff(buffer);\n        },\n\n        _setVolume: function(){\n            var video = this.video, player = this.player, o = this.options;\n\n            var volumeButton = player.find(\".mute\");\n            var volume = video.volume * 100;\n            if (volume > 1 && volume < 30) {\n                volumeButton.html(o.volumeLowIcon);\n            } else if (volume >= 30 && volume < 60) {\n                volumeButton.html(o.volumeMediumIcon);\n            } else if (volume >= 60 && volume <= 100) {\n                volumeButton.html(o.volumeHighIcon);\n            } else {\n                volumeButton.html(o.muteIcon);\n            }\n        },\n\n        _setAspectRatio: function(){\n            var player = this.player, o = this.options;\n            var width = player.outerWidth();\n            var height;\n\n            switch (o.aspectRatio) {\n                case Metro.aspectRatio.SD: height = Utils.aspectRatioH(width, \"4/3\"); break;\n                case Metro.aspectRatio.CINEMA: height = Utils.aspectRatioH(width, \"21/9\"); break;\n                default: height = Utils.aspectRatioH(width, \"16/9\");\n            }\n\n            player.outerHeight(height);\n        },\n\n        aspectRatio: function(ratio){\n            this.options.aspectRatio = ratio;\n            this._setAspectRatio();\n        },\n\n        play: function(src){\n            if (src !== undefined) {\n                this._setSource(src);\n            }\n\n            if (this.element.attr(\"src\") === undefined && this.element.find(\"source\").length === 0) {\n                return ;\n            }\n\n            this.isPlaying = true;\n\n            this.video.play();\n        },\n\n        pause: function(){\n            this.isPlaying = false;\n            this.video.pause();\n        },\n\n        resume: function(){\n            if (this.video.paused) {\n                this.play();\n            }\n        },\n\n        stop: function(){\n            this.isPlaying = false;\n            this.video.pause();\n            this.video.currentTime = 0;\n            Metro.getPlugin(this.stream, 'slider').val(0);\n            this._offMouse();\n        },\n\n        setVolume: function(v){\n            if (v === undefined) {\n                return this.video.volume;\n            }\n\n            if (v > 1) {\n                v /= 100;\n            }\n\n            this.video.volume = v;\n            Metro.getPlugin(this.volume[0], 'slider').val(v*100);\n        },\n\n        loop: function(){\n            this._toggleLoop();\n        },\n\n        mute: function(){\n            this._toggleMute();\n        },\n\n        changeAspectRatio: function(){\n            this.options.aspectRatio = this.element.attr(\"data-aspect-ratio\");\n            this._setAspectRatio();\n        },\n\n        changeSource: function(){\n            var src = JSON.parse(this.element.attr('data-src'));\n            this.play(src);\n        },\n\n        changeVolume: function(){\n            var volume = this.element.attr(\"data-volume\");\n            this.setVolume(volume);\n        },\n\n        changeAttribute: function(attributeName){\n            switch (attributeName) {\n                case \"data-aspect-ratio\": this.changeAspectRatio(); break;\n                case \"data-src\": this.changeSource(); break;\n                case \"data-volume\": this.changeVolume(); break;\n            }\n        },\n\n        destroy: function(){\n            var element = this.element, player = this.player;\n\n            Metro.getPlugin(this.stream, \"slider\").destroy();\n            Metro.getPlugin(this.volume, \"slider\").destroy();\n\n            element.off(\"loadstart\");\n            element.off(\"loadedmetadata\");\n            element.off(\"canplay\");\n            element.off(\"progress\");\n            element.off(\"timeupdate\");\n            element.off(\"waiting\");\n            element.off(\"loadeddata\");\n            element.off(\"play\");\n            element.off(\"pause\");\n            element.off(\"stop\");\n            element.off(\"ended\");\n            element.off(\"volumechange\");\n\n            player.off(Metro.events.click, \".play\");\n            player.off(Metro.events.click, \".stop\");\n            player.off(Metro.events.click, \".mute\");\n            player.off(Metro.events.click, \".loop\");\n            player.off(Metro.events.click, \".full\");\n\n            $(window).off(Metro.events.keyup,{ns: this.id});\n            $(window).off(Metro.events.resize,{ns: this.id});\n\n            return element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n\n    var Utils = Metro.utils;\n    var ViewportCheckDefaultConfig = {\n        onViewport: Metro.noop,\n        onViewportEnter: Metro.noop,\n        onViewportLeave: Metro.noop,\n        onViewportCheckCreate: Metro.noop\n    };\n\n    Metro.viewportCheckSetup = function (options) {\n        ViewportCheckDefaultConfig = $.extend({}, ViewportCheckDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroViewportCheckSetup\"] !== undefined) {\n        Metro.viewportCheckSetup(window[\"metroViewportCheckSetup\"]);\n    }\n\n    Metro.Component('viewport-check', {\n        init: function( options, elem ) {\n            this._super(elem, options, ViewportCheckDefaultConfig, {\n                // define instance vars here\n                inViewport: false,\n                id: Utils.elementId(\"viewport-check\")\n            });\n            return this;\n        },\n\n        _create: function(){\n            this.inViewport = Utils.inViewport(this.elem);\n\n            this._createEvents();\n\n            this._fireEvent('viewport-check-create');\n        },\n\n        _createEvents: function(){\n            var that = this, elem = this.elem;\n\n            $(window).on(Metro.events.scroll, function(){\n                var oldState = that.inViewport;\n\n                that.inViewport = Utils.inViewport(elem);\n\n                if (oldState !== that.inViewport) {\n                    if (that.inViewport) {\n                        that._fireEvent(\"viewport-enter\");\n                    } else {\n                        that._fireEvent(\"viewport-leave\");\n                    }\n                }\n\n                that._fireEvent(\"viewport\", {\n                    state: that.inViewport\n                });\n            }, {ns: that.id});\n        },\n\n        state: function(){\n            return this.inViewport;\n        },\n\n        destroy: function(){\n            $(window).off(Metro.events.scroll, {ns: this.id});\n\n            return this.element;\n        }\n    });\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var WindowDefaultConfig = {\n        windowDeferred: 0,\n        hidden: false,\n        width: \"auto\",\n        height: \"auto\",\n        btnClose: true,\n        btnMin: true,\n        btnMax: true,\n        draggable: true,\n        dragElement: \".window-caption .icon, .window-caption .title\",\n        dragArea: \"parent\",\n        shadow: false,\n        icon: \"\",\n        title: \"Window\",\n        content: null,\n        resizable: true,\n        overlay: false,\n        overlayColor: 'transparent',\n        overlayAlpha: .5,\n        modal: false,\n        position: \"absolute\",\n        checkEmbed: true,\n        top: \"auto\",\n        left: \"auto\",\n        place: \"auto\",\n        closeAction: Metro.actions.REMOVE,\n        customButtons: null,\n\n        clsCustomButton: \"\",\n        clsCaption: \"\",\n        clsContent: \"\",\n        clsWindow: \"\",\n\n        _runtime: false,\n\n        minWidth: 0,\n        minHeight: 0,\n        maxWidth: 0,\n        maxHeight: 0,\n        onDragStart: Metro.noop,\n        onDragStop: Metro.noop,\n        onDragMove: Metro.noop,\n        onCaptionDblClick: Metro.noop,\n        onCloseClick: Metro.noop,\n        onMaxClick: Metro.noop,\n        onMinClick: Metro.noop,\n        onResizeStart: Metro.noop,\n        onResizeStop: Metro.noop,\n        onResize: Metro.noop,\n        onWindowCreate: Metro.noop,\n        onShow: Metro.noop,\n        onWindowDestroy: Metro.noop,\n        onCanClose: Metro.noop_true,\n        onClose: Metro.noop\n    };\n\n    Metro.windowSetup = function (options) {\n        WindowDefaultConfig = $.extend({}, WindowDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroWindowSetup\"] !== undefined) {\n        Metro.windowSetup(window[\"metroWindowSetup\"]);\n    }\n\n    Metro.Component('window', {\n        init: function( options, elem ) {\n            this._super(elem, options, WindowDefaultConfig, {\n                win: null,\n                overlay: null,\n                position: {\n                    top: 0,\n                    left: 0\n                },\n                hidden: false,\n                content: null\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var that = this, element = this.element, o = this.options;\n            var win, overlay;\n            var parent = o.dragArea === \"parent\" ? element.parent() : $(o.dragArea);\n            var _content;\n\n            if (o.modal === true) {\n                o.btnMax = false;\n                o.btnMin = false;\n                o.resizable = false;\n            }\n\n            if (Utils.isNull(o.content)) {\n                o.content = element;\n            } else {\n                if (Utils.isUrl(o.content) && Utils.isVideoUrl(o.content)) {\n                    o.content = Utils.embedUrl(o.content);\n                    element.css({\n                        height: \"100%\"\n                    });\n                } else\n\n                if (!Utils.isQ(o.content) && Utils.isFunc(o.content)) {\n                    o.content = Utils.exec(o.content);\n                }\n\n                _content = $(o.content);\n                if (_content.length === 0) {\n                    element.appendText(o.content);\n                } else {\n                    element.append(_content);\n                }\n                o.content = element;\n            }\n\n            if (o._runtime === true) {\n                this._runtime(element, \"window\");\n            }\n\n            win = this._window(o);\n            win.addClass(\"no-visible\");\n\n            parent.append(win);\n\n            if (o.overlay === true) {\n                overlay = this._overlay();\n                overlay.appendTo(win.parent());\n                this.overlay = overlay;\n            }\n\n            this.win = win;\n\n            this._fireEvent(\"window-create\", {\n                win: this.win[0],\n                element: element\n            });\n\n            setTimeout(function(){\n                that._setPosition();\n\n                if (o.hidden !== true) {\n                    that.win.removeClass(\"no-visible\");\n                }\n\n                that._fireEvent(\"show\", {\n                    win: that.win[0],\n                    element: element\n                });\n            }, 100);\n        },\n\n        _setPosition: function(){\n            var o = this.options;\n            var win = this.win;\n            var parent = o.dragArea === \"parent\" ? win.parent() : $(o.dragArea);\n            var top_center = parent.height() / 2 - win[0].offsetHeight / 2;\n            var left_center = parent.width() / 2 - win[0].offsetWidth / 2;\n            var top, left, right, bottom;\n\n            if (o.place !== 'auto') {\n\n                switch (o.place.toLowerCase()) {\n                    case \"top-left\": top = 0; left = 0; right = \"auto\"; bottom = \"auto\"; break;\n                    case \"top-center\": top = 0; left = left_center; right = \"auto\"; bottom = \"auto\"; break;\n                    case \"top-right\": top = 0; right = 0; left = \"auto\"; bottom = \"auto\"; break;\n                    case \"right-center\": top = top_center; right = 0; left = \"auto\"; bottom = \"auto\"; break;\n                    case \"bottom-right\": bottom = 0; right = 0; left = \"auto\"; top = \"auto\"; break;\n                    case \"bottom-center\": bottom = 0; left = left_center; right = \"auto\"; top = \"auto\"; break;\n                    case \"bottom-left\": bottom = 0; left = 0; right = \"auto\"; top = \"auto\"; break;\n                    case \"left-center\": top = top_center; left = 0; right = \"auto\"; bottom = \"auto\"; break;\n                    default: top = top_center; left = left_center; bottom = \"auto\"; right = \"auto\";\n                }\n\n                win.css({\n                    top: top,\n                    left: left,\n                    bottom: bottom,\n                    right: right\n                });\n            }\n        },\n\n        _window: function(o){\n            var that = this;\n            var win, caption, content, icon, title, buttons, btnClose, btnMin, btnMax, resizer, status;\n            var width = o.width, height = o.height;\n\n            win = $(\"<div>\").addClass(\"window\");\n\n            if (o.modal === true) {\n                win.addClass(\"modal\");\n            }\n\n            caption = $(\"<div>\").addClass(\"window-caption\");\n            content = $(\"<div>\").addClass(\"window-content\");\n\n            win.append(caption);\n            win.append(content);\n\n            if (o.status === true) {\n                status = $(\"<div>\").addClass(\"window-status\");\n                win.append(status);\n            }\n\n            if (o.shadow === true) {\n                win.addClass(\"win-shadow\");\n            }\n\n            if (Utils.isValue(o.icon)) {\n                icon = $(\"<span>\").addClass(\"icon\").html(o.icon);\n                icon.appendTo(caption);\n            }\n\n            title = $(\"<span>\").addClass(\"title\").html(Utils.isValue(o.title) ? o.title : \"&nbsp;\");\n            title.appendTo(caption);\n\n            if (!Utils.isNull(o.content)) {\n                if (Utils.isQ(o.content)) {\n                    o.content.appendTo(content);\n                } else {\n                    content.html(o.content);\n                }\n            }\n\n            buttons = $(\"<div>\").addClass(\"buttons\");\n            buttons.appendTo(caption);\n\n            if (o.btnMax === true) {\n                btnMax = $(\"<span>\").addClass(\"button btn-max sys-button\");\n                btnMax.appendTo(buttons);\n            }\n\n            if (o.btnMin === true) {\n                btnMin = $(\"<span>\").addClass(\"button btn-min sys-button\");\n                btnMin.appendTo(buttons);\n            }\n\n            if (o.btnClose === true) {\n                btnClose = $(\"<span>\").addClass(\"button btn-close sys-button\");\n                btnClose.appendTo(buttons);\n            }\n\n            if (Utils.isValue(o.customButtons)) {\n                var customButtons = [];\n\n                if (Utils.isObject(o.customButtons) !== false) {\n                    o.customButtons = Utils.isObject(o.customButtons);\n                }\n\n                if (typeof o.customButtons === \"string\" && o.customButtons.indexOf(\"{\") > -1) {\n                    customButtons = JSON.parse(o.customButtons);\n                } else if (typeof o.customButtons === \"object\" && Utils.objectLength(o.customButtons) > 0) {\n                    customButtons = o.customButtons;\n                } else {\n                    console.warn(\"Unknown format for custom buttons\");\n                }\n\n                $.each(customButtons, function(){\n                    var item = this;\n                    var customButton = $(\"<span>\");\n\n                    customButton\n                        .addClass(\"button btn-custom\")\n                        .addClass(o.clsCustomButton)\n                        .addClass(item.cls)\n                        .attr(\"tabindex\", -1)\n                        .html(item.html);\n\n                    if (item.attr && typeof item.attr === 'object') {\n                        $.each(item.attr, function(k, v){\n                            customButton.attr(Cake.dashedName(k), v);\n                        });\n                    }\n\n                    customButton.data(\"action\", item.onclick);\n\n                    buttons.prepend(customButton);\n                });\n            }\n\n            caption.on(Metro.events.stop, \".btn-custom\", function(e){\n                if (Utils.isRightMouse(e)) return;\n                var button = $(this);\n                var action = button.data(\"action\");\n                Utils.exec(action, [button], this);\n            });\n\n            win.attr(\"id\", o.id === undefined ? Utils.elementId(\"window\") : o.id);\n\n            win.on(Metro.events.dblclick, \".window-caption\", function(e){\n                that.maximized(e);\n            });\n\n            caption.on(Metro.events.click, \".btn-max, .btn-min, .btn-close\", function(e){\n                if (Utils.isRightMouse(e)) return;\n                var target = $(e.target);\n                if (target.hasClass(\"btn-max\")) that.maximized(e);\n                if (target.hasClass(\"btn-min\")) that.minimized(e);\n                if (target.hasClass(\"btn-close\")) that.close(e);\n            });\n\n            if (o.draggable === true) {\n                Metro.makePlugin(win, \"draggable\", {\n                    dragContext: win[0],\n                    dragElement: o.dragElement,\n                    dragArea: o.dragArea,\n                    onDragStart: o.onDragStart,\n                    onDragStop: o.onDragStop,\n                    onDragMove: o.onDragMove\n                });\n            }\n\n            win.addClass(o.clsWindow);\n            caption.addClass(o.clsCaption);\n            content.addClass(o.clsContent);\n\n            if (o.minWidth === 0) {\n                o.minWidth = 34;\n                $.each(buttons.children(\".btn-custom\"), function(){\n                    o.minWidth += Utils.hiddenElementSize(this).width;\n                });\n                if (o.btnMax) o.minWidth += 34;\n                if (o.btnMin) o.minWidth += 34;\n                if (o.btnClose) o.minWidth += 34;\n            }\n\n            if (o.minWidth > 0 && !isNaN(o.width) && o.width < o.minWidth) {\n                width = o.minWidth;\n            }\n            if (o.minHeight > 0 && !isNaN(o.height) && o.height > o.minHeight) {\n                height = o.minHeight;\n            }\n\n            if (o.resizable === true) {\n                resizer = $(\"<span>\").addClass(\"resize-element\");\n                resizer.appendTo(win);\n                win.addClass(\"resizable\");\n\n                Metro.makePlugin(win, \"resizable\", {\n                    minWidth: o.minWidth,\n                    minHeight: o.minHeight,\n                    maxWidth: o.maxWidth,\n                    maxHeight: o.maxHeight,\n                    resizeElement: \".resize-element\",\n                    onResizeStart: o.onResizeStart,\n                    onResizeStop: o.onResizeStop,\n                    onResize: o.onResize\n                });\n            }\n\n            win.css({\n                width: width,\n                height: height,\n                position: o.position,\n                top: o.top,\n                left: o.left\n            });\n\n            return win;\n        },\n\n        _overlay: function(){\n            var o = this.options;\n\n            var overlay = $(\"<div>\");\n            overlay.addClass(\"overlay\");\n\n            if (o.overlayColor === 'transparent') {\n                overlay.addClass(\"transparent\");\n            } else {\n                overlay.css({\n                    background: Metro.colors.toRGBA(o.overlayColor, o.overlayAlpha)\n                });\n            }\n\n            return overlay;\n        },\n\n        width: function(v){\n            var win = this.win;\n\n            if (!Utils.isValue(v)) {\n                return win.width();\n            }\n\n            win.css(\"width\", parseInt(v));\n\n            return this;\n        },\n\n        height: function(v){\n            var win = this.win;\n\n            if (!Utils.isValue(v)) {\n                return win.height();\n            }\n\n            win.css(\"height\", parseInt(v));\n\n            return this;\n        },\n\n        maximized: function(e){\n            var win = this.win, o = this.options;\n            var target = $(e.target);\n\n            if (o.btnMax) {\n                win.removeClass(\"minimized\");\n                win.toggleClass(\"maximized\");\n            }\n\n            if (target.hasClass && target.hasClass(\"title\")) {\n\n                this._fireEvent(\"caption-dbl-click\", {\n                    win: win[0]\n                });\n\n            } else {\n\n                this._fireEvent(\"max-click\", {\n                    win: win[0]\n                });\n\n            }\n        },\n\n        minimized: function(){\n            var win = this.win, o = this.options;\n\n            if (o.btnMin) {\n                win.removeClass(\"maximized\");\n                win.toggleClass(\"minimized\");\n            }\n\n            this._fireEvent(\"min-click\", {\n                win: win[0]\n            });\n        },\n\n        close: function(){\n            var that = this, win = this.win,  o = this.options;\n\n            if (Utils.exec(o.onCanClose, [win]) === false) {\n                return false;\n            }\n\n            var timeout = 0;\n\n            if (o.onClose !== Metro.noop) {\n                timeout = 500;\n            }\n\n            this._fireEvent(\"close\", {\n                win: win[0]\n            });\n\n            setTimeout(function(){\n                if (o.modal === true) {\n                    win.siblings(\".overlay\").remove();\n                }\n\n                that._fireEvent(\"close-click\", {\n                    win: win[0]\n                });\n\n                if (o.closeAction === Metro.actions.REMOVE) {\n                    that._fireEvent(\"window-destroy\", {\n                        win: win[0]\n                    });\n                    win.remove();\n                } else {\n                    that.hide();\n                }\n\n            }, timeout);\n        },\n\n        hide: function(){\n            var win = this.win;\n\n            win.css({\n                display: \"none\"\n            });\n\n            this._fireEvent(\"hide\", {\n                win: win[0]\n            });\n        },\n\n        show: function(){\n            var win = this.win;\n\n            win\n                .removeClass(\"no-visible\")\n                .css({\n                    display: \"flex\"\n                });\n\n            this._fireEvent(\"show\", {\n                win: win[0]\n            });\n\n        },\n\n        toggle: function(){\n            if (this.win.css(\"display\") === \"none\" || this.win.hasClass(\"no-visible\")) {\n                this.show();\n            } else {\n                this.hide();\n            }\n        },\n\n        isOpen: function(){\n            return this.win.hasClass(\"no-visible\");\n        },\n\n        min: function(a){\n            a ? this.win.addClass(\"minimized\") : this.win.removeClass(\"minimized\");\n        },\n\n        max: function(a){\n            a ? this.win.addClass(\"maximized\") : this.win.removeClass(\"maximized\");\n        },\n\n        changeClass: function(a){\n            var element = this.element, win = this.win, o = this.options;\n\n            if (a === \"data-cls-window\") {\n                win[0].className = \"window \" + (o.resizable ? \" resizable \" : \" \") + element.attr(\"data-cls-window\");\n            }\n            if (a === \"data-cls-caption\") {\n                win.find(\".window-caption\")[0].className = \"window-caption \" + element.attr(\"data-cls-caption\");\n            }\n            if (a === \"data-cls-content\") {\n                win.find(\".window-content\")[0].className = \"window-content \" + element.attr(\"data-cls-content\");\n            }\n        },\n\n        toggleShadow: function(){\n            var element = this.element, win = this.win;\n            var flag = JSON.parse(element.attr(\"data-shadow\"));\n            if (flag === true) {\n                win.addClass(\"win-shadow\");\n            } else {\n                win.removeClass(\"win-shadow\");\n            }\n        },\n\n        setContent: function(c){\n            var element = this.element, win = this.win;\n            var content = Utils.isValue(c) ? c : element.attr(\"data-content\");\n            var result;\n\n            if (!Utils.isQ(content) && Utils.isFunc(content)) {\n                result = Utils.exec(content);\n            } else if (Utils.isQ(content)) {\n                result = content.html();\n            } else {\n                result = content;\n            }\n\n            win.find(\".window-content\").html(result);\n        },\n\n        setTitle: function(t){\n            var element = this.element, win = this.win;\n            var title = Utils.isValue(t) ? t : element.attr(\"data-title\");\n            win.find(\".window-caption .title\").html(title);\n        },\n\n        setIcon: function(i){\n            var element = this.element, win = this.win;\n            var icon = Utils.isValue(i) ? i : element.attr(\"data-icon\");\n            win.find(\".window-caption .icon\").html(icon);\n        },\n\n        getIcon: function(){\n            return this.win.find(\".window-caption .icon\").html();\n        },\n\n        getTitle: function(){\n            return this.win.find(\".window-caption .title\").html();\n        },\n\n        toggleDraggable: function(f){\n            var win = this.win;\n            var flag = Utils.bool(f);\n            var drag = Metro.getPlugin(win, \"draggable\");\n            if (flag === true) {\n                drag.on();\n            } else {\n                drag.off();\n            }\n        },\n\n        toggleResizable: function(f){\n            var win = this.win;\n            var flag = Utils.bool(f);\n            var resize = Metro.getPlugin(win, \"resizable\");\n            if (flag === true) {\n                resize.on();\n                win.find(\".resize-element\").removeClass(\"resize-element-disabled\");\n            } else {\n                resize.off();\n                win.find(\".resize-element\").addClass(\"resize-element-disabled\");\n            }\n        },\n\n        changePlace: function (p) {\n            var element = this.element, win = this.win;\n            var place = Utils.isValue(p) ? p : element.attr(\"data-place\");\n            win.addClass(place);\n        },\n\n        pos: function(top, left){\n            var win = this.win;\n            win.css({\n                top: top,\n                left: left\n            });\n            return this;\n        },\n\n        top: function(v){\n            this.win.css({\n                top: v\n            });\n            return this;\n        },\n\n        left: function(v){\n            this.win.css({\n                left: v\n            });\n            return this;\n        },\n\n        changeAttribute: function(attr, value){\n            var changePos = function(a, v){\n                var win = this.win;\n                var pos;\n                if (a === \"data-top\") {\n                    pos = parseInt(v);\n                    if (!isNaN(pos)) {\n                        return ;\n                    }\n                    win.css(\"top\", pos);\n                }\n                if (a === \"data-left\") {\n                    pos = parseInt(v);\n                    if (!isNaN(pos)) {\n                        return ;\n                    }\n                    win.css(\"left\", pos);\n                }\n            };\n\n            var toggleButtons = function(a, v) {\n                var win = this.win;\n                var btnClose = win.find(\".btn-close\");\n                var btnMin = win.find(\".btn-min\");\n                var btnMax = win.find(\".btn-max\");\n                var _v = Utils.bool(v);\n                var func = _v ? \"show\" : \"hide\";\n\n                switch (a) {\n                    case \"data-btn-close\": btnClose[func](); break;\n                    case \"data-btn-min\": btnMin[func](); break;\n                    case \"data-btn-max\": btnMax[func](); break;\n                }\n            };\n\n            var changeSize = function(a, v){\n                var win = this.win;\n                if (a === \"data-width\") {\n                    win.css(\"width\", +v);\n                }\n                if (a === \"data-height\") {\n                    win.css(\"height\", +v);\n                }\n            };\n\n            switch (attr) {\n                case \"data-btn-close\":\n                case \"data-btn-min\":\n                case \"data-btn-max\": toggleButtons(attr, value); break;\n                case \"data-width\":\n                case \"data-height\": changeSize(attr, value); break;\n                case \"data-cls-window\":\n                case \"data-cls-caption\":\n                case \"data-cls-content\": this.changeClass(attr); break;\n                case \"data-shadow\": this.toggleShadow(); break;\n                case \"data-icon\": this.setIcon(); break;\n                case \"data-title\": this.setTitle(); break;\n                case \"data-content\": this.setContent(); break;\n                case \"data-draggable\": this.toggleDraggable(value); break;\n                case \"data-resizable\": this.toggleResizable(value); break;\n                case \"data-top\":\n                case \"data-left\": changePos(attr, value); break;\n                case \"data-place\": this.changePlace(); break;\n            }\n        },\n\n        destroy: function(){\n            return this.element;\n        }\n    });\n\n    Metro['window'] = {\n\n        isWindow: function(el){\n            return Utils.isMetroObject(el, \"window\");\n        },\n\n        min: function(el, a){\n            if (!this.isWindow(el)) {\n                return false;\n            }\n            Metro.getPlugin(el,\"window\").min(a);\n        },\n\n        max: function(el, a){\n            if (!this.isWindow(el)) {\n                return false;\n            }\n            Metro.getPlugin(el, \"window\").max(a);\n        },\n\n        show: function(el){\n            if (!this.isWindow(el)) {\n                return false;\n            }\n            Metro.getPlugin(el, \"window\").show();\n        },\n\n        hide: function(el){\n            if (!this.isWindow(el)) {\n                return false;\n            }\n            Metro.getPlugin(el, \"window\").hide();\n        },\n\n        toggle: function(el){\n            if (!this.isWindow(el)) {\n                return false;\n            }\n            Metro.getPlugin(el, \"window\").toggle();\n        },\n\n        isOpen: function(el){\n            if (!this.isWindow(el)) {\n                return false;\n            }\n            var win = Metro.getPlugin(el,\"window\");\n            return win.isOpen();\n        },\n\n        close: function(el){\n            if (!this.isWindow(el)) {\n                return false;\n            }\n            Metro.getPlugin(el, \"window\").close();\n        },\n\n        pos: function(el, top, left){\n            if (!this.isWindow(el)) {\n                return false;\n            }\n            Metro.getPlugin(el, \"window\").pos(top, left);\n        },\n\n        top: function(el, top){\n            if (!this.isWindow(el)) {\n                return false;\n            }\n            Metro.getPlugin(el, \"window\").top(top);\n        },\n\n        left: function(el, left){\n            if (!this.isWindow(el)) {\n                return false;\n            }\n            Metro.getPlugin(el, \"window\").left(left);\n        },\n\n        width: function(el, width){\n            if (!this.isWindow(el)) {\n                return false;\n            }\n            Metro.getPlugin(el, \"window\").width(width);\n        },\n\n        height: function(el, height){\n            if (!this.isWindow(el)) {\n                return false;\n            }\n            Metro.getPlugin(el, \"window\").height(height);\n        },\n\n        create: function(options, parent){\n            var w;\n\n            w = $(\"<div>\").appendTo(parent ? $(parent) : $(\"body\"));\n\n            var w_options = $.extend({\n                _runtime: true\n            }, (options ? options : {}));\n\n            return Metro.makePlugin(w, \"window\", w_options);\n        }\n    };\n}(Metro, m4q));\r\n\r\n(function(Metro, $) {\n    'use strict';\n    var Utils = Metro.utils;\n    var WizardDefaultConfig = {\n        wizardDeferred: 0,\n        start: 1,\n        finish: 0,\n        iconHelp: \"<span class='default-icon-help'></span>\",\n        iconPrev: \"<span class='default-icon-left-arrow'></span>\",\n        iconNext: \"<span class='default-icon-right-arrow'></span>\",\n        iconFinish: \"<span class='default-icon-check'></span>\",\n\n        buttonMode: \"cycle\", // default, cycle, square\n        buttonOutline: true,\n        duration: 300,\n\n        clsWizard: \"\",\n        clsActions: \"\",\n        clsHelp: \"\",\n        clsPrev: \"\",\n        clsNext: \"\",\n        clsFinish: \"\",\n\n        onPage: Metro.noop,\n        onNextPage: Metro.noop,\n        onPrevPage: Metro.noop,\n        onFirstPage: Metro.noop,\n        onLastPage: Metro.noop,\n        onFinishPage: Metro.noop,\n        onHelpClick: Metro.noop,\n        onPrevClick: Metro.noop,\n        onNextClick: Metro.noop,\n        onFinishClick: Metro.noop,\n        onBeforePrev: Metro.noop_true,\n        onBeforeNext: Metro.noop_true,\n        onWizardCreate: Metro.noop\n    };\n\n    Metro.wizardSetup = function (options) {\n        WizardDefaultConfig = $.extend({}, WizardDefaultConfig, options);\n    };\n\n    if (typeof window[\"metroWizardSetup\"] !== undefined) {\n        Metro.wizardSetup(window[\"metroWizardSetup\"]);\n    }\n\n    Metro.Component('wizard', {\n        init: function( options, elem ) {\n            this._super(elem, options, WizardDefaultConfig, {\n                id: Utils.elementId('wizard')\n            });\n\n            return this;\n        },\n\n        _create: function(){\n            var element = this.element;\n\n            this._createWizard();\n            this._createEvents();\n\n            this._fireEvent(\"wizard-create\", {\n                element: element\n            });\n        },\n\n        _createWizard: function(){\n            var element = this.element, o = this.options;\n            var bar;\n\n            element.addClass(\"wizard\").addClass(o.view).addClass(o.clsWizard);\n\n            bar = $(\"<div>\").addClass(\"action-bar\").addClass(o.clsActions).appendTo(element);\n\n            var buttonMode = o.buttonMode === \"button\" ? \"\" : o.buttonMode;\n            if (o.buttonOutline === true) {\n                buttonMode += \" outline\";\n            }\n\n            if (o.iconHelp !== false) $(\"<button>\").attr(\"type\", \"button\").addClass(\"button wizard-btn-help\").addClass(buttonMode).addClass(o.clsHelp).html(Utils.isTag(o.iconHelp) ? o.iconHelp : $(\"<img>\").attr('src', o.iconHelp)).appendTo(bar);\n            if (o.iconPrev !== false) $(\"<button>\").attr(\"type\", \"button\").addClass(\"button wizard-btn-prev\").addClass(buttonMode).addClass(o.clsPrev).html(Utils.isTag(o.iconPrev) ? o.iconPrev : $(\"<img>\").attr('src', o.iconPrev)).appendTo(bar);\n            if (o.iconNext !== false) $(\"<button>\").attr(\"type\", \"button\").addClass(\"button wizard-btn-next\").addClass(buttonMode).addClass(o.clsNext).html(Utils.isTag(o.iconNext) ? o.iconNext : $(\"<img>\").attr('src', o.iconNext)).appendTo(bar);\n            if (o.iconFinish !== false) $(\"<button>\").attr(\"type\", \"button\").addClass(\"button wizard-btn-finish\").addClass(buttonMode).addClass(o.clsFinish).html(Utils.isTag(o.iconFinish) ? o.iconFinish : $(\"<img>\").attr('src', o.iconFinish)).appendTo(bar);\n\n            this.toPage(o.start);\n\n            this._setHeight();\n        },\n\n        _setHeight: function(){\n            var element = this.element;\n            var pages = element.children(\"section\");\n            var max_height = 0;\n\n            pages.children(\".page-content\").css(\"max-height\", \"none\");\n\n            $.each(pages, function(){\n                var h = $(this).height();\n                if (max_height < parseInt(h)) {\n                    max_height = h;\n                }\n            });\n\n            element.height(max_height);\n        },\n\n        _createEvents: function(){\n            var that = this, element = this.element;\n\n            element.on(Metro.events.click, \".wizard-btn-help\", function(){\n                var pages = element.children(\"section\");\n                var page = pages.get(that.current - 1);\n\n                that._fireEvent(\"help-click\", {\n                    index: that.current,\n                    page: page\n                });\n            });\n\n            element.on(Metro.events.click, \".wizard-btn-prev\", function(){\n                that.prev();\n                var pages = element.children(\"section\");\n                var page = pages.get(that.current - 1);\n\n                that._fireEvent(\"prev-click\", {\n                    index: that.current,\n                    page: page\n                });\n            });\n\n            element.on(Metro.events.click, \".wizard-btn-next\", function(){\n                that.next();\n                var pages = element.children(\"section\");\n                var page = pages.get(that.current - 1);\n\n                that._fireEvent(\"next-click\", {\n                    index: that.current,\n                    page: page\n                });\n            });\n\n            element.on(Metro.events.click, \".wizard-btn-finish\", function(){\n                var pages = element.children(\"section\");\n                var page = pages.get(that.current - 1);\n\n                that._fireEvent(\"finish-click\", {\n                    index: that.current,\n                    page: page\n                });\n            });\n\n            element.on(Metro.events.click, \".complete\", function(){\n                var index = $(this).index() + 1;\n                that.toPage(index);\n            });\n\n            $(window).on(Metro.events.resize, function(){\n                that._setHeight();\n            }, {ns: this.id});\n        },\n\n        next: function(){\n            var that = this, element = this.element, o = this.options;\n            var pages = element.children(\"section\");\n            var page = $(element.children(\"section\").get(this.current - 1));\n\n            if (this.current + 1 > pages.length || Utils.exec(o.onBeforeNext, [this.current, page, element]) === false) {\n                return ;\n            }\n\n            this.current++;\n\n            this.toPage(this.current);\n\n            page = $(element.children(\"section\").get(this.current - 1));\n\n            this._fireEvent(\"next-page\", {\n                index: that.current,\n                page: page[0]\n            });\n        },\n\n        prev: function(){\n            var that = this, element = this.element, o = this.options;\n            var page = $(element.children(\"section\").get(this.current - 1));\n\n            if (this.current - 1 === 0 || Utils.exec(o.onBeforePrev, [this.current, page, element]) === false) {\n                return ;\n            }\n\n            this.current--;\n\n            this.toPage(this.current);\n\n            page = $(element.children(\"section\").get(this.current - 1));\n\n            this._fireEvent(\"prev-page\", {\n                index: that.current,\n                page: page[0]\n            });\n        },\n\n        last: function(){\n            var that = this, element = this.element;\n            var page;\n\n            this.toPage(element.children(\"section\").length);\n\n            page = $(element.children(\"section\").get(this.current - 1));\n\n            this._fireEvent(\"last-page\", {\n                index: that.current,\n                page: page[0]\n            });\n        },\n\n        first: function(){\n            var that = this, element = this.element;\n            var page;\n\n            this.toPage(1);\n\n            page = $(element.children(\"section\").get(0));\n\n            this._fireEvent(\"first-page\", {\n                index: that.current,\n                page: page[0]\n            });\n        },\n\n        toPage: function(page){\n            var element = this.element, o = this.options;\n            var target = $(element.children(\"section\").get(page - 1));\n            var sections = element.children(\"section\");\n            var actions = element.find(\".action-bar\");\n\n            if (target.length === 0) {\n                return ;\n            }\n\n            var finish = element.find(\".wizard-btn-finish\").addClass(\"disabled\");\n            var next = element.find(\".wizard-btn-next\").addClass(\"disabled\");\n            var prev = element.find(\".wizard-btn-prev\").addClass(\"disabled\");\n\n            this.current = page;\n\n            element.children(\"section\")\n                .removeClass(\"complete current\")\n                .removeClass(o.clsCurrent)\n                .removeClass(o.clsComplete);\n\n            target.addClass(\"current\").addClass(o.clsCurrent);\n            target.prevAll().addClass(\"complete\").addClass(o.clsComplete);\n\n            var border_size = element.children(\"section.complete\").length === 0 ? 0 : parseInt(Utils.getStyleOne(element.children(\"section.complete\")[0], \"border-left-width\"));\n\n            actions.animate({\n                draw: {\n                    left: element.children(\"section.complete\").length * border_size + 41\n                },\n                dur: o.duration\n            });\n\n            if (\n                (this.current === sections.length) || (o.finish > 0 && this.current >= o.finish)\n            ) {\n                finish.removeClass(\"disabled\");\n            }\n\n            if (parseInt(o.finish) > 0 && this.current === parseInt(o.finish)) {\n\n                this._fireEvent(\"finish-page\", {\n                    index: this.current,\n                    page: target[0]\n                });\n            }\n\n            if (this.current < sections.length) {\n                next.removeClass(\"disabled\");\n            }\n\n            if (this.current > 1) {\n                prev.removeClass(\"disabled\");\n            }\n\n            this._fireEvent(\"page\", {\n                index: this.current,\n                page: target[0]\n            });\n        },\n\n        changeAttribute: function(){\n        },\n\n        destroy: function(){\n            var element = this.element;\n\n            element.off(Metro.events.click, \".wizard-btn-help\");\n            element.off(Metro.events.click, \".wizard-btn-prev\");\n            element.off(Metro.events.click, \".wizard-btn-next\");\n            element.off(Metro.events.click, \".wizard-btn-finish\");\n            element.off(Metro.events.click, \".complete\");\n            $(window).off(Metro.events.resize,{ns: this.id});\n\n            return element;\n        }\n    });\n}(Metro, m4q));\n\n//# sourceURL=webpack://playground/./node_modules/metro4/build/js/metro.js?");

/***/ }),

/***/ "./node_modules/source-map/lib/array-set.js":
/*!**************************************************!*\
  !*** ./node_modules/source-map/lib/array-set.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = __webpack_require__(/*! ./util */ \"./node_modules/source-map/lib/util.js\");\nvar has = Object.prototype.hasOwnProperty;\nvar hasNativeMap = typeof Map !== \"undefined\";\n\n/**\n * A data structure which is a combination of an array and a set. Adding a new\n * member is O(1), testing for membership is O(1), and finding the index of an\n * element is O(1). Removing elements from the set is not supported. Only\n * strings are supported for membership.\n */\nfunction ArraySet() {\n  this._array = [];\n  this._set = hasNativeMap ? new Map() : Object.create(null);\n}\n\n/**\n * Static method for creating ArraySet instances from an existing array.\n */\nArraySet.fromArray = function ArraySet_fromArray(aArray, aAllowDuplicates) {\n  var set = new ArraySet();\n  for (var i = 0, len = aArray.length; i < len; i++) {\n    set.add(aArray[i], aAllowDuplicates);\n  }\n  return set;\n};\n\n/**\n * Return how many unique items are in this ArraySet. If duplicates have been\n * added, than those do not count towards the size.\n *\n * @returns Number\n */\nArraySet.prototype.size = function ArraySet_size() {\n  return hasNativeMap ? this._set.size : Object.getOwnPropertyNames(this._set).length;\n};\n\n/**\n * Add the given string to this set.\n *\n * @param String aStr\n */\nArraySet.prototype.add = function ArraySet_add(aStr, aAllowDuplicates) {\n  var sStr = hasNativeMap ? aStr : util.toSetString(aStr);\n  var isDuplicate = hasNativeMap ? this.has(aStr) : has.call(this._set, sStr);\n  var idx = this._array.length;\n  if (!isDuplicate || aAllowDuplicates) {\n    this._array.push(aStr);\n  }\n  if (!isDuplicate) {\n    if (hasNativeMap) {\n      this._set.set(aStr, idx);\n    } else {\n      this._set[sStr] = idx;\n    }\n  }\n};\n\n/**\n * Is the given string a member of this set?\n *\n * @param String aStr\n */\nArraySet.prototype.has = function ArraySet_has(aStr) {\n  if (hasNativeMap) {\n    return this._set.has(aStr);\n  } else {\n    var sStr = util.toSetString(aStr);\n    return has.call(this._set, sStr);\n  }\n};\n\n/**\n * What is the index of the given string in the array?\n *\n * @param String aStr\n */\nArraySet.prototype.indexOf = function ArraySet_indexOf(aStr) {\n  if (hasNativeMap) {\n    var idx = this._set.get(aStr);\n    if (idx >= 0) {\n        return idx;\n    }\n  } else {\n    var sStr = util.toSetString(aStr);\n    if (has.call(this._set, sStr)) {\n      return this._set[sStr];\n    }\n  }\n\n  throw new Error('\"' + aStr + '\" is not in the set.');\n};\n\n/**\n * What is the element at the given index?\n *\n * @param Number aIdx\n */\nArraySet.prototype.at = function ArraySet_at(aIdx) {\n  if (aIdx >= 0 && aIdx < this._array.length) {\n    return this._array[aIdx];\n  }\n  throw new Error('No element indexed by ' + aIdx);\n};\n\n/**\n * Returns the array representation of this set (which has the proper indices\n * indicated by indexOf). Note that this is a copy of the internal array used\n * for storing the members so that no one can mess with internal state.\n */\nArraySet.prototype.toArray = function ArraySet_toArray() {\n  return this._array.slice();\n};\n\nexports.ArraySet = ArraySet;\n\n\n//# sourceURL=webpack://playground/./node_modules/source-map/lib/array-set.js?");

/***/ }),

/***/ "./node_modules/source-map/lib/base64-vlq.js":
/*!***************************************************!*\
  !*** ./node_modules/source-map/lib/base64-vlq.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n *\n * Based on the Base 64 VLQ implementation in Closure Compiler:\n * https://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/debugging/sourcemap/Base64VLQ.java\n *\n * Copyright 2011 The Closure Compiler Authors. All rights reserved.\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *  * Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above\n *    copyright notice, this list of conditions and the following\n *    disclaimer in the documentation and/or other materials provided\n *    with the distribution.\n *  * Neither the name of Google Inc. nor the names of its\n *    contributors may be used to endorse or promote products derived\n *    from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nvar base64 = __webpack_require__(/*! ./base64 */ \"./node_modules/source-map/lib/base64.js\");\n\n// A single base 64 digit can contain 6 bits of data. For the base 64 variable\n// length quantities we use in the source map spec, the first bit is the sign,\n// the next four bits are the actual value, and the 6th bit is the\n// continuation bit. The continuation bit tells us whether there are more\n// digits in this value following this digit.\n//\n//   Continuation\n//   |    Sign\n//   |    |\n//   V    V\n//   101011\n\nvar VLQ_BASE_SHIFT = 5;\n\n// binary: 100000\nvar VLQ_BASE = 1 << VLQ_BASE_SHIFT;\n\n// binary: 011111\nvar VLQ_BASE_MASK = VLQ_BASE - 1;\n\n// binary: 100000\nvar VLQ_CONTINUATION_BIT = VLQ_BASE;\n\n/**\n * Converts from a two-complement value to a value where the sign bit is\n * placed in the least significant bit.  For example, as decimals:\n *   1 becomes 2 (10 binary), -1 becomes 3 (11 binary)\n *   2 becomes 4 (100 binary), -2 becomes 5 (101 binary)\n */\nfunction toVLQSigned(aValue) {\n  return aValue < 0\n    ? ((-aValue) << 1) + 1\n    : (aValue << 1) + 0;\n}\n\n/**\n * Converts to a two-complement value from a value where the sign bit is\n * placed in the least significant bit.  For example, as decimals:\n *   2 (10 binary) becomes 1, 3 (11 binary) becomes -1\n *   4 (100 binary) becomes 2, 5 (101 binary) becomes -2\n */\nfunction fromVLQSigned(aValue) {\n  var isNegative = (aValue & 1) === 1;\n  var shifted = aValue >> 1;\n  return isNegative\n    ? -shifted\n    : shifted;\n}\n\n/**\n * Returns the base 64 VLQ encoded value.\n */\nexports.encode = function base64VLQ_encode(aValue) {\n  var encoded = \"\";\n  var digit;\n\n  var vlq = toVLQSigned(aValue);\n\n  do {\n    digit = vlq & VLQ_BASE_MASK;\n    vlq >>>= VLQ_BASE_SHIFT;\n    if (vlq > 0) {\n      // There are still more digits in this value, so we must make sure the\n      // continuation bit is marked.\n      digit |= VLQ_CONTINUATION_BIT;\n    }\n    encoded += base64.encode(digit);\n  } while (vlq > 0);\n\n  return encoded;\n};\n\n/**\n * Decodes the next base 64 VLQ value from the given string and returns the\n * value and the rest of the string via the out parameter.\n */\nexports.decode = function base64VLQ_decode(aStr, aIndex, aOutParam) {\n  var strLen = aStr.length;\n  var result = 0;\n  var shift = 0;\n  var continuation, digit;\n\n  do {\n    if (aIndex >= strLen) {\n      throw new Error(\"Expected more digits in base 64 VLQ value.\");\n    }\n\n    digit = base64.decode(aStr.charCodeAt(aIndex++));\n    if (digit === -1) {\n      throw new Error(\"Invalid base64 digit: \" + aStr.charAt(aIndex - 1));\n    }\n\n    continuation = !!(digit & VLQ_CONTINUATION_BIT);\n    digit &= VLQ_BASE_MASK;\n    result = result + (digit << shift);\n    shift += VLQ_BASE_SHIFT;\n  } while (continuation);\n\n  aOutParam.value = fromVLQSigned(result);\n  aOutParam.rest = aIndex;\n};\n\n\n//# sourceURL=webpack://playground/./node_modules/source-map/lib/base64-vlq.js?");

/***/ }),

/***/ "./node_modules/source-map/lib/base64.js":
/*!***********************************************!*\
  !*** ./node_modules/source-map/lib/base64.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar intToCharMap = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\n\n/**\n * Encode an integer in the range of 0 to 63 to a single base 64 digit.\n */\nexports.encode = function (number) {\n  if (0 <= number && number < intToCharMap.length) {\n    return intToCharMap[number];\n  }\n  throw new TypeError(\"Must be between 0 and 63: \" + number);\n};\n\n/**\n * Decode a single base 64 character code digit to an integer. Returns -1 on\n * failure.\n */\nexports.decode = function (charCode) {\n  var bigA = 65;     // 'A'\n  var bigZ = 90;     // 'Z'\n\n  var littleA = 97;  // 'a'\n  var littleZ = 122; // 'z'\n\n  var zero = 48;     // '0'\n  var nine = 57;     // '9'\n\n  var plus = 43;     // '+'\n  var slash = 47;    // '/'\n\n  var littleOffset = 26;\n  var numberOffset = 52;\n\n  // 0 - 25: ABCDEFGHIJKLMNOPQRSTUVWXYZ\n  if (bigA <= charCode && charCode <= bigZ) {\n    return (charCode - bigA);\n  }\n\n  // 26 - 51: abcdefghijklmnopqrstuvwxyz\n  if (littleA <= charCode && charCode <= littleZ) {\n    return (charCode - littleA + littleOffset);\n  }\n\n  // 52 - 61: 0123456789\n  if (zero <= charCode && charCode <= nine) {\n    return (charCode - zero + numberOffset);\n  }\n\n  // 62: +\n  if (charCode == plus) {\n    return 62;\n  }\n\n  // 63: /\n  if (charCode == slash) {\n    return 63;\n  }\n\n  // Invalid base64 digit.\n  return -1;\n};\n\n\n//# sourceURL=webpack://playground/./node_modules/source-map/lib/base64.js?");

/***/ }),

/***/ "./node_modules/source-map/lib/binary-search.js":
/*!******************************************************!*\
  !*** ./node_modules/source-map/lib/binary-search.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nexports.GREATEST_LOWER_BOUND = 1;\nexports.LEAST_UPPER_BOUND = 2;\n\n/**\n * Recursive implementation of binary search.\n *\n * @param aLow Indices here and lower do not contain the needle.\n * @param aHigh Indices here and higher do not contain the needle.\n * @param aNeedle The element being searched for.\n * @param aHaystack The non-empty array being searched.\n * @param aCompare Function which takes two elements and returns -1, 0, or 1.\n * @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\n *     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n */\nfunction recursiveSearch(aLow, aHigh, aNeedle, aHaystack, aCompare, aBias) {\n  // This function terminates when one of the following is true:\n  //\n  //   1. We find the exact element we are looking for.\n  //\n  //   2. We did not find the exact element, but we can return the index of\n  //      the next-closest element.\n  //\n  //   3. We did not find the exact element, and there is no next-closest\n  //      element than the one we are searching for, so we return -1.\n  var mid = Math.floor((aHigh - aLow) / 2) + aLow;\n  var cmp = aCompare(aNeedle, aHaystack[mid], true);\n  if (cmp === 0) {\n    // Found the element we are looking for.\n    return mid;\n  }\n  else if (cmp > 0) {\n    // Our needle is greater than aHaystack[mid].\n    if (aHigh - mid > 1) {\n      // The element is in the upper half.\n      return recursiveSearch(mid, aHigh, aNeedle, aHaystack, aCompare, aBias);\n    }\n\n    // The exact needle element was not found in this haystack. Determine if\n    // we are in termination case (3) or (2) and return the appropriate thing.\n    if (aBias == exports.LEAST_UPPER_BOUND) {\n      return aHigh < aHaystack.length ? aHigh : -1;\n    } else {\n      return mid;\n    }\n  }\n  else {\n    // Our needle is less than aHaystack[mid].\n    if (mid - aLow > 1) {\n      // The element is in the lower half.\n      return recursiveSearch(aLow, mid, aNeedle, aHaystack, aCompare, aBias);\n    }\n\n    // we are in termination case (3) or (2) and return the appropriate thing.\n    if (aBias == exports.LEAST_UPPER_BOUND) {\n      return mid;\n    } else {\n      return aLow < 0 ? -1 : aLow;\n    }\n  }\n}\n\n/**\n * This is an implementation of binary search which will always try and return\n * the index of the closest element if there is no exact hit. This is because\n * mappings between original and generated line/col pairs are single points,\n * and there is an implicit region between each of them, so a miss just means\n * that you aren't on the very start of a region.\n *\n * @param aNeedle The element you are looking for.\n * @param aHaystack The array that is being searched.\n * @param aCompare A function which takes the needle and an element in the\n *     array and returns -1, 0, or 1 depending on whether the needle is less\n *     than, equal to, or greater than the element, respectively.\n * @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\n *     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'binarySearch.GREATEST_LOWER_BOUND'.\n */\nexports.search = function search(aNeedle, aHaystack, aCompare, aBias) {\n  if (aHaystack.length === 0) {\n    return -1;\n  }\n\n  var index = recursiveSearch(-1, aHaystack.length, aNeedle, aHaystack,\n                              aCompare, aBias || exports.GREATEST_LOWER_BOUND);\n  if (index < 0) {\n    return -1;\n  }\n\n  // We have found either the exact element, or the next-closest element than\n  // the one we are searching for. However, there may be more than one such\n  // element. Make sure we always return the smallest of these.\n  while (index - 1 >= 0) {\n    if (aCompare(aHaystack[index], aHaystack[index - 1], true) !== 0) {\n      break;\n    }\n    --index;\n  }\n\n  return index;\n};\n\n\n//# sourceURL=webpack://playground/./node_modules/source-map/lib/binary-search.js?");

/***/ }),

/***/ "./node_modules/source-map/lib/mapping-list.js":
/*!*****************************************************!*\
  !*** ./node_modules/source-map/lib/mapping-list.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2014 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = __webpack_require__(/*! ./util */ \"./node_modules/source-map/lib/util.js\");\n\n/**\n * Determine whether mappingB is after mappingA with respect to generated\n * position.\n */\nfunction generatedPositionAfter(mappingA, mappingB) {\n  // Optimized for most common case\n  var lineA = mappingA.generatedLine;\n  var lineB = mappingB.generatedLine;\n  var columnA = mappingA.generatedColumn;\n  var columnB = mappingB.generatedColumn;\n  return lineB > lineA || lineB == lineA && columnB >= columnA ||\n         util.compareByGeneratedPositionsInflated(mappingA, mappingB) <= 0;\n}\n\n/**\n * A data structure to provide a sorted view of accumulated mappings in a\n * performance conscious manner. It trades a neglibable overhead in general\n * case for a large speedup in case of mappings being added in order.\n */\nfunction MappingList() {\n  this._array = [];\n  this._sorted = true;\n  // Serves as infimum\n  this._last = {generatedLine: -1, generatedColumn: 0};\n}\n\n/**\n * Iterate through internal items. This method takes the same arguments that\n * `Array.prototype.forEach` takes.\n *\n * NOTE: The order of the mappings is NOT guaranteed.\n */\nMappingList.prototype.unsortedForEach =\n  function MappingList_forEach(aCallback, aThisArg) {\n    this._array.forEach(aCallback, aThisArg);\n  };\n\n/**\n * Add the given source mapping.\n *\n * @param Object aMapping\n */\nMappingList.prototype.add = function MappingList_add(aMapping) {\n  if (generatedPositionAfter(this._last, aMapping)) {\n    this._last = aMapping;\n    this._array.push(aMapping);\n  } else {\n    this._sorted = false;\n    this._array.push(aMapping);\n  }\n};\n\n/**\n * Returns the flat, sorted array of mappings. The mappings are sorted by\n * generated position.\n *\n * WARNING: This method returns internal data without copying, for\n * performance. The return value must NOT be mutated, and should be treated as\n * an immutable borrow. If you want to take ownership, you must make your own\n * copy.\n */\nMappingList.prototype.toArray = function MappingList_toArray() {\n  if (!this._sorted) {\n    this._array.sort(util.compareByGeneratedPositionsInflated);\n    this._sorted = true;\n  }\n  return this._array;\n};\n\nexports.MappingList = MappingList;\n\n\n//# sourceURL=webpack://playground/./node_modules/source-map/lib/mapping-list.js?");

/***/ }),

/***/ "./node_modules/source-map/lib/quick-sort.js":
/*!***************************************************!*\
  !*** ./node_modules/source-map/lib/quick-sort.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\n// It turns out that some (most?) JavaScript engines don't self-host\n// `Array.prototype.sort`. This makes sense because C++ will likely remain\n// faster than JS when doing raw CPU-intensive sorting. However, when using a\n// custom comparator function, calling back and forth between the VM's C++ and\n// JIT'd JS is rather slow *and* loses JIT type information, resulting in\n// worse generated code for the comparator function than would be optimal. In\n// fact, when sorting with a comparator, these costs outweigh the benefits of\n// sorting in C++. By using our own JS-implemented Quick Sort (below), we get\n// a ~3500ms mean speed-up in `bench/bench.html`.\n\n/**\n * Swap the elements indexed by `x` and `y` in the array `ary`.\n *\n * @param {Array} ary\n *        The array.\n * @param {Number} x\n *        The index of the first item.\n * @param {Number} y\n *        The index of the second item.\n */\nfunction swap(ary, x, y) {\n  var temp = ary[x];\n  ary[x] = ary[y];\n  ary[y] = temp;\n}\n\n/**\n * Returns a random integer within the range `low .. high` inclusive.\n *\n * @param {Number} low\n *        The lower bound on the range.\n * @param {Number} high\n *        The upper bound on the range.\n */\nfunction randomIntInRange(low, high) {\n  return Math.round(low + (Math.random() * (high - low)));\n}\n\n/**\n * The Quick Sort algorithm.\n *\n * @param {Array} ary\n *        An array to sort.\n * @param {function} comparator\n *        Function to use to compare two items.\n * @param {Number} p\n *        Start index of the array\n * @param {Number} r\n *        End index of the array\n */\nfunction doQuickSort(ary, comparator, p, r) {\n  // If our lower bound is less than our upper bound, we (1) partition the\n  // array into two pieces and (2) recurse on each half. If it is not, this is\n  // the empty array and our base case.\n\n  if (p < r) {\n    // (1) Partitioning.\n    //\n    // The partitioning chooses a pivot between `p` and `r` and moves all\n    // elements that are less than or equal to the pivot to the before it, and\n    // all the elements that are greater than it after it. The effect is that\n    // once partition is done, the pivot is in the exact place it will be when\n    // the array is put in sorted order, and it will not need to be moved\n    // again. This runs in O(n) time.\n\n    // Always choose a random pivot so that an input array which is reverse\n    // sorted does not cause O(n^2) running time.\n    var pivotIndex = randomIntInRange(p, r);\n    var i = p - 1;\n\n    swap(ary, pivotIndex, r);\n    var pivot = ary[r];\n\n    // Immediately after `j` is incremented in this loop, the following hold\n    // true:\n    //\n    //   * Every element in `ary[p .. i]` is less than or equal to the pivot.\n    //\n    //   * Every element in `ary[i+1 .. j-1]` is greater than the pivot.\n    for (var j = p; j < r; j++) {\n      if (comparator(ary[j], pivot) <= 0) {\n        i += 1;\n        swap(ary, i, j);\n      }\n    }\n\n    swap(ary, i + 1, j);\n    var q = i + 1;\n\n    // (2) Recurse on each half.\n\n    doQuickSort(ary, comparator, p, q - 1);\n    doQuickSort(ary, comparator, q + 1, r);\n  }\n}\n\n/**\n * Sort the given array in-place with the given comparator function.\n *\n * @param {Array} ary\n *        An array to sort.\n * @param {function} comparator\n *        Function to use to compare two items.\n */\nexports.quickSort = function (ary, comparator) {\n  doQuickSort(ary, comparator, 0, ary.length - 1);\n};\n\n\n//# sourceURL=webpack://playground/./node_modules/source-map/lib/quick-sort.js?");

/***/ }),

/***/ "./node_modules/source-map/lib/source-map-consumer.js":
/*!************************************************************!*\
  !*** ./node_modules/source-map/lib/source-map-consumer.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = __webpack_require__(/*! ./util */ \"./node_modules/source-map/lib/util.js\");\nvar binarySearch = __webpack_require__(/*! ./binary-search */ \"./node_modules/source-map/lib/binary-search.js\");\nvar ArraySet = (__webpack_require__(/*! ./array-set */ \"./node_modules/source-map/lib/array-set.js\").ArraySet);\nvar base64VLQ = __webpack_require__(/*! ./base64-vlq */ \"./node_modules/source-map/lib/base64-vlq.js\");\nvar quickSort = (__webpack_require__(/*! ./quick-sort */ \"./node_modules/source-map/lib/quick-sort.js\").quickSort);\n\nfunction SourceMapConsumer(aSourceMap, aSourceMapURL) {\n  var sourceMap = aSourceMap;\n  if (typeof aSourceMap === 'string') {\n    sourceMap = util.parseSourceMapInput(aSourceMap);\n  }\n\n  return sourceMap.sections != null\n    ? new IndexedSourceMapConsumer(sourceMap, aSourceMapURL)\n    : new BasicSourceMapConsumer(sourceMap, aSourceMapURL);\n}\n\nSourceMapConsumer.fromSourceMap = function(aSourceMap, aSourceMapURL) {\n  return BasicSourceMapConsumer.fromSourceMap(aSourceMap, aSourceMapURL);\n}\n\n/**\n * The version of the source mapping spec that we are consuming.\n */\nSourceMapConsumer.prototype._version = 3;\n\n// `__generatedMappings` and `__originalMappings` are arrays that hold the\n// parsed mapping coordinates from the source map's \"mappings\" attribute. They\n// are lazily instantiated, accessed via the `_generatedMappings` and\n// `_originalMappings` getters respectively, and we only parse the mappings\n// and create these arrays once queried for a source location. We jump through\n// these hoops because there can be many thousands of mappings, and parsing\n// them is expensive, so we only want to do it if we must.\n//\n// Each object in the arrays is of the form:\n//\n//     {\n//       generatedLine: The line number in the generated code,\n//       generatedColumn: The column number in the generated code,\n//       source: The path to the original source file that generated this\n//               chunk of code,\n//       originalLine: The line number in the original source that\n//                     corresponds to this chunk of generated code,\n//       originalColumn: The column number in the original source that\n//                       corresponds to this chunk of generated code,\n//       name: The name of the original symbol which generated this chunk of\n//             code.\n//     }\n//\n// All properties except for `generatedLine` and `generatedColumn` can be\n// `null`.\n//\n// `_generatedMappings` is ordered by the generated positions.\n//\n// `_originalMappings` is ordered by the original positions.\n\nSourceMapConsumer.prototype.__generatedMappings = null;\nObject.defineProperty(SourceMapConsumer.prototype, '_generatedMappings', {\n  configurable: true,\n  enumerable: true,\n  get: function () {\n    if (!this.__generatedMappings) {\n      this._parseMappings(this._mappings, this.sourceRoot);\n    }\n\n    return this.__generatedMappings;\n  }\n});\n\nSourceMapConsumer.prototype.__originalMappings = null;\nObject.defineProperty(SourceMapConsumer.prototype, '_originalMappings', {\n  configurable: true,\n  enumerable: true,\n  get: function () {\n    if (!this.__originalMappings) {\n      this._parseMappings(this._mappings, this.sourceRoot);\n    }\n\n    return this.__originalMappings;\n  }\n});\n\nSourceMapConsumer.prototype._charIsMappingSeparator =\n  function SourceMapConsumer_charIsMappingSeparator(aStr, index) {\n    var c = aStr.charAt(index);\n    return c === \";\" || c === \",\";\n  };\n\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */\nSourceMapConsumer.prototype._parseMappings =\n  function SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    throw new Error(\"Subclasses must implement _parseMappings\");\n  };\n\nSourceMapConsumer.GENERATED_ORDER = 1;\nSourceMapConsumer.ORIGINAL_ORDER = 2;\n\nSourceMapConsumer.GREATEST_LOWER_BOUND = 1;\nSourceMapConsumer.LEAST_UPPER_BOUND = 2;\n\n/**\n * Iterate over each mapping between an original source/line/column and a\n * generated line/column in this source map.\n *\n * @param Function aCallback\n *        The function that is called with each mapping.\n * @param Object aContext\n *        Optional. If specified, this object will be the value of `this` every\n *        time that `aCallback` is called.\n * @param aOrder\n *        Either `SourceMapConsumer.GENERATED_ORDER` or\n *        `SourceMapConsumer.ORIGINAL_ORDER`. Specifies whether you want to\n *        iterate over the mappings sorted by the generated file's line/column\n *        order or the original's source/line/column order, respectively. Defaults to\n *        `SourceMapConsumer.GENERATED_ORDER`.\n */\nSourceMapConsumer.prototype.eachMapping =\n  function SourceMapConsumer_eachMapping(aCallback, aContext, aOrder) {\n    var context = aContext || null;\n    var order = aOrder || SourceMapConsumer.GENERATED_ORDER;\n\n    var mappings;\n    switch (order) {\n    case SourceMapConsumer.GENERATED_ORDER:\n      mappings = this._generatedMappings;\n      break;\n    case SourceMapConsumer.ORIGINAL_ORDER:\n      mappings = this._originalMappings;\n      break;\n    default:\n      throw new Error(\"Unknown order of iteration.\");\n    }\n\n    var sourceRoot = this.sourceRoot;\n    mappings.map(function (mapping) {\n      var source = mapping.source === null ? null : this._sources.at(mapping.source);\n      source = util.computeSourceURL(sourceRoot, source, this._sourceMapURL);\n      return {\n        source: source,\n        generatedLine: mapping.generatedLine,\n        generatedColumn: mapping.generatedColumn,\n        originalLine: mapping.originalLine,\n        originalColumn: mapping.originalColumn,\n        name: mapping.name === null ? null : this._names.at(mapping.name)\n      };\n    }, this).forEach(aCallback, context);\n  };\n\n/**\n * Returns all generated line and column information for the original source,\n * line, and column provided. If no column is provided, returns all mappings\n * corresponding to a either the line we are searching for or the next\n * closest line that has any mappings. Otherwise, returns all mappings\n * corresponding to the given line and either the column we are searching for\n * or the next closest column that has any offsets.\n *\n * The only argument is an object with the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.  The line number is 1-based.\n *   - column: Optional. the column number in the original source.\n *    The column number is 0-based.\n *\n * and an array of objects is returned, each with the following properties:\n *\n *   - line: The line number in the generated source, or null.  The\n *    line number is 1-based.\n *   - column: The column number in the generated source, or null.\n *    The column number is 0-based.\n */\nSourceMapConsumer.prototype.allGeneratedPositionsFor =\n  function SourceMapConsumer_allGeneratedPositionsFor(aArgs) {\n    var line = util.getArg(aArgs, 'line');\n\n    // When there is no exact match, BasicSourceMapConsumer.prototype._findMapping\n    // returns the index of the closest mapping less than the needle. By\n    // setting needle.originalColumn to 0, we thus find the last mapping for\n    // the given line, provided such a mapping exists.\n    var needle = {\n      source: util.getArg(aArgs, 'source'),\n      originalLine: line,\n      originalColumn: util.getArg(aArgs, 'column', 0)\n    };\n\n    needle.source = this._findSourceIndex(needle.source);\n    if (needle.source < 0) {\n      return [];\n    }\n\n    var mappings = [];\n\n    var index = this._findMapping(needle,\n                                  this._originalMappings,\n                                  \"originalLine\",\n                                  \"originalColumn\",\n                                  util.compareByOriginalPositions,\n                                  binarySearch.LEAST_UPPER_BOUND);\n    if (index >= 0) {\n      var mapping = this._originalMappings[index];\n\n      if (aArgs.column === undefined) {\n        var originalLine = mapping.originalLine;\n\n        // Iterate until either we run out of mappings, or we run into\n        // a mapping for a different line than the one we found. Since\n        // mappings are sorted, this is guaranteed to find all mappings for\n        // the line we found.\n        while (mapping && mapping.originalLine === originalLine) {\n          mappings.push({\n            line: util.getArg(mapping, 'generatedLine', null),\n            column: util.getArg(mapping, 'generatedColumn', null),\n            lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n          });\n\n          mapping = this._originalMappings[++index];\n        }\n      } else {\n        var originalColumn = mapping.originalColumn;\n\n        // Iterate until either we run out of mappings, or we run into\n        // a mapping for a different line than the one we were searching for.\n        // Since mappings are sorted, this is guaranteed to find all mappings for\n        // the line we are searching for.\n        while (mapping &&\n               mapping.originalLine === line &&\n               mapping.originalColumn == originalColumn) {\n          mappings.push({\n            line: util.getArg(mapping, 'generatedLine', null),\n            column: util.getArg(mapping, 'generatedColumn', null),\n            lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n          });\n\n          mapping = this._originalMappings[++index];\n        }\n      }\n    }\n\n    return mappings;\n  };\n\nexports.SourceMapConsumer = SourceMapConsumer;\n\n/**\n * A BasicSourceMapConsumer instance represents a parsed source map which we can\n * query for information about the original file positions by giving it a file\n * position in the generated source.\n *\n * The first parameter is the raw source map (either as a JSON string, or\n * already parsed to an object). According to the spec, source maps have the\n * following attributes:\n *\n *   - version: Which version of the source map spec this map is following.\n *   - sources: An array of URLs to the original source files.\n *   - names: An array of identifiers which can be referrenced by individual mappings.\n *   - sourceRoot: Optional. The URL root from which all sources are relative.\n *   - sourcesContent: Optional. An array of contents of the original source files.\n *   - mappings: A string of base64 VLQs which contain the actual mappings.\n *   - file: Optional. The generated file this source map is associated with.\n *\n * Here is an example source map, taken from the source map spec[0]:\n *\n *     {\n *       version : 3,\n *       file: \"out.js\",\n *       sourceRoot : \"\",\n *       sources: [\"foo.js\", \"bar.js\"],\n *       names: [\"src\", \"maps\", \"are\", \"fun\"],\n *       mappings: \"AA,AB;;ABCDE;\"\n *     }\n *\n * The second parameter, if given, is a string whose value is the URL\n * at which the source map was found.  This URL is used to compute the\n * sources array.\n *\n * [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit?pli=1#\n */\nfunction BasicSourceMapConsumer(aSourceMap, aSourceMapURL) {\n  var sourceMap = aSourceMap;\n  if (typeof aSourceMap === 'string') {\n    sourceMap = util.parseSourceMapInput(aSourceMap);\n  }\n\n  var version = util.getArg(sourceMap, 'version');\n  var sources = util.getArg(sourceMap, 'sources');\n  // Sass 3.3 leaves out the 'names' array, so we deviate from the spec (which\n  // requires the array) to play nice here.\n  var names = util.getArg(sourceMap, 'names', []);\n  var sourceRoot = util.getArg(sourceMap, 'sourceRoot', null);\n  var sourcesContent = util.getArg(sourceMap, 'sourcesContent', null);\n  var mappings = util.getArg(sourceMap, 'mappings');\n  var file = util.getArg(sourceMap, 'file', null);\n\n  // Once again, Sass deviates from the spec and supplies the version as a\n  // string rather than a number, so we use loose equality checking here.\n  if (version != this._version) {\n    throw new Error('Unsupported version: ' + version);\n  }\n\n  if (sourceRoot) {\n    sourceRoot = util.normalize(sourceRoot);\n  }\n\n  sources = sources\n    .map(String)\n    // Some source maps produce relative source paths like \"./foo.js\" instead of\n    // \"foo.js\".  Normalize these first so that future comparisons will succeed.\n    // See bugzil.la/1090768.\n    .map(util.normalize)\n    // Always ensure that absolute sources are internally stored relative to\n    // the source root, if the source root is absolute. Not doing this would\n    // be particularly problematic when the source root is a prefix of the\n    // source (valid, but why??). See github issue #199 and bugzil.la/1188982.\n    .map(function (source) {\n      return sourceRoot && util.isAbsolute(sourceRoot) && util.isAbsolute(source)\n        ? util.relative(sourceRoot, source)\n        : source;\n    });\n\n  // Pass `true` below to allow duplicate names and sources. While source maps\n  // are intended to be compressed and deduplicated, the TypeScript compiler\n  // sometimes generates source maps with duplicates in them. See Github issue\n  // #72 and bugzil.la/889492.\n  this._names = ArraySet.fromArray(names.map(String), true);\n  this._sources = ArraySet.fromArray(sources, true);\n\n  this._absoluteSources = this._sources.toArray().map(function (s) {\n    return util.computeSourceURL(sourceRoot, s, aSourceMapURL);\n  });\n\n  this.sourceRoot = sourceRoot;\n  this.sourcesContent = sourcesContent;\n  this._mappings = mappings;\n  this._sourceMapURL = aSourceMapURL;\n  this.file = file;\n}\n\nBasicSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\nBasicSourceMapConsumer.prototype.consumer = SourceMapConsumer;\n\n/**\n * Utility function to find the index of a source.  Returns -1 if not\n * found.\n */\nBasicSourceMapConsumer.prototype._findSourceIndex = function(aSource) {\n  var relativeSource = aSource;\n  if (this.sourceRoot != null) {\n    relativeSource = util.relative(this.sourceRoot, relativeSource);\n  }\n\n  if (this._sources.has(relativeSource)) {\n    return this._sources.indexOf(relativeSource);\n  }\n\n  // Maybe aSource is an absolute URL as returned by |sources|.  In\n  // this case we can't simply undo the transform.\n  var i;\n  for (i = 0; i < this._absoluteSources.length; ++i) {\n    if (this._absoluteSources[i] == aSource) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\n/**\n * Create a BasicSourceMapConsumer from a SourceMapGenerator.\n *\n * @param SourceMapGenerator aSourceMap\n *        The source map that will be consumed.\n * @param String aSourceMapURL\n *        The URL at which the source map can be found (optional)\n * @returns BasicSourceMapConsumer\n */\nBasicSourceMapConsumer.fromSourceMap =\n  function SourceMapConsumer_fromSourceMap(aSourceMap, aSourceMapURL) {\n    var smc = Object.create(BasicSourceMapConsumer.prototype);\n\n    var names = smc._names = ArraySet.fromArray(aSourceMap._names.toArray(), true);\n    var sources = smc._sources = ArraySet.fromArray(aSourceMap._sources.toArray(), true);\n    smc.sourceRoot = aSourceMap._sourceRoot;\n    smc.sourcesContent = aSourceMap._generateSourcesContent(smc._sources.toArray(),\n                                                            smc.sourceRoot);\n    smc.file = aSourceMap._file;\n    smc._sourceMapURL = aSourceMapURL;\n    smc._absoluteSources = smc._sources.toArray().map(function (s) {\n      return util.computeSourceURL(smc.sourceRoot, s, aSourceMapURL);\n    });\n\n    // Because we are modifying the entries (by converting string sources and\n    // names to indices into the sources and names ArraySets), we have to make\n    // a copy of the entry or else bad things happen. Shared mutable state\n    // strikes again! See github issue #191.\n\n    var generatedMappings = aSourceMap._mappings.toArray().slice();\n    var destGeneratedMappings = smc.__generatedMappings = [];\n    var destOriginalMappings = smc.__originalMappings = [];\n\n    for (var i = 0, length = generatedMappings.length; i < length; i++) {\n      var srcMapping = generatedMappings[i];\n      var destMapping = new Mapping;\n      destMapping.generatedLine = srcMapping.generatedLine;\n      destMapping.generatedColumn = srcMapping.generatedColumn;\n\n      if (srcMapping.source) {\n        destMapping.source = sources.indexOf(srcMapping.source);\n        destMapping.originalLine = srcMapping.originalLine;\n        destMapping.originalColumn = srcMapping.originalColumn;\n\n        if (srcMapping.name) {\n          destMapping.name = names.indexOf(srcMapping.name);\n        }\n\n        destOriginalMappings.push(destMapping);\n      }\n\n      destGeneratedMappings.push(destMapping);\n    }\n\n    quickSort(smc.__originalMappings, util.compareByOriginalPositions);\n\n    return smc;\n  };\n\n/**\n * The version of the source mapping spec that we are consuming.\n */\nBasicSourceMapConsumer.prototype._version = 3;\n\n/**\n * The list of original sources.\n */\nObject.defineProperty(BasicSourceMapConsumer.prototype, 'sources', {\n  get: function () {\n    return this._absoluteSources.slice();\n  }\n});\n\n/**\n * Provide the JIT with a nice shape / hidden class.\n */\nfunction Mapping() {\n  this.generatedLine = 0;\n  this.generatedColumn = 0;\n  this.source = null;\n  this.originalLine = null;\n  this.originalColumn = null;\n  this.name = null;\n}\n\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */\nBasicSourceMapConsumer.prototype._parseMappings =\n  function SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    var generatedLine = 1;\n    var previousGeneratedColumn = 0;\n    var previousOriginalLine = 0;\n    var previousOriginalColumn = 0;\n    var previousSource = 0;\n    var previousName = 0;\n    var length = aStr.length;\n    var index = 0;\n    var cachedSegments = {};\n    var temp = {};\n    var originalMappings = [];\n    var generatedMappings = [];\n    var mapping, str, segment, end, value;\n\n    while (index < length) {\n      if (aStr.charAt(index) === ';') {\n        generatedLine++;\n        index++;\n        previousGeneratedColumn = 0;\n      }\n      else if (aStr.charAt(index) === ',') {\n        index++;\n      }\n      else {\n        mapping = new Mapping();\n        mapping.generatedLine = generatedLine;\n\n        // Because each offset is encoded relative to the previous one,\n        // many segments often have the same encoding. We can exploit this\n        // fact by caching the parsed variable length fields of each segment,\n        // allowing us to avoid a second parse if we encounter the same\n        // segment again.\n        for (end = index; end < length; end++) {\n          if (this._charIsMappingSeparator(aStr, end)) {\n            break;\n          }\n        }\n        str = aStr.slice(index, end);\n\n        segment = cachedSegments[str];\n        if (segment) {\n          index += str.length;\n        } else {\n          segment = [];\n          while (index < end) {\n            base64VLQ.decode(aStr, index, temp);\n            value = temp.value;\n            index = temp.rest;\n            segment.push(value);\n          }\n\n          if (segment.length === 2) {\n            throw new Error('Found a source, but no line and column');\n          }\n\n          if (segment.length === 3) {\n            throw new Error('Found a source and line, but no column');\n          }\n\n          cachedSegments[str] = segment;\n        }\n\n        // Generated column.\n        mapping.generatedColumn = previousGeneratedColumn + segment[0];\n        previousGeneratedColumn = mapping.generatedColumn;\n\n        if (segment.length > 1) {\n          // Original source.\n          mapping.source = previousSource + segment[1];\n          previousSource += segment[1];\n\n          // Original line.\n          mapping.originalLine = previousOriginalLine + segment[2];\n          previousOriginalLine = mapping.originalLine;\n          // Lines are stored 0-based\n          mapping.originalLine += 1;\n\n          // Original column.\n          mapping.originalColumn = previousOriginalColumn + segment[3];\n          previousOriginalColumn = mapping.originalColumn;\n\n          if (segment.length > 4) {\n            // Original name.\n            mapping.name = previousName + segment[4];\n            previousName += segment[4];\n          }\n        }\n\n        generatedMappings.push(mapping);\n        if (typeof mapping.originalLine === 'number') {\n          originalMappings.push(mapping);\n        }\n      }\n    }\n\n    quickSort(generatedMappings, util.compareByGeneratedPositionsDeflated);\n    this.__generatedMappings = generatedMappings;\n\n    quickSort(originalMappings, util.compareByOriginalPositions);\n    this.__originalMappings = originalMappings;\n  };\n\n/**\n * Find the mapping that best matches the hypothetical \"needle\" mapping that\n * we are searching for in the given \"haystack\" of mappings.\n */\nBasicSourceMapConsumer.prototype._findMapping =\n  function SourceMapConsumer_findMapping(aNeedle, aMappings, aLineName,\n                                         aColumnName, aComparator, aBias) {\n    // To return the position we are searching for, we must first find the\n    // mapping for the given position and then return the opposite position it\n    // points to. Because the mappings are sorted, we can use binary search to\n    // find the best mapping.\n\n    if (aNeedle[aLineName] <= 0) {\n      throw new TypeError('Line must be greater than or equal to 1, got '\n                          + aNeedle[aLineName]);\n    }\n    if (aNeedle[aColumnName] < 0) {\n      throw new TypeError('Column must be greater than or equal to 0, got '\n                          + aNeedle[aColumnName]);\n    }\n\n    return binarySearch.search(aNeedle, aMappings, aComparator, aBias);\n  };\n\n/**\n * Compute the last column for each generated mapping. The last column is\n * inclusive.\n */\nBasicSourceMapConsumer.prototype.computeColumnSpans =\n  function SourceMapConsumer_computeColumnSpans() {\n    for (var index = 0; index < this._generatedMappings.length; ++index) {\n      var mapping = this._generatedMappings[index];\n\n      // Mappings do not contain a field for the last generated columnt. We\n      // can come up with an optimistic estimate, however, by assuming that\n      // mappings are contiguous (i.e. given two consecutive mappings, the\n      // first mapping ends where the second one starts).\n      if (index + 1 < this._generatedMappings.length) {\n        var nextMapping = this._generatedMappings[index + 1];\n\n        if (mapping.generatedLine === nextMapping.generatedLine) {\n          mapping.lastGeneratedColumn = nextMapping.generatedColumn - 1;\n          continue;\n        }\n      }\n\n      // The last mapping for each line spans the entire line.\n      mapping.lastGeneratedColumn = Infinity;\n    }\n  };\n\n/**\n * Returns the original source, line, and column information for the generated\n * source's line and column positions provided. The only argument is an object\n * with the following properties:\n *\n *   - line: The line number in the generated source.  The line number\n *     is 1-based.\n *   - column: The column number in the generated source.  The column\n *     number is 0-based.\n *   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\n *     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\n *\n * and an object is returned with the following properties:\n *\n *   - source: The original source file, or null.\n *   - line: The line number in the original source, or null.  The\n *     line number is 1-based.\n *   - column: The column number in the original source, or null.  The\n *     column number is 0-based.\n *   - name: The original identifier, or null.\n */\nBasicSourceMapConsumer.prototype.originalPositionFor =\n  function SourceMapConsumer_originalPositionFor(aArgs) {\n    var needle = {\n      generatedLine: util.getArg(aArgs, 'line'),\n      generatedColumn: util.getArg(aArgs, 'column')\n    };\n\n    var index = this._findMapping(\n      needle,\n      this._generatedMappings,\n      \"generatedLine\",\n      \"generatedColumn\",\n      util.compareByGeneratedPositionsDeflated,\n      util.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND)\n    );\n\n    if (index >= 0) {\n      var mapping = this._generatedMappings[index];\n\n      if (mapping.generatedLine === needle.generatedLine) {\n        var source = util.getArg(mapping, 'source', null);\n        if (source !== null) {\n          source = this._sources.at(source);\n          source = util.computeSourceURL(this.sourceRoot, source, this._sourceMapURL);\n        }\n        var name = util.getArg(mapping, 'name', null);\n        if (name !== null) {\n          name = this._names.at(name);\n        }\n        return {\n          source: source,\n          line: util.getArg(mapping, 'originalLine', null),\n          column: util.getArg(mapping, 'originalColumn', null),\n          name: name\n        };\n      }\n    }\n\n    return {\n      source: null,\n      line: null,\n      column: null,\n      name: null\n    };\n  };\n\n/**\n * Return true if we have the source content for every source in the source\n * map, false otherwise.\n */\nBasicSourceMapConsumer.prototype.hasContentsOfAllSources =\n  function BasicSourceMapConsumer_hasContentsOfAllSources() {\n    if (!this.sourcesContent) {\n      return false;\n    }\n    return this.sourcesContent.length >= this._sources.size() &&\n      !this.sourcesContent.some(function (sc) { return sc == null; });\n  };\n\n/**\n * Returns the original source content. The only argument is the url of the\n * original source file. Returns null if no original source content is\n * available.\n */\nBasicSourceMapConsumer.prototype.sourceContentFor =\n  function SourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\n    if (!this.sourcesContent) {\n      return null;\n    }\n\n    var index = this._findSourceIndex(aSource);\n    if (index >= 0) {\n      return this.sourcesContent[index];\n    }\n\n    var relativeSource = aSource;\n    if (this.sourceRoot != null) {\n      relativeSource = util.relative(this.sourceRoot, relativeSource);\n    }\n\n    var url;\n    if (this.sourceRoot != null\n        && (url = util.urlParse(this.sourceRoot))) {\n      // XXX: file:// URIs and absolute paths lead to unexpected behavior for\n      // many users. We can help them out when they expect file:// URIs to\n      // behave like it would if they were running a local HTTP server. See\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=885597.\n      var fileUriAbsPath = relativeSource.replace(/^file:\\/\\//, \"\");\n      if (url.scheme == \"file\"\n          && this._sources.has(fileUriAbsPath)) {\n        return this.sourcesContent[this._sources.indexOf(fileUriAbsPath)]\n      }\n\n      if ((!url.path || url.path == \"/\")\n          && this._sources.has(\"/\" + relativeSource)) {\n        return this.sourcesContent[this._sources.indexOf(\"/\" + relativeSource)];\n      }\n    }\n\n    // This function is used recursively from\n    // IndexedSourceMapConsumer.prototype.sourceContentFor. In that case, we\n    // don't want to throw if we can't find the source - we just want to\n    // return null, so we provide a flag to exit gracefully.\n    if (nullOnMissing) {\n      return null;\n    }\n    else {\n      throw new Error('\"' + relativeSource + '\" is not in the SourceMap.');\n    }\n  };\n\n/**\n * Returns the generated line and column information for the original source,\n * line, and column positions provided. The only argument is an object with\n * the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.  The line number\n *     is 1-based.\n *   - column: The column number in the original source.  The column\n *     number is 0-based.\n *   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\n *     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\n *\n * and an object is returned with the following properties:\n *\n *   - line: The line number in the generated source, or null.  The\n *     line number is 1-based.\n *   - column: The column number in the generated source, or null.\n *     The column number is 0-based.\n */\nBasicSourceMapConsumer.prototype.generatedPositionFor =\n  function SourceMapConsumer_generatedPositionFor(aArgs) {\n    var source = util.getArg(aArgs, 'source');\n    source = this._findSourceIndex(source);\n    if (source < 0) {\n      return {\n        line: null,\n        column: null,\n        lastColumn: null\n      };\n    }\n\n    var needle = {\n      source: source,\n      originalLine: util.getArg(aArgs, 'line'),\n      originalColumn: util.getArg(aArgs, 'column')\n    };\n\n    var index = this._findMapping(\n      needle,\n      this._originalMappings,\n      \"originalLine\",\n      \"originalColumn\",\n      util.compareByOriginalPositions,\n      util.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND)\n    );\n\n    if (index >= 0) {\n      var mapping = this._originalMappings[index];\n\n      if (mapping.source === needle.source) {\n        return {\n          line: util.getArg(mapping, 'generatedLine', null),\n          column: util.getArg(mapping, 'generatedColumn', null),\n          lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n        };\n      }\n    }\n\n    return {\n      line: null,\n      column: null,\n      lastColumn: null\n    };\n  };\n\nexports.BasicSourceMapConsumer = BasicSourceMapConsumer;\n\n/**\n * An IndexedSourceMapConsumer instance represents a parsed source map which\n * we can query for information. It differs from BasicSourceMapConsumer in\n * that it takes \"indexed\" source maps (i.e. ones with a \"sections\" field) as\n * input.\n *\n * The first parameter is a raw source map (either as a JSON string, or already\n * parsed to an object). According to the spec for indexed source maps, they\n * have the following attributes:\n *\n *   - version: Which version of the source map spec this map is following.\n *   - file: Optional. The generated file this source map is associated with.\n *   - sections: A list of section definitions.\n *\n * Each value under the \"sections\" field has two fields:\n *   - offset: The offset into the original specified at which this section\n *       begins to apply, defined as an object with a \"line\" and \"column\"\n *       field.\n *   - map: A source map definition. This source map could also be indexed,\n *       but doesn't have to be.\n *\n * Instead of the \"map\" field, it's also possible to have a \"url\" field\n * specifying a URL to retrieve a source map from, but that's currently\n * unsupported.\n *\n * Here's an example source map, taken from the source map spec[0], but\n * modified to omit a section which uses the \"url\" field.\n *\n *  {\n *    version : 3,\n *    file: \"app.js\",\n *    sections: [{\n *      offset: {line:100, column:10},\n *      map: {\n *        version : 3,\n *        file: \"section.js\",\n *        sources: [\"foo.js\", \"bar.js\"],\n *        names: [\"src\", \"maps\", \"are\", \"fun\"],\n *        mappings: \"AAAA,E;;ABCDE;\"\n *      }\n *    }],\n *  }\n *\n * The second parameter, if given, is a string whose value is the URL\n * at which the source map was found.  This URL is used to compute the\n * sources array.\n *\n * [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit#heading=h.535es3xeprgt\n */\nfunction IndexedSourceMapConsumer(aSourceMap, aSourceMapURL) {\n  var sourceMap = aSourceMap;\n  if (typeof aSourceMap === 'string') {\n    sourceMap = util.parseSourceMapInput(aSourceMap);\n  }\n\n  var version = util.getArg(sourceMap, 'version');\n  var sections = util.getArg(sourceMap, 'sections');\n\n  if (version != this._version) {\n    throw new Error('Unsupported version: ' + version);\n  }\n\n  this._sources = new ArraySet();\n  this._names = new ArraySet();\n\n  var lastOffset = {\n    line: -1,\n    column: 0\n  };\n  this._sections = sections.map(function (s) {\n    if (s.url) {\n      // The url field will require support for asynchronicity.\n      // See https://github.com/mozilla/source-map/issues/16\n      throw new Error('Support for url field in sections not implemented.');\n    }\n    var offset = util.getArg(s, 'offset');\n    var offsetLine = util.getArg(offset, 'line');\n    var offsetColumn = util.getArg(offset, 'column');\n\n    if (offsetLine < lastOffset.line ||\n        (offsetLine === lastOffset.line && offsetColumn < lastOffset.column)) {\n      throw new Error('Section offsets must be ordered and non-overlapping.');\n    }\n    lastOffset = offset;\n\n    return {\n      generatedOffset: {\n        // The offset fields are 0-based, but we use 1-based indices when\n        // encoding/decoding from VLQ.\n        generatedLine: offsetLine + 1,\n        generatedColumn: offsetColumn + 1\n      },\n      consumer: new SourceMapConsumer(util.getArg(s, 'map'), aSourceMapURL)\n    }\n  });\n}\n\nIndexedSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\nIndexedSourceMapConsumer.prototype.constructor = SourceMapConsumer;\n\n/**\n * The version of the source mapping spec that we are consuming.\n */\nIndexedSourceMapConsumer.prototype._version = 3;\n\n/**\n * The list of original sources.\n */\nObject.defineProperty(IndexedSourceMapConsumer.prototype, 'sources', {\n  get: function () {\n    var sources = [];\n    for (var i = 0; i < this._sections.length; i++) {\n      for (var j = 0; j < this._sections[i].consumer.sources.length; j++) {\n        sources.push(this._sections[i].consumer.sources[j]);\n      }\n    }\n    return sources;\n  }\n});\n\n/**\n * Returns the original source, line, and column information for the generated\n * source's line and column positions provided. The only argument is an object\n * with the following properties:\n *\n *   - line: The line number in the generated source.  The line number\n *     is 1-based.\n *   - column: The column number in the generated source.  The column\n *     number is 0-based.\n *\n * and an object is returned with the following properties:\n *\n *   - source: The original source file, or null.\n *   - line: The line number in the original source, or null.  The\n *     line number is 1-based.\n *   - column: The column number in the original source, or null.  The\n *     column number is 0-based.\n *   - name: The original identifier, or null.\n */\nIndexedSourceMapConsumer.prototype.originalPositionFor =\n  function IndexedSourceMapConsumer_originalPositionFor(aArgs) {\n    var needle = {\n      generatedLine: util.getArg(aArgs, 'line'),\n      generatedColumn: util.getArg(aArgs, 'column')\n    };\n\n    // Find the section containing the generated position we're trying to map\n    // to an original position.\n    var sectionIndex = binarySearch.search(needle, this._sections,\n      function(needle, section) {\n        var cmp = needle.generatedLine - section.generatedOffset.generatedLine;\n        if (cmp) {\n          return cmp;\n        }\n\n        return (needle.generatedColumn -\n                section.generatedOffset.generatedColumn);\n      });\n    var section = this._sections[sectionIndex];\n\n    if (!section) {\n      return {\n        source: null,\n        line: null,\n        column: null,\n        name: null\n      };\n    }\n\n    return section.consumer.originalPositionFor({\n      line: needle.generatedLine -\n        (section.generatedOffset.generatedLine - 1),\n      column: needle.generatedColumn -\n        (section.generatedOffset.generatedLine === needle.generatedLine\n         ? section.generatedOffset.generatedColumn - 1\n         : 0),\n      bias: aArgs.bias\n    });\n  };\n\n/**\n * Return true if we have the source content for every source in the source\n * map, false otherwise.\n */\nIndexedSourceMapConsumer.prototype.hasContentsOfAllSources =\n  function IndexedSourceMapConsumer_hasContentsOfAllSources() {\n    return this._sections.every(function (s) {\n      return s.consumer.hasContentsOfAllSources();\n    });\n  };\n\n/**\n * Returns the original source content. The only argument is the url of the\n * original source file. Returns null if no original source content is\n * available.\n */\nIndexedSourceMapConsumer.prototype.sourceContentFor =\n  function IndexedSourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\n    for (var i = 0; i < this._sections.length; i++) {\n      var section = this._sections[i];\n\n      var content = section.consumer.sourceContentFor(aSource, true);\n      if (content) {\n        return content;\n      }\n    }\n    if (nullOnMissing) {\n      return null;\n    }\n    else {\n      throw new Error('\"' + aSource + '\" is not in the SourceMap.');\n    }\n  };\n\n/**\n * Returns the generated line and column information for the original source,\n * line, and column positions provided. The only argument is an object with\n * the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.  The line number\n *     is 1-based.\n *   - column: The column number in the original source.  The column\n *     number is 0-based.\n *\n * and an object is returned with the following properties:\n *\n *   - line: The line number in the generated source, or null.  The\n *     line number is 1-based. \n *   - column: The column number in the generated source, or null.\n *     The column number is 0-based.\n */\nIndexedSourceMapConsumer.prototype.generatedPositionFor =\n  function IndexedSourceMapConsumer_generatedPositionFor(aArgs) {\n    for (var i = 0; i < this._sections.length; i++) {\n      var section = this._sections[i];\n\n      // Only consider this section if the requested source is in the list of\n      // sources of the consumer.\n      if (section.consumer._findSourceIndex(util.getArg(aArgs, 'source')) === -1) {\n        continue;\n      }\n      var generatedPosition = section.consumer.generatedPositionFor(aArgs);\n      if (generatedPosition) {\n        var ret = {\n          line: generatedPosition.line +\n            (section.generatedOffset.generatedLine - 1),\n          column: generatedPosition.column +\n            (section.generatedOffset.generatedLine === generatedPosition.line\n             ? section.generatedOffset.generatedColumn - 1\n             : 0)\n        };\n        return ret;\n      }\n    }\n\n    return {\n      line: null,\n      column: null\n    };\n  };\n\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */\nIndexedSourceMapConsumer.prototype._parseMappings =\n  function IndexedSourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    this.__generatedMappings = [];\n    this.__originalMappings = [];\n    for (var i = 0; i < this._sections.length; i++) {\n      var section = this._sections[i];\n      var sectionMappings = section.consumer._generatedMappings;\n      for (var j = 0; j < sectionMappings.length; j++) {\n        var mapping = sectionMappings[j];\n\n        var source = section.consumer._sources.at(mapping.source);\n        source = util.computeSourceURL(section.consumer.sourceRoot, source, this._sourceMapURL);\n        this._sources.add(source);\n        source = this._sources.indexOf(source);\n\n        var name = null;\n        if (mapping.name) {\n          name = section.consumer._names.at(mapping.name);\n          this._names.add(name);\n          name = this._names.indexOf(name);\n        }\n\n        // The mappings coming from the consumer for the section have\n        // generated positions relative to the start of the section, so we\n        // need to offset them to be relative to the start of the concatenated\n        // generated file.\n        var adjustedMapping = {\n          source: source,\n          generatedLine: mapping.generatedLine +\n            (section.generatedOffset.generatedLine - 1),\n          generatedColumn: mapping.generatedColumn +\n            (section.generatedOffset.generatedLine === mapping.generatedLine\n            ? section.generatedOffset.generatedColumn - 1\n            : 0),\n          originalLine: mapping.originalLine,\n          originalColumn: mapping.originalColumn,\n          name: name\n        };\n\n        this.__generatedMappings.push(adjustedMapping);\n        if (typeof adjustedMapping.originalLine === 'number') {\n          this.__originalMappings.push(adjustedMapping);\n        }\n      }\n    }\n\n    quickSort(this.__generatedMappings, util.compareByGeneratedPositionsDeflated);\n    quickSort(this.__originalMappings, util.compareByOriginalPositions);\n  };\n\nexports.IndexedSourceMapConsumer = IndexedSourceMapConsumer;\n\n\n//# sourceURL=webpack://playground/./node_modules/source-map/lib/source-map-consumer.js?");

/***/ }),

/***/ "./node_modules/source-map/lib/source-map-generator.js":
/*!*************************************************************!*\
  !*** ./node_modules/source-map/lib/source-map-generator.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar base64VLQ = __webpack_require__(/*! ./base64-vlq */ \"./node_modules/source-map/lib/base64-vlq.js\");\nvar util = __webpack_require__(/*! ./util */ \"./node_modules/source-map/lib/util.js\");\nvar ArraySet = (__webpack_require__(/*! ./array-set */ \"./node_modules/source-map/lib/array-set.js\").ArraySet);\nvar MappingList = (__webpack_require__(/*! ./mapping-list */ \"./node_modules/source-map/lib/mapping-list.js\").MappingList);\n\n/**\n * An instance of the SourceMapGenerator represents a source map which is\n * being built incrementally. You may pass an object with the following\n * properties:\n *\n *   - file: The filename of the generated source.\n *   - sourceRoot: A root for all relative URLs in this source map.\n */\nfunction SourceMapGenerator(aArgs) {\n  if (!aArgs) {\n    aArgs = {};\n  }\n  this._file = util.getArg(aArgs, 'file', null);\n  this._sourceRoot = util.getArg(aArgs, 'sourceRoot', null);\n  this._skipValidation = util.getArg(aArgs, 'skipValidation', false);\n  this._sources = new ArraySet();\n  this._names = new ArraySet();\n  this._mappings = new MappingList();\n  this._sourcesContents = null;\n}\n\nSourceMapGenerator.prototype._version = 3;\n\n/**\n * Creates a new SourceMapGenerator based on a SourceMapConsumer\n *\n * @param aSourceMapConsumer The SourceMap.\n */\nSourceMapGenerator.fromSourceMap =\n  function SourceMapGenerator_fromSourceMap(aSourceMapConsumer) {\n    var sourceRoot = aSourceMapConsumer.sourceRoot;\n    var generator = new SourceMapGenerator({\n      file: aSourceMapConsumer.file,\n      sourceRoot: sourceRoot\n    });\n    aSourceMapConsumer.eachMapping(function (mapping) {\n      var newMapping = {\n        generated: {\n          line: mapping.generatedLine,\n          column: mapping.generatedColumn\n        }\n      };\n\n      if (mapping.source != null) {\n        newMapping.source = mapping.source;\n        if (sourceRoot != null) {\n          newMapping.source = util.relative(sourceRoot, newMapping.source);\n        }\n\n        newMapping.original = {\n          line: mapping.originalLine,\n          column: mapping.originalColumn\n        };\n\n        if (mapping.name != null) {\n          newMapping.name = mapping.name;\n        }\n      }\n\n      generator.addMapping(newMapping);\n    });\n    aSourceMapConsumer.sources.forEach(function (sourceFile) {\n      var sourceRelative = sourceFile;\n      if (sourceRoot !== null) {\n        sourceRelative = util.relative(sourceRoot, sourceFile);\n      }\n\n      if (!generator._sources.has(sourceRelative)) {\n        generator._sources.add(sourceRelative);\n      }\n\n      var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n      if (content != null) {\n        generator.setSourceContent(sourceFile, content);\n      }\n    });\n    return generator;\n  };\n\n/**\n * Add a single mapping from original source line and column to the generated\n * source's line and column for this source map being created. The mapping\n * object should have the following properties:\n *\n *   - generated: An object with the generated line and column positions.\n *   - original: An object with the original line and column positions.\n *   - source: The original source file (relative to the sourceRoot).\n *   - name: An optional original token name for this mapping.\n */\nSourceMapGenerator.prototype.addMapping =\n  function SourceMapGenerator_addMapping(aArgs) {\n    var generated = util.getArg(aArgs, 'generated');\n    var original = util.getArg(aArgs, 'original', null);\n    var source = util.getArg(aArgs, 'source', null);\n    var name = util.getArg(aArgs, 'name', null);\n\n    if (!this._skipValidation) {\n      this._validateMapping(generated, original, source, name);\n    }\n\n    if (source != null) {\n      source = String(source);\n      if (!this._sources.has(source)) {\n        this._sources.add(source);\n      }\n    }\n\n    if (name != null) {\n      name = String(name);\n      if (!this._names.has(name)) {\n        this._names.add(name);\n      }\n    }\n\n    this._mappings.add({\n      generatedLine: generated.line,\n      generatedColumn: generated.column,\n      originalLine: original != null && original.line,\n      originalColumn: original != null && original.column,\n      source: source,\n      name: name\n    });\n  };\n\n/**\n * Set the source content for a source file.\n */\nSourceMapGenerator.prototype.setSourceContent =\n  function SourceMapGenerator_setSourceContent(aSourceFile, aSourceContent) {\n    var source = aSourceFile;\n    if (this._sourceRoot != null) {\n      source = util.relative(this._sourceRoot, source);\n    }\n\n    if (aSourceContent != null) {\n      // Add the source content to the _sourcesContents map.\n      // Create a new _sourcesContents map if the property is null.\n      if (!this._sourcesContents) {\n        this._sourcesContents = Object.create(null);\n      }\n      this._sourcesContents[util.toSetString(source)] = aSourceContent;\n    } else if (this._sourcesContents) {\n      // Remove the source file from the _sourcesContents map.\n      // If the _sourcesContents map is empty, set the property to null.\n      delete this._sourcesContents[util.toSetString(source)];\n      if (Object.keys(this._sourcesContents).length === 0) {\n        this._sourcesContents = null;\n      }\n    }\n  };\n\n/**\n * Applies the mappings of a sub-source-map for a specific source file to the\n * source map being generated. Each mapping to the supplied source file is\n * rewritten using the supplied source map. Note: The resolution for the\n * resulting mappings is the minimium of this map and the supplied map.\n *\n * @param aSourceMapConsumer The source map to be applied.\n * @param aSourceFile Optional. The filename of the source file.\n *        If omitted, SourceMapConsumer's file property will be used.\n * @param aSourceMapPath Optional. The dirname of the path to the source map\n *        to be applied. If relative, it is relative to the SourceMapConsumer.\n *        This parameter is needed when the two source maps aren't in the same\n *        directory, and the source map to be applied contains relative source\n *        paths. If so, those relative source paths need to be rewritten\n *        relative to the SourceMapGenerator.\n */\nSourceMapGenerator.prototype.applySourceMap =\n  function SourceMapGenerator_applySourceMap(aSourceMapConsumer, aSourceFile, aSourceMapPath) {\n    var sourceFile = aSourceFile;\n    // If aSourceFile is omitted, we will use the file property of the SourceMap\n    if (aSourceFile == null) {\n      if (aSourceMapConsumer.file == null) {\n        throw new Error(\n          'SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, ' +\n          'or the source map\\'s \"file\" property. Both were omitted.'\n        );\n      }\n      sourceFile = aSourceMapConsumer.file;\n    }\n    var sourceRoot = this._sourceRoot;\n    // Make \"sourceFile\" relative if an absolute Url is passed.\n    if (sourceRoot != null) {\n      sourceFile = util.relative(sourceRoot, sourceFile);\n    }\n    // Applying the SourceMap can add and remove items from the sources and\n    // the names array.\n    var newSources = new ArraySet();\n    var newNames = new ArraySet();\n\n    // Find mappings for the \"sourceFile\"\n    this._mappings.unsortedForEach(function (mapping) {\n      if (mapping.source === sourceFile && mapping.originalLine != null) {\n        // Check if it can be mapped by the source map, then update the mapping.\n        var original = aSourceMapConsumer.originalPositionFor({\n          line: mapping.originalLine,\n          column: mapping.originalColumn\n        });\n        if (original.source != null) {\n          // Copy mapping\n          mapping.source = original.source;\n          if (aSourceMapPath != null) {\n            mapping.source = util.join(aSourceMapPath, mapping.source)\n          }\n          if (sourceRoot != null) {\n            mapping.source = util.relative(sourceRoot, mapping.source);\n          }\n          mapping.originalLine = original.line;\n          mapping.originalColumn = original.column;\n          if (original.name != null) {\n            mapping.name = original.name;\n          }\n        }\n      }\n\n      var source = mapping.source;\n      if (source != null && !newSources.has(source)) {\n        newSources.add(source);\n      }\n\n      var name = mapping.name;\n      if (name != null && !newNames.has(name)) {\n        newNames.add(name);\n      }\n\n    }, this);\n    this._sources = newSources;\n    this._names = newNames;\n\n    // Copy sourcesContents of applied map.\n    aSourceMapConsumer.sources.forEach(function (sourceFile) {\n      var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n      if (content != null) {\n        if (aSourceMapPath != null) {\n          sourceFile = util.join(aSourceMapPath, sourceFile);\n        }\n        if (sourceRoot != null) {\n          sourceFile = util.relative(sourceRoot, sourceFile);\n        }\n        this.setSourceContent(sourceFile, content);\n      }\n    }, this);\n  };\n\n/**\n * A mapping can have one of the three levels of data:\n *\n *   1. Just the generated position.\n *   2. The Generated position, original position, and original source.\n *   3. Generated and original position, original source, as well as a name\n *      token.\n *\n * To maintain consistency, we validate that any new mapping being added falls\n * in to one of these categories.\n */\nSourceMapGenerator.prototype._validateMapping =\n  function SourceMapGenerator_validateMapping(aGenerated, aOriginal, aSource,\n                                              aName) {\n    // When aOriginal is truthy but has empty values for .line and .column,\n    // it is most likely a programmer error. In this case we throw a very\n    // specific error message to try to guide them the right way.\n    // For example: https://github.com/Polymer/polymer-bundler/pull/519\n    if (aOriginal && typeof aOriginal.line !== 'number' && typeof aOriginal.column !== 'number') {\n        throw new Error(\n            'original.line and original.column are not numbers -- you probably meant to omit ' +\n            'the original mapping entirely and only map the generated position. If so, pass ' +\n            'null for the original mapping instead of an object with empty or null values.'\n        );\n    }\n\n    if (aGenerated && 'line' in aGenerated && 'column' in aGenerated\n        && aGenerated.line > 0 && aGenerated.column >= 0\n        && !aOriginal && !aSource && !aName) {\n      // Case 1.\n      return;\n    }\n    else if (aGenerated && 'line' in aGenerated && 'column' in aGenerated\n             && aOriginal && 'line' in aOriginal && 'column' in aOriginal\n             && aGenerated.line > 0 && aGenerated.column >= 0\n             && aOriginal.line > 0 && aOriginal.column >= 0\n             && aSource) {\n      // Cases 2 and 3.\n      return;\n    }\n    else {\n      throw new Error('Invalid mapping: ' + JSON.stringify({\n        generated: aGenerated,\n        source: aSource,\n        original: aOriginal,\n        name: aName\n      }));\n    }\n  };\n\n/**\n * Serialize the accumulated mappings in to the stream of base 64 VLQs\n * specified by the source map format.\n */\nSourceMapGenerator.prototype._serializeMappings =\n  function SourceMapGenerator_serializeMappings() {\n    var previousGeneratedColumn = 0;\n    var previousGeneratedLine = 1;\n    var previousOriginalColumn = 0;\n    var previousOriginalLine = 0;\n    var previousName = 0;\n    var previousSource = 0;\n    var result = '';\n    var next;\n    var mapping;\n    var nameIdx;\n    var sourceIdx;\n\n    var mappings = this._mappings.toArray();\n    for (var i = 0, len = mappings.length; i < len; i++) {\n      mapping = mappings[i];\n      next = ''\n\n      if (mapping.generatedLine !== previousGeneratedLine) {\n        previousGeneratedColumn = 0;\n        while (mapping.generatedLine !== previousGeneratedLine) {\n          next += ';';\n          previousGeneratedLine++;\n        }\n      }\n      else {\n        if (i > 0) {\n          if (!util.compareByGeneratedPositionsInflated(mapping, mappings[i - 1])) {\n            continue;\n          }\n          next += ',';\n        }\n      }\n\n      next += base64VLQ.encode(mapping.generatedColumn\n                                 - previousGeneratedColumn);\n      previousGeneratedColumn = mapping.generatedColumn;\n\n      if (mapping.source != null) {\n        sourceIdx = this._sources.indexOf(mapping.source);\n        next += base64VLQ.encode(sourceIdx - previousSource);\n        previousSource = sourceIdx;\n\n        // lines are stored 0-based in SourceMap spec version 3\n        next += base64VLQ.encode(mapping.originalLine - 1\n                                   - previousOriginalLine);\n        previousOriginalLine = mapping.originalLine - 1;\n\n        next += base64VLQ.encode(mapping.originalColumn\n                                   - previousOriginalColumn);\n        previousOriginalColumn = mapping.originalColumn;\n\n        if (mapping.name != null) {\n          nameIdx = this._names.indexOf(mapping.name);\n          next += base64VLQ.encode(nameIdx - previousName);\n          previousName = nameIdx;\n        }\n      }\n\n      result += next;\n    }\n\n    return result;\n  };\n\nSourceMapGenerator.prototype._generateSourcesContent =\n  function SourceMapGenerator_generateSourcesContent(aSources, aSourceRoot) {\n    return aSources.map(function (source) {\n      if (!this._sourcesContents) {\n        return null;\n      }\n      if (aSourceRoot != null) {\n        source = util.relative(aSourceRoot, source);\n      }\n      var key = util.toSetString(source);\n      return Object.prototype.hasOwnProperty.call(this._sourcesContents, key)\n        ? this._sourcesContents[key]\n        : null;\n    }, this);\n  };\n\n/**\n * Externalize the source map.\n */\nSourceMapGenerator.prototype.toJSON =\n  function SourceMapGenerator_toJSON() {\n    var map = {\n      version: this._version,\n      sources: this._sources.toArray(),\n      names: this._names.toArray(),\n      mappings: this._serializeMappings()\n    };\n    if (this._file != null) {\n      map.file = this._file;\n    }\n    if (this._sourceRoot != null) {\n      map.sourceRoot = this._sourceRoot;\n    }\n    if (this._sourcesContents) {\n      map.sourcesContent = this._generateSourcesContent(map.sources, map.sourceRoot);\n    }\n\n    return map;\n  };\n\n/**\n * Render the source map being generated to a string.\n */\nSourceMapGenerator.prototype.toString =\n  function SourceMapGenerator_toString() {\n    return JSON.stringify(this.toJSON());\n  };\n\nexports.SourceMapGenerator = SourceMapGenerator;\n\n\n//# sourceURL=webpack://playground/./node_modules/source-map/lib/source-map-generator.js?");

/***/ }),

/***/ "./node_modules/source-map/lib/source-node.js":
/*!****************************************************!*\
  !*** ./node_modules/source-map/lib/source-node.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar SourceMapGenerator = (__webpack_require__(/*! ./source-map-generator */ \"./node_modules/source-map/lib/source-map-generator.js\").SourceMapGenerator);\nvar util = __webpack_require__(/*! ./util */ \"./node_modules/source-map/lib/util.js\");\n\n// Matches a Windows-style `\\r\\n` newline or a `\\n` newline used by all other\n// operating systems these days (capturing the result).\nvar REGEX_NEWLINE = /(\\r?\\n)/;\n\n// Newline character code for charCodeAt() comparisons\nvar NEWLINE_CODE = 10;\n\n// Private symbol for identifying `SourceNode`s when multiple versions of\n// the source-map library are loaded. This MUST NOT CHANGE across\n// versions!\nvar isSourceNode = \"$$$isSourceNode$$$\";\n\n/**\n * SourceNodes provide a way to abstract over interpolating/concatenating\n * snippets of generated JavaScript source code while maintaining the line and\n * column information associated with the original source code.\n *\n * @param aLine The original line number.\n * @param aColumn The original column number.\n * @param aSource The original source's filename.\n * @param aChunks Optional. An array of strings which are snippets of\n *        generated JS, or other SourceNodes.\n * @param aName The original identifier.\n */\nfunction SourceNode(aLine, aColumn, aSource, aChunks, aName) {\n  this.children = [];\n  this.sourceContents = {};\n  this.line = aLine == null ? null : aLine;\n  this.column = aColumn == null ? null : aColumn;\n  this.source = aSource == null ? null : aSource;\n  this.name = aName == null ? null : aName;\n  this[isSourceNode] = true;\n  if (aChunks != null) this.add(aChunks);\n}\n\n/**\n * Creates a SourceNode from generated code and a SourceMapConsumer.\n *\n * @param aGeneratedCode The generated code\n * @param aSourceMapConsumer The SourceMap for the generated code\n * @param aRelativePath Optional. The path that relative sources in the\n *        SourceMapConsumer should be relative to.\n */\nSourceNode.fromStringWithSourceMap =\n  function SourceNode_fromStringWithSourceMap(aGeneratedCode, aSourceMapConsumer, aRelativePath) {\n    // The SourceNode we want to fill with the generated code\n    // and the SourceMap\n    var node = new SourceNode();\n\n    // All even indices of this array are one line of the generated code,\n    // while all odd indices are the newlines between two adjacent lines\n    // (since `REGEX_NEWLINE` captures its match).\n    // Processed fragments are accessed by calling `shiftNextLine`.\n    var remainingLines = aGeneratedCode.split(REGEX_NEWLINE);\n    var remainingLinesIndex = 0;\n    var shiftNextLine = function() {\n      var lineContents = getNextLine();\n      // The last line of a file might not have a newline.\n      var newLine = getNextLine() || \"\";\n      return lineContents + newLine;\n\n      function getNextLine() {\n        return remainingLinesIndex < remainingLines.length ?\n            remainingLines[remainingLinesIndex++] : undefined;\n      }\n    };\n\n    // We need to remember the position of \"remainingLines\"\n    var lastGeneratedLine = 1, lastGeneratedColumn = 0;\n\n    // The generate SourceNodes we need a code range.\n    // To extract it current and last mapping is used.\n    // Here we store the last mapping.\n    var lastMapping = null;\n\n    aSourceMapConsumer.eachMapping(function (mapping) {\n      if (lastMapping !== null) {\n        // We add the code from \"lastMapping\" to \"mapping\":\n        // First check if there is a new line in between.\n        if (lastGeneratedLine < mapping.generatedLine) {\n          // Associate first line with \"lastMapping\"\n          addMappingWithCode(lastMapping, shiftNextLine());\n          lastGeneratedLine++;\n          lastGeneratedColumn = 0;\n          // The remaining code is added without mapping\n        } else {\n          // There is no new line in between.\n          // Associate the code between \"lastGeneratedColumn\" and\n          // \"mapping.generatedColumn\" with \"lastMapping\"\n          var nextLine = remainingLines[remainingLinesIndex] || '';\n          var code = nextLine.substr(0, mapping.generatedColumn -\n                                        lastGeneratedColumn);\n          remainingLines[remainingLinesIndex] = nextLine.substr(mapping.generatedColumn -\n                                              lastGeneratedColumn);\n          lastGeneratedColumn = mapping.generatedColumn;\n          addMappingWithCode(lastMapping, code);\n          // No more remaining code, continue\n          lastMapping = mapping;\n          return;\n        }\n      }\n      // We add the generated code until the first mapping\n      // to the SourceNode without any mapping.\n      // Each line is added as separate string.\n      while (lastGeneratedLine < mapping.generatedLine) {\n        node.add(shiftNextLine());\n        lastGeneratedLine++;\n      }\n      if (lastGeneratedColumn < mapping.generatedColumn) {\n        var nextLine = remainingLines[remainingLinesIndex] || '';\n        node.add(nextLine.substr(0, mapping.generatedColumn));\n        remainingLines[remainingLinesIndex] = nextLine.substr(mapping.generatedColumn);\n        lastGeneratedColumn = mapping.generatedColumn;\n      }\n      lastMapping = mapping;\n    }, this);\n    // We have processed all mappings.\n    if (remainingLinesIndex < remainingLines.length) {\n      if (lastMapping) {\n        // Associate the remaining code in the current line with \"lastMapping\"\n        addMappingWithCode(lastMapping, shiftNextLine());\n      }\n      // and add the remaining lines without any mapping\n      node.add(remainingLines.splice(remainingLinesIndex).join(\"\"));\n    }\n\n    // Copy sourcesContent into SourceNode\n    aSourceMapConsumer.sources.forEach(function (sourceFile) {\n      var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n      if (content != null) {\n        if (aRelativePath != null) {\n          sourceFile = util.join(aRelativePath, sourceFile);\n        }\n        node.setSourceContent(sourceFile, content);\n      }\n    });\n\n    return node;\n\n    function addMappingWithCode(mapping, code) {\n      if (mapping === null || mapping.source === undefined) {\n        node.add(code);\n      } else {\n        var source = aRelativePath\n          ? util.join(aRelativePath, mapping.source)\n          : mapping.source;\n        node.add(new SourceNode(mapping.originalLine,\n                                mapping.originalColumn,\n                                source,\n                                code,\n                                mapping.name));\n      }\n    }\n  };\n\n/**\n * Add a chunk of generated JS to this source node.\n *\n * @param aChunk A string snippet of generated JS code, another instance of\n *        SourceNode, or an array where each member is one of those things.\n */\nSourceNode.prototype.add = function SourceNode_add(aChunk) {\n  if (Array.isArray(aChunk)) {\n    aChunk.forEach(function (chunk) {\n      this.add(chunk);\n    }, this);\n  }\n  else if (aChunk[isSourceNode] || typeof aChunk === \"string\") {\n    if (aChunk) {\n      this.children.push(aChunk);\n    }\n  }\n  else {\n    throw new TypeError(\n      \"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \" + aChunk\n    );\n  }\n  return this;\n};\n\n/**\n * Add a chunk of generated JS to the beginning of this source node.\n *\n * @param aChunk A string snippet of generated JS code, another instance of\n *        SourceNode, or an array where each member is one of those things.\n */\nSourceNode.prototype.prepend = function SourceNode_prepend(aChunk) {\n  if (Array.isArray(aChunk)) {\n    for (var i = aChunk.length-1; i >= 0; i--) {\n      this.prepend(aChunk[i]);\n    }\n  }\n  else if (aChunk[isSourceNode] || typeof aChunk === \"string\") {\n    this.children.unshift(aChunk);\n  }\n  else {\n    throw new TypeError(\n      \"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \" + aChunk\n    );\n  }\n  return this;\n};\n\n/**\n * Walk over the tree of JS snippets in this node and its children. The\n * walking function is called once for each snippet of JS and is passed that\n * snippet and the its original associated source's line/column location.\n *\n * @param aFn The traversal function.\n */\nSourceNode.prototype.walk = function SourceNode_walk(aFn) {\n  var chunk;\n  for (var i = 0, len = this.children.length; i < len; i++) {\n    chunk = this.children[i];\n    if (chunk[isSourceNode]) {\n      chunk.walk(aFn);\n    }\n    else {\n      if (chunk !== '') {\n        aFn(chunk, { source: this.source,\n                     line: this.line,\n                     column: this.column,\n                     name: this.name });\n      }\n    }\n  }\n};\n\n/**\n * Like `String.prototype.join` except for SourceNodes. Inserts `aStr` between\n * each of `this.children`.\n *\n * @param aSep The separator.\n */\nSourceNode.prototype.join = function SourceNode_join(aSep) {\n  var newChildren;\n  var i;\n  var len = this.children.length;\n  if (len > 0) {\n    newChildren = [];\n    for (i = 0; i < len-1; i++) {\n      newChildren.push(this.children[i]);\n      newChildren.push(aSep);\n    }\n    newChildren.push(this.children[i]);\n    this.children = newChildren;\n  }\n  return this;\n};\n\n/**\n * Call String.prototype.replace on the very right-most source snippet. Useful\n * for trimming whitespace from the end of a source node, etc.\n *\n * @param aPattern The pattern to replace.\n * @param aReplacement The thing to replace the pattern with.\n */\nSourceNode.prototype.replaceRight = function SourceNode_replaceRight(aPattern, aReplacement) {\n  var lastChild = this.children[this.children.length - 1];\n  if (lastChild[isSourceNode]) {\n    lastChild.replaceRight(aPattern, aReplacement);\n  }\n  else if (typeof lastChild === 'string') {\n    this.children[this.children.length - 1] = lastChild.replace(aPattern, aReplacement);\n  }\n  else {\n    this.children.push(''.replace(aPattern, aReplacement));\n  }\n  return this;\n};\n\n/**\n * Set the source content for a source file. This will be added to the SourceMapGenerator\n * in the sourcesContent field.\n *\n * @param aSourceFile The filename of the source file\n * @param aSourceContent The content of the source file\n */\nSourceNode.prototype.setSourceContent =\n  function SourceNode_setSourceContent(aSourceFile, aSourceContent) {\n    this.sourceContents[util.toSetString(aSourceFile)] = aSourceContent;\n  };\n\n/**\n * Walk over the tree of SourceNodes. The walking function is called for each\n * source file content and is passed the filename and source content.\n *\n * @param aFn The traversal function.\n */\nSourceNode.prototype.walkSourceContents =\n  function SourceNode_walkSourceContents(aFn) {\n    for (var i = 0, len = this.children.length; i < len; i++) {\n      if (this.children[i][isSourceNode]) {\n        this.children[i].walkSourceContents(aFn);\n      }\n    }\n\n    var sources = Object.keys(this.sourceContents);\n    for (var i = 0, len = sources.length; i < len; i++) {\n      aFn(util.fromSetString(sources[i]), this.sourceContents[sources[i]]);\n    }\n  };\n\n/**\n * Return the string representation of this source node. Walks over the tree\n * and concatenates all the various snippets together to one string.\n */\nSourceNode.prototype.toString = function SourceNode_toString() {\n  var str = \"\";\n  this.walk(function (chunk) {\n    str += chunk;\n  });\n  return str;\n};\n\n/**\n * Returns the string representation of this source node along with a source\n * map.\n */\nSourceNode.prototype.toStringWithSourceMap = function SourceNode_toStringWithSourceMap(aArgs) {\n  var generated = {\n    code: \"\",\n    line: 1,\n    column: 0\n  };\n  var map = new SourceMapGenerator(aArgs);\n  var sourceMappingActive = false;\n  var lastOriginalSource = null;\n  var lastOriginalLine = null;\n  var lastOriginalColumn = null;\n  var lastOriginalName = null;\n  this.walk(function (chunk, original) {\n    generated.code += chunk;\n    if (original.source !== null\n        && original.line !== null\n        && original.column !== null) {\n      if(lastOriginalSource !== original.source\n         || lastOriginalLine !== original.line\n         || lastOriginalColumn !== original.column\n         || lastOriginalName !== original.name) {\n        map.addMapping({\n          source: original.source,\n          original: {\n            line: original.line,\n            column: original.column\n          },\n          generated: {\n            line: generated.line,\n            column: generated.column\n          },\n          name: original.name\n        });\n      }\n      lastOriginalSource = original.source;\n      lastOriginalLine = original.line;\n      lastOriginalColumn = original.column;\n      lastOriginalName = original.name;\n      sourceMappingActive = true;\n    } else if (sourceMappingActive) {\n      map.addMapping({\n        generated: {\n          line: generated.line,\n          column: generated.column\n        }\n      });\n      lastOriginalSource = null;\n      sourceMappingActive = false;\n    }\n    for (var idx = 0, length = chunk.length; idx < length; idx++) {\n      if (chunk.charCodeAt(idx) === NEWLINE_CODE) {\n        generated.line++;\n        generated.column = 0;\n        // Mappings end at eol\n        if (idx + 1 === length) {\n          lastOriginalSource = null;\n          sourceMappingActive = false;\n        } else if (sourceMappingActive) {\n          map.addMapping({\n            source: original.source,\n            original: {\n              line: original.line,\n              column: original.column\n            },\n            generated: {\n              line: generated.line,\n              column: generated.column\n            },\n            name: original.name\n          });\n        }\n      } else {\n        generated.column++;\n      }\n    }\n  });\n  this.walkSourceContents(function (sourceFile, sourceContent) {\n    map.setSourceContent(sourceFile, sourceContent);\n  });\n\n  return { code: generated.code, map: map };\n};\n\nexports.SourceNode = SourceNode;\n\n\n//# sourceURL=webpack://playground/./node_modules/source-map/lib/source-node.js?");

/***/ }),

/***/ "./node_modules/source-map/lib/util.js":
/*!*********************************************!*\
  !*** ./node_modules/source-map/lib/util.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\n/**\n * This is a helper function for getting values from parameter/options\n * objects.\n *\n * @param args The object we are extracting values from\n * @param name The name of the property we are getting.\n * @param defaultValue An optional value to return if the property is missing\n * from the object. If this is not specified and the property is missing, an\n * error will be thrown.\n */\nfunction getArg(aArgs, aName, aDefaultValue) {\n  if (aName in aArgs) {\n    return aArgs[aName];\n  } else if (arguments.length === 3) {\n    return aDefaultValue;\n  } else {\n    throw new Error('\"' + aName + '\" is a required argument.');\n  }\n}\nexports.getArg = getArg;\n\nvar urlRegexp = /^(?:([\\w+\\-.]+):)?\\/\\/(?:(\\w+:\\w+)@)?([\\w.-]*)(?::(\\d+))?(.*)$/;\nvar dataUrlRegexp = /^data:.+\\,.+$/;\n\nfunction urlParse(aUrl) {\n  var match = aUrl.match(urlRegexp);\n  if (!match) {\n    return null;\n  }\n  return {\n    scheme: match[1],\n    auth: match[2],\n    host: match[3],\n    port: match[4],\n    path: match[5]\n  };\n}\nexports.urlParse = urlParse;\n\nfunction urlGenerate(aParsedUrl) {\n  var url = '';\n  if (aParsedUrl.scheme) {\n    url += aParsedUrl.scheme + ':';\n  }\n  url += '//';\n  if (aParsedUrl.auth) {\n    url += aParsedUrl.auth + '@';\n  }\n  if (aParsedUrl.host) {\n    url += aParsedUrl.host;\n  }\n  if (aParsedUrl.port) {\n    url += \":\" + aParsedUrl.port\n  }\n  if (aParsedUrl.path) {\n    url += aParsedUrl.path;\n  }\n  return url;\n}\nexports.urlGenerate = urlGenerate;\n\n/**\n * Normalizes a path, or the path portion of a URL:\n *\n * - Replaces consecutive slashes with one slash.\n * - Removes unnecessary '.' parts.\n * - Removes unnecessary '<dir>/..' parts.\n *\n * Based on code in the Node.js 'path' core module.\n *\n * @param aPath The path or url to normalize.\n */\nfunction normalize(aPath) {\n  var path = aPath;\n  var url = urlParse(aPath);\n  if (url) {\n    if (!url.path) {\n      return aPath;\n    }\n    path = url.path;\n  }\n  var isAbsolute = exports.isAbsolute(path);\n\n  var parts = path.split(/\\/+/);\n  for (var part, up = 0, i = parts.length - 1; i >= 0; i--) {\n    part = parts[i];\n    if (part === '.') {\n      parts.splice(i, 1);\n    } else if (part === '..') {\n      up++;\n    } else if (up > 0) {\n      if (part === '') {\n        // The first part is blank if the path is absolute. Trying to go\n        // above the root is a no-op. Therefore we can remove all '..' parts\n        // directly after the root.\n        parts.splice(i + 1, up);\n        up = 0;\n      } else {\n        parts.splice(i, 2);\n        up--;\n      }\n    }\n  }\n  path = parts.join('/');\n\n  if (path === '') {\n    path = isAbsolute ? '/' : '.';\n  }\n\n  if (url) {\n    url.path = path;\n    return urlGenerate(url);\n  }\n  return path;\n}\nexports.normalize = normalize;\n\n/**\n * Joins two paths/URLs.\n *\n * @param aRoot The root path or URL.\n * @param aPath The path or URL to be joined with the root.\n *\n * - If aPath is a URL or a data URI, aPath is returned, unless aPath is a\n *   scheme-relative URL: Then the scheme of aRoot, if any, is prepended\n *   first.\n * - Otherwise aPath is a path. If aRoot is a URL, then its path portion\n *   is updated with the result and aRoot is returned. Otherwise the result\n *   is returned.\n *   - If aPath is absolute, the result is aPath.\n *   - Otherwise the two paths are joined with a slash.\n * - Joining for example 'http://' and 'www.example.com' is also supported.\n */\nfunction join(aRoot, aPath) {\n  if (aRoot === \"\") {\n    aRoot = \".\";\n  }\n  if (aPath === \"\") {\n    aPath = \".\";\n  }\n  var aPathUrl = urlParse(aPath);\n  var aRootUrl = urlParse(aRoot);\n  if (aRootUrl) {\n    aRoot = aRootUrl.path || '/';\n  }\n\n  // `join(foo, '//www.example.org')`\n  if (aPathUrl && !aPathUrl.scheme) {\n    if (aRootUrl) {\n      aPathUrl.scheme = aRootUrl.scheme;\n    }\n    return urlGenerate(aPathUrl);\n  }\n\n  if (aPathUrl || aPath.match(dataUrlRegexp)) {\n    return aPath;\n  }\n\n  // `join('http://', 'www.example.com')`\n  if (aRootUrl && !aRootUrl.host && !aRootUrl.path) {\n    aRootUrl.host = aPath;\n    return urlGenerate(aRootUrl);\n  }\n\n  var joined = aPath.charAt(0) === '/'\n    ? aPath\n    : normalize(aRoot.replace(/\\/+$/, '') + '/' + aPath);\n\n  if (aRootUrl) {\n    aRootUrl.path = joined;\n    return urlGenerate(aRootUrl);\n  }\n  return joined;\n}\nexports.join = join;\n\nexports.isAbsolute = function (aPath) {\n  return aPath.charAt(0) === '/' || urlRegexp.test(aPath);\n};\n\n/**\n * Make a path relative to a URL or another path.\n *\n * @param aRoot The root path or URL.\n * @param aPath The path or URL to be made relative to aRoot.\n */\nfunction relative(aRoot, aPath) {\n  if (aRoot === \"\") {\n    aRoot = \".\";\n  }\n\n  aRoot = aRoot.replace(/\\/$/, '');\n\n  // It is possible for the path to be above the root. In this case, simply\n  // checking whether the root is a prefix of the path won't work. Instead, we\n  // need to remove components from the root one by one, until either we find\n  // a prefix that fits, or we run out of components to remove.\n  var level = 0;\n  while (aPath.indexOf(aRoot + '/') !== 0) {\n    var index = aRoot.lastIndexOf(\"/\");\n    if (index < 0) {\n      return aPath;\n    }\n\n    // If the only part of the root that is left is the scheme (i.e. http://,\n    // file:///, etc.), one or more slashes (/), or simply nothing at all, we\n    // have exhausted all components, so the path is not relative to the root.\n    aRoot = aRoot.slice(0, index);\n    if (aRoot.match(/^([^\\/]+:\\/)?\\/*$/)) {\n      return aPath;\n    }\n\n    ++level;\n  }\n\n  // Make sure we add a \"../\" for each component we removed from the root.\n  return Array(level + 1).join(\"../\") + aPath.substr(aRoot.length + 1);\n}\nexports.relative = relative;\n\nvar supportsNullProto = (function () {\n  var obj = Object.create(null);\n  return !('__proto__' in obj);\n}());\n\nfunction identity (s) {\n  return s;\n}\n\n/**\n * Because behavior goes wacky when you set `__proto__` on objects, we\n * have to prefix all the strings in our set with an arbitrary character.\n *\n * See https://github.com/mozilla/source-map/pull/31 and\n * https://github.com/mozilla/source-map/issues/30\n *\n * @param String aStr\n */\nfunction toSetString(aStr) {\n  if (isProtoString(aStr)) {\n    return '$' + aStr;\n  }\n\n  return aStr;\n}\nexports.toSetString = supportsNullProto ? identity : toSetString;\n\nfunction fromSetString(aStr) {\n  if (isProtoString(aStr)) {\n    return aStr.slice(1);\n  }\n\n  return aStr;\n}\nexports.fromSetString = supportsNullProto ? identity : fromSetString;\n\nfunction isProtoString(s) {\n  if (!s) {\n    return false;\n  }\n\n  var length = s.length;\n\n  if (length < 9 /* \"__proto__\".length */) {\n    return false;\n  }\n\n  if (s.charCodeAt(length - 1) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 2) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 3) !== 111 /* 'o' */ ||\n      s.charCodeAt(length - 4) !== 116 /* 't' */ ||\n      s.charCodeAt(length - 5) !== 111 /* 'o' */ ||\n      s.charCodeAt(length - 6) !== 114 /* 'r' */ ||\n      s.charCodeAt(length - 7) !== 112 /* 'p' */ ||\n      s.charCodeAt(length - 8) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 9) !== 95  /* '_' */) {\n    return false;\n  }\n\n  for (var i = length - 10; i >= 0; i--) {\n    if (s.charCodeAt(i) !== 36 /* '$' */) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Comparator between two mappings where the original positions are compared.\n *\n * Optionally pass in `true` as `onlyCompareGenerated` to consider two\n * mappings with the same original source/line/column, but different generated\n * line and column the same. Useful when searching for a mapping with a\n * stubbed out mapping.\n */\nfunction compareByOriginalPositions(mappingA, mappingB, onlyCompareOriginal) {\n  var cmp = strcmp(mappingA.source, mappingB.source);\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0 || onlyCompareOriginal) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByOriginalPositions = compareByOriginalPositions;\n\n/**\n * Comparator between two mappings with deflated source and name indices where\n * the generated positions are compared.\n *\n * Optionally pass in `true` as `onlyCompareGenerated` to consider two\n * mappings with the same generated line and column, but different\n * source/name/original line and column the same. Useful when searching for a\n * mapping with a stubbed out mapping.\n */\nfunction compareByGeneratedPositionsDeflated(mappingA, mappingB, onlyCompareGenerated) {\n  var cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0 || onlyCompareGenerated) {\n    return cmp;\n  }\n\n  cmp = strcmp(mappingA.source, mappingB.source);\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByGeneratedPositionsDeflated = compareByGeneratedPositionsDeflated;\n\nfunction strcmp(aStr1, aStr2) {\n  if (aStr1 === aStr2) {\n    return 0;\n  }\n\n  if (aStr1 === null) {\n    return 1; // aStr2 !== null\n  }\n\n  if (aStr2 === null) {\n    return -1; // aStr1 !== null\n  }\n\n  if (aStr1 > aStr2) {\n    return 1;\n  }\n\n  return -1;\n}\n\n/**\n * Comparator between two mappings with inflated source and name strings where\n * the generated positions are compared.\n */\nfunction compareByGeneratedPositionsInflated(mappingA, mappingB) {\n  var cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = strcmp(mappingA.source, mappingB.source);\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByGeneratedPositionsInflated = compareByGeneratedPositionsInflated;\n\n/**\n * Strip any JSON XSSI avoidance prefix from the string (as documented\n * in the source maps specification), and then parse the string as\n * JSON.\n */\nfunction parseSourceMapInput(str) {\n  return JSON.parse(str.replace(/^\\)]}'[^\\n]*\\n/, ''));\n}\nexports.parseSourceMapInput = parseSourceMapInput;\n\n/**\n * Compute the URL of a source given the the source root, the source's\n * URL, and the source map's URL.\n */\nfunction computeSourceURL(sourceRoot, sourceURL, sourceMapURL) {\n  sourceURL = sourceURL || '';\n\n  if (sourceRoot) {\n    // This follows what Chrome does.\n    if (sourceRoot[sourceRoot.length - 1] !== '/' && sourceURL[0] !== '/') {\n      sourceRoot += '/';\n    }\n    // The spec says:\n    //   Line 4: An optional source root, useful for relocating source\n    //   files on a server or removing repeated values in the\n    //   sources entry.  This value is prepended to the individual\n    //   entries in the source field.\n    sourceURL = sourceRoot + sourceURL;\n  }\n\n  // Historically, SourceMapConsumer did not take the sourceMapURL as\n  // a parameter.  This mode is still somewhat supported, which is why\n  // this code block is conditional.  However, it's preferable to pass\n  // the source map URL to SourceMapConsumer, so that this function\n  // can implement the source URL resolution algorithm as outlined in\n  // the spec.  This block is basically the equivalent of:\n  //    new URL(sourceURL, sourceMapURL).toString()\n  // ... except it avoids using URL, which wasn't available in the\n  // older releases of node still supported by this library.\n  //\n  // The spec says:\n  //   If the sources are not absolute URLs after prepending of the\n  //   sourceRoot, the sources are resolved relative to the\n  //   SourceMap (like resolving script src in a html document).\n  if (sourceMapURL) {\n    var parsed = urlParse(sourceMapURL);\n    if (!parsed) {\n      throw new Error(\"sourceMapURL could not be parsed\");\n    }\n    if (parsed.path) {\n      // Strip the last path component, but keep the \"/\".\n      var index = parsed.path.lastIndexOf('/');\n      if (index >= 0) {\n        parsed.path = parsed.path.substring(0, index + 1);\n      }\n    }\n    sourceURL = join(urlGenerate(parsed), sourceURL);\n  }\n\n  return normalize(sourceURL);\n}\nexports.computeSourceURL = computeSourceURL;\n\n\n//# sourceURL=webpack://playground/./node_modules/source-map/lib/util.js?");

/***/ }),

/***/ "./node_modules/source-map/source-map.js":
/*!***********************************************!*\
  !*** ./node_modules/source-map/source-map.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("/*\n * Copyright 2009-2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE.txt or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\nexports.SourceMapGenerator = __webpack_require__(/*! ./lib/source-map-generator */ \"./node_modules/source-map/lib/source-map-generator.js\").SourceMapGenerator;\nexports.SourceMapConsumer = __webpack_require__(/*! ./lib/source-map-consumer */ \"./node_modules/source-map/lib/source-map-consumer.js\").SourceMapConsumer;\nexports.SourceNode = __webpack_require__(/*! ./lib/source-node */ \"./node_modules/source-map/lib/source-node.js\").SourceNode;\n\n\n//# sourceURL=webpack://playground/./node_modules/source-map/source-map.js?");

/***/ }),

/***/ "./node_modules/svg-pan-zoom/src/browserify.js":
/*!*****************************************************!*\
  !*** ./node_modules/svg-pan-zoom/src/browserify.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var SvgPanZoom = __webpack_require__(/*! ./svg-pan-zoom.js */ \"./node_modules/svg-pan-zoom/src/svg-pan-zoom.js\");\n\nmodule.exports = SvgPanZoom;\n\n\n//# sourceURL=webpack://playground/./node_modules/svg-pan-zoom/src/browserify.js?");

/***/ }),

/***/ "./node_modules/svg-pan-zoom/src/control-icons.js":
/*!********************************************************!*\
  !*** ./node_modules/svg-pan-zoom/src/control-icons.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var SvgUtils = __webpack_require__(/*! ./svg-utilities */ \"./node_modules/svg-pan-zoom/src/svg-utilities.js\");\n\nmodule.exports = {\n  enable: function(instance) {\n    // Select (and create if necessary) defs\n    var defs = instance.svg.querySelector(\"defs\");\n    if (!defs) {\n      defs = document.createElementNS(SvgUtils.svgNS, \"defs\");\n      instance.svg.appendChild(defs);\n    }\n\n    // Check for style element, and create it if it doesn't exist\n    var styleEl = defs.querySelector(\"style#svg-pan-zoom-controls-styles\");\n    if (!styleEl) {\n      var style = document.createElementNS(SvgUtils.svgNS, \"style\");\n      style.setAttribute(\"id\", \"svg-pan-zoom-controls-styles\");\n      style.setAttribute(\"type\", \"text/css\");\n      style.textContent =\n        \".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }\";\n      defs.appendChild(style);\n    }\n\n    // Zoom Group\n    var zoomGroup = document.createElementNS(SvgUtils.svgNS, \"g\");\n    zoomGroup.setAttribute(\"id\", \"svg-pan-zoom-controls\");\n    zoomGroup.setAttribute(\n      \"transform\",\n      \"translate(\" +\n        (instance.width - 70) +\n        \" \" +\n        (instance.height - 76) +\n        \") scale(0.75)\"\n    );\n    zoomGroup.setAttribute(\"class\", \"svg-pan-zoom-control\");\n\n    // Control elements\n    zoomGroup.appendChild(this._createZoomIn(instance));\n    zoomGroup.appendChild(this._createZoomReset(instance));\n    zoomGroup.appendChild(this._createZoomOut(instance));\n\n    // Finally append created element\n    instance.svg.appendChild(zoomGroup);\n\n    // Cache control instance\n    instance.controlIcons = zoomGroup;\n  },\n\n  _createZoomIn: function(instance) {\n    var zoomIn = document.createElementNS(SvgUtils.svgNS, \"g\");\n    zoomIn.setAttribute(\"id\", \"svg-pan-zoom-zoom-in\");\n    zoomIn.setAttribute(\"transform\", \"translate(30.5 5) scale(0.015)\");\n    zoomIn.setAttribute(\"class\", \"svg-pan-zoom-control\");\n    zoomIn.addEventListener(\n      \"click\",\n      function() {\n        instance.getPublicInstance().zoomIn();\n      },\n      false\n    );\n    zoomIn.addEventListener(\n      \"touchstart\",\n      function() {\n        instance.getPublicInstance().zoomIn();\n      },\n      false\n    );\n\n    var zoomInBackground = document.createElementNS(SvgUtils.svgNS, \"rect\"); // TODO change these background space fillers to rounded rectangles so they look prettier\n    zoomInBackground.setAttribute(\"x\", \"0\");\n    zoomInBackground.setAttribute(\"y\", \"0\");\n    zoomInBackground.setAttribute(\"width\", \"1500\"); // larger than expected because the whole group is transformed to scale down\n    zoomInBackground.setAttribute(\"height\", \"1400\");\n    zoomInBackground.setAttribute(\"class\", \"svg-pan-zoom-control-background\");\n    zoomIn.appendChild(zoomInBackground);\n\n    var zoomInShape = document.createElementNS(SvgUtils.svgNS, \"path\");\n    zoomInShape.setAttribute(\n      \"d\",\n      \"M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z\"\n    );\n    zoomInShape.setAttribute(\"class\", \"svg-pan-zoom-control-element\");\n    zoomIn.appendChild(zoomInShape);\n\n    return zoomIn;\n  },\n\n  _createZoomReset: function(instance) {\n    // reset\n    var resetPanZoomControl = document.createElementNS(SvgUtils.svgNS, \"g\");\n    resetPanZoomControl.setAttribute(\"id\", \"svg-pan-zoom-reset-pan-zoom\");\n    resetPanZoomControl.setAttribute(\"transform\", \"translate(5 35) scale(0.4)\");\n    resetPanZoomControl.setAttribute(\"class\", \"svg-pan-zoom-control\");\n    resetPanZoomControl.addEventListener(\n      \"click\",\n      function() {\n        instance.getPublicInstance().reset();\n      },\n      false\n    );\n    resetPanZoomControl.addEventListener(\n      \"touchstart\",\n      function() {\n        instance.getPublicInstance().reset();\n      },\n      false\n    );\n\n    var resetPanZoomControlBackground = document.createElementNS(\n      SvgUtils.svgNS,\n      \"rect\"\n    ); // TODO change these background space fillers to rounded rectangles so they look prettier\n    resetPanZoomControlBackground.setAttribute(\"x\", \"2\");\n    resetPanZoomControlBackground.setAttribute(\"y\", \"2\");\n    resetPanZoomControlBackground.setAttribute(\"width\", \"182\"); // larger than expected because the whole group is transformed to scale down\n    resetPanZoomControlBackground.setAttribute(\"height\", \"58\");\n    resetPanZoomControlBackground.setAttribute(\n      \"class\",\n      \"svg-pan-zoom-control-background\"\n    );\n    resetPanZoomControl.appendChild(resetPanZoomControlBackground);\n\n    var resetPanZoomControlShape1 = document.createElementNS(\n      SvgUtils.svgNS,\n      \"path\"\n    );\n    resetPanZoomControlShape1.setAttribute(\n      \"d\",\n      \"M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z\"\n    );\n    resetPanZoomControlShape1.setAttribute(\n      \"class\",\n      \"svg-pan-zoom-control-element\"\n    );\n    resetPanZoomControl.appendChild(resetPanZoomControlShape1);\n\n    var resetPanZoomControlShape2 = document.createElementNS(\n      SvgUtils.svgNS,\n      \"path\"\n    );\n    resetPanZoomControlShape2.setAttribute(\n      \"d\",\n      \"M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z\"\n    );\n    resetPanZoomControlShape2.setAttribute(\n      \"class\",\n      \"svg-pan-zoom-control-element\"\n    );\n    resetPanZoomControl.appendChild(resetPanZoomControlShape2);\n\n    return resetPanZoomControl;\n  },\n\n  _createZoomOut: function(instance) {\n    // zoom out\n    var zoomOut = document.createElementNS(SvgUtils.svgNS, \"g\");\n    zoomOut.setAttribute(\"id\", \"svg-pan-zoom-zoom-out\");\n    zoomOut.setAttribute(\"transform\", \"translate(30.5 70) scale(0.015)\");\n    zoomOut.setAttribute(\"class\", \"svg-pan-zoom-control\");\n    zoomOut.addEventListener(\n      \"click\",\n      function() {\n        instance.getPublicInstance().zoomOut();\n      },\n      false\n    );\n    zoomOut.addEventListener(\n      \"touchstart\",\n      function() {\n        instance.getPublicInstance().zoomOut();\n      },\n      false\n    );\n\n    var zoomOutBackground = document.createElementNS(SvgUtils.svgNS, \"rect\"); // TODO change these background space fillers to rounded rectangles so they look prettier\n    zoomOutBackground.setAttribute(\"x\", \"0\");\n    zoomOutBackground.setAttribute(\"y\", \"0\");\n    zoomOutBackground.setAttribute(\"width\", \"1500\"); // larger than expected because the whole group is transformed to scale down\n    zoomOutBackground.setAttribute(\"height\", \"1400\");\n    zoomOutBackground.setAttribute(\"class\", \"svg-pan-zoom-control-background\");\n    zoomOut.appendChild(zoomOutBackground);\n\n    var zoomOutShape = document.createElementNS(SvgUtils.svgNS, \"path\");\n    zoomOutShape.setAttribute(\n      \"d\",\n      \"M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z\"\n    );\n    zoomOutShape.setAttribute(\"class\", \"svg-pan-zoom-control-element\");\n    zoomOut.appendChild(zoomOutShape);\n\n    return zoomOut;\n  },\n\n  disable: function(instance) {\n    if (instance.controlIcons) {\n      instance.controlIcons.parentNode.removeChild(instance.controlIcons);\n      instance.controlIcons = null;\n    }\n  }\n};\n\n\n//# sourceURL=webpack://playground/./node_modules/svg-pan-zoom/src/control-icons.js?");

/***/ }),

/***/ "./node_modules/svg-pan-zoom/src/shadow-viewport.js":
/*!**********************************************************!*\
  !*** ./node_modules/svg-pan-zoom/src/shadow-viewport.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var SvgUtils = __webpack_require__(/*! ./svg-utilities */ \"./node_modules/svg-pan-zoom/src/svg-utilities.js\"),\n  Utils = __webpack_require__(/*! ./utilities */ \"./node_modules/svg-pan-zoom/src/utilities.js\");\n\nvar ShadowViewport = function(viewport, options) {\n  this.init(viewport, options);\n};\n\n/**\n * Initialization\n *\n * @param  {SVGElement} viewport\n * @param  {Object} options\n */\nShadowViewport.prototype.init = function(viewport, options) {\n  // DOM Elements\n  this.viewport = viewport;\n  this.options = options;\n\n  // State cache\n  this.originalState = { zoom: 1, x: 0, y: 0 };\n  this.activeState = { zoom: 1, x: 0, y: 0 };\n\n  this.updateCTMCached = Utils.proxy(this.updateCTM, this);\n\n  // Create a custom requestAnimationFrame taking in account refreshRate\n  this.requestAnimationFrame = Utils.createRequestAnimationFrame(\n    this.options.refreshRate\n  );\n\n  // ViewBox\n  this.viewBox = { x: 0, y: 0, width: 0, height: 0 };\n  this.cacheViewBox();\n\n  // Process CTM\n  var newCTM = this.processCTM();\n\n  // Update viewport CTM and cache zoom and pan\n  this.setCTM(newCTM);\n\n  // Update CTM in this frame\n  this.updateCTM();\n};\n\n/**\n * Cache initial viewBox value\n * If no viewBox is defined, then use viewport size/position instead for viewBox values\n */\nShadowViewport.prototype.cacheViewBox = function() {\n  var svgViewBox = this.options.svg.getAttribute(\"viewBox\");\n\n  if (svgViewBox) {\n    var viewBoxValues = svgViewBox\n      .split(/[\\s\\,]/)\n      .filter(function(v) {\n        return v;\n      })\n      .map(parseFloat);\n\n    // Cache viewbox x and y offset\n    this.viewBox.x = viewBoxValues[0];\n    this.viewBox.y = viewBoxValues[1];\n    this.viewBox.width = viewBoxValues[2];\n    this.viewBox.height = viewBoxValues[3];\n\n    var zoom = Math.min(\n      this.options.width / this.viewBox.width,\n      this.options.height / this.viewBox.height\n    );\n\n    // Update active state\n    this.activeState.zoom = zoom;\n    this.activeState.x = (this.options.width - this.viewBox.width * zoom) / 2;\n    this.activeState.y = (this.options.height - this.viewBox.height * zoom) / 2;\n\n    // Force updating CTM\n    this.updateCTMOnNextFrame();\n\n    this.options.svg.removeAttribute(\"viewBox\");\n  } else {\n    this.simpleViewBoxCache();\n  }\n};\n\n/**\n * Recalculate viewport sizes and update viewBox cache\n */\nShadowViewport.prototype.simpleViewBoxCache = function() {\n  var bBox = this.viewport.getBBox();\n\n  this.viewBox.x = bBox.x;\n  this.viewBox.y = bBox.y;\n  this.viewBox.width = bBox.width;\n  this.viewBox.height = bBox.height;\n};\n\n/**\n * Returns a viewbox object. Safe to alter\n *\n * @return {Object} viewbox object\n */\nShadowViewport.prototype.getViewBox = function() {\n  return Utils.extend({}, this.viewBox);\n};\n\n/**\n * Get initial zoom and pan values. Save them into originalState\n * Parses viewBox attribute to alter initial sizes\n *\n * @return {CTM} CTM object based on options\n */\nShadowViewport.prototype.processCTM = function() {\n  var newCTM = this.getCTM();\n\n  if (this.options.fit || this.options.contain) {\n    var newScale;\n    if (this.options.fit) {\n      newScale = Math.min(\n        this.options.width / this.viewBox.width,\n        this.options.height / this.viewBox.height\n      );\n    } else {\n      newScale = Math.max(\n        this.options.width / this.viewBox.width,\n        this.options.height / this.viewBox.height\n      );\n    }\n\n    newCTM.a = newScale; //x-scale\n    newCTM.d = newScale; //y-scale\n    newCTM.e = -this.viewBox.x * newScale; //x-transform\n    newCTM.f = -this.viewBox.y * newScale; //y-transform\n  }\n\n  if (this.options.center) {\n    var offsetX =\n        (this.options.width -\n          (this.viewBox.width + this.viewBox.x * 2) * newCTM.a) *\n        0.5,\n      offsetY =\n        (this.options.height -\n          (this.viewBox.height + this.viewBox.y * 2) * newCTM.a) *\n        0.5;\n\n    newCTM.e = offsetX;\n    newCTM.f = offsetY;\n  }\n\n  // Cache initial values. Based on activeState and fix+center opitons\n  this.originalState.zoom = newCTM.a;\n  this.originalState.x = newCTM.e;\n  this.originalState.y = newCTM.f;\n\n  return newCTM;\n};\n\n/**\n * Return originalState object. Safe to alter\n *\n * @return {Object}\n */\nShadowViewport.prototype.getOriginalState = function() {\n  return Utils.extend({}, this.originalState);\n};\n\n/**\n * Return actualState object. Safe to alter\n *\n * @return {Object}\n */\nShadowViewport.prototype.getState = function() {\n  return Utils.extend({}, this.activeState);\n};\n\n/**\n * Get zoom scale\n *\n * @return {Float} zoom scale\n */\nShadowViewport.prototype.getZoom = function() {\n  return this.activeState.zoom;\n};\n\n/**\n * Get zoom scale for pubilc usage\n *\n * @return {Float} zoom scale\n */\nShadowViewport.prototype.getRelativeZoom = function() {\n  return this.activeState.zoom / this.originalState.zoom;\n};\n\n/**\n * Compute zoom scale for pubilc usage\n *\n * @return {Float} zoom scale\n */\nShadowViewport.prototype.computeRelativeZoom = function(scale) {\n  return scale / this.originalState.zoom;\n};\n\n/**\n * Get pan\n *\n * @return {Object}\n */\nShadowViewport.prototype.getPan = function() {\n  return { x: this.activeState.x, y: this.activeState.y };\n};\n\n/**\n * Return cached viewport CTM value that can be safely modified\n *\n * @return {SVGMatrix}\n */\nShadowViewport.prototype.getCTM = function() {\n  var safeCTM = this.options.svg.createSVGMatrix();\n\n  // Copy values manually as in FF they are not itterable\n  safeCTM.a = this.activeState.zoom;\n  safeCTM.b = 0;\n  safeCTM.c = 0;\n  safeCTM.d = this.activeState.zoom;\n  safeCTM.e = this.activeState.x;\n  safeCTM.f = this.activeState.y;\n\n  return safeCTM;\n};\n\n/**\n * Set a new CTM\n *\n * @param {SVGMatrix} newCTM\n */\nShadowViewport.prototype.setCTM = function(newCTM) {\n  var willZoom = this.isZoomDifferent(newCTM),\n    willPan = this.isPanDifferent(newCTM);\n\n  if (willZoom || willPan) {\n    // Before zoom\n    if (willZoom) {\n      // If returns false then cancel zooming\n      if (\n        this.options.beforeZoom(\n          this.getRelativeZoom(),\n          this.computeRelativeZoom(newCTM.a)\n        ) === false\n      ) {\n        newCTM.a = newCTM.d = this.activeState.zoom;\n        willZoom = false;\n      } else {\n        this.updateCache(newCTM);\n        this.options.onZoom(this.getRelativeZoom());\n      }\n    }\n\n    // Before pan\n    if (willPan) {\n      var preventPan = this.options.beforePan(this.getPan(), {\n          x: newCTM.e,\n          y: newCTM.f\n        }),\n        // If prevent pan is an object\n        preventPanX = false,\n        preventPanY = false;\n\n      // If prevent pan is Boolean false\n      if (preventPan === false) {\n        // Set x and y same as before\n        newCTM.e = this.getPan().x;\n        newCTM.f = this.getPan().y;\n\n        preventPanX = preventPanY = true;\n      } else if (Utils.isObject(preventPan)) {\n        // Check for X axes attribute\n        if (preventPan.x === false) {\n          // Prevent panning on x axes\n          newCTM.e = this.getPan().x;\n          preventPanX = true;\n        } else if (Utils.isNumber(preventPan.x)) {\n          // Set a custom pan value\n          newCTM.e = preventPan.x;\n        }\n\n        // Check for Y axes attribute\n        if (preventPan.y === false) {\n          // Prevent panning on x axes\n          newCTM.f = this.getPan().y;\n          preventPanY = true;\n        } else if (Utils.isNumber(preventPan.y)) {\n          // Set a custom pan value\n          newCTM.f = preventPan.y;\n        }\n      }\n\n      // Update willPan flag\n      // Check if newCTM is still different\n      if ((preventPanX && preventPanY) || !this.isPanDifferent(newCTM)) {\n        willPan = false;\n      } else {\n        this.updateCache(newCTM);\n        this.options.onPan(this.getPan());\n      }\n    }\n\n    // Check again if should zoom or pan\n    if (willZoom || willPan) {\n      this.updateCTMOnNextFrame();\n    }\n  }\n};\n\nShadowViewport.prototype.isZoomDifferent = function(newCTM) {\n  return this.activeState.zoom !== newCTM.a;\n};\n\nShadowViewport.prototype.isPanDifferent = function(newCTM) {\n  return this.activeState.x !== newCTM.e || this.activeState.y !== newCTM.f;\n};\n\n/**\n * Update cached CTM and active state\n *\n * @param {SVGMatrix} newCTM\n */\nShadowViewport.prototype.updateCache = function(newCTM) {\n  this.activeState.zoom = newCTM.a;\n  this.activeState.x = newCTM.e;\n  this.activeState.y = newCTM.f;\n};\n\nShadowViewport.prototype.pendingUpdate = false;\n\n/**\n * Place a request to update CTM on next Frame\n */\nShadowViewport.prototype.updateCTMOnNextFrame = function() {\n  if (!this.pendingUpdate) {\n    // Lock\n    this.pendingUpdate = true;\n\n    // Throttle next update\n    this.requestAnimationFrame.call(window, this.updateCTMCached);\n  }\n};\n\n/**\n * Update viewport CTM with cached CTM\n */\nShadowViewport.prototype.updateCTM = function() {\n  var ctm = this.getCTM();\n\n  // Updates SVG element\n  SvgUtils.setCTM(this.viewport, ctm, this.defs);\n\n  // Free the lock\n  this.pendingUpdate = false;\n\n  // Notify about the update\n  if (this.options.onUpdatedCTM) {\n    this.options.onUpdatedCTM(ctm);\n  }\n};\n\nmodule.exports = function(viewport, options) {\n  return new ShadowViewport(viewport, options);\n};\n\n\n//# sourceURL=webpack://playground/./node_modules/svg-pan-zoom/src/shadow-viewport.js?");

/***/ }),

/***/ "./node_modules/svg-pan-zoom/src/svg-pan-zoom.js":
/*!*******************************************************!*\
  !*** ./node_modules/svg-pan-zoom/src/svg-pan-zoom.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var Wheel = __webpack_require__(/*! ./uniwheel */ \"./node_modules/svg-pan-zoom/src/uniwheel.js\"),\n  ControlIcons = __webpack_require__(/*! ./control-icons */ \"./node_modules/svg-pan-zoom/src/control-icons.js\"),\n  Utils = __webpack_require__(/*! ./utilities */ \"./node_modules/svg-pan-zoom/src/utilities.js\"),\n  SvgUtils = __webpack_require__(/*! ./svg-utilities */ \"./node_modules/svg-pan-zoom/src/svg-utilities.js\"),\n  ShadowViewport = __webpack_require__(/*! ./shadow-viewport */ \"./node_modules/svg-pan-zoom/src/shadow-viewport.js\");\n\nvar SvgPanZoom = function(svg, options) {\n  this.init(svg, options);\n};\n\nvar optionsDefaults = {\n  viewportSelector: \".svg-pan-zoom_viewport\", // Viewport selector. Can be querySelector string or SVGElement\n  panEnabled: true, // enable or disable panning (default enabled)\n  controlIconsEnabled: false, // insert icons to give user an option in addition to mouse events to control pan/zoom (default disabled)\n  zoomEnabled: true, // enable or disable zooming (default enabled)\n  dblClickZoomEnabled: true, // enable or disable zooming by double clicking (default enabled)\n  mouseWheelZoomEnabled: true, // enable or disable zooming by mouse wheel (default enabled)\n  preventMouseEventsDefault: true, // enable or disable preventDefault for mouse events\n  zoomScaleSensitivity: 0.1, // Zoom sensitivity\n  minZoom: 0.5, // Minimum Zoom level\n  maxZoom: 10, // Maximum Zoom level\n  fit: true, // enable or disable viewport fit in SVG (default true)\n  contain: false, // enable or disable viewport contain the svg (default false)\n  center: true, // enable or disable viewport centering in SVG (default true)\n  refreshRate: \"auto\", // Maximum number of frames per second (altering SVG's viewport)\n  beforeZoom: null,\n  onZoom: null,\n  beforePan: null,\n  onPan: null,\n  customEventsHandler: null,\n  eventsListenerElement: null,\n  onUpdatedCTM: null\n};\n\nvar passiveListenerOption = { passive: true };\n\nSvgPanZoom.prototype.init = function(svg, options) {\n  var that = this;\n\n  this.svg = svg;\n  this.defs = svg.querySelector(\"defs\");\n\n  // Add default attributes to SVG\n  SvgUtils.setupSvgAttributes(this.svg);\n\n  // Set options\n  this.options = Utils.extend(Utils.extend({}, optionsDefaults), options);\n\n  // Set default state\n  this.state = \"none\";\n\n  // Get dimensions\n  var boundingClientRectNormalized = SvgUtils.getBoundingClientRectNormalized(\n    svg\n  );\n  this.width = boundingClientRectNormalized.width;\n  this.height = boundingClientRectNormalized.height;\n\n  // Init shadow viewport\n  this.viewport = ShadowViewport(\n    SvgUtils.getOrCreateViewport(this.svg, this.options.viewportSelector),\n    {\n      svg: this.svg,\n      width: this.width,\n      height: this.height,\n      fit: this.options.fit,\n      contain: this.options.contain,\n      center: this.options.center,\n      refreshRate: this.options.refreshRate,\n      // Put callbacks into functions as they can change through time\n      beforeZoom: function(oldScale, newScale) {\n        if (that.viewport && that.options.beforeZoom) {\n          return that.options.beforeZoom(oldScale, newScale);\n        }\n      },\n      onZoom: function(scale) {\n        if (that.viewport && that.options.onZoom) {\n          return that.options.onZoom(scale);\n        }\n      },\n      beforePan: function(oldPoint, newPoint) {\n        if (that.viewport && that.options.beforePan) {\n          return that.options.beforePan(oldPoint, newPoint);\n        }\n      },\n      onPan: function(point) {\n        if (that.viewport && that.options.onPan) {\n          return that.options.onPan(point);\n        }\n      },\n      onUpdatedCTM: function(ctm) {\n        if (that.viewport && that.options.onUpdatedCTM) {\n          return that.options.onUpdatedCTM(ctm);\n        }\n      }\n    }\n  );\n\n  // Wrap callbacks into public API context\n  var publicInstance = this.getPublicInstance();\n  publicInstance.setBeforeZoom(this.options.beforeZoom);\n  publicInstance.setOnZoom(this.options.onZoom);\n  publicInstance.setBeforePan(this.options.beforePan);\n  publicInstance.setOnPan(this.options.onPan);\n  publicInstance.setOnUpdatedCTM(this.options.onUpdatedCTM);\n\n  if (this.options.controlIconsEnabled) {\n    ControlIcons.enable(this);\n  }\n\n  // Init events handlers\n  this.lastMouseWheelEventTime = Date.now();\n  this.setupHandlers();\n};\n\n/**\n * Register event handlers\n */\nSvgPanZoom.prototype.setupHandlers = function() {\n  var that = this,\n    prevEvt = null; // use for touchstart event to detect double tap\n\n  this.eventListeners = {\n    // Mouse down group\n    mousedown: function(evt) {\n      var result = that.handleMouseDown(evt, prevEvt);\n      prevEvt = evt;\n      return result;\n    },\n    touchstart: function(evt) {\n      var result = that.handleMouseDown(evt, prevEvt);\n      prevEvt = evt;\n      return result;\n    },\n\n    // Mouse up group\n    mouseup: function(evt) {\n      return that.handleMouseUp(evt);\n    },\n    touchend: function(evt) {\n      return that.handleMouseUp(evt);\n    },\n\n    // Mouse move group\n    mousemove: function(evt) {\n      return that.handleMouseMove(evt);\n    },\n    touchmove: function(evt) {\n      return that.handleMouseMove(evt);\n    },\n\n    // Mouse leave group\n    mouseleave: function(evt) {\n      return that.handleMouseUp(evt);\n    },\n    touchleave: function(evt) {\n      return that.handleMouseUp(evt);\n    },\n    touchcancel: function(evt) {\n      return that.handleMouseUp(evt);\n    }\n  };\n\n  // Init custom events handler if available\n  // eslint-disable-next-line eqeqeq\n  if (this.options.customEventsHandler != null) {\n    this.options.customEventsHandler.init({\n      svgElement: this.svg,\n      eventsListenerElement: this.options.eventsListenerElement,\n      instance: this.getPublicInstance()\n    });\n\n    // Custom event handler may halt builtin listeners\n    var haltEventListeners = this.options.customEventsHandler\n      .haltEventListeners;\n    if (haltEventListeners && haltEventListeners.length) {\n      for (var i = haltEventListeners.length - 1; i >= 0; i--) {\n        if (this.eventListeners.hasOwnProperty(haltEventListeners[i])) {\n          delete this.eventListeners[haltEventListeners[i]];\n        }\n      }\n    }\n  }\n\n  // Bind eventListeners\n  for (var event in this.eventListeners) {\n    // Attach event to eventsListenerElement or SVG if not available\n    (this.options.eventsListenerElement || this.svg).addEventListener(\n      event,\n      this.eventListeners[event],\n      !this.options.preventMouseEventsDefault ? passiveListenerOption : false\n    );\n  }\n\n  // Zoom using mouse wheel\n  if (this.options.mouseWheelZoomEnabled) {\n    this.options.mouseWheelZoomEnabled = false; // set to false as enable will set it back to true\n    this.enableMouseWheelZoom();\n  }\n};\n\n/**\n * Enable ability to zoom using mouse wheel\n */\nSvgPanZoom.prototype.enableMouseWheelZoom = function() {\n  if (!this.options.mouseWheelZoomEnabled) {\n    var that = this;\n\n    // Mouse wheel listener\n    this.wheelListener = function(evt) {\n      return that.handleMouseWheel(evt);\n    };\n\n    // Bind wheelListener\n    var isPassiveListener = !this.options.preventMouseEventsDefault;\n    Wheel.on(\n      this.options.eventsListenerElement || this.svg,\n      this.wheelListener,\n      isPassiveListener\n    );\n\n    this.options.mouseWheelZoomEnabled = true;\n  }\n};\n\n/**\n * Disable ability to zoom using mouse wheel\n */\nSvgPanZoom.prototype.disableMouseWheelZoom = function() {\n  if (this.options.mouseWheelZoomEnabled) {\n    var isPassiveListener = !this.options.preventMouseEventsDefault;\n    Wheel.off(\n      this.options.eventsListenerElement || this.svg,\n      this.wheelListener,\n      isPassiveListener\n    );\n    this.options.mouseWheelZoomEnabled = false;\n  }\n};\n\n/**\n * Handle mouse wheel event\n *\n * @param  {Event} evt\n */\nSvgPanZoom.prototype.handleMouseWheel = function(evt) {\n  if (!this.options.zoomEnabled || this.state !== \"none\") {\n    return;\n  }\n\n  if (this.options.preventMouseEventsDefault) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    } else {\n      evt.returnValue = false;\n    }\n  }\n\n  // Default delta in case that deltaY is not available\n  var delta = evt.deltaY || 1,\n    timeDelta = Date.now() - this.lastMouseWheelEventTime,\n    divider = 3 + Math.max(0, 30 - timeDelta);\n\n  // Update cache\n  this.lastMouseWheelEventTime = Date.now();\n\n  // Make empirical adjustments for browsers that give deltaY in pixels (deltaMode=0)\n  if (\"deltaMode\" in evt && evt.deltaMode === 0 && evt.wheelDelta) {\n    delta = evt.deltaY === 0 ? 0 : Math.abs(evt.wheelDelta) / evt.deltaY;\n  }\n\n  delta =\n    -0.3 < delta && delta < 0.3\n      ? delta\n      : ((delta > 0 ? 1 : -1) * Math.log(Math.abs(delta) + 10)) / divider;\n\n  var inversedScreenCTM = this.svg.getScreenCTM().inverse(),\n    relativeMousePoint = SvgUtils.getEventPoint(evt, this.svg).matrixTransform(\n      inversedScreenCTM\n    ),\n    zoom = Math.pow(1 + this.options.zoomScaleSensitivity, -1 * delta); // multiplying by neg. 1 so as to make zoom in/out behavior match Google maps behavior\n\n  this.zoomAtPoint(zoom, relativeMousePoint);\n};\n\n/**\n * Zoom in at a SVG point\n *\n * @param  {SVGPoint} point\n * @param  {Float} zoomScale    Number representing how much to zoom\n * @param  {Boolean} zoomAbsolute Default false. If true, zoomScale is treated as an absolute value.\n *                                Otherwise, zoomScale is treated as a multiplied (e.g. 1.10 would zoom in 10%)\n */\nSvgPanZoom.prototype.zoomAtPoint = function(zoomScale, point, zoomAbsolute) {\n  var originalState = this.viewport.getOriginalState();\n\n  if (!zoomAbsolute) {\n    // Fit zoomScale in set bounds\n    if (\n      this.getZoom() * zoomScale <\n      this.options.minZoom * originalState.zoom\n    ) {\n      zoomScale = (this.options.minZoom * originalState.zoom) / this.getZoom();\n    } else if (\n      this.getZoom() * zoomScale >\n      this.options.maxZoom * originalState.zoom\n    ) {\n      zoomScale = (this.options.maxZoom * originalState.zoom) / this.getZoom();\n    }\n  } else {\n    // Fit zoomScale in set bounds\n    zoomScale = Math.max(\n      this.options.minZoom * originalState.zoom,\n      Math.min(this.options.maxZoom * originalState.zoom, zoomScale)\n    );\n    // Find relative scale to achieve desired scale\n    zoomScale = zoomScale / this.getZoom();\n  }\n\n  var oldCTM = this.viewport.getCTM(),\n    relativePoint = point.matrixTransform(oldCTM.inverse()),\n    modifier = this.svg\n      .createSVGMatrix()\n      .translate(relativePoint.x, relativePoint.y)\n      .scale(zoomScale)\n      .translate(-relativePoint.x, -relativePoint.y),\n    newCTM = oldCTM.multiply(modifier);\n\n  if (newCTM.a !== oldCTM.a) {\n    this.viewport.setCTM(newCTM);\n  }\n};\n\n/**\n * Zoom at center point\n *\n * @param  {Float} scale\n * @param  {Boolean} absolute Marks zoom scale as relative or absolute\n */\nSvgPanZoom.prototype.zoom = function(scale, absolute) {\n  this.zoomAtPoint(\n    scale,\n    SvgUtils.getSvgCenterPoint(this.svg, this.width, this.height),\n    absolute\n  );\n};\n\n/**\n * Zoom used by public instance\n *\n * @param  {Float} scale\n * @param  {Boolean} absolute Marks zoom scale as relative or absolute\n */\nSvgPanZoom.prototype.publicZoom = function(scale, absolute) {\n  if (absolute) {\n    scale = this.computeFromRelativeZoom(scale);\n  }\n\n  this.zoom(scale, absolute);\n};\n\n/**\n * Zoom at point used by public instance\n *\n * @param  {Float} scale\n * @param  {SVGPoint|Object} point    An object that has x and y attributes\n * @param  {Boolean} absolute Marks zoom scale as relative or absolute\n */\nSvgPanZoom.prototype.publicZoomAtPoint = function(scale, point, absolute) {\n  if (absolute) {\n    // Transform zoom into a relative value\n    scale = this.computeFromRelativeZoom(scale);\n  }\n\n  // If not a SVGPoint but has x and y then create a SVGPoint\n  if (Utils.getType(point) !== \"SVGPoint\") {\n    if (\"x\" in point && \"y\" in point) {\n      point = SvgUtils.createSVGPoint(this.svg, point.x, point.y);\n    } else {\n      throw new Error(\"Given point is invalid\");\n    }\n  }\n\n  this.zoomAtPoint(scale, point, absolute);\n};\n\n/**\n * Get zoom scale\n *\n * @return {Float} zoom scale\n */\nSvgPanZoom.prototype.getZoom = function() {\n  return this.viewport.getZoom();\n};\n\n/**\n * Get zoom scale for public usage\n *\n * @return {Float} zoom scale\n */\nSvgPanZoom.prototype.getRelativeZoom = function() {\n  return this.viewport.getRelativeZoom();\n};\n\n/**\n * Compute actual zoom from public zoom\n *\n * @param  {Float} zoom\n * @return {Float} zoom scale\n */\nSvgPanZoom.prototype.computeFromRelativeZoom = function(zoom) {\n  return zoom * this.viewport.getOriginalState().zoom;\n};\n\n/**\n * Set zoom to initial state\n */\nSvgPanZoom.prototype.resetZoom = function() {\n  var originalState = this.viewport.getOriginalState();\n\n  this.zoom(originalState.zoom, true);\n};\n\n/**\n * Set pan to initial state\n */\nSvgPanZoom.prototype.resetPan = function() {\n  this.pan(this.viewport.getOriginalState());\n};\n\n/**\n * Set pan and zoom to initial state\n */\nSvgPanZoom.prototype.reset = function() {\n  this.resetZoom();\n  this.resetPan();\n};\n\n/**\n * Handle double click event\n * See handleMouseDown() for alternate detection method\n *\n * @param {Event} evt\n */\nSvgPanZoom.prototype.handleDblClick = function(evt) {\n  if (this.options.preventMouseEventsDefault) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    } else {\n      evt.returnValue = false;\n    }\n  }\n\n  // Check if target was a control button\n  if (this.options.controlIconsEnabled) {\n    var targetClass = evt.target.getAttribute(\"class\") || \"\";\n    if (targetClass.indexOf(\"svg-pan-zoom-control\") > -1) {\n      return false;\n    }\n  }\n\n  var zoomFactor;\n\n  if (evt.shiftKey) {\n    zoomFactor = 1 / ((1 + this.options.zoomScaleSensitivity) * 2); // zoom out when shift key pressed\n  } else {\n    zoomFactor = (1 + this.options.zoomScaleSensitivity) * 2;\n  }\n\n  var point = SvgUtils.getEventPoint(evt, this.svg).matrixTransform(\n    this.svg.getScreenCTM().inverse()\n  );\n  this.zoomAtPoint(zoomFactor, point);\n};\n\n/**\n * Handle click event\n *\n * @param {Event} evt\n */\nSvgPanZoom.prototype.handleMouseDown = function(evt, prevEvt) {\n  if (this.options.preventMouseEventsDefault) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    } else {\n      evt.returnValue = false;\n    }\n  }\n\n  Utils.mouseAndTouchNormalize(evt, this.svg);\n\n  // Double click detection; more consistent than ondblclick\n  if (this.options.dblClickZoomEnabled && Utils.isDblClick(evt, prevEvt)) {\n    this.handleDblClick(evt);\n  } else {\n    // Pan mode\n    this.state = \"pan\";\n    this.firstEventCTM = this.viewport.getCTM();\n    this.stateOrigin = SvgUtils.getEventPoint(evt, this.svg).matrixTransform(\n      this.firstEventCTM.inverse()\n    );\n  }\n};\n\n/**\n * Handle mouse move event\n *\n * @param  {Event} evt\n */\nSvgPanZoom.prototype.handleMouseMove = function(evt) {\n  if (this.options.preventMouseEventsDefault) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    } else {\n      evt.returnValue = false;\n    }\n  }\n\n  if (this.state === \"pan\" && this.options.panEnabled) {\n    // Pan mode\n    var point = SvgUtils.getEventPoint(evt, this.svg).matrixTransform(\n        this.firstEventCTM.inverse()\n      ),\n      viewportCTM = this.firstEventCTM.translate(\n        point.x - this.stateOrigin.x,\n        point.y - this.stateOrigin.y\n      );\n\n    this.viewport.setCTM(viewportCTM);\n  }\n};\n\n/**\n * Handle mouse button release event\n *\n * @param {Event} evt\n */\nSvgPanZoom.prototype.handleMouseUp = function(evt) {\n  if (this.options.preventMouseEventsDefault) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    } else {\n      evt.returnValue = false;\n    }\n  }\n\n  if (this.state === \"pan\") {\n    // Quit pan mode\n    this.state = \"none\";\n  }\n};\n\n/**\n * Adjust viewport size (only) so it will fit in SVG\n * Does not center image\n */\nSvgPanZoom.prototype.fit = function() {\n  var viewBox = this.viewport.getViewBox(),\n    newScale = Math.min(\n      this.width / viewBox.width,\n      this.height / viewBox.height\n    );\n\n  this.zoom(newScale, true);\n};\n\n/**\n * Adjust viewport size (only) so it will contain the SVG\n * Does not center image\n */\nSvgPanZoom.prototype.contain = function() {\n  var viewBox = this.viewport.getViewBox(),\n    newScale = Math.max(\n      this.width / viewBox.width,\n      this.height / viewBox.height\n    );\n\n  this.zoom(newScale, true);\n};\n\n/**\n * Adjust viewport pan (only) so it will be centered in SVG\n * Does not zoom/fit/contain image\n */\nSvgPanZoom.prototype.center = function() {\n  var viewBox = this.viewport.getViewBox(),\n    offsetX =\n      (this.width - (viewBox.width + viewBox.x * 2) * this.getZoom()) * 0.5,\n    offsetY =\n      (this.height - (viewBox.height + viewBox.y * 2) * this.getZoom()) * 0.5;\n\n  this.getPublicInstance().pan({ x: offsetX, y: offsetY });\n};\n\n/**\n * Update content cached BorderBox\n * Use when viewport contents change\n */\nSvgPanZoom.prototype.updateBBox = function() {\n  this.viewport.simpleViewBoxCache();\n};\n\n/**\n * Pan to a rendered position\n *\n * @param  {Object} point {x: 0, y: 0}\n */\nSvgPanZoom.prototype.pan = function(point) {\n  var viewportCTM = this.viewport.getCTM();\n  viewportCTM.e = point.x;\n  viewportCTM.f = point.y;\n  this.viewport.setCTM(viewportCTM);\n};\n\n/**\n * Relatively pan the graph by a specified rendered position vector\n *\n * @param  {Object} point {x: 0, y: 0}\n */\nSvgPanZoom.prototype.panBy = function(point) {\n  var viewportCTM = this.viewport.getCTM();\n  viewportCTM.e += point.x;\n  viewportCTM.f += point.y;\n  this.viewport.setCTM(viewportCTM);\n};\n\n/**\n * Get pan vector\n *\n * @return {Object} {x: 0, y: 0}\n */\nSvgPanZoom.prototype.getPan = function() {\n  var state = this.viewport.getState();\n\n  return { x: state.x, y: state.y };\n};\n\n/**\n * Recalculates cached svg dimensions and controls position\n */\nSvgPanZoom.prototype.resize = function() {\n  // Get dimensions\n  var boundingClientRectNormalized = SvgUtils.getBoundingClientRectNormalized(\n    this.svg\n  );\n  this.width = boundingClientRectNormalized.width;\n  this.height = boundingClientRectNormalized.height;\n\n  // Recalculate original state\n  var viewport = this.viewport;\n  viewport.options.width = this.width;\n  viewport.options.height = this.height;\n  viewport.processCTM();\n\n  // Reposition control icons by re-enabling them\n  if (this.options.controlIconsEnabled) {\n    this.getPublicInstance().disableControlIcons();\n    this.getPublicInstance().enableControlIcons();\n  }\n};\n\n/**\n * Unbind mouse events, free callbacks and destroy public instance\n */\nSvgPanZoom.prototype.destroy = function() {\n  var that = this;\n\n  // Free callbacks\n  this.beforeZoom = null;\n  this.onZoom = null;\n  this.beforePan = null;\n  this.onPan = null;\n  this.onUpdatedCTM = null;\n\n  // Destroy custom event handlers\n  // eslint-disable-next-line eqeqeq\n  if (this.options.customEventsHandler != null) {\n    this.options.customEventsHandler.destroy({\n      svgElement: this.svg,\n      eventsListenerElement: this.options.eventsListenerElement,\n      instance: this.getPublicInstance()\n    });\n  }\n\n  // Unbind eventListeners\n  for (var event in this.eventListeners) {\n    (this.options.eventsListenerElement || this.svg).removeEventListener(\n      event,\n      this.eventListeners[event],\n      !this.options.preventMouseEventsDefault ? passiveListenerOption : false\n    );\n  }\n\n  // Unbind wheelListener\n  this.disableMouseWheelZoom();\n\n  // Remove control icons\n  this.getPublicInstance().disableControlIcons();\n\n  // Reset zoom and pan\n  this.reset();\n\n  // Remove instance from instancesStore\n  instancesStore = instancesStore.filter(function(instance) {\n    return instance.svg !== that.svg;\n  });\n\n  // Delete options and its contents\n  delete this.options;\n\n  // Delete viewport to make public shadow viewport functions uncallable\n  delete this.viewport;\n\n  // Destroy public instance and rewrite getPublicInstance\n  delete this.publicInstance;\n  delete this.pi;\n  this.getPublicInstance = function() {\n    return null;\n  };\n};\n\n/**\n * Returns a public instance object\n *\n * @return {Object} Public instance object\n */\nSvgPanZoom.prototype.getPublicInstance = function() {\n  var that = this;\n\n  // Create cache\n  if (!this.publicInstance) {\n    this.publicInstance = this.pi = {\n      // Pan\n      enablePan: function() {\n        that.options.panEnabled = true;\n        return that.pi;\n      },\n      disablePan: function() {\n        that.options.panEnabled = false;\n        return that.pi;\n      },\n      isPanEnabled: function() {\n        return !!that.options.panEnabled;\n      },\n      pan: function(point) {\n        that.pan(point);\n        return that.pi;\n      },\n      panBy: function(point) {\n        that.panBy(point);\n        return that.pi;\n      },\n      getPan: function() {\n        return that.getPan();\n      },\n      // Pan event\n      setBeforePan: function(fn) {\n        that.options.beforePan =\n          fn === null ? null : Utils.proxy(fn, that.publicInstance);\n        return that.pi;\n      },\n      setOnPan: function(fn) {\n        that.options.onPan =\n          fn === null ? null : Utils.proxy(fn, that.publicInstance);\n        return that.pi;\n      },\n      // Zoom and Control Icons\n      enableZoom: function() {\n        that.options.zoomEnabled = true;\n        return that.pi;\n      },\n      disableZoom: function() {\n        that.options.zoomEnabled = false;\n        return that.pi;\n      },\n      isZoomEnabled: function() {\n        return !!that.options.zoomEnabled;\n      },\n      enableControlIcons: function() {\n        if (!that.options.controlIconsEnabled) {\n          that.options.controlIconsEnabled = true;\n          ControlIcons.enable(that);\n        }\n        return that.pi;\n      },\n      disableControlIcons: function() {\n        if (that.options.controlIconsEnabled) {\n          that.options.controlIconsEnabled = false;\n          ControlIcons.disable(that);\n        }\n        return that.pi;\n      },\n      isControlIconsEnabled: function() {\n        return !!that.options.controlIconsEnabled;\n      },\n      // Double click zoom\n      enableDblClickZoom: function() {\n        that.options.dblClickZoomEnabled = true;\n        return that.pi;\n      },\n      disableDblClickZoom: function() {\n        that.options.dblClickZoomEnabled = false;\n        return that.pi;\n      },\n      isDblClickZoomEnabled: function() {\n        return !!that.options.dblClickZoomEnabled;\n      },\n      // Mouse wheel zoom\n      enableMouseWheelZoom: function() {\n        that.enableMouseWheelZoom();\n        return that.pi;\n      },\n      disableMouseWheelZoom: function() {\n        that.disableMouseWheelZoom();\n        return that.pi;\n      },\n      isMouseWheelZoomEnabled: function() {\n        return !!that.options.mouseWheelZoomEnabled;\n      },\n      // Zoom scale and bounds\n      setZoomScaleSensitivity: function(scale) {\n        that.options.zoomScaleSensitivity = scale;\n        return that.pi;\n      },\n      setMinZoom: function(zoom) {\n        that.options.minZoom = zoom;\n        return that.pi;\n      },\n      setMaxZoom: function(zoom) {\n        that.options.maxZoom = zoom;\n        return that.pi;\n      },\n      // Zoom event\n      setBeforeZoom: function(fn) {\n        that.options.beforeZoom =\n          fn === null ? null : Utils.proxy(fn, that.publicInstance);\n        return that.pi;\n      },\n      setOnZoom: function(fn) {\n        that.options.onZoom =\n          fn === null ? null : Utils.proxy(fn, that.publicInstance);\n        return that.pi;\n      },\n      // Zooming\n      zoom: function(scale) {\n        that.publicZoom(scale, true);\n        return that.pi;\n      },\n      zoomBy: function(scale) {\n        that.publicZoom(scale, false);\n        return that.pi;\n      },\n      zoomAtPoint: function(scale, point) {\n        that.publicZoomAtPoint(scale, point, true);\n        return that.pi;\n      },\n      zoomAtPointBy: function(scale, point) {\n        that.publicZoomAtPoint(scale, point, false);\n        return that.pi;\n      },\n      zoomIn: function() {\n        this.zoomBy(1 + that.options.zoomScaleSensitivity);\n        return that.pi;\n      },\n      zoomOut: function() {\n        this.zoomBy(1 / (1 + that.options.zoomScaleSensitivity));\n        return that.pi;\n      },\n      getZoom: function() {\n        return that.getRelativeZoom();\n      },\n      // CTM update\n      setOnUpdatedCTM: function(fn) {\n        that.options.onUpdatedCTM =\n          fn === null ? null : Utils.proxy(fn, that.publicInstance);\n        return that.pi;\n      },\n      // Reset\n      resetZoom: function() {\n        that.resetZoom();\n        return that.pi;\n      },\n      resetPan: function() {\n        that.resetPan();\n        return that.pi;\n      },\n      reset: function() {\n        that.reset();\n        return that.pi;\n      },\n      // Fit, Contain and Center\n      fit: function() {\n        that.fit();\n        return that.pi;\n      },\n      contain: function() {\n        that.contain();\n        return that.pi;\n      },\n      center: function() {\n        that.center();\n        return that.pi;\n      },\n      // Size and Resize\n      updateBBox: function() {\n        that.updateBBox();\n        return that.pi;\n      },\n      resize: function() {\n        that.resize();\n        return that.pi;\n      },\n      getSizes: function() {\n        return {\n          width: that.width,\n          height: that.height,\n          realZoom: that.getZoom(),\n          viewBox: that.viewport.getViewBox()\n        };\n      },\n      // Destroy\n      destroy: function() {\n        that.destroy();\n        return that.pi;\n      }\n    };\n  }\n\n  return this.publicInstance;\n};\n\n/**\n * Stores pairs of instances of SvgPanZoom and SVG\n * Each pair is represented by an object {svg: SVGSVGElement, instance: SvgPanZoom}\n *\n * @type {Array}\n */\nvar instancesStore = [];\n\nvar svgPanZoom = function(elementOrSelector, options) {\n  var svg = Utils.getSvg(elementOrSelector);\n\n  if (svg === null) {\n    return null;\n  } else {\n    // Look for existent instance\n    for (var i = instancesStore.length - 1; i >= 0; i--) {\n      if (instancesStore[i].svg === svg) {\n        return instancesStore[i].instance.getPublicInstance();\n      }\n    }\n\n    // If instance not found - create one\n    instancesStore.push({\n      svg: svg,\n      instance: new SvgPanZoom(svg, options)\n    });\n\n    // Return just pushed instance\n    return instancesStore[\n      instancesStore.length - 1\n    ].instance.getPublicInstance();\n  }\n};\n\nmodule.exports = svgPanZoom;\n\n\n//# sourceURL=webpack://playground/./node_modules/svg-pan-zoom/src/svg-pan-zoom.js?");

/***/ }),

/***/ "./node_modules/svg-pan-zoom/src/svg-utilities.js":
/*!********************************************************!*\
  !*** ./node_modules/svg-pan-zoom/src/svg-utilities.js ***!
  \********************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Utils = __webpack_require__(/*! ./utilities */ \"./node_modules/svg-pan-zoom/src/utilities.js\"),\n  _browser = \"unknown\";\n\n// http://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser\nif (/*@cc_on!@*/  false || !!document.documentMode) {\n  // internet explorer\n  _browser = \"ie\";\n}\n\nmodule.exports = {\n  svgNS: \"http://www.w3.org/2000/svg\",\n  xmlNS: \"http://www.w3.org/XML/1998/namespace\",\n  xmlnsNS: \"http://www.w3.org/2000/xmlns/\",\n  xlinkNS: \"http://www.w3.org/1999/xlink\",\n  evNS: \"http://www.w3.org/2001/xml-events\",\n\n  /**\n   * Get svg dimensions: width and height\n   *\n   * @param  {SVGSVGElement} svg\n   * @return {Object}     {width: 0, height: 0}\n   */\n  getBoundingClientRectNormalized: function(svg) {\n    if (svg.clientWidth && svg.clientHeight) {\n      return { width: svg.clientWidth, height: svg.clientHeight };\n    } else if (!!svg.getBoundingClientRect()) {\n      return svg.getBoundingClientRect();\n    } else {\n      throw new Error(\"Cannot get BoundingClientRect for SVG.\");\n    }\n  },\n\n  /**\n   * Gets g element with class of \"viewport\" or creates it if it doesn't exist\n   *\n   * @param  {SVGSVGElement} svg\n   * @return {SVGElement}     g (group) element\n   */\n  getOrCreateViewport: function(svg, selector) {\n    var viewport = null;\n\n    if (Utils.isElement(selector)) {\n      viewport = selector;\n    } else {\n      viewport = svg.querySelector(selector);\n    }\n\n    // Check if there is just one main group in SVG\n    if (!viewport) {\n      var childNodes = Array.prototype.slice\n        .call(svg.childNodes || svg.children)\n        .filter(function(el) {\n          return el.nodeName !== \"defs\" && el.nodeName !== \"#text\";\n        });\n\n      // Node name should be SVGGElement and should have no transform attribute\n      // Groups with transform are not used as viewport because it involves parsing of all transform possibilities\n      if (\n        childNodes.length === 1 &&\n        childNodes[0].nodeName === \"g\" &&\n        childNodes[0].getAttribute(\"transform\") === null\n      ) {\n        viewport = childNodes[0];\n      }\n    }\n\n    // If no favorable group element exists then create one\n    if (!viewport) {\n      var viewportId =\n        \"viewport-\" + new Date().toISOString().replace(/\\D/g, \"\");\n      viewport = document.createElementNS(this.svgNS, \"g\");\n      viewport.setAttribute(\"id\", viewportId);\n\n      // Internet Explorer (all versions?) can't use childNodes, but other browsers prefer (require?) using childNodes\n      var svgChildren = svg.childNodes || svg.children;\n      if (!!svgChildren && svgChildren.length > 0) {\n        for (var i = svgChildren.length; i > 0; i--) {\n          // Move everything into viewport except defs\n          if (svgChildren[svgChildren.length - i].nodeName !== \"defs\") {\n            viewport.appendChild(svgChildren[svgChildren.length - i]);\n          }\n        }\n      }\n      svg.appendChild(viewport);\n    }\n\n    // Parse class names\n    var classNames = [];\n    if (viewport.getAttribute(\"class\")) {\n      classNames = viewport.getAttribute(\"class\").split(\" \");\n    }\n\n    // Set class (if not set already)\n    if (!~classNames.indexOf(\"svg-pan-zoom_viewport\")) {\n      classNames.push(\"svg-pan-zoom_viewport\");\n      viewport.setAttribute(\"class\", classNames.join(\" \"));\n    }\n\n    return viewport;\n  },\n\n  /**\n   * Set SVG attributes\n   *\n   * @param  {SVGSVGElement} svg\n   */\n  setupSvgAttributes: function(svg) {\n    // Setting default attributes\n    svg.setAttribute(\"xmlns\", this.svgNS);\n    svg.setAttributeNS(this.xmlnsNS, \"xmlns:xlink\", this.xlinkNS);\n    svg.setAttributeNS(this.xmlnsNS, \"xmlns:ev\", this.evNS);\n\n    // Needed for Internet Explorer, otherwise the viewport overflows\n    if (svg.parentNode !== null) {\n      var style = svg.getAttribute(\"style\") || \"\";\n      if (style.toLowerCase().indexOf(\"overflow\") === -1) {\n        svg.setAttribute(\"style\", \"overflow: hidden; \" + style);\n      }\n    }\n  },\n\n  /**\n   * How long Internet Explorer takes to finish updating its display (ms).\n   */\n  internetExplorerRedisplayInterval: 300,\n\n  /**\n   * Forces the browser to redisplay all SVG elements that rely on an\n   * element defined in a 'defs' section. It works globally, for every\n   * available defs element on the page.\n   * The throttling is intentionally global.\n   *\n   * This is only needed for IE. It is as a hack to make markers (and 'use' elements?)\n   * visible after pan/zoom when there are multiple SVGs on the page.\n   * See bug report: https://connect.microsoft.com/IE/feedback/details/781964/\n   * also see svg-pan-zoom issue: https://github.com/ariutta/svg-pan-zoom/issues/62\n   */\n  refreshDefsGlobal: Utils.throttle(\n    function() {\n      var allDefs = document.querySelectorAll(\"defs\");\n      var allDefsCount = allDefs.length;\n      for (var i = 0; i < allDefsCount; i++) {\n        var thisDefs = allDefs[i];\n        thisDefs.parentNode.insertBefore(thisDefs, thisDefs);\n      }\n    },\n    this ? this.internetExplorerRedisplayInterval : null\n  ),\n\n  /**\n   * Sets the current transform matrix of an element\n   *\n   * @param {SVGElement} element\n   * @param {SVGMatrix} matrix  CTM\n   * @param {SVGElement} defs\n   */\n  setCTM: function(element, matrix, defs) {\n    var that = this,\n      s =\n        \"matrix(\" +\n        matrix.a +\n        \",\" +\n        matrix.b +\n        \",\" +\n        matrix.c +\n        \",\" +\n        matrix.d +\n        \",\" +\n        matrix.e +\n        \",\" +\n        matrix.f +\n        \")\";\n\n    element.setAttributeNS(null, \"transform\", s);\n    if (\"transform\" in element.style) {\n      element.style.transform = s;\n    } else if (\"-ms-transform\" in element.style) {\n      element.style[\"-ms-transform\"] = s;\n    } else if (\"-webkit-transform\" in element.style) {\n      element.style[\"-webkit-transform\"] = s;\n    }\n\n    // IE has a bug that makes markers disappear on zoom (when the matrix \"a\" and/or \"d\" elements change)\n    // see http://stackoverflow.com/questions/17654578/svg-marker-does-not-work-in-ie9-10\n    // and http://srndolha.wordpress.com/2013/11/25/svg-line-markers-may-disappear-in-internet-explorer-11/\n    if (_browser === \"ie\" && !!defs) {\n      // this refresh is intended for redisplaying the SVG during zooming\n      defs.parentNode.insertBefore(defs, defs);\n      // this refresh is intended for redisplaying the other SVGs on a page when panning a given SVG\n      // it is also needed for the given SVG itself, on zoomEnd, if the SVG contains any markers that\n      // are located under any other element(s).\n      window.setTimeout(function() {\n        that.refreshDefsGlobal();\n      }, that.internetExplorerRedisplayInterval);\n    }\n  },\n\n  /**\n   * Instantiate an SVGPoint object with given event coordinates\n   *\n   * @param {Event} evt\n   * @param  {SVGSVGElement} svg\n   * @return {SVGPoint}     point\n   */\n  getEventPoint: function(evt, svg) {\n    var point = svg.createSVGPoint();\n\n    Utils.mouseAndTouchNormalize(evt, svg);\n\n    point.x = evt.clientX;\n    point.y = evt.clientY;\n\n    return point;\n  },\n\n  /**\n   * Get SVG center point\n   *\n   * @param  {SVGSVGElement} svg\n   * @return {SVGPoint}\n   */\n  getSvgCenterPoint: function(svg, width, height) {\n    return this.createSVGPoint(svg, width / 2, height / 2);\n  },\n\n  /**\n   * Create a SVGPoint with given x and y\n   *\n   * @param  {SVGSVGElement} svg\n   * @param  {Number} x\n   * @param  {Number} y\n   * @return {SVGPoint}\n   */\n  createSVGPoint: function(svg, x, y) {\n    var point = svg.createSVGPoint();\n    point.x = x;\n    point.y = y;\n\n    return point;\n  }\n};\n\n\n//# sourceURL=webpack://playground/./node_modules/svg-pan-zoom/src/svg-utilities.js?");

/***/ }),

/***/ "./node_modules/svg-pan-zoom/src/uniwheel.js":
/*!***************************************************!*\
  !*** ./node_modules/svg-pan-zoom/src/uniwheel.js ***!
  \***************************************************/
/***/ ((module) => {

eval("// uniwheel 0.1.2 (customized)\n// A unified cross browser mouse wheel event handler\n// https://github.com/teemualap/uniwheel\n\nmodule.exports = (function(){\n\n  //Full details: https://developer.mozilla.org/en-US/docs/Web/Reference/Events/wheel\n\n  var prefix = \"\", _addEventListener, _removeEventListener, support, fns = [];\n  var passiveOption = {passive: true};\n\n  // detect event model\n  if ( window.addEventListener ) {\n    _addEventListener = \"addEventListener\";\n    _removeEventListener = \"removeEventListener\";\n  } else {\n    _addEventListener = \"attachEvent\";\n    _removeEventListener = \"detachEvent\";\n    prefix = \"on\";\n  }\n\n  // detect available wheel event\n  support = \"onwheel\" in document.createElement(\"div\") ? \"wheel\" : // Modern browsers support \"wheel\"\n            document.onmousewheel !== undefined ? \"mousewheel\" : // Webkit and IE support at least \"mousewheel\"\n            \"DOMMouseScroll\"; // let's assume that remaining browsers are older Firefox\n\n\n  function createCallback(element,callback) {\n\n    var fn = function(originalEvent) {\n\n      !originalEvent && ( originalEvent = window.event );\n\n      // create a normalized event object\n      var event = {\n        // keep a ref to the original event object\n        originalEvent: originalEvent,\n        target: originalEvent.target || originalEvent.srcElement,\n        type: \"wheel\",\n        deltaMode: originalEvent.type == \"MozMousePixelScroll\" ? 0 : 1,\n        deltaX: 0,\n        delatZ: 0,\n        preventDefault: function() {\n          originalEvent.preventDefault ?\n            originalEvent.preventDefault() :\n            originalEvent.returnValue = false;\n        }\n      };\n\n      // calculate deltaY (and deltaX) according to the event\n      if ( support == \"mousewheel\" ) {\n        event.deltaY = - 1/40 * originalEvent.wheelDelta;\n        // Webkit also support wheelDeltaX\n        originalEvent.wheelDeltaX && ( event.deltaX = - 1/40 * originalEvent.wheelDeltaX );\n      } else {\n        event.deltaY = originalEvent.detail;\n      }\n\n      // it's time to fire the callback\n      return callback( event );\n\n    };\n\n    fns.push({\n      element: element,\n      fn: fn,\n    });\n\n    return fn;\n  }\n\n  function getCallback(element) {\n    for (var i = 0; i < fns.length; i++) {\n      if (fns[i].element === element) {\n        return fns[i].fn;\n      }\n    }\n    return function(){};\n  }\n\n  function removeCallback(element) {\n    for (var i = 0; i < fns.length; i++) {\n      if (fns[i].element === element) {\n        return fns.splice(i,1);\n      }\n    }\n  }\n\n  function _addWheelListener(elem, eventName, callback, isPassiveListener ) {\n    var cb;\n\n    if (support === \"wheel\") {\n      cb = callback;\n    } else {\n      cb = createCallback(elem, callback);\n    }\n\n    elem[_addEventListener](prefix + eventName, cb, isPassiveListener ? passiveOption : false);\n  }\n\n  function _removeWheelListener(elem, eventName, callback, isPassiveListener ) {\n\n    var cb;\n\n    if (support === \"wheel\") {\n      cb = callback;\n    } else {\n      cb = getCallback(elem);\n    }\n\n    elem[_removeEventListener](prefix + eventName, cb, isPassiveListener ? passiveOption : false);\n\n    removeCallback(elem);\n  }\n\n  function addWheelListener( elem, callback, isPassiveListener ) {\n    _addWheelListener(elem, support, callback, isPassiveListener );\n\n    // handle MozMousePixelScroll in older Firefox\n    if( support == \"DOMMouseScroll\" ) {\n      _addWheelListener(elem, \"MozMousePixelScroll\", callback, isPassiveListener );\n    }\n  }\n\n  function removeWheelListener(elem, callback, isPassiveListener){\n    _removeWheelListener(elem, support, callback, isPassiveListener);\n\n    // handle MozMousePixelScroll in older Firefox\n    if( support == \"DOMMouseScroll\" ) {\n      _removeWheelListener(elem, \"MozMousePixelScroll\", callback, isPassiveListener);\n    }\n  }\n\n  return {\n    on: addWheelListener,\n    off: removeWheelListener\n  };\n\n})();\n\n\n//# sourceURL=webpack://playground/./node_modules/svg-pan-zoom/src/uniwheel.js?");

/***/ }),

/***/ "./node_modules/svg-pan-zoom/src/utilities.js":
/*!****************************************************!*\
  !*** ./node_modules/svg-pan-zoom/src/utilities.js ***!
  \****************************************************/
/***/ ((module) => {

eval("module.exports = {\n  /**\n   * Extends an object\n   *\n   * @param  {Object} target object to extend\n   * @param  {Object} source object to take properties from\n   * @return {Object}        extended object\n   */\n  extend: function(target, source) {\n    target = target || {};\n    for (var prop in source) {\n      // Go recursively\n      if (this.isObject(source[prop])) {\n        target[prop] = this.extend(target[prop], source[prop]);\n      } else {\n        target[prop] = source[prop];\n      }\n    }\n    return target;\n  },\n\n  /**\n   * Checks if an object is a DOM element\n   *\n   * @param  {Object}  o HTML element or String\n   * @return {Boolean}   returns true if object is a DOM element\n   */\n  isElement: function(o) {\n    return (\n      o instanceof HTMLElement ||\n      o instanceof SVGElement ||\n      o instanceof SVGSVGElement || //DOM2\n      (o &&\n        typeof o === \"object\" &&\n        o !== null &&\n        o.nodeType === 1 &&\n        typeof o.nodeName === \"string\")\n    );\n  },\n\n  /**\n   * Checks if an object is an Object\n   *\n   * @param  {Object}  o Object\n   * @return {Boolean}   returns true if object is an Object\n   */\n  isObject: function(o) {\n    return Object.prototype.toString.call(o) === \"[object Object]\";\n  },\n\n  /**\n   * Checks if variable is Number\n   *\n   * @param  {Integer|Float}  n\n   * @return {Boolean}   returns true if variable is Number\n   */\n  isNumber: function(n) {\n    return !isNaN(parseFloat(n)) && isFinite(n);\n  },\n\n  /**\n   * Search for an SVG element\n   *\n   * @param  {Object|String} elementOrSelector DOM Element or selector String\n   * @return {Object|Null}                   SVG or null\n   */\n  getSvg: function(elementOrSelector) {\n    var element, svg;\n\n    if (!this.isElement(elementOrSelector)) {\n      // If selector provided\n      if (\n        typeof elementOrSelector === \"string\" ||\n        elementOrSelector instanceof String\n      ) {\n        // Try to find the element\n        element = document.querySelector(elementOrSelector);\n\n        if (!element) {\n          throw new Error(\n            \"Provided selector did not find any elements. Selector: \" +\n              elementOrSelector\n          );\n          return null;\n        }\n      } else {\n        throw new Error(\"Provided selector is not an HTML object nor String\");\n        return null;\n      }\n    } else {\n      element = elementOrSelector;\n    }\n\n    if (element.tagName.toLowerCase() === \"svg\") {\n      svg = element;\n    } else {\n      if (element.tagName.toLowerCase() === \"object\") {\n        svg = element.contentDocument.documentElement;\n      } else {\n        if (element.tagName.toLowerCase() === \"embed\") {\n          svg = element.getSVGDocument().documentElement;\n        } else {\n          if (element.tagName.toLowerCase() === \"img\") {\n            throw new Error(\n              'Cannot script an SVG in an \"img\" element. Please use an \"object\" element or an in-line SVG.'\n            );\n          } else {\n            throw new Error(\"Cannot get SVG.\");\n          }\n          return null;\n        }\n      }\n    }\n\n    return svg;\n  },\n\n  /**\n   * Attach a given context to a function\n   * @param  {Function} fn      Function\n   * @param  {Object}   context Context\n   * @return {Function}           Function with certain context\n   */\n  proxy: function(fn, context) {\n    return function() {\n      return fn.apply(context, arguments);\n    };\n  },\n\n  /**\n   * Returns object type\n   * Uses toString that returns [object SVGPoint]\n   * And than parses object type from string\n   *\n   * @param  {Object} o Any object\n   * @return {String}   Object type\n   */\n  getType: function(o) {\n    return Object.prototype.toString\n      .apply(o)\n      .replace(/^\\[object\\s/, \"\")\n      .replace(/\\]$/, \"\");\n  },\n\n  /**\n   * If it is a touch event than add clientX and clientY to event object\n   *\n   * @param  {Event} evt\n   * @param  {SVGSVGElement} svg\n   */\n  mouseAndTouchNormalize: function(evt, svg) {\n    // If no clientX then fallback\n    if (evt.clientX === void 0 || evt.clientX === null) {\n      // Fallback\n      evt.clientX = 0;\n      evt.clientY = 0;\n\n      // If it is a touch event\n      if (evt.touches !== void 0 && evt.touches.length) {\n        if (evt.touches[0].clientX !== void 0) {\n          evt.clientX = evt.touches[0].clientX;\n          evt.clientY = evt.touches[0].clientY;\n        } else if (evt.touches[0].pageX !== void 0) {\n          var rect = svg.getBoundingClientRect();\n\n          evt.clientX = evt.touches[0].pageX - rect.left;\n          evt.clientY = evt.touches[0].pageY - rect.top;\n        }\n        // If it is a custom event\n      } else if (evt.originalEvent !== void 0) {\n        if (evt.originalEvent.clientX !== void 0) {\n          evt.clientX = evt.originalEvent.clientX;\n          evt.clientY = evt.originalEvent.clientY;\n        }\n      }\n    }\n  },\n\n  /**\n   * Check if an event is a double click/tap\n   * TODO: For touch gestures use a library (hammer.js) that takes in account other events\n   * (touchmove and touchend). It should take in account tap duration and traveled distance\n   *\n   * @param  {Event}  evt\n   * @param  {Event}  prevEvt Previous Event\n   * @return {Boolean}\n   */\n  isDblClick: function(evt, prevEvt) {\n    // Double click detected by browser\n    if (evt.detail === 2) {\n      return true;\n    }\n    // Try to compare events\n    else if (prevEvt !== void 0 && prevEvt !== null) {\n      var timeStampDiff = evt.timeStamp - prevEvt.timeStamp, // should be lower than 250 ms\n        touchesDistance = Math.sqrt(\n          Math.pow(evt.clientX - prevEvt.clientX, 2) +\n            Math.pow(evt.clientY - prevEvt.clientY, 2)\n        );\n\n      return timeStampDiff < 250 && touchesDistance < 10;\n    }\n\n    // Nothing found\n    return false;\n  },\n\n  /**\n   * Returns current timestamp as an integer\n   *\n   * @return {Number}\n   */\n  now:\n    Date.now ||\n    function() {\n      return new Date().getTime();\n    },\n\n  // From underscore.\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time. Normally, the throttled function will run\n  // as much as it can, without ever going more than once per `wait` duration;\n  // but if you'd like to disable the execution on the leading edge, pass\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\n  throttle: function(func, wait, options) {\n    var that = this;\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    if (!options) {\n      options = {};\n    }\n    var later = function() {\n      previous = options.leading === false ? 0 : that.now();\n      timeout = null;\n      result = func.apply(context, args);\n      if (!timeout) {\n        context = args = null;\n      }\n    };\n    return function() {\n      var now = that.now();\n      if (!previous && options.leading === false) {\n        previous = now;\n      }\n      var remaining = wait - (now - previous);\n      context = this; // eslint-disable-line consistent-this\n      args = arguments;\n      if (remaining <= 0 || remaining > wait) {\n        clearTimeout(timeout);\n        timeout = null;\n        previous = now;\n        result = func.apply(context, args);\n        if (!timeout) {\n          context = args = null;\n        }\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  },\n\n  /**\n   * Create a requestAnimationFrame simulation\n   *\n   * @param  {Number|String} refreshRate\n   * @return {Function}\n   */\n  createRequestAnimationFrame: function(refreshRate) {\n    var timeout = null;\n\n    // Convert refreshRate to timeout\n    if (refreshRate !== \"auto\" && refreshRate < 60 && refreshRate > 1) {\n      timeout = Math.floor(1000 / refreshRate);\n    }\n\n    if (timeout === null) {\n      return window.requestAnimationFrame || requestTimeout(33);\n    } else {\n      return requestTimeout(timeout);\n    }\n  }\n};\n\n/**\n * Create a callback that will execute after a given timeout\n *\n * @param  {Function} timeout\n * @return {Function}\n */\nfunction requestTimeout(timeout) {\n  return function(callback) {\n    window.setTimeout(callback, timeout);\n  };\n}\n\n\n//# sourceURL=webpack://playground/./node_modules/svg-pan-zoom/src/utilities.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			loaded: false,
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/amd define */
/******/ 	(() => {
/******/ 		__webpack_require__.amdD = function () {
/******/ 			throw new Error('define cannot be used indirect');
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/amd options */
/******/ 	(() => {
/******/ 		__webpack_require__.amdO = {};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/node module decorator */
/******/ 	(() => {
/******/ 		__webpack_require__.nmd = (module) => {
/******/ 			module.paths = [];
/******/ 			if (!module.children) module.children = [];
/******/ 			return module;
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./js/Playground.js");
/******/ 	
/******/ })()
;